const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/WatchlistSelections-Cf_CGFQ9.js","assets/vendors-CICR9AUe.js","assets/vite-D9Bl2idj.js","assets/i18n-BkEVeW0K.js","assets/icons-DflTwJTJ.js","assets/platform-iET1yxQc.js","assets/emoji-picker-react.esm-CnqzA6rL.js","assets/FileUploadModal-CzfpPMFa.js","assets/SourcesTable-VIf-ryC1.js","assets/ConnectorsSourceSection-Bg_Je5mC.js","assets/useDropboxPickerUpload-BPSMj9Sh.js","assets/fileTypes-C5bw0kTb.js","assets/FilesTableHeader-3V0Ppak3.js","assets/CollectionCreateEditModal-JxJlX7q5.js","assets/getMaybeTranslatedCollectionTitle-CzDo4RIR.js","assets/CollectionSelectModal-DKbCF2sc.js","assets/faBookmark-DAWQV7Uc.js","assets/faCircleCheck-BBqe0Cdc.js","assets/OnboardingModal-DPLN00a7.js","assets/MarkdownRenderer-CN-KvvYy.js","assets/CodeBlock-DmG4a2dK.js","assets/index-CAOAhx3J.js","assets/MarkdownStreamer-B7GP222G.js","assets/Progress-B6i46rkG.js","assets/useHandleClickPricing-xGj5RFNc.js","assets/useReferralCode-C4k4XzbW.js","assets/IntlPhoneInput-POhmExu4.js","assets/IntlPhoneInput-C5Iq5FTb.css","assets/notificationQueries-y7VlgV0x.js","assets/phoneNumberUtils-2CNvKPPc.js","assets/PlatformOptions-CA9SHzvX.js","assets/useIsEnterpriseCombinedPaywallEnabled-DfNjo6D1.js","assets/SheerIDModal-DeTV34Vw.js","assets/StudentReferralsContent-D7C_6SSC.js","assets/CanonicalPattern-CUYuoJjE.js","assets/PurchaseConfirmationToast-0iQdRYSr.js","assets/use-unmount-effect-Cyl6gmgZ.js","assets/index-Dkh1sUiG.js","assets/CompanyDataPrivacyModal-C7hBDpfC.js","assets/SpaceVideoModal-BudCOj4o.js","assets/PricingTableModal-Dt7aJb_m.js","assets/FreeTrialModal-B6MPUPvh.js","assets/MapModal-DtUbKSZP.js","assets/faCircleDot-BvKTfeWl.js","assets/PerplexityMap-FoKm0D-E.js","assets/PulsingDot-B5T6xJEa.js","assets/InputPaymentModal-Vgf3dtlb.js","assets/useStripePromise-BKEXDl-X.js","assets/ShoppingPaymentModal-CKuHfPNE.js","assets/DiscountTag-CUC6ZHX_.js","assets/ShoppingOptionRow-BIBoko-M.js","assets/useStripeAppearance-B18srz6D.js","assets/useCreateSetupIntentAndCheckoutSession-D3IwRVeK.js","assets/EntityItemImageCarousel-Cu6VCMaP.js","assets/ShoppingPaymentBillingBox-BxtJoc3n.js","assets/useCreateFirmlyCart-egn_rEb2.js","assets/ShoppingOnboardingModal-Sf1r6QjO.js","assets/PurchaseDetailsModal-CEOeSWiJ.js","assets/PurchaseStatus-DeQvMrkh.js","assets/ReservationDetailsModal-BBq_A-2s.js","assets/util-0H3Nw25N.js","assets/SpaceSettingsModal-co77TpHg.js","assets/UsernameModal-CLZ6a77a.js","assets/FullNameModal-BBzf8LVO.js","assets/KeyboardShortcutEditorModal-B4xNzfNS.js","assets/VoiceToVoiceModal-q9H0eJTi.js","assets/constants-BMlFizJj.js","assets/SearchStepsAssetsModal-DACc-yXB.js","assets/GeneratedVideoCard-DahzmttN.js","assets/CodeFileContentRenderer-BwpJM-yl.js","assets/useAssetInfo-BF1KXPVO.js","assets/MemoryListModal-CuHsLYhS.js","assets/HotelRoomDetailsModal-CKPxHwaO.js","assets/MaybeAdjustedPrice-Sps6OcIx.js","assets/ImagePagedCarousel-Be_yaU4r.js","assets/PaymentModal-BVrZhUo7.js","assets/ProReferralModal-BS13jA3o.js","assets/emailUtils-_jxwJ1Ij.js","assets/MeetingDefaultsModal-DrR2tnxO.js","assets/AvailabilityModal-BokBkVvm.js","assets/Select-XfqTgnHq.js","assets/ProMessageModal-CIF217yP.js","assets/MemorySearchHistoryIntroModal-CZfsqrqG.js","assets/SubSuccessModal-BCi4NaWw.js","assets/ReferralErrorModal-ODkgoCGn.js","assets/ReferralSuccessModal-cHuVP5iL.js","assets/IncentiveProModal-CdD12WXl.js","assets/StudentReferralsModal-D3jLX_k5.js","assets/PaypalSubscriptionModal-BLmgl6VK.js","assets/RestaurantBookingModal-BBImwqa2.js","assets/SheerIdRedirectModal-DIo3aeBH.js","assets/EnterprisePremiumSecureUpgradeModal-BEk3pXV1.js","assets/useOrgPremiumSecureFeatures-4P7zK3vU.js","assets/ShortcutModal-Cln035w4.js","assets/FinanceAddAlert-CIGu6tPU.js","assets/PlatformOptionsModal-Bf40GMFl.js","assets/SharepointSiteModal-bY1z90b-.js","assets/MCPServerModal-Dg5-AHKV.js","assets/AppDownloadQR-DGwMx9Hs.js","assets/SideStudyModeViewer-D5y7LwY1.js","assets/SidePDFViewer-D-dUv50E.js","assets/RenderToolbar-CNswzSE5.js","assets/DebugModeActivator-BDBHmVh6.js","assets/LexicalClearEditorPlugin.prod-NTagxKbT.js","assets/LexicalHistoryPlugin.prod-DrFichbb.js","assets/LexicalOnChangePlugin.prod-Cm3bsdKu.js","assets/LexicalEditorRefPlugin.prod-CwI8Dc1a.js","assets/AutoLinkPlugin-CLWo344t.js","assets/LinkPlugin-DMpbDa5M.js","assets/LexicalMarkdownShortcutPlugin.prod-_y4IU9Fr.js","assets/index-C3FxZ4wa.js","assets/WelcomeOverlay-ByCTuUGO.js","assets/ShoppingDetailsModal-zfS74Kzj.js","assets/ShoppingWidget-BT9_AzH8.js","assets/EntityItemReviewSummary-Do1WM1tl.js","assets/ThreadEntryVideo-Dt5Je0oQ.js","assets/useSponsoredImpressionTracking-DEopMcKz.js","assets/useViewportDwellObserver-C7CHoc3k.js","assets/CitationPile-CCwdYJ0m.js","assets/CitationTrendingList-BNmTxwV5.js","assets/useNewFileViewer-BlyL9FzU.js","assets/useIsShoppingtryOnEnabled-CXSyOtpW.js","assets/ShopifyPurchaseModal-C36uLHqL.js","assets/ShopifyPurchaseModalMobile-BGnO-lzS.js","assets/ShoppingViewMoreModal-hyRDqkxx.js","assets/SplitModal-BTicYnfo.js","assets/useSearchForAdditionalProducts-B-0l3WgC.js","assets/index-Dlk1aEme.js","assets/CharityWidget-K5XMlb5M.js","assets/BrandPopoverContent-CG-VNYwd.js","assets/cdn-C8d6_FM1.js","assets/MissionControlPage-DX0-RLpT.js","assets/_restricted/restricted-feature-mission-control-iGuTkgvt.js","assets/StepRenderer-9lRE_CXM.js","assets/CodeStep-C8PuXSIi.js","assets/useCometMcpEnabled-BuX40mkk.js","assets/SideCanvasViewer-JUJ2OX10.js","assets/AppsMode-Rb0Nt3fE.js","assets/useDurationTracker-Bm6k6NoT.js","assets/ConnectorAuthorizationPrompt-ODY3LdL7.js","assets/AgentWorkflow-NdlbMA47.js","assets/MarkdownResponse-DCSIGJIE.js","assets/ThreadEntryFooter-DNHb-k9e.js","assets/StructuredAnswerInlineBlock-xGLO3sHB.js","assets/PlaceInlineCard-CgLE1ruY.js","assets/MapboxURLs-4yEd9e3N.js","assets/CardCarouselV2-BYPD1W7f.js","assets/ImagesModePreview-BL1K32Ng.js","assets/useGenerateShoppingReviewSummary-oNHbYybg.js","assets/utils-DbK04ZqM.js","assets/CanonicalContainer-D3KAC5mH.js","assets/CanonicalPatternBackground-DFIp0gtV.js","assets/FinanceMover-D_cIc1Q6.js","assets/FollowConfirmationToast-CAsZCWmf.js","assets/useFollowEntity-gd8naAE0.js","assets/QueryComponents-BN8RO8A9.js","assets/not-found-CloPrRr2.js","assets/TimeAgoTooltip-B7jjn7uc.js","assets/ReportModal-CGq6y7sP.js","assets/CopyOutputButton-DY6xyyeA.js","assets/Related-B6uJPznA.js","assets/RelatedPrompts-Bg64W4wo.js","assets/index-BMjueB75.js","assets/ThreadContentResponse-BlKH5Dt9.js","assets/ThreadContentResponse-D7yYMk4g.css","assets/SourcesModePreview-CE2KdgKR.js","assets/AnswerComparisonModal-qfQ3EMt3.js","assets/ShoppingMode-Dgv5vVPk.js","assets/ShoppingFeaturedWidget-23f3MawP.js","assets/ModesNullState-B6p7F1u9.js","assets/HotelsMode-ChMJRJvN.js","assets/useHotelSearchParams-BOTmxTRK.js","assets/SharedAnswerModeMap-DEA7rt5N.js","assets/JobsMode-DeORj42g.js","assets/VideosMode-DwUN005D.js","assets/useMediaSearch-DSf9lTYs.js","assets/ImagesMode-aqn1aVaz.js","assets/ImageGeneratorLoader-j87njLQr.js","assets/MapsMode-DyWj1C6l.js","assets/AssetsMode-G7Vl3FKc.js","assets/TasksMode-BTFFY99W.js","assets/index-DcMDMnB-.js","assets/search-loading-component-Hn_dhMZO.js","assets/CometZenMode-Dcb53Qc3.js","assets/index.module-CmBNGBGb.js","assets/TryAssistantPage-BOFiNmgZ.js","assets/library-PmS87Aw5.js","assets/ArticleListItem-BSgvkjzT.js","assets/index-DdGHYOFU.js","assets/useSpacesBookmarking-BDAhxmIS.js","assets/templates-CWllxLbS.js","assets/slug-D2xAVHFR.js","assets/useOrgUsers-D1jvDCzQ.js","assets/faEllipsis-Byr9GSTJ.js","assets/slug-CHUvmdw2.js","assets/DiscoverTrending-CwFtvstZ.js","assets/loading-Dvj7Itu2.js","assets/PageIndex-B2X3GuwE.js","assets/academic-Cm2FPWXE.js","assets/VerticalSearchContainer-C_ceQLr0.js","assets/CanonicalQuery-bF8CIG-2.js","assets/shopping-D94vBpHL.js","assets/hotels-DFLPYIs_.js","assets/WithMenu-V9ax9C4m.js","assets/perplexify_me-C3OmFCUK.js","assets/travel-BbtGx4rU.js","assets/discover-DIya1y7X.js","assets/TaskStarterCards-D2bBWG6e.js","assets/index-lgDZJvvb.js","assets/index-BZlLLpP6.js","assets/F1Header-DXsU1j-H.js","assets/IndvCompetitorWithFlag-CanDhtW0.js","assets/MonthTabs-DvtuHw2P.js","assets/SportsTournamentOdds-CmdfUpZL.js","assets/transform-Bdgp5Qu9.js","assets/SportsWhatsHappening-BlVwWg_s.js","assets/WhatsHappening-FzRxuL_Q.js","assets/events-BU9oJF1-.js","assets/SportsIOSNotificationSub-wYK0NP6X.js","assets/index-DohuUQve.js","assets/common-BSaJKGub.js","assets/MultiTeamSchedule-DgHeqzgc.js","assets/SportsCanonicalLinks-VMCfZNIU.js","assets/WeekTabs-NiYtWsxi.js","assets/SportsConferenceList-Cd3uxIoQ.js","assets/SingleTeamEventRow-tU4W9U4I.js","assets/TeamPicker-BG-eXVxG.js","assets/BaseSportsBracket-BscnfTQv.js","assets/SportsBracket-D-MOwzQK.js","assets/SportsTeamStandings-C5Mr8BB1.js","assets/stats-D6WqkxuN.js","assets/events-q6ZUl9Vp.js","assets/EventLiveOdds-BWlCDC3w.js","assets/SportsComparisonArcs-Dj9MS7o4.js","assets/SportsGamePreviewHeader-sx-WDmSZ.js","assets/BlazeHighlights-BYsV_-Ss.js","assets/BlazeProvider-D5pVFlJY.js","assets/BlazeHighlights-BKCxT22M.css","assets/SportsGameSummaryHeader-DVPfPPtC.js","assets/utils-BMC8zcfJ.js","assets/NBAGameLeadersStats-CLCZ6OW-.js","assets/SportsGameRelatedGames-DRI8H7Tq.js","assets/SportsInjuryReport-DtEjvKGZ.js","assets/SportsGamePlayerHeadshot-CeuYH1IC.js","assets/SportsMultiTeamSeasonLeadersStats-CpLIciDu.js","assets/NBASportsTeamSeasonComparison-JRDaK0PJ.js","assets/SportsTeamSeasonComparison-Cw2hwKsQ.js","assets/SportsDataTableComparison-D7ySo7Bi.js","assets/SportsTeamGameComparison-C7_nnaji.js","assets/teams-xCSNWXxe.js","assets/SportsBlazeVideoHighlights-CaperfBv.js","assets/players-dm0Fgebp.js","assets/RelatedQuestions-oGjHZ9Pg.js","assets/index-a1zqcRd5.js","assets/events-D_2IQdvB.js","assets/teams-__eerHdb.js","assets/players-BjbpMUSo.js","assets/index-CYohnnOU.js","assets/tournament-CCLH-O0g.js","assets/events-BMQB3I_s.js","assets/EventV2LiveOdds-orUjGB7U.js","assets/index-B9c2ltyV.js","assets/MLBEventSchedule-CRowbzVL.js","assets/scheduleUtils-j1MlWtWo.js","assets/events-Bmr4WTTl.js","assets/CricketMatchStats-UqOIZBs-.js","assets/events-Dq1FjCGT.js","assets/useShowIccCricketVariation-RMODegfY.js","assets/index-Cd4akEh6.js","assets/index-DZ-p3f5N.js","assets/index-DWM9K0s8.js","assets/GolfHeader-KjmRGr1Q.js","assets/TennisLeagueSchedule-DSleVgCA.js","assets/events-Bf1TW9Kc.js","assets/index-7nh7bYBY.js","assets/events-wMxTn-Yh.js","assets/events-CZmolcbx.js","assets/index-i4fAJoYU.js","assets/index-DVIacTb4.js","assets/TennisHeader-FEJGAbC6.js","assets/useTennis2025Variation-B6flQIGl.js","assets/events-CRP0quba.js","assets/TennisTournamentBracket-B71Ys1V2.js","assets/tournaments-skSI9_DP.js","assets/sub-router-DzcNugtq.js","assets/WhatsHappeningHorizontal-Dphlwe4t.js","assets/NotFound-DdbcxDda.js","assets/index-Cbzd8BPB.js","assets/details-DMOvLw3x.js","assets/group-Bl763rX5.js","assets/page-gate-C4UkxBNL.js","assets/APIPortalBillingBanner-CRa_xwRA.js","assets/CreateAPIGroupModal-BOnW1S3j.js","assets/apiPortalQueries-AIKPSdcI.js","assets/useAPIAdmin-BwlZ8gFB.js","assets/settingsAccess-B1PF9uWN.js","assets/members-3BLaGjqY.js","assets/MembersTablePagination-BQu31EXl.js","assets/billing-CgkpqSLT.js","assets/keys-B7J02twp.js","assets/limits-BjvawNr7.js","assets/files-sb7a_yan.js","assets/files-repo-BZwcQyyF.js","assets/index-D9_Utnqp.js","assets/pro-perks-gEhnTNSC.js","assets/settingsAccess-yfy7s_QO.js","assets/pro-perks-detail-B0JFVFP9.js","assets/index-f4uUNA_l.js","assets/access-P492U1q7.js","assets/index-Czef56VG.js","assets/useOrgMutations-CWUHiM3y.js","assets/useEnterprisePremiumSecureEnabled-CLltmB9M.js","assets/useIsThreadRetentionEnabled-DvLsCiTc.js","assets/members-BNfG6irp.js","assets/insights-7e2s34YY.js","assets/user-access-D88OzYea.js","assets/permissions-CgZmAQex.js","assets/files-LrfzHJCf.js","assets/FileData-BjA0UdDU.js","assets/connectors-CNed0Q11.js","assets/purchases-D9FFmZ3o.js","assets/useMutationState-CFRTb3MZ.js","assets/reservations-DOGGpJ1e.js","assets/index-DCTjGZsn.js","assets/TaskListItem-DflSf01W.js","assets/task-BzCXC8sw.js","assets/shortcuts-B0FJw54t.js","assets/site-instructions-BBwmd8bl.js","assets/SettingsMain-C3_ODzOs.js","assets/preferences-F4MqdxkW.js","assets/personalize-DDumMHRF.js","assets/notifications-6ZmFcs5e.js","assets/files-CVJAm_Bm.js","assets/connectors-CY5KecAo.js","assets/index-BUzp9tgD.js"])))=>i.map(i=>d[i]);
import{g as yn,s as qt,l as ee,a as Vne,u as Ht,b as At,c as Pt,L as at,P as T0,d as R3e,r as Fd,e as uo,f as cl,h as Il,i as I3e,j as er,k as $ne,R as yr,n as j3e,m as Wl,S as Ve,o as Ts,p as O3e,F as O6,q as ul,t as L3e,D as ge,$ as Kr,v as D3e,w as aS,x as eh,y as F3e,z as U3e,A as B3e,B as V3e,C as Gj,E as $3e,G as W3e,H as H3e,I as z3e,J as G3e,K as q3e,M as aB,N as oB,O as K3e,Q as Y3e,T as Q3e,U as X3e,V as Z3e,W as J3e,X as e4e,Y as t4e,Z as oS,_ as n4e,a0 as r4e,a1 as Td,a2 as s4e,a3 as a4e,a4 as qj,a5 as Kj,a6 as o4e,a7 as jl,a8 as WM,a9 as fx}from"./platform-iET1yxQc.js";import{r as f,e as Zh,k as i4e,l as ua,R as A,j as l,f as B,i as Ss,$ as Yj,m as Wne,n as Rn,o as Hne,p as ks,_ as zn,b as Qj,c as Ge,a as Xj,q as l4e,t as yo,u as c4e,v as zne,w as Gne,x as iB,y as iS,z as qne,A as u4e,B as k0,C as lB,D as d4e}from"./vendors-CICR9AUe.js";import{T as be,c as Ea,d as L6,e as Zr,f as Xt,g as Zj,a as lS,I as Jj,h as f4e,i as fo,j as th,k as ya,l as cc,m as cS,n as Kne,o as by,p as Yne,q as m4e,r as h4e,s as Jr,t as uS,u as mr,v as uc,w as nh,x as p4e,y as hf,z as Qne,A as N0,B as g4e,C as y4e,D as v4e,E as dS,F as Xne,G as e8,H as D6,J as V_,K as A0,L as P0,M as x4e,N as b4e,O as _4e,P as Zne,Q as Jne,R as Ra,S as w4e,U as S4e,V as ere,W as C4e,X as E4e,Y as tre,Z as M4e,_ as T4e,$ as pf,a0 as Gl,a1 as t8,a2 as k4e,a3 as ql,a4 as gf,a5 as nre,a6 as $_,a7 as rre,a8 as sre,a9 as are,aa as ore,ab as N4e,ac as ire,ad as ov,ae as lre,af as A4e,ag as P4e,ah as W_,ai as cre,aj as ure,ak as dre,al as fre,am as R4e,an as F6,ao as I4e,ap as j4e,aq as Qb,ar as O4e,as as mre,at as fS,au as H_,av as L4e,aw as D4e,ax as hre,ay as pre,az as n8,aA as U6,aB as r8,aC as F4e,aD as gre,aE as mS,aF as U4e,aG as R0,b as dl,aH as B4e,aI as V4e,aJ as $4e,aK as s8,aL as a8,aM as o8,aN as W4e,aO as H4e,aP as yre,aQ as z4e,aR as vre,aS as cB,aT as G4e,aU as i8,aV as Xb,aW as q4e,aX as K4e,aY as Y4e,aZ as B6,a_ as z_,a$ as xre,b0 as hS,b1 as Q4e,b2 as lu,b3 as Tu,b4 as bre,b5 as l8,b6 as _re,b7 as X4e,b8 as Z4e,b9 as V6,ba as wre,bb as Sre,bc as J4e,bd as eTe,be as tTe,bf as Cre,bg as nTe,bh as Ere,bi as Mre,bj as Tre,bk as kre,bl as G_,bm as uB,bn as Nre,bo as Are,bp as Pre,bq as rTe,br as cu,bs as sTe,bt as Rre,bu as aTe,bv as Ire,bw as jre,bx as oTe,by as $6,bz as dB,bA as iTe,bB as pS,bC as lTe,bD as cTe,bE as uTe,bF as dTe,bG as fTe,bH as W6,bI as mTe,bJ as hTe,bK as pTe,bL as gTe,bM as yTe,bN as Ore,bO as Lre,bP as Dre,bQ as Fre,bR as c8,bS as Ure,bT as Bre,bU as vTe,bV as Ud,bW as xTe,bX as Vre,bY as bTe,bZ as _Te,b_ as wTe,b$ as STe,c0 as iv,c1 as CTe,c2 as ETe,c3 as MTe,c4 as $re,c5 as TTe,c6 as H6,c7 as kTe,c8 as HM,c9 as NTe,ca as Cm,cb as Wre,cc as ATe,cd as PTe,ce as RTe,cf as ITe,cg as u8,ch as gS,ci as yS,cj as jTe,ck as OTe,cl as LTe,cm as DTe,cn as Hre,co as FTe,cp as fB,cq as UTe,cr as BTe,cs as VTe,ct as $Te,cu as d8,cv as WTe,cw as HTe,cx as zTe,cy as GTe,cz as qTe,cA as KTe,cB as YTe,cC as QTe,cD as mB,cE as XTe,cF as ZTe,cG as JTe,cH as f8,cI as eke,cJ as tke,cK as nke,cL as rke,cM as zre,cN as ske,cO as ake,cP as oke,cQ as ike,cR as lke,cS as cke,cT as hB,cU as uke,cV as dke,cW as fke,cX as mke,cY as hke,cZ as Gre,c_ as pB,c$ as zM,d0 as gB,d1 as yB,d2 as GM,d3 as qM,d4 as vB,d5 as dg,d6 as pke,d7 as gke,d8 as yke,d9 as vke,da as xke,db as bke,dc as _ke,dd as wke,de as Ske,df as Cke,dg as Eke,dh as Mke,di as Tke,dj as kke,dk as Nke,dl as Ake,dm as Pke,dn as qre,dp as Kre,dq as Rke,dr as Ike,ds as Yre,dt as jke,du as Oke,dv as Lke,dw as Dke}from"./icons-DflTwJTJ.js";import{u as X,m as Fke,d as vt,M as he,a as J,c as Uke,F as z6,I as Bke,b as Vke,e as $ke,f as Qre}from"./i18n-BkEVeW0K.js";import{_ as oe,c as La,a as Ha,g as Jh}from"./vite-D9Bl2idj.js";function Wke(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();const Hke=["grey","teal","brown","maroon","red","orange","gold","yellow","green","blue","purple"],Xre=e=>{if(!e)return null;try{const n=JSON.parse(e)?.name;if(n&&Hke.includes(n))return n}catch{}return null};function zke(){const e=yn("colorSchemeTheme"),t=yn("colorScheme"),n=Xre(e);n&&(document.documentElement.dataset.theme=n),t&&(document.documentElement.dataset.colorScheme=t)}zke();var Gke={};const xB="/rest/event/analytics",G6="pplx.visitor-id",q6="pplx.session-id",lv="pplx.trackingAllowed",qke="http://default-analytics-service:8000",Kke=()=>Gke.ANALYTICS_SERVICE_URL||qke,Yke=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function Zre(e){return typeof e=="string"&&Yke.test(e)}const ss=[];for(let e=0;e<256;++e)ss.push((e+256).toString(16).slice(1));function Qke(e,t=0){return(ss[e[t+0]]+ss[e[t+1]]+ss[e[t+2]]+ss[e[t+3]]+"-"+ss[e[t+4]]+ss[e[t+5]]+"-"+ss[e[t+6]]+ss[e[t+7]]+"-"+ss[e[t+8]]+ss[e[t+9]]+"-"+ss[e[t+10]]+ss[e[t+11]]+ss[e[t+12]]+ss[e[t+13]]+ss[e[t+14]]+ss[e[t+15]]).toLowerCase()}let KM;const Xke=new Uint8Array(16);function Zke(){if(!KM){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");KM=crypto.getRandomValues.bind(crypto)}return KM(Xke)}const Jke=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),bB={randomUUID:Jke};function ar(e,t,n){if(bB.randomUUID&&!e)return bB.randomUUID();e=e||{};const r=e.random??e.rng?.()??Zke();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Qke(r)}const e5e=365;function t5e(){try{yn(G6)||qt(G6,ar(),{expires:e5e})}catch{}try{yn(q6)||qt(q6,ar())}catch{}}t5e();const n5e=["Europe/Vienna","Europe/Brussels","Europe/Sofia","Europe/Zagreb","Asia/Famagusta","Asia/Nicosia","Europe/Prague","Europe/Copenhagen","Europe/Tallinn","Europe/Helsinki","Europe/Paris","Europe/Berlin","Europe/Busingen","Europe/Athens","Europe/Budapest","Europe/Dublin","Europe/Rome","Europe/Riga","Europe/Vilnius","Europe/Luxembourg","Europe/Malta","Europe/Amsterdam","Europe/Warsaw","Atlantic/Azores","Atlantic/Madeira","Europe/Lisbon","Europe/Bucharest","Europe/Bratislava","Europe/Ljubljana","Africa/Ceuta","Atlantic/Canary","Europe/Madrid","Europe/Stockholm"];function _B(){try{const e=Intl.DateTimeFormat().resolvedOptions().timeZone;return n5e.includes(e)||e.includes("Europe")}catch(e){return ee.warn("Error detecting user timezone:",e),!0}}function Jre(){const[e,t]=f.useState(!1),[n,r]=f.useState(!1),[s,a]=f.useState(!1);f.useEffect(()=>{const i=c=>{c?.detail?.consent==="ALLOW"?t(!0):t(!1)};return window.addEventListener("consentChange",i),()=>{window.removeEventListener("consentChange",i)}},[]),f.useEffect(()=>{if(!_B()){t(!0),r(!0);return}yn(lv)==="true"&&t(!0),r(!0)},[]),f.useEffect(()=>{!yn(lv)&&_B()&&a(!0)},[]);const o=()=>{a(!1)};return f.useMemo(()=>({hasConsent:e,checkedConsent:n,showCookieConsentPopup:s,closeCookieConsentPopup:o}),[n,e,s])}var YM={},QM={exports:{}},wB;function vS(){return wB||(wB=1,function(e){function t(n){return n&&n.__esModule?n:{default:n}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(QM)),QM.exports}var XM={exports:{}},SB;function I0(){return SB||(SB=1,function(e){function t(n){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(XM)),XM.exports}var ZM={exports:{}},CB;function r5e(){return CB||(CB=1,function(e){var t=I0().default;function n(){e.exports=n=function(){return s},e.exports.__esModule=!0,e.exports.default=e.exports;var r,s={},a=Object.prototype,o=a.hasOwnProperty,i=Object.defineProperty||function(U,V,W){U[V]=W.value},c=typeof Symbol=="function"?Symbol:{},u=c.iterator||"@@iterator",d=c.asyncIterator||"@@asyncIterator",m=c.toStringTag||"@@toStringTag";function h(U,V,W){return Object.defineProperty(U,V,{value:W,enumerable:!0,configurable:!0,writable:!0}),U[V]}try{h({},"")}catch{h=function(W,H,G){return W[H]=G}}function p(U,V,W,H){var G=V&&V.prototype instanceof w?V:w,K=Object.create(G.prototype),$=new L(H||[]);return i(K,"_invoke",{value:P(U,W,$)}),K}function g(U,V,W){try{return{type:"normal",arg:U.call(V,W)}}catch(H){return{type:"throw",arg:H}}}s.wrap=p;var y="suspendedStart",v="suspendedYield",x="executing",b="completed",_={};function w(){}function S(){}function C(){}var E={};h(E,u,function(){return this});var M=Object.getPrototypeOf,T=M&&M(M(F([])));T&&T!==a&&o.call(T,u)&&(E=T);var I=C.prototype=w.prototype=Object.create(E);function j(U){["next","throw","return"].forEach(function(V){h(U,V,function(W){return this._invoke(V,W)})})}function N(U,V){function W(G,K,$,q){var Z=g(U[G],U,K);if(Z.type!=="throw"){var se=Z.arg,Y=se.value;return Y&&t(Y)=="object"&&o.call(Y,"__await")?V.resolve(Y.__await).then(function(Q){W("next",Q,$,q)},function(Q){W("throw",Q,$,q)}):V.resolve(Y).then(function(Q){se.value=Q,$(se)},function(Q){return W("throw",Q,$,q)})}q(Z.arg)}var H;i(this,"_invoke",{value:function(K,$){function q(){return new V(function(Z,se){W(K,$,Z,se)})}return H=H?H.then(q,q):q()}})}function P(U,V,W){var H=y;return function(G,K){if(H===x)throw Error("Generator is already running");if(H===b){if(G==="throw")throw K;return{value:r,done:!0}}for(W.method=G,W.arg=K;;){var $=W.delegate;if($){var q=R($,W);if(q){if(q===_)continue;return q}}if(W.method==="next")W.sent=W._sent=W.arg;else if(W.method==="throw"){if(H===y)throw H=b,W.arg;W.dispatchException(W.arg)}else W.method==="return"&&W.abrupt("return",W.arg);H=x;var Z=g(U,V,W);if(Z.type==="normal"){if(H=W.done?b:v,Z.arg===_)continue;return{value:Z.arg,done:W.done}}Z.type==="throw"&&(H=b,W.method="throw",W.arg=Z.arg)}}}function R(U,V){var W=V.method,H=U.iterator[W];if(H===r)return V.delegate=null,W==="throw"&&U.iterator.return&&(V.method="return",V.arg=r,R(U,V),V.method==="throw")||W!=="return"&&(V.method="throw",V.arg=new TypeError("The iterator does not provide a '"+W+"' method")),_;var G=g(H,U.iterator,V.arg);if(G.type==="throw")return V.method="throw",V.arg=G.arg,V.delegate=null,_;var K=G.arg;return K?K.done?(V[U.resultName]=K.value,V.next=U.nextLoc,V.method!=="return"&&(V.method="next",V.arg=r),V.delegate=null,_):K:(V.method="throw",V.arg=new TypeError("iterator result is not an object"),V.delegate=null,_)}function k(U){var V={tryLoc:U[0]};1 in U&&(V.catchLoc=U[1]),2 in U&&(V.finallyLoc=U[2],V.afterLoc=U[3]),this.tryEntries.push(V)}function O(U){var V=U.completion||{};V.type="normal",delete V.arg,U.completion=V}function L(U){this.tryEntries=[{tryLoc:"root"}],U.forEach(k,this),this.reset(!0)}function F(U){if(U||U===""){var V=U[u];if(V)return V.call(U);if(typeof U.next=="function")return U;if(!isNaN(U.length)){var W=-1,H=function G(){for(;++W<U.length;)if(o.call(U,W))return G.value=U[W],G.done=!1,G;return G.value=r,G.done=!0,G};return H.next=H}}throw new TypeError(t(U)+" is not iterable")}return S.prototype=C,i(I,"constructor",{value:C,configurable:!0}),i(C,"constructor",{value:S,configurable:!0}),S.displayName=h(C,m,"GeneratorFunction"),s.isGeneratorFunction=function(U){var V=typeof U=="function"&&U.constructor;return!!V&&(V===S||(V.displayName||V.name)==="GeneratorFunction")},s.mark=function(U){return Object.setPrototypeOf?Object.setPrototypeOf(U,C):(U.__proto__=C,h(U,m,"GeneratorFunction")),U.prototype=Object.create(I),U},s.awrap=function(U){return{__await:U}},j(N.prototype),h(N.prototype,d,function(){return this}),s.AsyncIterator=N,s.async=function(U,V,W,H,G){G===void 0&&(G=Promise);var K=new N(p(U,V,W,H),G);return s.isGeneratorFunction(V)?K:K.next().then(function($){return $.done?$.value:K.next()})},j(I),h(I,m,"Generator"),h(I,u,function(){return this}),h(I,"toString",function(){return"[object Generator]"}),s.keys=function(U){var V=Object(U),W=[];for(var H in V)W.push(H);return W.reverse(),function G(){for(;W.length;){var K=W.pop();if(K in V)return G.value=K,G.done=!1,G}return G.done=!0,G}},s.values=F,L.prototype={constructor:L,reset:function(V){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(O),!V)for(var W in this)W.charAt(0)==="t"&&o.call(this,W)&&!isNaN(+W.slice(1))&&(this[W]=r)},stop:function(){this.done=!0;var V=this.tryEntries[0].completion;if(V.type==="throw")throw V.arg;return this.rval},dispatchException:function(V){if(this.done)throw V;var W=this;function H(se,Y){return $.type="throw",$.arg=V,W.next=se,Y&&(W.method="next",W.arg=r),!!Y}for(var G=this.tryEntries.length-1;G>=0;--G){var K=this.tryEntries[G],$=K.completion;if(K.tryLoc==="root")return H("end");if(K.tryLoc<=this.prev){var q=o.call(K,"catchLoc"),Z=o.call(K,"finallyLoc");if(q&&Z){if(this.prev<K.catchLoc)return H(K.catchLoc,!0);if(this.prev<K.finallyLoc)return H(K.finallyLoc)}else if(q){if(this.prev<K.catchLoc)return H(K.catchLoc,!0)}else{if(!Z)throw Error("try statement without catch or finally");if(this.prev<K.finallyLoc)return H(K.finallyLoc)}}}},abrupt:function(V,W){for(var H=this.tryEntries.length-1;H>=0;--H){var G=this.tryEntries[H];if(G.tryLoc<=this.prev&&o.call(G,"finallyLoc")&&this.prev<G.finallyLoc){var K=G;break}}K&&(V==="break"||V==="continue")&&K.tryLoc<=W&&W<=K.finallyLoc&&(K=null);var $=K?K.completion:{};return $.type=V,$.arg=W,K?(this.method="next",this.next=K.finallyLoc,_):this.complete($)},complete:function(V,W){if(V.type==="throw")throw V.arg;return V.type==="break"||V.type==="continue"?this.next=V.arg:V.type==="return"?(this.rval=this.arg=V.arg,this.method="return",this.next="end"):V.type==="normal"&&W&&(this.next=W),_},finish:function(V){for(var W=this.tryEntries.length-1;W>=0;--W){var H=this.tryEntries[W];if(H.finallyLoc===V)return this.complete(H.completion,H.afterLoc),O(H),_}},catch:function(V){for(var W=this.tryEntries.length-1;W>=0;--W){var H=this.tryEntries[W];if(H.tryLoc===V){var G=H.completion;if(G.type==="throw"){var K=G.arg;O(H)}return K}}throw Error("illegal catch attempt")},delegateYield:function(V,W,H){return this.delegate={iterator:F(V),resultName:W,nextLoc:H},this.method==="next"&&(this.arg=r),_}},s}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(ZM)),ZM.exports}var JM,EB;function xS(){if(EB)return JM;EB=1;var e=r5e()();JM=e;try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}return JM}var e3={exports:{}},t3={exports:{}},n3={exports:{}},MB;function s5e(){return MB||(MB=1,function(e){var t=I0().default;function n(r,s){if(t(r)!="object"||!r)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var o=a.call(r,s||"default");if(t(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(r)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(n3)),n3.exports}var TB;function ese(){return TB||(TB=1,function(e){var t=I0().default,n=s5e();function r(s){var a=n(s,"string");return t(a)=="symbol"?a:a+""}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(t3)),t3.exports}var kB;function bS(){return kB||(kB=1,function(e){var t=ese();function n(r,s,a){return(s=t(s))in r?Object.defineProperty(r,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[s]=a,r}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(e3)),e3.exports}var r3={exports:{}},NB;function _S(){return NB||(NB=1,function(e){function t(r,s,a,o,i,c,u){try{var d=r[c](u),m=d.value}catch(h){return void a(h)}d.done?s(m):Promise.resolve(m).then(o,i)}function n(r){return function(){var s=this,a=arguments;return new Promise(function(o,i){var c=r.apply(s,a);function u(m){t(c,o,i,u,d,"next",m)}function d(m){t(c,o,i,u,d,"throw",m)}u(void 0)})}}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(r3)),r3.exports}var s3={exports:{}},a3={exports:{}},AB;function a5e(){return AB||(AB=1,function(e){function t(n){if(Array.isArray(n))return n}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(a3)),a3.exports}var o3={exports:{}},PB;function o5e(){return PB||(PB=1,function(e){function t(n,r){var s=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(s!=null){var a,o,i,c,u=[],d=!0,m=!1;try{if(i=(s=s.call(n)).next,r===0){if(Object(s)!==s)return;d=!1}else for(;!(d=(a=i.call(s)).done)&&(u.push(a.value),u.length!==r);d=!0);}catch(h){m=!0,o=h}finally{try{if(!d&&s.return!=null&&(c=s.return(),Object(c)!==c))return}finally{if(m)throw o}}return u}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(o3)),o3.exports}var i3={exports:{}},l3={exports:{}},RB;function i5e(){return RB||(RB=1,function(e){function t(n,r){(r==null||r>n.length)&&(r=n.length);for(var s=0,a=Array(r);s<r;s++)a[s]=n[s];return a}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(l3)),l3.exports}var IB;function l5e(){return IB||(IB=1,function(e){var t=i5e();function n(r,s){if(r){if(typeof r=="string")return t(r,s);var a={}.toString.call(r).slice(8,-1);return a==="Object"&&r.constructor&&(a=r.constructor.name),a==="Map"||a==="Set"?Array.from(r):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?t(r,s):void 0}}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(i3)),i3.exports}var c3={exports:{}},jB;function c5e(){return jB||(jB=1,function(e){function t(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(c3)),c3.exports}var OB;function u5e(){return OB||(OB=1,function(e){var t=a5e(),n=o5e(),r=l5e(),s=c5e();function a(o,i){return t(o)||n(o,i)||r(o,i)||s()}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(s3)),s3.exports}var zu={},In={},u3={exports:{}},LB;function d5e(){return LB||(LB=1,function(e){function t(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(u3)),u3.exports}var d3={exports:{}},DB;function f5e(){return DB||(DB=1,function(e){var t=ese();function n(s,a){for(var o=0;o<a.length;o++){var i=a[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,t(i.key),i)}}function r(s,a,o){return a&&n(s.prototype,a),o&&n(s,o),Object.defineProperty(s,"prototype",{writable:!1}),s}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(d3)),d3.exports}var f3={exports:{}},m3={exports:{}},FB;function m5e(){return FB||(FB=1,function(e){function t(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(m3)),m3.exports}var UB;function h5e(){return UB||(UB=1,function(e){var t=I0().default,n=m5e();function r(s,a){if(a&&(t(a)=="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n(s)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(f3)),f3.exports}var h3={exports:{}},BB;function tse(){return BB||(BB=1,function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(h3)),h3.exports}var p3={exports:{}},g3={exports:{}},VB;function m8(){return VB||(VB=1,function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(g3)),g3.exports}var $B;function p5e(){return $B||($B=1,function(e){var t=m8();function n(r,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(s&&s.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),s&&t(r,s)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(p3)),p3.exports}var y3={exports:{}},v3={exports:{}},WB;function g5e(){return WB||(WB=1,function(e){function t(n){try{return Function.toString.call(n).indexOf("[native code]")!==-1}catch{return typeof n=="function"}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(v3)),v3.exports}var x3={exports:{}},b3={exports:{}},HB;function y5e(){return HB||(HB=1,function(e){function t(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e.exports=t=function(){return!!n},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(b3)),b3.exports}var zB;function v5e(){return zB||(zB=1,function(e){var t=y5e(),n=m8();function r(s,a,o){if(t())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,a);var c=new(s.bind.apply(s,i));return o&&n(c,o.prototype),c}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(x3)),x3.exports}var GB;function x5e(){return GB||(GB=1,function(e){var t=tse(),n=m8(),r=g5e(),s=v5e();function a(o){var i=typeof Map=="function"?new Map:void 0;return e.exports=a=function(u){if(u===null||!r(u))return u;if(typeof u!="function")throw new TypeError("Super expression must either be null or a function");if(i!==void 0){if(i.has(u))return i.get(u);i.set(u,d)}function d(){return s(u,arguments,t(this).constructor)}return d.prototype=Object.create(u.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),n(d,u)},e.exports.__esModule=!0,e.exports.default=e.exports,a(o)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(y3)),y3.exports}var qB;function b5e(){if(qB)return In;qB=1;var e=vS();Object.defineProperty(In,"__esModule",{value:!0}),In.UnsupportedStrategy=In.UnknownError=In.OAuthCallbackError=In.MissingSecret=In.MissingAuthorize=In.MissingAdapterMethods=In.MissingAdapter=In.MissingAPIRoute=In.InvalidCallbackUrl=In.AccountNotLinkedError=void 0,In.adapterErrorHandler=v,In.capitalize=g,In.eventsErrorHandler=y,In.upperSnake=p;var t=e(xS()),n=e(_S()),r=e(bS()),s=e(d5e()),a=e(f5e()),o=e(h5e()),i=e(tse()),c=e(p5e()),u=e(x5e());function d(x,b,_){return b=(0,i.default)(b),(0,o.default)(x,m()?Reflect.construct(b,_||[],(0,i.default)(x).constructor):b.apply(x,_))}function m(){try{var x=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(m=function(){return!!x})()}var h=In.UnknownError=function(x){function b(_){var w,S;return(0,s.default)(this,b),S=d(this,b,[(w=_?.message)!==null&&w!==void 0?w:_]),S.name="UnknownError",S.code=_.code,_ instanceof Error&&(S.stack=_.stack),S}return(0,c.default)(b,x),(0,a.default)(b,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,stack:this.stack}}}])}((0,u.default)(Error));In.OAuthCallbackError=function(x){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,S=new Array(w),C=0;C<w;C++)S[C]=arguments[C];return _=d(this,b,[].concat(S)),(0,r.default)(_,"name","OAuthCallbackError"),_}return(0,c.default)(b,x),(0,a.default)(b)}(h),In.AccountNotLinkedError=function(x){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,S=new Array(w),C=0;C<w;C++)S[C]=arguments[C];return _=d(this,b,[].concat(S)),(0,r.default)(_,"name","AccountNotLinkedError"),_}return(0,c.default)(b,x),(0,a.default)(b)}(h),In.MissingAPIRoute=function(x){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,S=new Array(w),C=0;C<w;C++)S[C]=arguments[C];return _=d(this,b,[].concat(S)),(0,r.default)(_,"name","MissingAPIRouteError"),(0,r.default)(_,"code","MISSING_NEXTAUTH_API_ROUTE_ERROR"),_}return(0,c.default)(b,x),(0,a.default)(b)}(h),In.MissingSecret=function(x){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,S=new Array(w),C=0;C<w;C++)S[C]=arguments[C];return _=d(this,b,[].concat(S)),(0,r.default)(_,"name","MissingSecretError"),(0,r.default)(_,"code","NO_SECRET"),_}return(0,c.default)(b,x),(0,a.default)(b)}(h),In.MissingAuthorize=function(x){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,S=new Array(w),C=0;C<w;C++)S[C]=arguments[C];return _=d(this,b,[].concat(S)),(0,r.default)(_,"name","MissingAuthorizeError"),(0,r.default)(_,"code","CALLBACK_CREDENTIALS_HANDLER_ERROR"),_}return(0,c.default)(b,x),(0,a.default)(b)}(h),In.MissingAdapter=function(x){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,S=new Array(w),C=0;C<w;C++)S[C]=arguments[C];return _=d(this,b,[].concat(S)),(0,r.default)(_,"name","MissingAdapterError"),(0,r.default)(_,"code","EMAIL_REQUIRES_ADAPTER_ERROR"),_}return(0,c.default)(b,x),(0,a.default)(b)}(h),In.MissingAdapterMethods=function(x){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,S=new Array(w),C=0;C<w;C++)S[C]=arguments[C];return _=d(this,b,[].concat(S)),(0,r.default)(_,"name","MissingAdapterMethodsError"),(0,r.default)(_,"code","MISSING_ADAPTER_METHODS_ERROR"),_}return(0,c.default)(b,x),(0,a.default)(b)}(h),In.UnsupportedStrategy=function(x){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,S=new Array(w),C=0;C<w;C++)S[C]=arguments[C];return _=d(this,b,[].concat(S)),(0,r.default)(_,"name","UnsupportedStrategyError"),(0,r.default)(_,"code","CALLBACK_CREDENTIALS_JWT_ERROR"),_}return(0,c.default)(b,x),(0,a.default)(b)}(h),In.InvalidCallbackUrl=function(x){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,S=new Array(w),C=0;C<w;C++)S[C]=arguments[C];return _=d(this,b,[].concat(S)),(0,r.default)(_,"name","InvalidCallbackUrl"),(0,r.default)(_,"code","INVALID_CALLBACK_URL_ERROR"),_}return(0,c.default)(b,x),(0,a.default)(b)}(h);function p(x){return x.replace(/([A-Z])/g,"_$1").toUpperCase()}function g(x){return"".concat(x[0].toUpperCase()).concat(x.slice(1))}function y(x,b){return Object.keys(x).reduce(function(_,w){return _[w]=(0,n.default)(t.default.mark(function S(){var C,E=arguments;return t.default.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.prev=0,C=x[w],T.next=4,C.apply(void 0,E);case 4:return T.abrupt("return",T.sent);case 7:T.prev=7,T.t0=T.catch(0),b.error("".concat(p(w),"_EVENT_ERROR"),T.t0);case 10:case"end":return T.stop()}},S,null,[[0,7]])})),_},{})}function v(x,b){if(x)return Object.keys(x).reduce(function(_,w){return _[w]=(0,n.default)(t.default.mark(function S(){var C,E,M,T,I,j=arguments;return t.default.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:for(P.prev=0,C=j.length,E=new Array(C),M=0;M<C;M++)E[M]=j[M];return b.debug("adapter_".concat(w),{args:E}),T=x[w],P.next=6,T.apply(void 0,E);case 6:return P.abrupt("return",P.sent);case 9:throw P.prev=9,P.t0=P.catch(0),b.error("adapter_error_".concat(w),P.t0),I=new h(P.t0),I.name="".concat(g(w),"Error"),I;case 15:case"end":return P.stop()}},S,null,[[0,9]])})),_},{})}return In}var KB;function _5e(){if(KB)return zu;KB=1;var e=vS();Object.defineProperty(zu,"__esModule",{value:!0}),zu.default=void 0,zu.proxyLogger=m,zu.setLogger=d;var t=e(xS()),n=e(bS()),r=e(_S()),s=b5e();function a(h,p){var g=Object.keys(h);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(h);p&&(y=y.filter(function(v){return Object.getOwnPropertyDescriptor(h,v).enumerable})),g.push.apply(g,y)}return g}function o(h){for(var p=1;p<arguments.length;p++){var g=arguments[p]!=null?arguments[p]:{};p%2?a(Object(g),!0).forEach(function(y){(0,n.default)(h,y,g[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(g)):a(Object(g)).forEach(function(y){Object.defineProperty(h,y,Object.getOwnPropertyDescriptor(g,y))})}return h}function i(h){if(h instanceof Error&&!(h instanceof s.UnknownError))return{message:h.message,stack:h.stack,name:h.name};if(c(h)){var p;h.error=i(h.error),h.message=(p=h.message)!==null&&p!==void 0?p:h.error.message}return h}function c(h){return!!(h!=null&&h.error)}var u={error:function(p,g){g=i(g),console.error("[next-auth][error][".concat(p,"]"),`
https://next-auth.js.org/errors#`.concat(p.toLowerCase()),g.message,g)},warn:function(p){console.warn("[next-auth][warn][".concat(p,"]"),`
https://next-auth.js.org/warnings#`.concat(p.toLowerCase()))},debug:function(p,g){console.log("[next-auth][debug][".concat(p,"]"),g)}};function d(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=arguments.length>1?arguments[1]:void 0;p||(u.debug=function(){}),h.error&&(u.error=h.error),h.warn&&(u.warn=h.warn),h.debug&&(u.debug=h.debug)}zu.default=u;function m(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:u,p=arguments.length>1?arguments[1]:void 0;try{if(typeof window>"u")return h;var g={},y=function(b){g[b]=function(){var _=(0,r.default)(t.default.mark(function w(S,C){var E,M;return t.default.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(u[b](S,C),b==="error"&&(C=i(C)),C.client=!0,E="".concat(p,"/_log"),M=new URLSearchParams(o({level:b,code:S},C)),!navigator.sendBeacon){I.next=8;break}return I.abrupt("return",navigator.sendBeacon(E,M));case 8:return I.next=10,fetch(E,{method:"POST",body:M,keepalive:!0});case 10:return I.abrupt("return",I.sent);case 11:case"end":return I.stop()}},w)}));return function(w,S){return _.apply(this,arguments)}}()};for(var v in h)y(v);return g}catch{return u}}return zu}var mx={},YB;function w5e(){if(YB)return mx;YB=1,Object.defineProperty(mx,"__esModule",{value:!0}),mx.default=e;function e(t){var n;const r=new URL("http://localhost:3000/api/auth");t&&!t.startsWith("http")&&(t=`https://${t}`);const s=new URL((n=t)!==null&&n!==void 0?n:r),a=(s.pathname==="/"?r.pathname:s.pathname).replace(/\/$/,""),o=`${s.origin}${a}`;return{origin:s.origin,host:s.host,path:a,base:o,toString:()=>o}}return mx}var Gu={},QB;function S5e(){if(QB)return Gu;QB=1;var e=vS();Object.defineProperty(Gu,"__esModule",{value:!0}),Gu.BroadcastChannel=m,Gu.apiBaseUrl=u,Gu.fetchData=i,Gu.now=d;var t=e(xS()),n=e(bS()),r=e(_S());function s(h,p){var g=Object.keys(h);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(h);p&&(y=y.filter(function(v){return Object.getOwnPropertyDescriptor(h,v).enumerable})),g.push.apply(g,y)}return g}function a(h){for(var p=1;p<arguments.length;p++){var g=arguments[p]!=null?arguments[p]:{};p%2?s(Object(g),!0).forEach(function(y){(0,n.default)(h,y,g[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(g)):s(Object(g)).forEach(function(y){Object.defineProperty(h,y,Object.getOwnPropertyDescriptor(g,y))})}return h}var o=3;function i(h,p,g){return c.apply(this,arguments)}function c(){return c=(0,r.default)(t.default.mark(function h(p,g,y){var v,x,b,_,w,S,C,E,M,T,I=arguments;return t.default.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:v=I.length>3&&I[3]!==void 0?I[3]:{},x=v.ctx,b=v.req,_=b===void 0?x?.req:b,w="".concat(u(g),"/").concat(p),S=0;case 3:if(!(S<o)){N.next=28;break}return N.prev=4,E={headers:a({"Content-Type":"application/json"},_!=null&&(C=_.headers)!==null&&C!==void 0&&C.cookie?{cookie:_.headers.cookie}:{})},_!=null&&_.body&&(E.body=JSON.stringify(_.body),E.method="POST"),N.next=9,fetch(w,E);case 9:return M=N.sent,N.next=12,M.json();case 12:if(T=N.sent,M.ok){N.next=15;break}throw T;case 15:return N.abrupt("return",Object.keys(T).length>0?T:null);case 18:if(N.prev=18,N.t0=N.catch(4),S++,S!==o){N.next=24;break}throw y.error("CLIENT_FETCH_ERROR",{error:N.t0,url:w}),N.t0;case 24:return N.next=26,new Promise(function(P){return setTimeout(P,Math.pow(2,S)*100)});case 26:N.next=3;break;case 28:return N.abrupt("return",null);case 29:case"end":return N.stop()}},h,null,[[4,18]])})),c.apply(this,arguments)}function u(h){return typeof window>"u"?"".concat(h.baseUrlServer).concat(h.basePathServer):h.basePath}function d(){return Math.floor(Date.now()/1e3)}function m(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"nextauth.message";return{receive:function(g){var y=function(x){var b;if(x.key===h){var _=JSON.parse((b=x.newValue)!==null&&b!==void 0?b:"{}");_?.event!=="session"||!(_!=null&&_.data)||g(_)}};return window.addEventListener("storage",y),function(){return window.removeEventListener("storage",y)}},post:function(g){if(!(typeof window>"u"))try{localStorage.setItem(h,JSON.stringify(a(a({},g),{},{timestamp:d()})))}catch{}}}}return Gu}var _3={},XB;function C5e(){return XB||(XB=1,Object.defineProperty(_3,"__esModule",{value:!0})),_3}var ZB;function E5e(){return ZB||(ZB=1,function(e){var t={},n=vS(),r=I0();Object.defineProperty(e,"__esModule",{value:!0});var s={SessionContext:!0,useSession:!0,getSession:!0,getCsrfToken:!0,getProviders:!0,signIn:!0,signOut:!0,SessionProvider:!0};e.SessionContext=void 0,e.SessionProvider=K,e.getCsrfToken=O,e.getProviders=F,e.getSession=R,e.signIn=V,e.signOut=H,e.useSession=P;var a=n(xS()),o=n(bS()),i=n(_S()),c=n(u5e()),u=S(Zh()),d=S(_5e()),m=n(w5e()),h=S5e(),p=i4e(),g=C5e();Object.keys(g).forEach(function($){$==="default"||$==="__esModule"||Object.prototype.hasOwnProperty.call(s,$)||$ in e&&e[$]===g[$]||Object.defineProperty(e,$,{enumerable:!0,get:function(){return g[$]}})});var y,v,x,b,_;function w($){if(typeof WeakMap!="function")return null;var q=new WeakMap,Z=new WeakMap;return(w=function(Y){return Y?Z:q})($)}function S($,q){if($&&$.__esModule)return $;if($===null||r($)!="object"&&typeof $!="function")return{default:$};var Z=w(q);if(Z&&Z.has($))return Z.get($);var se={__proto__:null},Y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Q in $)if(Q!=="default"&&{}.hasOwnProperty.call($,Q)){var re=Y?Object.getOwnPropertyDescriptor($,Q):null;re&&(re.get||re.set)?Object.defineProperty(se,Q,re):se[Q]=$[Q]}return se.default=$,Z&&Z.set($,se),se}function C($,q){var Z=Object.keys($);if(Object.getOwnPropertySymbols){var se=Object.getOwnPropertySymbols($);q&&(se=se.filter(function(Y){return Object.getOwnPropertyDescriptor($,Y).enumerable})),Z.push.apply(Z,se)}return Z}function E($){for(var q=1;q<arguments.length;q++){var Z=arguments[q]!=null?arguments[q]:{};q%2?C(Object(Z),!0).forEach(function(se){(0,o.default)($,se,Z[se])}):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(Z)):C(Object(Z)).forEach(function(se){Object.defineProperty($,se,Object.getOwnPropertyDescriptor(Z,se))})}return $}var M={baseUrl:(0,m.default)((y=t.NEXTAUTH_URL)!==null&&y!==void 0?y:t.VERCEL_URL).origin,basePath:(0,m.default)(t.NEXTAUTH_URL).path,baseUrlServer:(0,m.default)((v=(x=t.NEXTAUTH_URL_INTERNAL)!==null&&x!==void 0?x:t.NEXTAUTH_URL)!==null&&v!==void 0?v:t.VERCEL_URL).origin,basePathServer:(0,m.default)((b=t.NEXTAUTH_URL_INTERNAL)!==null&&b!==void 0?b:t.NEXTAUTH_URL).path,_lastSync:0,_session:void 0,_getSession:function(){}},T=(0,h.BroadcastChannel)(),I=(0,d.proxyLogger)(d.default,M.basePath);function j(){var $=u.useState(typeof navigator<"u"?navigator.onLine:!1),q=(0,c.default)($,2),Z=q[0],se=q[1],Y=function(){return se(!0)},Q=function(){return se(!1)};return u.useEffect(function(){return window.addEventListener("online",Y),window.addEventListener("offline",Q),function(){window.removeEventListener("online",Y),window.removeEventListener("offline",Q)}},[]),Z}var N=e.SessionContext=(_=u.createContext)===null||_===void 0?void 0:_.call(u,void 0);function P($){if(!N)throw new Error("React Context is unavailable in Server Components");var q=u.useContext(N),Z=$??{},se=Z.required,Y=Z.onUnauthenticated,Q=se&&q.status==="unauthenticated";return u.useEffect(function(){if(Q){var re="/api/auth/signin?".concat(new URLSearchParams({error:"SessionRequired",callbackUrl:window.location.href}));Y?Y():window.location.href=re}},[Q,Y]),Q?{data:q.data,update:q.update,status:"loading"}:q}function R($){return k.apply(this,arguments)}function k(){return k=(0,i.default)(a.default.mark(function $(q){var Z,se;return a.default.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=2,(0,h.fetchData)("session",M,I,q);case 2:return se=Q.sent,(!((Z=q?.broadcast)!==null&&Z!==void 0)||Z)&&T.post({event:"session",data:{trigger:"getSession"}}),Q.abrupt("return",se);case 5:case"end":return Q.stop()}},$)})),k.apply(this,arguments)}function O($){return L.apply(this,arguments)}function L(){return L=(0,i.default)(a.default.mark(function $(q){var Z;return a.default.wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,(0,h.fetchData)("csrf",M,I,q);case 2:return Z=Y.sent,Y.abrupt("return",Z?.csrfToken);case 4:case"end":return Y.stop()}},$)})),L.apply(this,arguments)}function F(){return U.apply(this,arguments)}function U(){return U=(0,i.default)(a.default.mark(function $(){return a.default.wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,(0,h.fetchData)("providers",M,I);case 2:return Z.abrupt("return",Z.sent);case 3:case"end":return Z.stop()}},$)})),U.apply(this,arguments)}function V($,q,Z){return W.apply(this,arguments)}function W(){return W=(0,i.default)(a.default.mark(function $(q,Z,se){var Y,Q,re,te,le,ie,pe,me,de,ve,Ae,Se,De,Ne,Pe,dt,et;return a.default.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return Y=Z??{},Q=Y.callbackUrl,re=Q===void 0?window.location.href:Q,te=Y.redirect,le=te===void 0?!0:te,ie=(0,h.apiBaseUrl)(M),ue.next=4,F();case 4:if(pe=ue.sent,pe){ue.next=8;break}return window.location.href="".concat(ie,"/error"),ue.abrupt("return");case 8:if(!(!q||!(q in pe))){ue.next=11;break}return window.location.href="".concat(ie,"/signin?").concat(new URLSearchParams({callbackUrl:re})),ue.abrupt("return");case 11:return me=pe[q].type==="credentials",de=pe[q].type==="email",ve=me||de,Ae="".concat(ie,"/").concat(me?"callback":"signin","/").concat(q),Se="".concat(Ae).concat(se?"?".concat(new URLSearchParams(se)):""),ue.t0=fetch,ue.t1=Se,ue.t2={"Content-Type":"application/x-www-form-urlencoded"},ue.t3=URLSearchParams,ue.t4=E,ue.t5=E({},Z),ue.t6={},ue.next=25,O();case 25:return ue.t7=ue.sent,ue.t8=re,ue.t9={csrfToken:ue.t7,callbackUrl:ue.t8,json:!0},ue.t10=(0,ue.t4)(ue.t5,ue.t6,ue.t9),ue.t11=new ue.t3(ue.t10),ue.t12={method:"post",headers:ue.t2,body:ue.t11},ue.next=33,(0,ue.t0)(ue.t1,ue.t12);case 33:return De=ue.sent,ue.next=36,De.json();case 36:if(Ne=ue.sent,!(le||!ve)){ue.next=42;break}return dt=(Pe=Ne.url)!==null&&Pe!==void 0?Pe:re,window.location.href=dt,dt.includes("#")&&window.location.reload(),ue.abrupt("return");case 42:if(et=new URL(Ne.url).searchParams.get("error"),!De.ok){ue.next=46;break}return ue.next=46,T.post({event:"session",data:{trigger:"signin"}}),M._getSession({event:"storage"});case 46:return ue.abrupt("return",{error:et,status:De.status,ok:De.ok,url:et?null:Ne.url});case 47:case"end":return ue.stop()}},$)})),W.apply(this,arguments)}function H($){return G.apply(this,arguments)}function G(){return G=(0,i.default)(a.default.mark(function $(q){var Z,se,Y,Q,re,te,le,ie,pe,me;return a.default.wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return se=q??{},Y=se.callbackUrl,Q=Y===void 0?window.location.href:Y,re=(0,h.apiBaseUrl)(M),ve.t0={"Content-Type":"application/x-www-form-urlencoded"},ve.t1=URLSearchParams,ve.next=6,O();case 6:return ve.t2=ve.sent,ve.t3=Q,ve.t4={csrfToken:ve.t2,callbackUrl:ve.t3,json:!0},ve.t5=new ve.t1(ve.t4),te={method:"post",headers:ve.t0,body:ve.t5},ve.next=13,fetch("".concat(re,"/signout"),te);case 13:return le=ve.sent,ve.next=16,le.json();case 16:if(ie=ve.sent,T.post({event:"session",data:{trigger:"signout"}}),!(!((Z=q?.redirect)!==null&&Z!==void 0)||Z)){ve.next=23;break}return me=(pe=ie.url)!==null&&pe!==void 0?pe:Q,window.location.href=me,me.includes("#")&&window.location.reload(),ve.abrupt("return");case 23:return ve.next=25,M._getSession({event:"storage"});case 25:return ve.abrupt("return",ie);case 26:case"end":return ve.stop()}},$)})),G.apply(this,arguments)}function K($){if(!N)throw new Error("React Context is unavailable in Server Components");var q=$.children,Z=$.basePath,se=$.refetchInterval,Y=$.refetchWhenOffline;Z&&(M.basePath=Z);var Q=$.session!==void 0;M._lastSync=Q?(0,h.now)():0;var re=u.useState(function(){return Q&&(M._session=$.session),$.session}),te=(0,c.default)(re,2),le=te[0],ie=te[1],pe=u.useState(!Q),me=(0,c.default)(pe,2),de=me[0],ve=me[1];u.useEffect(function(){return M._getSession=(0,i.default)(a.default.mark(function Ne(){var Pe,dt,et,Et=arguments;return a.default.wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:if(Pe=Et.length>0&&Et[0]!==void 0?Et[0]:{},dt=Pe.event,Ue.prev=1,et=dt==="storage",!(et||M._session===void 0)){Ue.next=10;break}return M._lastSync=(0,h.now)(),Ue.next=7,R({broadcast:!et});case 7:return M._session=Ue.sent,ie(M._session),Ue.abrupt("return");case 10:if(!(!dt||M._session===null||(0,h.now)()<M._lastSync)){Ue.next=12;break}return Ue.abrupt("return");case 12:return M._lastSync=(0,h.now)(),Ue.next=15,R();case 15:M._session=Ue.sent,ie(M._session),Ue.next=22;break;case 19:Ue.prev=19,Ue.t0=Ue.catch(1),I.error("CLIENT_SESSION_ERROR",Ue.t0);case 22:return Ue.prev=22,ve(!1),Ue.finish(22);case 25:case"end":return Ue.stop()}},Ne,null,[[1,19,22,25]])})),M._getSession(),function(){M._lastSync=0,M._session=void 0,M._getSession=function(){}}},[]),u.useEffect(function(){var Ne=T.receive(function(){return M._getSession({event:"storage"})});return function(){return Ne()}},[]),u.useEffect(function(){var Ne=$.refetchOnWindowFocus,Pe=Ne===void 0?!0:Ne,dt=function(){Pe&&document.visibilityState==="visible"&&M._getSession({event:"visibilitychange"})};return document.addEventListener("visibilitychange",dt,!1),function(){return document.removeEventListener("visibilitychange",dt,!1)}},[$.refetchOnWindowFocus]);var Ae=j(),Se=Y!==!1||Ae;u.useEffect(function(){if(se&&Se){var Ne=setInterval(function(){M._session&&M._getSession({event:"poll"})},se*1e3);return function(){return clearInterval(Ne)}}},[se,Se]);var De=u.useMemo(function(){return{data:le,status:de?"loading":le?"authenticated":"unauthenticated",update:function(Pe){return(0,i.default)(a.default.mark(function dt(){var et;return a.default.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:if(!(de||!le)){ue.next=2;break}return ue.abrupt("return");case 2:return ve(!0),ue.t0=h.fetchData,ue.t1=M,ue.t2=I,ue.next=8,O();case 8:return ue.t3=ue.sent,ue.t4=Pe,ue.t5={csrfToken:ue.t3,data:ue.t4},ue.t6={body:ue.t5},ue.t7={req:ue.t6},ue.next=15,(0,ue.t0)("session",ue.t1,ue.t2,ue.t7);case 15:return et=ue.sent,ve(!1),et&&(ie(et),T.post({event:"session",data:{trigger:"getSession"}})),ue.abrupt("return",et);case 19:case"end":return ue.stop()}},dt)}))()}}},[le,de]);return(0,p.jsx)(N.Provider,{value:De,children:q})}}(YM)),YM}var za=E5e();const Ot=()=>{const{data:e,status:t}=za.useSession(),[n,r]=f.useState(e);return f.useEffect(()=>{t!=="loading"&&(ua(e?.user,n?.user)||r(e))},[e,t,n?.user]),n};function h8(){const e=Ot(),t=["pplx-dev@example.com","pplx-dev-pro@example.com","pplx-dev-enterprise@example.com","fe-test-user@example.com"],n=e?.user?.email??"none";return n.endsWith("@perplexity.ai")||t.includes(n)}function Je(){const e=Ot(),t=e!==null&&typeof e<"u";return f.useEffect(()=>{t&&Vne()},[t]),t}const nse=f.createContext({inApp:!1,preferredColorScheme:null,deviceId:null,appVersion:null,isIOS:!1,isAndroid:!1,client:null}),M5e=A.memo(({children:e,inApp:t})=>{const n=Ht(),r=n?.get("mobile.deviceId")||null,s=n?.get("mobile.appVersion")||null,a=n?.get("mobile.preferredColorScheme")||null,o=n?.get("mobile.client")||null,i=o==="ios",c=o==="android";return l.jsx(nse.Provider,{value:{inApp:t,preferredColorScheme:a,deviceId:r,appVersion:s,isIOS:i,isAndroid:c,client:o},children:e})});M5e.displayName="CanonicalPageProvider";function ep(){return f.useContext(nse)}const cv=f.createContext({});function p8(e){const t=f.useRef(null);return t.current===null&&(t.current=e()),t.current}const g8=typeof window<"u",y8=g8?f.useLayoutEffect:f.useEffect,wS=f.createContext(null);function v8(e,t){e.indexOf(t)===-1&&e.push(t)}function x8(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Kl=(e,t,n)=>n>t?t:n<e?e:n;let b8=()=>{};const Yl={},rse=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function sse(e){return typeof e=="object"&&e!==null}const ase=e=>/^0[^.\s]+$/u.test(e);function _8(e){let t;return()=>(t===void 0&&(t=e()),t)}const lo=e=>e,T5e=(e,t)=>n=>t(e(n)),j0=(...e)=>e.reduce(T5e),uv=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class w8{constructor(){this.subscriptions=[]}add(t){return v8(this.subscriptions,t),()=>x8(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let a=0;a<s;a++){const o=this.subscriptions[a];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ui=e=>e*1e3,Bi=e=>e/1e3;function ose(e,t){return t?e*(1e3/t):0}const ise=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,k5e=1e-7,N5e=12;function A5e(e,t,n,r,s){let a,o,i=0;do o=t+(n-t)/2,a=ise(o,r,s)-e,a>0?n=o:t=o;while(Math.abs(a)>k5e&&++i<N5e);return o}function Va(e,t,n,r){if(e===t&&n===r)return lo;const s=a=>A5e(a,0,1,e,n);return a=>a===0||a===1?a:ise(s(a),t,r)}const lse=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,cse=e=>t=>1-e(1-t),use=Va(.33,1.53,.69,.99),S8=cse(use),dse=lse(S8),fse=e=>(e*=2)<1?.5*S8(e):.5*(2-Math.pow(2,-10*(e-1))),C8=e=>1-Math.sin(Math.acos(e)),mse=cse(C8),hse=lse(C8),pse=Va(.42,0,1,1),$a=Va(0,0,.58,1),pa=Va(.42,0,.58,1),P5e=e=>Array.isArray(e)&&typeof e[0]!="number",gse=e=>Array.isArray(e)&&typeof e[0]=="number",R5e={linear:lo,easeIn:pse,easeInOut:pa,easeOut:$a,circIn:C8,circInOut:hse,circOut:mse,backIn:S8,backInOut:dse,backOut:use,anticipate:fse},I5e=e=>typeof e=="string",JB=e=>{if(gse(e)){b8(e.length===4);const[t,n,r,s]=e;return Va(t,n,r,s)}else if(I5e(e))return R5e[e];return e},hx=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function j5e(e,t){let n=new Set,r=new Set,s=!1,a=!1;const o=new WeakSet;let i={delta:0,timestamp:0,isProcessing:!1};function c(d){o.has(d)&&(u.schedule(d),e()),d(i)}const u={schedule:(d,m=!1,h=!1)=>{const g=h&&s?n:r;return m&&o.add(d),g.has(d)||g.add(d),d},cancel:d=>{r.delete(d),o.delete(d)},process:d=>{if(i=d,s){a=!0;return}s=!0,[n,r]=[r,n],n.forEach(c),n.clear(),s=!1,a&&(a=!1,u.process(d))}};return u}const O5e=40;function yse(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,o=hx.reduce((_,w)=>(_[w]=j5e(a),_),{}),{setup:i,read:c,resolveKeyframes:u,preUpdate:d,update:m,preRender:h,render:p,postRender:g}=o,y=()=>{const _=Yl.useManualTiming?s.timestamp:performance.now();n=!1,Yl.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(_-s.timestamp,O5e),1)),s.timestamp=_,s.isProcessing=!0,i.process(s),c.process(s),u.process(s),d.process(s),m.process(s),h.process(s),p.process(s),g.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(y))},v=()=>{n=!0,r=!0,s.isProcessing||e(y)};return{schedule:hx.reduce((_,w)=>{const S=o[w];return _[w]=(C,E=!1,M=!1)=>(n||v(),S.schedule(C,E,M)),_},{}),cancel:_=>{for(let w=0;w<hx.length;w++)o[hx[w]].cancel(_)},state:s,steps:o}}const{schedule:Gn,cancel:uu,state:as,steps:w3}=yse(typeof requestAnimationFrame<"u"?requestAnimationFrame:lo,!0);let Zb;function L5e(){Zb=void 0}const ga={now:()=>(Zb===void 0&&ga.set(as.isProcessing||Yl.useManualTiming?as.timestamp:performance.now()),Zb),set:e=>{Zb=e,queueMicrotask(L5e)}},vse=e=>t=>typeof t=="string"&&t.startsWith(e),E8=vse("--"),D5e=vse("var(--"),M8=e=>D5e(e)?F5e.test(e.split("/*")[0].trim()):!1,F5e=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,tp={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},dv={...tp,transform:e=>Kl(0,1,e)},px={...tp,default:1},_y=e=>Math.round(e*1e5)/1e5,T8=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function U5e(e){return e==null}const B5e=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,k8=(e,t)=>n=>!!(typeof n=="string"&&B5e.test(n)&&n.startsWith(e)||t&&!U5e(n)&&Object.prototype.hasOwnProperty.call(n,t)),xse=(e,t,n)=>r=>{if(typeof r!="string")return r;const[s,a,o,i]=r.match(T8);return{[e]:parseFloat(s),[t]:parseFloat(a),[n]:parseFloat(o),alpha:i!==void 0?parseFloat(i):1}},V5e=e=>Kl(0,255,e),S3={...tp,transform:e=>Math.round(V5e(e))},vd={test:k8("rgb","red"),parse:xse("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+S3.transform(e)+", "+S3.transform(t)+", "+S3.transform(n)+", "+_y(dv.transform(r))+")"};function $5e(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const K6={test:k8("#"),parse:$5e,transform:vd.transform},O0=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),jc=O0("deg"),Vi=O0("%"),Rt=O0("px"),W5e=O0("vh"),H5e=O0("vw"),eV={...Vi,parse:e=>Vi.parse(e)/100,transform:e=>Vi.transform(e*100)},im={test:k8("hsl","hue"),parse:xse("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Vi.transform(_y(t))+", "+Vi.transform(_y(n))+", "+_y(dv.transform(r))+")"},Er={test:e=>vd.test(e)||K6.test(e)||im.test(e),parse:e=>vd.test(e)?vd.parse(e):im.test(e)?im.parse(e):K6.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?vd.transform(e):im.transform(e),getAnimatableNone:e=>{const t=Er.parse(e);return t.alpha=0,Er.transform(t)}},z5e=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function G5e(e){return isNaN(e)&&typeof e=="string"&&(e.match(T8)?.length||0)+(e.match(z5e)?.length||0)>0}const bse="number",_se="color",q5e="var",K5e="var(",tV="${}",Y5e=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function fv(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let a=0;const i=t.replace(Y5e,c=>(Er.test(c)?(r.color.push(a),s.push(_se),n.push(Er.parse(c))):c.startsWith(K5e)?(r.var.push(a),s.push(q5e),n.push(c)):(r.number.push(a),s.push(bse),n.push(parseFloat(c))),++a,tV)).split(tV);return{values:n,split:i,indexes:r,types:s}}function wse(e){return fv(e).values}function Sse(e){const{split:t,types:n}=fv(e),r=t.length;return s=>{let a="";for(let o=0;o<r;o++)if(a+=t[o],s[o]!==void 0){const i=n[o];i===bse?a+=_y(s[o]):i===_se?a+=Er.transform(s[o]):a+=s[o]}return a}}const Q5e=e=>typeof e=="number"?0:Er.test(e)?Er.getAnimatableNone(e):e;function X5e(e){const t=wse(e);return Sse(e)(t.map(Q5e))}const du={test:G5e,parse:wse,createTransformer:Sse,getAnimatableNone:X5e};function C3(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Z5e({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,a=0,o=0;if(!t)s=a=o=n;else{const i=n<.5?n*(1+t):n+t-n*t,c=2*n-i;s=C3(c,i,e+1/3),a=C3(c,i,e),o=C3(c,i,e-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:r}}function q_(e,t){return n=>n>0?t:e}const sr=(e,t,n)=>e+(t-e)*n,E3=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},J5e=[K6,vd,im],eNe=e=>J5e.find(t=>t.test(e));function nV(e){const t=eNe(e);if(!t)return!1;let n=t.parse(e);return t===im&&(n=Z5e(n)),n}const rV=(e,t)=>{const n=nV(e),r=nV(t);if(!n||!r)return q_(e,t);const s={...n};return a=>(s.red=E3(n.red,r.red,a),s.green=E3(n.green,r.green,a),s.blue=E3(n.blue,r.blue,a),s.alpha=sr(n.alpha,r.alpha,a),vd.transform(s))},Y6=new Set(["none","hidden"]);function tNe(e,t){return Y6.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function nNe(e,t){return n=>sr(e,t,n)}function N8(e){return typeof e=="number"?nNe:typeof e=="string"?M8(e)?q_:Er.test(e)?rV:aNe:Array.isArray(e)?Cse:typeof e=="object"?Er.test(e)?rV:rNe:q_}function Cse(e,t){const n=[...e],r=n.length,s=e.map((a,o)=>N8(a)(a,t[o]));return a=>{for(let o=0;o<r;o++)n[o]=s[o](a);return n}}function rNe(e,t){const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=N8(e[s])(e[s],t[s]));return s=>{for(const a in r)n[a]=r[a](s);return n}}function sNe(e,t){const n=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const a=t.types[s],o=e.indexes[a][r[a]],i=e.values[o]??0;n[s]=i,r[a]++}return n}const aNe=(e,t)=>{const n=du.createTransformer(t),r=fv(e),s=fv(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?Y6.has(e)&&!s.values.length||Y6.has(t)&&!r.values.length?tNe(e,t):j0(Cse(sNe(r,s),s.values),n):q_(e,t)};function Ese(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?sr(e,t,n):N8(e)(e,t)}const oNe=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>Gn.update(t,n),stop:()=>uu(t),now:()=>as.isProcessing?as.timestamp:ga.now()}},Mse=(e,t,n=10)=>{let r="";const s=Math.max(Math.round(t/n),2);for(let a=0;a<s;a++)r+=Math.round(e(a/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},K_=2e4;function A8(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<K_;)t+=n,r=e.next(t);return t>=K_?1/0:t}function iNe(e,t=100,n){const r=n({...e,keyframes:[0,t]}),s=Math.min(A8(r),K_);return{type:"keyframes",ease:a=>r.next(s*a).value/t,duration:Bi(s)}}const lNe=5;function Tse(e,t,n){const r=Math.max(t-lNe,0);return ose(n-e(r),t-r)}const cr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},sV=.001;function cNe({duration:e=cr.duration,bounce:t=cr.bounce,velocity:n=cr.velocity,mass:r=cr.mass}){let s,a,o=1-t;o=Kl(cr.minDamping,cr.maxDamping,o),e=Kl(cr.minDuration,cr.maxDuration,Bi(e)),o<1?(s=u=>{const d=u*o,m=d*e,h=d-n,p=Q6(u,o),g=Math.exp(-m);return sV-h/p*g},a=u=>{const m=u*o*e,h=m*n+n,p=Math.pow(o,2)*Math.pow(u,2)*e,g=Math.exp(-m),y=Q6(Math.pow(u,2),o);return(-s(u)+sV>0?-1:1)*((h-p)*g)/y}):(s=u=>{const d=Math.exp(-u*e),m=(u-n)*e+1;return-.001+d*m},a=u=>{const d=Math.exp(-u*e),m=(n-u)*(e*e);return d*m});const i=5/e,c=dNe(s,a,i);if(e=Ui(e),isNaN(c))return{stiffness:cr.stiffness,damping:cr.damping,duration:e};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:e}}}const uNe=12;function dNe(e,t,n){let r=n;for(let s=1;s<uNe;s++)r=r-e(r)/t(r);return r}function Q6(e,t){return e*Math.sqrt(1-t*t)}const fNe=["duration","bounce"],mNe=["stiffness","damping","mass"];function aV(e,t){return t.some(n=>e[n]!==void 0)}function hNe(e){let t={velocity:cr.velocity,stiffness:cr.stiffness,damping:cr.damping,mass:cr.mass,isResolvedFromDuration:!1,...e};if(!aV(e,mNe)&&aV(e,fNe))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,a=2*Kl(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:cr.mass,stiffness:s,damping:a}}else{const n=cNe(e);t={...t,...n,mass:cr.mass},t.isResolvedFromDuration=!0}return t}function Y_(e=cr.visualDuration,t=cr.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const a=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],i={done:!1,value:a},{stiffness:c,damping:u,mass:d,duration:m,velocity:h,isResolvedFromDuration:p}=hNe({...n,velocity:-Bi(n.velocity||0)}),g=h||0,y=u/(2*Math.sqrt(c*d)),v=o-a,x=Bi(Math.sqrt(c/d)),b=Math.abs(v)<5;r||(r=b?cr.restSpeed.granular:cr.restSpeed.default),s||(s=b?cr.restDelta.granular:cr.restDelta.default);let _;if(y<1){const S=Q6(x,y);_=C=>{const E=Math.exp(-y*x*C);return o-E*((g+y*x*v)/S*Math.sin(S*C)+v*Math.cos(S*C))}}else if(y===1)_=S=>o-Math.exp(-x*S)*(v+(g+x*v)*S);else{const S=x*Math.sqrt(y*y-1);_=C=>{const E=Math.exp(-y*x*C),M=Math.min(S*C,300);return o-E*((g+y*x*v)*Math.sinh(M)+S*v*Math.cosh(M))/S}}const w={calculatedDuration:p&&m||null,next:S=>{const C=_(S);if(p)i.done=S>=m;else{let E=S===0?g:0;y<1&&(E=S===0?Ui(g):Tse(_,S,C));const M=Math.abs(E)<=r,T=Math.abs(o-C)<=s;i.done=M&&T}return i.value=i.done?o:C,i},toString:()=>{const S=Math.min(A8(w),K_),C=Mse(E=>w.next(S*E).value,S,30);return S+"ms "+C},toTransition:()=>{}};return w}Y_.applyToOptions=e=>{const t=iNe(e,100,Y_);return e.ease=t.ease,e.duration=Ui(t.duration),e.type="keyframes",e};function X6({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:o,min:i,max:c,restDelta:u=.5,restSpeed:d}){const m=e[0],h={done:!1,value:m},p=M=>i!==void 0&&M<i||c!==void 0&&M>c,g=M=>i===void 0?c:c===void 0||Math.abs(i-M)<Math.abs(c-M)?i:c;let y=n*t;const v=m+y,x=o===void 0?v:o(v);x!==v&&(y=x-m);const b=M=>-y*Math.exp(-M/r),_=M=>x+b(M),w=M=>{const T=b(M),I=_(M);h.done=Math.abs(T)<=u,h.value=h.done?x:I};let S,C;const E=M=>{p(h.value)&&(S=M,C=Y_({keyframes:[h.value,g(h.value)],velocity:Tse(_,M,h.value),damping:s,stiffness:a,restDelta:u,restSpeed:d}))};return E(0),{calculatedDuration:null,next:M=>{let T=!1;return!C&&S===void 0&&(T=!0,w(M),E(M)),S!==void 0&&M>=S?C.next(M-S):(!T&&w(M),h)}}}function pNe(e,t,n){const r=[],s=n||Yl.mix||Ese,a=e.length-1;for(let o=0;o<a;o++){let i=s(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||lo:t;i=j0(c,i)}r.push(i)}return r}function gNe(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const a=e.length;if(b8(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const i=pNe(t,r,s),c=i.length,u=d=>{if(o&&d<e[0])return t[0];let m=0;if(c>1)for(;m<e.length-2&&!(d<e[m+1]);m++);const h=uv(e[m],e[m+1],d);return i[m](h)};return n?d=>u(Kl(e[0],e[a-1],d)):u}function yNe(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=uv(0,t,r);e.push(sr(n,1,s))}}function vNe(e){const t=[0];return yNe(t,e.length-1),t}function xNe(e,t){return e.map(n=>n*t)}function bNe(e,t){return e.map(()=>t||pa).splice(0,e.length-1)}function wy({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=P5e(r)?r.map(JB):JB(r),a={done:!1,value:t[0]},o=xNe(n&&n.length===t.length?n:vNe(t),e),i=gNe(o,t,{ease:Array.isArray(s)?s:bNe(t,s)});return{calculatedDuration:e,next:c=>(a.value=i(c),a.done=c>=e,a)}}const _Ne=e=>e!==null;function P8(e,{repeat:t,repeatType:n="loop"},r,s=1){const a=e.filter(_Ne),i=s<0||t&&n!=="loop"&&t%2===1?0:a.length-1;return!i||r===void 0?a[i]:r}const wNe={decay:X6,inertia:X6,tween:wy,keyframes:wy,spring:Y_};function kse(e){typeof e.type=="string"&&(e.type=wNe[e.type])}class R8{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const SNe=e=>e/100;class I8 extends R8{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==ga.now()&&this.tick(ga.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;kse(t);const{type:n=wy,repeat:r=0,repeatDelay:s=0,repeatType:a,velocity:o=0}=t;let{keyframes:i}=t;const c=n||wy;c!==wy&&typeof i[0]!="number"&&(this.mixKeyframes=j0(SNe,Ese(i[0],i[1])),i=[0,100]);const u=c({...t,keyframes:i});a==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...i].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=A8(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=u}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:s,mixKeyframes:a,mirroredGenerator:o,resolvedDuration:i,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:d,repeat:m,repeatType:h,repeatDelay:p,type:g,onUpdate:y,finalKeyframe:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const x=this.currentTime-u*(this.playbackSpeed>=0?1:-1),b=this.playbackSpeed>=0?x<0:x>s;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let _=this.currentTime,w=r;if(m){const M=Math.min(this.currentTime,s)/i;let T=Math.floor(M),I=M%1;!I&&M>=1&&(I=1),I===1&&T--,T=Math.min(T,m+1),!!(T%2)&&(h==="reverse"?(I=1-I,p&&(I-=p/i)):h==="mirror"&&(w=o)),_=Kl(0,1,I)*i}const S=b?{done:!1,value:d[0]}:w.next(_);a&&(S.value=a(S.value));let{done:C}=S;!b&&c!==null&&(C=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const E=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&C);return E&&g!==X6&&(S.value=P8(d,this.options,v,this.speed)),y&&y(S.value),E&&this.finish(),S}then(t,n){return this.finished.then(t,n)}get duration(){return Bi(this.calculatedDuration)}get time(){return Bi(this.currentTime)}set time(t){t=Ui(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(ga.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Bi(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=oNe,startTime:n}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ga.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function CNe(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const xd=e=>e*180/Math.PI,Z6=e=>{const t=xd(Math.atan2(e[1],e[0]));return J6(t)},ENe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Z6,rotateZ:Z6,skewX:e=>xd(Math.atan(e[1])),skewY:e=>xd(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},J6=e=>(e=e%360,e<0&&(e+=360),e),oV=Z6,iV=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),lV=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),MNe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:iV,scaleY:lV,scale:e=>(iV(e)+lV(e))/2,rotateX:e=>J6(xd(Math.atan2(e[6],e[5]))),rotateY:e=>J6(xd(Math.atan2(-e[2],e[0]))),rotateZ:oV,rotate:oV,skewX:e=>xd(Math.atan(e[4])),skewY:e=>xd(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function eA(e){return e.includes("scale")?1:0}function tA(e,t){if(!e||e==="none")return eA(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=MNe,s=n;else{const i=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=ENe,s=i}if(!s)return eA(t);const a=r[t],o=s[1].split(",").map(kNe);return typeof a=="function"?a(o):o[a]}const TNe=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return tA(n,t)};function kNe(e){return parseFloat(e.trim())}const np=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],rp=new Set(np),cV=e=>e===tp||e===Rt,NNe=new Set(["x","y","z"]),ANe=np.filter(e=>!NNe.has(e));function PNe(e){const t=[];return ANe.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const kd={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>tA(t,"x"),y:(e,{transform:t})=>tA(t,"y")};kd.translateX=kd.x;kd.translateY=kd.y;const Nd=new Set;let nA=!1,rA=!1,sA=!1;function Nse(){if(rA){const e=Array.from(Nd).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const s=PNe(r);s.length&&(n.set(r,s),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([a,o])=>{r.getValue(a)?.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}rA=!1,nA=!1,Nd.forEach(e=>e.complete(sA)),Nd.clear()}function Ase(){Nd.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(rA=!0)})}function RNe(){sA=!0,Ase(),Nse(),sA=!1}class j8{constructor(t,n,r,s,a,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=s,this.element=a,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Nd.add(this),nA||(nA=!0,Gn.read(Ase),Gn.resolveKeyframes(Nse))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:s}=this;if(t[0]===null){const a=s?.get(),o=t[t.length-1];if(a!==void 0)t[0]=a;else if(r&&n){const i=r.readValue(n,o);i!=null&&(t[0]=i)}t[0]===void 0&&(t[0]=o),s&&a===void 0&&s.set(t[0])}CNe(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Nd.delete(this)}cancel(){this.state==="scheduled"&&(Nd.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const INe=e=>e.startsWith("--");function jNe(e,t,n){INe(t)?e.style.setProperty(t,n):e.style[t]=n}const ONe=_8(()=>window.ScrollTimeline!==void 0),LNe={};function DNe(e,t){const n=_8(e);return()=>LNe[t]??n()}const Pse=DNe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ty=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,uV={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ty([0,.65,.55,1]),circOut:ty([.55,0,1,.45]),backIn:ty([.31,.01,.66,-.59]),backOut:ty([.33,1.53,.69,.99])};function Rse(e,t){if(e)return typeof e=="function"?Pse()?Mse(e,t):"ease-out":gse(e)?ty(e):Array.isArray(e)?e.map(n=>Rse(n,t)||uV.easeOut):uV[e]}function FNe(e,t,n,{delay:r=0,duration:s=300,repeat:a=0,repeatType:o="loop",ease:i="easeOut",times:c}={},u=void 0){const d={[t]:n};c&&(d.offset=c);const m=Rse(i,s);Array.isArray(m)&&(d.easing=m);const h={delay:r,duration:s,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"};return u&&(h.pseudoElement=u),e.animate(d,h)}function Ise(e){return typeof e=="function"&&"applyToOptions"in e}function UNe({type:e,...t}){return Ise(e)&&Pse()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class BNe extends R8{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:s,pseudoElement:a,allowFlatten:o=!1,finalKeyframe:i,onComplete:c}=t;this.isPseudoElement=!!a,this.allowFlatten=o,this.options=t,b8(typeof t.type!="string");const u=UNe(t);this.animation=FNe(n,r,s,u,a),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const d=P8(s,this.options,i,this.speed);this.updateMotionValue?this.updateMotionValue(d):jNe(n,r,d),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Bi(Number(t))}get time(){return Bi(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Ui(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&ONe()?(this.animation.timeline=t,lo):n(this)}}const jse={anticipate:fse,backInOut:dse,circInOut:hse};function VNe(e){return e in jse}function $Ne(e){typeof e.ease=="string"&&VNe(e.ease)&&(e.ease=jse[e.ease])}const dV=10;class WNe extends BNe{constructor(t){$Ne(t),kse(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:s,element:a,...o}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const i=new I8({...o,autoplay:!1}),c=Ui(this.finishedTime??this.time);n.setWithVelocity(i.sample(c-dV).value,i.sample(c).value,dV),i.stop()}}const fV=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(du.test(e)||e==="0")&&!e.startsWith("url("));function HNe(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function zNe(e,t,n,r){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],o=fV(s,t),i=fV(a,t);return!o||!i?!1:HNe(e)||(n==="spring"||Ise(n))&&r}function aA(e){e.duration=0,e.type}const GNe=new Set(["opacity","clipPath","filter","transform"]),qNe=_8(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function KNe(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:s,damping:a,type:o}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=t.owner.getProps();return qNe()&&n&&GNe.has(n)&&(n!=="transform"||!u)&&!c&&!r&&s!=="mirror"&&a!==0&&o!=="inertia"}const YNe=40;class QNe extends R8{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:o="loop",keyframes:i,name:c,motionValue:u,element:d,...m}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=ga.now();const h={autoplay:t,delay:n,type:r,repeat:s,repeatDelay:a,repeatType:o,name:c,motionValue:u,element:d,...m},p=d?.KeyframeResolver||j8;this.keyframeResolver=new p(i,(g,y,v)=>this.onKeyframesResolved(g,y,h,!v),c,u,d),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,n,r,s){this.keyframeResolver=void 0;const{name:a,type:o,velocity:i,delay:c,isHandoff:u,onUpdate:d}=r;this.resolvedAt=ga.now(),zNe(t,a,o,i)||((Yl.instantAnimations||!c)&&d?.(P8(t,r,n)),t[0]=t[t.length-1],aA(r),r.repeat=0);const h={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>YNe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},p=!u&&KNe(h)?new WNe({...h,element:h.motionValue.owner.current}):new I8(h);p.finished.then(()=>this.notifyFinished()).catch(lo),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),RNe()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const XNe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function ZNe(e){const t=XNe.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}function Ose(e,t,n=1){const[r,s]=ZNe(e);if(!r)return;const a=window.getComputedStyle(t).getPropertyValue(r);if(a){const o=a.trim();return rse(o)?parseFloat(o):o}return M8(s)?Ose(s,t,n+1):s}function O8(e,t){return e?.[t]??e?.default??e}const Lse=new Set(["width","height","top","left","right","bottom",...np]),JNe={test:e=>e==="auto",parse:e=>e},Dse=e=>t=>t.test(e),Fse=[tp,Rt,Vi,jc,H5e,W5e,JNe],mV=e=>Fse.find(Dse(e));function e6e(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||ase(e):!0}const t6e=new Set(["brightness","contrast","saturate","opacity"]);function n6e(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(T8)||[];if(!r)return e;const s=n.replace(r,"");let a=t6e.has(t)?1:0;return r!==n&&(a*=100),t+"("+a+s+")"}const r6e=/\b([a-z-]*)\(.*?\)/gu,oA={...du,getAnimatableNone:e=>{const t=e.match(r6e);return t?t.map(n6e).join(" "):e}},hV={...tp,transform:Math.round},s6e={rotate:jc,rotateX:jc,rotateY:jc,rotateZ:jc,scale:px,scaleX:px,scaleY:px,scaleZ:px,skew:jc,skewX:jc,skewY:jc,distance:Rt,translateX:Rt,translateY:Rt,translateZ:Rt,x:Rt,y:Rt,z:Rt,perspective:Rt,transformPerspective:Rt,opacity:dv,originX:eV,originY:eV,originZ:Rt},L8={borderWidth:Rt,borderTopWidth:Rt,borderRightWidth:Rt,borderBottomWidth:Rt,borderLeftWidth:Rt,borderRadius:Rt,radius:Rt,borderTopLeftRadius:Rt,borderTopRightRadius:Rt,borderBottomRightRadius:Rt,borderBottomLeftRadius:Rt,width:Rt,maxWidth:Rt,height:Rt,maxHeight:Rt,top:Rt,right:Rt,bottom:Rt,left:Rt,padding:Rt,paddingTop:Rt,paddingRight:Rt,paddingBottom:Rt,paddingLeft:Rt,margin:Rt,marginTop:Rt,marginRight:Rt,marginBottom:Rt,marginLeft:Rt,backgroundPositionX:Rt,backgroundPositionY:Rt,...s6e,zIndex:hV,fillOpacity:dv,strokeOpacity:dv,numOctaves:hV},a6e={...L8,color:Er,backgroundColor:Er,outlineColor:Er,fill:Er,stroke:Er,borderColor:Er,borderTopColor:Er,borderRightColor:Er,borderBottomColor:Er,borderLeftColor:Er,filter:oA,WebkitFilter:oA},Use=e=>a6e[e];function Bse(e,t){let n=Use(e);return n!==oA&&(n=du),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const o6e=new Set(["auto","none","0"]);function i6e(e,t,n){let r=0,s;for(;r<e.length&&!s;){const a=e[r];typeof a=="string"&&!o6e.has(a)&&fv(a).values.length&&(s=e[r]),r++}if(s&&n)for(const a of t)e[a]=Bse(n,s)}class l6e extends j8{constructor(t,n,r,s,a){super(t,n,r,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let u=t[c];if(typeof u=="string"&&(u=u.trim(),M8(u))){const d=Ose(u,n.current);d!==void 0&&(t[c]=d),c===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!Lse.has(r)||t.length!==2)return;const[s,a]=t,o=mV(s),i=mV(a);if(o!==i)if(cV(o)&&cV(i))for(let c=0;c<t.length;c++){const u=t[c];typeof u=="string"&&(t[c]=parseFloat(u))}else kd[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let s=0;s<t.length;s++)(t[s]===null||e6e(t[s]))&&r.push(s);r.length&&i6e(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=kd[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(r,s).jump(s,!1)}measureEndState(){const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const a=r.length-1,o=r[a];r[a]=kd[n](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([i,c])=>{t.getValue(i).set(c)}),this.resolveNoneKeyframes()}}function Vse(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;t&&(r=t.current);const s=n?.[e]??r.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const $se=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function Wse(e){return sse(e)&&"offsetHeight"in e}const pV=30,c6e=e=>!isNaN(parseFloat(e));class u6e{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const s=ga.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=ga.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=c6e(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new w8);const r=this.events[t].add(n);return t==="change"?()=>{r(),Gn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=ga.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>pV)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,pV);return ose(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function rh(e,t){return new u6e(e,t)}const{schedule:D8}=yse(queueMicrotask,!1),Po={x:!1,y:!1};function Hse(){return Po.x||Po.y}function d6e(e){return e==="x"||e==="y"?Po[e]?null:(Po[e]=!0,()=>{Po[e]=!1}):Po.x||Po.y?null:(Po.x=Po.y=!0,()=>{Po.x=Po.y=!1})}function zse(e,t){const n=Vse(e),r=new AbortController,s={passive:!0,...t,signal:r.signal};return[n,s,()=>r.abort()]}function gV(e){return!(e.pointerType==="touch"||Hse())}function f6e(e,t,n={}){const[r,s,a]=zse(e,n),o=i=>{if(!gV(i))return;const{target:c}=i,u=t(c,i);if(typeof u!="function"||!c)return;const d=m=>{gV(m)&&(u(m),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,s)};return r.forEach(i=>{i.addEventListener("pointerenter",o,s)}),a}const Gse=(e,t)=>t?e===t?!0:Gse(e,t.parentElement):!1,F8=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,m6e=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function h6e(e){return m6e.has(e.tagName)||e.tabIndex!==-1}const Jb=new WeakSet;function yV(e){return t=>{t.key==="Enter"&&e(t)}}function M3(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const p6e=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=yV(()=>{if(Jb.has(n))return;M3(n,"down");const s=yV(()=>{M3(n,"up")}),a=()=>M3(n,"cancel");n.addEventListener("keyup",s,t),n.addEventListener("blur",a,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function vV(e){return F8(e)&&!Hse()}function g6e(e,t,n={}){const[r,s,a]=zse(e,n),o=i=>{const c=i.currentTarget;if(!vV(i))return;Jb.add(c);const u=t(c,i),d=(p,g)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",h),Jb.has(c)&&Jb.delete(c),vV(p)&&typeof u=="function"&&u(p,{success:g})},m=p=>{d(p,c===window||c===document||n.useGlobalTarget||Gse(c,p.target))},h=p=>{d(p,!1)};window.addEventListener("pointerup",m,s),window.addEventListener("pointercancel",h,s)};return r.forEach(i=>{(n.useGlobalTarget?window:i).addEventListener("pointerdown",o,s),Wse(i)&&(i.addEventListener("focus",u=>p6e(u,s)),!h6e(i)&&!i.hasAttribute("tabindex")&&(i.tabIndex=0))}),a}function qse(e){return sse(e)&&"ownerSVGElement"in e}function y6e(e){return qse(e)&&e.tagName==="svg"}const Cs=e=>!!(e&&e.getVelocity),v6e=[...Fse,Er,du],x6e=e=>v6e.find(Dse(e)),U8=f.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class b6e extends f.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=Wse(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=s-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function _6e({children:e,isPresent:t,anchorX:n,root:r}){const s=f.useId(),a=f.useRef(null),o=f.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:i}=f.useContext(U8);return f.useInsertionEffect(()=>{const{width:c,height:u,top:d,left:m,right:h}=o.current;if(t||!a.current||!c||!u)return;const p=n==="left"?`left: ${m}`:`right: ${h}`;a.current.dataset.motionPopId=s;const g=document.createElement("style");i&&(g.nonce=i);const y=r??document.head;return y.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${u}px !important;
            ${p}px !important;
            top: ${d}px !important;
          }
        `),()=>{y.contains(g)&&y.removeChild(g)}},[t]),l.jsx(b6e,{isPresent:t,childRef:a,sizeRef:o,children:f.cloneElement(e,{ref:a})})}const w6e=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:a,mode:o,anchorX:i,root:c})=>{const u=p8(S6e),d=f.useId();let m=!0,h=f.useMemo(()=>(m=!1,{id:d,initial:t,isPresent:n,custom:s,onExitComplete:p=>{u.set(p,!0);for(const g of u.values())if(!g)return;r&&r()},register:p=>(u.set(p,!1),()=>u.delete(p))}),[n,u,r]);return a&&m&&(h={...h}),f.useMemo(()=>{u.forEach((p,g)=>u.set(g,!1))},[n]),f.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),o==="popLayout"&&(e=l.jsx(_6e,{isPresent:n,anchorX:i,root:c,children:e})),l.jsx(wS.Provider,{value:h,children:e})};function S6e(){return new Map}function Kse(e=!0){const t=f.useContext(wS);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=t,a=f.useId();f.useEffect(()=>{if(e)return s(a)},[e]);const o=f.useCallback(()=>e&&r&&r(a),[a,r,e]);return!n&&r?[!1,o]:[!0]}const gx=e=>e.key||"";function xV(e){const t=[];return f.Children.forEach(e,n=>{f.isValidElement(n)&&t.push(n)}),t}const st=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:a="sync",propagate:o=!1,anchorX:i="left",root:c})=>{const[u,d]=Kse(o),m=f.useMemo(()=>xV(e),[e]),h=o&&!u?[]:m.map(gx),p=f.useRef(!0),g=f.useRef(m),y=p8(()=>new Map),[v,x]=f.useState(m),[b,_]=f.useState(m);y8(()=>{p.current=!1,g.current=m;for(let C=0;C<b.length;C++){const E=gx(b[C]);h.includes(E)?y.delete(E):y.get(E)!==!0&&y.set(E,!1)}},[b,h.length,h.join("-")]);const w=[];if(m!==v){let C=[...m];for(let E=0;E<b.length;E++){const M=b[E],T=gx(M);h.includes(T)||(C.splice(E,0,M),w.push(M))}return a==="wait"&&w.length&&(C=w),_(xV(C)),x(m),null}const{forceRender:S}=f.useContext(cv);return l.jsx(l.Fragment,{children:b.map(C=>{const E=gx(C),M=o&&!u?!1:m===b||h.includes(E),T=()=>{if(y.has(E))y.set(E,!0);else return;let I=!0;y.forEach(j=>{j||(I=!1)}),I&&(S?.(),_(g.current),o&&d?.(),r&&r())};return l.jsx(w6e,{isPresent:M,initial:!p.current||n?void 0:!1,custom:t,presenceAffectsLayout:s,mode:a,root:c,onExitComplete:M?void 0:T,anchorX:i,children:C},E)})})},C6e=f.createContext(null);function E6e(){const e=f.useRef(!1);return y8(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function M6e(){const e=E6e(),[t,n]=f.useState(0),r=f.useCallback(()=>{e.current&&n(t+1)},[t]);return[f.useCallback(()=>Gn.postRender(r),[r]),t]}const T6e=e=>!e.isLayoutDirty&&e.willUpdate(!1);function bV(){const e=new Set,t=new WeakMap,n=()=>e.forEach(T6e);return{add:r=>{e.add(r),t.set(r,r.addEventListener("willUpdate",n))},remove:r=>{e.delete(r);const s=t.get(r);s&&(s(),t.delete(r)),n()},dirty:n}}const Yse=e=>e===!0,k6e=e=>Yse(e===!0)||e==="id",dc=({children:e,id:t,inherit:n=!0})=>{const r=f.useContext(cv),s=f.useContext(C6e),[a,o]=M6e(),i=f.useRef(null),c=r.id||s;i.current===null&&(k6e(n)&&c&&(t=t?c+"-"+t:c),i.current={id:t,group:Yse(n)&&r.group||bV()});const u=f.useMemo(()=>({...i.current,forceRender:a}),[o]);return l.jsx(cv.Provider,{value:u,children:e})},Qse=f.createContext({strict:!1}),_V={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},sh={};for(const e in _V)sh[e]={isEnabled:t=>_V[e].some(n=>!!t[n])};function N6e(e){for(const t in e)sh[t]={...sh[t],...e[t]}}const A6e=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Q_(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||A6e.has(e)}let Xse=e=>!Q_(e);function P6e(e){typeof e=="function"&&(Xse=t=>t.startsWith("on")?!Q_(t):e(t))}try{P6e(require("@emotion/is-prop-valid").default)}catch{}function R6e(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(Xse(s)||n===!0&&Q_(s)||!t&&!Q_(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}const SS=f.createContext({});function CS(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function mv(e){return typeof e=="string"||Array.isArray(e)}const B8=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],V8=["initial",...B8];function ES(e){return CS(e.animate)||V8.some(t=>mv(e[t]))}function Zse(e){return!!(ES(e)||e.variants)}function I6e(e,t){if(ES(e)){const{initial:n,animate:r}=e;return{initial:n===!1||mv(n)?n:void 0,animate:mv(r)?r:void 0}}return e.inherit!==!1?t:{}}function j6e(e){const{initial:t,animate:n}=I6e(e,f.useContext(SS));return f.useMemo(()=>({initial:t,animate:n}),[wV(t),wV(n)])}function wV(e){return Array.isArray(e)?e.join(" "):e}const hv={};function O6e(e){for(const t in e)hv[t]=e[t],E8(t)&&(hv[t].isCSSVariable=!0)}function Jse(e,{layout:t,layoutId:n}){return rp.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!hv[e]||e==="opacity")}const L6e={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},D6e=np.length;function F6e(e,t,n){let r="",s=!0;for(let a=0;a<D6e;a++){const o=np[a],i=e[o];if(i===void 0)continue;let c=!0;if(typeof i=="number"?c=i===(o.startsWith("scale")?1:0):c=parseFloat(i)===0,!c||n){const u=$se(i,L8[o]);if(!c){s=!1;const d=L6e[o]||o;r+=`${d}(${u}) `}n&&(t[o]=u)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}function $8(e,t,n){const{style:r,vars:s,transformOrigin:a}=e;let o=!1,i=!1;for(const c in t){const u=t[c];if(rp.has(c)){o=!0;continue}else if(E8(c)){s[c]=u;continue}else{const d=$se(u,L8[c]);c.startsWith("origin")?(i=!0,a[c]=d):r[c]=d}}if(t.transform||(o||n?r.transform=F6e(t,e.transform,n):r.transform&&(r.transform="none")),i){const{originX:c="50%",originY:u="50%",originZ:d=0}=a;r.transformOrigin=`${c} ${u} ${d}`}}const W8=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function eae(e,t,n){for(const r in t)!Cs(t[r])&&!Jse(r,n)&&(e[r]=t[r])}function U6e({transformTemplate:e},t){return f.useMemo(()=>{const n=W8();return $8(n,t,e),Object.assign({},n.vars,n.style)},[t])}function B6e(e,t){const n=e.style||{},r={};return eae(r,n,e),Object.assign(r,U6e(e,t)),r}function V6e(e,t){const n={},r=B6e(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const $6e={offset:"stroke-dashoffset",array:"stroke-dasharray"},W6e={offset:"strokeDashoffset",array:"strokeDasharray"};function H6e(e,t,n=1,r=0,s=!0){e.pathLength=1;const a=s?$6e:W6e;e[a.offset]=Rt.transform(-r);const o=Rt.transform(t),i=Rt.transform(n);e[a.array]=`${o} ${i}`}function tae(e,{attrX:t,attrY:n,attrScale:r,pathLength:s,pathSpacing:a=1,pathOffset:o=0,...i},c,u,d){if($8(e,i,u),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:m,style:h}=e;m.transform&&(h.transform=m.transform,delete m.transform),(h.transform||m.transformOrigin)&&(h.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),h.transform&&(h.transformBox=d?.transformBox??"fill-box",delete m.transformBox),t!==void 0&&(m.x=t),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),s!==void 0&&H6e(m,s,a,o,!1)}const nae=()=>({...W8(),attrs:{}}),rae=e=>typeof e=="string"&&e.toLowerCase()==="svg";function z6e(e,t,n,r){const s=f.useMemo(()=>{const a=nae();return tae(a,t,rae(r),e.transformTemplate,e.style),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};eae(a,e.style,e),s.style={...a,...s.style}}return s}const G6e=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function H8(e){return typeof e!="string"||e.includes("-")?!1:!!(G6e.indexOf(e)>-1||/[A-Z]/u.test(e))}function q6e(e,t,n,{latestValues:r},s,a=!1){const i=(H8(e)?z6e:V6e)(t,r,s,e),c=R6e(t,typeof e=="string",a),u=e!==f.Fragment?{...c,...i,ref:n}:{},{children:d}=t,m=f.useMemo(()=>Cs(d)?d.get():d,[d]);return f.createElement(e,{...u,children:m})}function SV(e){const t=[{},{}];return e?.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function z8(e,t,n,r){if(typeof t=="function"){const[s,a]=SV(r);t=t(n!==void 0?n:e.custom,s,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,a]=SV(r);t=t(n!==void 0?n:e.custom,s,a)}return t}function e_(e){return Cs(e)?e.get():e}function K6e({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,s){return{latestValues:Y6e(n,r,s,e),renderState:t()}}function Y6e(e,t,n,r){const s={},a=r(e,{});for(const h in a)s[h]=e_(a[h]);let{initial:o,animate:i}=e;const c=ES(e),u=Zse(e);t&&u&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),i===void 0&&(i=t.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const m=d?i:o;if(m&&typeof m!="boolean"&&!CS(m)){const h=Array.isArray(m)?m:[m];for(let p=0;p<h.length;p++){const g=z8(e,h[p]);if(g){const{transitionEnd:y,transition:v,...x}=g;for(const b in x){let _=x[b];if(Array.isArray(_)){const w=d?_.length-1:0;_=_[w]}_!==null&&(s[b]=_)}for(const b in y)s[b]=y[b]}}}return s}const sae=e=>(t,n)=>{const r=f.useContext(SS),s=f.useContext(wS),a=()=>K6e(e,t,r,s);return n?a():p8(a)};function G8(e,t,n){const{style:r}=e,s={};for(const a in r)(Cs(r[a])||t.style&&Cs(t.style[a])||Jse(a,e)||n?.getValue(a)?.liveStyle!==void 0)&&(s[a]=r[a]);return s}const Q6e=sae({scrapeMotionValuesFromProps:G8,createRenderState:W8});function aae(e,t,n){const r=G8(e,t,n);for(const s in e)if(Cs(e[s])||Cs(t[s])){const a=np.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[a]=e[s]}return r}const X6e=sae({scrapeMotionValuesFromProps:aae,createRenderState:nae}),Z6e=Symbol.for("motionComponentSymbol");function lm(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function J6e(e,t,n){return f.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):lm(n)&&(n.current=r))},[t])}const q8=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),eAe="framerAppearId",oae="data-"+q8(eAe),iae=f.createContext({});function tAe(e,t,n,r,s){const{visualElement:a}=f.useContext(SS),o=f.useContext(Qse),i=f.useContext(wS),c=f.useContext(U8).reducedMotion,u=f.useRef(null);r=r||o.renderer,!u.current&&r&&(u.current=r(e,{visualState:t,parent:a,props:n,presenceContext:i,blockInitialAnimation:i?i.initial===!1:!1,reducedMotionConfig:c}));const d=u.current,m=f.useContext(iae);d&&!d.projection&&s&&(d.type==="html"||d.type==="svg")&&nAe(u.current,n,s,m);const h=f.useRef(!1);f.useInsertionEffect(()=>{d&&h.current&&d.update(n,i)});const p=n[oae],g=f.useRef(!!p&&!window.MotionHandoffIsComplete?.(p)&&window.MotionHasOptimisedAnimation?.(p));return y8(()=>{d&&(h.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),g.current&&d.animationState&&d.animationState.animateChanges())}),f.useEffect(()=>{d&&(!g.current&&d.animationState&&d.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(p)}),g.current=!1),d.enteringChildren=void 0)}),d}function nAe(e,t,n,r){const{layoutId:s,layout:a,drag:o,dragConstraints:i,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:lae(e.parent)),e.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!o||i&&lm(i),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:c,layoutRoot:u})}function lae(e){if(e)return e.options.allowProjection!==!1?e.projection:lae(e.parent)}function T3(e,{forwardMotionProps:t=!1}={},n,r){n&&N6e(n);const s=H8(e)?X6e:Q6e;function a(i,c){let u;const d={...f.useContext(U8),...i,layoutId:rAe(i)},{isStatic:m}=d,h=j6e(i),p=s(i,m);if(!m&&g8){sAe();const g=aAe(d);u=g.MeasureLayout,h.visualElement=tAe(e,p,d,r,g.ProjectionNode)}return l.jsxs(SS.Provider,{value:h,children:[u&&h.visualElement?l.jsx(u,{visualElement:h.visualElement,...d}):null,q6e(e,i,J6e(p,h.visualElement,c),p,m,t)]})}a.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=f.forwardRef(a);return o[Z6e]=e,o}function rAe({layoutId:e}){const t=f.useContext(cv).id;return t&&e!==void 0?t+"-"+e:e}function sAe(e,t){f.useContext(Qse).strict}function aAe(e){const{drag:t,layout:n}=sh;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function oAe(e,t){if(typeof Proxy>"u")return T3;const n=new Map,r=(a,o)=>T3(a,o,e,t),s=(a,o)=>r(a,o);return new Proxy(s,{get:(a,o)=>o==="create"?r:(n.has(o)||n.set(o,T3(o,void 0,e,t)),n.get(o))})}function cae({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function iAe({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function lAe(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function k3(e){return e===void 0||e===1}function iA({scale:e,scaleX:t,scaleY:n}){return!k3(e)||!k3(t)||!k3(n)}function ld(e){return iA(e)||uae(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function uae(e){return CV(e.x)||CV(e.y)}function CV(e){return e&&e!=="0%"}function X_(e,t,n){const r=e-n,s=t*r;return n+s}function EV(e,t,n,r,s){return s!==void 0&&(e=X_(e,s,r)),X_(e,n,r)+t}function lA(e,t=0,n=1,r,s){e.min=EV(e.min,t,n,r,s),e.max=EV(e.max,t,n,r,s)}function dae(e,{x:t,y:n}){lA(e.x,t.translate,t.scale,t.originPoint),lA(e.y,n.translate,n.scale,n.originPoint)}const MV=.999999999999,TV=1.0000000000001;function cAe(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let a,o;for(let i=0;i<s;i++){a=n[i],o=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&um(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,dae(e,o)),r&&ld(a.latestValues)&&um(e,a.latestValues))}t.x<TV&&t.x>MV&&(t.x=1),t.y<TV&&t.y>MV&&(t.y=1)}function cm(e,t){e.min=e.min+t,e.max=e.max+t}function kV(e,t,n,r,s=.5){const a=sr(e.min,e.max,s);lA(e,t,n,a,r)}function um(e,t){kV(e.x,t.x,t.scaleX,t.scale,t.originX),kV(e.y,t.y,t.scaleY,t.scale,t.originY)}function fae(e,t){return cae(lAe(e.getBoundingClientRect(),t))}function uAe(e,t,n){const r=fae(e,n),{scroll:s}=t;return s&&(cm(r.x,s.offset.x),cm(r.y,s.offset.y)),r}const NV=()=>({translate:0,scale:1,origin:0,originPoint:0}),dm=()=>({x:NV(),y:NV()}),AV=()=>({min:0,max:0}),gr=()=>({x:AV(),y:AV()}),Z_={current:null},K8={current:!1};function mae(){if(K8.current=!0,!!g8)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Z_.current=e.matches;e.addEventListener("change",t),t()}else Z_.current=!1}const dAe=new WeakMap;function fAe(e,t,n){for(const r in t){const s=t[r],a=n[r];if(Cs(s))e.addValue(r,s);else if(Cs(a))e.addValue(r,rh(s,{owner:e}));else if(a!==s)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=e.getStaticValue(r);e.addValue(r,rh(o!==void 0?o:s,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const PV=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class mAe{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:a,visualState:o},i={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=j8,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=ga.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,Gn.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=i,this.blockInitialAnimation=!!a,this.isControllingVariants=ES(n),this.isVariantNode=Zse(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...m}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in m){const p=m[h];c[h]!==void 0&&Cs(p)&&p.set(c[h])}}mount(t){this.current=t,dAe.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),K8.current||mae(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Z_.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),uu(this.notifyUpdate),uu(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=rp.has(t);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Gn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),a&&a(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in sh){const n=sh[t];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[t]&&s&&r(this.props)&&(this.features[t]=new s(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):gr()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<PV.length;r++){const s=PV[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,o=t[a];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=fAe(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=rh(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(rse(r)||ase(r))?r=parseFloat(r):!x6e(r)&&du.test(n)&&(r=Bse(t,n)),this.setBaseTarget(t,Cs(r)?r.get():r)),Cs(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=z8(this.props,n,this.presenceContext?.custom);a&&(r=a[t])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!Cs(s)?s:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new w8),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){D8.render(this.render)}}class hae extends mAe{constructor(){super(...arguments),this.KeyframeResolver=l6e}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Cs(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function pae(e,{style:t,vars:n},r,s){const a=e.style;let o;for(o in t)a[o]=t[o];s?.applyProjectionStyles(a,r);for(o in n)a.setProperty(o,n[o])}function hAe(e){return window.getComputedStyle(e)}class pAe extends hae{constructor(){super(...arguments),this.type="html",this.renderInstance=pae}readValueFromInstance(t,n){if(rp.has(n))return this.projection?.isProjecting?eA(n):TNe(t,n);{const r=hAe(t),s=(E8(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return fae(t,n)}build(t,n,r){$8(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return G8(t,n,r)}}const gae=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function gAe(e,t,n,r){pae(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(gae.has(s)?s:q8(s),t.attrs[s])}class yAe extends hae{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=gr}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(rp.has(n)){const r=Use(n);return r&&r.default||0}return n=gae.has(n)?n:q8(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return aae(t,n,r)}build(t,n,r){tae(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,s){gAe(t,n,r,s)}mount(t){this.isSVGTag=rae(t.tagName),super.mount(t)}}const vAe=(e,t)=>H8(e)?new yAe(t):new pAe(t,{allowProjection:e!==f.Fragment});function Em(e,t,n){const r=e.getProps();return z8(r,t,n!==void 0?n:r.custom,e)}const cA=e=>Array.isArray(e);function xAe(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,rh(n))}function bAe(e){return cA(e)?e[e.length-1]||0:e}function _Ae(e,t){const n=Em(e,t);let{transitionEnd:r={},transition:s={},...a}=n||{};a={...a,...r};for(const o in a){const i=bAe(a[o]);xAe(e,o,i)}}function wAe(e){return!!(Cs(e)&&e.add)}function uA(e,t){const n=e.getValue("willChange");if(wAe(n))return n.add(t);if(!n&&Yl.WillChange){const r=new Yl.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function yae(e){return e.props[oae]}const SAe=e=>e!==null;function CAe(e,{repeat:t,repeatType:n="loop"},r){const s=e.filter(SAe),a=t&&n!=="loop"&&t%2===1?0:s.length-1;return s[a]}const EAe={type:"spring",stiffness:500,damping:25,restSpeed:10},MAe=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),TAe={type:"keyframes",duration:.8},kAe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},NAe=(e,{keyframes:t})=>t.length>2?TAe:rp.has(e)?e.startsWith("scale")?MAe(t[1]):EAe:kAe;function AAe({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:a,repeatType:o,repeatDelay:i,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const Y8=(e,t,n,r={},s,a)=>o=>{const i=O8(r,e)||{},c=i.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Ui(c);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...i,delay:-u,onUpdate:h=>{t.set(h),i.onUpdate&&i.onUpdate(h)},onComplete:()=>{o(),i.onComplete&&i.onComplete()},name:e,motionValue:t,element:a?void 0:s};AAe(i)||Object.assign(d,NAe(e,d)),d.duration&&(d.duration=Ui(d.duration)),d.repeatDelay&&(d.repeatDelay=Ui(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let m=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(aA(d),d.delay===0&&(m=!0)),(Yl.instantAnimations||Yl.skipAnimations)&&(m=!0,aA(d),d.delay=0),d.allowFlatten=!i.type&&!i.ease,m&&!a&&t.get()!==void 0){const h=CAe(d.keyframes,i);if(h!==void 0){Gn.update(()=>{d.onUpdate(h),d.onComplete()});return}}return i.isSync?new I8(d):new QNe(d)};function PAe({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function vae(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:a=e.getDefaultTransition(),transitionEnd:o,...i}=t;r&&(a=r);const c=[],u=s&&e.animationState&&e.animationState.getState()[s];for(const d in i){const m=e.getValue(d,e.latestValues[d]??null),h=i[d];if(h===void 0||u&&PAe(u,d))continue;const p={delay:n,...O8(a||{},d)},g=m.get();if(g!==void 0&&!m.isAnimating&&!Array.isArray(h)&&h===g&&!p.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const x=yae(e);if(x){const b=window.MotionHandoffAnimation(x,d,Gn);b!==null&&(p.startTime=b,y=!0)}}uA(e,d),m.start(Y8(d,m,h,e.shouldReduceMotion&&Lse.has(d)?{type:!1}:p,e,y));const v=m.animation;v&&c.push(v)}return o&&Promise.all(c).then(()=>{Gn.update(()=>{o&&_Ae(e,o)})}),c}function xae(e,t,n,r=0,s=1){const a=Array.from(e).sort((u,d)=>u.sortNodePosition(d)).indexOf(t),o=e.size,i=(o-1)*r;return typeof n=="function"?n(a,o):s===1?a*r:i-a*r}function dA(e,t,n={}){const r=Em(e,t,n.type==="exit"?e.presenceContext?.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const a=r?()=>Promise.all(vae(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:m}=s;return RAe(e,t,c,u,d,m,n)}:()=>Promise.resolve(),{when:i}=s;if(i){const[c,u]=i==="beforeChildren"?[a,o]:[o,a];return c().then(()=>u())}else return Promise.all([a(),o(n.delay)])}function RAe(e,t,n=0,r=0,s=0,a=1,o){const i=[];for(const c of e.variantChildren)c.notify("AnimationStart",t),i.push(dA(c,t,{...o,delay:n+(typeof r=="function"?0:r)+xae(e.variantChildren,c,r,s,a)}).then(()=>c.notify("AnimationComplete",t)));return Promise.all(i)}function IAe(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(a=>dA(e,a,n));r=Promise.all(s)}else if(typeof t=="string")r=dA(e,t,n);else{const s=typeof t=="function"?Em(e,t,n.custom):t;r=Promise.all(vae(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function bae(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const jAe=V8.length;function _ae(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?_ae(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<jAe;n++){const r=V8[n],s=e.props[r];(mv(s)||s===!1)&&(t[r]=s)}return t}const OAe=[...B8].reverse(),LAe=B8.length;function DAe(e){return t=>Promise.all(t.map(({animation:n,options:r})=>IAe(e,n,r)))}function FAe(e){let t=DAe(e),n=RV(),r=!0;const s=c=>(u,d)=>{const m=Em(e,d,c==="exit"?e.presenceContext?.custom:void 0);if(m){const{transition:h,transitionEnd:p,...g}=m;u={...u,...g,...p}}return u};function a(c){t=c(e)}function o(c){const{props:u}=e,d=_ae(e.parent)||{},m=[],h=new Set;let p={},g=1/0;for(let v=0;v<LAe;v++){const x=OAe[v],b=n[x],_=u[x]!==void 0?u[x]:d[x],w=mv(_),S=x===c?b.isActive:null;S===!1&&(g=v);let C=_===d[x]&&_!==u[x]&&w;if(C&&r&&e.manuallyAnimateOnMount&&(C=!1),b.protectedKeys={...p},!b.isActive&&S===null||!_&&!b.prevProp||CS(_)||typeof _=="boolean")continue;const E=UAe(b.prevProp,_);let M=E||x===c&&b.isActive&&!C&&w||v>g&&w,T=!1;const I=Array.isArray(_)?_:[_];let j=I.reduce(s(x),{});S===!1&&(j={});const{prevResolvedValues:N={}}=b,P={...N,...j},R=L=>{M=!0,h.has(L)&&(T=!0,h.delete(L)),b.needsAnimating[L]=!0;const F=e.getValue(L);F&&(F.liveStyle=!1)};for(const L in P){const F=j[L],U=N[L];if(p.hasOwnProperty(L))continue;let V=!1;cA(F)&&cA(U)?V=!bae(F,U):V=F!==U,V?F!=null?R(L):h.add(L):F!==void 0&&h.has(L)?R(L):b.protectedKeys[L]=!0}b.prevProp=_,b.prevResolvedValues=j,b.isActive&&(p={...p,...j}),r&&e.blockInitialAnimation&&(M=!1);const k=C&&E;M&&(!k||T)&&m.push(...I.map(L=>{const F={type:x};if(typeof L=="string"&&r&&!k&&e.manuallyAnimateOnMount&&e.parent){const{parent:U}=e,V=Em(U,L);if(U.enteringChildren&&V){const{delayChildren:W}=V.transition||{};F.delay=xae(U.enteringChildren,e,W)}}return{animation:L,options:F}}))}if(h.size){const v={};if(typeof u.initial!="boolean"){const x=Em(e,Array.isArray(u.initial)?u.initial[0]:u.initial);x&&x.transition&&(v.transition=x.transition)}h.forEach(x=>{const b=e.getBaseTarget(x),_=e.getValue(x);_&&(_.liveStyle=!0),v[x]=b??null}),m.push({animation:v})}let y=!!m.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(y=!1),r=!1,y?t(m):Promise.resolve()}function i(c,u){if(n[c].isActive===u)return Promise.resolve();e.variantChildren?.forEach(m=>m.animationState?.setActive(c,u)),n[c].isActive=u;const d=o(c);for(const m in n)n[m].protectedKeys={};return d}return{animateChanges:o,setActive:i,setAnimateFunction:a,getState:()=>n,reset:()=>{n=RV(),r=!0}}}function UAe(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!bae(t,e):!1}function qu(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function RV(){return{animate:qu(!0),whileInView:qu(),whileHover:qu(),whileTap:qu(),whileDrag:qu(),whileFocus:qu(),exit:qu()}}class ku{constructor(t){this.isMounted=!1,this.node=t}update(){}}class BAe extends ku{constructor(t){super(t),t.animationState||(t.animationState=FAe(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();CS(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let VAe=0;class $Ae extends ku{constructor(){super(...arguments),this.id=VAe++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const WAe={animation:{Feature:BAe},exit:{Feature:$Ae}};function pv(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function L0(e){return{point:{x:e.pageX,y:e.pageY}}}const HAe=e=>t=>F8(t)&&e(t,L0(t));function Sy(e,t,n,r){return pv(e,t,HAe(n),r)}const wae=1e-4,zAe=1-wae,GAe=1+wae,Sae=.01,qAe=0-Sae,KAe=0+Sae;function zs(e){return e.max-e.min}function YAe(e,t,n){return Math.abs(e-t)<=n}function IV(e,t,n,r=.5){e.origin=r,e.originPoint=sr(t.min,t.max,e.origin),e.scale=zs(n)/zs(t),e.translate=sr(n.min,n.max,e.origin)-e.originPoint,(e.scale>=zAe&&e.scale<=GAe||isNaN(e.scale))&&(e.scale=1),(e.translate>=qAe&&e.translate<=KAe||isNaN(e.translate))&&(e.translate=0)}function Cy(e,t,n,r){IV(e.x,t.x,n.x,r?r.originX:void 0),IV(e.y,t.y,n.y,r?r.originY:void 0)}function jV(e,t,n){e.min=n.min+t.min,e.max=e.min+zs(t)}function QAe(e,t,n){jV(e.x,t.x,n.x),jV(e.y,t.y,n.y)}function OV(e,t,n){e.min=t.min-n.min,e.max=e.min+zs(t)}function Ey(e,t,n){OV(e.x,t.x,n.x),OV(e.y,t.y,n.y)}function Ja(e){return[e("x"),e("y")]}const Cae=({current:e})=>e?e.ownerDocument.defaultView:null,LV=(e,t)=>Math.abs(e-t);function XAe(e,t){const n=LV(e.x,t.x),r=LV(e.y,t.y);return Math.sqrt(n**2+r**2)}class Eae{constructor(t,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:a=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=A3(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,g=XAe(h.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!g)return;const{point:y}=h,{timestamp:v}=as;this.history.push({...y,timestamp:v});const{onStart:x,onMove:b}=this.handlers;p||(x&&x(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,h)},this.handlePointerMove=(h,p)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=N3(p,this.transformPagePoint),Gn.update(this.updatePoint,!0)},this.handlePointerUp=(h,p)=>{this.end();const{onEnd:g,onSessionEnd:y,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=A3(h.type==="pointercancel"?this.lastMoveEventInfo:N3(p,this.transformPagePoint),this.history);this.startEvent&&g&&g(h,x),y&&y(h,x)},!F8(t))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=s||window;const i=L0(t),c=N3(i,this.transformPagePoint),{point:u}=c,{timestamp:d}=as;this.history=[{...u,timestamp:d}];const{onSessionStart:m}=n;m&&m(t,A3(c,this.history)),this.removeListeners=j0(Sy(this.contextWindow,"pointermove",this.handlePointerMove),Sy(this.contextWindow,"pointerup",this.handlePointerUp),Sy(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),uu(this.updatePoint)}}function N3(e,t){return t?{point:t(e.point)}:e}function DV(e,t){return{x:e.x-t.x,y:e.y-t.y}}function A3({point:e},t){return{point:e,delta:DV(e,Mae(t)),offset:DV(e,ZAe(t)),velocity:JAe(t,.1)}}function ZAe(e){return e[0]}function Mae(e){return e[e.length-1]}function JAe(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=Mae(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>Ui(t)));)n--;if(!r)return{x:0,y:0};const a=Bi(s.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const o={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function ePe(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?sr(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?sr(n,e,r.max):Math.min(e,n)),e}function FV(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function tPe(e,{top:t,left:n,bottom:r,right:s}){return{x:FV(e.x,n,s),y:FV(e.y,t,r)}}function UV(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function nPe(e,t){return{x:UV(e.x,t.x),y:UV(e.y,t.y)}}function rPe(e,t){let n=.5;const r=zs(e),s=zs(t);return s>r?n=uv(t.min,t.max-r,e.min):r>s&&(n=uv(e.min,e.max-s,t.min)),Kl(0,1,n)}function sPe(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const fA=.35;function aPe(e=fA){return e===!1?e=0:e===!0&&(e=fA),{x:BV(e,"left","right"),y:BV(e,"top","bottom")}}function BV(e,t,n){return{min:VV(e,t),max:VV(e,n)}}function VV(e,t){return typeof e=="number"?e:e[t]||0}const oPe=new WeakMap;class iPe{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=gr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=m=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(L0(m).point)},o=(m,h)=>{const{drag:p,dragPropagation:g,onDragStart:y}=this.getProps();if(p&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=d6e(p),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=h,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ja(x=>{let b=this.getAxisMotionValue(x).get()||0;if(Vi.test(b)){const{projection:_}=this.visualElement;if(_&&_.layout){const w=_.layout.layoutBox[x];w&&(b=zs(w)*(parseFloat(b)/100))}}this.originPoint[x]=b}),y&&Gn.postRender(()=>y(m,h)),uA(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},i=(m,h)=>{this.latestPointerEvent=m,this.latestPanInfo=h;const{dragPropagation:p,dragDirectionLock:g,onDirectionLock:y,onDrag:v}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:x}=h;if(g&&this.currentDirection===null){this.currentDirection=lPe(x),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",h.point,x),this.updateAxis("y",h.point,x),this.visualElement.render(),v&&v(m,h)},c=(m,h)=>{this.latestPointerEvent=m,this.latestPanInfo=h,this.stop(m,h),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Ja(m=>this.getAnimationState(m)==="paused"&&this.getAxisMotionValue(m).animation?.play()),{dragSnapToOrigin:d}=this.getProps();this.panSession=new Eae(t,{onSessionStart:a,onStart:o,onMove:i,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:Cae(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,s=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!s||!r)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:i}=this.getProps();i&&Gn.postRender(()=>i(r,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!yx(t,s,this.currentDirection))return;const a=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=ePe(o,this.constraints[t],this.elastic[t])),a.set(o)}resolveConstraints(){const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;t&&lm(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=tPe(r.layoutBox,t):this.constraints=!1,this.elastic=aPe(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ja(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=sPe(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!lm(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=uAe(r,s.root,this.visualElement.getTransformPagePoint());let o=nPe(s.layout.layoutBox,a);if(n){const i=n(iAe(o));this.hasMutatedConstraints=!!i,i&&(o=cae(i))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:i}=this.getProps(),c=this.constraints||{},u=Ja(d=>{if(!yx(d,n,this.currentDirection))return;let m=c&&c[d]||{};o&&(m={min:0,max:0});const h=s?200:1e6,p=s?40:1e7,g={type:"inertia",velocity:r?t[d]:0,bounceStiffness:h,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...a,...m};return this.startAxisValueAnimation(d,g)});return Promise.all(u).then(i)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return uA(this.visualElement,t),r.start(Y8(t,r,0,n,this.visualElement,!1))}stopAnimation(){Ja(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ja(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Ja(n=>{const{drag:r}=this.getProps();if(!yx(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:i}=s.layout.layoutBox[n];a.set(t[n]-sr(o,i,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!lm(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Ja(o=>{const i=this.getAxisMotionValue(o);if(i&&this.constraints!==!1){const c=i.get();s[o]=rPe({min:c,max:c},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ja(o=>{if(!yx(o,t,null))return;const i=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];i.set(sr(c,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;oPe.set(this.visualElement,this);const t=this.visualElement.current,n=Sy(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();lm(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Gn.read(r);const o=pv(window,"resize",()=>this.scalePositionWithinConstraints()),i=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Ja(d=>{const m=this.getAxisMotionValue(d);m&&(this.originPoint[d]+=c[d].translate,m.set(m.get()+c[d].translate))}),this.visualElement.render())});return()=>{o(),n(),a(),i&&i()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:o=fA,dragMomentum:i=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:a,dragElastic:o,dragMomentum:i}}}function yx(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function lPe(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class cPe extends ku{constructor(t){super(t),this.removeGroupControls=lo,this.removeListeners=lo,this.controls=new iPe(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||lo}unmount(){this.removeGroupControls(),this.removeListeners()}}const $V=e=>(t,n)=>{e&&Gn.postRender(()=>e(t,n))};class uPe extends ku{constructor(){super(...arguments),this.removePointerDownListener=lo}onPointerDown(t){this.session=new Eae(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Cae(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:$V(t),onStart:$V(n),onMove:r,onEnd:(a,o)=>{delete this.session,s&&Gn.postRender(()=>s(a,o))}}}mount(){this.removePointerDownListener=Sy(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const t_={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function WV(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const fg={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Rt.test(e))e=parseFloat(e);else return e;const n=WV(e,t.target.x),r=WV(e,t.target.y);return`${n}% ${r}%`}},dPe={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=du.parse(e);if(s.length>5)return r;const a=du.createTransformer(e),o=typeof s[0]!="number"?1:0,i=n.x.scale*t.x,c=n.y.scale*t.y;s[0+o]/=i,s[1+o]/=c;const u=sr(i,c,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),a(s)}};let P3=!1;class fPe extends f.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:a}=t;O6e(mPe),a&&(n.group&&n.group.add(a),r&&r.register&&s&&r.register(a),P3&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),t_.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:a}=this.props,{projection:o}=r;return o&&(o.isPresent=a,P3=!0,s||t.layoutDependency!==n||n===void 0||t.isPresent!==a?o.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?o.promote():o.relegate()||Gn.postRender(()=>{const i=o.getStack();(!i||!i.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),D8.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;P3=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Tae(e){const[t,n]=Kse(),r=f.useContext(cv);return l.jsx(fPe,{...e,layoutGroup:r,switchLayoutGroup:f.useContext(iae),isPresent:t,safeToRemove:n})}const mPe={borderRadius:{...fg,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:fg,borderTopRightRadius:fg,borderBottomLeftRadius:fg,borderBottomRightRadius:fg,boxShadow:dPe};function hPe(e,t,n){const r=Cs(e)?e:rh(e);return r.start(Y8("",r,t,n)),r.animation}const pPe=(e,t)=>e.depth-t.depth;class gPe{constructor(){this.children=[],this.isDirty=!1}add(t){v8(this.children,t),this.isDirty=!0}remove(t){x8(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(pPe),this.isDirty=!1,this.children.forEach(t)}}function yPe(e,t){const n=ga.now(),r=({timestamp:s})=>{const a=s-n;a>=t&&(uu(r),e(a-t))};return Gn.setup(r,!0),()=>uu(r)}const kae=["TopLeft","TopRight","BottomLeft","BottomRight"],vPe=kae.length,HV=e=>typeof e=="string"?parseFloat(e):e,zV=e=>typeof e=="number"||Rt.test(e);function xPe(e,t,n,r,s,a){s?(e.opacity=sr(0,n.opacity??1,bPe(r)),e.opacityExit=sr(t.opacity??1,0,_Pe(r))):a&&(e.opacity=sr(t.opacity??1,n.opacity??1,r));for(let o=0;o<vPe;o++){const i=`border${kae[o]}Radius`;let c=GV(t,i),u=GV(n,i);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||zV(c)===zV(u)?(e[i]=Math.max(sr(HV(c),HV(u),r),0),(Vi.test(u)||Vi.test(c))&&(e[i]+="%")):e[i]=u}(t.rotate||n.rotate)&&(e.rotate=sr(t.rotate||0,n.rotate||0,r))}function GV(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const bPe=Nae(0,.5,mse),_Pe=Nae(.5,.95,lo);function Nae(e,t,n){return r=>r<e?0:r>t?1:n(uv(e,t,r))}function qV(e,t){e.min=t.min,e.max=t.max}function Xa(e,t){qV(e.x,t.x),qV(e.y,t.y)}function KV(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function YV(e,t,n,r,s){return e-=t,e=X_(e,1/n,r),s!==void 0&&(e=X_(e,1/s,r)),e}function wPe(e,t=0,n=1,r=.5,s,a=e,o=e){if(Vi.test(t)&&(t=parseFloat(t),t=sr(o.min,o.max,t/100)-o.min),typeof t!="number")return;let i=sr(a.min,a.max,r);e===a&&(i-=t),e.min=YV(e.min,t,n,i,s),e.max=YV(e.max,t,n,i,s)}function QV(e,t,[n,r,s],a,o){wPe(e,t[n],t[r],t[s],t.scale,a,o)}const SPe=["x","scaleX","originX"],CPe=["y","scaleY","originY"];function XV(e,t,n,r){QV(e.x,t,SPe,n?n.x:void 0,r?r.x:void 0),QV(e.y,t,CPe,n?n.y:void 0,r?r.y:void 0)}function ZV(e){return e.translate===0&&e.scale===1}function Aae(e){return ZV(e.x)&&ZV(e.y)}function JV(e,t){return e.min===t.min&&e.max===t.max}function EPe(e,t){return JV(e.x,t.x)&&JV(e.y,t.y)}function e$(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Pae(e,t){return e$(e.x,t.x)&&e$(e.y,t.y)}function t$(e){return zs(e.x)/zs(e.y)}function n$(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class MPe{constructor(){this.members=[]}add(t){v8(this.members,t),t.scheduleRender()}remove(t){if(x8(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function TPe(e,t,n){let r="";const s=e.x.translate/t.x,a=e.y.translate/t.y,o=n?.z||0;if((s||a||o)&&(r=`translate3d(${s}px, ${a}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:m,rotateY:h,skewX:p,skewY:g}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),m&&(r+=`rotateX(${m}deg) `),h&&(r+=`rotateY(${h}deg) `),p&&(r+=`skewX(${p}deg) `),g&&(r+=`skewY(${g}deg) `)}const i=e.x.scale*t.x,c=e.y.scale*t.y;return(i!==1||c!==1)&&(r+=`scale(${i}, ${c})`),r||"none"}const R3=["","X","Y","Z"],kPe=1e3;let NPe=0;function I3(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function Rae(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=yae(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Gn,!(s||a))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&Rae(r)}function Iae({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},i=t?.()){this.id=NPe++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(RPe),this.nodes.forEach(LPe),this.nodes.forEach(DPe),this.nodes.forEach(IPe)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=i?i.root||i:this,this.path=i?[...i.path,i]:[],this.parent=i,this.depth=i?i.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new gPe)}addEventListener(o,i){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new w8),this.eventHandlers.get(o).add(i)}notifyListeners(o,...i){const c=this.eventHandlers.get(o);c&&c.notify(...i)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=qse(o)&&!y6e(o),this.instance=o;const{layoutId:i,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||i)&&(this.isLayoutDirty=!0),e){let d,m=0;const h=()=>this.root.updateBlockedByResize=!1;Gn.read(()=>{m=window.innerWidth}),e(o,()=>{const p=window.innerWidth;p!==m&&(m=p,this.root.updateBlockedByResize=!0,d&&d(),d=yPe(h,250),t_.hasAnimatedSinceResize&&(t_.hasAnimatedSinceResize=!1,this.nodes.forEach(a$)))})}i&&this.root.registerSharedNode(i,this),this.options.animate!==!1&&u&&(i||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:m,hasRelativeLayoutChanged:h,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||u.getDefaultTransition()||$Pe,{onLayoutAnimationStart:y,onLayoutAnimationComplete:v}=u.getProps(),x=!this.targetLayout||!Pae(this.targetLayout,p),b=!m&&h;if(this.options.layoutRoot||this.resumeFrom||b||m&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const _={...O8(g,"layout"),onPlay:y,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_),this.setAnimationOrigin(d,b)}else m||a$(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),uu(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(FPe),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Rae(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const m=this.path[d];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:i,layout:c}=this.options;if(i===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(r$);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(s$);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(OPe),this.nodes.forEach(APe),this.nodes.forEach(PPe)):this.nodes.forEach(s$),this.clearAllSnapshots();const i=ga.now();as.delta=Kl(0,1e3/60,i-as.timestamp),as.timestamp=i,as.isProcessing=!0,w3.update.process(as),w3.preRender.process(as),w3.render.process(as),as.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,D8.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(jPe),this.sharedNodes.forEach(UPe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Gn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Gn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!zs(this.snapshot.measuredBox.x)&&!zs(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=gr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:i}=this.options;i&&i.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let i=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(i=!1),i&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,i=this.projectionDelta&&!Aae(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&this.instance&&(i||ld(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const i=this.measurePageBox();let c=this.removeElementScroll(i);return o&&(c=this.removeTransform(c)),WPe(c),{animationId:this.root.animationId,measuredBox:i,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return gr();const i=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(HPe))){const{scroll:u}=this.root;u&&(cm(i.x,u.offset.x),cm(i.y,u.offset.y))}return i}removeElementScroll(o){const i=gr();if(Xa(i,o),this.scroll?.wasRoot)return i;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:m}=u;u!==this.root&&d&&m.layoutScroll&&(d.wasRoot&&Xa(i,o),cm(i.x,d.offset.x),cm(i.y,d.offset.y))}return i}applyTransform(o,i=!1){const c=gr();Xa(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!i&&d.options.layoutScroll&&d.scroll&&d!==d.root&&um(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),ld(d.latestValues)&&um(c,d.latestValues)}return ld(this.latestValues)&&um(c,this.latestValues),c}removeTransform(o){const i=gr();Xa(i,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!ld(u.latestValues))continue;iA(u.latestValues)&&u.updateSnapshot();const d=gr(),m=u.measurePageBox();Xa(d,m),XV(i,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return ld(this.latestValues)&&XV(i,this.latestValues),i}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==as.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const i=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=i.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=i.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=i.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==i;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:m}=this.options;if(!(!this.layout||!(d||m))){if(this.resolvedRelativeTargetAt=as.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=gr(),this.relativeTargetOrigin=gr(),Ey(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),Xa(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=gr(),this.targetWithTransforms=gr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),QAe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Xa(this.target,this.layout.layoutBox),dae(this.target,this.targetDelta)):Xa(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=gr(),this.relativeTargetOrigin=gr(),Ey(this.relativeTargetOrigin,this.target,h.target),Xa(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||iA(this.parent.latestValues)||uae(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),i=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),i&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===as.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Xa(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,h=this.treeScale.y;cAe(this.layoutCorrected,this.treeScale,this.path,i),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=gr());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(KV(this.prevProjectionDelta.x,this.projectionDelta.x),KV(this.prevProjectionDelta.y,this.projectionDelta.y)),Cy(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==h||!n$(this.projectionDelta.x,this.prevProjectionDelta.x)||!n$(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const i=this.getStack();i&&i.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=dm(),this.projectionDelta=dm(),this.projectionDeltaWithTransform=dm()}setAnimationOrigin(o,i=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},m=dm();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!i;const h=gr(),p=c?c.source:void 0,g=this.layout?this.layout.source:void 0,y=p!==g,v=this.getStack(),x=!v||v.members.length<=1,b=!!(y&&!x&&this.options.crossfade===!0&&!this.path.some(VPe));this.animationProgress=0;let _;this.mixTargetDelta=w=>{const S=w/1e3;o$(m.x,o.x,S),o$(m.y,o.y,S),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ey(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),BPe(this.relativeTarget,this.relativeTargetOrigin,h,S),_&&EPe(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=gr()),Xa(_,this.relativeTarget)),y&&(this.animationValues=d,xPe(d,u,this.latestValues,S,b,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(uu(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Gn.update(()=>{t_.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=rh(0)),this.currentAnimation=hPe(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:i=>{this.mixTargetDelta(i),o.onUpdate&&o.onUpdate(i)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(kPe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:i,target:c,layout:u,latestValues:d}=o;if(!(!i||!c||!u)){if(this!==o&&this.layout&&u&&jae(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||gr();const m=zs(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+m;const h=zs(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+h}Xa(i,c),um(i,d),Cy(this.projectionDeltaWithTransform,this.layoutCorrected,i,d)}}registerSharedNode(o,i){this.sharedNodes.has(o)||this.sharedNodes.set(o,new MPe),this.sharedNodes.get(o).add(i);const u=i.options.initialPromotionConfig;i.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(i):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:i,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),i&&this.setOptions({transition:i})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let i=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(i=!0),!i)return;const u={};c.z&&I3("z",o,u,this.animationValues);for(let d=0;d<R3.length;d++)I3(`rotate${R3[d]}`,o,u,this.animationValues),I3(`skew${R3[d]}`,o,u,this.animationValues);o.render();for(const d in u)o.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);o.scheduleRender()}applyProjectionStyles(o,i){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=e_(i?.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=e_(i?.pointerEvents)||""),this.hasProjected&&!ld(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let m=TPe(this.projectionDeltaWithTransform,this.treeScale,d);c&&(m=c(d,m)),o.transform=m;const{x:h,y:p}=this.projectionDelta;o.transformOrigin=`${h.origin*100}% ${p.origin*100}% 0`,u.animationValues?o.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:o.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const g in hv){if(d[g]===void 0)continue;const{correct:y,applyTo:v,isCSSVariable:x}=hv[g],b=m==="none"?d[g]:y(d[g],u);if(v){const _=v.length;for(let w=0;w<_;w++)o[v[w]]=b}else x?this.options.visualElement.renderState.vars[g]=b:o[g]=b}this.options.layoutId&&(o.pointerEvents=u===this?e_(i?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(r$),this.root.sharedNodes.clear()}}}function APe(e){e.updateLayout()}function PPe(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=e.layout,{animationType:s}=e.options,a=t.source!==e.layout.source;s==="size"?Ja(d=>{const m=a?t.measuredBox[d]:t.layoutBox[d],h=zs(m);m.min=n[d].min,m.max=m.min+h}):jae(s,t.layoutBox,n)&&Ja(d=>{const m=a?t.measuredBox[d]:t.layoutBox[d],h=zs(n[d]);m.max=m.min+h,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+h)});const o=dm();Cy(o,n,t.layoutBox);const i=dm();a?Cy(i,e.applyTransform(r,!0),t.measuredBox):Cy(i,n,t.layoutBox);const c=!Aae(o);let u=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:m,layout:h}=d;if(m&&h){const p=gr();Ey(p,t.layoutBox,m.layoutBox);const g=gr();Ey(g,n,h.layoutBox),Pae(p,g)||(u=!0),d.options.layoutRoot&&(e.relativeTarget=g,e.relativeTargetOrigin=p,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:i,layoutDelta:o,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function RPe(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function IPe(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function jPe(e){e.clearSnapshot()}function r$(e){e.clearMeasurements()}function s$(e){e.isLayoutDirty=!1}function OPe(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function a$(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function LPe(e){e.resolveTargetDelta()}function DPe(e){e.calcProjection()}function FPe(e){e.resetSkewAndRotation()}function UPe(e){e.removeLeadSnapshot()}function o$(e,t,n){e.translate=sr(t.translate,0,n),e.scale=sr(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function i$(e,t,n,r){e.min=sr(t.min,n.min,r),e.max=sr(t.max,n.max,r)}function BPe(e,t,n,r){i$(e.x,t.x,n.x,r),i$(e.y,t.y,n.y,r)}function VPe(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const $Pe={duration:.45,ease:[.4,0,.1,1]},l$=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),c$=l$("applewebkit/")&&!l$("chrome/")?Math.round:lo;function u$(e){e.min=c$(e.min),e.max=c$(e.max)}function WPe(e){u$(e.x),u$(e.y)}function jae(e,t,n){return e==="position"||e==="preserve-aspect"&&!YAe(t$(t),t$(n),.2)}function HPe(e){return e!==e.root&&e.scroll?.wasRoot}const zPe=Iae({attachResizeListener:(e,t)=>pv(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),j3={current:void 0},Oae=Iae({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!j3.current){const e=new zPe({});e.mount(window),e.setOptions({layoutScroll:!0}),j3.current=e}return j3.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),GPe={pan:{Feature:uPe},drag:{Feature:cPe,ProjectionNode:Oae,MeasureLayout:Tae}};function d$(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,a=r[s];a&&Gn.postRender(()=>a(t,L0(t)))}class qPe extends ku{mount(){const{current:t}=this.node;t&&(this.unmount=f6e(t,(n,r)=>(d$(this.node,r,"Start"),s=>d$(this.node,s,"End"))))}unmount(){}}class KPe extends ku{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=j0(pv(this.node.current,"focus",()=>this.onFocus()),pv(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function f$(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),a=r[s];a&&Gn.postRender(()=>a(t,L0(t)))}class YPe extends ku{mount(){const{current:t}=this.node;t&&(this.unmount=g6e(t,(n,r)=>(f$(this.node,r,"Start"),(s,{success:a})=>f$(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const mA=new WeakMap,O3=new WeakMap,QPe=e=>{const t=mA.get(e.target);t&&t(e)},XPe=e=>{e.forEach(QPe)};function ZPe({root:e,...t}){const n=e||document;O3.has(n)||O3.set(n,{});const r=O3.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(XPe,{root:e,...t})),r[s]}function JPe(e,t,n){const r=ZPe(t);return mA.set(e,n),r.observe(e),()=>{mA.delete(e),r.unobserve(e)}}const eRe={some:0,all:1};class tRe extends ku{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:a}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:eRe[s]},i=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:m}=this.node.getProps(),h=u?d:m;h&&h(c)};return JPe(this.node.current,o,i)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(nRe(t,n))&&this.startObserver()}unmount(){}}function nRe({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const rRe={inView:{Feature:tRe},tap:{Feature:YPe},focus:{Feature:KPe},hover:{Feature:qPe}},sRe={layout:{ProjectionNode:Oae,MeasureLayout:Tae}},aRe={...WAe,...rRe,...GPe,...sRe},_e=oAe(aRe,vAe);function D0(){!K8.current&&mae();const[e]=f.useState(Z_.current);return e}const oRe={some:0,all:1};function iRe(e,t,{root:n,margin:r,amount:s="some"}={}){const a=Vse(e),o=new WeakMap,i=u=>{u.forEach(d=>{const m=o.get(d.target);if(d.isIntersecting!==!!m)if(d.isIntersecting){const h=t(d.target,d);typeof h=="function"?o.set(d.target,h):c.unobserve(d.target)}else typeof m=="function"&&(m(d),o.delete(d.target))})},c=new IntersectionObserver(i,{root:n,rootMargin:r,threshold:typeof s=="number"?s:oRe[s]});return a.forEach(u=>c.observe(u)),()=>c.disconnect()}function lRe(e,{root:t,margin:n,amount:r,once:s=!1,initial:a=!1}={}){const[o,i]=f.useState(a);return f.useEffect(()=>{if(!e.current||s&&o)return;const c=()=>(i(!0),s?void 0:()=>i(!1)),u={root:t&&t.current||void 0,margin:n,amount:r};return iRe(e.current,c,u)},[t,e,n,s,r]),o}const cRe=()=>{const{base:e}=At(),t=Pt();return t===(e||"/")||t?.startsWith("/search")},uRe={micro:"font-sans text-2xs font-normal",tiny:"font-sans text-xs font-medium",tinyRegular:"font-sans text-xs font-normal",tinyBold:"font-sans text-xs font-bold",extraSmall:"font-sans text-[13px]",small:"font-sans text-sm",smallBold:"font-sans text-sm font-medium leading-[1.125rem]",smallExtraBold:"font-sans text-sm font-extrabold leading-[1.125rem]",base:"font-sans text-base",baseSemi:"font-sans text-base font-medium",tinyMono:"font-mono text-2xs md:text-xs",smallMono:"font-mono text-sm",smallCaps:"text-2xs md:text-xs tracking-wide font-mono leading-none uppercase","section-title":"font-display text-lg font-medium","page-title":"font-display font-medium text-2xl",display:"font-display text-4xl lg:text-[2.8rem] !leading-[1.2]","entry-title":"font-display text-pretty text-xl lg:text-3xl font-medium","entry-title-100":"font-display text-pretty text-xl lg:text-3xl font-medium","entry-title-200":"font-display text-lg lg:text-xl font-medium","entry-title-300":"font-sans text-pretty font-medium"},dRe={default:"text-foreground",defaultInverted:"text-inverse",light:"text-quiet ",ultraLight:"text-quietest",red:"text-caution",yellow:"text-yellow-600 dark:text-yellow-400",super:"text-super",white:"text-white",positive:"text-positive",negative:"text-negative",max:"text-max"},fRe=(e,t,n)=>t||(e==="page-title"?"h1":e==="entry-title"?"h2":n?"span":"div"),mRe=(e,t,n,r,s)=>{const a=uRe[e],o=dRe[t];return B(s,a,o,n?"text-center block":"",r?"hover:text-super":"","selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super")},D=A.memo(({children:e,variant:t="base",color:n="default",textCenter:r,className:s,inline:a,superHover:o,testId:i,as:c,ref:u,...d})=>{const m=f.useMemo(()=>fRe(t,c,a),[t,c,a]),h=f.useMemo(()=>mRe(t,n,r,o,s),[s,n,r,t,o]);return A.createElement(m,{className:h,"data-testid":i,ref:u,...d},e)});D.displayName="TextBlock";const Ft={tiny:"tiny",small:"small",regular:"regular",large:"large",xl:"xl",none:"none"};var Be;(function(e){e.RETRY_BUTTON="retryButton",e.PRO_PAGE="proPage",e.SHARE_DROPDOWN="shareDropdown",e.PRICING_TABLE="pricingTable",e.TRY_COPILOT="tryCopilot",e.TRY_RESEARCH="tryResearch",e.TRY_LABS="tryLabs",e.PRO_HOVER_CARD_BUTTON="proHoverCardButton",e.PRO_REASONING_SELECTOR="proReasoningSelector",e.LIBRARY_PAGE="libraryPage",e.SPACES_PAGE="spacesPage",e.SPACES_LANDING="spacesLanding",e.SPACES_TEMPLATES="spacesTemplates",e.DISCOVER_TOPICS="discoverTopics",e.COLLECTIONS="collections",e.SPACES="spaces",e.THREAD_SOCIAL="threadSocial",e.MOBILE_SIGNUP="mobileSignup",e.RELATED_QUERIES="relatedQueries",e.FILE_UPLOAD="fileUpload",e.SPACES_FILE_UPLOAD="spacesFileUpload",e.TRY_PRO="tryPro",e.HOMEPAGE_FREE_PLAN_UPSELL="homepageFreePlanUpsell",e.LOGIN_BUTTON="loginButton",e.SIGNUP_BUTTON="signupButton",e.LOGIN_BUTTON_HEADER="loginButtonHeader",e.SIGNUP_BUTTON_HEADER="signupButtonHeader",e.FLOATING_SIGNUP="floatingSignup",e.SIDEBAR_LOGIN_AD="sidebarLoginAd",e.SIDEBAR_PRO_UPSELL="sidebarProUpsell",e.SIDE_TEXT_PRO_UPSELL="sideTextProUpsell",e.VISITOR_GATE="visitorGate",e.SHARED_THREAD_LOGIN_GATE="sharedThreadLoginGate",e.SHARED_THREAD_INSTALL_GATE="sharedThreadInstallGate",e.REQUEST_ACCESS_LOGIN_GATE="requestAccessLoginGate",e.GENERATE_IMAGE="generateImage",e.PPLX_API_PAGE="pplxApiPage",e.FILES_PAGE="filesPage",e.PURCHASES_PAGE="purchasesPage",e.GOOGLE_ONETAP_HOME="oneTapHome",e.GOOGLE_ONETAP_THREAD="oneTapThread",e.GOOGLE_ONETAP_PAGE="oneTapPage",e.GOOGLE_ONETAP_DISCOVER="oneTapDiscover",e.GOOGLE_ONETAP_UNKNOWN="oneTap",e.ONBOARDING="onboarding",e.NEXTAUTH_SIGNIN_PAGE="nextauthSignInPage",e.DISCOUNT_CODE_BANNER="discountCodeBanner",e.PARTNER_CODE="partnerCode",e.ARTICLE_NEW="articleNew",e.THREAD_TO_ARTICLE="threadToArticle",e.ORG_CREATE="orgCreate",e.ORG_PANEL="orgPanel",e.LOSS_AVERSION_MODAL="lossAversionModal",e.NEW_THREAD_BUTTON="newThreadButton",e.NEW_THREAD_SHORTCUT="newThreadShortcut",e.DISCOVER_BUTTON="discoverButton",e.THREAD_BOOKMARK_BUTTON="threadBookmarkButton",e.PAGE_BOOKMARK_BUTTON="pageBookmarkButton",e.DISCOVER_FEED_BOOKMARK_BUTTON="discoverFeedBookmarkButton",e.BACK_TO_SCHOOL="backToSchool",e.WELCOME_BACK="welcomeBack",e.LEFT_HAND_NAV="leftHandNav",e.SETTINGS="settings",e.PRO_FEATURE_LIMIT_BANNER="proFeatureLimitBanner",e.BUY_WITH_PRO_BUTTON="buyWithProButton",e.FINANCE_WATCHLIST="financeWatchlist",e.DOWNLOAD_COMET="downloadComet",e.GROW_COMET="growComet",e.GROW_COMET_STUDENTS="growCometStudents",e.GROW_COMET_STUDENTS_COUNTRY="growCometStudentsCountry",e.PROMO_REDEMPTION="promoRedemption",e.CONNECTORS_PAGE="connectorsPage",e.MARKETING_LANDING_PAGE="marketingLandingPage",e.FINANCE_TRANSCRIPT="financeTranscript",e.FINANCE_RESEARCH="financeResearch",e.LJJ_LANDING_PAGE="ljjLandingPage",e.STUDENT_REFERRAL_LANDING_PAGE="studentReferralLandingPage",e.VOICE_TO_VOICE_BUTTON="voiceToVoiceButton",e.PRO_PERKS="proPerks",e.REFERRAL_PAGE="referralPage",e.HOTEL_BOOKING_PAGE="hotelBookingPage",e.SOURCES_VIEW_MORE="sourcesViewMore",e.SPORTS_WATCHLIST="sportsWatchlist",e.IMAGE_GENERATION_IN_THREAD="imageGenerationInThread",e.AUTO_UPGRADE_TO_PRO="autoUpgradeToPro",e.UNSPECIFIED_GENERALIZED_UPSELL="unspecifiedGeneralizedUpsell",e.MILESTONE_ACHIEVED="milestoneAchieved",e.PRO_PERKS_PARTNER_PAGE="proPerksPartnerPage",e.STUDENT_LANDING_PAGE="studentLandingPage",e.TASKS_PAGE="tasksPage",e.MAX_URL_PAYWALL="maxUrlPaywall",e.MODEL_SELECTOR="modelSelector",e.DISCOVER_FEED_LIKE_BUTTON="discoverFeedLikeButton",e.DISCOVER_FEED_DISLIKE_BUTTON="discoverFeedDislikeButton",e.DISCOVER_FEED_TASK_WIDGET="discoverFeedTaskWidget",e.SIDEBAR_BOTTOM_POPOVER="sidebarBottomPopover",e.HOME_SIDEBAR="homeSidebar",e.WHATSAPP_LINK="whatsappLink",e.UPGRADE_MODAL="upgradeModal",e.MAX_PAGE="maxPage",e.COMET_INVITE="cometInvite",e.LOGIN_FOR_COMET_AGENT_QUERIES_IN_THREAD="loginForCometAgentQueriesInThread",e.COMET_AGENT_QUERIES_RATE_LIMITED_IN_THREAD="cometAgentQueriesRateLimitedInThread",e.PRO_UPGRADE_IN_SIDE_HOMEPAGE="proUpgradeInSideHomepage",e.MISSING_OUT_ON_PRO_IN_THREAD="missingOutOnProInThread",e.VIDEO_GENERATION_IN_THREAD="videoGenerationInThread",e.STUDENT_VERIFICATION_UPSELL="studentVerificationUpsell",e.TRY_ASSISTANT="tryAssistant"})(Be||(Be={}));var pt;(function(e){e[e.OWNER_ONLY=0]="OWNER_ONLY",e[e.PRIVATE_READ=1]="PRIVATE_READ",e[e.PUBLIC_READ=2]="PUBLIC_READ",e[e.PUBLIC_PUBLISHED=3]="PUBLIC_PUBLISHED",e[e.ORG_READ=4]="ORG_READ",e[e.COLLECTION_READ=5]="COLLECTION_READ"})(pt||(pt={}));const hRe={[Ft.tiny]:"xs",[Ft.small]:"sm",[Ft.regular]:"base",[Ft.large]:"lg",[Ft.xl]:"xl",[Ft.none]:"base"},My=A.memo(({icon:e,showClicked:t=!1,buttonSize:n,iconClassName:r})=>l.jsx(be,{icon:t?Ea:e,size:hRe[n]||"base",className:r}));My.displayName="BaseIcon";const Ns=A.memo(({size:e=16,className:t,...n})=>l.jsx("div",{className:B("aspect-square shrink-0 animate-spin rounded-full p-[2px]",t),style:{width:e,backgroundImage:"conic-gradient(from 270deg, transparent 0%, currentColor 99%)",mask:`radial-gradient(transparent 0%, transparent ${e/2-2}px, black ${e/2-2}px, black) center center`},...n}));Ns.displayName="Spinner";function jt(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e?.(s),n===!1||!s.defaultPrevented)return t?.(s)}}function m$(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Lae(...e){return t=>{let n=!1;const r=e.map(s=>{const a=m$(s,t);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let s=0;s<r.length;s++){const a=r[s];typeof a=="function"?a():m$(e[s],null)}}}}function kn(...e){return f.useCallback(Lae(...e),e)}function pRe(e,t){const n=f.createContext(t),r=a=>{const{children:o,...i}=a,c=f.useMemo(()=>i,Object.values(i));return l.jsx(n.Provider,{value:c,children:o})};r.displayName=e+"Provider";function s(a){const o=f.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[r,s]}function Ga(e,t=[]){let n=[];function r(a,o){const i=f.createContext(o),c=n.length;n=[...n,o];const u=m=>{const{scope:h,children:p,...g}=m,y=h?.[e]?.[c]||i,v=f.useMemo(()=>g,Object.values(g));return l.jsx(y.Provider,{value:v,children:p})};u.displayName=a+"Provider";function d(m,h){const p=h?.[e]?.[c]||i,g=f.useContext(p);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${a}\``)}return[u,d]}const s=()=>{const a=n.map(o=>f.createContext(o));return function(i){const c=i?.[e]||a;return f.useMemo(()=>({[`__scope${e}`]:{...i,[e]:c}}),[i,c])}};return s.scopeName=e,[r,gRe(s,...t)]}function gRe(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const o=r.reduce((i,{useScope:c,scopeName:u})=>{const m=c(a)[`__scope${u}`];return{...i,...m}},{});return f.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function gv(e){const t=yRe(e),n=f.forwardRef((r,s)=>{const{children:a,...o}=r,i=f.Children.toArray(a),c=i.find(xRe);if(c){const u=c.props.children,d=i.map(m=>m===c?f.Children.count(u)>1?f.Children.only(null):f.isValidElement(u)?u.props.children:null:m);return l.jsx(t,{...o,ref:s,children:f.isValidElement(u)?f.cloneElement(u,void 0,d):null})}return l.jsx(t,{...o,ref:s,children:a})});return n.displayName=`${e}.Slot`,n}function yRe(e){const t=f.forwardRef((n,r)=>{const{children:s,...a}=n;if(f.isValidElement(s)){const o=_Re(s),i=bRe(a,s.props);return s.type!==f.Fragment&&(i.ref=r?Lae(r,o):o),f.cloneElement(s,i)}return f.Children.count(s)>1?f.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Dae=Symbol("radix.slottable");function vRe(e){const t=({children:n})=>l.jsx(l.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=Dae,t}function xRe(e){return f.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Dae}function bRe(e,t){const n={...t};for(const r in t){const s=e[r],a=t[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...i)=>{const c=a(...i);return s(...i),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...a}:r==="className"&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...e,...n}}function _Re(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var wRe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],on=wRe.reduce((e,t)=>{const n=gv(`Primitive.${t}`),r=f.forwardRef((s,a)=>{const{asChild:o,...i}=s,c=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(c,{...i,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function SRe(e,t){e&&Ss.flushSync(()=>e.dispatchEvent(t))}function ha(e){const t=f.useRef(e);return f.useEffect(()=>{t.current=e}),f.useMemo(()=>(...n)=>t.current?.(...n),[])}function CRe(e,t=globalThis?.document){const n=ha(e);f.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var ERe="DismissableLayer",hA="dismissableLayer.update",MRe="dismissableLayer.pointerDownOutside",TRe="dismissableLayer.focusOutside",h$,Fae=f.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),F0=f.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:o,onDismiss:i,...c}=e,u=f.useContext(Fae),[d,m]=f.useState(null),h=d?.ownerDocument??globalThis?.document,[,p]=f.useState({}),g=kn(t,E=>m(E)),y=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=y.indexOf(v),b=d?y.indexOf(d):-1,_=u.layersWithOutsidePointerEventsDisabled.size>0,w=b>=x,S=ARe(E=>{const M=E.target,T=[...u.branches].some(I=>I.contains(M));!w||T||(s?.(E),o?.(E),E.defaultPrevented||i?.())},h),C=PRe(E=>{const M=E.target;[...u.branches].some(I=>I.contains(M))||(a?.(E),o?.(E),E.defaultPrevented||i?.())},h);return CRe(E=>{b===u.layers.size-1&&(r?.(E),!E.defaultPrevented&&i&&(E.preventDefault(),i()))},h),f.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(h$=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),p$(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=h$)}},[d,h,n,u]),f.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),p$())},[d,u]),f.useEffect(()=>{const E=()=>p({});return document.addEventListener(hA,E),()=>document.removeEventListener(hA,E)},[]),l.jsx(on.div,{...c,ref:g,style:{pointerEvents:_?w?"auto":"none":void 0,...e.style},onFocusCapture:jt(e.onFocusCapture,C.onFocusCapture),onBlurCapture:jt(e.onBlurCapture,C.onBlurCapture),onPointerDownCapture:jt(e.onPointerDownCapture,S.onPointerDownCapture)})});F0.displayName=ERe;var kRe="DismissableLayerBranch",NRe=f.forwardRef((e,t)=>{const n=f.useContext(Fae),r=f.useRef(null),s=kn(t,r);return f.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),l.jsx(on.div,{...e,ref:s})});NRe.displayName=kRe;function ARe(e,t=globalThis?.document){const n=ha(e),r=f.useRef(!1),s=f.useRef(()=>{});return f.useEffect(()=>{const a=i=>{if(i.target&&!r.current){let c=function(){Uae(MRe,n,u,{discrete:!0})};const u={originalEvent:i};i.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",a),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function PRe(e,t=globalThis?.document){const n=ha(e),r=f.useRef(!1);return f.useEffect(()=>{const s=a=>{a.target&&!r.current&&Uae(TRe,n,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function p$(){const e=new CustomEvent(hA);document.dispatchEvent(e)}function Uae(e,t,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?SRe(s,a):s.dispatchEvent(a)}var Ql=globalThis?.document?f.useLayoutEffect:()=>{},RRe=Yj[" useId ".trim().toString()]||(()=>{}),IRe=0;function Mm(e){const[t,n]=f.useState(RRe());return Ql(()=>{n(r=>r??String(IRe++))},[e]),t?`radix-${t}`:""}const jRe=["top","right","bottom","left"],Wo=Math.min,bs=Math.max,J_=Math.round,vx=Math.floor,$i=e=>({x:e,y:e}),ORe={left:"right",right:"left",bottom:"top",top:"bottom"},LRe={start:"end",end:"start"};function pA(e,t,n){return bs(e,Wo(t,n))}function Xi(e,t){return typeof e=="function"?e(t):e}function Ho(e){return e.split("-")[0]}function sp(e){return e.split("-")[1]}function Q8(e){return e==="x"?"y":"x"}function X8(e){return e==="y"?"height":"width"}function Xl(e){return["top","bottom"].includes(Ho(e))?"y":"x"}function Z8(e){return Q8(Xl(e))}function DRe(e,t,n){n===void 0&&(n=!1);const r=sp(e),s=Z8(e),a=X8(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(o=e2(o)),[o,e2(o)]}function FRe(e){const t=e2(e);return[gA(e),t,gA(t)]}function gA(e){return e.replace(/start|end/g,t=>LRe[t])}function URe(e,t,n){const r=["left","right"],s=["right","left"],a=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?s:r:t?r:s;case"left":case"right":return t?a:o;default:return[]}}function BRe(e,t,n,r){const s=sp(e);let a=URe(Ho(e),n==="start",r);return s&&(a=a.map(o=>o+"-"+s),t&&(a=a.concat(a.map(gA)))),a}function e2(e){return e.replace(/left|right|bottom|top/g,t=>ORe[t])}function VRe(e){return{top:0,right:0,bottom:0,left:0,...e}}function J8(e){return typeof e!="number"?VRe(e):{top:e,right:e,bottom:e,left:e}}function ah(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function g$(e,t,n){let{reference:r,floating:s}=e;const a=Xl(t),o=Z8(t),i=X8(o),c=Ho(t),u=a==="y",d=r.x+r.width/2-s.width/2,m=r.y+r.height/2-s.height/2,h=r[i]/2-s[i]/2;let p;switch(c){case"top":p={x:d,y:r.y-s.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:m};break;case"left":p={x:r.x-s.width,y:m};break;default:p={x:r.x,y:r.y}}switch(sp(t)){case"start":p[o]-=h*(n&&u?-1:1);break;case"end":p[o]+=h*(n&&u?-1:1);break}return p}const $Re=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:a=[],platform:o}=n,i=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:d,y:m}=g$(u,r,c),h=r,p={},g=0;for(let y=0;y<i.length;y++){const{name:v,fn:x}=i[y],{x:b,y:_,data:w,reset:S}=await x({x:d,y:m,initialPlacement:r,placement:h,strategy:s,middlewareData:p,rects:u,platform:o,elements:{reference:e,floating:t}});d=b??d,m=_??m,p={...p,[v]:{...p[v],...w}},S&&g<=50&&(g++,typeof S=="object"&&(S.placement&&(h=S.placement),S.rects&&(u=S.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):S.rects),{x:d,y:m}=g$(u,h,c)),y=-1)}return{x:d,y:m,placement:h,strategy:s,middlewareData:p}};async function yv(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:a,rects:o,elements:i,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:m="floating",altBoundary:h=!1,padding:p=0}=Xi(t,e),g=J8(p),v=i[h?m==="floating"?"reference":"floating":m],x=ah(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(v)))==null||n?v:v.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(i.floating)),boundary:u,rootBoundary:d,strategy:c})),b=m==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,_=await(a.getOffsetParent==null?void 0:a.getOffsetParent(i.floating)),w=await(a.isElement==null?void 0:a.isElement(_))?await(a.getScale==null?void 0:a.getScale(_))||{x:1,y:1}:{x:1,y:1},S=ah(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:i,rect:b,offsetParent:_,strategy:c}):b);return{top:(x.top-S.top+g.top)/w.y,bottom:(S.bottom-x.bottom+g.bottom)/w.y,left:(x.left-S.left+g.left)/w.x,right:(S.right-x.right+g.right)/w.x}}const WRe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:a,platform:o,elements:i,middlewareData:c}=t,{element:u,padding:d=0}=Xi(e,t)||{};if(u==null)return{};const m=J8(d),h={x:n,y:r},p=Z8(s),g=X8(p),y=await o.getDimensions(u),v=p==="y",x=v?"top":"left",b=v?"bottom":"right",_=v?"clientHeight":"clientWidth",w=a.reference[g]+a.reference[p]-h[p]-a.floating[g],S=h[p]-a.reference[p],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let E=C?C[_]:0;(!E||!await(o.isElement==null?void 0:o.isElement(C)))&&(E=i.floating[_]||a.floating[g]);const M=w/2-S/2,T=E/2-y[g]/2-1,I=Wo(m[x],T),j=Wo(m[b],T),N=I,P=E-y[g]-j,R=E/2-y[g]/2+M,k=pA(N,R,P),O=!c.arrow&&sp(s)!=null&&R!==k&&a.reference[g]/2-(R<N?I:j)-y[g]/2<0,L=O?R<N?R-N:R-P:0;return{[p]:h[p]+L,data:{[p]:k,centerOffset:R-k-L,...O&&{alignmentOffset:L}},reset:O}}}),HRe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:a,rects:o,initialPlacement:i,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:m=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:y=!0,...v}=Xi(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const x=Ho(s),b=Xl(i),_=Ho(i)===i,w=await(c.isRTL==null?void 0:c.isRTL(u.floating)),S=h||(_||!y?[e2(i)]:FRe(i)),C=g!=="none";!h&&C&&S.push(...BRe(i,y,g,w));const E=[i,...S],M=await yv(t,v),T=[];let I=((r=a.flip)==null?void 0:r.overflows)||[];if(d&&T.push(M[x]),m){const R=DRe(s,o,w);T.push(M[R[0]],M[R[1]])}if(I=[...I,{placement:s,overflows:T}],!T.every(R=>R<=0)){var j,N;const R=(((j=a.flip)==null?void 0:j.index)||0)+1,k=E[R];if(k)return{data:{index:R,overflows:I},reset:{placement:k}};let O=(N=I.filter(L=>L.overflows[0]<=0).sort((L,F)=>L.overflows[1]-F.overflows[1])[0])==null?void 0:N.placement;if(!O)switch(p){case"bestFit":{var P;const L=(P=I.filter(F=>{if(C){const U=Xl(F.placement);return U===b||U==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(U=>U>0).reduce((U,V)=>U+V,0)]).sort((F,U)=>F[1]-U[1])[0])==null?void 0:P[0];L&&(O=L);break}case"initialPlacement":O=i;break}if(s!==O)return{reset:{placement:O}}}return{}}}};function y$(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function v$(e){return jRe.some(t=>e[t]>=0)}const zRe=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=Xi(e,t);switch(r){case"referenceHidden":{const a=await yv(t,{...s,elementContext:"reference"}),o=y$(a,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:v$(o)}}}case"escaped":{const a=await yv(t,{...s,altBoundary:!0}),o=y$(a,n.floating);return{data:{escapedOffsets:o,escaped:v$(o)}}}default:return{}}}}};function Bae(e){const t=Wo(...e.map(a=>a.left)),n=Wo(...e.map(a=>a.top)),r=bs(...e.map(a=>a.right)),s=bs(...e.map(a=>a.bottom));return{x:t,y:n,width:r-t,height:s-n}}function GRe(e){const t=e.slice().sort((s,a)=>s.y-a.y),n=[];let r=null;for(let s=0;s<t.length;s++){const a=t[s];!r||a.y-r.y>r.height/2?n.push([a]):n[n.length-1].push(a),r=a}return n.map(s=>ah(Bae(s)))}const qRe=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:s,platform:a,strategy:o}=t,{padding:i=2,x:c,y:u}=Xi(e,t),d=Array.from(await(a.getClientRects==null?void 0:a.getClientRects(r.reference))||[]),m=GRe(d),h=ah(Bae(d)),p=J8(i);function g(){if(m.length===2&&m[0].left>m[1].right&&c!=null&&u!=null)return m.find(v=>c>v.left-p.left&&c<v.right+p.right&&u>v.top-p.top&&u<v.bottom+p.bottom)||h;if(m.length>=2){if(Xl(n)==="y"){const I=m[0],j=m[m.length-1],N=Ho(n)==="top",P=I.top,R=j.bottom,k=N?I.left:j.left,O=N?I.right:j.right,L=O-k,F=R-P;return{top:P,bottom:R,left:k,right:O,width:L,height:F,x:k,y:P}}const v=Ho(n)==="left",x=bs(...m.map(I=>I.right)),b=Wo(...m.map(I=>I.left)),_=m.filter(I=>v?I.left===b:I.right===x),w=_[0].top,S=_[_.length-1].bottom,C=b,E=x,M=E-C,T=S-w;return{top:w,bottom:S,left:C,right:E,width:M,height:T,x:C,y:w}}return h}const y=await a.getElementRects({reference:{getBoundingClientRect:g},floating:r.floating,strategy:o});return s.reference.x!==y.reference.x||s.reference.y!==y.reference.y||s.reference.width!==y.reference.width||s.reference.height!==y.reference.height?{reset:{rects:y}}:{}}}};async function KRe(e,t){const{placement:n,platform:r,elements:s}=e,a=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Ho(n),i=sp(n),c=Xl(n)==="y",u=["left","top"].includes(o)?-1:1,d=a&&c?-1:1,m=Xi(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:g}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return i&&typeof g=="number"&&(p=i==="end"?g*-1:g),c?{x:p*d,y:h*u}:{x:h*u,y:p*d}}const YRe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:a,placement:o,middlewareData:i}=t,c=await KRe(t,e);return o===((n=i.offset)==null?void 0:n.placement)&&(r=i.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:a+c.y,data:{...c,placement:o}}}}},QRe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:a=!0,crossAxis:o=!1,limiter:i={fn:v=>{let{x,y:b}=v;return{x,y:b}}},...c}=Xi(e,t),u={x:n,y:r},d=await yv(t,c),m=Xl(Ho(s)),h=Q8(m);let p=u[h],g=u[m];if(a){const v=h==="y"?"top":"left",x=h==="y"?"bottom":"right",b=p+d[v],_=p-d[x];p=pA(b,p,_)}if(o){const v=m==="y"?"top":"left",x=m==="y"?"bottom":"right",b=g+d[v],_=g-d[x];g=pA(b,g,_)}const y=i.fn({...t,[h]:p,[m]:g});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[h]:a,[m]:o}}}}}},XRe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:a,middlewareData:o}=t,{offset:i=0,mainAxis:c=!0,crossAxis:u=!0}=Xi(e,t),d={x:n,y:r},m=Xl(s),h=Q8(m);let p=d[h],g=d[m];const y=Xi(i,t),v=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const _=h==="y"?"height":"width",w=a.reference[h]-a.floating[_]+v.mainAxis,S=a.reference[h]+a.reference[_]-v.mainAxis;p<w?p=w:p>S&&(p=S)}if(u){var x,b;const _=h==="y"?"width":"height",w=["top","left"].includes(Ho(s)),S=a.reference[m]-a.floating[_]+(w&&((x=o.offset)==null?void 0:x[m])||0)+(w?0:v.crossAxis),C=a.reference[m]+a.reference[_]+(w?0:((b=o.offset)==null?void 0:b[m])||0)-(w?v.crossAxis:0);g<S?g=S:g>C&&(g=C)}return{[h]:p,[m]:g}}}},ZRe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:a,platform:o,elements:i}=t,{apply:c=()=>{},...u}=Xi(e,t),d=await yv(t,u),m=Ho(s),h=sp(s),p=Xl(s)==="y",{width:g,height:y}=a.floating;let v,x;m==="top"||m==="bottom"?(v=m,x=h===(await(o.isRTL==null?void 0:o.isRTL(i.floating))?"start":"end")?"left":"right"):(x=m,v=h==="end"?"top":"bottom");const b=y-d.top-d.bottom,_=g-d.left-d.right,w=Wo(y-d[v],b),S=Wo(g-d[x],_),C=!t.middlewareData.shift;let E=w,M=S;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(M=_),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(E=b),C&&!h){const I=bs(d.left,0),j=bs(d.right,0),N=bs(d.top,0),P=bs(d.bottom,0);p?M=g-2*(I!==0||j!==0?I+j:bs(d.left,d.right)):E=y-2*(N!==0||P!==0?N+P:bs(d.top,d.bottom))}await c({...t,availableWidth:M,availableHeight:E});const T=await o.getDimensions(i.floating);return g!==T.width||y!==T.height?{reset:{rects:!0}}:{}}}};function MS(){return typeof window<"u"}function ap(e){return Vae(e)?(e.nodeName||"").toLowerCase():"#document"}function Ba(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function fl(e){var t;return(t=(Vae(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Vae(e){return MS()?e instanceof Node||e instanceof Ba(e).Node:!1}function Gs(e){return MS()?e instanceof Element||e instanceof Ba(e).Element:!1}function Zi(e){return MS()?e instanceof HTMLElement||e instanceof Ba(e).HTMLElement:!1}function x$(e){return!MS()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ba(e).ShadowRoot}function U0(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=mo(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(s)}function JRe(e){return["table","td","th"].includes(ap(e))}function TS(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function eO(e){const t=tO(),n=Gs(e)?mo(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function eIe(e){let t=fu(e);for(;Zi(t)&&!oh(t);){if(eO(t))return t;if(TS(t))return null;t=fu(t)}return null}function tO(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function oh(e){return["html","body","#document"].includes(ap(e))}function mo(e){return Ba(e).getComputedStyle(e)}function kS(e){return Gs(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function fu(e){if(ap(e)==="html")return e;const t=e.assignedSlot||e.parentNode||x$(e)&&e.host||fl(e);return x$(t)?t.host:t}function $ae(e){const t=fu(e);return oh(t)?e.ownerDocument?e.ownerDocument.body:e.body:Zi(t)&&U0(t)?t:$ae(t)}function vv(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=$ae(e),a=s===((r=e.ownerDocument)==null?void 0:r.body),o=Ba(s);if(a){const i=yA(o);return t.concat(o,o.visualViewport||[],U0(s)?s:[],i&&n?vv(i):[])}return t.concat(s,vv(s,[],n))}function yA(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Wae(e){const t=mo(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=Zi(e),a=s?e.offsetWidth:n,o=s?e.offsetHeight:r,i=J_(n)!==a||J_(r)!==o;return i&&(n=a,r=o),{width:n,height:r,$:i}}function nO(e){return Gs(e)?e:e.contextElement}function Tm(e){const t=nO(e);if(!Zi(t))return $i(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:a}=Wae(t);let o=(a?J_(n.width):n.width)/r,i=(a?J_(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!i||!Number.isFinite(i))&&(i=1),{x:o,y:i}}const tIe=$i(0);function Hae(e){const t=Ba(e);return!tO()||!t.visualViewport?tIe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function nIe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Ba(e)?!1:t}function Bd(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),a=nO(e);let o=$i(1);t&&(r?Gs(r)&&(o=Tm(r)):o=Tm(e));const i=nIe(a,n,r)?Hae(a):$i(0);let c=(s.left+i.x)/o.x,u=(s.top+i.y)/o.y,d=s.width/o.x,m=s.height/o.y;if(a){const h=Ba(a),p=r&&Gs(r)?Ba(r):r;let g=h,y=yA(g);for(;y&&r&&p!==g;){const v=Tm(y),x=y.getBoundingClientRect(),b=mo(y),_=x.left+(y.clientLeft+parseFloat(b.paddingLeft))*v.x,w=x.top+(y.clientTop+parseFloat(b.paddingTop))*v.y;c*=v.x,u*=v.y,d*=v.x,m*=v.y,c+=_,u+=w,g=Ba(y),y=yA(g)}}return ah({width:d,height:m,x:c,y:u})}function rO(e,t){const n=kS(e).scrollLeft;return t?t.left+n:Bd(fl(e)).left+n}function zae(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-(n?0:rO(e,r)),a=r.top+t.scrollTop;return{x:s,y:a}}function rIe(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const a=s==="fixed",o=fl(r),i=t?TS(t.floating):!1;if(r===o||i&&a)return n;let c={scrollLeft:0,scrollTop:0},u=$i(1);const d=$i(0),m=Zi(r);if((m||!m&&!a)&&((ap(r)!=="body"||U0(o))&&(c=kS(r)),Zi(r))){const p=Bd(r);u=Tm(r),d.x=p.x+r.clientLeft,d.y=p.y+r.clientTop}const h=o&&!m&&!a?zae(o,c,!0):$i(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+h.x,y:n.y*u.y-c.scrollTop*u.y+d.y+h.y}}function sIe(e){return Array.from(e.getClientRects())}function aIe(e){const t=fl(e),n=kS(e),r=e.ownerDocument.body,s=bs(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=bs(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+rO(e);const i=-n.scrollTop;return mo(r).direction==="rtl"&&(o+=bs(t.clientWidth,r.clientWidth)-s),{width:s,height:a,x:o,y:i}}function oIe(e,t){const n=Ba(e),r=fl(e),s=n.visualViewport;let a=r.clientWidth,o=r.clientHeight,i=0,c=0;if(s){a=s.width,o=s.height;const u=tO();(!u||u&&t==="fixed")&&(i=s.offsetLeft,c=s.offsetTop)}return{width:a,height:o,x:i,y:c}}function iIe(e,t){const n=Bd(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,a=Zi(e)?Tm(e):$i(1),o=e.clientWidth*a.x,i=e.clientHeight*a.y,c=s*a.x,u=r*a.y;return{width:o,height:i,x:c,y:u}}function b$(e,t,n){let r;if(t==="viewport")r=oIe(e,n);else if(t==="document")r=aIe(fl(e));else if(Gs(t))r=iIe(t,n);else{const s=Hae(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return ah(r)}function Gae(e,t){const n=fu(e);return n===t||!Gs(n)||oh(n)?!1:mo(n).position==="fixed"||Gae(n,t)}function lIe(e,t){const n=t.get(e);if(n)return n;let r=vv(e,[],!1).filter(i=>Gs(i)&&ap(i)!=="body"),s=null;const a=mo(e).position==="fixed";let o=a?fu(e):e;for(;Gs(o)&&!oh(o);){const i=mo(o),c=eO(o);!c&&i.position==="fixed"&&(s=null),(a?!c&&!s:!c&&i.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||U0(o)&&!c&&Gae(e,o))?r=r.filter(d=>d!==o):s=i,o=fu(o)}return t.set(e,r),r}function cIe(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const o=[...n==="clippingAncestors"?TS(t)?[]:lIe(t,this._c):[].concat(n),r],i=o[0],c=o.reduce((u,d)=>{const m=b$(t,d,s);return u.top=bs(m.top,u.top),u.right=Wo(m.right,u.right),u.bottom=Wo(m.bottom,u.bottom),u.left=bs(m.left,u.left),u},b$(t,i,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function uIe(e){const{width:t,height:n}=Wae(e);return{width:t,height:n}}function dIe(e,t,n){const r=Zi(t),s=fl(t),a=n==="fixed",o=Bd(e,!0,a,t);let i={scrollLeft:0,scrollTop:0};const c=$i(0);if(r||!r&&!a)if((ap(t)!=="body"||U0(s))&&(i=kS(t)),r){const h=Bd(t,!0,a,t);c.x=h.x+t.clientLeft,c.y=h.y+t.clientTop}else s&&(c.x=rO(s));const u=s&&!r&&!a?zae(s,i):$i(0),d=o.left+i.scrollLeft-c.x-u.x,m=o.top+i.scrollTop-c.y-u.y;return{x:d,y:m,width:o.width,height:o.height}}function L3(e){return mo(e).position==="static"}function _$(e,t){if(!Zi(e)||mo(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return fl(e)===n&&(n=n.ownerDocument.body),n}function qae(e,t){const n=Ba(e);if(TS(e))return n;if(!Zi(e)){let s=fu(e);for(;s&&!oh(s);){if(Gs(s)&&!L3(s))return s;s=fu(s)}return n}let r=_$(e,t);for(;r&&JRe(r)&&L3(r);)r=_$(r,t);return r&&oh(r)&&L3(r)&&!eO(r)?n:r||eIe(e)||n}const fIe=async function(e){const t=this.getOffsetParent||qae,n=this.getDimensions,r=await n(e.floating);return{reference:dIe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function mIe(e){return mo(e).direction==="rtl"}const hIe={convertOffsetParentRelativeRectToViewportRelativeRect:rIe,getDocumentElement:fl,getClippingRect:cIe,getOffsetParent:qae,getElementRects:fIe,getClientRects:sIe,getDimensions:uIe,getScale:Tm,isElement:Gs,isRTL:mIe};function Kae(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function pIe(e,t){let n=null,r;const s=fl(e);function a(){var i;clearTimeout(r),(i=n)==null||i.disconnect(),n=null}function o(i,c){i===void 0&&(i=!1),c===void 0&&(c=1),a();const u=e.getBoundingClientRect(),{left:d,top:m,width:h,height:p}=u;if(i||t(),!h||!p)return;const g=vx(m),y=vx(s.clientWidth-(d+h)),v=vx(s.clientHeight-(m+p)),x=vx(d),_={rootMargin:-g+"px "+-y+"px "+-v+"px "+-x+"px",threshold:bs(0,Wo(1,c))||1};let w=!0;function S(C){const E=C[0].intersectionRatio;if(E!==c){if(!w)return o();E?o(!1,E):r=setTimeout(()=>{o(!1,1e-7)},1e3)}E===1&&!Kae(u,e.getBoundingClientRect())&&o(),w=!1}try{n=new IntersectionObserver(S,{..._,root:s.ownerDocument})}catch{n=new IntersectionObserver(S,_)}n.observe(e)}return o(!0),a}function Yae(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:i=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=nO(e),d=s||a?[...u?vv(u):[],...vv(t)]:[];d.forEach(x=>{s&&x.addEventListener("scroll",n,{passive:!0}),a&&x.addEventListener("resize",n)});const m=u&&i?pIe(u,n):null;let h=-1,p=null;o&&(p=new ResizeObserver(x=>{let[b]=x;b&&b.target===u&&p&&(p.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var _;(_=p)==null||_.observe(t)})),n()}),u&&!c&&p.observe(u),p.observe(t));let g,y=c?Bd(e):null;c&&v();function v(){const x=Bd(e);y&&!Kae(y,x)&&n(),y=x,g=requestAnimationFrame(v)}return n(),()=>{var x;d.forEach(b=>{s&&b.removeEventListener("scroll",n),a&&b.removeEventListener("resize",n)}),m?.(),(x=p)==null||x.disconnect(),p=null,c&&cancelAnimationFrame(g)}}const gIe=YRe,yIe=QRe,vIe=HRe,xIe=ZRe,bIe=zRe,w$=WRe,qDt=qRe,_Ie=XRe,wIe=(e,t,n)=>{const r=new Map,s={platform:hIe,...n},a={...s.platform,_c:r};return $Re(e,t,{...s,platform:a})};var n_=typeof document<"u"?f.useLayoutEffect:f.useEffect;function t2(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!t2(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const a=s[r];if(!(a==="_owner"&&e.$$typeof)&&!t2(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function Qae(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function S$(e,t){const n=Qae(e);return Math.round(t*n)/n}function D3(e){const t=f.useRef(e);return n_(()=>{t.current=e}),t}function Xae(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:a,floating:o}={},transform:i=!0,whileElementsMounted:c,open:u}=e,[d,m]=f.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,p]=f.useState(r);t2(h,r)||p(r);const[g,y]=f.useState(null),[v,x]=f.useState(null),b=f.useCallback(F=>{F!==C.current&&(C.current=F,y(F))},[]),_=f.useCallback(F=>{F!==E.current&&(E.current=F,x(F))},[]),w=a||g,S=o||v,C=f.useRef(null),E=f.useRef(null),M=f.useRef(d),T=c!=null,I=D3(c),j=D3(s),N=D3(u),P=f.useCallback(()=>{if(!C.current||!E.current)return;const F={placement:t,strategy:n,middleware:h};j.current&&(F.platform=j.current),wIe(C.current,E.current,F).then(U=>{const V={...U,isPositioned:N.current!==!1};R.current&&!t2(M.current,V)&&(M.current=V,Ss.flushSync(()=>{m(V)}))})},[h,t,n,j,N]);n_(()=>{u===!1&&M.current.isPositioned&&(M.current.isPositioned=!1,m(F=>({...F,isPositioned:!1})))},[u]);const R=f.useRef(!1);n_(()=>(R.current=!0,()=>{R.current=!1}),[]),n_(()=>{if(w&&(C.current=w),S&&(E.current=S),w&&S){if(I.current)return I.current(w,S,P);P()}},[w,S,P,I,T]);const k=f.useMemo(()=>({reference:C,floating:E,setReference:b,setFloating:_}),[b,_]),O=f.useMemo(()=>({reference:w,floating:S}),[w,S]),L=f.useMemo(()=>{const F={position:n,left:0,top:0};if(!O.floating)return F;const U=S$(O.floating,d.x),V=S$(O.floating,d.y);return i?{...F,transform:"translate("+U+"px, "+V+"px)",...Qae(O.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:U,top:V}},[n,i,O.floating,d.x,d.y]);return f.useMemo(()=>({...d,update:P,refs:k,elements:O,floatingStyles:L}),[d,P,k,O,L])}const SIe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?w$({element:r.current,padding:s}).fn(n):{}:r?w$({element:r,padding:s}).fn(n):{}}}},sO=(e,t)=>({...gIe(e),options:[e,t]}),Zae=(e,t)=>({...yIe(e),options:[e,t]}),Jae=(e,t)=>({..._Ie(e),options:[e,t]}),eoe=(e,t)=>({...vIe(e),options:[e,t]}),toe=(e,t)=>({...xIe(e),options:[e,t]}),CIe=(e,t)=>({...bIe(e),options:[e,t]}),noe=(e,t)=>({...SIe(e),options:[e,t]});var EIe="Arrow",roe=f.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...a}=e;return l.jsx(on.svg,{...a,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:l.jsx("polygon",{points:"0,0 30,0 15,10"})})});roe.displayName=EIe;var MIe=roe;function NS(e){const[t,n]=f.useState(void 0);return Ql(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let o,i;if("borderBoxSize"in a){const c=a.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,i=u.blockSize}else o=e.offsetWidth,i=e.offsetHeight;n({width:o,height:i})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var aO="Popper",[soe,op]=Ga(aO),[TIe,aoe]=soe(aO),ooe=e=>{const{__scopePopper:t,children:n}=e,[r,s]=f.useState(null);return l.jsx(TIe,{scope:t,anchor:r,onAnchorChange:s,children:n})};ooe.displayName=aO;var ioe="PopperAnchor",loe=f.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,a=aoe(ioe,n),o=f.useRef(null),i=kn(t,o),c=f.useRef(null);return f.useEffect(()=>{const u=c.current;c.current=r?.current||o.current,u!==c.current&&a.onAnchorChange(c.current)}),r?null:l.jsx(on.div,{...s,ref:i})});loe.displayName=ioe;var oO="PopperContent",[kIe,NIe]=soe(oO),coe=f.forwardRef((e,t)=>{const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:a="center",alignOffset:o=0,arrowPadding:i=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:m="partial",hideWhenDetached:h=!1,updatePositionStrategy:p="optimized",onPlaced:g,...y}=e,v=aoe(oO,n),[x,b]=f.useState(null),_=kn(t,Z=>b(Z)),[w,S]=f.useState(null),C=NS(w),E=C?.width??0,M=C?.height??0,T=r+(a!=="center"?"-"+a:""),I=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},j=Array.isArray(u)?u:[u],N=j.length>0,P={padding:I,boundary:j.filter(PIe),altBoundary:N},{refs:R,floatingStyles:k,placement:O,isPositioned:L,middlewareData:F}=Xae({strategy:"fixed",placement:T,whileElementsMounted:(...Z)=>Yae(...Z,{animationFrame:p==="always"}),elements:{reference:v.anchor},middleware:[sO({mainAxis:s+M,alignmentAxis:o}),c&&Zae({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?Jae():void 0,...P}),c&&eoe({...P}),toe({...P,apply:({elements:Z,rects:se,availableWidth:Y,availableHeight:Q})=>{const{width:re,height:te}=se.reference,le=Z.floating.style;le.setProperty("--radix-popper-available-width",`${Y}px`),le.setProperty("--radix-popper-available-height",`${Q}px`),le.setProperty("--radix-popper-anchor-width",`${re}px`),le.setProperty("--radix-popper-anchor-height",`${te}px`)}}),w&&noe({element:w,padding:i}),RIe({arrowWidth:E,arrowHeight:M}),h&&CIe({strategy:"referenceHidden",...P})]}),[U,V]=foe(O),W=ha(g);Ql(()=>{L&&W?.()},[L,W]);const H=F.arrow?.x,G=F.arrow?.y,K=F.arrow?.centerOffset!==0,[$,q]=f.useState();return Ql(()=>{x&&q(window.getComputedStyle(x).zIndex)},[x]),l.jsx("div",{ref:R.setFloating,"data-radix-popper-content-wrapper":"",style:{...k,transform:L?k.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:$,"--radix-popper-transform-origin":[F.transformOrigin?.x,F.transformOrigin?.y].join(" "),...F.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:l.jsx(kIe,{scope:n,placedSide:U,onArrowChange:S,arrowX:H,arrowY:G,shouldHideArrow:K,children:l.jsx(on.div,{"data-side":U,"data-align":V,...y,ref:_,style:{...y.style,animation:L?void 0:"none"}})})})});coe.displayName=oO;var uoe="PopperArrow",AIe={top:"bottom",right:"left",bottom:"top",left:"right"},doe=f.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,a=NIe(uoe,r),o=AIe[a.placedSide];return l.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:l.jsx(MIe,{...s,ref:n,style:{...s.style,display:"block"}})})});doe.displayName=uoe;function PIe(e){return e!==null}var RIe=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:r,middlewareData:s}=t,o=s.arrow?.centerOffset!==0,i=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[u,d]=foe(n),m={start:"0%",center:"50%",end:"100%"}[d],h=(s.arrow?.x??0)+i/2,p=(s.arrow?.y??0)+c/2;let g="",y="";return u==="bottom"?(g=o?m:`${h}px`,y=`${-c}px`):u==="top"?(g=o?m:`${h}px`,y=`${r.floating.height+c}px`):u==="right"?(g=`${-c}px`,y=o?m:`${p}px`):u==="left"&&(g=`${r.floating.width+c}px`,y=o?m:`${p}px`),{data:{x:g,y}}}});function foe(e){const[t,n="center"]=e.split("-");return[t,n]}var iO=ooe,AS=loe,lO=coe,cO=doe,IIe="Portal",B0=f.forwardRef((e,t)=>{const{container:n,...r}=e,[s,a]=f.useState(!1);Ql(()=>a(!0),[]);const o=n||s&&globalThis?.document?.body;return o?Wne.createPortal(l.jsx(on.div,{...r,ref:t}),o):null});B0.displayName=IIe;function jIe(e,t){return f.useReducer((n,r)=>t[n][r]??n,e)}var Rs=e=>{const{present:t,children:n}=e,r=OIe(t),s=typeof n=="function"?n({present:r.isPresent}):f.Children.only(n),a=kn(r.ref,LIe(s));return typeof n=="function"||r.isPresent?f.cloneElement(s,{ref:a}):null};Rs.displayName="Presence";function OIe(e){const[t,n]=f.useState(),r=f.useRef(null),s=f.useRef(e),a=f.useRef("none"),o=e?"mounted":"unmounted",[i,c]=jIe(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return f.useEffect(()=>{const u=xx(r.current);a.current=i==="mounted"?u:"none"},[i]),Ql(()=>{const u=r.current,d=s.current;if(d!==e){const h=a.current,p=xx(u);e?c("MOUNT"):p==="none"||u?.display==="none"?c("UNMOUNT"):c(d&&h!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),Ql(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,m=p=>{const y=xx(r.current).includes(CSS.escape(p.animationName));if(p.target===t&&y&&(c("ANIMATION_END"),!s.current)){const v=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=v)})}},h=p=>{p.target===t&&(a.current=xx(r.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(i),ref:f.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function xx(e){return e?.animationName||"none"}function LIe(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var DIe=Yj[" useInsertionEffect ".trim().toString()]||Ql;function ti({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[s,a,o]=FIe({defaultProp:t,onChange:n}),i=e!==void 0,c=i?e:s;{const d=f.useRef(e!==void 0);f.useEffect(()=>{const m=d.current;m!==i&&console.warn(`${r} is changing from ${m?"controlled":"uncontrolled"} to ${i?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=i},[i,r])}const u=f.useCallback(d=>{if(i){const m=UIe(d)?d(e):d;m!==e&&o.current?.(m)}else a(d)},[i,e,a,o]);return[c,u]}function FIe({defaultProp:e,onChange:t}){const[n,r]=f.useState(e),s=f.useRef(n),a=f.useRef(t);return DIe(()=>{a.current=t},[t]),f.useEffect(()=>{s.current!==n&&(a.current?.(n),s.current=n)},[n,s]),[n,r,a]}function UIe(e){return typeof e=="function"}var BIe=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),VIe="VisuallyHidden",V0=f.forwardRef((e,t)=>l.jsx(on.span,{...e,ref:t,style:{...BIe,...e.style}}));V0.displayName=VIe;var uO=V0,[PS,KDt]=Ga("Tooltip",[op]),RS=op(),moe="TooltipProvider",$Ie=700,vA="tooltip.open",[WIe,dO]=PS(moe),fO=e=>{const{__scopeTooltip:t,delayDuration:n=$Ie,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:a}=e,o=f.useRef(!0),i=f.useRef(!1),c=f.useRef(0);return f.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),l.jsx(WIe,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:f.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:f.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:i,onPointerInTransitChange:f.useCallback(u=>{i.current=u},[]),disableHoverableContent:s,children:a})};fO.displayName=moe;var xv="Tooltip",[HIe,$0]=PS(xv),hoe=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:s,onOpenChange:a,disableHoverableContent:o,delayDuration:i}=e,c=dO(xv,e.__scopeTooltip),u=RS(t),[d,m]=f.useState(null),h=Mm(),p=f.useRef(0),g=o??c.disableHoverableContent,y=i??c.delayDuration,v=f.useRef(!1),[x,b]=ti({prop:r,defaultProp:s??!1,onChange:E=>{E?(c.onOpen(),document.dispatchEvent(new CustomEvent(vA))):c.onClose(),a?.(E)},caller:xv}),_=f.useMemo(()=>x?v.current?"delayed-open":"instant-open":"closed",[x]),w=f.useCallback(()=>{window.clearTimeout(p.current),p.current=0,v.current=!1,b(!0)},[b]),S=f.useCallback(()=>{window.clearTimeout(p.current),p.current=0,b(!1)},[b]),C=f.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{v.current=!0,b(!0),p.current=0},y)},[y,b]);return f.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),l.jsx(iO,{...u,children:l.jsx(HIe,{scope:t,contentId:h,open:x,stateAttribute:_,trigger:d,onTriggerChange:m,onTriggerEnter:f.useCallback(()=>{c.isOpenDelayedRef.current?C():w()},[c.isOpenDelayedRef,C,w]),onTriggerLeave:f.useCallback(()=>{g?S():(window.clearTimeout(p.current),p.current=0)},[S,g]),onOpen:w,onClose:S,disableHoverableContent:g,children:n})})};hoe.displayName=xv;var xA="TooltipTrigger",mO=f.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=$0(xA,n),a=dO(xA,n),o=RS(n),i=f.useRef(null),c=kn(t,i,s.onTriggerChange),u=f.useRef(!1),d=f.useRef(!1),m=f.useCallback(()=>u.current=!1,[]);return f.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),l.jsx(AS,{asChild:!0,...o,children:l.jsx(on.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:jt(e.onPointerMove,h=>{h.pointerType!=="touch"&&!d.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:jt(e.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:jt(e.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:jt(e.onFocus,()=>{u.current||s.onOpen()}),onBlur:jt(e.onBlur,s.onClose),onClick:jt(e.onClick,s.onClose)})})});mO.displayName=xA;var hO="TooltipPortal",[zIe,GIe]=PS(hO,{forceMount:void 0}),pO=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:s}=e,a=$0(hO,t);return l.jsx(zIe,{scope:t,forceMount:n,children:l.jsx(Rs,{present:n||a.open,children:l.jsx(B0,{asChild:!0,container:s,children:r})})})};pO.displayName=hO;var ih="TooltipContent",gO=f.forwardRef((e,t)=>{const n=GIe(ih,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...a}=e,o=$0(ih,e.__scopeTooltip);return l.jsx(Rs,{present:r||o.open,children:o.disableHoverableContent?l.jsx(poe,{side:s,...a,ref:t}):l.jsx(qIe,{side:s,...a,ref:t})})}),qIe=f.forwardRef((e,t)=>{const n=$0(ih,e.__scopeTooltip),r=dO(ih,e.__scopeTooltip),s=f.useRef(null),a=kn(t,s),[o,i]=f.useState(null),{trigger:c,onClose:u}=n,d=s.current,{onPointerInTransitChange:m}=r,h=f.useCallback(()=>{i(null),m(!1)},[m]),p=f.useCallback((g,y)=>{const v=g.currentTarget,x={x:g.clientX,y:g.clientY},b=XIe(x,v.getBoundingClientRect()),_=ZIe(x,b),w=JIe(y.getBoundingClientRect()),S=tje([..._,...w]);i(S),m(!0)},[m]);return f.useEffect(()=>()=>h(),[h]),f.useEffect(()=>{if(c&&d){const g=v=>p(v,d),y=v=>p(v,c);return c.addEventListener("pointerleave",g),d.addEventListener("pointerleave",y),()=>{c.removeEventListener("pointerleave",g),d.removeEventListener("pointerleave",y)}}},[c,d,p,h]),f.useEffect(()=>{if(o){const g=y=>{const v=y.target,x={x:y.clientX,y:y.clientY},b=c?.contains(v)||d?.contains(v),_=!eje(x,o);b?h():_&&(h(),u())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[c,d,o,u,h]),l.jsx(poe,{...e,ref:a})}),[KIe,YIe]=PS(xv,{isInside:!1}),QIe=vRe("TooltipContent"),poe=f.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:o,...i}=e,c=$0(ih,n),u=RS(n),{onClose:d}=c;return f.useEffect(()=>(document.addEventListener(vA,d),()=>document.removeEventListener(vA,d)),[d]),f.useEffect(()=>{if(c.trigger){const m=h=>{h.target?.contains(c.trigger)&&d()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[c.trigger,d]),l.jsx(F0,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:m=>m.preventDefault(),onDismiss:d,children:l.jsxs(lO,{"data-state":c.stateAttribute,...u,...i,ref:t,style:{...i.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[l.jsx(QIe,{children:r}),l.jsx(KIe,{scope:n,isInside:!0,children:l.jsx(uO,{id:c.contentId,role:"tooltip",children:s||r})})]})})});gO.displayName=ih;var goe="TooltipArrow",n2=f.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=RS(n);return YIe(goe,n).isInside?null:l.jsx(cO,{...s,...r,ref:t})});n2.displayName=goe;function XIe(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,r,s,a)){case a:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function ZIe(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function JIe(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}function eje(e,t){const{x:n,y:r}=e;let s=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const i=t[a],c=t[o],u=i.x,d=i.y,m=c.x,h=c.y;d>r!=h>r&&n<(m-u)*(r-d)/(h-d)+u&&(s=!s)}return s}function tje(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),nje(t)}function nje(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const a=t[t.length-1],o=t[t.length-2];if((a.x-o.x)*(s.y-o.y)>=(a.y-o.y)*(s.x-o.x))t.pop();else break}t.push(s)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];for(;n.length>=2;){const a=n[n.length-1],o=n[n.length-2];if((a.x-o.x)*(s.y-o.y)>=(a.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var rje=fO,yoe=hoe,sje=mO,aje=pO,oje=gO,ije=n2;const lje=new Proxy(Object.freeze([]),{set(){throw new Error("Cannot modify default array")}}),ce=lje,voe=new Proxy(Object.freeze({}),{set(){throw new Error("Cannot modify default object")}}),xoe=A.memo(({className:e,textClassName:t,text:n,shortcut:r=ce,...s})=>l.jsxs("div",{className:B("gap-x-sm bg-inverse px-sm py-xs dark:bg-offsetPlus flex max-w-[280px] items-center rounded",e),...s,children:[typeof n=="string"?l.jsx(D,{variant:"tiny",color:"white",className:t,children:n}):n,r.length>0&&l.jsx("div",{className:"gap-two flex",children:r.map(a=>l.jsx(D,{variant:"smallCaps",className:"border-subtlest bg-inverse px-xs py-two dark:bg-offsetPlus rounded border shadow-md",children:l.jsx("span",{className:"text-light",children:a})},a))})]}));xoe.displayName="TooltipBody";const bn=A.memo(({tooltipText:e,tooltipLayout:t="top",children:n,keyboardShortcut:r,showTooltip:s=!0,className:a="",asChild:o=!1,testId:i,offset:c=8,closeOnClick:u=!0,bodyClassName:d,bodyTextClassName:m,arrowClassName:h,open:p,onClickOutsideTooltip:g,onOpenChange:y,delayDuration:v})=>s?l.jsxs(yoe,{open:p,onOpenChange:y,delayDuration:v,children:[l.jsx(aje,{children:l.jsxs(oje,{side:t,sideOffset:c,className:B(t==="bottom"&&"data-[state=closed]:animate-slideUpAndFadeOut data-[state=delayed-open]:animate-slideDownAndFadeIn",t==="top"&&"data-[state=closed]:animate-slideDownAndFadeOut data-[state=delayed-open]:animate-slideUpAndFadeIn",t==="left"&&"data-[state=closed]:animate-slideRightAndFadeOut data-[state=delayed-open]:animate-slideLeftAndFadeIn",t==="right"&&"data-[state=closed]:animate-slideLeftAndFadeOut data-[state=delayed-open]:animate-slideRightAndFadeIn",a),onPointerDownOutside:u?g:x=>{x.preventDefault()},children:[l.jsx(xoe,{text:e,shortcut:r,"data-test-id":i,className:d,textClassName:m}),h&&l.jsx(ije,{className:B("fill-foreground dark:fill-offsetPlus bg-transparent",h)})]})}),l.jsx(sje,{asChild:o,onClick:u?g:x=>{x.preventDefault()},children:n})]}):l.jsx(l.Fragment,{children:n})),cje=2e3,uje=1e3,C$={[Ft.tiny]:{height:"h-6",text:"text-xs",padding:"px-2",iconWrapperSize:"size-3.5",baselineShift:"-mb-px"},[Ft.small]:{height:"h-8",text:"text-sm",padding:"px-2.5",iconWrapperSize:"size-4",baselineShift:"-mb-px"},[Ft.regular]:{height:"h-10",text:"text-base",padding:"px-3",iconWrapperSize:"size-5",baselineShift:"mb-[-2px]"},[Ft.large]:{height:"h-14",text:"text-lg",padding:"px-5",iconWrapperSize:"size-7",baselineShift:"mb-[-3px]"}},boe=e=>C$[e]||C$[Ft.regular],E$=({children:e,buttonSize:t=Ft.regular})=>l.jsx("div",{className:B("flex shrink-0 items-center justify-center",boe(t).iconWrapperSize),children:e}),_oe=f.memo(f.forwardRef(({text:e,textClassName:t="",size:n=Ft.regular,disabled:r=!1,fullWidth:s,fullWidthMobile:a,layout:o="center",type:i="button",noWrap:c=!0,onClick:u=Rn,onMouseDown:d,href:m,target:h,extraCSS:p,icon:g,iconClassName:y,pill:v=!1,noRounded:x=!1,toolTip:b,keyboardShortcut:_,tooltipLayout:w="top",tooltipProps:S,badge:C,chevron:E,isLoading:M,loadingVariant:T="spin",leadingComponent:I,trailingComponent:j,maxWidth:N,chevronIcon:P=Zr,clickFeedback:R=!1,debounce:k=!1,testId:O,ariaLabel:L,variant:F,autoFocus:U,noPadding:V=!1,...W},H)=>{const[G,K]=f.useState(!1),[$,q]=f.useState(!1),[Z,se]=f.useState(r),Y=f.useMemo(()=>boe(n),[n]);f.useEffect(()=>{se(k&&$||r)},[k,$,r]);const Q=Ae=>{(!k||!$)&&(q(!0),setTimeout(()=>q(!1),uje),u(Ae)),R&&(K(!0),setTimeout(()=>K(!1),cje))},re=!!e,te=f.useMemo(()=>B(p,"font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium",{"justify-center text-center items-center":o==="center","justify-start":o==="left","rounded-none":x,"rounded-lg":!v&&!x,"rounded-full":v&&!x,"cursor-default opacity-50":Z,"cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center":!Z,"whitespace-nowrap":c,"break-words":!c,"flex w-full":s,"inline-flex":!s&&!a,"flex w-full md:inline-flex md:w-auto":a,[Y.text]:!0,[Y.height]:!0,[Y.padding]:re,[v?"aspect-square":"aspect-[9/8]"]:!re&&!E&&!C&&!(g&&I)}),[C,Y,E,Z,p,s,a,re,g,o,I,x,c,v]),le=f.useMemo(()=>B("flex items-center min-w-0 gap-two",{"flex-col":o==="stacked","justify-center":o==="center","justify-left":o==="left","justify-between":o==="split","w-full":s,"gap-sm":o==="stacked"}),[s,o]),ie=f.useMemo(()=>o==="stacked"||n===Ft.regular&&!re||n===Ft.large&&re?16:14,[o,n,re]),pe=l.jsxs("div",{className:le,style:{maxWidth:N},children:[I&&l.jsx("div",{children:I}),M&&l.jsx(E$,{buttonSize:n,children:T==="spin"?l.jsx(Ns,{size:ie}):T==="pulse"?l.jsx("div",{className:B("relative flex items-center justify-center",F==="primary"?"text-inverse":"text-super"),children:l.jsxs("div",{className:"relative scale-[0.8]",children:[l.jsx(My,{icon:L6,buttonSize:n}),l.jsx(My,{icon:L6,buttonSize:n,iconClassName:"duration-1200 absolute inset-0 animate-ping"})]})}):null}),!M&&g&&l.jsx(E$,{buttonSize:n,children:l.jsx(My,{icon:g,showClicked:G,buttonSize:n,iconClassName:y})}),e&&l.jsx("div",{className:B("text-align-center relative truncate",{"px-1":!V,"leading-loose":o!=="stacked","leading-none":o==="stacked"},Y.baselineShift,t),children:e}),C&&l.jsxs("span",{children:["  ",C]}),E&&l.jsx(be,{size:"xs",icon:P,className:"shrink-0 opacity-50"}),j]});let me;g&&!e&&b&&(me=b);const de=f.useMemo(()=>({WebkitTapHighlightColor:"transparent"}),[]);let ve;return m?ve=l.jsx(at,{"data-testid":O,role:"button","aria-label":L??me,href:m??"/",className:te,target:h,onClick:u,onMouseDown:d,style:de,...W,ref:H,children:pe}):ve=l.jsx("button",{"data-testid":O,"aria-label":L??me,type:i,disabled:Z,onClick:Q,onMouseDown:d,className:te,...W,ref:H,children:pe}),_||b?l.jsx(bn,{tooltipText:b??"",keyboardShortcut:_,tooltipLayout:w,...S,asChild:!0,children:ve}):ve})),ke=f.memo(f.forwardRef(({variant:e="common",noPadding:t,noXPadding:n,extraCSS:r,...s},a)=>{const o=f.useMemo(()=>B("focus-visible:bg-offsetPlus",{"!p-0 !h-auto hover:!bg-transparent":t},{"!px-0 hover:!bg-transparent":n},{super:"hover:bg-offsetPlus text-super dark:hover:bg-offsetPlus",primary:"hover:bg-offsetPlus text-foreground dark:hover:bg-offsetPlus",common:"hover:bg-offsetPlus text-quiet  hover:text-foreground dark:hover:bg-offsetPlus",positive:"text-quiet  hover:bg-offsetPlus hover:text-super",positiveSelected:"text-super hover:bg-offsetPlus hover:text-super",negative:"text-quiet hover:bg-offsetPlus hover:text-caution",negativeSelected:"text-caution dark:text-caution hover:bg-offsetPlus hover:text-caution",noBackground:"text-quiet hover:text-foreground",noHover:"text-quiet  cursor-default",offset:"text-foreground bg-offsetPlus"}[e],r),[r,e,t,n]);return l.jsx(_oe,{testId:s.testId,extraCSS:o,...s,ref:a})})),dje=f.createContext(null),F3={didCatch:!1,error:null};let fje=class extends f.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=F3}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){const{error:t}=this.state;if(t!==null){for(var n,r,s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];(n=(r=this.props).onReset)===null||n===void 0||n.call(r,{args:a,reason:"imperative-api"}),this.setState(F3)}}componentDidCatch(t,n){var r,s;(r=(s=this.props).onError)===null||r===void 0||r.call(s,t,n)}componentDidUpdate(t,n){const{didCatch:r}=this.state,{resetKeys:s}=this.props;if(r&&n.error!==null&&mje(t.resetKeys,s)){var a,o;(a=(o=this.props).onReset)===null||a===void 0||a.call(o,{next:s,prev:t.resetKeys,reason:"keys"}),this.setState(F3)}}render(){const{children:t,fallbackRender:n,FallbackComponent:r,fallback:s}=this.props,{didCatch:a,error:o}=this.state;let i=t;if(a){const c={error:o,resetErrorBoundary:this.resetErrorBoundary};if(f.isValidElement(s))i=s;else if(typeof n=="function")i=n(c);else if(r)i=f.createElement(r,c);else throw o}return f.createElement(dje.Provider,{value:{didCatch:a,error:o,resetErrorBoundary:this.resetErrorBoundary}},i)}};function mje(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.length!==t.length||e.some((n,r)=>!Object.is(n,t[r]))}const yO={transparent:"transparent",subtle:"subtle",background:"background",offset:"offset"},hje="border-subtlest ring-subtlest divide-subtlest",z=f.memo(({variant:e=yO.transparent,className:t,onClick:n,onMouseOver:r,onMouseLeave:s,children:a,id:o,bgHover:i,style:c,testId:u,as:d="div",ref:m,noBorder:h,...p})=>{const g=f.useMemo(()=>{const y={transparent:"bg-transparent",super:"bg-super",superBorder:"border border-super",superLight:"bg-superBG",subtle:"bg-subtle",subtler:"bg-subtler",red:"bg-caution",background:"bg-base",offset:"bg-offset",offsetLoading:"bg-offset/50 animate-pulse",offsetPlus:"bg-offsetPlus",textColor:"bg-inverse",orange:"bg-attention",raised:"bg-raised dark:bg-offset",raisedOffset:"bg-raisedOffset",max:"bg-max",maxBorder:"border border-max"},v={offset:"md:hover:bg-offset",offsetPlus:"md:hover:bg-offsetPlus",raisedOffset:"md:hover:bg-raisedOffset",transparent:"md:hover:bg-transparent",super:"md:hover:bg-super"};return B(t,!h&&e!=="maxBorder"&&e!=="superBorder"&&hje,i?"transition duration-300":"",y[e]||y.transparent,i&&v[i]||"")},[i,t,e,h]);return f.createElement(d,{id:o,ref:m,className:g,onClick:n,onMouseOver:r,onMouseLeave:s,style:c,"data-testid":u,...p},a)});z.displayName="Box";const ye=f.memo(f.forwardRef(({variant:e="common",disabled:t,extraCSS:n,...r},s)=>{const{buttonClass:a}=f.useMemo(()=>{const o={disabled:"bg-inverse/15 text-quiet",primary:"bg-super text-inverse hover:opacity-80",primaryGhost:"border border-super/20 bg-super/10 hover:bg-super/20 hover:border-super/30 text-super",common:"bg-offsetPlus text-foreground md:hover:text-quiet",border:"border border-subtler text-quiet md:hover:border-subtle md:hover:text-quiet hover:bg-subtler bg-base",inverted:"bg-inverse text-inverse hover:opacity-80",rejecter:"border border-subtlest text-caution dark:hover:text-foreground hover:bg-caution/30 hover:border-caution/20 bg-base",rejected:"bg-caution hover:opacity-50 text-white",orange:"bg-attention text-white hover:opacity-50",maxGold:"bg-max dark:text-inverse hover:opacity-80"},i=t?o.disabled:o[e];return{buttonClass:B(i,n)}},[e,t,n]);return l.jsx(_oe,{extraCSS:a,disabled:t,variant:e,...r,ref:s})}));class pje extends T0{name="ReactRenderingError"}function IS(e){ee.info("Reloading window",{reason:e,url:window.location.href}),window.location.reload()}const gje=()=>IS("Error boundary"),yje=({resetErrorBoundary:e})=>{const{$t:t}=X(),n=f.useCallback(()=>{e()},[e]);return l.jsxs(z,{variant:"offset",className:"p-md flex w-full items-center justify-between rounded",children:[l.jsx(D,{variant:"smallBold",children:t({defaultMessage:"Something went wrong.",id:"iuY8kxCDQT"})}),l.jsx(ye,{pill:!0,size:"tiny",text:t({defaultMessage:"Retry",id:"62nsdyMyIO"}),variant:"border",type:"button",onClick:n})]})},vje=A.memo(()=>null),xje=/load(.*?)chunk/i,Zs=A.memo(({fallback:e=yje,children:t,onError:n,code:r="REACT_RENDERING_ERROR"})=>{const s=f.useCallback((a,o)=>{n?.(a,o);let i;if(a instanceof T0)i=a;else{let c=r;xje.test(a?.message??"")&&(c="CHUNK_LOADING_ERROR"),i=new pje(c,{message:a.message,cause:a})}i.stack=o.componentStack||void 0,ee.error(i)},[n,r]);return l.jsx(fje,{FallbackComponent:e||vje,onError:s,onReset:gje,children:t})}),woe=({shouldShow:e,imageSrc:t,imageAlt:n,title:r,description:s,primaryAction:a,onDismiss:o,iconXDismiss:i})=>{const c=cRe();return!e||!c?null:l.jsx(Zs,{fallback:null,children:l.jsxs(_e.div,{className:"p-sm m-md ring-offsetPlus bg-base gap-md fixed bottom-0 right-0 hidden max-w-[320px] grid-cols-1 rounded-xl shadow-md ring-1 md:grid",initial:{opacity:0,y:0},animate:{opacity:1,y:0},transition:{duration:.5},children:[t&&l.jsx("img",{src:t,alt:n,className:"bg-offsetPlus size-full rounded-lg object-cover",style:{aspectRatio:"528/240"}}),i&&l.jsx("div",{className:"right-md top-md absolute",children:l.jsx(ke,{size:"small",icon:Xt,onClick:o,noPadding:!0,iconClassName:t?"text-white":void 0,"data-testid":"floating-card-upsell-dismiss"})}),l.jsxs("div",{className:B("px-sm",{"pt-sm":!t}),children:[l.jsx(D,{variant:"smallBold",className:"mb-xs pr-md",children:r}),l.jsx(D,{variant:"tinyRegular",color:"light",className:"leading-snug",children:s})]}),l.jsxs("div",{className:B("px-sm pb-sm gap-xs flex flex-row",t?"ml-auto":"mr-auto"),children:[!i&&l.jsx(ke,{variant:"common",size:"small",onClick:o,text:"Dismiss"}),a]})]})})};var ip=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Vd=typeof window>"u"||"Deno"in globalThis;function eo(){}function bje(e,t){return typeof e=="function"?e(t):e}function bA(e){return typeof e=="number"&&e>=0&&e!==1/0}function Soe(e,t){return Math.max(e+(t||0)-Date.now(),0)}function km(e,t){return typeof e=="function"?e(t):e}function jo(e,t){return typeof e=="function"?e(t):e}function M$(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:o,stale:i}=e;if(o){if(r){if(t.queryHash!==vO(o,t.options))return!1}else if(!bv(t.queryKey,o))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof i=="boolean"&&t.isStale()!==i||s&&s!==t.state.fetchStatus||a&&!a(t))}function T$(e,t){const{exact:n,status:r,predicate:s,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if($d(t.options.mutationKey)!==$d(a))return!1}else if(!bv(t.options.mutationKey,a))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function vO(e,t){return(t?.queryKeyHashFn||$d)(e)}function $d(e){return JSON.stringify(e,(t,n)=>_A(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function bv(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!bv(e[n],t[n])):!1}function Coe(e,t){if(e===t)return e;const n=k$(e)&&k$(t);if(n||_A(e)&&_A(t)){const r=n?e:Object.keys(e),s=r.length,a=n?t:Object.keys(t),o=a.length,i=n?[]:{};let c=0;for(let u=0;u<o;u++){const d=n?u:a[u];(!n&&r.includes(d)||n)&&e[d]===void 0&&t[d]===void 0?(i[d]=void 0,c++):(i[d]=Coe(e[d],t[d]),i[d]===e[d]&&e[d]!==void 0&&c++)}return s===o&&c===s?e:i}return t}function r2(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function k$(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function _A(e){if(!N$(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!N$(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function N$(e){return Object.prototype.toString.call(e)==="[object Object]"}function _je(e){return new Promise(t=>{setTimeout(t,e)})}function wA(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?Coe(e,t):t}function W0(e){return e}function wje(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function Sje(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var Eoe=Symbol(),Moe=(e,t)=>!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===Eoe?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn,Cje=class extends ip{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!Vd&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},xO=new Cje,Eje=class extends ip{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!Vd&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(n=>{n(e)}))}isOnline(){return this.#e}},s2=new Eje;function Mje(e){return Math.min(1e3*2**e,3e4)}function Toe(e){return(e??"online")==="online"?s2.isOnline():!0}var koe=class{constructor(e){this.revert=e?.revert,this.silent=e?.silent}};function U3(e){return e instanceof koe}function Noe(e){let t=!1,n=0,r=!1,s,a,o;const i=new Promise((x,b)=>{a=x,o=b}),c=x=>{r||(g(new koe(x)),e.abort?.())},u=()=>{t=!0},d=()=>{t=!1},m=()=>xO.isFocused()&&(e.networkMode==="always"||s2.isOnline())&&e.canRun(),h=()=>Toe(e.networkMode)&&e.canRun(),p=x=>{r||(r=!0,e.onSuccess?.(x),s?.(),a(x))},g=x=>{r||(r=!0,e.onError?.(x),s?.(),o(x))},y=()=>new Promise(x=>{s=b=>{(r||m())&&x(b)},e.onPause?.()}).then(()=>{s=void 0,r||e.onContinue?.()}),v=()=>{if(r)return;let x;const b=n===0?e.initialPromise:void 0;try{x=b??e.fn()}catch(_){x=Promise.reject(_)}Promise.resolve(x).then(p).catch(_=>{if(r)return;const w=e.retry??(Vd?0:3),S=e.retryDelay??Mje,C=typeof S=="function"?S(n,_):S,E=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,_);if(t||!E){g(_);return}n++,e.onFail?.(n,_),_je(C).then(()=>m()?void 0:y()).then(()=>{t?g(_):v()})})};return{promise:i,cancel:c,continue:()=>(s?.(),i),cancelRetry:u,continueRetry:d,canStart:h,start:()=>(h()?v():y().then(v),i)}}function Tje(){let e=[],t=0,n=h=>{h()},r=h=>{h()},s=h=>setTimeout(h,0);const a=h=>{s=h},o=h=>{let p;t++;try{p=h()}finally{t--,t||u()}return p},i=h=>{t?e.push(h):s(()=>{n(h)})},c=h=>(...p)=>{i(()=>{h(...p)})},u=()=>{const h=e;e=[],h.length&&s(()=>{r(()=>{h.forEach(p=>{n(p)})})})};return{batch:o,batchCalls:c,schedule:i,setNotifyFunction:h=>{n=h},setBatchNotifyFunction:h=>{r=h},setScheduler:a}}var Rr=Tje(),Aoe=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),bA(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Vd?1/0:5*60*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},kje=class extends Aoe{#e;#t;#r;#n;#o;#a;constructor(e){super(),this.#a=!1,this.#o=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#r=e.cache,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=e.state||Nje(this.options),this.state=this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(e){this.options={...this.#o,...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,t){const n=wA(this.state.data,e,this.options);return this.#s({data:n,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),n}setState(e,t){this.#s({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#n?.promise;return this.#n?.cancel(e),t?t.then(eo).catch(eo):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>jo(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!Soe(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#n&&(this.#a?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}fetch(e,t){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(e&&this.setOptions(e),!this.options.queryFn){const i=this.observers.find(c=>c.options.queryFn);i&&this.setOptions(i.options)}const n=new AbortController,r=i=>{Object.defineProperty(i,"signal",{enumerable:!0,get:()=>(this.#a=!0,n.signal)})},s=()=>{const i=Moe(this.options,t),c={queryKey:this.queryKey,meta:this.meta};return r(c),this.#a=!1,this.options.persister?this.options.persister(i,c,this):i(c)},a={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:s};r(a),this.options.behavior?.onFetch(a,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==a.fetchOptions?.meta)&&this.#s({type:"fetch",meta:a.fetchOptions?.meta});const o=i=>{U3(i)&&i.silent||this.#s({type:"error",error:i}),U3(i)||(this.#r.config.onError?.(i,this),this.#r.config.onSettled?.(this.state.data,i,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.#n=Noe({initialPromise:t?.initialPromise,fn:a.fetchFn,abort:n.abort.bind(n),onSuccess:i=>{if(i===void 0){o(new Error(`${this.queryHash} data is undefined`));return}this.setData(i),this.#r.config.onSuccess?.(i,this),this.#r.config.onSettled?.(i,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:o,onFail:(i,c)=>{this.#s({type:"failed",failureCount:i,error:c})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}),this.#n.start()}#s(e){const t=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Poe(n.data,this.options),fetchMeta:e.meta??null};case"success":return{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=e.error;return U3(r)&&r.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...n,error:r,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=t(this.state),Rr.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function Poe(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Toe(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Nje(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Roe=class extends ip{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,n){const r=t.queryKey,s=t.queryHash??vO(r,t);let a=this.get(s);return a||(a=new kje({cache:this,queryKey:r,queryHash:s,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(r)}),this.add(a)),a}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Rr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(n=>M$(t,n))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(n=>M$(e,n)):t}notify(e){Rr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Rr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Rr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Aje=class extends Aoe{#e;#t;#r;constructor(e){super(),this.mutationId=e.mutationId,this.#t=e.mutationCache,this.#e=[],this.state=e.state||Ioe(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#e.includes(e)||(this.#e.push(e),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#e=this.#e.filter(t=>t!==e),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(e){this.#r=Noe({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(r,s)=>{this.#n({type:"failed",failureCount:r,error:s})},onPause:()=>{this.#n({type:"pause"})},onContinue:()=>{this.#n({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const t=this.state.status==="pending",n=!this.#r.canStart();try{if(!t){this.#n({type:"pending",variables:e,isPaused:n}),await this.#t.config.onMutate?.(e,this);const s=await this.options.onMutate?.(e);s!==this.state.context&&this.#n({type:"pending",context:s,variables:e,isPaused:n})}const r=await this.#r.start();return await this.#t.config.onSuccess?.(r,e,this.state.context,this),await this.options.onSuccess?.(r,e,this.state.context),await this.#t.config.onSettled?.(r,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(r,null,e,this.state.context),this.#n({type:"success",data:r}),r}catch(r){try{throw await this.#t.config.onError?.(r,e,this.state.context,this),await this.options.onError?.(r,e,this.state.context),await this.#t.config.onSettled?.(void 0,r,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,r,e,this.state.context),r}finally{this.#n({type:"error",error:r})}}finally{this.#t.runNext(this)}}#n(e){const t=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Rr.batch(()=>{this.#e.forEach(n=>{n.onMutationUpdate(e)}),this.#t.notify({mutation:this,type:"updated",action:e})})}};function Ioe(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var joe=class extends ip{constructor(e={}){super(),this.config=e,this.#e=new Map,this.#t=Date.now()}#e;#t;build(e,t,n){const r=new Aje({mutationCache:this,mutationId:++this.#t,options:e.defaultMutationOptions(t),state:n});return this.add(r),r}add(e){const t=bx(e),n=this.#e.get(t)??[];n.push(e),this.#e.set(t,n),this.notify({type:"added",mutation:e})}remove(e){const t=bx(e);if(this.#e.has(t)){const n=this.#e.get(t)?.filter(r=>r!==e);n&&(n.length===0?this.#e.delete(t):this.#e.set(t,n))}this.notify({type:"removed",mutation:e})}canRun(e){const t=this.#e.get(bx(e))?.find(n=>n.state.status==="pending");return!t||t===e}runNext(e){return this.#e.get(bx(e))?.find(n=>n!==e&&n.state.isPaused)?.continue()??Promise.resolve()}clear(){Rr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...this.#e.values()].flat()}find(e){const t={exact:!0,...e};return this.getAll().find(n=>T$(t,n))}findAll(e={}){return this.getAll().filter(t=>T$(e,t))}notify(e){Rr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Rr.batch(()=>Promise.all(e.map(t=>t.continue().catch(eo))))}};function bx(e){return e.options.scope?.id??String(e.mutationId)}function SA(e){return{onFetch:(t,n)=>{const r=async()=>{const s=t.options,a=t.fetchOptions?.meta?.fetchMore?.direction,o=t.state.data?.pages||[],i=t.state.data?.pageParams||[],c={pages:[],pageParams:[]};let u=!1;const d=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(t.signal.aborted?u=!0:t.signal.addEventListener("abort",()=>{u=!0}),t.signal)})},m=Moe(t.options,t.fetchOptions),h=async(g,y,v)=>{if(u)return Promise.reject();if(y==null&&g.pages.length)return Promise.resolve(g);const x={queryKey:t.queryKey,pageParam:y,direction:v?"backward":"forward",meta:t.options.meta};d(x);const b=await m(x),{maxPages:_}=t.options,w=v?Sje:wje;return{pages:w(g.pages,b,_),pageParams:w(g.pageParams,y,_)}};let p;if(a&&o.length){const g=a==="backward",y=g?Ooe:CA,v={pages:o,pageParams:i},x=y(s,v);p=await h(v,x,g)}else{p=await h(c,i[0]??s.initialPageParam);const g=e??o.length;for(let y=1;y<g;y++){const v=CA(s,p);p=await h(p,v)}}return p};t.options.persister?t.fetchFn=()=>t.options.persister?.(r,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n):t.fetchFn=r}}}function CA(e,{pages:t,pageParams:n}){const r=t.length-1;return e.getNextPageParam(t[r],t,n[r],n)}function Ooe(e,{pages:t,pageParams:n}){return e.getPreviousPageParam?.(t[0],t,n[0],n)}function Pje(e,t){return t?CA(e,t)!=null:!1}function Rje(e,t){return!t||!e.getPreviousPageParam?!1:Ooe(e,t)!=null}var Ije=class{#e;#t;#r;#n;#o;#a;#s;#i;constructor(e={}){this.#e=e.queryCache||new Roe,this.#t=e.mutationCache||new joe,this.#r=e.defaultOptions||{},this.#n=new Map,this.#o=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#s=xO.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#i=s2.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#s?.(),this.#s=void 0,this.#i?.(),this.#i=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),r=this.#e.build(this,n);return e.revalidateIfStale&&r.isStaleByTime(km(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),a=this.#e.get(r.queryHash)?.state.data,o=bje(t,a);if(o!==void 0)return this.#e.build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return Rr.batch(()=>this.#e.findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;Rr.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=this.#e,r={type:"active",...e};return Rr.batch(()=>(n.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},r=Rr.batch(()=>this.#e.findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(eo).catch(eo)}invalidateQueries(e={},t={}){return Rr.batch(()=>{if(this.#e.findAll(e).forEach(r=>{r.invalidate()}),e.refetchType==="none")return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:t?.cancelRefetch??!0},r=Rr.batch(()=>this.#e.findAll(e).filter(s=>!s.isDisabled()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(eo)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(eo)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=this.#e.build(this,t);return n.isStaleByTime(km(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(eo).catch(eo)}fetchInfiniteQuery(e){return e.behavior=SA(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(eo).catch(eo)}resumePausedMutations(){return s2.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,t){this.#n.set($d(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#n.values()];let n={};return t.forEach(r=>{bv(e,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(e,t){this.#o.set($d(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#o.values()];let n={};return t.forEach(r=>{bv(e,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=vO(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===Eoe&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},Loe=class extends ip{constructor(e,t){super(),this.options=t,this.#e=e,this.#s=null,this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#r=void 0;#n=void 0;#o;#a;#s;#i;#f;#m;#c;#u;#l;#h=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),A$(this.#t,this.options)?this.#d():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return EA(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return EA(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#x(),this.#b(),this.#t.removeObserver(this)}setOptions(e,t){const n=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof jo(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#_(),this.#t.setOptions(this.options),n._defaulted&&!r2(this.options,n)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const s=this.hasListeners();s&&P$(this.#t,r,this.options,n)&&this.#d(),this.updateResult(t),s&&(this.#t!==r||jo(this.options.enabled,this.#t)!==jo(n.enabled,this.#t)||km(this.options.staleTime,this.#t)!==km(n.staleTime,this.#t))&&this.#p();const a=this.#g();s&&(this.#t!==r||jo(this.options.enabled,this.#t)!==jo(n.enabled,this.#t)||a!==this.#l)&&this.#y(a)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),n=this.createResult(t,e);return Oje(this,n)&&(this.#n=n,this.#a=this.options,this.#o=this.#t.state),n}getCurrentResult(){return this.#n}trackResult(e,t){const n={};return Object.keys(e).forEach(r=>{Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(r),t?.(r),e[r])})}),n}trackProp(e){this.#h.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),n=this.#e.getQueryCache().build(this.#e,t);return n.isFetchingOptimistic=!0,n.fetch().then(()=>this.createResult(n,t))}fetch(e){return this.#d({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#n))}#d(e){this.#_();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(eo)),t}#p(){this.#x();const e=km(this.options.staleTime,this.#t);if(Vd||this.#n.isStale||!bA(e))return;const n=Soe(this.#n.dataUpdatedAt,e)+1;this.#c=setTimeout(()=>{this.#n.isStale||this.updateResult()},n)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(e){this.#b(),this.#l=e,!(Vd||jo(this.options.enabled,this.#t)===!1||!bA(this.#l)||this.#l===0)&&(this.#u=setInterval(()=>{(this.options.refetchIntervalInBackground||xO.isFocused())&&this.#d()},this.#l))}#v(){this.#p(),this.#y(this.#g())}#x(){this.#c&&(clearTimeout(this.#c),this.#c=void 0)}#b(){this.#u&&(clearInterval(this.#u),this.#u=void 0)}createResult(e,t){const n=this.#t,r=this.options,s=this.#n,a=this.#o,o=this.#a,c=e!==n?e.state:this.#r,{state:u}=e;let d={...u},m=!1,h;if(t._optimisticResults){const C=this.hasListeners(),E=!C&&A$(e,t),M=C&&P$(e,n,t,r);(E||M)&&(d={...d,...Poe(u.data,e.options)}),t._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:y}=d;if(t.select&&d.data!==void 0)if(s&&d.data===a?.data&&t.select===this.#i)h=this.#f;else try{this.#i=t.select,h=t.select(d.data),h=wA(s?.data,h,t),this.#f=h,this.#s=null}catch(C){this.#s=C}else h=d.data;if(t.placeholderData!==void 0&&h===void 0&&y==="pending"){let C;if(s?.isPlaceholderData&&t.placeholderData===o?.placeholderData)C=s.data;else if(C=typeof t.placeholderData=="function"?t.placeholderData(this.#m?.state.data,this.#m):t.placeholderData,t.select&&C!==void 0)try{C=t.select(C),this.#s=null}catch(E){this.#s=E}C!==void 0&&(y="success",h=wA(s?.data,C,t),m=!0)}this.#s&&(p=this.#s,h=this.#f,g=Date.now(),y="error");const v=d.fetchStatus==="fetching",x=y==="pending",b=y==="error",_=x&&v,w=h!==void 0;return{status:y,fetchStatus:d.fetchStatus,isPending:x,isSuccess:y==="success",isError:b,isInitialLoading:_,isLoading:_,data:h,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>c.dataUpdateCount||d.errorUpdateCount>c.errorUpdateCount,isFetching:v,isRefetching:v&&!x,isLoadingError:b&&!w,isPaused:d.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:b&&w,isStale:bO(e,t),refetch:this.refetch}}updateResult(e){const t=this.#n,n=this.createResult(this.#t,this.options);if(this.#o=this.#t.state,this.#a=this.options,this.#o.data!==void 0&&(this.#m=this.#t),r2(n,t))return;this.#n=n;const r={},s=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,o=typeof a=="function"?a():a;if(o==="all"||!o&&!this.#h.size)return!0;const i=new Set(o??this.#h);return this.options.throwOnError&&i.add("error"),Object.keys(this.#n).some(c=>{const u=c;return this.#n[u]!==t[u]&&i.has(u)})};e?.listeners!==!1&&s()&&(r.listeners=!0),this.#w({...r,...e})}#_(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#r=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#w(e){Rr.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#n)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function jje(e,t){return jo(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function A$(e,t){return jje(e,t)||e.state.data!==void 0&&EA(e,t,t.refetchOnMount)}function EA(e,t,n){if(jo(t.enabled,e)!==!1){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&bO(e,t)}return!1}function P$(e,t,n,r){return(e!==t||jo(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&bO(e,n)}function bO(e,t){return jo(t.enabled,e)!==!1&&e.isStaleByTime(km(t.staleTime,e))}function Oje(e,t){return!r2(e.getCurrentResult(),t)}var Lje=class extends Loe{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,t){super.setOptions({...e,behavior:SA()},t)}getOptimisticResult(e){return e.behavior=SA(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){const{state:n}=e,r=super.createResult(e,t),{isFetching:s,isRefetching:a,isError:o,isRefetchError:i}=r,c=n.fetchMeta?.fetchMore?.direction,u=o&&c==="forward",d=s&&c==="forward",m=o&&c==="backward",h=s&&c==="backward";return{...r,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:Pje(t,n.data),hasPreviousPage:Rje(t,n.data),isFetchNextPageError:u,isFetchingNextPage:d,isFetchPreviousPageError:m,isFetchingPreviousPage:h,isRefetchError:i&&!u&&!m,isRefetching:a&&!d&&!h}}},Dje=class extends ip{#e;#t=void 0;#r;#n;constructor(t,n){super(),this.#e=t,this.setOptions(n),this.bindMethods(),this.#o()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const n=this.options;this.options=this.#e.defaultMutationOptions(t),r2(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),n?.mutationKey&&this.options.mutationKey&&$d(n.mutationKey)!==$d(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#o(),this.#a(t)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#o(),this.#a()}mutate(t,n){return this.#n=n,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(t)}#o(){const t=this.#r?.state??Ioe();this.#t={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#a(t){Rr.batch(()=>{if(this.#n&&this.hasListeners()){const n=this.#t.variables,r=this.#t.context;t?.type==="success"?(this.#n.onSuccess?.(t.data,n,r),this.#n.onSettled?.(t.data,null,n,r)):t?.type==="error"&&(this.#n.onError?.(t.error,n,r),this.#n.onSettled?.(void 0,t.error,n,r))}this.listeners.forEach(n=>{n(this.#t)})})}};function Fje(e){return e}function R$(e,t,n){if(typeof t!="object"||t===null)return;const r=e.getMutationCache(),s=e.getQueryCache(),a=n?.defaultOptions?.deserializeData??e.getDefaultOptions().hydrate?.deserializeData??Fje,o=t.mutations||[],i=t.queries||[];o.forEach(({state:c,...u})=>{r.build(e,{...e.getDefaultOptions().hydrate?.mutations,...n?.defaultOptions?.mutations,...u},c)}),i.forEach(({queryKey:c,state:u,queryHash:d,meta:m,promise:h})=>{let p=s.get(d);const g=u.data===void 0?u.data:a(u.data);if(p){if(p.state.dataUpdatedAt<u.dataUpdatedAt){const{fetchStatus:y,...v}=u;p.setState({...v,data:g})}}else p=s.build(e,{...e.getDefaultOptions().hydrate?.queries,...n?.defaultOptions?.queries,queryKey:c,queryHash:d,meta:m},{...u,data:g,fetchStatus:"idle"});if(h){const y=Promise.resolve(h).then(a);p.fetch(void 0,{initialPromise:y})}})}var Doe=f.createContext(void 0),gt=e=>{const t=f.useContext(Doe);if(e)return e;if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Uje=({client:e,children:t})=>(f.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),l.jsx(Doe.Provider,{value:e,children:t})),Foe=f.createContext(!1),Bje=()=>f.useContext(Foe);Foe.Provider;function Vje(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var $je=f.createContext(Vje()),Wje=()=>f.useContext($je);function Uoe(e,t){return typeof e=="function"?e(...t):!!e}function Hje(){}var zje=(e,t)=>{(e.suspense||e.throwOnError)&&(t.isReset()||(e.retryOnMount=!1))},Gje=e=>{f.useEffect(()=>{e.clearReset()},[e])},qje=({result:e,errorResetBoundary:t,throwOnError:n,query:r})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&Uoe(n,[e.error,r]),Kje=e=>{e.suspense&&typeof e.staleTime!="number"&&(e.staleTime=1e3)},Yje=(e,t)=>e?.suspense&&t.isPending,Qje=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function Boe(e,t,n){const r=gt(n),s=Bje(),a=Wje(),o=r.defaultQueryOptions(e);r.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=s?"isRestoring":"optimistic",Kje(o),zje(o,a),Gje(a);const[i]=f.useState(()=>new t(r,o)),c=i.getOptimisticResult(o);if(f.useSyncExternalStore(f.useCallback(u=>{const d=s?()=>{}:i.subscribe(Rr.batchCalls(u));return i.updateResult(),d},[i,s]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),f.useEffect(()=>{i.setOptions(o,{listeners:!1})},[o,i]),Yje(o,c))throw Qje(o,i,a);if(qje({result:c,errorResetBoundary:a,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash)}))throw c.error;return r.getDefaultOptions().queries?._experimental_afterQuery?.(o,c),o.notifyOnChangeProps?c:i.trackResult(c)}function Ke(e,t){return Boe(e,Loe,t)}var Xje=({children:e,options:t={},state:n,queryClient:r})=>{const s=gt(r),[a,o]=f.useState(),i=f.useRef(t);return i.current=t,f.useMemo(()=>{if(n){if(typeof n!="object")return;const c=s.getQueryCache(),u=n.queries||[],d=[],m=[];for(const h of u){const p=c.get(h.queryHash);if(!p)d.push(h);else{const g=h.state.dataUpdatedAt>p.state.dataUpdatedAt,y=a?.find(v=>v.queryHash===h.queryHash);g&&(!y||h.state.dataUpdatedAt>y.state.dataUpdatedAt)&&m.push(h)}}d.length>0&&R$(s,{queries:d},i.current),m.length>0&&o(h=>h?[...h,...m]:m)}},[s,a,n]),f.useEffect(()=>{a&&(R$(s,{queries:a},i.current),o(void 0))},[s,a]),e};function Mt(e,t){const n=gt(t),[r]=f.useState(()=>new Dje(n,e));f.useEffect(()=>{r.setOptions(e)},[r,e]);const s=f.useSyncExternalStore(f.useCallback(o=>r.subscribe(Rr.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),a=f.useCallback((o,i)=>{r.mutate(o,i).catch(Hje)},[r]);if(s.error&&Uoe(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:a,mutateAsync:s.mutate}}function fc(e,t){return Boe(e,Lje,t)}function Nt(){const e=Ot(),t=e?.user?.subscription_status??"none",n=t==="active"||t==="trialing"||t==="white_glove_past_due",r=e?.user?.subscription_tier,s=n&&(r==="pro"||!r),a=n&&r==="max",o=s||a,i=n?e?.user?.subscription_source:"none",c=n&&i==="enterprise";return f.useMemo(()=>({isPro:s,isMax:a,hasAccessToProFeatures:o,hasActiveSubscription:n,subscriptionSource:i,subscriptionStatus:t,subscriptionTier:r,isEnterprisePro:c}),[o,a,s,n,i,t,r,c])}let Rf;const Voe=new URL("/ws",R3e());Voe.protocol="wss:";async function $oe(){return Rf||(Rf=new Promise(e=>{const t=new WebSocket(Voe);t.addEventListener("error",()=>{try{t.close()}finally{Rf=void 0}}),t.addEventListener("close",()=>{Rf=void 0}),t.addEventListener("open",()=>{e(t)})}),Rf)}const mu="en-US",jS={"ar-SA":{characterOrder:"rtl",displayName:" (  )",translations:async()=>(await oe(async()=>{const{default:e}=await import("./translations-ar-SA-BUcevW8s.js");return{default:e}},[])).default},"bn-BD":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await oe(async()=>{const{default:e}=await import("./translations-bn-BD-ZxusLZ7S.js");return{default:e}},[])).default},"cs-CZ":{characterOrder:"ltr",displayName:"etina (esko)",translations:async()=>(await oe(async()=>{const{default:e}=await import("./translations-cs-CZ-ClwTRa8Z.js");return{default:e}},[])).default},"de-DE":{characterOrder:"ltr",displayName:"Deutsch (Deutschland)",translations:async()=>(await oe(async()=>{const{default:e}=await import("./translations-de-DE-BrhgFv2-.js");return{default:e}},[])).default},"el-GR":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await oe(async()=>{const{default:e}=await import("./translations-el-GR-DCsR9rPE.js");return{default:e}},[])).default},"en-US":{characterOrder:"ltr",displayName:"American English",translations:async()=>Promise.resolve({})},"es-ES":{characterOrder:"ltr",displayName:"espaol de Espaa",translations:async()=>(await oe(async()=>{const{default:e}=await import("./translations-es-ES-BoZdYc-X.js");return{default:e}},[])).default},"fr-FR":{characterOrder:"ltr",displayName:"franais (France)",translations:async()=>(await oe(async()=>{const{default:e}=await import("./translations-fr-FR-DUlynb8O.js");return{default:e}},[])).default},"hi-IN":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await oe(async()=>{const{default:e}=await import("./translations-hi-IN-roUFNvg0.js");return{default:e}},[])).default},"hr-HR":{characterOrder:"ltr",displayName:"hrvatski (Hrvatska)",translations:async()=>(await oe(async()=>{const{default:e}=await import("./translations-hr-HR-NtfSEYMk.js");return{default:e}},[])).default},"hu-HU":{characterOrder:"ltr",displayName:"magyar (Magyarorszg)",translations:async()=>(await oe(async()=>{const{default:e}=await import("./translations-hu-HU-DGkyLs8F.js");return{default:e}},[])).default},"id-ID":{characterOrder:"ltr",displayName:"Indonesia (Indonesia)",translations:async()=>(await oe(async()=>{const{default:e}=await import("./translations-id-ID-BNt7horT.js");return{default:e}},[])).default},"it-IT":{characterOrder:"ltr",displayName:"italiano (Italia)",translations:async()=>(await oe(async()=>{const{default:e}=await import("./translations-it-IT-DxIiuWJ6.js");return{default:e}},[])).default},"ja-JP":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await oe(async()=>{const{default:e}=await import("./translations-ja-JP-BD3ruxcr.js");return{default:e}},[])).default},"kn-IN":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await oe(async()=>{const{default:e}=await import("./translations-kn-IN-J3n-O9oG.js");return{default:e}},[])).default},"ko-KR":{characterOrder:"ltr",displayName:"()",translations:async()=>(await oe(async()=>{const{default:e}=await import("./translations-ko-KR-CCnNap4K.js");return{default:e}},[])).default},"ml-IN":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await oe(async()=>{const{default:e}=await import("./translations-ml-IN-BMAfFuoZ.js");return{default:e}},[])).default},"mr-IN":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await oe(async()=>{const{default:e}=await import("./translations-mr-IN-oaAkW8TD.js");return{default:e}},[])).default},"nl-NL":{characterOrder:"ltr",displayName:"Nederlands (Nederland)",translations:async()=>(await oe(async()=>{const{default:e}=await import("./translations-nl-NL-DoWnrG0I.js");return{default:e}},[])).default},"pl-PL":{characterOrder:"ltr",displayName:"polski (Polska)",translations:async()=>(await oe(async()=>{const{default:e}=await import("./translations-pl-PL-lTP64DAy.js");return{default:e}},[])).default},"pt-BR":{characterOrder:"ltr",displayName:"portugus (Brasil)",translations:async()=>(await oe(async()=>{const{default:e}=await import("./translations-pt-BR-Ck9hZI0G.js");return{default:e}},[])).default},"pt-PT":{characterOrder:"ltr",displayName:"portugus europeu",translations:async()=>(await oe(async()=>{const{default:e}=await import("./translations-pt-PT-74oPQXLg.js");return{default:e}},[])).default},"ro-RO":{characterOrder:"ltr",displayName:"romn (Romnia)",translations:async()=>(await oe(async()=>{const{default:e}=await import("./translations-ro-RO-BgvTefqN.js");return{default:e}},[])).default},"ru-RU":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await oe(async()=>{const{default:e}=await import("./translations-ru-RU-CfXGy1II.js");return{default:e}},[])).default},"sk-SK":{characterOrder:"ltr",displayName:"slovenina (Slovensko)",translations:async()=>(await oe(async()=>{const{default:e}=await import("./translations-sk-SK-BiWz1S0W.js");return{default:e}},[])).default},"sr-Cyrl-ME":{characterOrder:"ltr",displayName:" (,  )",translations:async()=>(await oe(async()=>{const{default:e}=await import("./translations-sr-Cyrl-ME-CszcNJbN.js");return{default:e}},[])).default},"ta-IN":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await oe(async()=>{const{default:e}=await import("./translations-ta-IN-C2K2aBL0.js");return{default:e}},[])).default},"te-IN":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await oe(async()=>{const{default:e}=await import("./translations-te-IN-BhQEhz90.js");return{default:e}},[])).default},"zh-CN":{characterOrder:"ltr",displayName:"",translations:async()=>(await oe(async()=>{const{default:e}=await import("./translations-zh-CN-BhFx1m2W.js");return{default:e}},[])).default},"zh-TW":{characterOrder:"ltr",displayName:"",translations:async()=>(await oe(async()=>{const{default:e}=await import("./translations-zh-TW-EfVXN7Kb.js");return{default:e}},[])).default}},Woe="pplx.chosen-locale",_O=new Intl.DateTimeFormat().resolvedOptions().timeZone,r_=Object.keys(jS),Zje=Object.entries(jS).map(([e,t])=>({locale:e,label:t.displayName,characterOrder:t.characterOrder})),Hoe=(e,t=r_)=>{try{return Fke(e,t,mu)}catch{return mu}};async function Jje(e=mu){const t=Hoe(Array.isArray(e)?e:[e]);if(t===mu)return Promise.resolve({matchedLocale:t,translations:{}});const n=await jS[t].translations()??{};return Promise.resolve({matchedLocale:t,translations:n})}function zoe(e){return jS[e]?.characterOrder??"ltr"}function Jc(){const t=[new URL(globalThis.location.href).searchParams.get("locale"),yn(Woe),globalThis.navigator.language].filter(n=>!!n);return Hoe(t)}function e8e(){Fd(Woe)}var t8e={};function n8e(){return typeof window>"u"||window.location.hostname.includes("localhost")?new URL(xB,Kke()):new URL(xB,window.location.origin)}const r8e=n8e();function Goe(e){return navigator.sendBeacon(r8e,new Blob([JSON.stringify(e)],{type:"application/json; charset=UTF-8"}))}function qoe(){const e={};try{navigator.hardwareConcurrency&&(e.hardwareConcurrency=navigator.hardwareConcurrency);const t=new Float32Array(1),n=new Uint8Array(t.buffer);t[0]=1/0,t[0]=t[0]-t[0];const r=n[3];r&&(e.architecture=r),globalThis.screen.colorDepth&&(e.colorDepth=globalThis.screen.colorDepth),globalThis.screen.width&&globalThis.screen.height&&(e.screenSize=`${globalThis.screen.width}x${globalThis.screen.height}`)}catch{}return e}const s8e=qoe(),a8e=(e={},t)=>{const n=Date.now(),r={...e,isStandaloneApp:!1,timestamp:n,isBrowserExtension:!1,timeZone:_O,isPro:t?.user?.subscription_status&&t?.user?.subscription_status!=="none",userId:t?.user?.id,deviceInfo:s8e,isPerplexityBrowser:yn("comet_browser")!==void 0},s=globalThis.location.pathname+globalThis.location.search,a=!!getComputedStyle(document.documentElement).getPropertyValue("--arc-palette-title"),o=qoe(),i=yn(G6),c=yn(q6);let u;return r.internalReferrer?u=r.internalReferrer:u=document.referrer,(globalThis.matchMedia("(display-mode: standalone)").matches||globalThis.matchMedia("(display-mode: minimal-ui)").matches||globalThis.navigator?.standalone)&&(r.isStandaloneApp=!0),{eventData:r,pathnameAndParams:s,visitorId:i,isArcBrowser:a,sessionId:c,deviceInfo:o,referrer:u}};function Koe(e){const{name:t,data:n,session:r,source:s}=e,{eventData:a,visitorId:o,sessionId:i,pathnameAndParams:c,deviceInfo:u,referrer:d,isArcBrowser:m}=a8e(n,r);return c.startsWith("/search/render")?void 0:(t8e.NEXT_PUBLIC_EVENT_DEBUG_PRINT&&ee.log(`[trackEvent] ${t}: `,a),{event_name:t,event_data:a,visitor_id:o??"",session_id:i??"",url:c,referrer:d,language:Jc(),screen:OS(),hostname:globalThis.location.hostname,device_info:u,is_arc_browser:m,source:s})}function Uo(e){const t=Koe(e);t&&(Goe(t)||(uo("web.browser.analytics.send_event_failed"),$oe().then(n=>{n.send(JSON.stringify(t))})))}function o8e(e){const t=e.map(n=>Koe(n)).filter(n=>n!==void 0);t.length!==0&&(Goe(t)||(uo("web.browser.analytics.send_event_failed"),$oe().then(n=>{n.send(JSON.stringify(t))})))}function OS(){return`${globalThis.screen.width}x${globalThis.screen.height}`}const I$=Object.freeze({});function Ys(){return typeof window<"u"?window.__PPL_CONFIG__??I$:I$}const Yoe=cl("DeviceContext",{isChrome:!1,isMobile:!1,isAndroid:!1,isIOS:!1,isMacOS:!1,isFirefox:!1,isMobileSafari:!1,isWindowsOS:!1,isWindowsApp:!1,isMetaBrowser:!1,isSamsungBrowser:!1,userAgent:""}),Wt=()=>{const e=f.useContext(Yoe);if(!e)throw new Error("useDevice must be used within DeviceContext");return e},Ty={default:{termsOfService:"https://www.perplexity.ai/hub/legal/terms-of-service",enterpriseTermsOfService:"https://www.perplexity.ai/hub/legal/enterprise-terms-of-service",privacyPolicy:"https://www.perplexity.ai/hub/legal/privacy-policy"},"ja-JP":{termsOfService:"https://www.perplexity.ai/ja/hub/legal/terms-of-service",privacyPolicy:"https://www.perplexity.ai/ja/hub/legal/privacy-policy"}},bd=4e4,Qoe=2e3,j$=4e3,O$=50,L$=1e3,XDt=1500,ZDt=500,JDt=100,i8e=10,l8e=4,eFt=10,c8e=5e3,u8e=50,D$=10,F$=1024*1024,Xoe=3,Zoe=500,Nm="https://ppl-ai-public.s3.amazonaws.com/static/img/pplx-default-preview.png",ni="2.18",Joe="default",wO="entropy",Am="windowsapp",tFt="autodetect",U$=["audio/midi","audio/x-midi","application/msword","application/zip","application/x-tar","application/x-bzip","application/vnd.rar"],SO=[".bash",".bat",".c",".coffee",".conf",".config",".cpp",".cs",".css",".csv",".cxx",".dart",".diff",".docx",".fish",".go",".h",".hpp",".htm",".html",".in",".ini",".ipynb",".java",".js",".json",".jsx",".ksh",".kt",".kts",".latex",".less",".log",".lua",".m",".markdown",".md",".pdf",".php",".pl",".pm",".pptx",".py",".r",".R",".rb",".rmd",".rs",".scala",".sh",".sql",".swift",".t",".tex",".text",".toml",".ts",".tsx",".txt",".xlsx",".xml",".yaml",".yml",".zsh"],d8e=SO.join(","),eie=[".jpeg",".jpg",".jpe",".jp2",".png",".gif",".bmp",".tiff",".tif",".svg",".webp",".ico",".avif",".heic",".heif"],tie=[".mp3",".wav",".aiff",".ogg",".flac",".mp4",".mpeg",".mov",".avi",".flv",".mpg",".webm",".wmv",".3gp"],f8e=eie.join(","),nie=[...SO,...eie],m8e=nie.join(","),h8e=[...SO,...tie],p8e=h8e.join(","),g8e=[...nie,...tie],y8e=g8e.join(","),nFt="",rFt=pt.PUBLIC_READ,rie=pt.PRIVATE_READ,a2=pt.PRIVATE_READ,sFt="https://chrome.google.com/webstore/detail/perplexity-ai-search/bnaffjbjpgiagpondjlnneblepbdchol",aFt="https://pplx.ai/mac",oFt="https://www.perplexity.ai/comet",B$="onboarding",V$="uninstall_default_search_extension",v8e="edu_referral_code",x8e="utm_source",b8e="backtoschool",_8e="backtoschool_usc",w8e="backtoschool_cal",S8e="iitm",C8e="krstudents",mc="login-source",$$="login-new",E8e="model_id",W$="max",CO=5,M8e="/static/images/back-to-school-splash.png",T8e="back-to-school",iFt="/static/images/search-like-never-before-square.jpg",lFt="search-like-never-before",cFt="/static/images/file-search-upsell-demo.png",uFt="file-search-upsell-demo",k8e="/static/images/sidebar-upsell-bg-light.svg",N8e="/static/images/sidebar-upsell-bg-dark.svg",H$="App Promo Background",dFt="Perplexity",EO="/static/images/data-connectors/factset/factset-avatar.svg",MO="FactSet",fFt="perplexity@factset.com",TO="/static/images/data-connectors/crunchbase/crunchbase-avatar.svg",kO="Crunchbase",LS="/static/images/data-connectors/wiley/wiley-avatar.svg",NO="Wiley",sie="Finance",mFt="/static/images/data-connectors/finance/finance-avatar.svg",DS="/static/images/data-connectors/google/google-drive-avatar.svg",A8e="/static/images/data-connectors/google/gmail-avatar.svg",P8e="Gmail",lh="Google Drive",FS="/static/images/data-connectors/google/gcal-gmail-avatar.svg",_v="Gmail with Calendar",R8e="Microsoft",US="/static/images/data-connectors/microsoft/onedrive-avatar.svg",ch="OneDrive",BS="/static/images/data-connectors/microsoft/sharepoint-avatar.svg",uh="SharePoint",AO="/static/images/data-connectors/dropbox/dropbox-avatar.svg",dh="Dropbox",VS="/static/images/data-connectors/box/box-avatar.svg",$S="Box",wv="/static/images/data-connectors/notion/notion-avatar.svg",hu="Notion",PO="/static/images/data-connectors/linear/linear-avatar.svg",fh="Linear",RO="/static/images/data-connectors/slack/slack-avatar.svg",Sv="Slack",I8e="/static/images/data-connectors/sidebar-connectors-ad-upsell.png",hFt="https://r2cdn.perplexity.ai/hotels/hotel-pro-banner.jpg",pFt="Save on hotel bookings with Perplexity Pro",aie="submit-query",fm="search-model-change",Bc="source-selection-change",o2="windows-app",z$=o2,j8e="If4YwAeizGHdB3eOhX2JxYcjeCgy0N9c",Cv=`${o2}/ask/input`,gFt="https://dl.todesktop.com/25020447d4kq915",B3="pplx.windowsApp.microphonePermission",G$={silenceThreshold:30,silenceDuration:5e3},MA="pplx.upload-privacy-accepted",oie=["answer_modes","media_items","knowledge_cards","inline_entity_cards","place_widgets","finance_widgets","sports_widgets","shopping_widgets","jobs_widgets","search_result_widgets","clarification_responses","inline_images","inline_assets","inline_finance_widgets","placeholder_cards","diff_blocks","inline_knowledge_cards","entity_group_v2","refinement_filters"],q$=["google_drive","onedrive","sharepoint","dropbox","box","notion"],O8e=["google_drive","onedrive","sharepoint","dropbox","box"],TA="Outlook",iie="/static/images/data-connectors/microsoft/outlook-avatar.svg";let K$=0;const IO=1e6;class mg{eventTime=-1;setOnce(){return this.eventTime==-1?(this.eventTime=Date.now(),!0):!1}timeSinceTimestamp(t){return this.eventTime===-1||t==null?-1:this.eventTime<t?(ee.log(`TimeMarker.timeSinceTimestamp found inconsistency: mytime ${this.eventTime}, old: ${t}`),-1):this.eventTime-t}timeBeforeTimestamp(t){return this.eventTime===-1||t==null?-1:this.eventTime>t?(ee.log(`TimeMarker.timeBeforeTimestamp found inconsistency: mytime ${this.eventTime}, next: ${t}`),-1):t-this.eventTime}wasSet(){return this.eventTime!=-1}}const L8e={firstServerResponseReceived:!1,firstLLMTokenReceived:!1,isPerplexityBrowser:!1},ri=new Map,D8e=(e,{hasLLMToken:t,hasSearchResults:n,hasSources:r},s)=>{F8e(e,s),U8e(e,t,s),B8e(e,n),V8e(e,r)},F8e=(e,t)=>{const n=ri.get(e);if(!n||n.firstServerResponseReceived||!n.submitTimestamp||!n.startFirstServerResponseMarker?.setOnce())return;n.firstServerResponseReceived=!0;const{queryStr:r,isFollowup:s,queryParams:a}=n,o=cie(e);o>0&&Uo({name:"query first server response",data:{startFirstServerResponseElapsed:o,queryStr:r,isFollowup:s,mode:a?.mode??"unknown",isPerplexityBrowser:n.isPerplexityBrowser},session:t??void 0})},U8e=(e,t,n)=>{const r=ri.get(e);if(!r||r.firstLLMTokenReceived||!t||!r.startLLMTokenMarker?.setOnce())return;r.firstLLMTokenReceived=!0;const{queryStr:s,isFollowup:a,queryParams:o}=r,i=uie(e);i>0&&Uo({name:"query first llm token",data:{startLLMTokenElapsed:i,queryStr:s,isFollowup:a,mode:o?.mode??"unknown",isPerplexityBrowser:r.isPerplexityBrowser},session:n??void 0})},B8e=(e,t)=>{const n=ri.get(e);if(n){if(!t)return}else return;n.firstSearchResultsMarker?.setOnce()},V8e=(e,t)=>{const n=ri.get(e);if(n){if(!t)return}else return;n.firstSourcesMarker?.setOnce()},yFt=e=>{const t=ri.get(e);t&&t.firstSourcesRenderMarker?.setOnce()},$8e=(e,t,n,r)=>{r=r??"unknown",Il("web.frontend.start_stream_elapsed",{startTime:e,duration:t*IO,isFollowup:n,mode:r})},W8e=(e,t,n,r)=>{r=r??"unknown",Il("web.frontend.start_llm_token_elapsed",{startTime:e,duration:t*IO,isFollowup:n,mode:r})},H8e=(e,t,n,r)=>{r=r??"unknown",Il("web.frontend.first_search_result_elapsed",{startTime:e,duration:t*IO,isFollowup:n,mode:r})},z8e=({latencies:e,isMobile:t})=>{uo("web.frontend.autosuggest_latency",{latencies:e,isMobile:t})},Y$=(e,{session:t,source:n,name:r})=>{const s=ri.get(e);s&&(s.endStreamTimestamp||(s.endStreamTimestamp=Date.now(),Uo({name:r,data:s,session:t??void 0,source:n})))},lie=(e,t,n,r,s)=>{const a=ri.get(e);if(!a)return;a.finalizedTimestamp=Date.now();let o=-1;a.submitTimestamp&&(o=a.finalizedTimestamp-a.submitTimestamp);const i=cie(e);i>0&&$8e(a.submitTimestamp??0,i,a.isFollowup??!1,a?.queryParams?.mode);const c=q8e(e);c>0&&H8e(a.submitTimestamp??0,c,a.isFollowup??!1,a?.queryParams?.mode);const u=uie(e);u>0&&W8e(a.submitTimestamp??0,u,a.isFollowup??!1,a?.queryParams?.mode);let d=-1;a.endStreamTimestamp&&a.startFirstServerResponseMarker&&(d=a.startFirstServerResponseMarker.timeBeforeTimestamp(a.endStreamTimestamp));const m={...a,totalElapsed:o,startStreamElapsed:i,startFirstServerResponseElapsed:i,startLLMTokenElapsed:u,totalStreamingElapsed:d,submissionResult:t,entryUUID:n?.backend_uuid,displayModel:n?.display_model,stepType:n?.step_type,isPerplexityBrowser:a.isPerplexityBrowser,source:void 0};Uo({name:`${t} response`,data:m,session:r??void 0,source:void 0})},vFt=(e,t,n,r)=>{lie(e,"FAILED",t,n)},xFt=(e,t,n,r)=>{lie(e,"SUCCESSFUL",t,n)},G8e=(e,{name:t,queryStr:n,queryParams:r,isFollowup:s,frontendUUID:a,isPerplexityBrowser:o,session:i,browserVersion:c,source:u,connectors:d,mentions:m})=>{K$+=1;const h={...L8e};h.submissionType=t,h.submitTimestamp=Date.now(),h.queryStr=n,h.queryParams=r,h.frontendUUID=a,h.submissionCount=K$,h.isFollowup=s,h.startFirstServerResponseMarker=new mg,h.startLLMTokenMarker=new mg,h.firstSearchResultsMarker=new mg,h.firstSourcesMarker=new mg,h.firstSourcesRenderMarker=new mg,h.isPerplexityBrowser=o,h.browserVersion=c,h.enabledConnectors=d?.enabled,h.disabledConnectors=d?.disabled;const p=m?.filter(v=>v.type==="tab")??[];h.attachedTabsDomains=[...new Set(p.map(v=>new URL(v.url).host))],h.attachedTabsCount=p.length;const g=m?.filter(v=>v.type==="space")??[];h.mentionedSpacesCount=g.length;const y=m?.filter(v=>v.type==="shortcut")??[];h.mentionedShortcutsCount=y.length,ri.set(e,h),Uo({name:"submit query",data:h,session:i??void 0,source:u})},cie=e=>{const t=ri.get(e);let n=-1;return t&&(n=t.startFirstServerResponseMarker?.timeSinceTimestamp(t.submitTimestamp)??-1),n},uie=e=>{const t=ri.get(e);let n=-1;return t&&(n=t.startLLMTokenMarker?.timeSinceTimestamp(t.submitTimestamp)??-1),n},q8e=e=>{const t=ri.get(e);let n=-1;return t&&(n=t.firstSearchResultsMarker?.timeSinceTimestamp(t.submitTimestamp)??-1),n},Te=()=>{const e=Ot(),{isWindowsApp:t}=Wt(),n=f.useRef(new Set),r=f.useCallback((i,c={})=>{const u=Ys(),d=t?Am:u.erp??void 0;Uo({name:i,data:c,source:d,session:e??void 0})},[t,e]),s=f.useCallback(i=>{const c=i.map(({name:u,data:d})=>({name:u,data:d,session:e??void 0}));o8e(c)},[e]),a=f.useCallback((i,c)=>{Uo({name:i,data:c,session:e??void 0})},[e]),o=f.useCallback((i,c={})=>{n.current.has(i)||(n.current.add(i),Uo({name:i,data:c,session:e??void 0}))},[e]);return f.useMemo(()=>({trackEvent:r,trackEventTyped:a,trackEventOnce:o,trackEventBatch:s}),[r,s,a,o])};class Me extends T0{name="ApiClientsError"}const K8e=/\{[^{}]+\}/g,Y8e=()=>typeof process=="object"&&Number.parseInt(process?.versions?.node?.substring(0,2))>=18&&process.versions.undici;function Q8e(){return Math.random().toString(36).slice(2,11)}function X8e(e){let{baseUrl:t="",Request:n=globalThis.Request,fetch:r=globalThis.fetch,querySerializer:s,bodySerializer:a,headers:o,requestInitExt:i=void 0,...c}={...e};i=Y8e()?i:void 0,t=X$(t);const u=[];async function d(m,h){const{baseUrl:p,fetch:g=r,Request:y=n,headers:v,params:x={},parseAs:b="json",querySerializer:_,bodySerializer:w=a??J8e,body:S,...C}=h||{};p&&(t=X$(p));let E=typeof s=="function"?s:Q$(s);_&&(E=typeof _=="function"?_:Q$({...typeof s=="object"?s:{},..._}));const M=S===void 0?void 0:w(S),T=M===void 0||M instanceof FormData?{}:{"Content-Type":"application/json"},I={redirect:"follow",...c,...C,body:M,headers:tOe(T,o,v,x.header)};let j,N,P=new n(eOe(m,{baseUrl:t,params:x,querySerializer:E}),I),R;for(const O in C)O in P||(P[O]=C[O]);if(u.length){j=Q8e(),N=Object.freeze({baseUrl:t,fetch:g,parseAs:b,querySerializer:E,bodySerializer:w});for(const O of u)if(O&&typeof O=="object"&&typeof O.onRequest=="function"){const L=await O.onRequest({request:P,schemaPath:m,params:x,options:N,id:j});if(L)if(L instanceof n)P=L;else if(L instanceof Response){R=L;break}else throw new Error("onRequest: must return new Request() or Response() when modifying the request")}}if(!R){try{R=await g(P,i)}catch(O){let L=O;if(u.length)for(let F=u.length-1;F>=0;F--){const U=u[F];if(U&&typeof U=="object"&&typeof U.onError=="function"){const V=await U.onError({request:P,error:L,schemaPath:m,params:x,options:N,id:j});if(V){if(V instanceof Response){L=void 0,R=V;break}if(V instanceof Error){L=V;continue}throw new Error("onError: must return new Response() or instance of Error")}}}if(L)throw L}if(u.length)for(let O=u.length-1;O>=0;O--){const L=u[O];if(L&&typeof L=="object"&&typeof L.onResponse=="function"){const F=await L.onResponse({request:P,response:R,schemaPath:m,params:x,options:N,id:j});if(F){if(!(F instanceof Response))throw new Error("onResponse: must return new Response() when modifying the response");R=F}}}}if(R.status===204||R.headers.get("Content-Length")==="0")return R.ok?{data:void 0,response:R}:{error:void 0,response:R};if(R.ok)return b==="stream"?{data:R.body,response:R}:{data:await R[b](),response:R};let k=await R.text();try{k=JSON.parse(k)}catch{}return{error:k,response:R}}return{request(m,h,p){return d(h,{...p,method:m.toUpperCase()})},GET(m,h){return d(m,{...h,method:"GET"})},PUT(m,h){return d(m,{...h,method:"PUT"})},POST(m,h){return d(m,{...h,method:"POST"})},DELETE(m,h){return d(m,{...h,method:"DELETE"})},OPTIONS(m,h){return d(m,{...h,method:"OPTIONS"})},HEAD(m,h){return d(m,{...h,method:"HEAD"})},PATCH(m,h){return d(m,{...h,method:"PATCH"})},TRACE(m,h){return d(m,{...h,method:"TRACE"})},use(...m){for(const h of m)if(h){if(typeof h!="object"||!("onRequest"in h||"onResponse"in h||"onError"in h))throw new Error("Middleware must be an object with one of `onRequest()`, `onResponse() or `onError()`");u.push(h)}},eject(...m){for(const h of m){const p=u.indexOf(h);p!==-1&&u.splice(p,1)}}}}function WS(e,t,n){if(t==null)return"";if(typeof t=="object")throw new Error("Deeply-nested arrays/objects arent supported. Provide your own `querySerializer()` to handle these.");return`${e}=${n?.allowReserved===!0?t:encodeURIComponent(t)}`}function die(e,t,n){if(!t||typeof t!="object")return"";const r=[],s={simple:",",label:".",matrix:";"}[n.style]||"&";if(n.style!=="deepObject"&&n.explode===!1){for(const i in t)r.push(i,n.allowReserved===!0?t[i]:encodeURIComponent(t[i]));const o=r.join(",");switch(n.style){case"form":return`${e}=${o}`;case"label":return`.${o}`;case"matrix":return`;${e}=${o}`;default:return o}}for(const o in t){const i=n.style==="deepObject"?`${e}[${o}]`:o;r.push(WS(i,t[o],n))}const a=r.join(s);return n.style==="label"||n.style==="matrix"?`${s}${a}`:a}function fie(e,t,n){if(!Array.isArray(t))return"";if(n.explode===!1){const a={form:",",spaceDelimited:"%20",pipeDelimited:"|"}[n.style]||",",o=(n.allowReserved===!0?t:t.map(i=>encodeURIComponent(i))).join(a);switch(n.style){case"simple":return o;case"label":return`.${o}`;case"matrix":return`;${e}=${o}`;default:return`${e}=${o}`}}const r={simple:",",label:".",matrix:";"}[n.style]||"&",s=[];for(const a of t)n.style==="simple"||n.style==="label"?s.push(n.allowReserved===!0?a:encodeURIComponent(a)):s.push(WS(e,a,n));return n.style==="label"||n.style==="matrix"?`${r}${s.join(r)}`:s.join(r)}function Q$(e){return function(n){const r=[];if(n&&typeof n=="object")for(const s in n){const a=n[s];if(a!=null){if(Array.isArray(a)){if(a.length===0)continue;r.push(fie(s,a,{style:"form",explode:!0,...e?.array,allowReserved:e?.allowReserved||!1}));continue}if(typeof a=="object"){r.push(die(s,a,{style:"deepObject",explode:!0,...e?.object,allowReserved:e?.allowReserved||!1}));continue}r.push(WS(s,a,e))}}return r.join("&")}}function Z8e(e,t){let n=e;for(const r of e.match(K8e)??[]){let s=r.substring(1,r.length-1),a=!1,o="simple";if(s.endsWith("*")&&(a=!0,s=s.substring(0,s.length-1)),s.startsWith(".")?(o="label",s=s.substring(1)):s.startsWith(";")&&(o="matrix",s=s.substring(1)),!t||t[s]===void 0||t[s]===null)continue;const i=t[s];if(Array.isArray(i)){n=n.replace(r,fie(s,i,{style:o,explode:a}));continue}if(typeof i=="object"){n=n.replace(r,die(s,i,{style:o,explode:a}));continue}if(o==="matrix"){n=n.replace(r,`;${WS(s,i)}`);continue}n=n.replace(r,o==="label"?`.${encodeURIComponent(i)}`:encodeURIComponent(i))}return n}function J8e(e){return e instanceof FormData?e:JSON.stringify(e)}function eOe(e,t){let n=`${t.baseUrl}${e}`;t.params?.path&&(n=Z8e(n,t.params.path));let r=t.querySerializer(t.params.query??{});return r.startsWith("?")&&(r=r.substring(1)),r&&(n+=`?${r}`),n}function tOe(...e){const t=new Headers;for(const n of e){if(!n||typeof n!="object")continue;const r=n instanceof Headers?n.entries():Object.entries(n);for(const[s,a]of r)if(a===null)t.delete(s);else if(Array.isArray(a))for(const o of a)t.append(s,o);else a!==void 0&&t.set(s,a)}return t}function X$(e){return e.endsWith("/")?e.substring(0,e.length-1):e}function nOe(e){return X8e(e)}const Ku="X-Perplexity-Request-Reason",rOe=()=>{const e=nOe({baseUrl:"https://perplexity.ai/",fetch:async t=>{const n=new URL(t.url),r=n.pathname,s=n.searchParams,a=await t.text(),o=t.headers.get(Ku)??"typedRestAsyncClient";return er({urlPath:s.size>0?`${r}?${s.toString()}`:r,method:t.method,body:a||void 0,headers:t.headers,timeoutMs:t.timeoutMs,numRetries:t.numRetries,backOffTime:t.backOffTime,reason:o,baseUrlOverride:t.baseUrlOverride,includeCredentials:t.includeCredentials})}});return{...e,GET:(t,n,r)=>e.GET(t,{...r||{},headers:{...r?.headers||{},[Ku]:n}}),POST:(t,n,r)=>e.POST(t,{...r||{},headers:{...r?.headers||{},[Ku]:n}}),PUT:(t,n,r)=>e.PUT(t,{...r||{},headers:{...r?.headers||{},[Ku]:n}}),PATCH:(t,n,r)=>e.PATCH(t,{...r||{},headers:{...r?.headers||{},[Ku]:n}}),DELETE:(t,n,r)=>e.DELETE(t,{...r||{},headers:{...r?.headers||{},[Ku]:n}}),SSE:(t,n,{path:r,...s})=>(r&&Object.entries(r).forEach(([a,o])=>{t=t.replace(`{${a}}`,o)}),I3e({url:t,...s||{},headers:{...s?.headers||{},[Ku]:n}}))}},ne=rOe(),nn={DEFAULT:1200,LOW:2500,MEDIUM:5e3,HIGH:1e4,VERY_HIGH:3e4,EXREMELY_HIGH:9e4,NONE:0},hc=2,je=e=>{const t=e?.productionMs??1500;e?.devMs;const n=e?.clientSideMs??5e3;return typeof window<"u"?n:t},bFt=e=>["get_prices",{subscription_tier:e}],HS=()=>["get_user_settings",{}],_Ft=()=>["get_user_site_instructions",{}],kA=()=>["get_user_profile",{}],sOe=()=>["get_user_promotions",{}],aOe=()=>["get_government_origin",{}],oOe=e=>["get_special_profile",{profile_name:e}],iOe=()=>["get_homepage_upsells",{}],wFt=e=>["get_related_pages",{uuid:e}],kl=(e="you")=>["list_feed",{topic:e}],mie=()=>["discover_topics",{}],lp=()=>["userOrgData",{}],jO=e=>["get_collection",{collection_slug:e.slice(-22)}],SFt=()=>["shoppingOrders",{}],i2=()=>["userTryOnPhoto",{}],Yu=()=>["shoppingTryOnBackgroundGeneration"],V3=e=>["productTryOn",{productImageUrl:e}],l2="getOrganizationUsers",CFt=e=>e?[l2,{query:e}]:[l2],EFt=e=>e?[l2,"members",e]:[l2,"members"],MFt=()=>["getOrganizationTrialCounts"],lOe=e=>["get_thread_by_uuid",{uuid:e}],cOe=e=>["get_article_by_uuid",{uuid:e}],TFt=e=>["get_article_by_slug",{slug:e}],$3=()=>["customer_shopping_info",{}],OO=e=>["articleResults",{frontend_context_uuid:e}],Z$=e=>["article-slug",e],uOe=(e,t=!1)=>[t?"list_file_directory_infinite":"list_file_directory",e.file_repository_type,e.owner_id],zS=(e,t,n,r=0,s,a=!1)=>[...uOe({file_repository_type:e,owner_id:t},a),n,...a?[]:[r],s],hie=(e,t=!1)=>[t?"connector-files-infinite":"connector-files",e],dOe=e=>["get_sharepoint_sites_infinite",e??{}],kFt=()=>["get_filters",{}],LO=e=>e?["memories",e]:["memories"],NFt=(e={})=>["hotelBookings",e],AFt=e=>["pro_perks_codes",e],PFt=()=>["pro_perks"],RFt=()=>["customer_billing_info",{}],IFt=()=>["travel-tile-data"],DO=(e,t)=>["file_exists",e,...t?[t]:[]],_x=e=>["download-image-url",...e?[e]:[]],jFt=()=>["notifications-preferences"],Zf=e=>["memory-feedback",e],Jf=e=>["entry-feedback",e],FO=e=>["user-task",e],s_=e=>["user-tasks",...e?[e]:[]],fOe=()=>["academic-tile-data"],mOe=()=>["academic-primer-queries"],hOe=()=>["check-edu-institution"],ny=()=>["list_spaces_mentions"],pOe=()=>["upgrade-subscription-preview"],gOe=()=>["task_shortcuts_mentions"],OFt=e=>["task_shortcuts_copy",e],yOe=e=>["task_shortcuts_paste",e],Hc=()=>["app-notifications"],vOe=()=>[...Hc(),"unread-count"],LFt=()=>["paypal-subscription-details"];var hg={},J$;function xOe(){if(J$)return hg;J$=1,Object.defineProperty(hg,"__esModule",{value:!0}),hg.parse=o,hg.serialize=u;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,a=(()=>{const h=function(){};return h.prototype=Object.create(null),h})();function o(h,p){const g=new a,y=h.length;if(y<2)return g;const v=p?.decode||d;let x=0;do{const b=h.indexOf("=",x);if(b===-1)break;const _=h.indexOf(";",x),w=_===-1?y:_;if(b>w){x=h.lastIndexOf(";",b-1)+1;continue}const S=i(h,x,b),C=c(h,b,S),E=h.slice(S,C);if(g[E]===void 0){let M=i(h,b+1,w),T=c(h,w,M);const I=v(h.slice(M,T));g[E]=I}x=w+1}while(x<y);return g}function i(h,p,g){do{const y=h.charCodeAt(p);if(y!==32&&y!==9)return p}while(++p<g);return g}function c(h,p,g){for(;p>g;){const y=h.charCodeAt(--p);if(y!==32&&y!==9)return p+1}return g}function u(h,p,g){const y=g?.encode||encodeURIComponent;if(!e.test(h))throw new TypeError(`argument name is invalid: ${h}`);const v=y(p);if(!t.test(v))throw new TypeError(`argument val is invalid: ${p}`);let x=h+"="+v;if(!g)return x;if(g.maxAge!==void 0){if(!Number.isInteger(g.maxAge))throw new TypeError(`option maxAge is invalid: ${g.maxAge}`);x+="; Max-Age="+g.maxAge}if(g.domain){if(!n.test(g.domain))throw new TypeError(`option domain is invalid: ${g.domain}`);x+="; Domain="+g.domain}if(g.path){if(!r.test(g.path))throw new TypeError(`option path is invalid: ${g.path}`);x+="; Path="+g.path}if(g.expires){if(!m(g.expires)||!Number.isFinite(g.expires.valueOf()))throw new TypeError(`option expires is invalid: ${g.expires}`);x+="; Expires="+g.expires.toUTCString()}if(g.httpOnly&&(x+="; HttpOnly"),g.secure&&(x+="; Secure"),g.partitioned&&(x+="; Partitioned"),g.priority)switch(typeof g.priority=="string"?g.priority.toLowerCase():void 0){case"low":x+="; Priority=Low";break;case"medium":x+="; Priority=Medium";break;case"high":x+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${g.priority}`)}if(g.sameSite)switch(typeof g.sameSite=="string"?g.sameSite.toLowerCase():g.sameSite){case!0:case"strict":x+="; SameSite=Strict";break;case"lax":x+="; SameSite=Lax";break;case"none":x+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${g.sameSite}`)}return x}function d(h){if(h.indexOf("%")===-1)return h;try{return decodeURIComponent(h)}catch{return h}}function m(h){return s.call(h)==="[object Date]"}return hg}xOe();var W3={};const bOe=(e,t)=>{try{let n=new URL("https://www.perplexity.ai");return typeof window>"u"?t&&W3.NEXTAUTH_UNSAFE_TRUST_HOST_HEADERS?n=new URL(`https://${t}`):W3.NEXTAUTH_URL&&(n=new URL(W3.NEXTAUTH_URL)):n=new URL(window.location.href),new URL(e,n).hostname===n.hostname}catch(n){return ee.warn(n),!1}},_Oe=({redirect:e,hostname:t})=>{const n=typeof e=="string"?e:e?.[0];return!n||typeof n!="string"?"/":bOe(n,t)?n:"/"},UO="pplx.chosen-locale",GS="pplx.is-incognito",pie="pplx.is-discover-interest-box-dismissed",gie="pplx.is-enterprise-ad-dismissed",NA="pplx.la-status",wOe="pplx.visitor-id",SOe="pplx.session-id",yie="pplx.mweb-splash-page-dismissed",vie="pplx.is-autosuggest-disabled",xie="pplx.homepage-widgets-disabled",bie="pplx.source-selection-v3",_ie="pplx.sports-ios-notification-cta",eW="pplx.prefers-metric",wie="pplx.welcome-back-gate-impressions",Sie="pplx.share-gate-impressions",Cie="pplx.sidebar-connectors-ad-dismissed",Eie="pplx.is-student-referral-banner-dismissed",Mie="pplx.is-student-space-upsell-dismissed",Tie="pplx.student-space-upsell-impressions",kie="pplx.default-search-session",Nie="pplx.utm-source",Aie="pplx.pt",Pie="pplx.personal-search-badge-seen",Rie="pplx.tasks-settings-seen",AA="pplx.search-mode",Iie="pplx.search-models-v4",jie="pplx.max-assistant-mode-enabled",vr=400,COe=7;function H3(...e){qS("[email_signin_flow] ",...e)}function qS(...e){const t=new Date().toISOString();ee.log(`[${t}] `,...e)}function Oie(...e){const t=new Date().toISOString();ee.warn(`[${t}] `,...e)}const EOe=e=>{qt(UO,e,{expires:vr})},MOe=()=>yn(UO),TOe=()=>{Fd(UO)},Lie=e=>{qt(GS,String(e),{})},kOe=(e,t)=>{qt(yie,String(e),{expires:t})},NOe=e=>{qt(pie,String(e),{expires:vr})},AOe=e=>{qt(NA,e,{})},POe=e=>{qt(gie,String(e),{expires:vr})},ROe=e=>{qt(vie,String(e),{expires:vr})},IOe=e=>{qt(xie,String(e),{expires:vr})},jOe=e=>{qt(wie,String(e),{expires:vr})},OOe=e=>{qt(Sie,String(e),{expires:vr})},LOe=e=>{qt(_ie,String(e),{expires:vr})},z3=(e,t)=>{const n=`${bie}-${t}`;qt(n,JSON.stringify(e),{expires:COe})},DOe=e=>{const t=`${bie}-${e}`,n=yn(t);return n?JSON.parse(n):null},FOe=()=>!(yn(lv)??!0),yf=()=>yn(wOe)??null,UOe=()=>yn(SOe)??null,BOe=e=>{qt(Cie,String(e),{expires:vr})},VOe=()=>yn("pplx.has-discovered-space-mentions")==="true",$Oe=()=>{qt("pplx.has-discovered-space-mentions","true",{expires:vr})},WOe=e=>{qt(Eie,String(e),{expires:4})},HOe=e=>{qt(Mie,String(e),{expires:vr})},zOe=e=>{qt(Tie,String(e),{expires:vr})},Die=()=>$ne().queryCount>30,BO=()=>{const e=yn(Pie);if(!e)return{sidebar:!1,settingsSidebar:!1,personalize:!1};try{return JSON.parse(e)}catch{return{sidebar:!1,settingsSidebar:!1,personalize:!1}}},GOe=(e,t)=>{const r={...BO(),[e]:t};qt(Pie,JSON.stringify(r),{expires:vr})},qOe=()=>yn(Rie)==="true",KOe=e=>{qt(Rie,String(e),{expires:vr})},YOe=e=>{qt(kie,e)},QOe=()=>yn(kie),XOe=e=>{qt(Nie,e)},ZOe=()=>yn(Nie),JOe=()=>yn(Aie),eLe=e=>{qt(Aie,e)},KS=(e,t)=>{const n=t?.detail,r=n&&typeof n=="object"&&"error_code"in n&&n.error_code||e;return new Me("API_CLIENTS_ERROR",{message:r,cause:t,details:{errorDetail:n}})},Fie=async({reason:e})=>{try{const{error:t,data:n}=await ne.GET("/rest/user/promotions",e,{timeoutMs:je({productionMs:2e3})});if(t)throw new Me("API_CLIENTS_ERROR",{message:"Failed to fetch user promotions",cause:t});return n}catch{return{campaign:null,offer:null,institution:null}}},VO=async({locale:e,headers:t,reason:n})=>{let r="";e&&(r=`?locale=${e}`);try{const a=await(await er({urlPath:`/rest/billing/get-customer-portal${r}`,method:"GET",headers:t,timeoutMs:3e3,reason:n})).json();return a.status!=="success"||a.url===null||a.url===""?null:a.url}catch{return null}};async function Uie({currency:e,reason:t,subscriptionTier:n}){const{error:r,data:s}=await ne.GET("/rest/stripe/prices",t,{timeoutMs:nn.NONE,params:{query:{currency:e,subscription_tier:n}}});if(r)throw new Me("API_CLIENTS_ERROR",{message:"Failed to fetch prices",cause:r});return s}const PA=({currency:e,reason:t,subscriptionTier:n})=>Ke({queryKey:["prices",e,n],queryFn:()=>Uie({currency:e,reason:t,subscriptionTier:n}),gcTime:5*60*1e3,staleTime:2*60*1e3}),Bie=async({request:e,reason:t})=>{const n=OS(),r=yf(),s={"content-type":"application/json",...n?{"Screen-Dimensions":n}:{}};try{const o=await(await er({urlPath:"/rest/stripe/checkout-session",method:"POST",body:JSON.stringify({referral_code:e.referralCode,discount_code:e.discountCode,origin:e.origin,tier:e.tier,locale:e.locale,visitor_id:r,embedded:e.embedded,subscription_tier:e.subscriptionTier,success_redirect_url:e.success_redirect_url}),timeoutMs:5e3,headers:s,reason:t})).json();return{subscriptionStatus:o.subscription_status,status:o.status,url:o.url,clientSecret:o.client_secret,errorCode:o.error_code,subscriptionTier:o.subscription_tier}}catch{return}},tLe=async({request:e,headers:t,reason:n})=>{try{return{clientSecret:(await(await er({urlPath:"/rest/stripe/create-setup-intent",method:"POST",body:JSON.stringify({is_updating:e.isUpdating}),timeoutMs:je({productionMs:2500}),headers:{...t,"content-type":"application/json"},reason:n})).json()).client_secret}}catch{return}},nLe=async({request:e,headers:t,reason:n})=>{if(e.orgId)try{return{clientSecret:(await(await er({urlPath:`/rest/pplx-api/v2/groups/${e.orgId}/setup-intent`,method:"POST",timeoutMs:je({productionMs:2500}),headers:{...t,"content-type":"application/json"},reason:n})).json()).client_secret}}catch{return}},rLe=async({headers:e,reason:t})=>{try{const r=await(await er({urlPath:"/rest/stripe/create-setup-intent-and-customer-session",method:"POST",timeoutMs:je({productionMs:3e3}),headers:{...e,"content-type":"application/json"},reason:t})).json();return{customerId:r.customer_id,clientSecret:r.client_secret,customerSessionClientSecret:r.customer_session_client_secret}}catch{return}},sLe=async({reason:e})=>{const t="createBillingCustomer";try{return await(await er({urlPath:"/rest/pplx-api/create-billing-customer",method:"POST",timeoutMs:9e3,headers:{"content-type":"application/json"},reason:e})).json()}catch(n){throw ee.log(`Error in ${t}:`,n),n}},aLe=async({credits:e,apiOrgId:t,reason:n})=>{const{error:r,data:s}=await ne.POST("/rest/pplx-api/v2/groups/{api_org_id}/topup",n,{timeoutMs:5e3,headers:{"content-type":"application/json"},params:{path:{api_org_id:t}},body:{credits:e}});if(r)throw new Me("API_CLIENTS_ERROR",{message:"Failed to topup customer balance",cause:r});return s},oLe=async({amount:e,apiOrgId:t,threshold:n=2,enabled:r=!0,reason:s})=>{const{error:a,data:o}=await ne.POST("/rest/pplx-api/v2/groups/{api_org_id}/auto-topup",s,{timeoutMs:5e3,headers:{"content-type":"application/json"},params:{path:{api_org_id:t}},body:{amount:e,threshold:n,enabled:r}});if(a)throw new Me("API_CLIENTS_ERROR",{message:"Failed to auto topup customer balance",cause:a});return o};async function Vie({locale:e,reason:t}){try{const{error:n,data:r}=await ne.GET("/rest/billing/get-milestone-progress",t,{timeoutMs:nn.NONE,params:{header:{"accept-language":e}}});if(n)throw new Me("API_CLIENTS_ERROR",{message:"Failed to fetch milestones",cause:n});return r}catch{return null}}const $ie=async({displayName:e,address:t,description:n,contactInfo:r,reason:s})=>{try{const{error:a,data:o}=await ne.POST("/rest/pplx-api/v2/groups",s,{timeoutMs:9e3,headers:{"content-type":"application/json"},body:{display_name:e,address:t,description:n,contact_info:r}});if(a)throw new Me("API_CLIENTS_ERROR",{message:"Failed to create API group",cause:a});return o.org}catch(a){return ee.log(a),null}},Wie=async({reason:e})=>{const t="getAPIGroupsV2";try{return(await(await er({urlPath:"/rest/pplx-api/v2/groups",method:"GET",headers:{"content-type":"application/json"},timeoutMs:1e4,numRetries:1,reason:e})).json())?.orgs??[]}catch(n){return ee.log(`Error in ${t}:`,n),[]}},Hie=async({orgId:e,reason:t})=>{if(!e)return{};try{const{error:n,data:r}=await ne.GET("/rest/pplx-api/v2/groups/{api_org_id}",t,{timeoutMs:1e4,headers:{"content-type":"application/json"},params:{path:{api_org_id:e}}});if(n)throw new Me("API_CLIENTS_ERROR",{message:"Failed to fetch API group customer info",cause:n});return{apiOrganization:r.apiOrganization,customerInfo:r.customerInfo,hasDefaultPaymentMethod:r.hasDefaultPaymentMethod,taxInfo:r.taxInfo}}catch(n){return ee.log(n),{}}},iLe=async({orgId:e,reason:t})=>{const n="getAPIGroupAPIKeys";if(!e)return{};try{return{apiKeys:(await(await er({urlPath:`/rest/pplx-api/v2/groups/${e}/api-keys`,method:"GET",headers:{"content-type":"application/json"},timeoutMs:1e4,numRetries:1,reason:t})).json())?.apiKeys}}catch(r){return ee.log(`Error in ${n}:`,r),{}}},lLe=async({headers:e,reason:t})=>{const{error:n,data:r}=await ne.GET("/rest/stripe/upgrade-subscription-preview",t,{headers:{"content-type":"application/json",...e},timeoutMs:nn.HIGH});if(n)throw KS("Failed to fetch upgrade subscription preview",n);return r},cLe=async({headers:e,reason:t})=>{const{error:n,data:r}=await ne.GET("/rest/stripe/downgrade-subscription-preview",t,{headers:{"content-type":"application/json",...e},timeoutMs:nn.HIGH});if(n)throw KS("Failed to fetch downgrade subscription preview",n);return r},zie=({reason:e,enabled:t})=>Ke({queryKey:pOe(),queryFn:()=>lLe({reason:e}),gcTime:0,staleTime:0,enabled:t}),Gie=({reason:e})=>Ke({queryKey:["downgrade-subscription-preview"],queryFn:()=>cLe({reason:e}),gcTime:0,staleTime:0}),uLe=async({headers:e,reason:t})=>{const{error:n,data:r}=await ne.POST("/rest/stripe/upgrade-subscription",t,{headers:{"content-type":"application/json",...e},timeoutMs:nn.HIGH});if(n)throw KS("Failed to upgrade subscription",n);return r},qie=({reason:e},t)=>{const n="useUpgradeSubscription";return Mt({retry:!1,mutationFn:()=>uLe({reason:e}),onError:r=>{ee.error(`Error in ${n}:`,r)},...t})},dLe=async({headers:e,reason:t})=>{const{error:n,data:r}=await ne.POST("/rest/stripe/downgrade-subscription",t,{headers:{"content-type":"application/json",...e},timeoutMs:nn.HIGH});if(n)throw KS("Failed to downgrade subscription",n);return r},Kie=({reason:e},t)=>{const n="useDowngradeSubscription";return Mt({mutationFn:()=>dLe({reason:e}),onError:r=>{ee.error(`Error in ${n}:`,r)},...t})},fLe=async({reason:e})=>{const{error:t,data:n}=await ne.GET("/rest/stripe/subscription-changes",e,{headers:{"content-type":"application/json"},timeoutMs:nn.HIGH});if(t)throw new Me("API_CLIENTS_ERROR",{message:"Failed to fetch subscription changes",cause:t});return n},mLe=({reason:e,enabled:t})=>Ke({queryKey:["subscription-changes"],queryFn:()=>fLe({reason:e}),gcTime:0,staleTime:0,enabled:t}),hLe=async()=>{const e=await ne.GET("/rest/billing/braintree/paypal/subscription-details","paypal-modal-fetch-details",{timeoutMs:5e3});if(e.error)throw e.error;return e.data},pLe=async()=>{const e=await ne.POST("/rest/billing/braintree/paypal/cancel-subscription","paypal-modal-cancel",{timeoutMs:5e3});if(e.error)throw e.error;return e.data},gLe=async()=>{const e=await ne.POST("/rest/billing/braintree/paypal/renew-subscription","paypal-modal-renew",{timeoutMs:3e3});if(e.error)throw e.error;return e.data},tW=Object.freeze(Object.defineProperty({__proto__:null,autoTopupCustomerBalance:oLe,cancelPaypalSubscription:pLe,createApiGroupV2:$ie,createBillingCustomer:sLe,createCheckoutSession:Bie,createSetupIntent:tLe,createSetupIntentAndCustomerSession:rLe,createSetupIntentV2:nLe,fetchPaypalSubscriptionDetails:hLe,getAPIGroupAPIKeys:iLe,getAPIGroupCustomerInfo:Hie,getAPIGroupsV2:Wie,getCustomerPortal:VO,getMilestoneProgress:Vie,getPrices:Uie,getUserPromotions:Fie,renewPaypalSubscription:gLe,topupCustomerBalance:aLe,useDowngradeSubscription:Kie,useGetDowngradeSubscriptionPreview:Gie,useGetPrices:PA,useGetSubscriptionChanges:mLe,useGetUpgradeSubscriptionPreview:zie,useUpgradeSubscription:qie},Symbol.toStringTag,{value:"Module"}));var G3={},q3={},wx={},K3={},nW;function H0(){return nW||(nW=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.BANDIT_ASSIGNMENT_SHARDS=e.MAX_EVENT_QUEUE_SIZE=e.NULL_SENTINEL=e.SESSION_ASSIGNMENT_CONFIG_LOADED=e.BANDIT_ENDPOINT=e.UFC_ENDPOINT=e.BASE_URL=e.DEFAULT_POLL_CONFIG_REQUEST_RETRIES=e.DEFAULT_INITIAL_CONFIG_REQUEST_RETRIES=e.POLL_JITTER_PCT=e.POLL_INTERVAL_MS=e.REQUEST_TIMEOUT_MILLIS=e.DEFAULT_REQUEST_TIMEOUT_MS=void 0,e.DEFAULT_REQUEST_TIMEOUT_MS=5e3,e.REQUEST_TIMEOUT_MILLIS=e.DEFAULT_REQUEST_TIMEOUT_MS,e.POLL_INTERVAL_MS=3e4,e.POLL_JITTER_PCT=.1,e.DEFAULT_INITIAL_CONFIG_REQUEST_RETRIES=1,e.DEFAULT_POLL_CONFIG_REQUEST_RETRIES=7,e.BASE_URL="https://fscdn.eppo.cloud/api",e.UFC_ENDPOINT="/flag-config/v1/config",e.BANDIT_ENDPOINT="/flag-config/v1/bandits",e.SESSION_ASSIGNMENT_CONFIG_LOADED="eppo-session-assignment-config-loaded",e.NULL_SENTINEL="EPPO_NULL",e.MAX_EVENT_QUEUE_SIZE=100,e.BANDIT_ASSIGNMENT_SHARDS=1e4}(K3)),K3}var rW;function Yie(){if(rW)return wx;rW=1,Object.defineProperty(wx,"__esModule",{value:!0});const e=H0();class t{constructor(r){var s;this.params=r,this.params.baseUrl=(s=r.baseUrl)!==null&&s!==void 0?s:e.BASE_URL}endpoint(r){var s;const a=new URL(this.params.baseUrl+r);return Object.entries((s=this.params.queryParams)!==null&&s!==void 0?s:{}).forEach(([o,i])=>a.searchParams.append(o,i)),a}ufcEndpoint(){return this.endpoint(e.UFC_ENDPOINT)}banditParametersEndpoint(){return this.endpoint(e.BANDIT_ENDPOINT)}}return wx.default=t,wx}var Qu={},pg={exports:{}},Y3,sW;function yLe(){if(sW)return Y3;sW=1;function e(n){try{return JSON.stringify(n)}catch{return'"[Circular]"'}}Y3=t;function t(n,r,s){var a=s&&s.stringify||e,o=1;if(typeof n=="object"&&n!==null){var i=r.length+o;if(i===1)return n;var c=new Array(i);c[0]=a(n);for(var u=1;u<i;u++)c[u]=a(r[u]);return c.join(" ")}if(typeof n!="string")return n;var d=r.length;if(d===0)return n;for(var m="",h=1-o,p=-1,g=n&&n.length||0,y=0;y<g;){if(n.charCodeAt(y)===37&&y+1<g){switch(p=p>-1?p:0,n.charCodeAt(y+1)){case 100:case 102:if(h>=d||r[h]==null)break;p<y&&(m+=n.slice(p,y)),m+=Number(r[h]),p=y+2,y++;break;case 105:if(h>=d||r[h]==null)break;p<y&&(m+=n.slice(p,y)),m+=Math.floor(Number(r[h])),p=y+2,y++;break;case 79:case 111:case 106:if(h>=d||r[h]===void 0)break;p<y&&(m+=n.slice(p,y));var v=typeof r[h];if(v==="string"){m+="'"+r[h]+"'",p=y+2,y++;break}if(v==="function"){m+=r[h].name||"<anonymous>",p=y+2,y++;break}m+=a(r[h]),p=y+2,y++;break;case 115:if(h>=d)break;p<y&&(m+=n.slice(p,y)),m+=String(r[h]),p=y+2,y++;break;case 37:p<y&&(m+=n.slice(p,y)),m+="%",p=y+2,y++,h--;break}++h}++y}return p===-1?n:(p<g&&(m+=n.slice(p)),m)}return Y3}var aW;function vLe(){if(aW)return pg.exports;aW=1;const e=yLe();pg.exports=d;const t=R().console||{},n={mapHttpRequest:E,mapHttpResponse:E,wrapRequestSerializer:M,wrapResponseSerializer:M,wrapErrorSerializer:M,req:E,res:E,err:S,errWithCause:S};function r(k,O){return k==="silent"?1/0:O.levels.values[k]}const s=Symbol("pino.logFuncs"),a=Symbol("pino.hierarchy"),o={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function i(k,O){const L={logger:O,parent:k[a]};O[a]=L}function c(k,O,L){const F={};O.forEach(U=>{F[U]=L[U]?L[U]:t[U]||t[o[U]||"log"]||T}),k[s]=F}function u(k,O){return Array.isArray(k)?k.filter(function(F){return F!=="!stdSerializers.err"}):k===!0?Object.keys(O):!1}function d(k){k=k||{},k.browser=k.browser||{};const O=k.browser.transmit;if(O&&typeof O.send!="function")throw Error("pino: transmit option must have a send function");const L=k.browser.write||t;k.browser.write&&(k.browser.asObject=!0);const F=k.serializers||{},U=u(k.browser.serialize,F);let V=k.browser.serialize;Array.isArray(k.browser.serialize)&&k.browser.serialize.indexOf("!stdSerializers.err")>-1&&(V=!1);const W=Object.keys(k.customLevels||{}),H=["error","fatal","warn","info","debug","trace"].concat(W);typeof L=="function"&&H.forEach(function(Q){L[Q]=L}),(k.enabled===!1||k.browser.disabled)&&(k.level="silent");const G=k.level||"info",K=Object.create(L);K.log||(K.log=T),c(K,H,L),i({},K),Object.defineProperty(K,"levelVal",{get:q}),Object.defineProperty(K,"level",{get:Z,set:se});const $={transmit:O,serialize:U,asObject:k.browser.asObject,formatters:k.browser.formatters,levels:H,timestamp:C(k)};K.levels=m(k),K.level=G,K.setMaxListeners=K.getMaxListeners=K.emit=K.addListener=K.on=K.prependListener=K.once=K.prependOnceListener=K.removeListener=K.removeAllListeners=K.listeners=K.listenerCount=K.eventNames=K.write=K.flush=T,K.serializers=F,K._serialize=U,K._stdErrSerialize=V,K.child=Y,O&&(K._logEvent=w());function q(){return r(this.level,this)}function Z(){return this._level}function se(Q){if(Q!=="silent"&&!this.levels.values[Q])throw Error("unknown level "+Q);this._level=Q,g(this,$,K,"error"),g(this,$,K,"fatal"),g(this,$,K,"warn"),g(this,$,K,"info"),g(this,$,K,"debug"),g(this,$,K,"trace"),W.forEach(re=>{g(this,$,K,re)})}function Y(Q,re){if(!Q)throw new Error("missing bindings for child Pino");re=re||{},U&&Q.serializers&&(re.serializers=Q.serializers);const te=re.serializers;if(U&&te){var le=Object.assign({},F,te),ie=k.browser.serialize===!0?Object.keys(le):U;delete Q.serializers,b([Q],ie,le,this._stdErrSerialize)}function pe(de){this._childLevel=(de._childLevel|0)+1,this.bindings=Q,le&&(this.serializers=le,this._serialize=ie),O&&(this._logEvent=w([].concat(de._logEvent.bindings,Q)))}pe.prototype=this;const me=new pe(this);return i(this,me),me.level=this.level,me}return K}function m(k){const O=k.customLevels||{},L=Object.assign({},d.levels.values,O),F=Object.assign({},d.levels.labels,h(O));return{values:L,labels:F}}function h(k){const O={};return Object.keys(k).forEach(function(L){O[k[L]]=L}),O}d.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},d.stdSerializers=n,d.stdTimeFunctions=Object.assign({},{nullTime:I,epochTime:j,unixTime:N,isoTime:P});function p(k){const O=[];k.bindings&&O.push(k.bindings);let L=k[a];for(;L.parent;)L=L.parent,L.logger.bindings&&O.push(L.logger.bindings);return O.reverse()}function g(k,O,L,F){if(Object.defineProperty(k,F,{value:r(k.level,L)>r(F,L)?T:L[s][F],writable:!0,enumerable:!0,configurable:!0}),!O.transmit&&k[F]===T)return;k[F]=v(k,O,L,F);const U=p(k);U.length!==0&&(k[F]=y(U,k[F]))}function y(k,O){return function(){return O.apply(this,[...k,...arguments])}}function v(k,O,L,F){return function(U){return function(){const W=O.timestamp(),H=new Array(arguments.length),G=Object.getPrototypeOf&&Object.getPrototypeOf(this)===t?t:this;for(var K=0;K<H.length;K++)H[K]=arguments[K];if(O.serialize&&!O.asObject&&b(H,this._serialize,this.serializers,this._stdErrSerialize),O.asObject||O.formatters?U.call(G,x(this,F,H,W,O.formatters)):U.apply(G,H),O.transmit){const $=O.transmit.level||k._level,q=L.levels.values[$],Z=L.levels.values[F];if(Z<q)return;_(this,{ts:W,methodLevel:F,methodValue:Z,transmitValue:L.levels.values[O.transmit.level||k._level],send:O.transmit.send,val:r(k._level,L)},H)}}}(k[s][F])}function x(k,O,L,F,U={}){const{level:V=()=>k.levels.values[O],log:W=Z=>Z}=U;k._serialize&&b(L,k._serialize,k.serializers,k._stdErrSerialize);const H=L.slice();let G=H[0];const K={};F&&(K.time=F),K.level=V(O,k.levels.values[O]);let $=(k._childLevel|0)+1;if($<1&&($=1),G!==null&&typeof G=="object"){for(;$--&&typeof H[0]=="object";)Object.assign(K,H.shift());G=H.length?e(H.shift(),H):void 0}else typeof G=="string"&&(G=e(H.shift(),H));return G!==void 0&&(K.msg=G),W(K)}function b(k,O,L,F){for(const U in k)if(F&&k[U]instanceof Error)k[U]=d.stdSerializers.err(k[U]);else if(typeof k[U]=="object"&&!Array.isArray(k[U]))for(const V in k[U])O&&O.indexOf(V)>-1&&V in L&&(k[U][V]=L[V](k[U][V]))}function _(k,O,L){const F=O.send,U=O.ts,V=O.methodLevel,W=O.methodValue,H=O.val,G=k._logEvent.bindings;b(L,k._serialize||Object.keys(k.serializers),k.serializers,k._stdErrSerialize===void 0?!0:k._stdErrSerialize),k._logEvent.ts=U,k._logEvent.messages=L.filter(function(K){return G.indexOf(K)===-1}),k._logEvent.level.label=V,k._logEvent.level.value=W,F(V,k._logEvent,H),k._logEvent=w(G)}function w(k){return{ts:0,messages:[],bindings:k||[],level:{label:"",value:0}}}function S(k){const O={type:k.constructor.name,msg:k.message,stack:k.stack};for(const L in k)O[L]===void 0&&(O[L]=k[L]);return O}function C(k){return typeof k.timestamp=="function"?k.timestamp:k.timestamp===!1?I:j}function E(){return{}}function M(k){return k}function T(){}function I(){return!1}function j(){return Date.now()}function N(){return Math.round(Date.now()/1e3)}function P(){return new Date(Date.now()).toISOString()}function R(){function k(O){return typeof O<"u"&&O}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return k(self)||k(window)||k(this)||{}}}return pg.exports.default=d,pg.exports.pino=d,pg.exports}var oW;function YS(){if(oW)return Qu;oW=1,Object.defineProperty(Qu,"__esModule",{value:!0}),Qu.logger=Qu.loggerPrefix=void 0;const e=vLe();return Qu.loggerPrefix="[Eppo SDK]",Qu.logger=(0,e.default)({level:"warn",browser:{disabled:!0}}),Qu}var ka={},xl={},a_={exports:{}},xLe=a_.exports,iW;function bLe(){return iW||(iW=1,function(e,t){(function(n,r){e.exports=r()})(typeof self<"u"?self:typeof window<"u"?window:typeof La<"u"?La:xLe,function(){var n="3.7.7",r=n,s=typeof Buffer=="function",a=typeof TextDecoder=="function"?new TextDecoder:void 0,o=typeof TextEncoder=="function"?new TextEncoder:void 0,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=Array.prototype.slice.call(i),u=function($){var q={};return $.forEach(function(Z,se){return q[Z]=se}),q}(c),d=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,m=String.fromCharCode.bind(String),h=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):function($){return new Uint8Array(Array.prototype.slice.call($,0))},p=function($){return $.replace(/=/g,"").replace(/[+\/]/g,function(q){return q=="+"?"-":"_"})},g=function($){return $.replace(/[^A-Za-z0-9\+\/]/g,"")},y=function($){for(var q,Z,se,Y,Q="",re=$.length%3,te=0;te<$.length;){if((Z=$.charCodeAt(te++))>255||(se=$.charCodeAt(te++))>255||(Y=$.charCodeAt(te++))>255)throw new TypeError("invalid character found");q=Z<<16|se<<8|Y,Q+=c[q>>18&63]+c[q>>12&63]+c[q>>6&63]+c[q&63]}return re?Q.slice(0,re-3)+"===".substring(re):Q},v=typeof btoa=="function"?function($){return btoa($)}:s?function($){return Buffer.from($,"binary").toString("base64")}:y,x=s?function($){return Buffer.from($).toString("base64")}:function($){for(var q=4096,Z=[],se=0,Y=$.length;se<Y;se+=q)Z.push(m.apply(null,$.subarray(se,se+q)));return v(Z.join(""))},b=function($,q){return q===void 0&&(q=!1),q?p(x($)):x($)},_=function($){if($.length<2){var q=$.charCodeAt(0);return q<128?$:q<2048?m(192|q>>>6)+m(128|q&63):m(224|q>>>12&15)+m(128|q>>>6&63)+m(128|q&63)}else{var q=65536+($.charCodeAt(0)-55296)*1024+($.charCodeAt(1)-56320);return m(240|q>>>18&7)+m(128|q>>>12&63)+m(128|q>>>6&63)+m(128|q&63)}},w=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,S=function($){return $.replace(w,_)},C=s?function($){return Buffer.from($,"utf8").toString("base64")}:o?function($){return x(o.encode($))}:function($){return v(S($))},E=function($,q){return q===void 0&&(q=!1),q?p(C($)):C($)},M=function($){return E($,!0)},T=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,I=function($){switch($.length){case 4:var q=(7&$.charCodeAt(0))<<18|(63&$.charCodeAt(1))<<12|(63&$.charCodeAt(2))<<6|63&$.charCodeAt(3),Z=q-65536;return m((Z>>>10)+55296)+m((Z&1023)+56320);case 3:return m((15&$.charCodeAt(0))<<12|(63&$.charCodeAt(1))<<6|63&$.charCodeAt(2));default:return m((31&$.charCodeAt(0))<<6|63&$.charCodeAt(1))}},j=function($){return $.replace(T,I)},N=function($){if($=$.replace(/\s+/g,""),!d.test($))throw new TypeError("malformed base64.");$+="==".slice(2-($.length&3));for(var q,Z="",se,Y,Q=0;Q<$.length;)q=u[$.charAt(Q++)]<<18|u[$.charAt(Q++)]<<12|(se=u[$.charAt(Q++)])<<6|(Y=u[$.charAt(Q++)]),Z+=se===64?m(q>>16&255):Y===64?m(q>>16&255,q>>8&255):m(q>>16&255,q>>8&255,q&255);return Z},P=typeof atob=="function"?function($){return atob(g($))}:s?function($){return Buffer.from($,"base64").toString("binary")}:N,R=s?function($){return h(Buffer.from($,"base64"))}:function($){return h(P($).split("").map(function(q){return q.charCodeAt(0)}))},k=function($){return R(L($))},O=s?function($){return Buffer.from($,"base64").toString("utf8")}:a?function($){return a.decode(R($))}:function($){return j(P($))},L=function($){return g($.replace(/[-_]/g,function(q){return q=="-"?"+":"/"}))},F=function($){return O(L($))},U=function($){if(typeof $!="string")return!1;var q=$.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(q)||!/[^\s0-9a-zA-Z\-_]/.test(q)},V=function($){return{value:$,enumerable:!1,writable:!0,configurable:!0}},W=function(){var $=function(q,Z){return Object.defineProperty(String.prototype,q,V(Z))};$("fromBase64",function(){return F(this)}),$("toBase64",function(q){return E(this,q)}),$("toBase64URI",function(){return E(this,!0)}),$("toBase64URL",function(){return E(this,!0)}),$("toUint8Array",function(){return k(this)})},H=function(){var $=function(q,Z){return Object.defineProperty(Uint8Array.prototype,q,V(Z))};$("toBase64",function(q){return b(this,q)}),$("toBase64URI",function(){return b(this,!0)}),$("toBase64URL",function(){return b(this,!0)})},G=function(){W(),H()},K={version:n,VERSION:r,atob:P,atobPolyfill:N,btoa:v,btoaPolyfill:y,fromBase64:F,toBase64:E,encode:E,encodeURI:M,encodeURL:M,utob:S,btou:j,decode:F,isValid:U,fromUint8Array:b,toUint8Array:k,extendString:W,extendUint8Array:H,extendBuiltins:G};return K.Base64={},Object.keys(K).forEach(function($){return K.Base64[$]=K[$]}),K})}(a_)),a_.exports}var Q3={exports:{}},X3={exports:{}},lW;function _Le(){return lW||(lW=1,function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(n,r){return n<<r|n>>>32-r},rotr:function(n,r){return n<<32-r|n>>>r},endian:function(n){if(n.constructor==Number)return t.rotl(n,8)&16711935|t.rotl(n,24)&4278255360;for(var r=0;r<n.length;r++)n[r]=t.endian(n[r]);return n},randomBytes:function(n){for(var r=[];n>0;n--)r.push(Math.floor(Math.random()*256));return r},bytesToWords:function(n){for(var r=[],s=0,a=0;s<n.length;s++,a+=8)r[a>>>5]|=n[s]<<24-a%32;return r},wordsToBytes:function(n){for(var r=[],s=0;s<n.length*32;s+=8)r.push(n[s>>>5]>>>24-s%32&255);return r},bytesToHex:function(n){for(var r=[],s=0;s<n.length;s++)r.push((n[s]>>>4).toString(16)),r.push((n[s]&15).toString(16));return r.join("")},hexToBytes:function(n){for(var r=[],s=0;s<n.length;s+=2)r.push(parseInt(n.substr(s,2),16));return r},bytesToBase64:function(n){for(var r=[],s=0;s<n.length;s+=3)for(var a=n[s]<<16|n[s+1]<<8|n[s+2],o=0;o<4;o++)s*8+o*6<=n.length*8?r.push(e.charAt(a>>>6*(3-o)&63)):r.push("=");return r.join("")},base64ToBytes:function(n){n=n.replace(/[^A-Z0-9+\/]/ig,"");for(var r=[],s=0,a=0;s<n.length;a=++s%4)a!=0&&r.push((e.indexOf(n.charAt(s-1))&Math.pow(2,-2*a+8)-1)<<a*2|e.indexOf(n.charAt(s))>>>6-a*2);return r}};X3.exports=t}()),X3.exports}var Z3,cW;function uW(){if(cW)return Z3;cW=1;var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var n=[],r=0;r<t.length;r++)n.push(t.charCodeAt(r)&255);return n},bytesToString:function(t){for(var n=[],r=0;r<t.length;r++)n.push(String.fromCharCode(t[r]));return n.join("")}}};return Z3=e,Z3}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var J3,dW;function wLe(){if(dW)return J3;dW=1,J3=function(n){return n!=null&&(e(n)||t(n)||!!n._isBuffer)};function e(n){return!!n.constructor&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}function t(n){return typeof n.readFloatLE=="function"&&typeof n.slice=="function"&&e(n.slice(0,0))}return J3}var fW;function SLe(){return fW||(fW=1,function(){var e=_Le(),t=uW().utf8,n=wLe(),r=uW().bin,s=function(a,o){a.constructor==String?o&&o.encoding==="binary"?a=r.stringToBytes(a):a=t.stringToBytes(a):n(a)?a=Array.prototype.slice.call(a,0):!Array.isArray(a)&&a.constructor!==Uint8Array&&(a=a.toString());for(var i=e.bytesToWords(a),c=a.length*8,u=1732584193,d=-271733879,m=-1732584194,h=271733878,p=0;p<i.length;p++)i[p]=(i[p]<<8|i[p]>>>24)&16711935|(i[p]<<24|i[p]>>>8)&4278255360;i[c>>>5]|=128<<c%32,i[(c+64>>>9<<4)+14]=c;for(var g=s._ff,y=s._gg,v=s._hh,x=s._ii,p=0;p<i.length;p+=16){var b=u,_=d,w=m,S=h;u=g(u,d,m,h,i[p+0],7,-680876936),h=g(h,u,d,m,i[p+1],12,-389564586),m=g(m,h,u,d,i[p+2],17,606105819),d=g(d,m,h,u,i[p+3],22,-1044525330),u=g(u,d,m,h,i[p+4],7,-176418897),h=g(h,u,d,m,i[p+5],12,1200080426),m=g(m,h,u,d,i[p+6],17,-1473231341),d=g(d,m,h,u,i[p+7],22,-45705983),u=g(u,d,m,h,i[p+8],7,1770035416),h=g(h,u,d,m,i[p+9],12,-1958414417),m=g(m,h,u,d,i[p+10],17,-42063),d=g(d,m,h,u,i[p+11],22,-1990404162),u=g(u,d,m,h,i[p+12],7,1804603682),h=g(h,u,d,m,i[p+13],12,-40341101),m=g(m,h,u,d,i[p+14],17,-1502002290),d=g(d,m,h,u,i[p+15],22,1236535329),u=y(u,d,m,h,i[p+1],5,-165796510),h=y(h,u,d,m,i[p+6],9,-1069501632),m=y(m,h,u,d,i[p+11],14,643717713),d=y(d,m,h,u,i[p+0],20,-373897302),u=y(u,d,m,h,i[p+5],5,-701558691),h=y(h,u,d,m,i[p+10],9,38016083),m=y(m,h,u,d,i[p+15],14,-660478335),d=y(d,m,h,u,i[p+4],20,-405537848),u=y(u,d,m,h,i[p+9],5,568446438),h=y(h,u,d,m,i[p+14],9,-1019803690),m=y(m,h,u,d,i[p+3],14,-187363961),d=y(d,m,h,u,i[p+8],20,1163531501),u=y(u,d,m,h,i[p+13],5,-1444681467),h=y(h,u,d,m,i[p+2],9,-51403784),m=y(m,h,u,d,i[p+7],14,1735328473),d=y(d,m,h,u,i[p+12],20,-1926607734),u=v(u,d,m,h,i[p+5],4,-378558),h=v(h,u,d,m,i[p+8],11,-2022574463),m=v(m,h,u,d,i[p+11],16,1839030562),d=v(d,m,h,u,i[p+14],23,-35309556),u=v(u,d,m,h,i[p+1],4,-1530992060),h=v(h,u,d,m,i[p+4],11,1272893353),m=v(m,h,u,d,i[p+7],16,-155497632),d=v(d,m,h,u,i[p+10],23,-1094730640),u=v(u,d,m,h,i[p+13],4,681279174),h=v(h,u,d,m,i[p+0],11,-358537222),m=v(m,h,u,d,i[p+3],16,-722521979),d=v(d,m,h,u,i[p+6],23,76029189),u=v(u,d,m,h,i[p+9],4,-640364487),h=v(h,u,d,m,i[p+12],11,-421815835),m=v(m,h,u,d,i[p+15],16,530742520),d=v(d,m,h,u,i[p+2],23,-995338651),u=x(u,d,m,h,i[p+0],6,-198630844),h=x(h,u,d,m,i[p+7],10,1126891415),m=x(m,h,u,d,i[p+14],15,-1416354905),d=x(d,m,h,u,i[p+5],21,-57434055),u=x(u,d,m,h,i[p+12],6,1700485571),h=x(h,u,d,m,i[p+3],10,-1894986606),m=x(m,h,u,d,i[p+10],15,-1051523),d=x(d,m,h,u,i[p+1],21,-2054922799),u=x(u,d,m,h,i[p+8],6,1873313359),h=x(h,u,d,m,i[p+15],10,-30611744),m=x(m,h,u,d,i[p+6],15,-1560198380),d=x(d,m,h,u,i[p+13],21,1309151649),u=x(u,d,m,h,i[p+4],6,-145523070),h=x(h,u,d,m,i[p+11],10,-1120210379),m=x(m,h,u,d,i[p+2],15,718787259),d=x(d,m,h,u,i[p+9],21,-343485551),u=u+b>>>0,d=d+_>>>0,m=m+w>>>0,h=h+S>>>0}return e.endian([u,d,m,h])};s._ff=function(a,o,i,c,u,d,m){var h=a+(o&i|~o&c)+(u>>>0)+m;return(h<<d|h>>>32-d)+o},s._gg=function(a,o,i,c,u,d,m){var h=a+(o&c|i&~c)+(u>>>0)+m;return(h<<d|h>>>32-d)+o},s._hh=function(a,o,i,c,u,d,m){var h=a+(o^i^c)+(u>>>0)+m;return(h<<d|h>>>32-d)+o},s._ii=function(a,o,i,c,u,d,m){var h=a+(i^(o|~c))+(u>>>0)+m;return(h<<d|h>>>32-d)+o},s._blocksize=16,s._digestsize=16,Q3.exports=function(a,o){if(a==null)throw new Error("Illegal argument "+a);var i=e.wordsToBytes(s(a,o));return o&&o.asBytes?i:o&&o.asString?r.bytesToString(i):e.bytesToHex(i)}}()),Q3.exports}var mW;function cp(){if(mW)return xl;mW=1,Object.defineProperty(xl,"__esModule",{value:!0}),xl.decodeBase64=xl.encodeBase64=xl.getMD5Hash=void 0;const e=bLe(),t=SLe();function n(a){return t(a)}xl.getMD5Hash=n;function r(a){return e.btoaPolyfill(a)}xl.encodeBase64=r;function s(a){return e.atobPolyfill(a)}return xl.decodeBase64=s,xl}var gg={},hW;function CLe(){if(hW)return gg;hW=1,Object.defineProperty(gg,"__esModule",{value:!0}),gg.LRUCache=void 0;class e{constructor(n){this.capacity=n,this.cache=new Map,this.size=this.cache.size}[Symbol.iterator](){return this.cache[Symbol.iterator]()}forEach(n,r){this.cache.forEach(n,r)}entries(){return this.cache.entries()}clear(){this.cache.clear()}delete(n){return this.cache.delete(n)}keys(){return this.cache.keys()}values(){return this.cache.values()}has(n){return this.cache.has(n)}get(n){if(!this.has(n))return;const r=this.cache.get(n);return r!==void 0&&(this.delete(n),this.cache.set(n,r)),r}set(n,r){if(this.capacity===0)return this;if(this.cache.has(n))this.cache.delete(n);else if(this.cache.size>=this.capacity){const s=this.cache.keys().next().value;this.delete(s)}return this.cache.set(n,r),this}}return gg.LRUCache=e,gg}var pW;function Qie(){if(pW)return ka;pW=1,Object.defineProperty(ka,"__esModule",{value:!0}),ka.LRUInMemoryAssignmentCache=ka.NonExpiringInMemoryAssignmentCache=ka.AbstractAssignmentCache=ka.assignmentCacheValueToString=ka.assignmentCacheKeyToString=void 0;const e=cp(),t=CLe();function n({subjectKey:i,flagKey:c}){return(0,e.getMD5Hash)([i,c].join(";"))}ka.assignmentCacheKeyToString=n;function r({allocationKey:i,variationKey:c}){return(0,e.getMD5Hash)([i,c].join(";"))}ka.assignmentCacheValueToString=r;class s{constructor(c){this.delegate=c}has(c){return this.get(c)===r(c)}get(c){return this.delegate.get(n(c))}set(c){this.delegate.set(n(c),r(c))}entries(){return this.delegate.entries()}}ka.AbstractAssignmentCache=s;class a extends s{constructor(c=new Map){super(c)}}ka.NonExpiringInMemoryAssignmentCache=a;class o extends s{constructor(c){super(new t.LRUCache(c))}}return ka.LRUInMemoryAssignmentCache=o,ka}var Nc={},yg={},bl={},gW;function Xie(){if(gW)return bl;gW=1,Object.defineProperty(bl,"__esModule",{value:!0}),bl.DeterministicSharder=bl.MD5Sharder=bl.Sharder=void 0;const e=cp();class t{}bl.Sharder=t;class n extends t{getShard(a,o){const i=(0,e.getMD5Hash)(a);return parseInt(i.slice(0,8),16)%o}}bl.MD5Sharder=n;class r extends t{constructor(a){super(),this.lookup=a}getShard(a,o){var i;return(i=this.lookup[a])!==null&&i!==void 0?i:0}}return bl.DeterministicSharder=r,bl}var yW;function ELe(){if(yW)return yg;yW=1,Object.defineProperty(yg,"__esModule",{value:!0}),yg.BanditEvaluator=void 0;const e=H0(),t=Xie();class n{constructor(){this.assignmentShards=e.BANDIT_ASSIGNMENT_SHARDS,this.sharder=new t.MD5Sharder}evaluateBandit(s,a,o,i,c){const u=this.scoreActions(o,i,c),d=this.weighActions(u,c.gamma,c.actionProbabilityFloor),m=this.selectAction(s,a,d),p=Object.values(u).reduce((g,y)=>y>g?y:g,-1/0)-u[m];return{flagKey:s,subjectKey:a,subjectAttributes:o,actionKey:m,actionAttributes:i[m],actionScore:u[m],actionWeight:d[m],gamma:c.gamma,optimalityGap:p}}scoreActions(s,a,o){const i={};return Object.entries(a).forEach(([c,u])=>{let d=o.defaultActionScore;const m=o.coefficients[c];m&&(d=m.intercept,d+=this.scoreNumericAttributes(m.subjectNumericCoefficients,s.numericAttributes),d+=this.scoreCategoricalAttributes(m.subjectCategoricalCoefficients,s.categoricalAttributes),d+=this.scoreNumericAttributes(m.actionNumericCoefficients,u.numericAttributes),d+=this.scoreCategoricalAttributes(m.actionCategoricalCoefficients,u.categoricalAttributes)),i[c]=d}),i}scoreNumericAttributes(s,a){return s.reduce((o,i)=>{const c=a[i.attributeKey];return typeof c=="number"&&isFinite(c)?o+=c*i.coefficient:o+=i.missingValueCoefficient,o},0)}scoreCategoricalAttributes(s,a){return s.reduce((o,i)=>{var c;const u=(c=a[i.attributeKey])===null||c===void 0?void 0:c.toString(),d=u&&i.valueCoefficients[u];return o+=typeof d=="number"?d:i.missingValueCoefficient,o},0)}weighActions(s,a,o){const i={},c=Object.entries(s);if(!c.length)return i;let u=null,d=null;if(c.forEach(([v,x])=>{(u===null||x>u)&&(u=x,d=v)}),u===null||d===null)throw new Error("Unable to find top score");const m=u,h=d,p=c.length,g=o/p;let y=0;return c.forEach(([v,x])=>{if(v===h)return;const b=1/(p+a*(m-x)),_=Math.max(b,g);y+=_,i[v]=_}),i[h]=Math.max(1-y,0),i}selectAction(s,a,o){const i=Object.entries(o).sort((h,p)=>{const g=this.sharder.getShard(`${s}-${a}-${h[0]}`,this.assignmentShards),y=this.sharder.getShard(`${s}-${a}-${p[0]}`,this.assignmentShards);let v=g-y;return v===0&&(v=h[0]<p[0]?-1:1),v}),u=this.sharder.getShard(`${s}-${a}`,this.assignmentShards)/this.assignmentShards;let d=0,m=null;for(const h of i)if(d+=h[1],d>u){m=h[0];break}if(m===null)throw new Error(`No bandit action selected for flag "${s}" and subject "${a}"`);return m}}return yg.BanditEvaluator=n,yg}var Sx={},vW;function Zie(){if(vW)return Sx;vW=1,Object.defineProperty(Sx,"__esModule",{value:!0});class e{constructor(n,r,s,a){this.httpClient=n,this.flagConfigurationStore=r,this.banditVariationConfigurationStore=s,this.banditModelConfigurationStore=a}async fetchAndStoreConfigurations(){var n;const r=await this.httpClient.getUniversalFlagConfiguration();if(!r?.flags)return;await this.hydrateConfigurationStore(this.flagConfigurationStore,{entries:r.flags,environment:r.environment,createdAt:r.createdAt});const s=Object.keys((n=r.bandits)!==null&&n!==void 0?n:{}).length>0,a=!!(this.banditVariationConfigurationStore&&this.banditModelConfigurationStore);if(s&&a){const o=this.indexBanditVariationsByFlagKey(r.bandits);await this.hydrateConfigurationStore(this.banditVariationConfigurationStore,{entries:o,environment:r.environment,createdAt:r.createdAt});const i=await this.httpClient.getBanditParameters();if(i?.bandits){if(!this.banditModelConfigurationStore)throw new Error("Bandit parameters fetched but no bandit configuration store provided");await this.hydrateConfigurationStore(this.banditModelConfigurationStore,{entries:i.bandits,environment:r.environment,createdAt:r.createdAt})}}}async hydrateConfigurationStore(n,r){n&&await n.setEntries(r.entries)&&(n.setEnvironment(r.environment),n.setConfigFetchedAt(new Date().toISOString()),n.setConfigPublishedAt(r.createdAt))}indexBanditVariationsByFlagKey(n){const r={};return Object.values(n).forEach(s=>{s.forEach(a=>{let o=r[a.flagKey];o||(o=[],r[a.flagKey]=o),o.push(a)})}),r}}return Sx.default=e,Sx}var rs={},e4={},xW;function z0(){return xW||(xW=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.VariationType=void 0,function(t){t.STRING="STRING",t.INTEGER="INTEGER",t.NUMERIC="NUMERIC",t.BOOLEAN="BOOLEAN",t.JSON="JSON"}(e.VariationType||(e.VariationType={}))}(e4)),e4}var bW;function MLe(){if(bW)return rs;bW=1,Object.defineProperty(rs,"__esModule",{value:!0}),rs.decodeObject=rs.decodeShard=rs.decodeSplit=rs.decodeAllocation=rs.decodeValue=rs.decodeVariations=rs.decodeFlag=void 0;const e=z0(),t=cp();function n(u){return Object.assign(Object.assign({},u),{variations:r(u.variations,u.variationType),allocations:u.allocations.map(a)})}rs.decodeFlag=n;function r(u,d){return Object.fromEntries(Object.entries(u).map(([,m])=>{const h=(0,t.decodeBase64)(m.key);return[h,{key:h,value:s(m.value,d)}]}))}rs.decodeVariations=r;function s(u,d){switch(d){case e.VariationType.INTEGER:case e.VariationType.NUMERIC:return Number((0,t.decodeBase64)(u));case e.VariationType.BOOLEAN:return(0,t.decodeBase64)(u)==="true";default:return(0,t.decodeBase64)(u)}}rs.decodeValue=s;function a(u){return Object.assign(Object.assign({},u),{key:(0,t.decodeBase64)(u.key),splits:u.splits.map(o),startAt:u.startAt?new Date((0,t.decodeBase64)(u.startAt)).toISOString():void 0,endAt:u.endAt?new Date((0,t.decodeBase64)(u.endAt)).toISOString():void 0})}rs.decodeAllocation=a;function o(u){return{extraLogging:u.extraLogging?c(u.extraLogging):void 0,variationKey:(0,t.decodeBase64)(u.variationKey),shards:u.shards.map(i)}}rs.decodeSplit=o;function i(u){return Object.assign(Object.assign({},u),{salt:(0,t.decodeBase64)(u.salt)})}rs.decodeShard=i;function c(u){return Object.fromEntries(Object.entries(u).map(([d,m])=>[(0,t.decodeBase64)(d),(0,t.decodeBase64)(m)]))}return rs.decodeObject=c,rs}var t4={},_W;function TLe(){return _W||(_W=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.EppoValue=e.EppoValueType=void 0;const t=z0(),n=cp();var r;(function(a){a[a.NullType=0]="NullType",a[a.BoolType=1]="BoolType",a[a.NumericType=2]="NumericType",a[a.StringType=3]="StringType",a[a.JSONType=4]="JSONType"})(r=e.EppoValueType||(e.EppoValueType={}));class s{constructor(o,i,c,u,d){this.valueType=o,this.boolValue=i,this.numericValue=c,this.stringValue=u,this.objectValue=d}static valueOf(o,i){if(o==null)return s.Null();switch(i){case t.VariationType.BOOLEAN:return s.Bool(o);case t.VariationType.NUMERIC:return s.Numeric(o);case t.VariationType.INTEGER:return s.Numeric(o);case t.VariationType.STRING:return s.String(o);case t.VariationType.JSON:return s.JSON(o);default:return s.String(o)}}toString(){var o,i,c;switch(this.valueType){case r.NullType:return"null";case r.BoolType:return this.boolValue?"true":"false";case r.NumericType:return this.numericValue?this.numericValue.toString():"0";case r.StringType:return(o=this.stringValue)!==null&&o!==void 0?o:"";case r.JSONType:try{return(i=JSON.stringify(this.objectValue))!==null&&i!==void 0?i:""}catch{return(c=this.stringValue)!==null&&c!==void 0?c:""}}}toHashedString(){const o=this.toString();return(0,n.getMD5Hash)(o)}static Bool(o){return new s(r.BoolType,o,void 0,void 0,void 0)}static Numeric(o){return new s(r.NumericType,void 0,o,void 0,void 0)}static String(o){return new s(r.StringType,void 0,void 0,o,void 0)}static JSON(o){return new s(r.JSONType,void 0,void 0,void 0,typeof o=="string"?JSON.parse(o):o)}static Null(){return new s(r.NullType,void 0,void 0,void 0,void 0)}}e.EppoValue=s}(t4)),t4}var Na={},n4={},wW;function Jie(){return wW||(wW=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FlagEvaluationDetailsBuilder=e.AllocationEvaluationCode=e.flagEvaluationCodes=void 0;const t=z0();e.flagEvaluationCodes=["MATCH","FLAG_UNRECOGNIZED_OR_DISABLED","TYPE_MISMATCH","ASSIGNMENT_ERROR","DEFAULT_ALLOCATION_NULL","NO_ACTIONS_SUPPLIED_FOR_BANDIT"];var n;(function(s){s.UNEVALUATED="UNEVALUATED",s.MATCH="MATCH",s.BEFORE_START_TIME="BEFORE_START_TIME",s.TRAFFIC_EXPOSURE_MISS="TRAFFIC_EXPOSURE_MISS",s.AFTER_END_TIME="AFTER_END_TIME",s.FAILING_RULE="FAILING_RULE"})(n=e.AllocationEvaluationCode||(e.AllocationEvaluationCode={}));class r{constructor(a,o,i,c){this.environmentName=a,this.allocations=o,this.configFetchedAt=i,this.configPublishedAt=c,this.variationKey=null,this.variationValue=null,this.matchedRule=null,this.matchedAllocation=null,this.unmatchedAllocations=[],this.unevaluatedAllocations=[],this.setNone=()=>(this.variationKey=null,this.variationValue=null,this.matchedRule=null,this.matchedAllocation=null,this.unmatchedAllocations=[],this.unevaluatedAllocations=this.allocations.map((u,d)=>({key:u.key,allocationEvaluationCode:n.UNEVALUATED,orderPosition:d+1})),this),this.setNoMatchFound=(u=[])=>(this.variationKey=null,this.variationValue=null,this.matchedAllocation=null,this.matchedRule=null,this.unmatchedAllocations=u,this.unevaluatedAllocations=[],this),this.setMatch=(u,d,m,h,p,g)=>{this.variationKey=d.key,this.variationValue=g===t.VariationType.JSON&&typeof d.value=="string"?JSON.parse(d.value):d.value,this.matchedRule=h,this.matchedAllocation={key:m.key,allocationEvaluationCode:n.MATCH,orderPosition:u+1},this.unmatchedAllocations=p;const y=u+1,v=y+1;return this.unevaluatedAllocations=this.allocations.slice(y).map((x,b)=>({key:x.key,allocationEvaluationCode:n.UNEVALUATED,orderPosition:v+b})),this},this.buildForNoneResult=(u,d)=>this.setNone().build(u,d),this.build=(u,d)=>({environmentName:this.environmentName,flagEvaluationCode:u,flagEvaluationDescription:d,variationKey:this.variationKey,variationValue:this.variationValue,banditKey:null,banditAction:null,configFetchedAt:this.configFetchedAt,configPublishedAt:this.configPublishedAt,matchedRule:this.matchedRule,matchedAllocation:this.matchedAllocation,unmatchedAllocations:this.unmatchedAllocations,unevaluatedAllocations:this.unevaluatedAllocations}),this.setNone()}}e.FlagEvaluationDetailsBuilder=r}(n4)),n4}var r4={},Cx={exports:{}},s4,SW;function QS(){if(SW)return s4;SW=1;const e="2.0.0",t=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,r=16,s=t-6;return s4={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:s,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},s4}var a4,CW;function XS(){if(CW)return a4;CW=1;var e={};return a4=typeof process=="object"&&e&&e.NODE_DEBUG&&/\bsemver\b/i.test(e.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{},a4}var EW;function G0(){return EW||(EW=1,function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:s}=QS(),a=XS();t=e.exports={};const o=t.re=[],i=t.safeRe=[],c=t.src=[],u=t.safeSrc=[],d=t.t={};let m=0;const h="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",s],[h,r]],g=v=>{for(const[x,b]of p)v=v.split(`${x}*`).join(`${x}{0,${b}}`).split(`${x}+`).join(`${x}{1,${b}}`);return v},y=(v,x,b)=>{const _=g(x),w=m++;a(v,w,x),d[v]=w,c[w]=x,u[w]=_,o[w]=new RegExp(x,b?"g":void 0),i[w]=new RegExp(_,b?"g":void 0)};y("NUMERICIDENTIFIER","0|[1-9]\\d*"),y("NUMERICIDENTIFIERLOOSE","\\d+"),y("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),y("MAINVERSION",`(${c[d.NUMERICIDENTIFIER]})\\.(${c[d.NUMERICIDENTIFIER]})\\.(${c[d.NUMERICIDENTIFIER]})`),y("MAINVERSIONLOOSE",`(${c[d.NUMERICIDENTIFIERLOOSE]})\\.(${c[d.NUMERICIDENTIFIERLOOSE]})\\.(${c[d.NUMERICIDENTIFIERLOOSE]})`),y("PRERELEASEIDENTIFIER",`(?:${c[d.NONNUMERICIDENTIFIER]}|${c[d.NUMERICIDENTIFIER]})`),y("PRERELEASEIDENTIFIERLOOSE",`(?:${c[d.NONNUMERICIDENTIFIER]}|${c[d.NUMERICIDENTIFIERLOOSE]})`),y("PRERELEASE",`(?:-(${c[d.PRERELEASEIDENTIFIER]}(?:\\.${c[d.PRERELEASEIDENTIFIER]})*))`),y("PRERELEASELOOSE",`(?:-?(${c[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[d.PRERELEASEIDENTIFIERLOOSE]})*))`),y("BUILDIDENTIFIER",`${h}+`),y("BUILD",`(?:\\+(${c[d.BUILDIDENTIFIER]}(?:\\.${c[d.BUILDIDENTIFIER]})*))`),y("FULLPLAIN",`v?${c[d.MAINVERSION]}${c[d.PRERELEASE]}?${c[d.BUILD]}?`),y("FULL",`^${c[d.FULLPLAIN]}$`),y("LOOSEPLAIN",`[v=\\s]*${c[d.MAINVERSIONLOOSE]}${c[d.PRERELEASELOOSE]}?${c[d.BUILD]}?`),y("LOOSE",`^${c[d.LOOSEPLAIN]}$`),y("GTLT","((?:<|>)?=?)"),y("XRANGEIDENTIFIERLOOSE",`${c[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),y("XRANGEIDENTIFIER",`${c[d.NUMERICIDENTIFIER]}|x|X|\\*`),y("XRANGEPLAIN",`[v=\\s]*(${c[d.XRANGEIDENTIFIER]})(?:\\.(${c[d.XRANGEIDENTIFIER]})(?:\\.(${c[d.XRANGEIDENTIFIER]})(?:${c[d.PRERELEASE]})?${c[d.BUILD]}?)?)?`),y("XRANGEPLAINLOOSE",`[v=\\s]*(${c[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[d.XRANGEIDENTIFIERLOOSE]})(?:${c[d.PRERELEASELOOSE]})?${c[d.BUILD]}?)?)?`),y("XRANGE",`^${c[d.GTLT]}\\s*${c[d.XRANGEPLAIN]}$`),y("XRANGELOOSE",`^${c[d.GTLT]}\\s*${c[d.XRANGEPLAINLOOSE]}$`),y("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),y("COERCE",`${c[d.COERCEPLAIN]}(?:$|[^\\d])`),y("COERCEFULL",c[d.COERCEPLAIN]+`(?:${c[d.PRERELEASE]})?(?:${c[d.BUILD]})?(?:$|[^\\d])`),y("COERCERTL",c[d.COERCE],!0),y("COERCERTLFULL",c[d.COERCEFULL],!0),y("LONETILDE","(?:~>?)"),y("TILDETRIM",`(\\s*)${c[d.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",y("TILDE",`^${c[d.LONETILDE]}${c[d.XRANGEPLAIN]}$`),y("TILDELOOSE",`^${c[d.LONETILDE]}${c[d.XRANGEPLAINLOOSE]}$`),y("LONECARET","(?:\\^)"),y("CARETTRIM",`(\\s*)${c[d.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",y("CARET",`^${c[d.LONECARET]}${c[d.XRANGEPLAIN]}$`),y("CARETLOOSE",`^${c[d.LONECARET]}${c[d.XRANGEPLAINLOOSE]}$`),y("COMPARATORLOOSE",`^${c[d.GTLT]}\\s*(${c[d.LOOSEPLAIN]})$|^$`),y("COMPARATOR",`^${c[d.GTLT]}\\s*(${c[d.FULLPLAIN]})$|^$`),y("COMPARATORTRIM",`(\\s*)${c[d.GTLT]}\\s*(${c[d.LOOSEPLAIN]}|${c[d.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",y("HYPHENRANGE",`^\\s*(${c[d.XRANGEPLAIN]})\\s+-\\s+(${c[d.XRANGEPLAIN]})\\s*$`),y("HYPHENRANGELOOSE",`^\\s*(${c[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[d.XRANGEPLAINLOOSE]})\\s*$`),y("STAR","(<|>)?=?\\s*\\*"),y("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),y("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(Cx,Cx.exports)),Cx.exports}var o4,MW;function $O(){if(MW)return o4;MW=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return o4=r=>r?typeof r!="object"?e:r:t,o4}var i4,TW;function ele(){if(TW)return i4;TW=1;const e=/^[0-9]+$/,t=(r,s)=>{const a=e.test(r),o=e.test(s);return a&&o&&(r=+r,s=+s),r===s?0:a&&!o?-1:o&&!a?1:r<s?-1:1};return i4={compareIdentifiers:t,rcompareIdentifiers:(r,s)=>t(s,r)},i4}var l4,kW;function Js(){if(kW)return l4;kW=1;const e=XS(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=QS(),{safeRe:r,t:s}=G0(),a=$O(),{compareIdentifiers:o}=ele();class i{constructor(u,d){if(d=a(d),u instanceof i){if(u.loose===!!d.loose&&u.includePrerelease===!!d.includePrerelease)return u;u=u.version}else if(typeof u!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof u}".`);if(u.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",u,d),this.options=d,this.loose=!!d.loose,this.includePrerelease=!!d.includePrerelease;const m=u.trim().match(d.loose?r[s.LOOSE]:r[s.FULL]);if(!m)throw new TypeError(`Invalid Version: ${u}`);if(this.raw=u,this.major=+m[1],this.minor=+m[2],this.patch=+m[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");m[4]?this.prerelease=m[4].split(".").map(h=>{if(/^[0-9]+$/.test(h)){const p=+h;if(p>=0&&p<n)return p}return h}):this.prerelease=[],this.build=m[5]?m[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(u){if(e("SemVer.compare",this.version,this.options,u),!(u instanceof i)){if(typeof u=="string"&&u===this.version)return 0;u=new i(u,this.options)}return u.version===this.version?0:this.compareMain(u)||this.comparePre(u)}compareMain(u){return u instanceof i||(u=new i(u,this.options)),o(this.major,u.major)||o(this.minor,u.minor)||o(this.patch,u.patch)}comparePre(u){if(u instanceof i||(u=new i(u,this.options)),this.prerelease.length&&!u.prerelease.length)return-1;if(!this.prerelease.length&&u.prerelease.length)return 1;if(!this.prerelease.length&&!u.prerelease.length)return 0;let d=0;do{const m=this.prerelease[d],h=u.prerelease[d];if(e("prerelease compare",d,m,h),m===void 0&&h===void 0)return 0;if(h===void 0)return 1;if(m===void 0)return-1;if(m===h)continue;return o(m,h)}while(++d)}compareBuild(u){u instanceof i||(u=new i(u,this.options));let d=0;do{const m=this.build[d],h=u.build[d];if(e("build compare",d,m,h),m===void 0&&h===void 0)return 0;if(h===void 0)return 1;if(m===void 0)return-1;if(m===h)continue;return o(m,h)}while(++d)}inc(u,d,m){if(u.startsWith("pre")){if(!d&&m===!1)throw new Error("invalid increment argument: identifier is empty");if(d){const h=`-${d}`.match(this.options.loose?r[s.PRERELEASELOOSE]:r[s.PRERELEASE]);if(!h||h[1]!==d)throw new Error(`invalid identifier: ${d}`)}}switch(u){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",d,m);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",d,m);break;case"prepatch":this.prerelease.length=0,this.inc("patch",d,m),this.inc("pre",d,m);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",d,m),this.inc("pre",d,m);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const h=Number(m)?1:0;if(this.prerelease.length===0)this.prerelease=[h];else{let p=this.prerelease.length;for(;--p>=0;)typeof this.prerelease[p]=="number"&&(this.prerelease[p]++,p=-2);if(p===-1){if(d===this.prerelease.join(".")&&m===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(h)}}if(d){let p=[d,h];m===!1&&(p=[d]),o(this.prerelease[0],d)===0?isNaN(this.prerelease[1])&&(this.prerelease=p):this.prerelease=p}break}default:throw new Error(`invalid increment argument: ${u}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return l4=i,l4}var c4,NW;function up(){if(NW)return c4;NW=1;const e=Js();return c4=(n,r,s=!1)=>{if(n instanceof e)return n;try{return new e(n,r)}catch(a){if(!s)return null;throw a}},c4}var u4,AW;function kLe(){if(AW)return u4;AW=1;const e=up();return u4=(n,r)=>{const s=e(n,r);return s?s.version:null},u4}var d4,PW;function NLe(){if(PW)return d4;PW=1;const e=up();return d4=(n,r)=>{const s=e(n.trim().replace(/^[=v]+/,""),r);return s?s.version:null},d4}var f4,RW;function ALe(){if(RW)return f4;RW=1;const e=Js();return f4=(n,r,s,a,o)=>{typeof s=="string"&&(o=a,a=s,s=void 0);try{return new e(n instanceof e?n.version:n,s).inc(r,a,o).version}catch{return null}},f4}var m4,IW;function PLe(){if(IW)return m4;IW=1;const e=up();return m4=(n,r)=>{const s=e(n,null,!0),a=e(r,null,!0),o=s.compare(a);if(o===0)return null;const i=o>0,c=i?s:a,u=i?a:s,d=!!c.prerelease.length;if(!!u.prerelease.length&&!d){if(!u.patch&&!u.minor)return"major";if(u.compareMain(c)===0)return u.minor&&!u.patch?"minor":"patch"}const h=d?"pre":"";return s.major!==a.major?h+"major":s.minor!==a.minor?h+"minor":s.patch!==a.patch?h+"patch":"prerelease"},m4}var h4,jW;function RLe(){if(jW)return h4;jW=1;const e=Js();return h4=(n,r)=>new e(n,r).major,h4}var p4,OW;function ILe(){if(OW)return p4;OW=1;const e=Js();return p4=(n,r)=>new e(n,r).minor,p4}var g4,LW;function jLe(){if(LW)return g4;LW=1;const e=Js();return g4=(n,r)=>new e(n,r).patch,g4}var y4,DW;function OLe(){if(DW)return y4;DW=1;const e=up();return y4=(n,r)=>{const s=e(n,r);return s&&s.prerelease.length?s.prerelease:null},y4}var v4,FW;function si(){if(FW)return v4;FW=1;const e=Js();return v4=(n,r,s)=>new e(n,s).compare(new e(r,s)),v4}var x4,UW;function LLe(){if(UW)return x4;UW=1;const e=si();return x4=(n,r,s)=>e(r,n,s),x4}var b4,BW;function DLe(){if(BW)return b4;BW=1;const e=si();return b4=(n,r)=>e(n,r,!0),b4}var _4,VW;function WO(){if(VW)return _4;VW=1;const e=Js();return _4=(n,r,s)=>{const a=new e(n,s),o=new e(r,s);return a.compare(o)||a.compareBuild(o)},_4}var w4,$W;function FLe(){if($W)return w4;$W=1;const e=WO();return w4=(n,r)=>n.sort((s,a)=>e(s,a,r)),w4}var S4,WW;function ULe(){if(WW)return S4;WW=1;const e=WO();return S4=(n,r)=>n.sort((s,a)=>e(a,s,r)),S4}var C4,HW;function ZS(){if(HW)return C4;HW=1;const e=si();return C4=(n,r,s)=>e(n,r,s)>0,C4}var E4,zW;function HO(){if(zW)return E4;zW=1;const e=si();return E4=(n,r,s)=>e(n,r,s)<0,E4}var M4,GW;function tle(){if(GW)return M4;GW=1;const e=si();return M4=(n,r,s)=>e(n,r,s)===0,M4}var T4,qW;function nle(){if(qW)return T4;qW=1;const e=si();return T4=(n,r,s)=>e(n,r,s)!==0,T4}var k4,KW;function zO(){if(KW)return k4;KW=1;const e=si();return k4=(n,r,s)=>e(n,r,s)>=0,k4}var N4,YW;function GO(){if(YW)return N4;YW=1;const e=si();return N4=(n,r,s)=>e(n,r,s)<=0,N4}var A4,QW;function rle(){if(QW)return A4;QW=1;const e=tle(),t=nle(),n=ZS(),r=zO(),s=HO(),a=GO();return A4=(i,c,u,d)=>{switch(c){case"===":return typeof i=="object"&&(i=i.version),typeof u=="object"&&(u=u.version),i===u;case"!==":return typeof i=="object"&&(i=i.version),typeof u=="object"&&(u=u.version),i!==u;case"":case"=":case"==":return e(i,u,d);case"!=":return t(i,u,d);case">":return n(i,u,d);case">=":return r(i,u,d);case"<":return s(i,u,d);case"<=":return a(i,u,d);default:throw new TypeError(`Invalid operator: ${c}`)}},A4}var P4,XW;function BLe(){if(XW)return P4;XW=1;const e=Js(),t=up(),{safeRe:n,t:r}=G0();return P4=(a,o)=>{if(a instanceof e)return a;if(typeof a=="number"&&(a=String(a)),typeof a!="string")return null;o=o||{};let i=null;if(!o.rtl)i=a.match(o.includePrerelease?n[r.COERCEFULL]:n[r.COERCE]);else{const p=o.includePrerelease?n[r.COERCERTLFULL]:n[r.COERCERTL];let g;for(;(g=p.exec(a))&&(!i||i.index+i[0].length!==a.length);)(!i||g.index+g[0].length!==i.index+i[0].length)&&(i=g),p.lastIndex=g.index+g[1].length+g[2].length;p.lastIndex=-1}if(i===null)return null;const c=i[2],u=i[3]||"0",d=i[4]||"0",m=o.includePrerelease&&i[5]?`-${i[5]}`:"",h=o.includePrerelease&&i[6]?`+${i[6]}`:"";return t(`${c}.${u}.${d}${m}${h}`,o)},P4}var R4,ZW;function VLe(){if(ZW)return R4;ZW=1;class e{constructor(){this.max=1e3,this.map=new Map}get(n){const r=this.map.get(n);if(r!==void 0)return this.map.delete(n),this.map.set(n,r),r}delete(n){return this.map.delete(n)}set(n,r){if(!this.delete(n)&&r!==void 0){if(this.map.size>=this.max){const a=this.map.keys().next().value;this.delete(a)}this.map.set(n,r)}return this}}return R4=e,R4}var I4,JW;function ai(){if(JW)return I4;JW=1;const e=/\s+/g;class t{constructor(k,O){if(O=s(O),k instanceof t)return k.loose===!!O.loose&&k.includePrerelease===!!O.includePrerelease?k:new t(k.raw,O);if(k instanceof a)return this.raw=k.value,this.set=[[k]],this.formatted=void 0,this;if(this.options=O,this.loose=!!O.loose,this.includePrerelease=!!O.includePrerelease,this.raw=k.trim().replace(e," "),this.set=this.raw.split("||").map(L=>this.parseRange(L.trim())).filter(L=>L.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const L=this.set[0];if(this.set=this.set.filter(F=>!y(F[0])),this.set.length===0)this.set=[L];else if(this.set.length>1){for(const F of this.set)if(F.length===1&&v(F[0])){this.set=[F];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let k=0;k<this.set.length;k++){k>0&&(this.formatted+="||");const O=this.set[k];for(let L=0;L<O.length;L++)L>0&&(this.formatted+=" "),this.formatted+=O[L].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(k){const L=((this.options.includePrerelease&&p)|(this.options.loose&&g))+":"+k,F=r.get(L);if(F)return F;const U=this.options.loose,V=U?c[u.HYPHENRANGELOOSE]:c[u.HYPHENRANGE];k=k.replace(V,N(this.options.includePrerelease)),o("hyphen replace",k),k=k.replace(c[u.COMPARATORTRIM],d),o("comparator trim",k),k=k.replace(c[u.TILDETRIM],m),o("tilde trim",k),k=k.replace(c[u.CARETTRIM],h),o("caret trim",k);let W=k.split(" ").map($=>b($,this.options)).join(" ").split(/\s+/).map($=>j($,this.options));U&&(W=W.filter($=>(o("loose invalid filter",$,this.options),!!$.match(c[u.COMPARATORLOOSE])))),o("range list",W);const H=new Map,G=W.map($=>new a($,this.options));for(const $ of G){if(y($))return[$];H.set($.value,$)}H.size>1&&H.has("")&&H.delete("");const K=[...H.values()];return r.set(L,K),K}intersects(k,O){if(!(k instanceof t))throw new TypeError("a Range is required");return this.set.some(L=>x(L,O)&&k.set.some(F=>x(F,O)&&L.every(U=>F.every(V=>U.intersects(V,O)))))}test(k){if(!k)return!1;if(typeof k=="string")try{k=new i(k,this.options)}catch{return!1}for(let O=0;O<this.set.length;O++)if(P(this.set[O],k,this.options))return!0;return!1}}I4=t;const n=VLe(),r=new n,s=$O(),a=JS(),o=XS(),i=Js(),{safeRe:c,t:u,comparatorTrimReplace:d,tildeTrimReplace:m,caretTrimReplace:h}=G0(),{FLAG_INCLUDE_PRERELEASE:p,FLAG_LOOSE:g}=QS(),y=R=>R.value==="<0.0.0-0",v=R=>R.value==="",x=(R,k)=>{let O=!0;const L=R.slice();let F=L.pop();for(;O&&L.length;)O=L.every(U=>F.intersects(U,k)),F=L.pop();return O},b=(R,k)=>(o("comp",R,k),R=C(R,k),o("caret",R),R=w(R,k),o("tildes",R),R=M(R,k),o("xrange",R),R=I(R,k),o("stars",R),R),_=R=>!R||R.toLowerCase()==="x"||R==="*",w=(R,k)=>R.trim().split(/\s+/).map(O=>S(O,k)).join(" "),S=(R,k)=>{const O=k.loose?c[u.TILDELOOSE]:c[u.TILDE];return R.replace(O,(L,F,U,V,W)=>{o("tilde",R,L,F,U,V,W);let H;return _(F)?H="":_(U)?H=`>=${F}.0.0 <${+F+1}.0.0-0`:_(V)?H=`>=${F}.${U}.0 <${F}.${+U+1}.0-0`:W?(o("replaceTilde pr",W),H=`>=${F}.${U}.${V}-${W} <${F}.${+U+1}.0-0`):H=`>=${F}.${U}.${V} <${F}.${+U+1}.0-0`,o("tilde return",H),H})},C=(R,k)=>R.trim().split(/\s+/).map(O=>E(O,k)).join(" "),E=(R,k)=>{o("caret",R,k);const O=k.loose?c[u.CARETLOOSE]:c[u.CARET],L=k.includePrerelease?"-0":"";return R.replace(O,(F,U,V,W,H)=>{o("caret",R,F,U,V,W,H);let G;return _(U)?G="":_(V)?G=`>=${U}.0.0${L} <${+U+1}.0.0-0`:_(W)?U==="0"?G=`>=${U}.${V}.0${L} <${U}.${+V+1}.0-0`:G=`>=${U}.${V}.0${L} <${+U+1}.0.0-0`:H?(o("replaceCaret pr",H),U==="0"?V==="0"?G=`>=${U}.${V}.${W}-${H} <${U}.${V}.${+W+1}-0`:G=`>=${U}.${V}.${W}-${H} <${U}.${+V+1}.0-0`:G=`>=${U}.${V}.${W}-${H} <${+U+1}.0.0-0`):(o("no pr"),U==="0"?V==="0"?G=`>=${U}.${V}.${W}${L} <${U}.${V}.${+W+1}-0`:G=`>=${U}.${V}.${W}${L} <${U}.${+V+1}.0-0`:G=`>=${U}.${V}.${W} <${+U+1}.0.0-0`),o("caret return",G),G})},M=(R,k)=>(o("replaceXRanges",R,k),R.split(/\s+/).map(O=>T(O,k)).join(" ")),T=(R,k)=>{R=R.trim();const O=k.loose?c[u.XRANGELOOSE]:c[u.XRANGE];return R.replace(O,(L,F,U,V,W,H)=>{o("xRange",R,L,F,U,V,W,H);const G=_(U),K=G||_(V),$=K||_(W),q=$;return F==="="&&q&&(F=""),H=k.includePrerelease?"-0":"",G?F===">"||F==="<"?L="<0.0.0-0":L="*":F&&q?(K&&(V=0),W=0,F===">"?(F=">=",K?(U=+U+1,V=0,W=0):(V=+V+1,W=0)):F==="<="&&(F="<",K?U=+U+1:V=+V+1),F==="<"&&(H="-0"),L=`${F+U}.${V}.${W}${H}`):K?L=`>=${U}.0.0${H} <${+U+1}.0.0-0`:$&&(L=`>=${U}.${V}.0${H} <${U}.${+V+1}.0-0`),o("xRange return",L),L})},I=(R,k)=>(o("replaceStars",R,k),R.trim().replace(c[u.STAR],"")),j=(R,k)=>(o("replaceGTE0",R,k),R.trim().replace(c[k.includePrerelease?u.GTE0PRE:u.GTE0],"")),N=R=>(k,O,L,F,U,V,W,H,G,K,$,q)=>(_(L)?O="":_(F)?O=`>=${L}.0.0${R?"-0":""}`:_(U)?O=`>=${L}.${F}.0${R?"-0":""}`:V?O=`>=${O}`:O=`>=${O}${R?"-0":""}`,_(G)?H="":_(K)?H=`<${+G+1}.0.0-0`:_($)?H=`<${G}.${+K+1}.0-0`:q?H=`<=${G}.${K}.${$}-${q}`:R?H=`<${G}.${K}.${+$+1}-0`:H=`<=${H}`,`${O} ${H}`.trim()),P=(R,k,O)=>{for(let L=0;L<R.length;L++)if(!R[L].test(k))return!1;if(k.prerelease.length&&!O.includePrerelease){for(let L=0;L<R.length;L++)if(o(R[L].semver),R[L].semver!==a.ANY&&R[L].semver.prerelease.length>0){const F=R[L].semver;if(F.major===k.major&&F.minor===k.minor&&F.patch===k.patch)return!0}return!1}return!0};return I4}var j4,eH;function JS(){if(eH)return j4;eH=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(d,m){if(m=n(m),d instanceof t){if(d.loose===!!m.loose)return d;d=d.value}d=d.trim().split(/\s+/).join(" "),o("comparator",d,m),this.options=m,this.loose=!!m.loose,this.parse(d),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(d){const m=this.options.loose?r[s.COMPARATORLOOSE]:r[s.COMPARATOR],h=d.match(m);if(!h)throw new TypeError(`Invalid comparator: ${d}`);this.operator=h[1]!==void 0?h[1]:"",this.operator==="="&&(this.operator=""),h[2]?this.semver=new i(h[2],this.options.loose):this.semver=e}toString(){return this.value}test(d){if(o("Comparator.test",d,this.options.loose),this.semver===e||d===e)return!0;if(typeof d=="string")try{d=new i(d,this.options)}catch{return!1}return a(d,this.operator,this.semver,this.options)}intersects(d,m){if(!(d instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new c(d.value,m).test(this.value):d.operator===""?d.value===""?!0:new c(this.value,m).test(d.semver):(m=n(m),m.includePrerelease&&(this.value==="<0.0.0-0"||d.value==="<0.0.0-0")||!m.includePrerelease&&(this.value.startsWith("<0.0.0")||d.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&d.operator.startsWith(">")||this.operator.startsWith("<")&&d.operator.startsWith("<")||this.semver.version===d.semver.version&&this.operator.includes("=")&&d.operator.includes("=")||a(this.semver,"<",d.semver,m)&&this.operator.startsWith(">")&&d.operator.startsWith("<")||a(this.semver,">",d.semver,m)&&this.operator.startsWith("<")&&d.operator.startsWith(">")))}}j4=t;const n=$O(),{safeRe:r,t:s}=G0(),a=rle(),o=XS(),i=Js(),c=ai();return j4}var O4,tH;function eC(){if(tH)return O4;tH=1;const e=ai();return O4=(n,r,s)=>{try{r=new e(r,s)}catch{return!1}return r.test(n)},O4}var L4,nH;function $Le(){if(nH)return L4;nH=1;const e=ai();return L4=(n,r)=>new e(n,r).set.map(s=>s.map(a=>a.value).join(" ").trim().split(" ")),L4}var D4,rH;function WLe(){if(rH)return D4;rH=1;const e=Js(),t=ai();return D4=(r,s,a)=>{let o=null,i=null,c=null;try{c=new t(s,a)}catch{return null}return r.forEach(u=>{c.test(u)&&(!o||i.compare(u)===-1)&&(o=u,i=new e(o,a))}),o},D4}var F4,sH;function HLe(){if(sH)return F4;sH=1;const e=Js(),t=ai();return F4=(r,s,a)=>{let o=null,i=null,c=null;try{c=new t(s,a)}catch{return null}return r.forEach(u=>{c.test(u)&&(!o||i.compare(u)===1)&&(o=u,i=new e(o,a))}),o},F4}var U4,aH;function zLe(){if(aH)return U4;aH=1;const e=Js(),t=ai(),n=ZS();return U4=(s,a)=>{s=new t(s,a);let o=new e("0.0.0");if(s.test(o)||(o=new e("0.0.0-0"),s.test(o)))return o;o=null;for(let i=0;i<s.set.length;++i){const c=s.set[i];let u=null;c.forEach(d=>{const m=new e(d.semver.version);switch(d.operator){case">":m.prerelease.length===0?m.patch++:m.prerelease.push(0),m.raw=m.format();case"":case">=":(!u||n(m,u))&&(u=m);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${d.operator}`)}}),u&&(!o||n(o,u))&&(o=u)}return o&&s.test(o)?o:null},U4}var B4,oH;function GLe(){if(oH)return B4;oH=1;const e=ai();return B4=(n,r)=>{try{return new e(n,r).range||"*"}catch{return null}},B4}var V4,iH;function qO(){if(iH)return V4;iH=1;const e=Js(),t=JS(),{ANY:n}=t,r=ai(),s=eC(),a=ZS(),o=HO(),i=GO(),c=zO();return V4=(d,m,h,p)=>{d=new e(d,p),m=new r(m,p);let g,y,v,x,b;switch(h){case">":g=a,y=i,v=o,x=">",b=">=";break;case"<":g=o,y=c,v=a,x="<",b="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(s(d,m,p))return!1;for(let _=0;_<m.set.length;++_){const w=m.set[_];let S=null,C=null;if(w.forEach(E=>{E.semver===n&&(E=new t(">=0.0.0")),S=S||E,C=C||E,g(E.semver,S.semver,p)?S=E:v(E.semver,C.semver,p)&&(C=E)}),S.operator===x||S.operator===b||(!C.operator||C.operator===x)&&y(d,C.semver))return!1;if(C.operator===b&&v(d,C.semver))return!1}return!0},V4}var $4,lH;function qLe(){if(lH)return $4;lH=1;const e=qO();return $4=(n,r,s)=>e(n,r,">",s),$4}var W4,cH;function KLe(){if(cH)return W4;cH=1;const e=qO();return W4=(n,r,s)=>e(n,r,"<",s),W4}var H4,uH;function YLe(){if(uH)return H4;uH=1;const e=ai();return H4=(n,r,s)=>(n=new e(n,s),r=new e(r,s),n.intersects(r,s)),H4}var z4,dH;function QLe(){if(dH)return z4;dH=1;const e=eC(),t=si();return z4=(n,r,s)=>{const a=[];let o=null,i=null;const c=n.sort((h,p)=>t(h,p,s));for(const h of c)e(h,r,s)?(i=h,o||(o=h)):(i&&a.push([o,i]),i=null,o=null);o&&a.push([o,null]);const u=[];for(const[h,p]of a)h===p?u.push(h):!p&&h===c[0]?u.push("*"):p?h===c[0]?u.push(`<=${p}`):u.push(`${h} - ${p}`):u.push(`>=${h}`);const d=u.join(" || "),m=typeof r.raw=="string"?r.raw:String(r);return d.length<m.length?d:r},z4}var G4,fH;function XLe(){if(fH)return G4;fH=1;const e=ai(),t=JS(),{ANY:n}=t,r=eC(),s=si(),a=(m,h,p={})=>{if(m===h)return!0;m=new e(m,p),h=new e(h,p);let g=!1;e:for(const y of m.set){for(const v of h.set){const x=c(y,v,p);if(g=g||x!==null,x)continue e}if(g)return!1}return!0},o=[new t(">=0.0.0-0")],i=[new t(">=0.0.0")],c=(m,h,p)=>{if(m===h)return!0;if(m.length===1&&m[0].semver===n){if(h.length===1&&h[0].semver===n)return!0;p.includePrerelease?m=o:m=i}if(h.length===1&&h[0].semver===n){if(p.includePrerelease)return!0;h=i}const g=new Set;let y,v;for(const M of m)M.operator===">"||M.operator===">="?y=u(y,M,p):M.operator==="<"||M.operator==="<="?v=d(v,M,p):g.add(M.semver);if(g.size>1)return null;let x;if(y&&v){if(x=s(y.semver,v.semver,p),x>0)return null;if(x===0&&(y.operator!==">="||v.operator!=="<="))return null}for(const M of g){if(y&&!r(M,String(y),p)||v&&!r(M,String(v),p))return null;for(const T of h)if(!r(M,String(T),p))return!1;return!0}let b,_,w,S,C=v&&!p.includePrerelease&&v.semver.prerelease.length?v.semver:!1,E=y&&!p.includePrerelease&&y.semver.prerelease.length?y.semver:!1;C&&C.prerelease.length===1&&v.operator==="<"&&C.prerelease[0]===0&&(C=!1);for(const M of h){if(S=S||M.operator===">"||M.operator===">=",w=w||M.operator==="<"||M.operator==="<=",y){if(E&&M.semver.prerelease&&M.semver.prerelease.length&&M.semver.major===E.major&&M.semver.minor===E.minor&&M.semver.patch===E.patch&&(E=!1),M.operator===">"||M.operator===">="){if(b=u(y,M,p),b===M&&b!==y)return!1}else if(y.operator===">="&&!r(y.semver,String(M),p))return!1}if(v){if(C&&M.semver.prerelease&&M.semver.prerelease.length&&M.semver.major===C.major&&M.semver.minor===C.minor&&M.semver.patch===C.patch&&(C=!1),M.operator==="<"||M.operator==="<="){if(_=d(v,M,p),_===M&&_!==v)return!1}else if(v.operator==="<="&&!r(v.semver,String(M),p))return!1}if(!M.operator&&(v||y)&&x!==0)return!1}return!(y&&w&&!v&&x!==0||v&&S&&!y&&x!==0||E||C)},u=(m,h,p)=>{if(!m)return h;const g=s(m.semver,h.semver,p);return g>0?m:g<0||h.operator===">"&&m.operator===">="?h:m},d=(m,h,p)=>{if(!m)return h;const g=s(m.semver,h.semver,p);return g<0?m:g>0||h.operator==="<"&&m.operator==="<="?h:m};return G4=a,G4}var q4,mH;function ZLe(){if(mH)return q4;mH=1;const e=G0(),t=QS(),n=Js(),r=ele(),s=up(),a=kLe(),o=NLe(),i=ALe(),c=PLe(),u=RLe(),d=ILe(),m=jLe(),h=OLe(),p=si(),g=LLe(),y=DLe(),v=WO(),x=FLe(),b=ULe(),_=ZS(),w=HO(),S=tle(),C=nle(),E=zO(),M=GO(),T=rle(),I=BLe(),j=JS(),N=ai(),P=eC(),R=$Le(),k=WLe(),O=HLe(),L=zLe(),F=GLe(),U=qO(),V=qLe(),W=KLe(),H=YLe(),G=QLe(),K=XLe();return q4={parse:s,valid:a,clean:o,inc:i,diff:c,major:u,minor:d,patch:m,prerelease:h,compare:p,rcompare:g,compareLoose:y,compareBuild:v,sort:x,rsort:b,gt:_,lt:w,eq:S,neq:C,gte:E,lte:M,cmp:T,coerce:I,Comparator:j,Range:N,satisfies:P,toComparators:R,maxSatisfying:k,minSatisfying:O,minVersion:L,validRange:F,outside:U,gtr:V,ltr:W,intersects:H,simplifyRange:G,subset:K,SemVer:n,re:e.re,src:e.src,tokens:e.t,SEMVER_SPEC_VERSION:t.SEMVER_SPEC_VERSION,RELEASE_TYPES:t.RELEASE_TYPES,compareIdentifiers:r.compareIdentifiers,rcompareIdentifiers:r.rcompareIdentifiers},q4}var hH;function JLe(){return hH||(hH=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.matchesRule=e.ObfuscatedOperatorType=e.OperatorType=void 0;const t=ZLe(),n=cp();var r;(function(v){v.MATCHES="MATCHES",v.NOT_MATCHES="NOT_MATCHES",v.GTE="GTE",v.GT="GT",v.LTE="LTE",v.LT="LT",v.ONE_OF="ONE_OF",v.NOT_ONE_OF="NOT_ONE_OF",v.IS_NULL="IS_NULL"})(r=e.OperatorType||(e.OperatorType={}));var s;(function(v){v.MATCHES="05015086bdd8402218f6aad6528bef08",v.NOT_MATCHES="8323761667755378c3a78e0a6ed37a78",v.GTE="32d35312e8f24bc1669bd2b45c00d47c",v.GT="cd6a9bd2a175104eed40f0d33a8b4020",v.LTE="cc981ecc65ecf63ad1673cbec9c64198",v.LT="c562607189d77eb9dfb707464c1e7b0b",v.ONE_OF="27457ce369f2a74203396a35ef537c0b",v.NOT_ONE_OF="602f5ee0b6e84fe29f43ab48b9e1addf",v.IS_NULL="dbd9c38e0339e6c34bd48cafc59be388"})(s=e.ObfuscatedOperatorType||(e.ObfuscatedOperatorType={}));var a;(function(v){v.PLAIN_STRING="PLAIN_STRING",v.STRING_ARRAY="STRING_ARRAY",v.SEM_VER="SEM_VER",v.NUMERIC="NUMERIC"})(a||(a={}));function o(v,x,b){return!i(x,v.conditions,b).includes(!1)}e.matchesRule=o;function i(v,x,b){return x.map(_=>b?u(Object.entries(v).reduce((w,[S,C])=>Object.assign({[(0,n.getMD5Hash)(S)]:C},w),{}),_):c(v,_))}function c(v,x){const b=v[x.attribute],_=y(x.value);if(x.operator===r.IS_NULL)return x.value?b==null:b!=null;if(b!=null)switch(x.operator){case r.GTE:return _===a.SEM_VER?g(b,x.value,t.gte):p(b,x.value,(w,S)=>w>=S);case r.GT:return _===a.SEM_VER?g(b,x.value,t.gt):p(b,x.value,(w,S)=>w>S);case r.LTE:return _===a.SEM_VER?g(b,x.value,t.lte):p(b,x.value,(w,S)=>w<=S);case r.LT:return _===a.SEM_VER?g(b,x.value,t.lt):p(b,x.value,(w,S)=>w<S);case r.MATCHES:return new RegExp(x.value).test(b);case r.NOT_MATCHES:return!new RegExp(x.value).test(b);case r.ONE_OF:return d(b.toString(),x.value);case r.NOT_ONE_OF:return m(b.toString(),x.value)}return!1}function u(v,x){const b=v[x.attribute],_=y(b);if(x.operator===s.IS_NULL)return x.value===(0,n.getMD5Hash)("true")?b==null:b!=null;if(b!=null)switch(x.operator){case s.GTE:return _===a.SEM_VER?g(b,(0,n.decodeBase64)(x.value),t.gte):p(b,Number((0,n.decodeBase64)(x.value)),(w,S)=>w>=S);case s.GT:return _===a.SEM_VER?g(b,(0,n.decodeBase64)(x.value),t.gt):p(b,Number((0,n.decodeBase64)(x.value)),(w,S)=>w>S);case s.LTE:return _===a.SEM_VER?g(b,(0,n.decodeBase64)(x.value),t.lte):p(b,Number((0,n.decodeBase64)(x.value)),(w,S)=>w<=S);case s.LT:return _===a.SEM_VER?g(b,(0,n.decodeBase64)(x.value),t.lt):p(b,Number((0,n.decodeBase64)(x.value)),(w,S)=>w<S);case s.MATCHES:return new RegExp((0,n.decodeBase64)(x.value)).test(b);case s.NOT_MATCHES:return!new RegExp((0,n.decodeBase64)(x.value)).test(b);case s.ONE_OF:return d((0,n.getMD5Hash)(b.toString()),x.value);case s.NOT_ONE_OF:return m((0,n.getMD5Hash)(b.toString()),x.value)}return!1}function d(v,x){return h(v,x).length>0}function m(v,x){return h(v,x).length===0}function h(v,x){return x.filter(b=>b===v)}function p(v,x,b){return b(Number(v),Number(x))}function g(v,x,b){return!!(0,t.valid)(v)&&!!(0,t.valid)(x)&&b(v,x)}function y(v){return typeof v=="number"?a.NUMERIC:Array.isArray(v)?a.STRING_ARRAY:typeof v=="string"&&(0,t.valid)(v)?a.SEM_VER:isNaN(Number(v))?a.PLAIN_STRING:a.NUMERIC}}(r4)),r4}var pH;function e9e(){if(pH)return Na;pH=1,Object.defineProperty(Na,"__esModule",{value:!0}),Na.matchesRules=Na.noneResult=Na.hashKey=Na.isInShardRange=Na.Evaluator=void 0;const e=Jie(),t=JLe(),n=Xie();class r{constructor(u){this.getMatchedEvaluationDetailsMessage=(d,m,h)=>{var p;const g=!!(!((p=d.rules)===null||p===void 0)&&p.length),y=d.splits.length>1,v=m.shards.length>1,x=y||v;return g&&x?`Supplied attributes match rules defined in allocation "${d.key}" and ${h} belongs to the range of traffic assigned to "${m.variationKey}".`:g&&!x?`Supplied attributes match rules defined in allocation "${d.key}".`:`${h} belongs to the range of traffic assigned to "${m.variationKey}" defined in allocation "${d.key}".`},this.sharder=u??new n.MD5Sharder}evaluateFlag(u,d,m,h,p,g){var y,v;const x=new e.FlagEvaluationDetailsBuilder(d.configEnvironment.name,u.allocations,d.configFetchedAt,d.configPublishedAt);if(!u.enabled)return o(u.key,m,h,x.buildForNoneResult("FLAG_UNRECOGNIZED_OR_DISABLED",`Unrecognized or disabled flag: ${u.key}`));const b=new Date,_=[];for(let w=0;w<u.allocations.length;w++){const S=u.allocations[w],C=T=>{_.push({key:S.key,allocationEvaluationCode:T,orderPosition:w+1})};if(S.startAt&&b<new Date(S.startAt)){C(e.AllocationEvaluationCode.BEFORE_START_TIME);continue}if(S.endAt&&b>new Date(S.endAt)){C(e.AllocationEvaluationCode.AFTER_END_TIME);continue}const{matched:E,matchedRule:M}=i((y=S?.rules)!==null&&y!==void 0?y:[],Object.assign({id:m},h),p);if(E){for(const T of S.splits)if(T.shards.every(I=>this.matchesShard(I,m,u.totalShards))){const I=u.variations[T.variationKey],j=x.setMatch(w,I,S,M,_,g).build("MATCH",this.getMatchedEvaluationDetailsMessage(S,T,m));return{flagKey:u.key,subjectKey:m,subjectAttributes:h,allocationKey:S.key,variation:I,extraLogging:(v=T.extraLogging)!==null&&v!==void 0?v:{},doLog:S.doLog,flagEvaluationDetails:j}}C(e.AllocationEvaluationCode.TRAFFIC_EXPOSURE_MISS)}else C(e.AllocationEvaluationCode.FAILING_RULE)}return o(u.key,m,h,x.setNoMatchFound(_).build("DEFAULT_ALLOCATION_NULL",'No allocations matched. Falling back to "Default Allocation", serving NULL'))}matchesShard(u,d,m){const h=this.sharder.getShard(a(u.salt,d),m);return u.ranges.some(p=>s(h,p))}}Na.Evaluator=r;function s(c,u){return u.start<=c&&c<u.end}Na.isInShardRange=s;function a(c,u){return`${c}-${u}`}Na.hashKey=a;function o(c,u,d,m){return{flagKey:c,subjectKey:u,subjectAttributes:d,allocationKey:null,variation:null,extraLogging:{},doLog:!1,flagEvaluationDetails:m}}Na.noneResult=o;function i(c,u,d){if(!c.length)return{matched:!0,matchedRule:null};let m=null;return c.some(p=>{const g=(0,t.matchesRule)(p,u,d);return g&&(m=p),g})?{matched:!0,matchedRule:m}:{matched:!1,matchedRule:null}}return Na.matchesRules=i,Na}var If={},gH;function sle(){if(gH)return If;gH=1,Object.defineProperty(If,"__esModule",{value:!0}),If.HttpRequestError=void 0;class e extends Error{constructor(r,s,a){super(r),this.message=r,this.status=s,this.cause=a,a&&(this.cause=a)}}If.HttpRequestError=e;class t{constructor(r,s){this.apiEndpoints=r,this.timeout=s}async getUniversalFlagConfiguration(){const r=this.apiEndpoints.ufcEndpoint();return await this.rawGet(r)}async getBanditParameters(){const r=this.apiEndpoints.banditParametersEndpoint();return await this.rawGet(r)}async rawGet(r){try{const s=new AbortController,a=s.signal,o=setTimeout(()=>s.abort(),this.timeout),i=await fetch(r.toString(),{signal:a});if(clearTimeout(o),!i?.ok)throw new e("Failed to fetch data",i?.status);return await i.json()}catch(s){throw s.name==="AbortError"?new e("Request timed out",408,s):s instanceof e?s:new e("Network error",0,s)}}}return If.default=t,If}var Ex={},vg={},yH;function t9e(){if(yH)return vg;yH=1,Object.defineProperty(vg,"__esModule",{value:!0}),vg.waitForMs=void 0;async function e(t){await new Promise(n=>setTimeout(n,t))}return vg.waitForMs=e,vg}var vH;function n9e(){if(vH)return Ex;vH=1,Object.defineProperty(Ex,"__esModule",{value:!0});const e=YS(),t=H0(),n=t9e();function r(a,o,i){let c=!1,u=0,d=a,m=!1,h;const p=async()=>{var v;c=!1;let x=!1,b=i?.skipInitialPoll?0:1+((v=i?.maxStartRetries)!==null&&v!==void 0?v:t.DEFAULT_INITIAL_CONFIG_REQUEST_RETRIES),_=null;for(;!x&&b>0;)try{await o(),x=!0,m=!1,e.logger.info("Eppo SDK successfully requested initial configuration")}catch(S){if(m=!0,e.logger.warn(`Eppo SDK encountered an error with initial poll of configurations: ${S.message}`),--b>0){const C=s(a);e.logger.warn(`Eppo SDK will retry the initial poll again in ${C} ms (${b} attempts remaining)`),await(0,n.waitForMs)(C)}else i?.pollAfterFailedStart?e.logger.warn("Eppo SDK initial poll failed; will attempt regular polling"):(e.logger.error("Eppo SDK initial poll failed. Aborting polling"),g()),i?.errorOnFailedStart&&(_=S)}if(!c&&(x&&i?.pollAfterSuccessfulStart||!x&&i?.pollAfterFailedStart)?(e.logger.info(`Eppo SDK starting regularly polling every ${a} ms`),h=setTimeout(y,a)):e.logger.info("Eppo SDK will not poll for configuration updates"),_)throw e.logger.info("Eppo SDK rethrowing start error"),_},g=()=>{c||(c=!0,h&&clearTimeout(h),e.logger.info("Eppo SDK polling stopped"))};async function y(){var v;if(!c){try{await o(),u=0,d=a,m&&(m=!1,e.logger.info("Eppo SDK poll successful; resuming normal polling"))}catch(x){m=!0,e.logger.warn(`Eppo SDK encountered an error polling configurations: ${x.message}`);const b=1+((v=i?.maxPollRetries)!==null&&v!==void 0?v:t.DEFAULT_POLL_CONFIG_REQUEST_RETRIES);if(++u<b){const _=Math.pow(2,u),w=s(a);d=_*a+w,e.logger.warn(`Eppo SDK will try polling again in ${d} ms (${b-u} attempts remaining)`)}else e.logger.error(`Eppo SDK reached maximum of ${u} failed polling attempts. Stopping polling`),g()}setTimeout(y,d)}}return{start:p,stop:g}}Ex.default=r;function s(a){const o=a*t.POLL_JITTER_PCT/2,i=Math.max(Math.floor(Math.random()*a*t.POLL_JITTER_PCT/2),1);return o+i}return Ex}var Xu={},xH;function ale(){if(xH)return Xu;xH=1,Object.defineProperty(Xu,"__esModule",{value:!0}),Xu.validateNotBlank=Xu.InvalidArgumentError=void 0;class e extends Error{}Xu.InvalidArgumentError=e;function t(n,r){if(n==null||n.length===0)throw new e(r)}return Xu.validateNotBlank=t,Xu}var xg={};const r9e="4.0.0",s9e={version:r9e};var bH;function a9e(){if(bH)return xg;bH=1,Object.defineProperty(xg,"__esModule",{value:!0}),xg.LIB_VERSION=void 0;const e=s9e;return xg.LIB_VERSION=e.version,xg}var _H;function o9e(){if(_H)return Nc;_H=1,Object.defineProperty(Nc,"__esModule",{value:!0}),Nc.checkValueTypeMatch=Nc.checkTypeMatch=void 0;const e=Yie(),t=YS(),n=ELe(),r=Qie(),s=Zie(),a=H0(),o=MLe(),i=TLe(),c=e9e(),u=Jie(),d=sle(),m=z0(),h=cp(),p=n9e(),g=ale(),y=a9e();class v{constructor(w,S,C,E,M=!1){this.flagConfigurationStore=w,this.banditVariationConfigurationStore=S,this.banditModelConfigurationStore=C,this.configurationRequestParameters=E,this.isObfuscated=M,this.queuedAssignmentEvents=[],this.queuedBanditEvents=[],this.isGracefulFailureMode=!0,this.evaluator=new c.Evaluator,this.banditEvaluator=new n.BanditEvaluator}setConfigurationRequestParameters(w){this.configurationRequestParameters=w}setFlagConfigurationStore(w){this.flagConfigurationStore=w}setBanditVariationConfigurationStore(w){this.banditVariationConfigurationStore=w}setBanditModelConfigurationStore(w){this.banditModelConfigurationStore=w}setIsObfuscated(w){this.isObfuscated=w}async fetchFlagConfigurations(){var w,S;if(!this.configurationRequestParameters)throw new Error("Eppo SDK unable to fetch flag configurations without configuration request parameters");if(this.requestPoller&&this.requestPoller.stop(),!await this.flagConfigurationStore.isExpired()){t.logger.info("[Eppo SDK] Configuration store is not expired. Skipping fetching flag configurations");return}const{apiKey:E,sdkName:M,sdkVersion:T,baseUrl:I,requestTimeoutMs:j=a.DEFAULT_REQUEST_TIMEOUT_MS,numInitialRequestRetries:N=a.DEFAULT_INITIAL_CONFIG_REQUEST_RETRIES,numPollRequestRetries:P=a.DEFAULT_POLL_CONFIG_REQUEST_RETRIES,pollAfterSuccessfulInitialization:R=!1,pollAfterFailedInitialization:k=!1,throwOnFailedInitialization:O=!1,skipInitialPoll:L=!1}=this.configurationRequestParameters,F=new e.default({baseUrl:I,queryParams:{apiKey:E,sdkName:M,sdkVersion:T}}),U=new d.default(F,j),V=new s.default(U,this.flagConfigurationStore,(w=this.banditVariationConfigurationStore)!==null&&w!==void 0?w:null,(S=this.banditModelConfigurationStore)!==null&&S!==void 0?S:null);this.requestPoller=(0,p.default)(a.POLL_INTERVAL_MS,V.fetchAndStoreConfigurations.bind(V),{maxStartRetries:N,maxPollRetries:P,pollAfterSuccessfulStart:R,pollAfterFailedStart:k,errorOnFailedStart:O,skipInitialPoll:L}),await this.requestPoller.start()}stopPolling(){this.requestPoller&&this.requestPoller.stop()}getStringAssignment(w,S,C,E){return this.getStringAssignmentDetails(w,S,C,E).variation}getStringAssignmentDetails(w,S,C,E){var M;const{eppoValue:T,flagEvaluationDetails:I}=this.getAssignmentVariation(w,S,C,i.EppoValue.String(E),m.VariationType.STRING);return{variation:(M=T.stringValue)!==null&&M!==void 0?M:E,action:null,evaluationDetails:I}}getBoolAssignment(w,S,C,E){return this.getBooleanAssignment(w,S,C,E)}getBooleanAssignment(w,S,C,E){return this.getBooleanAssignmentDetails(w,S,C,E).variation}getBooleanAssignmentDetails(w,S,C,E){var M;const{eppoValue:T,flagEvaluationDetails:I}=this.getAssignmentVariation(w,S,C,i.EppoValue.Bool(E),m.VariationType.BOOLEAN);return{variation:(M=T.boolValue)!==null&&M!==void 0?M:E,action:null,evaluationDetails:I}}getIntegerAssignment(w,S,C,E){return this.getIntegerAssignmentDetails(w,S,C,E).variation}getIntegerAssignmentDetails(w,S,C,E){var M;const{eppoValue:T,flagEvaluationDetails:I}=this.getAssignmentVariation(w,S,C,i.EppoValue.Numeric(E),m.VariationType.INTEGER);return{variation:(M=T.numericValue)!==null&&M!==void 0?M:E,action:null,evaluationDetails:I}}getNumericAssignment(w,S,C,E){return this.getNumericAssignmentDetails(w,S,C,E).variation}getNumericAssignmentDetails(w,S,C,E){var M;const{eppoValue:T,flagEvaluationDetails:I}=this.getAssignmentVariation(w,S,C,i.EppoValue.Numeric(E),m.VariationType.NUMERIC);return{variation:(M=T.numericValue)!==null&&M!==void 0?M:E,action:null,evaluationDetails:I}}getJSONAssignment(w,S,C,E){return this.getJSONAssignmentDetails(w,S,C,E).variation}getJSONAssignmentDetails(w,S,C,E){var M;const{eppoValue:T,flagEvaluationDetails:I}=this.getAssignmentVariation(w,S,C,i.EppoValue.JSON(E),m.VariationType.JSON);return{variation:(M=T.objectValue)!==null&&M!==void 0?M:E,action:null,evaluationDetails:I}}getBanditAction(w,S,C,E,M){const{variation:T,action:I}=this.getBanditActionDetails(w,S,C,E,M);return{variation:T,action:I}}getBanditActionDetails(w,S,C,E,M){var T,I,j;const N=this.flagEvaluationDetailsBuilder(w),P={variation:M,action:null};let R=M,k=null;try{const O=(T=this.banditVariationConfigurationStore)===null||T===void 0?void 0:T.get(w);if(O&&!Object.keys(E).length)return Object.assign(Object.assign({},P),{evaluationDetails:N.buildForNoneResult("NO_ACTIONS_SUPPLIED_FOR_BANDIT","No bandit actions passed for a flag known to have an active bandit")});const L=this.ensureNonContextualSubjectAttributes(C),{variation:F,evaluationDetails:U}=this.getStringAssignmentDetails(w,S,L,M);R=F;const V=(I=O?.find(W=>W.variationValue===R))===null||I===void 0?void 0:I.key;if(V){const W=(j=this.banditModelConfigurationStore)===null||j===void 0?void 0:j.get(V);if(!W)throw new Error("No model parameters for bandit "+V);const H=W.modelData,G=this.ensureContextualSubjectAttributes(C),K=this.ensureActionsWithContextualAttributes(E),$=this.banditEvaluator.evaluateBandit(w,S,G,K,H);k=$.actionKey,U.banditAction=k,U.banditKey=V;const q={timestamp:new Date().toISOString(),featureFlag:w,bandit:V,subject:S,action:k,actionProbability:$.actionWeight,optimalityGap:$.optimalityGap,modelVersion:W.modelVersion,subjectNumericAttributes:G.numericAttributes,subjectCategoricalAttributes:G.categoricalAttributes,actionNumericAttributes:K[k].numericAttributes,actionCategoricalAttributes:K[k].categoricalAttributes,metaData:this.buildLoggerMetadata(),evaluationDetails:U};this.logBanditAction(q)}return{variation:R,action:k,evaluationDetails:U}}catch(O){if(t.logger.error("Error evaluating bandit action",O),!this.isGracefulFailureMode)throw O;return Object.assign(Object.assign({},P),{evaluationDetails:N.buildForNoneResult("ASSIGNMENT_ERROR",`Error evaluating bandit action: ${O.message}`)})}}ensureNonContextualSubjectAttributes(w){let S;if(this.isInstanceOfContextualAttributes(w)){const C=w;S=Object.assign(Object.assign({},C.numericAttributes),C.categoricalAttributes)}else S=w;return S}ensureContextualSubjectAttributes(w){let S;return this.isInstanceOfContextualAttributes(w)?S=w:S=this.deduceAttributeContext(w),S}ensureActionsWithContextualAttributes(w){let S={};return Array.isArray(w)?w.forEach(C=>{S[C]={numericAttributes:{},categoricalAttributes:{}}}):Object.values(w).every(this.isInstanceOfContextualAttributes)?S=w:Object.entries(w).forEach(([C,E])=>{S[C]=this.deduceAttributeContext(E)}),S}isInstanceOfContextualAttributes(w){return!!(typeof w=="object"&&w&&"numericAttributes"in w&&"categoricalAttributes"in w)}deduceAttributeContext(w){const S={numericAttributes:{},categoricalAttributes:{}};return Object.entries(w).forEach(([C,E])=>{typeof E=="number"&&isFinite(E)?S.numericAttributes[C]=E:S.categoricalAttributes[C]=E}),S}logBanditAction(w){if(!this.banditLogger){this.queuedBanditEvents.length<a.MAX_EVENT_QUEUE_SIZE&&this.queuedBanditEvents.push(w);return}try{this.banditLogger.logBanditAction(w)}catch(S){t.logger.warn("Error encountered logging bandit action",S)}}getAssignmentVariation(w,S,C,E,M){try{const T=this.getAssignmentDetail(w,S,C,M);return T.variation?{eppoValue:i.EppoValue.valueOf(T.variation.value,M),flagEvaluationDetails:T.flagEvaluationDetails}:{eppoValue:E,flagEvaluationDetails:T.flagEvaluationDetails}}catch(T){const I=this.rethrowIfNotGraceful(T,E),j=new u.FlagEvaluationDetailsBuilder("",[],"","").buildForNoneResult("ASSIGNMENT_ERROR",`Assignment Error: ${T.message}`);return{eppoValue:I,flagEvaluationDetails:j}}}rethrowIfNotGraceful(w,S){if(this.isGracefulFailureMode)return t.logger.error(`[Eppo SDK] Error getting assignment: ${w.message}`),S??i.EppoValue.Null();throw w}getAssignmentDetail(w,S,C={},E){(0,g.validateNotBlank)(S,"Invalid argument: subjectKey cannot be blank"),(0,g.validateNotBlank)(w,"Invalid argument: flagKey cannot be blank");const M=this.flagEvaluationDetailsBuilder(w),T=this.getConfigDetails(),I=this.getFlag(w);if(I===null){t.logger.warn(`[Eppo SDK] No assigned variation. Flag not found: ${w}`);const N=M.buildForNoneResult("FLAG_UNRECOGNIZED_OR_DISABLED",`Unrecognized or disabled flag: ${w}`);return(0,c.noneResult)(w,S,C,N)}if(!x(E,I.variationType))throw new TypeError(`Variation value does not have the correct type. Found: ${I.variationType} != ${E} for flag ${w}`);if(!I.enabled){t.logger.info(`[Eppo SDK] No assigned variation. Flag is disabled: ${w}`);const N=M.buildForNoneResult("FLAG_UNRECOGNIZED_OR_DISABLED",`Unrecognized or disabled flag: ${w}`);return(0,c.noneResult)(w,S,C,N)}const j=this.evaluator.evaluateFlag(I,T,S,C,this.isObfuscated,E);if(this.isObfuscated&&(j.flagKey=w),j?.variation&&!b(E,j.variation.value)){const{key:N,value:P}=j.variation,R=`Expected variation type ${E} does not match for variation '${N}' with value ${P}`,k=M.buildForNoneResult("TYPE_MISMATCH",R);return(0,c.noneResult)(w,S,C,k)}try{j?.doLog&&this.logAssignment(j)}catch(N){t.logger.error(`[Eppo SDK] Error logging assignment event: ${N}`)}return j}flagEvaluationDetailsBuilder(w){var S;const C=this.getFlag(w),E=this.getConfigDetails();return new u.FlagEvaluationDetailsBuilder(E.configEnvironment.name,(S=C?.allocations)!==null&&S!==void 0?S:[],E.configFetchedAt,E.configPublishedAt)}getConfigDetails(){var w,S,C;return{configFetchedAt:(w=this.flagConfigurationStore.getConfigFetchedAt())!==null&&w!==void 0?w:"",configPublishedAt:(S=this.flagConfigurationStore.getConfigPublishedAt())!==null&&S!==void 0?S:"",configEnvironment:(C=this.flagConfigurationStore.getEnvironment())!==null&&C!==void 0?C:{name:""}}}getFlag(w){return this.isObfuscated?this.getObfuscatedFlag(w):this.flagConfigurationStore.get(w)}getObfuscatedFlag(w){const S=this.flagConfigurationStore.get((0,h.getMD5Hash)(w));return S?(0,o.decodeFlag)(S):null}getFlagKeys(){return this.flagConfigurationStore.getKeys()}isInitialized(){return this.flagConfigurationStore.isInitialized()&&(!this.banditVariationConfigurationStore||this.banditVariationConfigurationStore.isInitialized())&&(!this.banditModelConfigurationStore||this.banditModelConfigurationStore.isInitialized())}setLogger(w){this.setAssignmentLogger(w)}setAssignmentLogger(w){var S;this.assignmentLogger=w,this.flushQueuedEvents(this.queuedAssignmentEvents,(S=this.assignmentLogger)===null||S===void 0?void 0:S.logAssignment)}setBanditLogger(w){var S;this.banditLogger=w,this.flushQueuedEvents(this.queuedBanditEvents,(S=this.banditLogger)===null||S===void 0?void 0:S.logBanditAction)}disableAssignmentCache(){this.assignmentCache=void 0}useNonExpiringInMemoryAssignmentCache(){this.assignmentCache=new r.NonExpiringInMemoryAssignmentCache}useLRUInMemoryAssignmentCache(w){this.assignmentCache=new r.LRUInMemoryAssignmentCache(w)}useCustomAssignmentCache(w){this.assignmentCache=w}setIsGracefulFailureMode(w){this.isGracefulFailureMode=w}getFlagConfigurations(){return this.flagConfigurationStore.entries()}flushQueuedEvents(w,S){const C=[...w];w.length=0,S&&C.forEach(E=>{try{S(E)}catch(M){t.logger.error(`[Eppo SDK] Error flushing event to logger: ${M.message}`)}})}logAssignment(w){var S,C,E,M,T;const{flagKey:I,subjectKey:j,allocationKey:N,subjectAttributes:P,variation:R}=w,k=Object.assign(Object.assign({},(S=w.extraLogging)!==null&&S!==void 0?S:{}),{allocation:N??null,experiment:N?`${I}-${N}`:null,featureFlag:I,variation:(C=R?.key)!==null&&C!==void 0?C:null,subject:j,timestamp:new Date().toISOString(),subjectAttributes:P,metaData:this.buildLoggerMetadata(),evaluationDetails:w.flagEvaluationDetails});if(!(R&&N&&(!((E=this.assignmentCache)===null||E===void 0)&&E.has({flagKey:I,subjectKey:j,allocationKey:N,variationKey:R.key})))){if(!this.assignmentLogger){this.queuedAssignmentEvents.length<a.MAX_EVENT_QUEUE_SIZE&&this.queuedAssignmentEvents.push(k);return}try{this.assignmentLogger.logAssignment(k),(M=this.assignmentCache)===null||M===void 0||M.set({flagKey:I,subjectKey:j,allocationKey:N??"__eppo_no_allocation",variationKey:(T=R?.key)!==null&&T!==void 0?T:"__eppo_no_variation"})}catch(O){t.logger.error(`[Eppo SDK] Error logging assignment event: ${O.message}`)}}}buildLoggerMetadata(){return{obfuscated:this.isObfuscated,sdkLanguage:"javascript",sdkLibVersion:y.LIB_VERSION}}}Nc.default=v;function x(_,w){return _===void 0||w===_}Nc.checkTypeMatch=x;function b(_,w){if(_==null)return!0;switch(_){case m.VariationType.STRING:return typeof w=="string";case m.VariationType.BOOLEAN:return typeof w=="boolean";case m.VariationType.INTEGER:return typeof w=="number"&&Number.isInteger(w);case m.VariationType.NUMERIC:return typeof w=="number";case m.VariationType.JSON:return typeof w=="string";default:return!1}}return Nc.checkValueTypeMatch=b,Nc}var bg={},wH;function i9e(){if(wH)return bg;wH=1,Object.defineProperty(bg,"__esModule",{value:!0}),bg.HybridConfigurationStore=void 0;const e=YS();class t{constructor(r,s){this.servingStore=r,this.persistentStore=s,this.environment=null,this.configFetchedAt=null,this.configPublishedAt=null}async init(){if(!this.persistentStore)return;this.persistentStore.isInitialized()||e.logger.warn(`${e.loggerPrefix} Persistent store is not initialized from remote configuration. Serving assignments that may be stale.`);const r=await this.persistentStore.entries();this.servingStore.setEntries(r)}isInitialized(){var r,s;return this.servingStore.isInitialized()&&((s=(r=this.persistentStore)===null||r===void 0?void 0:r.isInitialized())!==null&&s!==void 0?s:!0)}async isExpired(){var r;const s=await((r=this.persistentStore)===null||r===void 0?void 0:r.isExpired());return s??!0}get(r){return this.servingStore.isInitialized()||e.logger.warn(`${e.loggerPrefix} getting a value from a ServingStore that is not initialized.`),this.servingStore.get(r)}entries(){return this.servingStore.entries()}getKeys(){return this.servingStore.getKeys()}async setEntries(r){return this.persistentStore&&await this.persistentStore.setEntries(r),this.servingStore.setEntries(r),!0}setEnvironment(r){this.environment=r}getEnvironment(){return this.environment}getConfigFetchedAt(){return this.configFetchedAt}setConfigFetchedAt(r){this.configFetchedAt=r}getConfigPublishedAt(){return this.configPublishedAt}setConfigPublishedAt(r){this.configPublishedAt=r}}return bg.HybridConfigurationStore=t,bg}var Zu={},SH;function l9e(){if(SH)return Zu;SH=1,Object.defineProperty(Zu,"__esModule",{value:!0}),Zu.MemoryOnlyConfigurationStore=Zu.MemoryStore=void 0;class e{constructor(){this.store={},this.initialized=!1}get(r){var s;return(s=this.store[r])!==null&&s!==void 0?s:null}entries(){return this.store}getKeys(){return Object.keys(this.store)}isInitialized(){return this.initialized}setEntries(r){this.store=Object.assign({},r),this.initialized=!0}}Zu.MemoryStore=e;class t{constructor(){this.servingStore=new e,this.initialized=!1,this.configFetchedAt=null,this.configPublishedAt=null,this.environment=null}init(){return this.initialized=!0,Promise.resolve()}get(r){return this.servingStore.get(r)}entries(){return this.servingStore.entries()}getKeys(){return this.servingStore.getKeys()}async isExpired(){return!0}isInitialized(){return this.initialized}async setEntries(r){return this.servingStore.setEntries(r),this.initialized=!0,!0}getEnvironment(){return this.environment}setEnvironment(r){this.environment=r}getConfigFetchedAt(){return this.configFetchedAt}setConfigFetchedAt(r){this.configFetchedAt=r}getConfigPublishedAt(){return this.configPublishedAt}setConfigPublishedAt(r){this.configPublishedAt=r}}return Zu.MemoryOnlyConfigurationStore=t,Zu}var CH;function dp(){return CH||(CH=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.VariationType=e.assignmentCacheValueToString=e.assignmentCacheKeyToString=e.LRUInMemoryAssignmentCache=e.NonExpiringInMemoryAssignmentCache=e.MemoryOnlyConfigurationStore=e.HybridConfigurationStore=e.MemoryStore=e.validation=e.HttpClient=e.FlagConfigRequestor=e.ApiEndpoints=e.constants=e.EppoClient=e.AbstractAssignmentCache=e.applicationLogger=void 0;const t=Yie();e.ApiEndpoints=t.default;const n=YS();Object.defineProperty(e,"applicationLogger",{enumerable:!0,get:function(){return n.logger}});const r=Qie();Object.defineProperty(e,"AbstractAssignmentCache",{enumerable:!0,get:function(){return r.AbstractAssignmentCache}}),Object.defineProperty(e,"NonExpiringInMemoryAssignmentCache",{enumerable:!0,get:function(){return r.NonExpiringInMemoryAssignmentCache}}),Object.defineProperty(e,"LRUInMemoryAssignmentCache",{enumerable:!0,get:function(){return r.LRUInMemoryAssignmentCache}}),Object.defineProperty(e,"assignmentCacheKeyToString",{enumerable:!0,get:function(){return r.assignmentCacheKeyToString}}),Object.defineProperty(e,"assignmentCacheValueToString",{enumerable:!0,get:function(){return r.assignmentCacheValueToString}});const s=o9e();e.EppoClient=s.default;const a=Zie();e.FlagConfigRequestor=a.default;const o=i9e();Object.defineProperty(e,"HybridConfigurationStore",{enumerable:!0,get:function(){return o.HybridConfigurationStore}});const i=l9e();Object.defineProperty(e,"MemoryStore",{enumerable:!0,get:function(){return i.MemoryStore}}),Object.defineProperty(e,"MemoryOnlyConfigurationStore",{enumerable:!0,get:function(){return i.MemoryOnlyConfigurationStore}});const c=H0();e.constants=c;const u=sle();e.HttpClient=u.default;const d=z0();Object.defineProperty(e,"VariationType",{enumerable:!0,get:function(){return d.VariationType}});const m=ale();e.validation=m}(q3)),q3}var _g={},Aa={},Mx={},EH;function ole(){if(EH)return Mx;EH=1,Object.defineProperty(Mx,"__esModule",{value:!0});class e{constructor(n){this.storage=n}async has(n){return!!await this.get(n)}async get(n){var r;const s=await this.storage.get(n);return(r=s?.[n])!==null&&r!==void 0?r:void 0}async entries(){return await this.storage.get(null)}async set(n,r){await this.storage.set({[n]:r})}}return Mx.default=e,Mx}var wg={},Ju={},MH;function ile(){return MH||(MH=1,Object.defineProperty(Ju,"__esModule",{value:!0}),Ju.META_KEY=Ju.CONFIGURATION_KEY=void 0,Ju.CONFIGURATION_KEY="eppo-configuration",Ju.META_KEY="eppo-configuration-meta"),Ju}var TH;function lle(){if(TH)return wg;TH=1,Object.defineProperty(wg,"__esModule",{value:!0}),wg.ChromeStorageEngine=void 0;const e=ile();class t{constructor(r,s){this.storageMap=r,this.getContentsJsonString=async()=>{const o=await this.storageMap.get(this.contentsKey);return o??null},this.getMetaJsonString=async()=>{const o=await this.storageMap.get(this.metaKey);return o??null},this.setContentsJsonString=async o=>{await this.storageMap.set(this.contentsKey,o)},this.setMetaJsonString=async o=>{await this.storageMap.set(this.metaKey,o)};const a=s?`-${s}`:"";this.contentsKey=e.CONFIGURATION_KEY+a,this.metaKey=e.META_KEY+a}}return wg.ChromeStorageEngine=t,wg}var Sg={},kH;function c9e(){if(kH)return Sg;kH=1,Object.defineProperty(Sg,"__esModule",{value:!0}),Sg.IsolatableHybridConfigurationStore=void 0;const e=dp();class t extends e.HybridConfigurationStore{constructor(r,s,a="always"){super(r,s),this.servingStoreUpdateStrategy=a}async setEntries(r){var s;this.persistentStore&&await this.persistentStore.setEntries(r);const a=!this.persistentStore||await this.persistentStore.isExpired(),o=!(!((s=this.servingStore.getKeys())===null||s===void 0)&&s.length),i=this.servingStoreUpdateStrategy==="always"||a&&this.servingStoreUpdateStrategy==="expired"||a&&o;return i&&this.servingStore.setEntries(r),i}}return Sg.IsolatableHybridConfigurationStore=t,Sg}var Cg={},NH;function u9e(){if(NH)return Cg;NH=1,Object.defineProperty(Cg,"__esModule",{value:!0}),Cg.LocalStorageEngine=void 0;const e=ile();class t{constructor(r,s){this.localStorage=r,this.getContentsJsonString=async()=>this.localStorage.getItem(this.contentsKey),this.getMetaJsonString=async()=>this.localStorage.getItem(this.metaKey),this.setContentsJsonString=async o=>{this.localStorage.setItem(this.contentsKey,o)},this.setMetaJsonString=async o=>{this.localStorage.setItem(this.metaKey,o)};const a=s?`-${s}`:"";this.contentsKey=e.CONFIGURATION_KEY+a,this.metaKey=e.META_KEY+a}}return Cg.LocalStorageEngine=t,Cg}var Eg={},AH;function d9e(){if(AH)return Eg;AH=1,Object.defineProperty(Eg,"__esModule",{value:!0}),Eg.StringValuedAsyncStore=void 0;class e{constructor(n,r=0){this.storageEngine=n,this.cooldownSeconds=r,this.initialized=!1}isInitialized(){return this.initialized}async isExpired(){if(!this.cooldownSeconds)return!0;const n=await this.storageEngine.getMetaJsonString();let r=!0;if(n){const a=JSON.parse(n).lastUpdatedAtMs;r=!a||Date.now()-a>this.cooldownSeconds*1e3}return r}async entries(){const n=await this.storageEngine.getContentsJsonString();return n?JSON.parse(n):{}}async setEntries(n){await this.storageEngine.setContentsJsonString(JSON.stringify(n));const r={lastUpdatedAtMs:new Date().getTime()};await this.storageEngine.setMetaJsonString(JSON.stringify(r)),this.initialized=!0}}return Eg.StringValuedAsyncStore=e,Eg}var PH;function KO(){if(PH)return Aa;PH=1,Object.defineProperty(Aa,"__esModule",{value:!0}),Aa.localStorageIfAvailable=Aa.hasWindowLocalStorage=Aa.chromeStorageIfAvailable=Aa.hasChromeStorage=Aa.configurationStorageFactory=void 0;const e=dp(),t=ole(),n=lle(),r=c9e(),s=u9e(),a=d9e();function o({maxAgeSeconds:m=0,servingStoreUpdateStrategy:h="always",hasChromeStorage:p=!1,hasWindowLocalStorage:g=!1,persistentStore:y=void 0,forceMemoryOnly:v=!1},{chromeStorage:x,windowLocalStorage:b,storageKeySuffix:_}={}){if(v)return new e.MemoryOnlyConfigurationStore;if(y)return new r.IsolatableHybridConfigurationStore(new e.MemoryStore,y,h);if(p&&x){const w=new n.ChromeStorageEngine(new t.default(x),_??"");return new r.IsolatableHybridConfigurationStore(new e.MemoryStore,new a.StringValuedAsyncStore(w,m),h)}else if(g&&b){const w=new s.LocalStorageEngine(b,_??"");return new r.IsolatableHybridConfigurationStore(new e.MemoryStore,new a.StringValuedAsyncStore(w,m),h)}return new e.MemoryOnlyConfigurationStore}Aa.configurationStorageFactory=o;function i(){return typeof chrome<"u"&&!!chrome.storage}Aa.hasChromeStorage=i;function c(){return i()?chrome.storage.local:void 0}Aa.chromeStorageIfAvailable=c;function u(){try{return typeof window<"u"&&!!window.localStorage}catch{return!1}}Aa.hasWindowLocalStorage=u;function d(){return u()?window.localStorage:void 0}return Aa.localStorageIfAvailable=d,Aa}var Tx={},RH;function f9e(){if(RH)return Tx;RH=1,Object.defineProperty(Tx,"__esModule",{value:!0});const e=dp(),t=ole();class n{constructor(s){this.storage=new t.default(s)}set(s){this.storage.set((0,e.assignmentCacheKeyToString)(s),(0,e.assignmentCacheValueToString)(s))}has(s){throw new Error("This should never be called for ChromeStorageAssignmentCache, use getEntries() instead.")}async getEntries(){const s=await this.storage.entries();return Object.entries(s).map(([a,o])=>[a,o])}}return Tx.default=n,Tx}var kx={},IH;function cle(){if(IH)return kx;IH=1,Object.defineProperty(kx,"__esModule",{value:!0});class e{constructor(n,r){this.servingStore=n,this.persistentStore=r}async init(){const n=await this.persistentStore.getEntries();n&&this.servingStore.setEntries(n)}set(n){this.servingStore.set(n),this.persistentStore.set(n)}has(n){return this.servingStore.has(n)}}return kx.default=e,kx}var Mg={},jH;function m9e(){if(jH)return Mg;jH=1,Object.defineProperty(Mg,"__esModule",{value:!0}),Mg.LocalStorageAssignmentCache=void 0;const e=dp(),t=KO();class n extends e.AbstractAssignmentCache{constructor(a){super(new r(a))}setEntries(a){a.forEach(([o,i])=>{o&&i&&this.delegate.set(o,i)})}getEntries(){return Promise.resolve(Array.from(this.entries()))}}Mg.LocalStorageAssignmentCache=n;class r{constructor(a){if(!(0,t.hasWindowLocalStorage)())throw new Error("LocalStorage is not available");const o=a?`-${a}`:"";this.localStorageKey=`eppo-assignment${o}`}clear(){this.getCache().clear()}delete(a){return this.getCache().delete(a)}forEach(a,o){this.getCache().forEach(a,o)}entries(){return this.getCache().entries()}keys(){return this.getCache().keys()}values(){return this.getCache().values()}[Symbol.iterator](){return this.getCache()[Symbol.iterator]()}has(a){return this.getCache().has(a)}get(a){var o;return(o=this.getCache().get(a))!==null&&o!==void 0?o:void 0}set(a,o){return this.setCache(this.getCache().set(a,o))}getCache(){const a=window.localStorage.getItem(this.localStorageKey);return a?new Map(JSON.parse(a)):new Map}setCache(a){return window.localStorage.setItem(this.localStorageKey,JSON.stringify(Array.from(a.entries()))),this}}return Mg}var Nx={},OH;function h9e(){if(OH)return Nx;OH=1,Object.defineProperty(Nx,"__esModule",{value:!0});const e=dp();class t{constructor(){this.store=new Map,this.cache=new e.NonExpiringInMemoryAssignmentCache(this.store)}set(r){this.cache.set(r)}has(r){return this.cache.has(r)}setEntries(r){const{store:s}=this;r.forEach(([a,o])=>s.set(a,o))}getEntries(){return Promise.resolve(Array.from(this.cache.entries()))}}return Nx.default=t,Nx}var LH;function p9e(){if(LH)return _g;LH=1,Object.defineProperty(_g,"__esModule",{value:!0}),_g.assignmentCacheFactory=void 0;const e=KO(),t=f9e(),n=cle(),r=m9e(),s=h9e();function a({forceMemoryOnly:o=!1,chromeStorage:i,storageKeySuffix:c}){const u=new s.default;if(o)return u;if(i){const d=new t.default(i);return new n.default(u,d)}else if((0,e.hasWindowLocalStorage)()){const d=new r.LocalStorageAssignmentCache(c);return new n.default(u,d)}else return u}return _g.assignmentCacheFactory=a,_g}var ed={};const g9e="3.4.0",y9e={version:g9e};var DH;function v9e(){if(DH)return ed;DH=1,Object.defineProperty(ed,"__esModule",{value:!0}),ed.sdkName=ed.sdkVersion=void 0;const e=y9e;return ed.sdkVersion=e.version,ed.sdkName="js-client-sdk",ed}var FH;function x9e(){return FH||(FH=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getConfigUrl=e.getInstance=e.init=e.offlineInit=e.buildStorageKeySuffix=e.EppoJSClient=e.ChromeStorageEngine=void 0;const t=dp(),n=p9e(),r=cle(),s=KO(),a=v9e();var o=lle();Object.defineProperty(e,"ChromeStorageEngine",{enumerable:!0,get:function(){return o.ChromeStorageEngine}});const i=(0,s.configurationStorageFactory)({forceMemoryOnly:!0});class c extends t.EppoClient{getStringAssignment(y,v,x,b){return c.getAssignmentInitializationCheck(),super.getStringAssignment(y,v,x,b)}getStringAssignmentDetails(y,v,x,b){return c.getAssignmentInitializationCheck(),super.getStringAssignmentDetails(y,v,x,b)}getBoolAssignment(y,v,x,b){return this.getBooleanAssignment(y,v,x,b)}getBooleanAssignment(y,v,x,b){return c.getAssignmentInitializationCheck(),super.getBooleanAssignment(y,v,x,b)}getBooleanAssignmentDetails(y,v,x,b){return c.getAssignmentInitializationCheck(),super.getBooleanAssignmentDetails(y,v,x,b)}getIntegerAssignment(y,v,x,b){return c.getAssignmentInitializationCheck(),super.getIntegerAssignment(y,v,x,b)}getIntegerAssignmentDetails(y,v,x,b){return c.getAssignmentInitializationCheck(),super.getIntegerAssignmentDetails(y,v,x,b)}getNumericAssignment(y,v,x,b){return c.getAssignmentInitializationCheck(),super.getNumericAssignment(y,v,x,b)}getNumericAssignmentDetails(y,v,x,b){return c.getAssignmentInitializationCheck(),super.getNumericAssignmentDetails(y,v,x,b)}getJSONAssignment(y,v,x,b){return c.getAssignmentInitializationCheck(),super.getJSONAssignment(y,v,x,b)}getJSONAssignmentDetails(y,v,x,b){return c.getAssignmentInitializationCheck(),super.getJSONAssignmentDetails(y,v,x,b)}getBanditAction(y,v,x,b,_){return c.getAssignmentInitializationCheck(),super.getBanditAction(y,v,x,b,_)}getBanditActionDetails(y,v,x,b,_){return c.getAssignmentInitializationCheck(),super.getBanditActionDetails(y,v,x,b,_)}static getAssignmentInitializationCheck(){c.initialized||t.applicationLogger.warn("Eppo SDK assignment requested before init() completed")}}e.EppoJSClient=c,c.instance=new c(i,void 0,void 0,void 0,!0),c.initialized=!1;function u(g){return g.replace(/\W/g,"").substring(0,8)}e.buildStorageKeySuffix=u;function d(g){var y,v;const x=(y=g.isObfuscated)!==null&&y!==void 0?y:!1,b=(v=g.throwOnFailedInitialization)!==null&&v!==void 0?v:!0;try{const _=(0,s.configurationStorageFactory)({forceMemoryOnly:!0});_.setEntries(g.flagsConfiguration).catch(C=>t.applicationLogger.warn("Error setting flags for memory-only configuration store",C)),c.instance.setFlagConfigurationStore(_),c.instance.setIsObfuscated(x),g.assignmentLogger&&c.instance.setAssignmentLogger(g.assignmentLogger);const S=(0,n.assignmentCacheFactory)({storageKeySuffix:"offline",forceMemoryOnly:!0});c.instance.useCustomAssignmentCache(S)}catch(_){if(t.applicationLogger.warn("Eppo SDK encountered an error initializing, assignment calls will return the default value and not be logged"),b)throw _}return c.initialized=!0,c.instance}e.offlineInit=d;async function m(g){var y,v,x,b,_,w,S;t.validation.validateNotBlank(g.apiKey,"API key required");let C;const E=c.instance,{apiKey:M,persistentStore:T,baseUrl:I,maxCacheAgeSeconds:j,updateOnFetch:N}=g;try{E.stopPolling(),E.setAssignmentLogger(g.assignmentLogger),E.setIsObfuscated(!0);const P=u(M),R=(0,s.configurationStorageFactory)({maxAgeSeconds:j,servingStoreUpdateStrategy:N,persistentStore:T,hasChromeStorage:(0,s.hasChromeStorage)(),hasWindowLocalStorage:(0,s.hasWindowLocalStorage)()},{chromeStorage:(0,s.chromeStorageIfAvailable)(),windowLocalStorage:(0,s.localStorageIfAvailable)(),storageKeySuffix:P});E.setFlagConfigurationStore(R);const k=(0,n.assignmentCacheFactory)({chromeStorage:(0,s.chromeStorageIfAvailable)(),storageKeySuffix:P});k instanceof r.default&&await k.init(),E.useCustomAssignmentCache(k);const O={apiKey:M,sdkName:a.sdkName,sdkVersion:a.sdkVersion,baseUrl:I,requestTimeoutMs:(y=g.requestTimeoutMs)!==null&&y!==void 0?y:void 0,numInitialRequestRetries:(v=g.numInitialRequestRetries)!==null&&v!==void 0?v:void 0,numPollRequestRetries:(x=g.numPollRequestRetries)!==null&&x!==void 0?x:void 0,pollAfterSuccessfulInitialization:(b=g.pollAfterSuccessfulInitialization)!==null&&b!==void 0?b:!1,pollAfterFailedInitialization:(_=g.pollAfterFailedInitialization)!==null&&_!==void 0?_:!1,throwOnFailedInitialization:!0,skipInitialPoll:(w=g.skipInitialRequest)!==null&&w!==void 0?w:!1};E.setConfigurationRequestParameters(O);let L,F;const U=R.init().then(async()=>R.getKeys().length?await R.isExpired()&&!g.useExpiredCache?(t.applicationLogger.warn("Eppo SDK set not to use expired cached configuration"),L=new Error("Configuration store was expired"),""):"config store":(t.applicationLogger.warn("Eppo SDK cached configuration is empty"),L=new Error("Configuration store was empty"),"")).catch(H=>{t.applicationLogger.warn("Eppo SDK encountered an error initializing from the configuration store",H),L=H}),V=E.fetchFlagConfigurations().then(()=>"fetch").catch(H=>{t.applicationLogger.warn("Eppo SDK encountered an error initializing from fetching",H),F=H});let W=await Promise.race([U,V]);W||(L?W=await V:W=await U),W||(C=F)}catch(P){C=P}if(C&&(t.applicationLogger.warn("Eppo SDK was unable to initialize with a configuration, assignment calls will return the default value and not be logged"+(g.pollAfterFailedInitialization?" until an experiment configuration is successfully retrieved":"")),!((S=g.throwOnFailedInitialization)!==null&&S!==void 0)||S))throw C;return c.initialized=!0,E}e.init=m;function h(){return c.instance}e.getInstance=h;function p(g,y){const v={sdkName:a.sdkName,sdkVersion:a.sdkVersion,apiKey:g};return new t.ApiEndpoints({baseUrl:y,queryParams:v}).ufcEndpoint()}e.getConfigUrl=p}(G3)),G3}var ule=x9e();const b9e=Wke({__proto__:null},[ule]),_9e=(e,t)=>{const n=f.useRef(void 0);ua(n.current,t)||(n.current=t),f.useEffect(e,[n.current])};async function w9e(){try{return(await(await fetch("/cdn-cgi/trace")).text()).split(`
`).reduce((n,r)=>{const[s,a]=r.split("=");return n[s]=a,n},{loc:"US"})}catch(e){return ee.error("Error getting Cloudflare trace",e),{loc:"US"}}}function fp(){const{data:e}=Ke({queryKey:["cloudflare-trace"],queryFn:w9e});return f.useMemo(()=>e?.loc??"US",[e])}class ky extends T0{name="CometError"}const Pm={COPILOT:"COPILOT",ARTICLE:"ARTICLE"},S9e={IN_PROGRESS:"IN_PROGRESS"},Ax={SELECTED:"SELECTED",REVIEWED:"REVIEWED",REVIEWING:"REVIEWING",UNSORTED:"UNSORTED"},jf={CLICK:"CLICK",FILL:"FILL",SEARCH:"SEARCH",NAVIGATE:"NAVIGATE",SCROLL_PAGE:"SCROLL_PAGE",WAIT:"WAIT"},RA={DOWN:"DOWN"},K4={HISTORY:"HISTORY",OPEN_TABS:"OPEN_TABS",RECENTLY_CLOSED_TABS:"RECENTLY_CLOSED_TABS"},dle={LOGIN:"LOGIN",DOWNLOAD_COMET:"DOWNLOAD_COMET"},Vc={IN_THREAD:"IN_THREAD",SIDEBAR:"SIDEBAR",MODAL:"MODAL",IN_THREAD_BOTTOM:"IN_THREAD_BOTTOM",IN_THREAD_INPUT:"IN_THREAD_INPUT",SIDE_CARD:"SIDE_CARD"},ia={PRO_UPGRADE:"PRO_UPGRADE",SIGN_UP_OR_LOGIN:"SIGN_UP_OR_LOGIN",REWRITE_ANSWER:"REWRITE_ANSWER",PERMALINK:"PERMALINK",CONNECTOR:"CONNECTOR",THREAD_TO_SPACE:"THREAD_TO_SPACE",SET_DEFAULT_BROWSER:"SET_DEFAULT_BROWSER",COMET_DOWNLOAD:"COMET_DOWNLOAD",IMAGE_ANNOUNCEMENT_MODAL:"IMAGE_ANNOUNCEMENT_MODAL",MERGE_AUTH_CONNECTOR:"MERGE_AUTH_CONNECTOR",SHORTCUT_MODAL:"SHORTCUT_MODAL",OPEN_SHEERID_MODAL:"OPEN_SHEERID_MODAL"},Px={PRIMARY_COLOR:"PRIMARY_COLOR",SECONDARY_COLOR:"SECONDARY_COLOR",MAX_COLOR:"MAX_COLOR",INVERTED:"INVERTED"},$s={CODE_ASSET:"CODE_ASSET",CHART:"CHART",CODE_FILE:"CODE_FILE",APP:"APP",GENERATED_IMAGE:"GENERATED_IMAGE",GENERATED_VIDEO:"GENERATED_VIDEO"},DFt={PAUSED_TASK:"PAUSED_TASK",STOPPED_TASK:"STOPPED_TASK"},Y4={BROWSER_HISTORY:"BROWSER_HISTORY",OPEN_TAB:"OPEN_TAB",RECENTLY_CLOSED_TAB:"RECENTLY_CLOSED_TAB"},dr={PENDING:"PENDING",COMPLETED:"COMPLETED",FAILED:"FAILED",STAGED:"STAGED",RESUMING:"RESUMING",BLOCKED:"BLOCKED"},mh={NONE:"NONE",INCOGNITO:"INCOGNITO"},FFt={FULL:"FULL",STREAMING:"STREAMING"},Oc={IN_PROGRESS:"IN_PROGRESS",DONE:"DONE"},UFt={CALENDAR_EVENT:"CALENDAR_EVENT",PLACE_CARD:"PLACE_CARD",SHOPPING_CARD:"SHOPPING_CARD",CALENDAR_ACTION:"CALENDAR_ACTION",MOVIE_TV_CARD:"MOVIE_TV_CARD"},Lo={SELECTION_STATUS_UNSPECIFIED:"SELECTION_STATUS_UNSPECIFIED",UNSELECTED:"UNSELECTED",SELECTED:"SELECTED",TIE:"TIE"},c2={MEDIUM:"MEDIUM",HIGH:"HIGH"},Zt={HOTELS:"HOTELS",SHOPPING:"SHOPPING",JOBS:"JOBS",IMAGE:"IMAGE",VIDEO:"VIDEO",SOURCES:"SOURCES",MAPS:"MAPS",ASSETS:"ASSETS",APPS:"APPS",TASKS:"TASKS",SEARCH:"SEARCH",CHAT:"CHAT"},C9e="pplx.comet-device-id",E9e="comet_browser";function Pi(){return!!oi()}function fle(){const e=oi();return!!(e?.android_version||e?.ios_version)}const oi=Hne(function(){const t=yn(E9e);if(t)try{return{device_id:yn(C9e),...JSON.parse(t)}}catch{return}},()=>Math.floor(Date.now()/(6*1e4))),M9e=(e,t="selected_by_user_text")=>e?`
<${t}>
<selection_timestamp>${new Date(e.timestamp).toLocaleString()}</selection_timestamp>
${e.text}
</${t}>`:"",T9e=(e,t,n,r)=>{if(!e)return;const s=M9e(t.userSelection);if(n.status==="fulfilled"&&n.value?.content){const{markdown:a="",url:o="",title:i="",og_meta:c={},id:u}=n.value.content;return{content:[a.slice(0,r-s.length)+s],url:o,title:i,content_type:"markdown",content_origin:"current_tab",og_title:c?.title,og_description:c?.description,tab_id:String(u)}}return{content:[],url:t.sidecarSourceTab.url,title:t.sidecarSourceTab.title,tab_id:String(t.sidecarSourceTab.tabId),content_type:"markdown",content_origin:"current_tab"}},k9e=(e,t,n)=>{const r=[];return e.forEach(s=>{const a=t.status==="fulfilled"&&t.value.contents?.find(o=>o.id===s.id);if(!a){r.push({tab_id:String(s.id),content:[],url:s.url,title:"",content_type:"markdown",content_origin:"open_tab"});return}r.push({tab_id:String(a.id),content:[(a.markdown??"").slice(0,n)],url:a.url??"",title:a.title??"",content_type:"markdown",content_origin:"open_tab",og_title:a.og_meta?.title,og_description:a.og_meta?.description})}),r},N9e=async({clientPayloadCacheKey:e,cometBrowser:t,maxChars:n,includeSidecar:r,attachedTabs:s,reason:a,cometState:o,requestId:i})=>{if(!t)return;const c=[],u=oi(),d={contextType:"runtime",queryContextTimeMs:0,processContextTimeMs:0,getNavigationItemsTimeMs:null,filteredItemsCount:null,version:u.browser_version,mainExtVersion:u.agent_extension_version},m=Wl({context_type:d?.contextType,browser_version:d?.version,main_ext_version:d?.mainExtVersion,content_type:d?.contentType});try{ee.info("fetching sidecar context",{request_id:i});const[h,p]=await Promise.allSettled([r?t.GetSidecarContext({key:e,request_id:i}):Promise.resolve(void 0),s.length?t.GetContent({key:e,pages:[...s],request_id:i}):Promise.resolve({contents:[]})]),g=T9e(r,o,h,n);if(g&&c.push(g),s.length){const v=k9e(s,p,n);c.push(...v)}d.queryContextTimeMs=performance.now()-m.getStartTimeFromTimeOrigin(),ee.info("sending sidecar context",{request_id:i});const{error:y}=await ne.POST("/rest/browser/client_payload",a,{backOffTime:100,numRetries:2,timeoutMs:nn.HIGH,body:{client_payload_cache_key:e,client_context:c||[],client_navigation:[],metadata:d},headers:{[yr]:i}});if(m.addTiming("browser.client_context.overall_time_ms"),y)throw new Me("API_CLIENTS_ERROR",{details:{clientPayloadCacheKey:e},cause:y})}catch(h){ee.error("Error sending client payload for cache key ",e,h,{request_id:i})}},A9e=async({url:e,cometBrowser:t,stepUuid:n,extraHeaders:r,reason:s})=>{const a=t.openTab({url:e});await Gc(a,n,r,s)},P9e=async({cometBrowser:e,maxUrls:t=20})=>{if(e)try{const n=await e.getTopMostVisitedUrls({maxUrls:t},"get-top-most-urls-for-ntp");return n.is_success?n.mostVisitedUrls:void 0}catch(n){ee.error("Error fetching top most urls browser",n);return}},mle=async(e,t,n)=>{try{const{error:r}=await ne.POST("/rest/browser/tool_failure",n,{body:{client_payload_cache_key:e.clientPayloadCacheKey,error_type:e.errorType,error_msg:e.errorMsg},backOffTime:100,numRetries:2,headers:t,timeoutMs:nn.MEDIUM});if(r)throw new Me("API_CLIENTS_ERROR",{details:{clientPayloadCacheKey:e.clientPayloadCacheKey},cause:r})}catch(r){ee.error("Error while sending a failure of tool",r,{request_id:t[yr]})}},Gc=async(e,t,n,r)=>{try{const s=await e,{error:a}=await ne.POST("/rest/browser/tool_result",r,{body:{client_payload_cache_key:t,payload:s},backOffTime:100,numRetries:2,headers:n,timeoutMs:nn.MEDIUM});if(a)throw new Me("API_CLIENTS_ERROR",{details:{clientPayloadCacheKey:t},cause:a})}catch(s){const o=s&&s.message||`sendToolResult error: ${s}`,i="errorType"in s?s:{errorType:"unhandled",errorMsg:o};return ee.error("Error while sending tool result",i.errorType,i.errorMsg,{request_id:n[yr]}),mle({clientPayloadCacheKey:t,...i},n,r)}},IA={red:"red",maroon:"blue",orange:"cyan",teal:"green",grey:"grey",brown:"orange",green:"pink",gold:"purple",purple:"red",blue:"yellow"},UH=Object.fromEntries(Object.entries(IA).map(([e,t])=>[t,e])),hle=e=>UH[e]??UH.grey;async function R9e(e,t,n,r,s){const a=Promise.allSettled(e.map(async o=>t.groupTabs({tabIds:o.tab_ids,collapsed:o.collapsed,color:IA[o.color]??IA.grey,groupId:o.group_id,title:o.title},n,r[yr]))).then(o=>({groups:o.map(i=>{if(i.status=="fulfilled"&&i.value.is_success)return{...i.value.tabGroup,color:hle(i.value.tabGroup.color)}}).filter(i=>i!==void 0)}));await Gc(a,n,r,s)}async function I9e(e,t,n,r,s){const a=t.closeTabs({tabIds:e.tab_ids},n,r[yr]);await Gc(a,n,r,s)}async function j9e(e,t,n,r,s){const a={[Y4.OPEN_TAB]:K4.OPEN_TABS,[Y4.RECENTLY_CLOSED_TAB]:K4.RECENTLY_CLOSED_TABS,[Y4.BROWSER_HISTORY]:K4.HISTORY},o=e.browser_content_sources.map(c=>a[c]).filter(Boolean),i=t.SearchBrowser({closed_tabs_max_results:e.max_results,history_max_results:e.max_results,open_tabs_max_results:e.max_results,request_id:r[yr],key:n,queries:Array.isArray(e.queries)?[...e.queries]:[],sources:o,start_time:e.start_time?Date.now()-new Date(e.start_time).getTime():void 0,end_time:e.end_time?Date.now()-new Date(e.end_time).getTime():void 0});await Gc(i,n,r,s)}async function BH({result:e,key:t,reason:n}){try{await ne.POST("/rest/browser/initial_history_summary",n,{body:{key:t,data:e},backOffTime:100,numRetries:2,timeoutMs:nn.MEDIUM,headers:{"Content-Type":"application/json"}})}catch(r){ee.error("Error sending client payload for cache key ",r)}}function O9e({entropyBrowser:e,browserHistorySummaryNumDays:t,browserHistorySummaryMaxResults:n,reason:r}){const{addTiming:s}=Wl(),a=ar();return e.getInitialHistorySummary(a,t,n).then(o=>{s("web.frontend.comet_history_summary_v2"),BH({result:o,key:a,reason:r})}).catch(()=>{BH({result:{open_tabs_results:[],history_results:[],closed_tabs_results:[]},key:a,reason:r})}),a}const L9e=async({entropyBrowser:e,url:t})=>{const n=await e.getQuickActions("get-quick-actions-for-sidecar-suggests");return n.is_success?n.buttons.map(({prompt:r})=>({query:r,image:Ev(t)})):[]},D9e=/^\w+:\/\//;let o_=null;const F9e=()=>{if(!Pi()||o_!==null)return;const e=new Image;e.onerror=()=>{o_=!1,console.warn("[Comet] chrome://favicon/ is not supported. Using our backend as fallback.")},e.onload=()=>{o_=!0},e.src="chrome://favicon/"},Ev=(e,t=64,n="3x")=>{if(!o_)return`https://www.perplexity.ai/rest/browser/favicon?url=${j3e(e)}`;const r=D9e.test(e)?e:`https://${e}`;let s;try{s=decodeURIComponent(r)}catch{s=r}const a=s.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/'/g,"\\'").replace(/\s/g,"\\ ");return`chrome://favicon/size/${t}@${n}/${a}`},ple="comet-sidecar-threads-by-id",tn=()=>!!oi(),YO=()=>{const e=oi();return!!(e?.android_version||e?.ios_version)},U9e=e=>!(e.defaultPrevented||!tn()||e.ctrlKey||e.metaKey),B9e=e=>{const t=Ve.getItem(ple);if(t){const n=JSON.parse(t);for(const[r,{url:s,updatedAt:a}]of Object.entries(n))e.getState().actions.setSidecarUrlByTabId(Number(r),s,a)}},VH=e=>{const t=e.getState().sidecarUrlByTabId,n={};t.forEach((r,s)=>{s!==-1&&r.url!=="/sidecar/"&&(n[s]={url:r.url,updatedAt:r.updatedAt})}),Ve.setItem(ple,JSON.stringify(n))},V9e=(e,t)=>{const n=e.getState().sidecarSourceTab,r=e.getState().sidecarUrlByTabId.get(n.tabId)?.url;!r||new URL(window.location.href).pathname===r||t.replace(r,"Sidecar thread restored from cache")};function $9e({flag:e,override:t,defaultValue:n,isServer:r=!1}){if(!t)return{shouldUseOverride:!1,value:null};try{if(typeof n=="boolean")return{shouldUseOverride:!0,value:t==="true"};if(typeof n=="number")return{shouldUseOverride:!0,value:Number(t)};if(typeof n=="object")try{return{shouldUseOverride:!0,value:JSON.parse(t)}}catch(s){return ee.warn(`[Eppo ${r?"Server ":""}Override]`,`Failed to parse JSON override for flag "${e}"`,{override:t,error:s}),{shouldUseOverride:!0,value:n}}return{shouldUseOverride:!0,value:t}}catch(s){return ee.error(`[Eppo ${r?"Server ":""}Override] Error:`,s),{shouldUseOverride:!0,value:n}}}const gle="eppo_overrides",yle="eppo_overrides",W9e=e=>e?e.endsWith("@perplexity.ai"):!1,H9e=e=>{const t={};return e.forEach((n,r)=>{if(r.startsWith("eppo_")){const s=r.replace("eppo_","");t[s]=n??""}}),t},z9e=e=>{let t=!0;const n=JSON.stringify(e);try{qt(yle,n)}catch{t=!1}return t=Ts.setItem(gle,n),t},G9e=(e,t,n)=>{if(typeof window>"u"||n&&!W9e(e))return!1;const r=H9e(t);return Object.keys(r).length===0?!1:z9e(r)};function q9e(){try{const e=yn(yle);if(e)return JSON.parse(e);const t=Ts.getItem(gle);return t?JSON.parse(t):{}}catch{return{}}}function QO(e,t){f.useEffect(()=>{if(typeof window>"u")return;const r=window.cookieStore;if(!r)return;const s=a=>{const o=a.deleted.find(c=>c.name===e),i=a.changed.find(c=>c.name===e);if(o||i){t(i??null);return}};return r.addEventListener("change",s),()=>{r.removeEventListener("change",s)}},[e,t])}let Rx=[];class ps{static PREFERRED_COLOR_SCHEME_COOKIE="colorScheme";static get userPreferredColorScheme(){return yn(this.PREFERRED_COLOR_SCHEME_COOKIE)}static set userPreferredColorScheme(t){qt(this.PREFERRED_COLOR_SCHEME_COOKIE,t,{expires:400}),localStorage.setItem(this.PREFERRED_COLOR_SCHEME_COOKIE,t)}static removeUserPreferredColorScheme(){Fd(this.PREFERRED_COLOR_SCHEME_COOKIE),localStorage.removeItem(this.PREFERRED_COLOR_SCHEME_COOKIE)}static get isSystemScheme(){return!this.userPreferredColorScheme}static addOverride(t){const n={scheme:t};return Rx.push(n),n}static removeOverride(t){Rx=Rx.filter(n=>n!==t)}static get colorScheme(){const t=Rx.at(-1);return t?t.scheme:this.isSystemScheme?typeof window>"u"?void 0:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":this.userPreferredColorScheme}}function K9e(e){f.useEffect(()=>{if(typeof window>"u")return;const n=window.matchMedia("(prefers-color-scheme: dark)");function r(){e(ps.colorScheme)}return n.addEventListener("change",r),()=>{n.removeEventListener("change",r)}},[e])}function Y9e(){return f.useCallback(e=>{if(typeof window>"u")return;const n=document.documentElement.dataset.colorScheme==="dark",r=ps.colorScheme;if(e){document.documentElement.dataset.colorScheme=e;return}n&&r==="light"?document.documentElement.dataset.colorScheme="light":!n&&r==="dark"&&(document.documentElement.dataset.colorScheme="dark")},[])}const vle=cl("ColorSchemeContext",null),xle=A.memo(function(t){const{children:n,userPreferredColorScheme:r}=t,[s,a]=f.useState(r?!1:ps.isSystemScheme),[o,i]=f.useState(r??ps.colorScheme),c=f.useCallback(y=>{ps.userPreferredColorScheme=y,a(!1),i(y)},[]),u=f.useCallback(()=>{ps.removeUserPreferredColorScheme(),a(!0),i(ps.colorScheme)},[]),d=Y9e(),m=f.useCallback(y=>{s&&(i(y),d())},[s,d]);K9e(m);const h=f.useMemo(()=>ks(y=>{const v=!y&&ps.isSystemScheme;a(v),!v&&(i(y?.value??ps.colorScheme),d(y?.value))},100),[d]);QO(ps.PREFERRED_COLOR_SCHEME_COOKIE,h),f.useEffect(()=>{ps.isSystemScheme&&(document.documentElement.dataset.colorScheme=ps.colorScheme),d()},[d]);const p=f.useCallback(y=>{const v=ps.addOverride(y);return i(ps.colorScheme),d(),v},[d]),g=f.useCallback(y=>{ps.removeOverride(y),i(ps.colorScheme),d()},[d]);return typeof document<"u"&&document.documentElement.dataset.colorScheme!==o&&(document.documentElement.dataset.colorScheme=o),l.jsx(vle.Provider,{value:{colorScheme:o,isSystemColorScheme:s,setSystemColorScheme:u,setUserPreferredColorScheme:c,addOverride:p,removeOverride:g},children:n})});xle.displayName="ColorSchemeProvider";function fs(e){const t=f.useContext(vle);if(!t)throw new Error("Attempted to access ColorSchemeContext from useColorScheme() without adding <ColorSchemeProvider> to the tree.");const[n,r]=f.useState(!t.isSystemColorScheme);f.useEffect(()=>{e?.addSecondPass&&t.isSystemColorScheme&&!n&&r(!0)},[t.isSystemColorScheme,n,e?.addSecondPass]);const s={...t};return e?.addSecondPass&&(s.isColorSchemeReady=n),s}const Q9e=768,ble=`(max-width: ${Q9e}px)`;function $H(){return typeof window>"u"?!1:window.matchMedia(ble).matches}function Is(e={}){const t=Pt(),{isWindowsApp:n}=Wt(),r=f.useMemo(()=>!!(n&&t?.includes(Cv)),[n,t]),{evaluateOnInit:s=!1}=e,a=_le(),o=X9e(),[i,c]=f.useState(()=>a||o?!0:s?$H():!1);return f.useEffect(()=>{if(typeof window>"u")return;const u=window.matchMedia(ble);function d(){c(u.matches)}return u.addEventListener("change",d),()=>{u.removeEventListener("change",d)}},[a]),f.useEffect(()=>{s||c($H())},[s]),i&&!r}function _le(e=!1){const{isMobile:t}=Wt();return t??e}function X9e(e=!1){const{isAndroid:t}=Wt();return t??e}function Ce(e={}){const t=Pt(),{isWindowsApp:n}=Wt(),r=Is(e),s=f.useMemo(()=>!!(n&&t?.includes(Cv)),[n,t]),a=f.useMemo(()=>r&&!s,[r,s]),o=_le();return f.useMemo(()=>({isMobileStyle:a,isMobileUserAgent:o}),[a,o])}const ii=e=>e?.includes("perplexity.ai"),wle=e=>e?.includes("localhost"),Z9e=e=>e?.includes("pplx.dev"),Sle=e=>ii(e)&&e?.includes("preview"),Cle=e=>ii(e)&&e?.includes("staging"),Ele=e=>ii(e)&&(e?.includes("alpha")||e?.includes("beta")),Mle=e=>ii(e)&&e?.includes("testing"),J9e=e=>ii(e)&&e?.includes("experimental"),Tle=e=>ii(e)&&e?.includes("askdev"),kle=e=>ii(e)&&e?.startsWith("dev"),Nle=e=>ii(e)&&(e?.includes("klarna")||e?.includes("inhouse")||e?.includes("wolfram")||e?.includes("ftrouter")||e?.includes("ft")||e?.includes("brave")||e?.includes("claude2")||e?.includes("claude1-instant")||e?.includes("claude2-instant")||e?.includes("shopping")||e?.includes("turbo16k")||e?.includes("yelp")||e?.includes("mobile-flag-dev")),Ale=e=>ii(e)&&!Sle(e)&&!Mle(e)&&!Ele(e)&&!Tle(e)&&!kle(e)&&!Nle(e)&&!J9e(e),e7e=e=>ii(e)&&e?.includes("sandbox"),t7e=e=>e?.includes("quokka-gamma.ts.net")||e?.endsWith(".preview.i.perplexity.ai"),n7e=e=>{const t="unknown";try{return typeof process<"u"&&process?.env?.DD_ENV?process?.env?.DD_ENV:e?wle(e)?"local":e==="www.perplexity.ai"?"prod":e.endsWith(".preview.i.perplexity.ai")?e.replace(/\.preview\.i\.perplexity\.ai$/,""):e.endsWith(".perplexity.ai")?e.replace(/\.perplexity\.ai$/,""):t:t}catch{return t}},r7e=e=>e.isTesting||e.isLocalhost||e.isSandbox||e.isDevBox||e.isPplxDev||e.isDevDeployment,s7e=e=>({isPublicDNS:ii(e),isLocalhost:wle(e),isPplxDev:Z9e(e),isPreview:Sle(e),isStaging:Cle(e),isBeta:Ele(e),isTesting:Mle(e),isAskDev:Tle(e),isDevBox:kle(e),isNamedDevDomain:Nle(e),isProduction:Ale(e),isSandbox:e7e(e),isDevDeployment:t7e(e),deployName:n7e(e)}),Ple=cl("EnvContext",{isPublicDNS:!1,isLocalhost:!1,isPplxDev:!1,isPreview:!1,isStaging:!1,isBeta:!1,isTesting:!1,isAskDev:!1,isDevBox:!1,isNamedDevDomain:!1,isProduction:!1,isSandbox:!1,isDevDeployment:!1,envHasDevLogins:!1,deployName:"unknown"}),Rle=A.memo(({children:e,hostname:t})=>{const n=s7e(t);return l.jsx(Ple.Provider,{value:{...n,envHasDevLogins:r7e({...n})},children:e})});Rle.displayName="EnvProvider";const pc=()=>{const e=A.useContext(Ple);if(!e)throw new Error("useEnv must be used within EnvContext");return e};let Tg;async function a7e({apiKey:e,logAssignment:t}){if(Tg)return Tg;const{init:n}=await oe(async()=>{const{init:r}=await Promise.resolve().then(()=>b9e);return{init:r}},void 0);try{return Tg=n({apiKey:e,assignmentLogger:{logAssignment:t}}),await Tg,ee.info("[Eppo Experiments] Primary key initialization successful"),Tg}catch(r){throw ee.error("[Eppo Experiments] Primary key failed",r),r}}const o7e={getEppoTypedVariation:function(){return Promise.resolve(void 0)},keysRequiringRerender:[],addKeyRequiringRerender:()=>null,removeKeyRequiringRerender:()=>null},XO=f.createContext(o7e),i7e="experiment assignment",i_="failed_open_to_default_value",l7e=(e,t,n,r)=>s=>Uo({name:i7e,data:{subjectType:s.subjectAttributes.subjectType,pagePropsHostname:r,colorScheme:n,isPerplexityBrowser:t,...s},session:e??void 0});function c7e(e){const t=ule.buildStorageKeySuffix(e),n=["eppo-configuration-","eppo-configuration-meta-","eppo-assignment-"];Ve.keys().filter(s=>s.startsWith("eppo-")).forEach(s=>{const a=s.split("-");if(a.length<2)return;const o=a[a.length-1],i=a.slice(0,-1).join("-")+"-";n.includes(i)&&o!==t&&(ee.warn("[Eppo Experiments] Cleaning up old Eppo key",{key:s,keySuffix:o,storageKeySuffix:t}),Ve.removeItem(s))})}const u7e=({children:e,hostname:t})=>{const n=Ot(),r=Je(),s=fp(),a=yf(),o=UOe(),i=tn(),[c,u]=f.useState([]),{isProduction:d,isStaging:m,deployName:h}=pc(),g=d||m?"a2yUBlJ1tebb5g2II8WD1CzbVUszCSk3.ZWg9bnhqMGc3LmUuZXBwby5jbG91ZCZjcz1ueGowZzc":"KphAz1VUxSQKAZxlw1PwMdZNRia-a4B3.ZWg9bnhqMGc3LmUuZXBwby5jbG91ZCZjcz1ueGowZzc",{colorScheme:y}=fs(),v=f.useRef(void 0),x=Ht(),[b,_]=f.useState(!1),{locale:w}=X(),{isWindowsApp:S}=Wt(),{isMobileStyle:C}=Ce(),E=f.useCallback(j=>{l7e(n,i,y,t)(j)},[n,i,y,t]);f.useEffect(()=>{if(b||!x)return;G9e(n?.user?.email,x,d)&&_(!0)},[x,n?.user?.email,b,d]);const M=f.useCallback(async function(j,{flag:N,subjectType:P,stableId:R,defaultValue:k,extraAttributes:O}){if(P==="user_nextauth_id"&&!r)return k;let L;if(R?L=R:P==="user_nextauth_id"?L=n?.user?.id:P==="visitor_id"?L=a??void 0:P==="session_id"?L=o??void 0:P==="context_uuid"&&(L=O?.context_uuid),!L)return ee.error("[Eppo Experiments]","No subject key found",{flag:N,subject_type:P,is_user_logged_in:r,has_stable_id:!!R,has_session_user_id:!!n?.user?.id,has_visitor_id:!!a,has_session_id:!!o,has_context_uuid:!!O?.context_uuid,execution_context:typeof window<"u"?"client":"server",document_ready_state:typeof document<"u"?document.readyState:"unknown",eppo_provider_result:i_}),k;const F=q9e(),{shouldUseOverride:U,value:V}=$9e({flag:N,override:F[N],defaultValue:k});if(U)return V??k;if(!g)return ee.error("[Eppo Experiments]","No Eppo API key found",{flag:N,eppo_provider_result:i_}),k;v.current||(c7e(g),v.current=a7e({apiKey:g,logAssignment:E}));const W=await v.current;try{return j(W,N,L,{subjectType:P,visitorId:a??void 0,sessionId:o??void 0,userEmail:n?.user?.email??void 0,userId:n?.user?.id??void 0,appApiClient:O3e(C,S),cfCountry:s,locale:w,isComet:i,deployName:h,...$ne(),...O??{}},k)}catch{return ee.error("[Eppo Experiments] Error calling eppoFn",{flag:N,subjectKey:L,eppo_provider_result:i_}),k}},[g,n?.user?.id,n?.user?.email,a,o,E,C,S,s,w,i,h,r]),T=f.useCallback(j=>{u(N=>N.includes(j)?N:[...N,j])},[]),I=j=>{u(N=>N.includes(j)?N.filter(P=>P!==j):N)};return l.jsx(XO.Provider,{value:{getEppoTypedVariation:M,keysRequiringRerender:c,addKeyRequiringRerender:T,removeKeyRequiringRerender:I},children:e})};function mp(e,t){const n=f.useContext(XO);if(!n)throw new Error("useGetEppoJSONVariation must be used within EppoExperimentsContext");const{getEppoTypedVariation:r}=n,[s,a]=f.useState(!0),[o,i]=f.useState(void 0),[c,u]=f.useState(e.defaultValue),d=f.useRef(e),m=f.useCallback(async()=>{const{skip:h,...p}=d.current;try{return r(t,p)}catch(g){return ee.error("[Eppo Experiments]","Error calling getEppoTypedVariation",{flag:p.flag,error:g,eppo_provider_result:i_}),p.defaultValue}},[r,t]);return _9e(()=>{d.current=e;const{skip:h,...p}=e;if(h){a(!1);return}a(!0),r(t,p).then(g=>u(g),i).finally(()=>a(!1))},[r,e]),{value:c,loading:s,error:o,fetchVariation:m}}const Ile=(e,...t)=>e.getJSONAssignment(...t);function vf(e){return mp(e,Ile)}function d7e(e,t){const n={...e,subjectType:"context_uuid",extraAttributes:{...e.extraAttributes,context_uuid:t}};return mp(n,Ile)}const f7e=(e,...t)=>e.getStringAssignment(...t);function ZO(e){return mp(e,f7e)}const m7e=(e,...t)=>e.getBooleanAssignment(...t);function Ut(e){return mp(e,m7e)}const h7e=(e,...t)=>e.getNumericAssignment(...t);function p7e(e){return mp(e,h7e)}const g7e=(e,...t)=>e.getIntegerAssignment(...t);function y7e(e){return mp(e,g7e)}function JO(e){return vf({...e,subjectType:"visitor_id",skip:!1})}function Yr(e){return Ut({...e,subjectType:"visitor_id",skip:!1})}const xf=()=>{const e=f.useContext(XO);if(!e)throw new Error("useEppoExperiments must be used within EppoExperimentsContext");return e},v7e=async({entryUUID:e,params:t,reason:n})=>{try{return(await ne.POST("/rest/entry/should-show-feedback/{entry_uuid}",n,{params:{path:{entry_uuid:e}},body:t,timeoutMs:je({productionMs:500,devMs:1e3,clientSideMs:1e3}),numRetries:0})).data?.should_show_feedback??!1}catch(r){return ee.error("Failed to check if should show feedback",r),!1}},x7e=async({slugOrUUID:e,headers:t,options:n,numRetries:r=0,reason:s})=>{const a="getThreadByUUID";if(!e||e==="undefined"||e==="new"){ee.log(`Tried to ${a} with bad slugOrUUID: ${e}`);return}const o=n?.withParentInfo??!1,i=n?.version??ni,c=n?.source??Joe,u=n?.limit??0,d=n?.offset??0,m=n?.fromFirst??!1,h=n?.supportedBlockUseCases??[],p=n?.cursor??null;try{const g=await ne.GET("/rest/thread/{entry_uuid_or_slug}",s,{params:{path:{entry_uuid_or_slug:e},query:{with_parent_info:o,with_schematized_response:!0,version:i,source:c,limit:u,offset:d,from_first:m,supported_block_use_cases:h,cursor:p}},timeoutMs:nn.HIGH,numRetries:r,headers:t});if(!g.response.ok||!g.data||g.error)throw g.error?new Error(`Failed to ${a} for ${e}`,{cause:g.error.detail}):new Error(`Failed to ${a} for ${e}`);return g.data}catch(g){throw ee.error("Failed to get thread by uuid",g),g}},BFt=async({entryUUID:e,selectedText:t,beforeContext:n,afterContext:r,callback:s,reason:a})=>{await ne.SSE("/rest/sse/check-sources",a,{params:{entry_uuid_or_slug:e,selected_text:t,before_context:n,after_context:r},handlers:{message:o=>s(o)}})},VFt=async({entryUUID:e,answerHelpful:t,detailedFeedback:n,reason:r})=>{try{const{error:s}=await ne.POST("/rest/entry/feedback/{entry_uuid}",r,{params:{path:{entry_uuid:e}},body:{answer_helpful:t??!1,feedback:n},timeoutMs:je({productionMs:5e3}),numRetries:1});if(s)throw new Me("API_CLIENTS_ERROR",{cause:s})}catch(s){ee.error(s)}},$Ft=async({entryUUID:e,params:t,reason:n})=>{if(e)try{const{error:r}=await ne.POST("/rest/entry/label-entry/{entry_uuid}",n,{params:{path:{entry_uuid:e}},body:t,timeoutMs:je({productionMs:5e3}),numRetries:1});if(r)throw new Me("API_CLIENTS_ERROR",{cause:r})}catch(r){ee.error(r)}},WFt=async({entry_uuid:e,format:t,reason:n})=>{const{data:r,error:s}=await ne.POST("/rest/entry/export",n,{body:{entry_uuid:e,format:t},timeoutMs:je({productionMs:6e3}),numRetries:1});if(s)throw new Me("API_CLIENTS_ERROR",{cause:s});return r},b7e=async({slugOrUUID:e,reason:t})=>{const{error:n}=await ne.POST("/rest/thread/request-access/{entry_uuid_or_slug}",t,{params:{path:{entry_uuid_or_slug:e}}});if(n)throw new Me("API_CLIENTS_ERROR",{cause:n})},Mv=async({entryUUID:e,reason:t})=>{try{await ne.POST("/rest/sse/perplexity_terminate",t,{headers:{"content-type":"application/json"},body:{entry_uuid:e},timeoutMs:je({productionMs:5e3}),numRetries:1})}catch(n){ee.error("Failed to terminate entry",n)}},HFt=async({entryUUID:e,reason:t})=>{try{await ne.POST("/rest/sse/perplexity_skip_search",t,{headers:{"content-type":"application/json"},body:{entry_uuid:e}})}catch(n){ee.error("Failed to skip search",n)}},_7e=async({entryUUID:e,clarification:t,reason:n})=>{try{await ne.POST("/rest/sse/perplexity_clarifying_answer",n,{headers:{"content-type":"application/json"},body:{entry_uuid:e,clarification:t},timeoutMs:je({productionMs:5e3}),numRetries:0})}catch(r){ee.error("Failed to give clarifying answer",r)}},w7e=async({entryUUID:e,reason:t})=>{try{return(await ne.POST("/rest/entry/should-show-recruitment-banner/{entry_uuid}",t,{params:{path:{entry_uuid:e}},body:void 0,timeoutMs:je({productionMs:500,devMs:1e3,clientSideMs:1e3}),numRetries:0})).data?.should_show_recruitment_banner??!1}catch(n){return ee.error("Failed to check if should show recruitment banner",n),!1}},zFt=async({contextUUID:e,stepUUID:t,result:n,reason:r})=>{try{const{data:s,error:a}=await ne.POST("/rest/sse/pro_search_step_result",r,{body:{context_uuid:e,step_uuid:t,result:n},timeoutMs:je({productionMs:5e3}),numRetries:0});if(a)throw new Me("API_CLIENTS_ERROR",{cause:a});return s?.status==="completed"?s.should_resume:!1}catch(s){ee.error(s)}return!1},S7e=async({entryUUID:e,params:t,siblingUUID:n,reason:r})=>{const{error:s}=await ne.POST("/rest/entry/set-entry-selection/{entry_uuid}",r,{params:{path:{entry_uuid:e}},body:{selection_status:t,sibling_uuid:n},timeoutMs:je({productionMs:5e3}),numRetries:1});if(s)throw new Me("API_CLIENTS_ERROR",{cause:s})},jle=A.memo(({lineColor:e,width:t,fillColor:n,...r})=>{const s=B("h-auto group",t),a=B(e,"transition-all duration-300");return l.jsx("div",{className:s,...r,children:l.jsxs("svg",{viewBox:"0 0 400 91",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{d:"M196.978 27.8931H200.033V34.1872H196.079C192.979 34.1872 190.669 34.9333 189.14 36.4254C187.615 37.9176 186.85 40.3662 186.85 43.7711V64.401H180.606V28.0333H186.85V33.8367C186.85 34.1622 187.014 34.3274 187.337 34.3274C187.52 34.3274 187.659 34.2823 187.754 34.1872C187.848 34.0921 187.938 33.9068 188.032 33.6264C189.234 29.8058 192.219 27.8931 196.983 27.8931H196.978ZM237.763 35.6894C239.402 38.6036 240.227 42.1137 240.227 46.2146C240.227 50.3156 239.407 53.8257 237.763 56.7399C236.119 59.6541 233.993 61.8323 231.38 63.2794C228.767 64.7265 225.956 65.4476 222.951 65.4476C217.03 65.4476 212.868 63.0691 210.464 58.3122C210.28 57.9417 210.046 57.7514 209.768 57.7514C209.49 57.7514 209.351 57.8916 209.351 58.172V77.6853H203.107V28.0333H209.351V34.2573C209.351 34.5377 209.49 34.6779 209.768 34.6779C210.046 34.6779 210.275 34.4926 210.464 34.1171C212.868 29.3602 217.03 26.9817 222.951 26.9817C225.956 26.9817 228.767 27.7028 231.38 29.1499C233.993 30.597 236.119 32.7751 237.763 35.6894ZM233.983 46.2146C233.983 41.9234 232.841 38.5786 230.551 36.1801C228.261 33.7816 225.246 32.5799 221.496 32.5799C217.745 32.5799 214.73 33.7816 212.44 36.1801C210.151 38.5836 209.311 41.9284 209.311 46.2146C209.311 50.5009 210.151 53.8507 212.44 56.2492C214.73 58.6527 217.75 59.8494 221.496 59.8494C225.241 59.8494 228.261 58.6477 230.551 56.2492C232.841 53.8507 233.983 50.5009 233.983 46.2146ZM134.595 35.7445C136.235 38.6587 137.059 42.1688 137.059 46.2697C137.059 50.3707 136.24 53.8808 134.595 56.795C132.951 59.7092 130.825 61.8874 128.213 63.3345C125.6 64.7816 122.788 65.5026 119.783 65.5026C113.863 65.5026 109.7 63.1242 107.296 58.3673C107.112 57.9967 106.879 57.8065 106.601 57.8065C106.322 57.8065 106.183 57.9467 106.183 58.2271V77.7404H99.9446V28.0883H106.188V34.3124C106.188 34.5928 106.327 34.733 106.606 34.733C106.884 34.733 107.112 34.5477 107.301 34.1722C109.705 29.4153 113.867 27.0368 119.788 27.0368C122.793 27.0368 125.605 27.7579 128.218 29.205C130.83 30.6521 132.956 32.8302 134.6 35.7445H134.595ZM130.815 46.2697C130.815 41.9785 129.673 38.6336 127.383 36.2352C125.093 33.8367 122.078 32.6349 118.328 32.6349C114.578 32.6349 111.563 33.8367 109.273 36.2352C106.983 38.6387 106.144 41.9835 106.144 46.2697C106.144 50.5559 106.983 53.9058 109.273 56.3043C111.563 58.7078 114.578 59.9045 118.328 59.9045C122.078 59.9045 125.093 58.7028 127.383 56.3043C129.673 53.9058 130.815 50.5559 130.815 46.2697ZM169.112 52.8543H175.703C174.824 56.2592 173.031 59.2085 170.329 61.7021C167.622 64.1957 163.748 65.4425 158.706 65.4425C154.911 65.4425 151.573 64.6614 148.682 63.0991C145.791 61.5369 143.561 59.3137 141.986 56.4195C140.412 53.5303 139.627 50.1253 139.627 46.2096C139.627 42.294 140.392 38.889 141.917 35.9998C143.442 33.1106 145.583 30.8824 148.335 29.3201C151.086 27.7579 154.31 26.9767 158.011 26.9767C161.711 26.9767 164.776 27.7479 167.344 29.2851C169.912 30.8223 171.829 32.8653 173.101 35.404C174.372 37.9477 175.008 40.7317 175.008 43.7611V47.9572H146.219C146.447 51.5925 147.664 54.4867 149.859 56.6298C152.055 58.7729 155.005 59.8494 158.706 59.8494C161.711 59.8494 164.016 59.2335 165.61 57.9967C167.205 56.7599 168.372 55.0475 169.112 52.8543ZM146.288 42.7146H168.074C168.074 39.545 167.264 37.0614 165.645 35.2638C164.026 33.4712 161.483 32.5699 158.015 32.5699C154.777 32.5699 152.129 33.4461 150.073 35.1937C148.017 36.9412 146.755 39.4498 146.293 42.7096L146.288 42.7146ZM245.169 64.396H251.413V14.043H245.169V64.401V64.396ZM331.801 24.0625H339.093V16.1911H331.801V24.0625ZM357.526 58.9782C356.393 59.0933 355.708 59.1534 355.479 59.1534C355.156 59.1534 354.898 59.0583 354.714 58.873C354.531 58.6877 354.436 58.4324 354.436 58.1019C354.436 57.8716 354.496 57.1806 354.61 56.0389C354.724 54.8972 354.784 53.1347 354.784 50.7612V33.361H363.69L361.937 28.0333H354.789V18.2391H348.545V28.0283H341.755V33.356H348.545V52.5038C348.545 56.5146 349.519 59.4989 351.461 61.4568C353.403 63.4146 356.363 64.396 360.342 64.396H365.2V58.8029H362.771C360.412 58.8029 358.663 58.863 357.531 58.9782H357.526ZM394.059 28.0283L383.723 58.5425C383.583 58.9181 383.365 59.4088 382.655 59.4088C381.944 59.4088 381.726 58.9181 381.587 58.5425L371.25 28.0283H364.882L376.853 64.396H381.085C381.363 64.396 381.572 64.4211 381.711 64.4661C381.85 64.5112 381.964 64.6264 382.059 64.8166C382.242 65.097 382.217 65.5177 381.989 66.0735L380.047 71.3862C379.769 72.0872 379.237 72.4377 378.452 72.4377C378.174 72.4377 377.529 72.3776 376.51 72.2624C375.492 72.1473 374.176 72.0872 372.556 72.0872H367.49V77.6803H374.151C378.035 77.6803 380.375 77.0143 382.386 75.6874C384.398 74.3605 385.958 72.0171 387.07 68.6572L400 29.4203V28.0233H394.059V28.0283ZM311.406 41.5979L301.626 28.0283H294.756V29.4253L306.478 45.1631L292.188 62.999V64.396H299.197L310.576 49.7798L321.191 64.396H327.922V62.999L315.504 46.2146L328.965 29.5004V28.0333H321.956L311.411 41.603L311.406 41.5979ZM332.467 64.396H338.71V28.0333H332.467V64.401V64.396ZM292.471 52.8543C291.592 56.2592 289.799 59.2085 287.097 61.7021C284.39 64.1957 280.515 65.4425 275.474 65.4425C271.679 65.4425 268.341 64.6614 265.45 63.0991C262.559 61.5369 260.329 59.3137 258.754 56.4195C257.18 53.5303 256.395 50.1253 256.395 46.2096C256.395 42.294 257.16 38.889 258.685 35.9998C260.21 33.1106 262.35 30.8824 265.102 29.3201C267.854 27.7579 271.078 26.9767 274.778 26.9767C278.479 26.9767 281.543 27.7479 284.111 29.2851C286.679 30.8223 288.597 32.8653 289.868 35.404C291.14 37.9477 291.776 40.7317 291.776 43.7611V47.9572H262.986C263.215 51.5925 264.432 54.4867 266.627 56.6298C268.823 58.7729 271.773 59.8494 275.474 59.8494C278.479 59.8494 280.783 59.2335 282.378 57.9967C283.972 56.7599 285.14 55.0475 285.88 52.8543H292.471ZM263.056 42.7146H284.842C284.842 39.545 284.032 37.0614 282.413 35.2638C280.793 33.4712 278.25 32.5699 274.783 32.5699C271.545 32.5699 268.897 33.4461 266.841 35.1937C264.784 36.9412 263.523 39.4498 263.061 42.7096L263.056 42.7146Z",className:n}),l.jsx("path",{d:"M38.6936 29.9832L12.8633 5.88983V29.9832H38.6936Z M39.5005 29.9832L65.3308 5.88983V29.9832H39.5005Z M38.7227 2L38.7227 90.2534 M64.5246 53.7584L38.6943 30.0068V62.9404L64.5246 85.9724V53.7584Z M12.8924 53.7584L38.7227 30.0068V62.9404L12.8924 85.9724V53.7584Z M2.28711 29.9832V64.4236H12.8863V53.7348L38.7226 29.9832H2.28711Z M38.6943 30.3L64.5246 54.0515V64.7403H75.2872V30.3L38.6943 30.3Z",className:a,strokeWidth:"4.30504",strokeMiterlimit:"10"})]})})});jle.displayName="Full";const Ole=A.memo(({width:e,fillColor:t,...n})=>{const r=B("h-auto group",e,{});return l.jsx("div",{className:r,...n,children:l.jsxs("svg",{viewBox:"0 0 1456 187",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{d:"M311.555 34.9571C330.01 34.9571 344.672 45.7532 344.672 65.084C344.672 84.4148 330.01 95.3568 311.555 95.3568H279.094V140H265.817V34.9571H311.555ZM279.094 84.0501H309.585C322.643 84.0501 331.396 77.1931 331.396 65.157C331.396 53.0478 322.643 46.2638 309.585 46.2638H279.094V84.0501ZM353.444 102.797C353.444 77.7037 367.669 63.9169 390.209 63.9169C412.823 63.9169 425.151 77.8496 425.151 99.5877V105.934H365.918C366.137 121.399 375.255 131.465 390.209 131.465C404.434 131.465 410.926 123.587 412.093 116.73H423.619V118.918C421.868 128.037 413.187 141.751 390.355 141.751C367.815 141.751 353.444 127.964 353.444 102.797ZM366.064 95.8674H412.896C412.75 83.2477 405.09 74.1294 390.136 74.1294C375.474 74.1294 367.085 83.3936 366.064 95.8674ZM447.732 65.6676H460.133V76.1719H461.3C464.218 69.8985 469.908 65.4487 483.257 65.4487H500.691V76.3907H483.549C467.501 76.3907 460.571 84.7795 460.571 101.849V140H447.732V65.6676ZM517.092 169.179V65.6676H529.638V75.8801H530.805C536.349 67.3453 545.322 63.9898 555.826 63.9898C575.157 63.9898 589.965 77.1202 589.965 102.87C589.965 128.547 575.157 141.678 555.826 141.678C545.541 141.678 536.641 138.395 531.097 130.152H529.93V169.179H517.092ZM529.492 102.87C529.492 120.888 539.121 131.028 553.2 131.028C567.425 131.028 576.981 120.888 576.981 102.87C576.981 84.7795 567.425 74.64 553.2 74.64C539.121 74.64 529.492 84.7795 529.492 102.87ZM637.266 34.9571V129.642H651.272V140H605.899V129.642H624.428V45.2426H610.276V34.9571H637.266ZM665.9 102.797C665.9 77.7037 680.125 63.9169 702.665 63.9169C725.278 63.9169 737.606 77.8496 737.606 99.5877V105.934H678.374C678.593 121.399 687.711 131.465 702.665 131.465C716.89 131.465 723.382 123.587 724.549 116.73H736.074V118.918C734.324 128.037 725.643 141.751 702.811 141.751C680.27 141.751 665.9 127.964 665.9 102.797ZM678.52 95.8674H725.351C725.205 83.2477 717.546 74.1294 702.592 74.1294C687.93 74.1294 679.541 83.3936 678.52 95.8674ZM752.566 65.6676H765.696L786.851 93.3143H788.018L810.85 65.6676H823.762V67.856L795.313 102.36L822.522 137.812V140H809.391L787.289 111.186H786.121L762.414 140H749.502V137.812L778.827 102.214L752.566 67.856V65.6676ZM871.43 65.6676V129.642H885.436V140H840.063V129.642H858.591V75.953H844.44V65.6676H871.43ZM857.205 52.9749V38.8962H872.087V52.9749H857.205ZM896.344 65.6676H919.613V43.8566H932.452V65.6676H962.068V76.0989H932.452V127.745L933.619 128.912H961.849V140H938.725C926.543 140 919.613 133.945 919.613 121.836V76.0989H896.344V65.6676ZM973.245 65.6676H986.302L1010.01 124.681H1011.18L1034.81 65.6676H1047.5V67.856L1004.76 169.179H991.992V166.99L1003.66 139.927L973.245 67.856V65.6676ZM1116.67 34.9571H1130.09V128.256H1189.03V140H1116.67V34.9571ZM1205.12 86.3114C1206.66 72.5245 1218.55 63.9169 1237.95 63.9169C1257.21 63.9169 1268.59 72.5245 1268.59 91.0529V140H1256.62V129.787H1255.46C1252.25 135.477 1244.66 141.605 1229.05 141.605C1212.78 141.605 1201.55 133.508 1201.55 119.648C1201.55 104.913 1212.78 98.4205 1227.96 96.5239L1256.19 93.0225V90.3235C1256.19 78.725 1249.84 74.1294 1237.66 74.1294C1225.4 74.1294 1218.18 78.725 1217.16 88.4998H1205.12V86.3114ZM1214.31 119.064C1214.31 126.797 1220.88 131.246 1231.17 131.246C1244.88 131.246 1256.19 123.952 1256.19 107.539V102.943L1230.51 106.299C1220.52 107.612 1214.31 111.259 1214.31 119.064ZM1291.61 34.9571H1304.44V75.5153H1305.61C1311.16 67.1995 1320.06 63.9898 1330.34 63.9898C1349.67 63.9898 1364.48 77.1202 1364.48 102.87C1364.48 128.547 1349.67 141.678 1330.34 141.678C1319.84 141.678 1310.86 138.322 1305.32 129.787H1304.15V140H1291.61V34.9571ZM1304.01 102.87C1304.01 120.888 1313.64 131.028 1327.71 131.028C1341.94 131.028 1351.49 120.888 1351.49 102.87C1351.49 84.7795 1341.94 74.64 1327.71 74.64C1313.64 74.64 1304.01 84.7795 1304.01 102.87ZM1381.07 85.1443C1381.07 71.941 1392.52 63.9898 1411.78 63.9898C1431.18 63.9898 1443 71.941 1444.17 86.0926V88.281H1432.42C1431.91 77.9955 1423.74 74.1294 1411.85 74.1294C1400.04 74.1294 1393.4 77.9226 1393.4 84.8525C1393.4 91.7824 1399.09 94.4085 1407.19 95.3568L1419.95 96.9616C1434.98 98.7853 1445.41 105.132 1445.41 118.773C1445.41 132.487 1434.54 141.678 1413.9 141.678C1393.25 141.678 1380.34 132.559 1379.39 119.064V116.876H1391.36C1392.09 126.943 1401.28 131.538 1413.9 131.538C1426.59 131.538 1433.01 126.87 1433.01 119.429C1433.01 112.134 1426.95 108.852 1417.18 107.612L1404.41 106.007C1390.41 104.329 1381.07 98.2017 1381.07 85.1443Z",className:t}),l.jsx("path",{d:"M59.4967 39.8367C30.9654 39.8367 7.83624 62.9671 7.83624 91.5C7.83624 120.033 30.9654 143.163 59.4967 143.163C83.9985 143.163 104.516 126.105 109.823 103.216H117.84C112.399 130.466 88.3457 151 59.4967 151C26.6376 151 0 124.361 0 91.5C0 58.639 26.6376 32 59.4967 32C91.0393 32 116.849 56.5473 118.866 87.5817H155.879L123.292 54.9276L128.838 49.3918L161.428 82.0483L161.387 35.9218L169.223 35.9149L169.264 82.0641L201.87 49.3918L207.416 54.9276L174.829 87.5817H221V95.4183H174.771L207.416 128.131L201.87 133.667L169.281 101.011L169.321 147.157L161.485 147.163L161.444 100.993L128.838 133.667L123.292 128.131L155.937 95.4183H129.748V95.3791H84.6892V95.4183H59.495V87.5817H111.011C109.008 60.8792 86.7098 39.8367 59.4967 39.8367Z",className:t})]})})});Ole.displayName="Labs";const Lle=A.memo(({lineColor:e,width:t,...n})=>{const r=B("h-auto group ",t);return l.jsx("div",{className:r,...n,children:l.jsx("svg",{viewBox:"0 0 101 116",stroke:"none",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:l.jsx("path",{className:e,d:"M86.4325 6.53418L50.4634 36.9696H86.4325V6.53418Z M50.4625 36.9696L17.2603 6.53418V36.9696H50.4625Z M50.4634 1L50.4634 114.441 M83.6656 70.172L50.4634 36.9697V79.3026L83.6656 108.908V70.172Z M17.2603 70.172L50.4625 36.9697V78.4497L17.2603 108.908V70.172Z M3.42627 36.9697V81.2394H17.2605V70.172L50.4628 36.9697H3.42627Z M50.4634 36.9697L83.6656 70.172V81.2394H97.4999V36.9697L50.4634 36.9697Z",strokeWidth:"5.53371",strokeMiterlimit:"10"})})})});Lle.displayName="Mark";const tC=A.memo(({width:e="w-10",sizeVariant:t="regular",fillColor:n="fill-super",svgClassName:r,...s})=>{const a=B("h-auto group",e);return l.jsx("div",{className:a,...s,children:t==="small"?l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1102.02 529.46",className:r,children:[l.jsx("path",{className:n,d:"M1068.23,126.49c-23.5-41.68-58.35-75.11-100.77-96.67C928.5,10.04,884.37,0,836.29,0H66.16C29.56,0-.08,29.71,0,66.3l1,463.16h109.72V107.9h78.16v24.37c0,2.66,3.19,3.99,5.1,2.13,20.89-20.25,50.62-30.5,88.64-30.5,26.8,0,51.2,6.11,72.52,18.17,21.44,12.13,38.59,30.51,50.96,54.66h0c12.27,23.95,18.49,53.6,18.49,88.14s-6.22,63.91-18.49,87.85c-12.37,24.14-29.52,42.53-50.96,54.66-21.33,12.06-45.73,18.17-72.52,18.17-16.55,0-55.7-2.68-87.27-25.54-1.98-1.43-4.75-.01-4.75,2.43v127.02h645.68c48.09,0,92.22-10.03,131.18-29.83,42.41-21.55,77.26-54.98,100.78-96.69,22.41-39.76,33.78-86.22,33.78-138.07s-11.37-98.6-33.79-138.39ZM650.3,177.46h-33.53c-23.25,0-40.37,6.1-50.86,18.14-10.7,12.27-16.12,32.09-16.12,58.91v164.71h-79.89V107.9h77.01v20.91c0,2.68,3.28,4.04,5.13,2.11,4.56-4.76,9.87-8.79,15.89-12.06,11.94-6.49,28.27-9.77,48.55-9.77h33.81v68.37ZM967.21,352.21c-13.66,24.23-33.03,42.83-57.56,55.29-24.32,12.36-52.71,18.62-84.38,18.62s-60.35-6.27-84.67-18.62c-24.54-12.46-43.9-31.07-57.56-55.29-13.58-24.09-20.47-53.47-20.47-87.34s6.89-63.54,20.47-87.63c13.65-24.22,33.02-42.82,57.56-55.29,24.33-12.36,52.81-18.62,84.67-18.62s60.06,6.27,84.38,18.62c24.53,12.47,43.9,31.07,57.56,55.29,13.58,24.1,20.47,53.58,20.47,87.63s-6.89,63.25-20.47,87.34Z"}),l.jsx("path",{className:n,d:"M868.46,179.51c-12.16-7.28-26.7-10.97-43.2-10.97s-31.32,3.69-43.48,10.97c-12.07,7.23-21.57,18.05-28.23,32.16-6.79,14.4-10.23,32.3-10.23,53.2s3.45,38.57,10.24,53.07c6.66,14.2,16.19,25.06,28.35,32.28,12.26,7.29,26.85,10.98,43.36,10.98s31.04-3.69,43.2-10.97c12.07-7.23,21.56-18.09,28.22-32.29,6.79-14.5,10.24-32.35,10.24-53.07s-3.45-38.57-10.24-53.07c-6.66-14.2-16.15-25.07-28.22-32.29Z"}),l.jsx("path",{className:n,d:"M221.1,351.54c12.26,7.29,26.85,10.98,43.36,10.98s31.04-3.69,43.2-10.97c12.07-7.23,21.56-18.09,28.22-32.29,6.79-14.5,10.24-32.35,10.24-53.07s-3.45-38.57-10.24-53.07c-6.66-14.2-16.15-25.06-28.22-32.29-12.16-7.28-26.7-10.97-43.19-10.97s-31.32,3.69-43.48,10.97c-12.07,7.23-21.57,18.05-28.23,32.16-6.79,14.4-10.23,32.3-10.23,53.2s3.45,38.57,10.24,53.07c6.66,14.2,16.19,25.06,28.35,32.28Z"})]}):l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 804.75 382.36",children:[l.jsx("path",{className:n,d:"M558.95,126.72c-27.44,27.72-27.17,101.45,0,129.38,25.44,28.65,83.99,28.94,109.2,0h0c13.9-14.68,20.94-38.51,20.94-64.92,0-26.44-7.04-50.1-20.98-64.5-25.23-29.51-83.73-29.21-109.17.04Z"}),l.jsx("path",{className:n,d:"M780.18,91.05l-.13-.24c-16.48-29.44-40.65-53.13-69.89-68.52l-.17-.09c-27.73-14.73-58.76-22.2-92.21-22.2H30.68C14.13,0,.71,13.4.68,29.94l-.68,352.42h61.16V69.44h51.68v20.46c0,2.11,2.57,3.13,4.03,1.6,47.58-52.18,144.58-36.94,178.65,27.45,11.54,19.66,17.39,43.96,17.39,72.23,1.63,73.04-48.06,131.68-120.25,131.21-32.37,0-57.81-12.59-75.79-31.52-1.45-1.53-4.03-.51-4.03,1.6v89.9h504.93c33.45,0,64.43-7.45,92.09-22.14l.17-.09c29.33-15.43,53.53-39.13,69.99-68.53l.14-.25c16.31-28.74,24.58-62.44,24.58-100.17s-8.27-71.4-24.57-100.13ZM479.99,118.23c-23.81.5-56.08-3.74-72.26,13-8.74,8.61-13.17,23.4-13.17,43.96v140.34h-51.67V69.44h51.67v20.46c0,2.35,3.08,3.22,4.32,1.22,5.01-8.06,10.34-13.58,16.12-16.74,9.81-5.62,23.28-8.48,40.05-8.48h24.94v52.31ZM613.77,322.39c-75.99.52-128.52-54.09-127-131.21,0-27.33,5.53-51.14,16.45-70.78,43.24-80.65,177.73-80.74,220.65-.03,11.22,19.65,16.91,43.48,16.91,70.8,1.27,76.58-51.1,131.74-127,131.21Z"}),l.jsx("path",{className:n,d:"M240.29,256.1h0c13.9-14.68,20.94-38.51,20.94-64.92,0-26.44-7.04-50.1-20.98-64.5-25.23-29.51-83.73-29.21-109.17.04-27.44,27.72-27.18,101.45,0,129.38,25.44,28.65,83.99,28.94,109.2,0Z"})]})})});tC.displayName="Pro";const jA=A.memo(({width:e,fillColor:t,isPro:n,isMax:r,...s})=>{const a=B("h-auto group",e,{"":n});return n?l.jsx("div",{className:a,...s,children:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 3913.07 632",children:[l.jsx("path",{className:t,d:"M972.21,137.43h30.23v62.43h-39.13c-30.66,0-53.52,7.39-68.68,22.22-15.07,14.78-22.64,39.1-22.64,72.9v204.71h-61.76V138.85h61.76v57.58c0,3.25,1.63,4.85,4.8,4.85,1.81,0,3.17-.45,4.14-1.38.97-.94,1.8-2.76,2.77-5.57,11.89-37.9,41.46-56.87,88.55-56.87h-.04v-.04ZM1383.06,214.78c16.21,28.9,24.36,63.73,24.36,104.43s-8.11,75.53-24.36,104.43c-16.26,28.9-37.32,50.54-63.18,64.88-25.86,14.34-53.66,21.51-83.39,21.51-58.59,0-99.78-23.6-123.57-70.81-1.81-3.7-4.14-5.57-6.87-5.57s-4.14,1.38-4.14,4.19v193.63h-61.77V138.81h61.77v61.77c0,2.76,1.36,4.19,4.14,4.19s5.02-1.83,6.87-5.57c23.79-47.2,64.98-70.81,123.57-70.81,29.73,0,57.53,7.17,83.39,21.51,25.86,14.34,46.88,35.98,63.18,64.88ZM1345.7,319.21c0-42.57-11.32-75.75-33.97-99.57-22.64-23.83-52.46-35.72-89.6-35.72s-66.96,11.93-89.61,35.72c-22.68,23.82-30.96,57.04-30.96,99.57s8.32,75.75,30.96,99.57c22.65,23.87,52.51,35.72,89.61,35.72s66.96-11.93,89.6-35.72c22.65-23.78,33.97-57.04,33.97-99.57ZM342.87,215.31c16.21,28.9,24.36,63.73,24.36,104.43s-8.11,75.53-24.36,104.43c-16.26,28.9-37.31,50.55-63.17,64.88-25.86,14.34-53.66,21.51-83.39,21.51-58.59,0-99.78-23.6-123.57-70.81-1.8-3.7-4.14-5.57-6.87-5.57s-4.14,1.38-4.14,4.18v193.63H0V139.34h61.76v61.76c0,2.76,1.36,4.19,4.14,4.19s5.02-1.83,6.87-5.57c23.79-47.2,64.98-70.81,123.57-70.81,29.74,0,57.53,7.17,83.39,21.51,25.86,14.34,46.87,35.98,63.17,64.88h-.05ZM305.46,319.74c0-42.57-11.32-75.75-33.96-99.57-22.65-23.78-52.51-35.72-89.61-35.72s-66.96,11.93-89.6,35.72c-22.64,23.87-30.97,57.05-30.97,99.57s8.33,75.75,30.97,99.58c22.64,23.87,52.47,35.71,89.6,35.71s66.96-11.93,89.61-35.71c22.64-23.78,33.96-57.05,33.96-99.58ZM701.07,385.07h65.2c-8.68,33.8-26.43,63.05-53.17,87.77-26.79,24.76-65.11,37.1-115.02,37.1-37.53,0-70.57-7.75-99.16-23.25-28.59-15.5-50.66-37.54-66.26-66.26-15.59-28.68-23.35-62.43-23.35-101.31s7.58-72.63,22.64-101.31c15.07-28.68,36.26-50.77,63.48-66.26,27.23-15.5,59.12-23.25,95.73-23.25s66.96,7.66,92.33,22.89c25.42,15.27,44.36,35.54,56.96,60.7,12.6,25.25,18.85,52.86,18.85,82.92v41.64h-284.85c2.24,36.07,14.32,64.8,36.03,86.04,21.72,21.29,50.92,31.93,87.54,31.93,29.73,0,52.55-6.1,68.33-18.39,15.77-12.29,27.31-29.26,34.67-51.03l.04.09ZM473.18,284.47h215.55c0-31.44-8.02-56.11-24.05-73.92-16.03-17.77-41.19-26.72-75.51-26.72-32.03,0-58.24,8.68-78.59,26.05-20.35,17.32-32.82,42.22-37.4,74.59ZM1457.24,499.61h61.81V0h-61.81v499.65-.04ZM2325.88,99.4h72.17V21.24h-72.17v78.15ZM2592.35,445.86c-11.22,1.16-18.01,1.74-20.24,1.74-3.18,0-5.79-.93-7.58-2.81-1.82-1.83-2.77-4.36-2.77-7.66,0-2.27.59-9.13,1.76-20.48,1.09-11.31,1.71-28.81,1.71-52.37v-172.65h88.1l-17.36-52.86h-70.71V41.59h-61.74v97.13h-67.2v52.86h67.2v189.97c0,39.81,9.65,69.43,28.83,88.84,19.21,19.42,48.51,29.17,87.91,29.17h48.05v-55.49h-24.05c-23.34,0-40.63.58-51.85,1.74l-.06.05ZM2965.71,138.76l-102.29,302.77c-1.35,3.74-3.53,8.6-10.51,8.6s-9.21-4.85-10.6-8.6l-102.29-302.77h-62.99l118.46,360.85h41.9c2.72,0,4.81.27,6.22.71,1.36.45,2.5,1.6,3.43,3.47,1.79,2.76,1.57,6.95-.71,12.47l-19.21,52.73c-2.77,6.95-8.02,10.42-15.76,10.42-2.77,0-9.16-.58-19.22-1.74-10.08-1.16-23.07-1.73-39.1-1.73h-50.14v55.48h65.9c38.45,0,61.58-6.59,81.5-19.77,19.92-13.18,35.33-36.43,46.33-69.73l127.94-389.3v-13.85h-58.86ZM2116.82,273.38l-96.8-134.62h-67.96v13.85l115.98,156.13-141.42,176.97v13.85h69.35l112.59-145.04,105.03,145.04h66.61v-13.85l-122.92-166.55,133.24-165.84v-14.56h-69.35l-104.32,134.62h-.03ZM2332.45,499.61h61.8V138.81h-61.8v360.84-.04ZM1925.78,385.07c-8.72,33.8-26.41,63.05-53.15,87.77-26.8,24.76-65.12,37.1-115.04,37.1-37.52,0-70.57-7.75-99.16-23.25-28.64-15.5-50.65-37.54-66.25-66.26-15.55-28.68-23.31-62.43-23.31-101.31s7.58-72.63,22.65-101.31c15.12-28.68,36.26-50.77,63.49-66.26,27.2-15.5,59.1-23.25,95.76-23.25s66.96,7.66,92.37,22.89c25.38,15.27,44.38,35.54,56.96,60.7,12.61,25.25,18.86,52.86,18.86,82.92v41.64h-284.88c2.29,36.07,14.3,64.8,36.04,86.04,21.71,21.29,50.92,31.93,87.53,31.93,29.73,0,52.56-6.1,68.32-18.39,15.76-12.29,27.31-29.26,34.62-51.03h65.24l-.05.09ZM1634.25,284.47h215.55c0-31.44-8.02-56.11-24-73.92-16.06-17.77-41.19-26.72-75.52-26.72-32.04,0-58.23,8.68-78.59,26.05-20.35,17.32-32.85,42.22-37.39,74.59h-.05Z"}),l.jsxs("g",{children:[l.jsx("path",{className:"fill-super",d:"M3355.84,188.2c-34.07-64.39-131.07-79.63-178.65-27.45-1.45,1.53-4.03.51-4.03-1.6v-20.46s-51.68,0-51.68,0v360.92h51.68v-137.9c0-2.11,2.57-3.13,4.03-1.6,17.98,18.93,43.42,31.52,75.79,31.52,72.2.47,121.88-58.16,120.25-131.21,0-28.27-5.85-52.57-17.39-72.23ZM3321.56,260.43c0,26.4-7.05,50.24-20.94,64.92h0c-25.21,28.94-83.76,28.65-109.2,0-27.18-27.93-27.44-101.65,0-129.38,25.44-29.25,83.94-29.55,109.17-.04,13.94,14.4,20.97,38.06,20.98,64.5Z"}),l.jsx("path",{className:"fill-super",d:"M3678.1,499.61h-438.05v-48.22h438.05c33.41,0,64.39-7.45,92.07-22.16,29.4-15.46,53.58-39.15,70.02-68.56l.08-.14c16.31-28.72,24.58-62.4,24.58-100.11s-8.26-71.36-24.56-100.07l-.08-.13c-16.46-29.43-40.64-53.13-69.93-68.54-27.79-14.76-58.78-22.22-92.19-22.22h-555.91V21.24h555.91c41.39,0,79.99,9.36,114.73,27.81,37.45,19.7,68.41,49.99,89.43,87.55,20.45,36.05,30.82,77.7,30.82,123.82s-10.38,87.81-30.84,123.86c-21,37.53-51.96,67.81-89.53,87.57-34.63,18.4-73.22,27.75-114.61,27.75Z"}),l.jsx("path",{className:"fill-super",d:"M3784.19,189.62c-42.92-80.72-177.41-80.62-220.65.03-10.91,19.63-16.45,43.44-16.45,70.78-1.52,77.12,51.01,131.73,127,131.21,75.9.53,128.27-54.63,127-131.21,0-27.33-5.69-51.15-16.91-70.8ZM3749.42,260.43c0,26.4-7.05,50.24-20.94,64.92h0c-25.21,28.94-83.76,28.65-109.2,0-27.17-27.93-27.44-101.65,0-129.38,25.44-29.25,83.94-29.55,109.17-.04,13.94,14.4,20.97,38.06,20.98,64.5Z"}),l.jsx("path",{className:"fill-super",d:"M3515.38,135.16c-16.77,0-30.24,2.85-40.05,8.48-5.78,3.15-11.11,8.68-16.12,16.74-1.24,2-4.32,1.13-4.32-1.22v-20.46s-51.67,0-51.67,0v246.1h51.67v-140.34c0-20.57,4.43-35.36,13.17-43.97,16.17-16.75,48.45-12.5,72.26-13v-52.31h-24.94Z"})]})]})}):r?l.jsx("div",{className:a,...s,children:l.jsxs("svg",{viewBox:"0 0 485 74",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{d:"M113.78 16.0915H117.318V23.4013H112.739C109.15 23.4013 106.475 24.2666 104.701 26.003C102.937 27.7336 102.051 30.5812 102.051 34.5388V58.508H94.8233V16.2578H102.051V22.9997C102.051 23.3803 102.242 23.5676 102.613 23.5676C102.825 23.5676 102.984 23.5149 103.098 23.406C103.211 23.2959 103.308 23.0828 103.422 22.7538C104.813 18.3162 108.274 16.095 113.785 16.095H113.78V16.0903V16.0915ZM161.863 25.1483C163.76 28.5322 164.714 32.6103 164.714 37.3759C164.714 42.1414 163.765 46.2196 161.863 49.6034C159.96 52.9873 157.495 55.5211 154.469 57.2001C151.443 58.8792 148.189 59.7187 144.71 59.7187C137.853 59.7187 133.032 56.9554 130.248 51.4277C130.036 50.9944 129.763 50.7755 129.444 50.7755C129.124 50.7755 128.959 50.9371 128.959 51.2661V73.9379H121.73V16.2531H128.959V23.4856C128.959 23.8088 129.119 23.9762 129.444 23.9762C129.769 23.9762 130.031 23.762 130.248 23.324C133.032 17.7975 137.853 15.033 144.71 15.033C148.189 15.033 151.443 15.8725 154.469 17.5516C157.495 19.2306 159.955 21.7644 161.863 25.1483ZM157.491 37.3759C157.491 32.3914 156.166 28.5064 153.515 25.7173C150.866 22.9271 147.376 21.5349 143.029 21.5349C138.682 21.5349 135.193 22.9318 132.542 25.7173C129.887 28.5064 128.918 32.3961 128.918 37.3759C128.918 42.3556 129.892 46.2453 132.542 49.0344C135.193 51.8293 138.687 53.2168 143.029 53.2168C147.371 53.2168 150.866 51.8199 153.515 49.0344C156.166 46.25 157.491 42.3556 157.491 37.3759ZM40.127 25.2103C42.0241 28.5942 42.9779 32.6724 42.9779 37.4379C42.9779 42.2034 42.0287 46.2816 40.127 49.6655C38.224 53.0493 35.7605 55.5843 32.734 57.2622C29.7076 58.9412 26.454 59.7808 22.9747 59.7808C16.1177 59.7808 11.2972 57.0175 8.51295 51.4897C8.30229 51.0565 8.02844 50.8375 7.70894 50.8375C7.38944 50.8375 7.22442 50.9991 7.22442 51.327V73.9988H0V16.3151H7.22793V23.5465C7.22793 23.8697 7.3871 24.0371 7.71245 24.0371C8.0378 24.0371 8.29995 23.8228 8.51646 23.3849C11.3007 17.8584 16.1212 15.0939 22.9782 15.0939C26.4587 15.0939 29.7111 15.9334 32.7375 17.6125C35.764 19.2915 38.2228 21.8253 40.1305 25.2092H40.1246L40.127 25.2103ZM35.7488 37.4379C35.7488 32.4534 34.424 28.5684 31.7743 25.7794C29.1236 22.995 25.629 21.597 21.2871 21.597C16.9451 21.597 13.4506 22.9939 10.8009 25.7794C8.15132 28.5743 7.17644 32.4593 7.17644 37.4379C7.17644 42.4165 8.15132 46.3074 10.8009 49.0976C13.4506 51.8925 16.9416 53.2788 21.2871 53.2788C25.6325 53.2788 29.1236 51.882 31.7743 49.0976C34.424 46.3132 35.7488 42.4177 35.7488 37.4379ZM82.048 45.0873H89.6786C88.6627 49.0449 86.5854 52.4697 83.4559 55.3642C80.3206 58.2633 75.8359 59.7082 69.9949 59.7082C65.6026 59.7082 61.7359 58.8007 58.3899 56.9859C55.0439 55.171 52.461 52.5903 50.6353 49.2276C48.8108 45.8695 47.9026 41.9177 47.9026 37.3653C47.9026 32.8129 48.7897 28.8612 50.5522 25.5031C52.3159 22.145 54.7958 19.5585 57.9815 17.7448C61.1683 15.9299 64.9004 15.0225 69.185 15.0225C73.4695 15.0225 77.0215 15.9194 79.9906 17.7026C82.9656 19.4906 85.1822 21.864 86.6568 24.8099C88.1314 27.7664 88.8628 30.9992 88.8628 34.5189V39.3945H55.5261C55.7883 43.6178 57.202 46.9818 59.7428 49.4688C62.2847 51.9616 65.7021 53.2074 69.9878 53.2074C73.4672 53.2074 76.1379 52.4932 77.9847 51.0541C79.8303 49.6151 81.1808 47.6281 82.0422 45.0791L82.0469 45.0896L82.048 45.0873ZM55.3775 33.3082H80.6039C80.6039 29.6269 79.6653 26.7384 77.7892 24.653C75.9132 22.5723 72.9686 21.5244 68.9521 21.5244C65.2035 21.5244 62.1361 22.5407 59.7545 24.5746C57.3729 26.6025 55.9135 29.518 55.3775 33.3082ZM170.545 58.4986H177.778V0H170.545V58.5033V58.4986ZM272.204 11.6386H280.65V2.49282H272.204V11.6386ZM303.389 52.2051C302.076 52.3409 301.282 52.4089 301.021 52.4089C300.649 52.4089 300.343 52.3 300.134 52.0798C299.921 51.8656 299.809 51.5693 299.809 51.1829C299.809 50.9171 299.878 50.1139 300.015 48.785C300.143 47.4607 300.216 45.4116 300.216 42.653V22.4377H310.526L308.494 16.2484H300.219V4.86971H292.993V16.2425H285.129V22.4318H292.993V44.6752C292.993 49.3365 294.123 52.8046 296.367 55.0773C298.616 57.3512 302.045 58.4928 306.656 58.4928H312.279V51.9955H309.465C306.733 51.9955 304.71 52.0634 303.396 52.1993L303.389 52.2051ZM347.085 16.2425L335.113 51.6993C334.955 52.1372 334.7 52.7063 333.883 52.7063C333.067 52.7063 332.806 52.1384 332.643 51.6993L320.672 16.2484H313.3L327.163 58.4998H332.067C332.385 58.4998 332.63 58.5314 332.795 58.5829C332.954 58.6356 333.088 58.7703 333.196 58.9892C333.406 59.3124 333.38 59.803 333.113 60.4493L330.865 66.6234C330.541 67.4372 329.927 67.8435 329.021 67.8435C328.697 67.8435 327.949 67.7756 326.771 67.6397C325.592 67.5039 324.071 67.4372 322.195 67.4372H316.327V73.9333H324.04C328.54 73.9333 331.247 73.1616 333.578 71.6184C335.909 70.0752 337.713 67.3529 339 63.4538L353.973 17.8712V16.2437L347.094 16.2496L347.085 16.2437V16.2425ZM247.737 32.0097L236.408 16.2472H228.455V17.8689L242.028 36.1499L225.477 56.8711V58.4928H233.594L246.77 41.5103L259.062 58.4928H266.858V56.8711L252.472 37.37L268.065 17.952V16.2472H259.949L247.74 32.0097H247.737ZM272.973 58.4986H280.205V16.2531H272.973V58.5033V58.4986ZM225.379 45.0873C224.358 49.0449 222.288 52.4697 219.159 55.3642C216.022 58.2633 211.538 59.7082 205.695 59.7082C201.304 59.7082 197.436 58.8007 194.09 56.9859C190.739 55.171 188.163 52.5903 186.337 49.2276C184.517 45.8695 183.609 41.9177 183.609 37.3653C183.609 32.8129 184.496 28.8612 186.26 25.5031C188.029 22.145 190.503 19.5585 193.69 17.7448C196.873 15.9299 200.607 15.0225 204.897 15.0225C209.188 15.0225 212.734 15.9194 215.707 17.7026C218.678 19.4906 220.901 21.864 222.374 24.8099C223.849 27.7664 224.581 30.9992 224.581 34.5189V39.3945H191.241C191.509 43.6178 192.914 46.9818 195.458 49.4688C197.999 51.9616 201.418 53.2074 205.702 53.2074C209.182 53.2074 211.854 52.4932 213.698 51.0541C215.542 49.6151 216.894 47.6281 217.75 45.0791H225.385L225.379 45.0896V45.0873ZM191.261 33.3082H216.487C216.487 29.6269 215.548 26.7384 213.678 24.653C211.799 22.5723 208.858 21.5244 204.84 21.5244C201.09 21.5244 198.025 22.5407 195.642 24.5746C193.261 26.6025 191.798 29.518 191.266 33.3082H191.261Z",className:t}),l.jsxs("g",{children:[l.jsx("path",{d:"M369.705 16.0751V19.7517H370.279C371.485 17.7413 373.552 15.3866 379.007 15.3866C384.461 15.3866 386.93 18.2588 387.906 20.7282H388.48C389.915 18.1429 392.499 15.3866 398.241 15.3866C403.982 15.3866 408.345 18.5457 408.345 25.2666V45.3133H403.293V25.612C403.293 21.7633 401.169 19.4086 397.035 19.4086C392.385 19.4086 389.112 22.2234 389.112 28.0825V45.3145H384.06V25.6131C384.06 21.7644 381.936 19.4098 377.802 19.4098C373.151 19.4098 369.879 22.2246 369.879 28.0837V45.3156H364.827V16.0786H369.707L369.705 16.0751Z",className:"fill-max"}),l.jsx("path",{d:"M412.837 24.5758C413.813 19.1194 418.693 15.3855 425.985 15.3855C433.276 15.3855 438.328 19.1194 438.328 26.2419V45.3121H433.448V41.0045H432.873C431.61 43.0722 428.797 45.9444 422.711 45.9444C416.626 45.9444 412.032 42.7854 412.032 37.5585C412.032 32.3317 416.452 29.5169 422.423 28.9432L433.332 27.9093V26.1283C433.332 21.3605 430.518 19.178 425.869 19.178C421.219 19.178 418.232 21.3605 417.716 25.4387H412.836V24.5769L412.837 24.5758ZM423.573 42.1519C428.912 42.1519 433.333 39.0502 433.333 32.4441V31.6397L423.114 32.6162C419.324 32.9605 417.085 34.3971 417.085 37.3267C417.085 40.2563 419.612 42.1519 423.573 42.1519Z",className:"fill-max"}),l.jsx("path",{d:"M456.8 2.49283C461.595 2.49283 466.06 3.61337 470.071 5.74672C474.452 8.0522 477.928 11.4606 480.394 15.8725C482.786 20.0889 483.999 24.9855 483.999 30.4255C483.999 35.8654 482.786 40.7632 480.394 44.9796C479.086 47.319 477.492 49.3739 475.629 51.1349C474.431 52.2672 473.125 53.2788 471.71 54.1617L468.776 50.4617L455.493 33.7133H455.001L445.815 45.3156H440.418V44.4539L451.985 30.3037L440.418 16.1536V15.2918H445.815L455.001 26.8941H455.493L464.679 15.2918H470.075V16.1536L458.509 30.3037L472.647 47.5052C474.071 46.1142 475.295 44.5054 476.312 42.6858L476.32 42.6718C478.31 39.1685 479.319 35.0481 479.319 30.4255C479.319 25.8028 478.31 21.6837 476.321 18.1792L476.313 18.1651C474.297 14.5541 471.46 11.7686 467.883 9.88697C464.547 8.11308 460.821 7.21618 456.8 7.21618H364.861V2.49283H456.8Z",className:"fill-max"}),l.jsx("path",{d:"M462.359 55.5562L460.611 53.3526C459.374 53.5399 458.103 53.6348 456.8 53.6348H364.861V58.3183H456.8C459.252 58.3183 461.616 58.0326 463.877 57.4706L462.358 55.5562H462.359Z",className:"fill-max"})]})]})}):l.jsx("div",{className:a,...s,children:l.jsx("svg",{viewBox:"0 0 962 202",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:l.jsx("path",{d:"M310.846 43.922H320.632V63.8822H307.966C298.037 63.8822 290.638 66.2483 285.737 70.9803C280.852 75.7123 278.401 83.4772 278.401 94.2751V159.698H258.4V44.3666H278.401V62.7707C278.401 63.8028 278.926 64.3269 279.961 64.3269C280.549 64.3269 280.995 64.1839 281.297 63.8822C281.6 63.5805 281.886 62.993 282.188 62.1038C286.039 49.9879 295.602 43.922 310.862 43.922H310.846ZM441.502 68.646C446.753 77.8877 449.395 89.0191 449.395 102.024C449.395 115.029 446.769 126.161 441.502 135.402C436.235 144.644 429.425 151.552 421.055 156.141C412.685 160.73 403.679 163.016 394.052 163.016C375.084 163.016 361.75 155.474 354.048 140.388C353.459 139.213 352.712 138.61 351.82 138.61C350.929 138.61 350.484 139.055 350.484 139.944V201.825H330.482V44.3666H350.484V64.1045C350.484 64.9938 350.929 65.4384 351.82 65.4384C352.712 65.4384 353.444 64.8509 354.048 63.6599C361.75 48.5746 375.084 41.032 394.052 41.032C403.679 41.032 412.685 43.3186 421.055 47.9077C429.425 52.4968 436.235 59.4043 441.502 68.646ZM429.393 102.024C429.393 88.4157 425.733 77.8083 418.397 70.2022C411.062 62.596 401.403 58.785 389.389 58.785C377.376 58.785 367.717 62.596 360.381 70.2022C353.046 77.8242 350.357 88.4316 350.357 102.024C350.357 115.617 353.046 126.24 360.381 133.846C367.717 141.468 377.392 145.263 389.389 145.263C401.387 145.263 411.062 141.452 418.397 133.846C425.733 126.24 429.393 115.617 429.393 102.024ZM111.004 68.8207C116.255 78.0624 118.897 89.1938 118.897 102.199C118.897 115.204 116.271 126.335 111.004 135.577C105.737 144.819 98.9266 151.726 90.5568 156.315C82.1869 160.904 73.1806 163.191 63.5536 163.191C44.5862 163.191 31.2517 155.648 23.5502 140.563C22.9614 139.388 22.2135 138.785 21.3225 138.785C20.4314 138.785 19.9858 139.229 19.9858 140.119V202H0V44.5413H20.0017V64.2792C20.0017 65.1685 20.4473 65.6131 21.3384 65.6131C22.2295 65.6131 22.9614 65.0256 23.5661 63.8346C31.2676 48.7493 44.6021 41.2067 63.5696 41.2067C73.1965 41.2067 82.2028 43.4933 90.5727 48.0824C98.9426 52.6715 105.753 59.579 111.02 68.8207H111.004ZM98.8948 102.199C98.8948 88.5904 95.235 77.983 87.8994 70.3769C80.5639 62.7707 70.9051 58.9597 58.8913 58.9597C46.8776 58.9597 37.2188 62.7707 29.8833 70.3769C22.5477 77.9989 19.8585 88.6062 19.8585 102.199C19.8585 115.792 22.5477 126.415 29.8833 134.021C37.2188 141.643 46.8776 145.438 58.8913 145.438C70.9051 145.438 80.5639 141.627 87.8994 134.021C95.235 126.415 98.8948 115.792 98.8948 102.199ZM221.578 123.08H242.694C239.878 133.878 234.133 143.231 225.477 151.139C216.805 159.047 204.393 163.001 188.242 163.001C176.085 163.001 165.392 160.523 156.131 155.569C146.87 150.615 139.726 143.564 134.682 134.386C129.637 125.224 127.123 114.426 127.123 102.008C127.123 89.5908 129.574 78.7929 134.459 69.6305C139.344 60.4682 146.202 53.4019 155.017 48.4476C163.833 43.4933 174.16 41.0161 186.015 41.0161C197.869 41.0161 207.687 43.4615 215.914 48.3365C224.14 53.2114 230.283 59.6901 234.356 67.7409C238.43 75.8076 240.466 84.6364 240.466 94.2434V107.55H148.239C148.971 119.079 152.869 128.257 159.902 135.053C166.936 141.849 176.388 145.263 188.242 145.263C197.869 145.263 205.252 143.31 210.36 139.388C215.468 135.466 219.208 130.035 221.578 123.08ZM148.462 90.9246H218.253C218.253 80.873 215.659 72.9969 210.472 67.2963C205.284 61.6115 197.137 58.7532 186.03 58.7532C175.656 58.7532 167.174 61.5321 160.587 67.074C153.999 72.6158 149.957 80.5713 148.477 90.9087L148.462 90.9246ZM465.227 159.682H485.229V0H465.227V159.698V159.682ZM742.753 31.7744H766.113V6.8122H742.753V31.7744ZM825.163 142.5C821.535 142.866 819.339 143.056 818.607 143.056C817.573 143.056 816.745 142.755 816.157 142.167C815.568 141.579 815.266 140.77 815.266 139.722C815.266 138.991 815.457 136.8 815.823 133.179C816.189 129.559 816.379 123.969 816.379 116.443V61.2622H844.91L839.293 44.3666H816.395V13.3068H796.394V44.3508H774.642V61.2463H796.394V121.969C796.394 134.688 799.512 144.152 805.734 150.361C811.956 156.569 821.44 159.682 834.185 159.682H849.748V141.945H841.966C834.408 141.945 828.807 142.135 825.179 142.5H825.163ZM942.198 44.3508L909.084 141.119C908.639 142.31 907.939 143.866 905.663 143.866C903.388 143.866 902.688 142.31 902.242 141.119L869.129 44.3508H848.729L887.078 159.682H900.635C901.526 159.682 902.194 159.761 902.64 159.904C903.086 160.047 903.451 160.412 903.754 161.016C904.343 161.905 904.263 163.239 903.531 165.001L897.309 181.849C896.418 184.072 894.716 185.184 892.201 185.184C891.31 185.184 889.242 184.993 885.98 184.628C882.718 184.263 878.501 184.072 873.314 184.072H857.083V201.809H878.421C890.865 201.809 898.359 199.698 904.804 195.49C911.248 191.281 916.245 183.85 919.809 173.195L961.229 48.7652V44.3349H942.198V44.3508ZM677.418 87.3835L646.086 44.3508H624.08V48.7811L661.633 98.6896L615.853 155.251V159.682H638.305L674.76 113.33L708.765 159.682H730.326V155.251L690.545 102.024L733.667 49.0193V44.3666H711.215L677.433 87.3994L677.418 87.3835ZM744.886 159.682H764.887V44.3666H744.886V159.698V159.682ZM616.76 123.08C613.943 133.878 608.199 143.231 599.543 151.139C590.871 159.047 578.459 163.001 562.308 163.001C550.151 163.001 539.458 160.523 530.197 155.569C520.936 150.615 513.792 143.564 508.747 134.386C503.703 125.224 501.189 114.426 501.189 102.008C501.189 89.5908 503.64 78.7929 508.525 69.6305C513.41 60.4682 520.268 53.4019 529.083 48.4476C537.899 43.4933 548.226 41.0161 560.08 41.0161C571.935 41.0161 581.753 43.4615 589.98 48.3365C598.206 53.2114 604.348 59.6901 608.422 67.7409C612.495 75.8076 614.532 84.6364 614.532 94.2434V107.55H522.305C523.037 119.079 526.935 128.257 533.968 135.053C541.002 141.849 550.453 145.263 562.308 145.263C571.935 145.263 579.318 143.31 584.426 139.388C589.534 135.466 593.273 130.035 595.644 123.08H616.76ZM522.527 90.9246H592.319C592.319 80.873 589.725 72.9969 584.538 67.2963C579.35 61.6115 571.203 58.7532 560.096 58.7532C549.721 58.7532 541.24 61.5321 534.653 67.074C528.065 72.6158 524.023 80.5713 522.543 90.9087L522.527 90.9246Z",className:t})})})});jA.displayName="Word";const C7e={tiny:"w-4 md:w-6",small:"",md:"w-10","md-large":"w-20",large:"w-24",xl:"w-36"},E7e="w-6 md:w-8",Wa=A.memo(({size:e="large",includeEffects:t=!1,isPro:n=!1,variant:r="full",color:s="foreground",...a})=>{let o="w-28 md:w-[140px]";e==="tiny"?o="w-14 md:w-16":e==="small"?o="w-24":e==="large"?o="w-40 md:w-52":e==="xl"&&(o="w-64");const i=C7e?.[e]||E7e;let c="w-6";e==="large"?c="w-12":e==="md-large"?c="w-8":e==="xl"&&(c="w-36");const u=B("",{"stroke-foreground":s==="foreground","stroke-quiet":s==="quiet","stroke-super":s==="super"||s==="mixed","stroke-caution":s==="caution","stroke-light":s==="white","stroke-inverse":s==="background","group-hover:stroke-super transition-colors duration-300":t}),d=B(" block",{"fill-foreground":s==="foreground"||s==="mixed","fill-quiet":s==="quiet","fill-super":s==="super","fill-caution":s==="caution","fill-light":s==="white","fill-inverse":s==="background","group-hover:fill-super transition-colors duration-300":t});return r==="pro"?l.jsx(tC,{width:c,fillColor:d,...a}):r==="mark"?l.jsx("div",{className:B({"transition-all duration-300 ease-in-out hover:scale-105":t}),children:l.jsx(Lle,{lineColor:u,width:i,...a})}):r==="text"?l.jsx(jA,{fillColor:d,width:o,isPro:n,...a}):r==="max-text"?l.jsx(jA,{fillColor:d,width:o,isMax:!0,...a}):r==="full"?l.jsx(jle,{fillColor:d,lineColor:u,width:o,...a}):r==="labs"?l.jsx(Ole,{width:o,fillColor:d,...a}):null}),nC=A.memo(({onClick:e,testId:t="close-button",size:n="small",variant:r="common",className:s="right-sm top-sm absolute",ariaLabel:a="Close"})=>l.jsx("div",{className:s,children:l.jsx(ke,{testId:t,variant:r,pill:!0,size:n,onClick:e,icon:Xt,ariaLabel:a})}));nC.displayName="CloseButton";var Q4="focusScope.autoFocusOnMount",X4="focusScope.autoFocusOnUnmount",WH={bubbles:!1,cancelable:!0},M7e="FocusScope",eL=f.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...o}=e,[i,c]=f.useState(null),u=ha(s),d=ha(a),m=f.useRef(null),h=kn(t,y=>c(y)),p=f.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;f.useEffect(()=>{if(r){let y=function(_){if(p.paused||!i)return;const w=_.target;i.contains(w)?m.current=w:Lc(m.current,{select:!0})},v=function(_){if(p.paused||!i)return;const w=_.relatedTarget;w!==null&&(i.contains(w)||Lc(m.current,{select:!0}))},x=function(_){if(document.activeElement===document.body)for(const S of _)S.removedNodes.length>0&&Lc(i)};document.addEventListener("focusin",y),document.addEventListener("focusout",v);const b=new MutationObserver(x);return i&&b.observe(i,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",v),b.disconnect()}}},[r,i,p.paused]),f.useEffect(()=>{if(i){zH.add(p);const y=document.activeElement;if(!i.contains(y)){const x=new CustomEvent(Q4,WH);i.addEventListener(Q4,u),i.dispatchEvent(x),x.defaultPrevented||(T7e(R7e(Dle(i)),{select:!0}),document.activeElement===y&&Lc(i))}return()=>{i.removeEventListener(Q4,u),setTimeout(()=>{const x=new CustomEvent(X4,WH);i.addEventListener(X4,d),i.dispatchEvent(x),x.defaultPrevented||Lc(y??document.body,{select:!0}),i.removeEventListener(X4,d),zH.remove(p)},0)}}},[i,u,d,p]);const g=f.useCallback(y=>{if(!n&&!r||p.paused)return;const v=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,x=document.activeElement;if(v&&x){const b=y.currentTarget,[_,w]=k7e(b);_&&w?!y.shiftKey&&x===w?(y.preventDefault(),n&&Lc(_,{select:!0})):y.shiftKey&&x===_&&(y.preventDefault(),n&&Lc(w,{select:!0})):x===b&&y.preventDefault()}},[n,r,p.paused]);return l.jsx(on.div,{tabIndex:-1,...o,ref:h,onKeyDown:g})});eL.displayName=M7e;function T7e(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Lc(r,{select:t}),document.activeElement!==n)return}function k7e(e){const t=Dle(e),n=HH(t,e),r=HH(t.reverse(),e);return[n,r]}function Dle(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function HH(e,t){for(const n of e)if(!N7e(n,{upTo:t}))return n}function N7e(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function A7e(e){return e instanceof HTMLInputElement&&"select"in e}function Lc(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&A7e(e)&&t&&e.select()}}var zH=P7e();function P7e(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=GH(e,t),e.unshift(t)},remove(t){e=GH(e,t),e[0]?.resume()}}}function GH(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function R7e(e){return e.filter(t=>t.tagName!=="A")}var Z4=0;function Fle(){f.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??qH()),document.body.insertAdjacentElement("beforeend",e[1]??qH()),Z4++,()=>{Z4===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Z4--}},[])}function qH(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Ny="right-scroll-bar-position",Ay="width-before-scroll-bar",I7e="with-scroll-bars-hidden",j7e="--removed-body-scroll-bar-size";function J4(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function O7e(e,t){var n=f.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var L7e=typeof window<"u"?f.useLayoutEffect:f.useEffect,KH=new WeakMap;function Ule(e,t){var n=O7e(null,function(r){return e.forEach(function(s){return J4(s,r)})});return L7e(function(){var r=KH.get(n);if(r){var s=new Set(r),a=new Set(e),o=n.current;s.forEach(function(i){a.has(i)||J4(i,null)}),a.forEach(function(i){s.has(i)||J4(i,o)})}KH.set(n,e)},[e]),n}function D7e(e){return e}function F7e(e,t){t===void 0&&(t=D7e);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(a){var o=t(a,r);return n.push(o),function(){n=n.filter(function(i){return i!==o})}},assignSyncMedium:function(a){for(r=!0;n.length;){var o=n;n=[],o.forEach(a)}n={push:function(i){return a(i)},filter:function(){return n}}},assignMedium:function(a){r=!0;var o=[];if(n.length){var i=n;n=[],i.forEach(a),o=n}var c=function(){var d=o;o=[],d.forEach(a)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),n}}}};return s}function Ble(e){e===void 0&&(e={});var t=F7e(null);return t.options=zn({async:!0,ssr:!1},e),t}var Vle=function(e){var t=e.sideCar,n=Qj(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return f.createElement(r,zn({},n))};Vle.isSideCarExport=!0;function $le(e,t){return e.useMedium(t),Vle}var Wle=Ble(),eT=function(){},rC=f.forwardRef(function(e,t){var n=f.useRef(null),r=f.useState({onScrollCapture:eT,onWheelCapture:eT,onTouchMoveCapture:eT}),s=r[0],a=r[1],o=e.forwardProps,i=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,m=e.shards,h=e.sideCar,p=e.noIsolation,g=e.inert,y=e.allowPinchZoom,v=e.as,x=v===void 0?"div":v,b=e.gapMode,_=Qj(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=h,S=Ule([n,t]),C=zn(zn({},_),s);return f.createElement(f.Fragment,null,d&&f.createElement(w,{sideCar:Wle,removeScrollBar:u,shards:m,noIsolation:p,inert:g,setCallbacks:a,allowPinchZoom:!!y,lockRef:n,gapMode:b}),o?f.cloneElement(f.Children.only(i),zn(zn({},C),{ref:S})):f.createElement(x,zn({},C,{className:c,ref:S}),i))});rC.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};rC.classNames={fullWidth:Ay,zeroRight:Ny};var U7e=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function B7e(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=U7e();return t&&e.setAttribute("nonce",t),e}function V7e(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function $7e(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var W7e=function(){var e=0,t=null;return{add:function(n){e==0&&(t=B7e())&&(V7e(t,n),$7e(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},H7e=function(){var e=W7e();return function(t,n){f.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},tL=function(){var e=H7e(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},z7e={left:0,top:0,right:0,gap:0},tT=function(e){return parseInt(e||"",10)||0},G7e=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[tT(n),tT(r),tT(s)]},q7e=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return z7e;var t=G7e(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},K7e=tL(),Rm="data-scroll-locked",Y7e=function(e,t,n,r){var s=e.left,a=e.top,o=e.right,i=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(I7e,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(i,"px ").concat(r,`;
  }
  body[`).concat(Rm,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(i,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(i,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ny,` {
    right: `).concat(i,"px ").concat(r,`;
  }
  
  .`).concat(Ay,` {
    margin-right: `).concat(i,"px ").concat(r,`;
  }
  
  .`).concat(Ny," .").concat(Ny,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Ay," .").concat(Ay,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Rm,`] {
    `).concat(j7e,": ").concat(i,`px;
  }
`)},YH=function(){var e=parseInt(document.body.getAttribute(Rm)||"0",10);return isFinite(e)?e:0},Q7e=function(){f.useEffect(function(){return document.body.setAttribute(Rm,(YH()+1).toString()),function(){var e=YH()-1;e<=0?document.body.removeAttribute(Rm):document.body.setAttribute(Rm,e.toString())}},[])},Hle=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;Q7e();var a=f.useMemo(function(){return q7e(s)},[s]);return f.createElement(K7e,{styles:Y7e(a,!t,s,n?"":"!important")})},OA=!1;if(typeof window<"u")try{var Ix=Object.defineProperty({},"passive",{get:function(){return OA=!0,!0}});window.addEventListener("test",Ix,Ix),window.removeEventListener("test",Ix,Ix)}catch{OA=!1}var Of=OA?{passive:!1}:!1,X7e=function(e){return e.tagName==="TEXTAREA"},zle=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!X7e(e)&&n[t]==="visible")},Z7e=function(e){return zle(e,"overflowY")},J7e=function(e){return zle(e,"overflowX")},QH=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=Gle(e,r);if(s){var a=qle(e,r),o=a[1],i=a[2];if(o>i)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},eDe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},tDe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Gle=function(e,t){return e==="v"?Z7e(t):J7e(t)},qle=function(e,t){return e==="v"?eDe(t):tDe(t)},nDe=function(e,t){return e==="h"&&t==="rtl"?-1:1},rDe=function(e,t,n,r,s){var a=nDe(e,window.getComputedStyle(t).direction),o=a*r,i=n.target,c=t.contains(i),u=!1,d=o>0,m=0,h=0;do{var p=qle(e,i),g=p[0],y=p[1],v=p[2],x=y-v-a*g;(g||x)&&Gle(e,i)&&(m+=x,h+=g),i instanceof ShadowRoot?i=i.host:i=i.parentNode}while(!c&&i!==document.body||c&&(t.contains(i)||t===i));return(d&&Math.abs(m)<1||!d&&Math.abs(h)<1)&&(u=!0),u},jx=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},XH=function(e){return[e.deltaX,e.deltaY]},ZH=function(e){return e&&"current"in e?e.current:e},sDe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},aDe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},oDe=0,Lf=[];function iDe(e){var t=f.useRef([]),n=f.useRef([0,0]),r=f.useRef(),s=f.useState(oDe++)[0],a=f.useState(tL)[0],o=f.useRef(e);f.useEffect(function(){o.current=e},[e]),f.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var y=Ge([e.lockRef.current],(e.shards||[]).map(ZH),!0).filter(Boolean);return y.forEach(function(v){return v.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),y.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var i=f.useCallback(function(y,v){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var x=jx(y),b=n.current,_="deltaX"in y?y.deltaX:b[0]-x[0],w="deltaY"in y?y.deltaY:b[1]-x[1],S,C=y.target,E=Math.abs(_)>Math.abs(w)?"h":"v";if("touches"in y&&E==="h"&&C.type==="range")return!1;var M=QH(E,C);if(!M)return!0;if(M?S=E:(S=E==="v"?"h":"v",M=QH(E,C)),!M)return!1;if(!r.current&&"changedTouches"in y&&(_||w)&&(r.current=S),!S)return!0;var T=r.current||S;return rDe(T,v,y,T==="h"?_:w)},[]),c=f.useCallback(function(y){var v=y;if(!(!Lf.length||Lf[Lf.length-1]!==a)){var x="deltaY"in v?XH(v):jx(v),b=t.current.filter(function(S){return S.name===v.type&&(S.target===v.target||v.target===S.shadowParent)&&sDe(S.delta,x)})[0];if(b&&b.should){v.cancelable&&v.preventDefault();return}if(!b){var _=(o.current.shards||[]).map(ZH).filter(Boolean).filter(function(S){return S.contains(v.target)}),w=_.length>0?i(v,_[0]):!o.current.noIsolation;w&&v.cancelable&&v.preventDefault()}}},[]),u=f.useCallback(function(y,v,x,b){var _={name:y,delta:v,target:x,should:b,shadowParent:lDe(x)};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(w){return w!==_})},1)},[]),d=f.useCallback(function(y){n.current=jx(y),r.current=void 0},[]),m=f.useCallback(function(y){u(y.type,XH(y),y.target,i(y,e.lockRef.current))},[]),h=f.useCallback(function(y){u(y.type,jx(y),y.target,i(y,e.lockRef.current))},[]);f.useEffect(function(){return Lf.push(a),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:h}),document.addEventListener("wheel",c,Of),document.addEventListener("touchmove",c,Of),document.addEventListener("touchstart",d,Of),function(){Lf=Lf.filter(function(y){return y!==a}),document.removeEventListener("wheel",c,Of),document.removeEventListener("touchmove",c,Of),document.removeEventListener("touchstart",d,Of)}},[]);var p=e.removeScrollBar,g=e.inert;return f.createElement(f.Fragment,null,g?f.createElement(a,{styles:aDe(s)}):null,p?f.createElement(Hle,{gapMode:e.gapMode}):null)}function lDe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const cDe=$le(Wle,iDe);var nL=f.forwardRef(function(e,t){return f.createElement(rC,zn({},e,{ref:t,sideCar:cDe}))});nL.classNames=rC.classNames;var uDe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Df=new WeakMap,Ox=new WeakMap,Lx={},nT=0,Kle=function(e){return e&&(e.host||Kle(e.parentNode))},dDe=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=Kle(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},fDe=function(e,t,n,r){var s=dDe(t,Array.isArray(e)?e:[e]);Lx[n]||(Lx[n]=new WeakMap);var a=Lx[n],o=[],i=new Set,c=new Set(s),u=function(m){!m||i.has(m)||(i.add(m),u(m.parentNode))};s.forEach(u);var d=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(h){if(i.has(h))d(h);else try{var p=h.getAttribute(r),g=p!==null&&p!=="false",y=(Df.get(h)||0)+1,v=(a.get(h)||0)+1;Df.set(h,y),a.set(h,v),o.push(h),y===1&&g&&Ox.set(h,!0),v===1&&h.setAttribute(n,"true"),g||h.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",h,x)}})};return d(t),i.clear(),nT++,function(){o.forEach(function(m){var h=Df.get(m)-1,p=a.get(m)-1;Df.set(m,h),a.set(m,p),h||(Ox.has(m)||m.removeAttribute(r),Ox.delete(m)),p||m.removeAttribute(n)}),nT--,nT||(Df=new WeakMap,Df=new WeakMap,Ox=new WeakMap,Lx={})}},Yle=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=uDe(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),fDe(r,s,n,"aria-hidden")):function(){return null}},sC="Dialog",[Qle,GFt]=Ga(sC),[mDe,li]=Qle(sC),rL=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:o=!0}=e,i=f.useRef(null),c=f.useRef(null),[u,d]=ti({prop:r,defaultProp:s??!1,onChange:a,caller:sC});return l.jsx(mDe,{scope:t,triggerRef:i,contentRef:c,contentId:Mm(),titleId:Mm(),descriptionId:Mm(),open:u,onOpenChange:d,onOpenToggle:f.useCallback(()=>d(m=>!m),[d]),modal:o,children:n})};rL.displayName=sC;var Xle="DialogTrigger",Zle=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=li(Xle,n),a=kn(t,s.triggerRef);return l.jsx(on.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":uL(s.open),...r,ref:a,onClick:jt(e.onClick,s.onOpenToggle)})});Zle.displayName=Xle;var sL="DialogPortal",[hDe,Jle]=Qle(sL,{forceMount:void 0}),aL=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:s}=e,a=li(sL,t);return l.jsx(hDe,{scope:t,forceMount:n,children:f.Children.map(r,o=>l.jsx(Rs,{present:n||a.open,children:l.jsx(B0,{asChild:!0,container:s,children:o})}))})};aL.displayName=sL;var u2="DialogOverlay",oL=f.forwardRef((e,t)=>{const n=Jle(u2,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,a=li(u2,e.__scopeDialog);return a.modal?l.jsx(Rs,{present:r||a.open,children:l.jsx(gDe,{...s,ref:t})}):null});oL.displayName=u2;var pDe=gv("DialogOverlay.RemoveScroll"),gDe=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=li(u2,n);return l.jsx(nL,{as:pDe,allowPinchZoom:!0,shards:[s.contentRef],children:l.jsx(on.div,{"data-state":uL(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Wd="DialogContent",iL=f.forwardRef((e,t)=>{const n=Jle(Wd,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,a=li(Wd,e.__scopeDialog);return l.jsx(Rs,{present:r||a.open,children:a.modal?l.jsx(yDe,{...s,ref:t}):l.jsx(vDe,{...s,ref:t})})});iL.displayName=Wd;var yDe=f.forwardRef((e,t)=>{const n=li(Wd,e.__scopeDialog),r=f.useRef(null),s=kn(t,n.contentRef,r);return f.useEffect(()=>{const a=r.current;if(a)return Yle(a)},[]),l.jsx(ece,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:jt(e.onCloseAutoFocus,a=>{a.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:jt(e.onPointerDownOutside,a=>{const o=a.detail.originalEvent,i=o.button===0&&o.ctrlKey===!0;(o.button===2||i)&&a.preventDefault()}),onFocusOutside:jt(e.onFocusOutside,a=>a.preventDefault())})}),vDe=f.forwardRef((e,t)=>{const n=li(Wd,e.__scopeDialog),r=f.useRef(!1),s=f.useRef(!1);return l.jsx(ece,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{e.onCloseAutoFocus?.(a),a.defaultPrevented||(r.current||n.triggerRef.current?.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{e.onInteractOutside?.(a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=a.target;n.triggerRef.current?.contains(o)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),ece=f.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,...o}=e,i=li(Wd,n),c=f.useRef(null),u=kn(t,c);return Fle(),l.jsxs(l.Fragment,{children:[l.jsx(eL,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:l.jsx(F0,{role:"dialog",id:i.contentId,"aria-describedby":i.descriptionId,"aria-labelledby":i.titleId,"data-state":uL(i.open),...o,ref:u,onDismiss:()=>i.onOpenChange(!1)})}),l.jsxs(l.Fragment,{children:[l.jsx(xDe,{titleId:i.titleId}),l.jsx(_De,{contentRef:c,descriptionId:i.descriptionId})]})]})}),lL="DialogTitle",cL=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=li(lL,n);return l.jsx(on.h2,{id:s.titleId,...r,ref:t})});cL.displayName=lL;var tce="DialogDescription",nce=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=li(tce,n);return l.jsx(on.p,{id:s.descriptionId,...r,ref:t})});nce.displayName=tce;var rce="DialogClose",sce=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=li(rce,n);return l.jsx(on.button,{type:"button",...r,ref:t,onClick:jt(e.onClick,()=>s.onOpenChange(!1))})});sce.displayName=rce;function uL(e){return e?"open":"closed"}var ace="DialogTitleWarning",[qFt,oce]=pRe(ace,{contentName:Wd,titleName:lL,docsSlug:"dialog"}),xDe=({titleId:e})=>{const t=oce(ace),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return f.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},bDe="DialogDescriptionWarning",_De=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${oce(bDe).contentName}}.`;return f.useEffect(()=>{const s=e.current?.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},dL=rL,wDe=Zle,fL=aL,ice=oL,aC=iL,oC=cL,mL=nce,SDe=sce;const hL=A.memo(e=>{const{children:t,trigger:n,...r}=e;return l.jsxs(dL,{...r,children:[n&&l.jsx(wDe,{asChild:!0,children:n}),l.jsx(st,{children:r.open&&l.jsx(fL,{forceMount:!0,children:t})})]})});hL.displayName="ControlledDialog";function CDe(e){const[t,n]=f.useState(!1),[r,s]=f.useState(!1),a=f.useMemo(()=>e?.isEnabled??!0,[e?.isEnabled]),o=f.useMemo(()=>a&&!t&&!r,[a,t,r]);return f.useMemo(()=>({canShow:o,handleConfirm(){n(!1),s(!0),e?.onConfirm()},handleCancel(){n(!1),s(!1)},isShowing:t,show(){n(!0)}}),[o,t,e])}const lce=cl("ConfirmCloseModalContext",{canShow:!1,handleCancel(){},handleConfirm(){},isShowing:!1,show(){}}),cce=A.memo(function(t){const{children:n,trigger:r,value:s}=t;return l.jsx(lce.Provider,{value:s,children:l.jsx(hL,{onOpenChange:s.handleCancel,open:s.isShowing,trigger:r,children:n})})});cce.displayName="ConfirmCloseModalDialog";function EDe(){const e=f.useContext(lce);if(!e)throw new Error("useConfirmCloseModalContext() used outside of provider.");return e}var uce=Ble(),rT=function(){},iC=f.forwardRef(function(e,t){var n=f.useRef(null),r=f.useState({onScrollCapture:rT,onWheelCapture:rT,onTouchMoveCapture:rT}),s=r[0],a=r[1],o=e.forwardProps,i=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,m=e.shards,h=e.sideCar,p=e.noIsolation,g=e.inert,y=e.allowPinchZoom,v=e.as,x=v===void 0?"div":v,b=e.gapMode,_=Qj(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=h,S=Ule([n,t]),C=zn(zn({},_),s);return f.createElement(f.Fragment,null,d&&f.createElement(w,{sideCar:uce,removeScrollBar:u,shards:m,noIsolation:p,inert:g,setCallbacks:a,allowPinchZoom:!!y,lockRef:n,gapMode:b}),o?f.cloneElement(f.Children.only(i),zn(zn({},C),{ref:S})):f.createElement(x,zn({},C,{className:c,ref:S}),i))});iC.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};iC.classNames={fullWidth:Ay,zeroRight:Ny};var LA=!1;if(typeof window<"u")try{var Dx=Object.defineProperty({},"passive",{get:function(){return LA=!0,!0}});window.addEventListener("test",Dx,Dx),window.removeEventListener("test",Dx,Dx)}catch{LA=!1}var Ff=LA?{passive:!1}:!1,MDe=function(e){return e.tagName==="TEXTAREA"},dce=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!MDe(e)&&n[t]==="visible")},TDe=function(e){return dce(e,"overflowY")},kDe=function(e){return dce(e,"overflowX")},JH=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=fce(e,r);if(s){var a=mce(e,r),o=a[1],i=a[2];if(o>i)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},NDe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},ADe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},fce=function(e,t){return e==="v"?TDe(t):kDe(t)},mce=function(e,t){return e==="v"?NDe(t):ADe(t)},PDe=function(e,t){return e==="h"&&t==="rtl"?-1:1},RDe=function(e,t,n,r,s){var a=PDe(e,window.getComputedStyle(t).direction),o=a*r,i=n.target,c=t.contains(i),u=!1,d=o>0,m=0,h=0;do{var p=mce(e,i),g=p[0],y=p[1],v=p[2],x=y-v-a*g;(g||x)&&fce(e,i)&&(m+=x,h+=g),i instanceof ShadowRoot?i=i.host:i=i.parentNode}while(!c&&i!==document.body||c&&(t.contains(i)||t===i));return(d&&Math.abs(m)<1||!d&&Math.abs(h)<1)&&(u=!0),u},Fx=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},ez=function(e){return[e.deltaX,e.deltaY]},tz=function(e){return e&&"current"in e?e.current:e},IDe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},jDe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},ODe=0,Uf=[];function LDe(e){var t=f.useRef([]),n=f.useRef([0,0]),r=f.useRef(),s=f.useState(ODe++)[0],a=f.useState(tL)[0],o=f.useRef(e);f.useEffect(function(){o.current=e},[e]),f.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var y=Ge([e.lockRef.current],(e.shards||[]).map(tz),!0).filter(Boolean);return y.forEach(function(v){return v.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),y.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var i=f.useCallback(function(y,v){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var x=Fx(y),b=n.current,_="deltaX"in y?y.deltaX:b[0]-x[0],w="deltaY"in y?y.deltaY:b[1]-x[1],S,C=y.target,E=Math.abs(_)>Math.abs(w)?"h":"v";if("touches"in y&&E==="h"&&C.type==="range")return!1;var M=JH(E,C);if(!M)return!0;if(M?S=E:(S=E==="v"?"h":"v",M=JH(E,C)),!M)return!1;if(!r.current&&"changedTouches"in y&&(_||w)&&(r.current=S),!S)return!0;var T=r.current||S;return RDe(T,v,y,T==="h"?_:w)},[]),c=f.useCallback(function(y){var v=y;if(!(!Uf.length||Uf[Uf.length-1]!==a)){var x="deltaY"in v?ez(v):Fx(v),b=t.current.filter(function(S){return S.name===v.type&&(S.target===v.target||v.target===S.shadowParent)&&IDe(S.delta,x)})[0];if(b&&b.should){v.cancelable&&v.preventDefault();return}if(!b){var _=(o.current.shards||[]).map(tz).filter(Boolean).filter(function(S){return S.contains(v.target)}),w=_.length>0?i(v,_[0]):!o.current.noIsolation;w&&v.cancelable&&v.preventDefault()}}},[]),u=f.useCallback(function(y,v,x,b){var _={name:y,delta:v,target:x,should:b,shadowParent:DDe(x)};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(w){return w!==_})},1)},[]),d=f.useCallback(function(y){n.current=Fx(y),r.current=void 0},[]),m=f.useCallback(function(y){u(y.type,ez(y),y.target,i(y,e.lockRef.current))},[]),h=f.useCallback(function(y){u(y.type,Fx(y),y.target,i(y,e.lockRef.current))},[]);f.useEffect(function(){return Uf.push(a),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:h}),document.addEventListener("wheel",c,Ff),document.addEventListener("touchmove",c,Ff),document.addEventListener("touchstart",d,Ff),function(){Uf=Uf.filter(function(y){return y!==a}),document.removeEventListener("wheel",c,Ff),document.removeEventListener("touchmove",c,Ff),document.removeEventListener("touchstart",d,Ff)}},[]);var p=e.removeScrollBar,g=e.inert;return f.createElement(f.Fragment,null,g?f.createElement(a,{styles:jDe(s)}):null,p?f.createElement(Hle,{gapMode:e.gapMode}):null)}function DDe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const FDe=$le(uce,LDe);var pL=f.forwardRef(function(e,t){return f.createElement(iC,zn({},e,{ref:t,sideCar:FDe}))});pL.classNames=iC.classNames;const hp=A.memo(({children:e,portalTarget:t})=>{const[n,r]=f.useState(!1);return f.useEffect(()=>(r(!0),()=>r(!1)),[]),n?Ss.createPortal(e,t||document.body):null}),UDe=250,pp=A.memo(({animationClassName:e,children:t,isOpen:n=!1,transparent:r=!1,canOutsideClickClose:s=!0,onBeforeClose:a,onClose:o,onIsClosing:i,childVariant:c="default",center:u=!0,shouldClose:d=!1,disableAnimation:m=!1,testId:h,removeScroll:p=!0,shards:g=[],delayClose:y=!0,variant:v="default",portalTarget:x,includeBlur:b=!0})=>{const _=f.useRef(null),w=f.useRef(null),S=f.useRef(null),[C,E]=f.useState(!1),M=f.useRef(!1),T=f.useCallback(O=>{C||a?.()===!1||(y?(E(!0),i?.(),setTimeout(()=>{o?.(O),E(!1)},UDe)):(E(!0),o?.(O),E(!1)))},[C,a,y,i,o]);f.useEffect(()=>{d&&!C&&T("closed")},[d,C,T]);const I=f.useCallback(O=>{r&&!s?O.stopPropagation():O.target===_.current&&T("backdrop")},[r,s,T]),j=f.useCallback(O=>{const L=O.target;if(L instanceof Element){if(w.current===L||w.current?.contains(L))return;const F=L.closest('[data-type="portal"]');if(F&&F!==S.current&&!r)return}E(!1),T("clickaway")},[T,r]);f.useEffect(()=>{if(n&&r&&s)return document.addEventListener("click",j),()=>{document.removeEventListener("click",j)}},[n,r,j,s]);const N=f.useCallback(O=>{O.key==="Escape"&&T("escape")},[T]);f.useEffect(()=>(n&&document.addEventListener("keydown",N),()=>{document.removeEventListener("keydown",N)}),[n,N]);const P=f.useMemo(()=>B("duration-250 fill-mode-both",{"animate-in fade-in zoom-in-[0.98] ease-in":["default","large","small","hide-chrome","full-sheet"].includes(c),"zoom-out-[0.98] fade-out animate-out ease-out":["default","hide-chrome","full-sheet","large","small"].includes(c)&&C,"fixed bottom-0 left-0":c==="bottom-left-sheet","fixed top-0 right-0 left-0":c==="side-sheet","fixed bottom-0 left-0 right-0":c==="bottom-sheet"},e),[e,c,C]),R=B("items-stretch md:items-center",{"fill-mode-both fixed inset-0":!r,"bg-backdrop/70":v==="default"||v==="default-less-blur","bg-lightbox/95":v==="lightbox","animate-in fade-in ease-outExpo duration-200":!C&&!m,"animate-out fade-out ease-inExpo duration-200":C&&!m},{"backdrop-blur-md":b&&v==="lightbox","backdrop-blur-sm":b&&v==="default","backdrop-blur-[0.5px]":b&&v==="default-less-blur"}),k=f.useMemo(()=>n?l.jsxs(pL,{removeScrollBar:!1,enabled:p,allowPinchZoom:!0,shards:g,children:[l.jsx("div",{className:R}),l.jsx("div",{ref:_,onPointerDown:O=>{M.current=O.target===_.current},onPointerUp:O=>{M.current&&I(O),M.current=!1},className:B({"fixed inset-0 overflow-y-auto":!r,"flex items-center justify-center":u}),"data-test-id":h,children:l.jsx("div",{ref:w,className:P,children:t})})]}):null,[n,t,r,u,h,I,P,w,_,p,g,R]);return l.jsx(hp,{portalTarget:x,children:l.jsx("div",{ref:S,"data-type":"portal",children:k})})});pp.displayName="Overlay";const hce=cl("ModalInternalContext",{canOutsideClickClose:!0}),rn=A.memo(({title:e,subtitle:t,subtitleClassname:n,centerTitle:r,children:s,actionList:a=ce,variant:o="default",onClose:i,noPadding:c=!1,onIsClosing:u,titleContent:d,footerContent:m,icon:h,overlayVariant:p,titleLeadingButtonProps:g,confirmOnClose:y,titleTextVariant:v="page-title",headerClassname:x,closeButtonClassname:b="right-0 top-sm absolute",footerClassname:_,renderCloseButton:w=!0,fixedTitle:S,modalClassname:C,modalContentClassname:E,modalElementProps:M,includeBlur:T=!0,isOpen:I,ref:j,wrapperClassname:N,...P})=>{const R=f.useRef(null),k=f.useRef(null),O=f.useRef(null),L=f.useRef(null),[F,U]=f.useState(!1),[V,W]=f.useState(!1),[H,G]=f.useState(!1);f.useEffect(()=>{I&&!H?G(!0):!I&&H&&!F&&U(!0)},[I,H,F]);const K=f.useMemo(()=>!!y,[y]),$=CDe({isEnabled:K,onConfirm(){W(!0),U(!0)}}),q=f.useMemo(()=>B(C,"bg-base shadow-md overflow-y-auto scrollbar-subtle fill-mode-both",{"md:rounded-xl md:min-w-[600px] max-w-screen-sm shadow-md dark:border dark:border-subtlest relative h-full max-h-[100vh] md:max-h-[95vh] overflow-auto md:w-full":o==="default","min-h-0 max-h-[70vh] rounded-t-xl bottom-0 left-0 right-0 flex flex-col":o==="bottom-left-sheet","w-screen md:h-screen h-[100dvh] flex flex-col":o==="full-sheet","w-screen min-h-[60dvh] md:min-h-[60vh] shadow-overlay max-h-[96dvh] md:max-h-[96vh] flex flex-col fixed bottom-0 left-0 right-0":o==="bottom-sheet","h-screen w-[40vw] min-w-[500px] shadow-overlay top-0 right-0 fixed flex flex-col":o==="side-sheet","animate-in slide-in-from-right ease-outExpo":o==="side-sheet"&&!V,"animate-out slide-out-to-right ease-inExpo":o==="side-sheet"&&V,"animate-in slide-in-from-bottom ease-in":["bottom-left-sheet","bottom-sheet"].includes(o)&&!V,"animate-out slide-out-to-bottom ease-out":["bottom-left-sheet","bottom-sheet"].includes(o)&&V,"max-h-[100vh] w-[90vw] rounded-l-xl flex flex-col":o==="wide","h-[95vh] w-[95vw] rounded-xl flex flex-col":o==="full","md:rounded-lg md:min-w-[600px] max-w-screen-lg shadow-md relative overflow-auto max-h-[100vh]":o==="large","md:rounded-lg md:min-w-[500px] max-w-screen-lg shadow-md relative overflow-auto max-h-[100vh]":o==="medium","md:rounded-lg md:max-w-[440px] shadow-md relative overflow-auto max-h-[100vh]":o==="small","md:rounded-lg md:max-w-[350px] shadow-md relative overflow-auto max-h-[100vh]":o==="thin"}),[o,V,C]),Z=f.useMemo(()=>B("grow flex flex-col justify-center shrink-0",{"md:pt-md":e===void 0&&!d,"md:pb-lg":a?.length===0,"p-sm":!c,"p-0":c},E),[a?.length,c,e,E,d]),se=f.useMemo(()=>a.map((pe,me)=>f.createElement(BDe,{...pe,idx:me,key:me,confirmCloseModal:$})),[a,$]);f.useImperativeHandle(j,()=>({scrollContainerRef:R,headerRef:k,contentRef:O,footerRef:L}),[R,k,L]);const Y=f.useCallback(()=>{u?.(),W(!0)},[u]),Q=f.useCallback(pe=>{W(!1),U(!1),G(!1),i?.(pe)},[i]),re=f.useCallback(()=>{if($?.canShow){$.show();return}U(!0)},[$]),te=f.useCallback(()=>$?.canShow?($.show(),!1):!0,[$]),{canOutsideClickClose:le}=f.useContext(hce),ie=f.useMemo(()=>l.jsxs(l.Fragment,{children:[l.jsx("div",{children:o==="hide-chrome"?l.jsx("div",{children:s}):l.jsxs(_e.div,{animate:{scale:$.isShowing?.955:1},className:q,transition:{duration:.2},ref:R,...M,children:[l.jsx("div",{className:"right-sm top-sm fixed z-[23] md:absolute"}),l.jsxs(z,{className:B(N,"px-md pb-md flex min-h-0 w-[100vw] grow flex-col md:w-[unset] md:grow-[unset]",{"h-full":!S,"h-auto !grow":S}),children:[l.jsxs(z,{variant:"background",className:B(x,"pt-md sticky top-0 z-[22] w-full shrink-0",{"text-center":r,"h-10":!e&&!d}),ref:k,children:[l.jsxs("div",{className:"p-sm flex items-center gap-1.5",children:[g&&l.jsx(ke,{extraCSS:"-ml-sm",...g,size:"small",variant:"common"}),h&&l.jsx(be,{icon:h,className:"text-foreground -ml-xs -translate-y-two",size:"xl"}),e&&l.jsx(D,{variant:v,className:B("line-clamp-3 text-pretty",v,{"pt-lg grow":r,"mr-lg":!r}),children:e}),!e&&d,w&&l.jsx(nC,{onClick:re,testId:"close-modal",className:b})]}),t&&l.jsx(D,{variant:"base",color:"light",className:B("mt-xs p-sm line-clamp-3 text-pretty",n),children:t})]}),s&&l.jsx("div",{className:Z,ref:O,children:s}),(se?.length>0||m)&&l.jsxs(z,{variant:"background",className:B("gap-x-sm p-sm pt-lg bottom-0 z-[10] flex items-center",{"justify-end":!m},{"justify-between":m},{sticky:!0},_),ref:L,children:[m&&l.jsx("div",{className:"flex-1",children:m}),se]})]})]})}),K&&l.jsx(cce,{value:$,children:y})]}),[se,r,s,b,$,y,Z,S,_,m,re,x,h,K,q,M,w,t,n,e,d,g,v,o,N]);return l.jsx(pp,{includeBlur:T,childVariant:o,shouldClose:F,onBeforeClose:te,onIsClosing:Y,onClose:Q,variant:p,isOpen:H,canOutsideClickClose:le,...P,children:ie})});rn.displayName="Modal";const BDe=A.memo(({idx:e,text:t,onClick:n,variant:r,disabled:s,isLoading:a,testId:o,icon:i,shouldShowConfirmDialog:c,buttonClassname:u,confirmCloseModal:d})=>{const m=f.useCallback(p=>{if(p.stopPropagation(),r&&c&&d.canShow){d.show();return}n?.()},[d,n,c,r]),h={key:e,text:t,disabled:s,isLoading:a,testId:o,chevronIcon:i,extraCSS:u};return f.createElement(ye,{fullWidthMobile:!0,variant:r||void 0,...h,onClick:m,key:h.key})}),pce={keyProp:0,message:null,variant:"success",description:void 0,isVisible:!1,ctaText:void 0,ctaOnClick:void 0,openToast:()=>{},closeToast:()=>{}},gce=cl("ToastStateContext",pce),yce=A.memo(({children:e})=>{const[t,n]=f.useState(pce),r=f.useCallback((o,i,c,u,d,m,h)=>{n(p=>({...p,message:o,variant:i,timeout:c,description:u,ctaText:d,ctaOnClick:m,position:h??"top",isVisible:!0,keyProp:(p.keyProp||0)+1}))},[]),s=f.useCallback(()=>{n(o=>({...o,isVisible:!1}))},[]),a=f.useMemo(()=>({...t,openToast:r,closeToast:s}),[r,s,t]);return l.jsx(gce.Provider,{value:a,children:e})});yce.displayName="ToastStateProvider";const On=()=>{const e=f.useContext(gce);if(!e)throw new Error("useToastState must be used within ToastContext");return e},vce=A.memo(({isOpen:e,onClose:t,uuidOrSlug:n})=>{const r="request-access-modal",{$t:s}=X(),{openToast:a}=On(),{trackEvent:o}=Te();f.useEffect(()=>{o("thread access modal viewed",{uuidOrSlug:n})},[o,n]);const i=f.useCallback(u=>{o("thread access modal requested",{uuidOrSlug:n}),b7e({slugOrUUID:n,reason:r}).then(()=>{t(),a(s({defaultMessage:"Access request sent",id:"STvLV+qKiH"}),"success",3)})},[n,s,t,a,o]),c=f.useCallback(()=>i(n),[i,n]);return l.jsx(rn,{isOpen:e,onClose:t,variant:"thin",children:l.jsx(z,{className:"px-md mx-auto text-center",children:l.jsxs("div",{className:"gap-y-md flex flex-col",children:[l.jsx("div",{className:"mb-lg flex justify-center",children:l.jsx(Wa,{variant:"full",size:"large",color:"foreground"})}),l.jsxs("div",{className:"mx-auto max-w-sm",children:[l.jsx(D,{variant:"section-title",className:"-mt-md",children:s({defaultMessage:"This answer is private",id:"cA+GFbHP/s"})}),l.jsx(D,{variant:"base",color:"light",className:"-mb-md",children:s({defaultMessage:"You can access this page if the owner accepts your request.",id:"SOJ/6nzOoc"})})]}),l.jsxs("div",{className:"mt-lg mb-md mx-auto flex w-full max-w-sm flex-col gap-y-2",children:[l.jsx(ye,{variant:"primary",text:s({defaultMessage:"Request access",id:"vkHRp5q6Wi"}),onClick:c}),l.jsx(ye,{variant:"common",text:s({defaultMessage:"Back to Perplexity",id:"r89PhWwooe"}),onClick:t,textClassName:"font-normal"})]})]})})})});vce.displayName="RequestAccessModal";var lt=(e=>(e.SCHEDULED="scheduled",e.PRICE_ALERT="priceAlert",e.SHORTCUT="shortcut",e))(lt||{}),_a=(e=>(e.TARGET_PRICE="targetPrice",e.MOVEMENT_AMOUNT="movementAmount",e))(_a||{});function Hd(e){"@babel/helpers - typeof";return Hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hd(e)}function Hn(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function nt(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function wt(e){nt(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||Hd(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function cs(e,t){nt(2,arguments);var n=wt(e),r=Hn(t);return isNaN(r)?new Date(NaN):(r&&n.setDate(n.getDate()+r),n)}function zo(e,t){nt(2,arguments);var n=wt(e),r=Hn(t);if(isNaN(r))return new Date(NaN);if(!r)return n;var s=n.getDate(),a=new Date(n.getTime());a.setMonth(n.getMonth()+r+1,0);var o=a.getDate();return s>=o?a:(n.setFullYear(a.getFullYear(),a.getMonth(),s),n)}function kg(e,t){if(nt(2,arguments),!t||Hd(t)!=="object")return new Date(NaN);var n=t.years?Hn(t.years):0,r=t.months?Hn(t.months):0,s=t.weeks?Hn(t.weeks):0,a=t.days?Hn(t.days):0,o=t.hours?Hn(t.hours):0,i=t.minutes?Hn(t.minutes):0,c=t.seconds?Hn(t.seconds):0,u=wt(e),d=r||n?zo(u,r+n*12):u,m=a||s?cs(d,a+s*7):d,h=i+o*60,p=c+h*60,g=p*1e3,y=new Date(m.getTime()+g);return y}function VDe(e,t){nt(2,arguments);var n=wt(e).getTime(),r=Hn(t);return new Date(n+r)}var $De={};function Nu(){return $De}function Ji(e,t){var n,r,s,a,o,i,c,u;nt(1,arguments);var d=Nu(),m=Hn((n=(r=(s=(a=t?.weekStartsOn)!==null&&a!==void 0?a:t==null||(o=t.locale)===null||o===void 0||(i=o.options)===null||i===void 0?void 0:i.weekStartsOn)!==null&&s!==void 0?s:d.weekStartsOn)!==null&&r!==void 0?r:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=wt(e),p=h.getDay(),g=(p<m?7:0)+p-m;return h.setDate(h.getDate()-g),h.setHours(0,0,0,0),h}function zd(e){return nt(1,arguments),Ji(e,{weekStartsOn:1})}function WDe(e){nt(1,arguments);var t=wt(e),n=t.getFullYear(),r=new Date(0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);var s=zd(r),a=new Date(0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);var o=zd(a);return t.getTime()>=s.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function HDe(e){nt(1,arguments);var t=WDe(e),n=new Date(0);n.setFullYear(t,0,4),n.setHours(0,0,0,0);var r=zd(n);return r}function Tv(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function pu(e){nt(1,arguments);var t=wt(e);return t.setHours(0,0,0,0),t}var zDe=864e5;function Ri(e,t){nt(2,arguments);var n=pu(e),r=pu(t),s=n.getTime()-Tv(n),a=r.getTime()-Tv(r);return Math.round((s-a)/zDe)}function d2(e,t){nt(2,arguments);var n=Hn(t),r=n*7;return cs(e,r)}function GDe(e,t){nt(2,arguments);var n=Hn(t);return zo(e,n*12)}function qDe(e){nt(1,arguments);var t;if(e&&typeof e.forEach=="function")t=e;else if(Hd(e)==="object"&&e!==null)t=Array.prototype.slice.call(e);else return new Date(NaN);var n;return t.forEach(function(r){var s=wt(r);(n===void 0||n<s||isNaN(Number(s)))&&(n=s)}),n||new Date(NaN)}function KDe(e){nt(1,arguments);var t;if(e&&typeof e.forEach=="function")t=e;else if(Hd(e)==="object"&&e!==null)t=Array.prototype.slice.call(e);else return new Date(NaN);var n;return t.forEach(function(r){var s=wt(r);(n===void 0||n>s||isNaN(s.getDate()))&&(n=s)}),n||new Date(NaN)}function Im(e,t){nt(2,arguments);var n=wt(e),r=wt(t),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}var xce=6e4,YDe=36e5;function us(e,t){nt(2,arguments);var n=pu(e),r=pu(t);return n.getTime()===r.getTime()}function gL(e){return nt(1,arguments),e instanceof Date||Hd(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function QDe(e){if(nt(1,arguments),!gL(e)&&typeof e!="number")return!1;var t=wt(e);return!isNaN(Number(t))}function hh(e,t){nt(2,arguments);var n=wt(e),r=wt(t),s=n.getFullYear()-r.getFullYear(),a=n.getMonth()-r.getMonth();return s*12+a}var XDe=6048e5;function ZDe(e,t,n){nt(2,arguments);var r=Ji(e,n),s=Ji(t,n),a=r.getTime()-Tv(r),o=s.getTime()-Tv(s);return Math.round((a-o)/XDe)}function JDe(e,t){nt(2,arguments);var n=wt(e),r=wt(t);return n.getFullYear()-r.getFullYear()}function nz(e,t){var n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function eFe(e,t){nt(2,arguments);var n=wt(e),r=wt(t),s=nz(n,r),a=Math.abs(Ri(n,r));n.setDate(n.getDate()-s*a);var o=+(nz(n,r)===-s),i=s*(a-o);return i===0?0:i}function yL(e,t){return nt(2,arguments),wt(e).getTime()-wt(t).getTime()}var tFe={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},nFe="trunc";function vL(e){return tFe[nFe]}function rFe(e,t,n){nt(2,arguments);var r=yL(e,t)/YDe;return vL()(r)}function sFe(e,t,n){nt(2,arguments);var r=yL(e,t)/xce;return vL()(r)}function aFe(e){nt(1,arguments);var t=wt(e);return t.setHours(23,59,59,999),t}function lC(e){nt(1,arguments);var t=wt(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function oFe(e){nt(1,arguments);var t=wt(e);return aFe(t).getTime()===lC(t).getTime()}function iFe(e,t){nt(2,arguments);var n=wt(e),r=wt(t),s=Im(n,r),a=Math.abs(hh(n,r)),o;if(a<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*a);var i=Im(n,r)===-s;oFe(wt(e))&&a===1&&Im(e,r)===1&&(i=!1),o=s*(a-Number(i))}return o===0?0:o}function lFe(e,t,n){nt(2,arguments);var r=yL(e,t)/1e3;return vL()(r)}function cFe(e,t){nt(2,arguments);var n=wt(e),r=wt(t),s=Im(n,r),a=Math.abs(JDe(n,r));n.setFullYear(1584),r.setFullYear(1584);var o=Im(n,r)===-s,i=s*(a-Number(o));return i===0?0:i}function va(e){nt(1,arguments);var t=wt(e);return t.setDate(1),t.setHours(0,0,0,0),t}function uFe(e){nt(1,arguments);var t=wt(e),n=new Date(0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function xL(e,t){var n,r,s,a,o,i,c,u;nt(1,arguments);var d=Nu(),m=Hn((n=(r=(s=(a=t?.weekStartsOn)!==null&&a!==void 0?a:t==null||(o=t.locale)===null||o===void 0||(i=o.options)===null||i===void 0?void 0:i.weekStartsOn)!==null&&s!==void 0?s:d.weekStartsOn)!==null&&r!==void 0?r:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=wt(e),p=h.getDay(),g=(p<m?-7:0)+6-(p-m);return h.setDate(h.getDate()+g),h.setHours(23,59,59,999),h}function bce(e){return nt(1,arguments),xL(e,{weekStartsOn:1})}function dFe(e,t){nt(2,arguments);var n=Hn(t);return VDe(e,-n)}var fFe=864e5;function mFe(e){nt(1,arguments);var t=wt(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=t.getTime(),s=n-r;return Math.floor(s/fFe)+1}function f2(e){nt(1,arguments);var t=1,n=wt(e),r=n.getUTCDay(),s=(r<t?7:0)+r-t;return n.setUTCDate(n.getUTCDate()-s),n.setUTCHours(0,0,0,0),n}function _ce(e){nt(1,arguments);var t=wt(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var s=f2(r),a=new Date(0);a.setUTCFullYear(n,0,4),a.setUTCHours(0,0,0,0);var o=f2(a);return t.getTime()>=s.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function hFe(e){nt(1,arguments);var t=_ce(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var r=f2(n);return r}var pFe=6048e5;function gFe(e){nt(1,arguments);var t=wt(e),n=f2(t).getTime()-hFe(t).getTime();return Math.round(n/pFe)+1}function m2(e,t){var n,r,s,a,o,i,c,u;nt(1,arguments);var d=Nu(),m=Hn((n=(r=(s=(a=t?.weekStartsOn)!==null&&a!==void 0?a:t==null||(o=t.locale)===null||o===void 0||(i=o.options)===null||i===void 0?void 0:i.weekStartsOn)!==null&&s!==void 0?s:d.weekStartsOn)!==null&&r!==void 0?r:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=wt(e),p=h.getUTCDay(),g=(p<m?7:0)+p-m;return h.setUTCDate(h.getUTCDate()-g),h.setUTCHours(0,0,0,0),h}function wce(e,t){var n,r,s,a,o,i,c,u;nt(1,arguments);var d=wt(e),m=d.getUTCFullYear(),h=Nu(),p=Hn((n=(r=(s=(a=t?.firstWeekContainsDate)!==null&&a!==void 0?a:t==null||(o=t.locale)===null||o===void 0||(i=o.options)===null||i===void 0?void 0:i.firstWeekContainsDate)!==null&&s!==void 0?s:h.firstWeekContainsDate)!==null&&r!==void 0?r:(c=h.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setUTCFullYear(m+1,0,p),g.setUTCHours(0,0,0,0);var y=m2(g,t),v=new Date(0);v.setUTCFullYear(m,0,p),v.setUTCHours(0,0,0,0);var x=m2(v,t);return d.getTime()>=y.getTime()?m+1:d.getTime()>=x.getTime()?m:m-1}function yFe(e,t){var n,r,s,a,o,i,c,u;nt(1,arguments);var d=Nu(),m=Hn((n=(r=(s=(a=t?.firstWeekContainsDate)!==null&&a!==void 0?a:t==null||(o=t.locale)===null||o===void 0||(i=o.options)===null||i===void 0?void 0:i.firstWeekContainsDate)!==null&&s!==void 0?s:d.firstWeekContainsDate)!==null&&r!==void 0?r:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1),h=wce(e,t),p=new Date(0);p.setUTCFullYear(h,0,m),p.setUTCHours(0,0,0,0);var g=m2(p,t);return g}var vFe=6048e5;function xFe(e,t){nt(1,arguments);var n=wt(e),r=m2(n,t).getTime()-yFe(n,t).getTime();return Math.round(r/vFe)+1}function An(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}var Ac={y:function(t,n){var r=t.getUTCFullYear(),s=r>0?r:1-r;return An(n==="yy"?s%100:s,n.length)},M:function(t,n){var r=t.getUTCMonth();return n==="M"?String(r+1):An(r+1,2)},d:function(t,n){return An(t.getUTCDate(),n.length)},a:function(t,n){var r=t.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(t,n){return An(t.getUTCHours()%12||12,n.length)},H:function(t,n){return An(t.getUTCHours(),n.length)},m:function(t,n){return An(t.getUTCMinutes(),n.length)},s:function(t,n){return An(t.getUTCSeconds(),n.length)},S:function(t,n){var r=n.length,s=t.getUTCMilliseconds(),a=Math.floor(s*Math.pow(10,r-3));return An(a,n.length)}},Bf={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},bFe={G:function(t,n,r){var s=t.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(t,n,r){if(n==="yo"){var s=t.getUTCFullYear(),a=s>0?s:1-s;return r.ordinalNumber(a,{unit:"year"})}return Ac.y(t,n)},Y:function(t,n,r,s){var a=wce(t,s),o=a>0?a:1-a;if(n==="YY"){var i=o%100;return An(i,2)}return n==="Yo"?r.ordinalNumber(o,{unit:"year"}):An(o,n.length)},R:function(t,n){var r=_ce(t);return An(r,n.length)},u:function(t,n){var r=t.getUTCFullYear();return An(r,n.length)},Q:function(t,n,r){var s=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"Q":return String(s);case"QQ":return An(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,n,r){var s=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"q":return String(s);case"qq":return An(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,n,r){var s=t.getUTCMonth();switch(n){case"M":case"MM":return Ac.M(t,n);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(t,n,r){var s=t.getUTCMonth();switch(n){case"L":return String(s+1);case"LL":return An(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(t,n,r,s){var a=xFe(t,s);return n==="wo"?r.ordinalNumber(a,{unit:"week"}):An(a,n.length)},I:function(t,n,r){var s=gFe(t);return n==="Io"?r.ordinalNumber(s,{unit:"week"}):An(s,n.length)},d:function(t,n,r){return n==="do"?r.ordinalNumber(t.getUTCDate(),{unit:"date"}):Ac.d(t,n)},D:function(t,n,r){var s=mFe(t);return n==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):An(s,n.length)},E:function(t,n,r){var s=t.getUTCDay();switch(n){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(t,n,r,s){var a=t.getUTCDay(),o=(a-s.weekStartsOn+8)%7||7;switch(n){case"e":return String(o);case"ee":return An(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(t,n,r,s){var a=t.getUTCDay(),o=(a-s.weekStartsOn+8)%7||7;switch(n){case"c":return String(o);case"cc":return An(o,n.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(t,n,r){var s=t.getUTCDay(),a=s===0?7:s;switch(n){case"i":return String(a);case"ii":return An(a,n.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(t,n,r){var s=t.getUTCHours(),a=s/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,n,r){var s=t.getUTCHours(),a;switch(s===12?a=Bf.noon:s===0?a=Bf.midnight:a=s/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,n,r){var s=t.getUTCHours(),a;switch(s>=17?a=Bf.evening:s>=12?a=Bf.afternoon:s>=4?a=Bf.morning:a=Bf.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,n,r){if(n==="ho"){var s=t.getUTCHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return Ac.h(t,n)},H:function(t,n,r){return n==="Ho"?r.ordinalNumber(t.getUTCHours(),{unit:"hour"}):Ac.H(t,n)},K:function(t,n,r){var s=t.getUTCHours()%12;return n==="Ko"?r.ordinalNumber(s,{unit:"hour"}):An(s,n.length)},k:function(t,n,r){var s=t.getUTCHours();return s===0&&(s=24),n==="ko"?r.ordinalNumber(s,{unit:"hour"}):An(s,n.length)},m:function(t,n,r){return n==="mo"?r.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):Ac.m(t,n)},s:function(t,n,r){return n==="so"?r.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):Ac.s(t,n)},S:function(t,n){return Ac.S(t,n)},X:function(t,n,r,s){var a=s._originalDate||t,o=a.getTimezoneOffset();if(o===0)return"Z";switch(n){case"X":return sz(o);case"XXXX":case"XX":return cd(o);case"XXXXX":case"XXX":default:return cd(o,":")}},x:function(t,n,r,s){var a=s._originalDate||t,o=a.getTimezoneOffset();switch(n){case"x":return sz(o);case"xxxx":case"xx":return cd(o);case"xxxxx":case"xxx":default:return cd(o,":")}},O:function(t,n,r,s){var a=s._originalDate||t,o=a.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+rz(o,":");case"OOOO":default:return"GMT"+cd(o,":")}},z:function(t,n,r,s){var a=s._originalDate||t,o=a.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+rz(o,":");case"zzzz":default:return"GMT"+cd(o,":")}},t:function(t,n,r,s){var a=s._originalDate||t,o=Math.floor(a.getTime()/1e3);return An(o,n.length)},T:function(t,n,r,s){var a=s._originalDate||t,o=a.getTime();return An(o,n.length)}};function rz(e,t){var n=e>0?"-":"+",r=Math.abs(e),s=Math.floor(r/60),a=r%60;if(a===0)return n+String(s);var o=t;return n+String(s)+o+An(a,2)}function sz(e,t){if(e%60===0){var n=e>0?"-":"+";return n+An(Math.abs(e)/60,2)}return cd(e,t)}function cd(e,t){var n=t||"",r=e>0?"-":"+",s=Math.abs(e),a=An(Math.floor(s/60),2),o=An(s%60,2);return r+a+n+o}var az=function(t,n){switch(t){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},Sce=function(t,n){switch(t){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},_Fe=function(t,n){var r=t.match(/(P+)(p+)?/)||[],s=r[1],a=r[2];if(!a)return az(t,n);var o;switch(s){case"P":o=n.dateTime({width:"short"});break;case"PP":o=n.dateTime({width:"medium"});break;case"PPP":o=n.dateTime({width:"long"});break;case"PPPP":default:o=n.dateTime({width:"full"});break}return o.replace("{{date}}",az(s,n)).replace("{{time}}",Sce(a,n))},wFe={p:Sce,P:_Fe},SFe=["D","DD"],CFe=["YY","YYYY"];function EFe(e){return SFe.indexOf(e)!==-1}function MFe(e){return CFe.indexOf(e)!==-1}function oz(e,t,n){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var TFe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},kFe=function(t,n,r){var s,a=TFe[t];return typeof a=="string"?s=a:n===1?s=a.one:s=a.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function sT(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,r=e.formats[n]||e.formats[e.defaultWidth];return r}}var NFe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},AFe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},PFe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},RFe={date:sT({formats:NFe,defaultWidth:"full"}),time:sT({formats:AFe,defaultWidth:"full"}),dateTime:sT({formats:PFe,defaultWidth:"full"})},IFe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},jFe=function(t,n,r,s){return IFe[t]};function Ng(e){return function(t,n){var r=n!=null&&n.context?String(n.context):"standalone",s;if(r==="formatting"&&e.formattingValues){var a=e.defaultFormattingWidth||e.defaultWidth,o=n!=null&&n.width?String(n.width):a;s=e.formattingValues[o]||e.formattingValues[a]}else{var i=e.defaultWidth,c=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[c]||e.values[i]}var u=e.argumentCallback?e.argumentCallback(t):t;return s[u]}}var OFe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},LFe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},DFe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},FFe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},UFe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},BFe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},VFe=function(t,n){var r=Number(t),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},$Fe={ordinalNumber:VFe,era:Ng({values:OFe,defaultWidth:"wide"}),quarter:Ng({values:LFe,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:Ng({values:DFe,defaultWidth:"wide"}),day:Ng({values:FFe,defaultWidth:"wide"}),dayPeriod:Ng({values:UFe,defaultWidth:"wide",formattingValues:BFe,defaultFormattingWidth:"wide"})};function Ag(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(s);if(!a)return null;var o=a[0],i=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(i)?HFe(i,function(m){return m.test(o)}):WFe(i,function(m){return m.test(o)}),u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;var d=t.slice(o.length);return{value:u,rest:d}}}function WFe(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function HFe(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}function zFe(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.match(e.matchPattern);if(!r)return null;var s=r[0],a=t.match(e.parsePattern);if(!a)return null;var o=e.valueCallback?e.valueCallback(a[0]):a[0];o=n.valueCallback?n.valueCallback(o):o;var i=t.slice(s.length);return{value:o,rest:i}}}var GFe=/^(\d+)(th|st|nd|rd)?/i,qFe=/\d+/i,KFe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},YFe={any:[/^b/i,/^(a|c)/i]},QFe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},XFe={any:[/1/i,/2/i,/3/i,/4/i]},ZFe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},JFe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},eUe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},tUe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},nUe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},rUe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},sUe={ordinalNumber:zFe({matchPattern:GFe,parsePattern:qFe,valueCallback:function(t){return parseInt(t,10)}}),era:Ag({matchPatterns:KFe,defaultMatchWidth:"wide",parsePatterns:YFe,defaultParseWidth:"any"}),quarter:Ag({matchPatterns:QFe,defaultMatchWidth:"wide",parsePatterns:XFe,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Ag({matchPatterns:ZFe,defaultMatchWidth:"wide",parsePatterns:JFe,defaultParseWidth:"any"}),day:Ag({matchPatterns:eUe,defaultMatchWidth:"wide",parsePatterns:tUe,defaultParseWidth:"any"}),dayPeriod:Ag({matchPatterns:nUe,defaultMatchWidth:"any",parsePatterns:rUe,defaultParseWidth:"any"})},Cce={code:"en-US",formatDistance:kFe,formatLong:RFe,formatRelative:jFe,localize:$Fe,match:sUe,options:{weekStartsOn:0,firstWeekContainsDate:1}},aUe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,oUe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,iUe=/^'([^]*?)'?$/,lUe=/''/g,cUe=/[a-zA-Z]/;function gc(e,t,n){var r,s,a,o,i,c,u,d,m,h,p,g,y,v,x,b,_,w;nt(2,arguments);var S=String(t),C=Nu(),E=(r=(s=n?.locale)!==null&&s!==void 0?s:C.locale)!==null&&r!==void 0?r:Cce,M=Hn((a=(o=(i=(c=n?.firstWeekContainsDate)!==null&&c!==void 0?c:n==null||(u=n.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&i!==void 0?i:C.firstWeekContainsDate)!==null&&o!==void 0?o:(m=C.locale)===null||m===void 0||(h=m.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&a!==void 0?a:1);if(!(M>=1&&M<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var T=Hn((p=(g=(y=(v=n?.weekStartsOn)!==null&&v!==void 0?v:n==null||(x=n.locale)===null||x===void 0||(b=x.options)===null||b===void 0?void 0:b.weekStartsOn)!==null&&y!==void 0?y:C.weekStartsOn)!==null&&g!==void 0?g:(_=C.locale)===null||_===void 0||(w=_.options)===null||w===void 0?void 0:w.weekStartsOn)!==null&&p!==void 0?p:0);if(!(T>=0&&T<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!E.localize)throw new RangeError("locale must contain localize property");if(!E.formatLong)throw new RangeError("locale must contain formatLong property");var I=wt(e);if(!QDe(I))throw new RangeError("Invalid time value");var j=Tv(I),N=dFe(I,j),P={firstWeekContainsDate:M,weekStartsOn:T,locale:E,_originalDate:I},R=S.match(oUe).map(function(k){var O=k[0];if(O==="p"||O==="P"){var L=wFe[O];return L(k,E.formatLong)}return k}).join("").match(aUe).map(function(k){if(k==="''")return"'";var O=k[0];if(O==="'")return uUe(k);var L=bFe[O];if(L)return!(n!=null&&n.useAdditionalWeekYearTokens)&&MFe(k)&&oz(k,t,String(e)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&EFe(k)&&oz(k,t,String(e)),L(N,k,E.localize,P);if(O.match(cUe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+O+"`");return k}).join("");return R}function uUe(e){var t=e.match(iUe);return t?t[1].replace(lUe,"'"):e}function dUe(e){nt(1,arguments);var t=wt(e),n=t.getFullYear(),r=t.getMonth(),s=new Date(0);return s.setFullYear(n,r+1,0),s.setHours(0,0,0,0),s.getDate()}var fUe=6048e5;function mUe(e){nt(1,arguments);var t=wt(e),n=zd(t).getTime()-HDe(t).getTime();return Math.round(n/fUe)+1}function hUe(e){nt(1,arguments);var t=wt(e),n=t.getTime();return n}function pUe(e){return nt(1,arguments),Math.floor(hUe(e)/1e3)}function gUe(e,t){var n,r,s,a,o,i,c,u;nt(1,arguments);var d=wt(e),m=d.getFullYear(),h=Nu(),p=Hn((n=(r=(s=(a=t?.firstWeekContainsDate)!==null&&a!==void 0?a:t==null||(o=t.locale)===null||o===void 0||(i=o.options)===null||i===void 0?void 0:i.firstWeekContainsDate)!==null&&s!==void 0?s:h.firstWeekContainsDate)!==null&&r!==void 0?r:(c=h.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setFullYear(m+1,0,p),g.setHours(0,0,0,0);var y=Ji(g,t),v=new Date(0);v.setFullYear(m,0,p),v.setHours(0,0,0,0);var x=Ji(v,t);return d.getTime()>=y.getTime()?m+1:d.getTime()>=x.getTime()?m:m-1}function yUe(e,t){var n,r,s,a,o,i,c,u;nt(1,arguments);var d=Nu(),m=Hn((n=(r=(s=(a=t?.firstWeekContainsDate)!==null&&a!==void 0?a:t==null||(o=t.locale)===null||o===void 0||(i=o.options)===null||i===void 0?void 0:i.firstWeekContainsDate)!==null&&s!==void 0?s:d.firstWeekContainsDate)!==null&&r!==void 0?r:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1),h=gUe(e,t),p=new Date(0);p.setFullYear(h,0,m),p.setHours(0,0,0,0);var g=Ji(p,t);return g}var vUe=6048e5;function xUe(e,t){nt(1,arguments);var n=wt(e),r=Ji(n,t).getTime()-yUe(n,t).getTime();return Math.round(r/vUe)+1}function bUe(e){nt(1,arguments);var t=wt(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(0,0,0,0),t}function _Ue(e,t){return nt(1,arguments),ZDe(bUe(e),va(e),t)+1}function wUe(e){nt(1,arguments);var t=wt(e.start),n=wt(e.end);if(isNaN(t.getTime()))throw new RangeError("Start Date is invalid");if(isNaN(n.getTime()))throw new RangeError("End Date is invalid");var r={};r.years=Math.abs(cFe(n,t));var s=Im(n,t),a=kg(t,{years:s*r.years});r.months=Math.abs(iFe(n,a));var o=kg(a,{months:s*r.months});r.days=Math.abs(eFe(n,o));var i=kg(o,{days:s*r.days});r.hours=Math.abs(rFe(n,i));var c=kg(i,{hours:s*r.hours});r.minutes=Math.abs(sFe(n,c));var u=kg(c,{minutes:s*r.minutes});return r.seconds=Math.abs(lFe(n,u)),r}function Ece(e,t){nt(2,arguments);var n=wt(e),r=wt(t);return n.getTime()>r.getTime()}function Mce(e,t){nt(2,arguments);var n=wt(e),r=wt(t);return n.getTime()<r.getTime()}function bL(e,t){nt(2,arguments);var n=wt(e),r=wt(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function Tce(e,t){nt(2,arguments);var n=wt(e),r=wt(t);return n.getFullYear()===r.getFullYear()}function SUe(e){return nt(1,arguments),Tce(e,Date.now())}function _L(e){return nt(1,arguments),us(e,Date.now())}function CUe(e){return nt(1,arguments),us(e,cs(Date.now(),1))}function DA(e,t){nt(2,arguments);var n=Hn(t);return cs(e,-n)}function EUe(e){return nt(1,arguments),us(e,DA(Date.now(),1))}function MUe(e){return nt(1,arguments),Math.floor(e*xce)}function aT(e,t){nt(2,arguments);var n=wt(e),r=Hn(t),s=n.getFullYear(),a=n.getDate(),o=new Date(0);o.setFullYear(s,r,15),o.setHours(0,0,0,0);var i=dUe(o);return n.setMonth(r,Math.min(a,i)),n}function iz(e,t){nt(2,arguments);var n=wt(e),r=Hn(t);return isNaN(n.getTime())?new Date(NaN):(n.setFullYear(r),n)}var fe;(function(e){e.DEFAULT="turbo",e.PPLX_PRO_UPGRADED="pplx_pro_upgraded",e.PRO="pplx_pro",e.SONAR="experimental",e.GPT_4o="gpt4o",e.GPT_4_1="gpt41",e.GPT_5="gpt5",e.CLAUDE_2="claude2",e.GEMINI_2_FLASH="gemini2flash",e.GROK="grok",e.PPLX_REASONING="pplx_reasoning",e.CLAUDE_3_7_SONNET_THINKING="claude37sonnetthinking",e.O4_MINI="o4mini",e.O3="o3",e.O3_PRO="o3pro",e.GPT_5_THINKING="gpt5_thinking",e.CLAUDE_4_0_OPUS="claude40opus",e.CLAUDE_4_0_OPUS_THINKING="claude40opusthinking",e.CLAUDE_4_1_OPUS_THINKING="claude41opusthinking",e.GROK_4="grok4",e.ALPHA="pplx_alpha",e.O3_RESEARCH="o3_research",e.O3_PRO_RESEARCH="o3pro_research",e.CLAUDE40SONNET_RESEARCH="claude40sonnet_research",e.CLAUDE40SONNETTHINKING_RESEARCH="claude40sonnetthinking_research",e.CLAUDE40OPUS_RESEARCH="claude40opus_research",e.CLAUDE40OPUSTHINKING_RESEARCH="claude40opusthinking_research",e.BETA="pplx_beta",e.O3_LABS="o3_labs",e.O3_PRO_LABS="o3pro_labs",e.CLAUDE40SONNETTHINKING_LABS="claude40sonnetthinking_labs",e.CLAUDE40OPUSTHINKING_LABS="claude40opusthinking_labs",e.STUDY="pplx_study"})(fe||(fe={}));var Us;(function(e){e.GPT_4="gpt4",e.CLAUDE_3_OPUS="claude3opus",e.CLAUDE_3_5_HAIKU="claude35haiku",e.GEMINI="gemini",e.LLAMA_X_LARGE="llama_x_large",e.MISTRAL="mistral",e.GROK2="grok2",e.COPILOT="copilot",e.O3_MINI="o3mini",e.CLAUDE_OMBRE_EAP="claude_ombre_eap",e.CLAUDE_LACE_EAP="claude_lace_eap",e.R1="r1",e.GAMMA="pplx_gamma"})(Us||(Us={}));var ae;(function(e){e.SEARCH="search",e.RESEARCH="research",e.STUDIO="studio",e.STUDY="study"})(ae||(ae={}));var gs;(function(e){e.PRO="pro",e.MAX="max"})(gs||(gs={}));const wa={[fe.DEFAULT]:ae.SEARCH,[fe.PRO]:ae.SEARCH,[fe.SONAR]:ae.SEARCH,[fe.CLAUDE_2]:ae.SEARCH,[fe.GPT_4o]:ae.SEARCH,[fe.GPT_4_1]:ae.SEARCH,[fe.GPT_5]:ae.SEARCH,[fe.GEMINI_2_FLASH]:ae.SEARCH,[fe.GROK]:ae.SEARCH,[fe.O3]:ae.SEARCH,[fe.O3_PRO]:ae.SEARCH,[fe.CLAUDE_3_7_SONNET_THINKING]:ae.SEARCH,[fe.CLAUDE_4_0_OPUS_THINKING]:ae.SEARCH,[fe.CLAUDE_4_1_OPUS_THINKING]:ae.SEARCH,[fe.GROK_4]:ae.SEARCH,[fe.GPT_5_THINKING]:ae.SEARCH,[fe.ALPHA]:ae.RESEARCH,[fe.O4_MINI]:ae.RESEARCH,[fe.O3_RESEARCH]:ae.RESEARCH,[fe.O3_PRO_RESEARCH]:ae.RESEARCH,[fe.CLAUDE40SONNET_RESEARCH]:ae.RESEARCH,[fe.CLAUDE40SONNETTHINKING_RESEARCH]:ae.RESEARCH,[fe.CLAUDE40OPUS_RESEARCH]:ae.RESEARCH,[fe.CLAUDE40OPUSTHINKING_RESEARCH]:ae.RESEARCH,[fe.BETA]:ae.STUDIO,[fe.O3_LABS]:ae.STUDIO,[fe.O3_PRO_LABS]:ae.STUDIO,[fe.CLAUDE40SONNETTHINKING_LABS]:ae.STUDIO,[fe.CLAUDE40OPUSTHINKING_LABS]:ae.STUDIO,[fe.STUDY]:ae.STUDY},wL=e=>wa[e]||ae.SEARCH,ph={[ae.SEARCH]:f4e,[ae.RESEARCH]:Jj,[ae.STUDIO]:lS,[ae.STUDY]:Zj},TUe=e=>ph[e],kce=e=>TUe(wL(e)),kUe={...ph,[ae.SEARCH]:fo},NUe={auto:{model:fe.DEFAULT,mode:ae.SEARCH},reasoning:{model:fe.PPLX_REASONING,mode:ae.SEARCH},deep_research:{model:fe.ALPHA,mode:ae.RESEARCH}},Nce=e=>typeof e=="string"&&e in wa,SL=e=>Nce(e)?e:void 0,lz=Object.values(ae),Ace=[{search_model:fe.SONAR,has_new_tag:!1,subscription_tier:gs.PRO},{search_model:fe.CLAUDE_2,has_new_tag:!1,subscription_tier:gs.PRO},{search_model:fe.CLAUDE_3_7_SONNET_THINKING,has_new_tag:!1,is_reasoning_model:!0,subscription_tier:gs.PRO},{search_model:fe.CLAUDE_4_1_OPUS_THINKING,has_new_tag:!1,is_reasoning_model:!0,subscription_tier:gs.MAX},{search_model:fe.GEMINI_2_FLASH,has_new_tag:!1,subscription_tier:gs.PRO},{search_model:fe.GPT_5,has_new_tag:!0,subscription_tier:gs.PRO},{search_model:fe.GPT_5_THINKING,has_new_tag:!0,is_reasoning_model:!0,subscription_tier:gs.PRO},{search_model:fe.O3,has_new_tag:!1,is_reasoning_model:!0,subscription_tier:gs.PRO},{search_model:fe.O3_PRO,has_new_tag:!1,is_reasoning_model:!0,subscription_tier:gs.MAX},{search_model:fe.GROK_4,has_new_tag:!1,is_reasoning_model:!0,subscription_tier:gs.PRO}];function Qt(e){throw new Error(e)}var FA=["MO","TU","WE","TH","FR","SA","SU"],Vs=function(){function e(t,n){if(n===0)throw new Error("Can't create weekday with n == 0");this.weekday=t,this.n=n}return e.fromStr=function(t){return new e(FA.indexOf(t))},e.prototype.nth=function(t){return this.n===t?this:new e(this.weekday,t)},e.prototype.equals=function(t){return this.weekday===t.weekday&&this.n===t.n},e.prototype.toString=function(){var t=FA[this.weekday];return this.n&&(t=(this.n>0?"+":"")+String(this.n)+t),t},e.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},e}(),Cr=function(e){return e!=null},xi=function(e){return typeof e=="number"},cz=function(e){return typeof e=="string"&&FA.includes(e)},Da=Array.isArray,ml=function(e,t){t===void 0&&(t=e),arguments.length===1&&(t=e,e=0);for(var n=[],r=e;r<t;r++)n.push(r);return n},vn=function(e,t){var n=0,r=[];if(Da(e))for(;n<t;n++)r[n]=[].concat(e);else for(;n<t;n++)r[n]=e;return r},AUe=function(e){return Da(e)?e:[e]};function Vf(e,t,n){n===void 0&&(n=" ");var r=String(e);return t=t>>0,r.length>t?String(r):(t=t-r.length,t>n.length&&(n+=vn(n,t/n.length)),n.slice(0,t)+String(r))}var PUe=function(e,t,n){var r=e.split(t);return n?r.slice(0,n).concat([r.slice(n).join(t)]):r},no=function(e,t){var n=e%t;return n*t<0?n+t:n},oT=function(e,t){return{div:Math.floor(e/t),mod:no(e,t)}},Ci=function(e){return!Cr(e)||e.length===0},Wr=function(e){return!Ci(e)},jn=function(e,t){return Wr(e)&&e.indexOf(t)!==-1},Gd=function(e,t,n,r,s,a){return r===void 0&&(r=0),s===void 0&&(s=0),a===void 0&&(a=0),new Date(Date.UTC(e,t-1,n,r,s,a))},RUe=[31,28,31,30,31,30,31,31,30,31,30,31],Pce=1e3*60*60*24,Rce=9999,Ice=Gd(1970,1,1),IUe=[6,0,1,2,3,4,5],Py=function(e){return e%4===0&&e%100!==0||e%400===0},jce=function(e){return e instanceof Date},ry=function(e){return jce(e)&&!isNaN(e.getTime())},jUe=function(e,t){var n=e.getTime(),r=t.getTime(),s=n-r;return Math.round(s/Pce)},UA=function(e){return jUe(e,Ice)},Oce=function(e){return new Date(Ice.getTime()+e*Pce)},OUe=function(e){var t=e.getUTCMonth();return t===1&&Py(e.getUTCFullYear())?29:RUe[t]},gh=function(e){return IUe[e.getUTCDay()]},uz=function(e,t){var n=Gd(e,t+1,1);return[gh(n),OUe(n)]},Lce=function(e,t){return t=t||e,new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()))},BA=function(e){var t=new Date(e.getTime());return t},dz=function(e){for(var t=[],n=0;n<e.length;n++)t.push(BA(e[n]));return t},kv=function(e){e.sort(function(t,n){return t.getTime()-n.getTime()})},CL=function(e,t){t===void 0&&(t=!0);var n=new Date(e);return[Vf(n.getUTCFullYear().toString(),4,"0"),Vf(n.getUTCMonth()+1,2,"0"),Vf(n.getUTCDate(),2,"0"),"T",Vf(n.getUTCHours(),2,"0"),Vf(n.getUTCMinutes(),2,"0"),Vf(n.getUTCSeconds(),2,"0"),t?"Z":""].join("")},EL=function(e){var t=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,n=t.exec(e);if(!n)throw new Error("Invalid UNTIL value: ".concat(e));return new Date(Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[5],10)||0,parseInt(n[6],10)||0,parseInt(n[7],10)||0))},fz=function(e,t){var n=e.toLocaleString("sv-SE",{timeZone:t});return n.replace(" ","T")+"Z"},LUe=function(e,t){var n=Intl.DateTimeFormat().resolvedOptions().timeZone,r=new Date(fz(e,n)),s=new Date(fz(e,t??"UTC")),a=s.getTime()-r.getTime();return new Date(e.getTime()-a)},mm=function(){function e(t,n){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=t,this.args=n,t==="between"?(this.maxDate=n.inc?n.before:new Date(n.before.getTime()-1),this.minDate=n.inc?n.after:new Date(n.after.getTime()+1)):t==="before"?this.maxDate=n.inc?n.dt:new Date(n.dt.getTime()-1):t==="after"&&(this.minDate=n.inc?n.dt:new Date(n.dt.getTime()+1))}return e.prototype.accept=function(t){++this.total;var n=this.minDate&&t<this.minDate,r=this.maxDate&&t>this.maxDate;if(this.method==="between"){if(n)return!0;if(r)return!1}else if(this.method==="before"){if(r)return!1}else if(this.method==="after")return n?!0:(this.add(t),!1);return this.add(t)},e.prototype.add=function(t){return this._result.push(t),!0},e.prototype.getValue=function(){var t=this._result;switch(this.method){case"all":case"between":return t;case"before":case"after":default:return t.length?t[t.length-1]:null}},e.prototype.clone=function(){return new e(this.method,this.args)},e}(),mz=function(e){Xj(t,e);function t(n,r,s){var a=e.call(this,n,r)||this;return a.iterator=s,a}return t.prototype.add=function(n){return this.iterator(n,this._result.length)?(this._result.push(n),!0):!1},t}(mm),h2={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},hz=function(e,t){return e.indexOf(t)!==-1},DUe=function(e){return e.toString()},FUe=function(e,t,n){return"".concat(t," ").concat(n,", ").concat(e)},yc=function(){function e(t,n,r,s){if(n===void 0&&(n=DUe),r===void 0&&(r=h2),s===void 0&&(s=FUe),this.text=[],this.language=r||h2,this.gettext=n,this.dateFormatter=s,this.rrule=t,this.options=t.options,this.origOptions=t.origOptions,this.origOptions.bymonthday){var a=[].concat(this.options.bymonthday),o=[].concat(this.options.bynmonthday);a.sort(function(d,m){return d-m}),o.sort(function(d,m){return m-d}),this.bymonthday=a.concat(o),this.bymonthday.length||(this.bymonthday=null)}if(Cr(this.origOptions.byweekday)){var i=Da(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],c=String(i);this.byweekday={allWeeks:i.filter(function(d){return!d.n}),someWeeks:i.filter(function(d){return!!d.n}),isWeekdays:c.indexOf("MO")!==-1&&c.indexOf("TU")!==-1&&c.indexOf("WE")!==-1&&c.indexOf("TH")!==-1&&c.indexOf("FR")!==-1&&c.indexOf("SA")===-1&&c.indexOf("SU")===-1,isEveryDay:c.indexOf("MO")!==-1&&c.indexOf("TU")!==-1&&c.indexOf("WE")!==-1&&c.indexOf("TH")!==-1&&c.indexOf("FR")!==-1&&c.indexOf("SA")!==-1&&c.indexOf("SU")!==-1};var u=function(d,m){return d.weekday-m.weekday};this.byweekday.allWeeks.sort(u),this.byweekday.someWeeks.sort(u),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return e.isFullyConvertible=function(t){var n=!0;if(!(t.options.freq in e.IMPLEMENTED)||t.origOptions.until&&t.origOptions.count)return!1;for(var r in t.origOptions){if(hz(["dtstart","tzid","wkst","freq"],r))return!0;if(!hz(e.IMPLEMENTED[t.options.freq],r))return!1}return n},e.prototype.isFullyConvertible=function(){return e.isFullyConvertible(this.rrule)},e.prototype.toString=function(){var t=this.gettext;if(!(this.options.freq in e.IMPLEMENTED))return t("RRule error: Unable to fully convert this rrule to text");if(this.text=[t("every")],this[rt.FREQUENCIES[this.options.freq]](),this.options.until){this.add(t("until"));var n=this.options.until;this.add(this.dateFormatter(n.getUTCFullYear(),this.language.monthNames[n.getUTCMonth()],n.getUTCDate()))}else this.options.count&&this.add(t("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?t("times"):t("time"));return this.isFullyConvertible()||this.add(t("(~ approximate)")),this.text.join("")},e.prototype.HOURLY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("hours"):t("hour"))},e.prototype.MINUTELY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("minutes"):t("minute"))},e.prototype.DAILY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?t("weekdays"):t("weekday")):this.add(this.plural(this.options.interval)?t("days"):t("day")),this.origOptions.bymonth&&(this.add(t("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},e.prototype.WEEKLY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?t("weeks"):t("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?t("weekdays"):t("weekday")):this.add(t("on")).add(t("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?t("days"):t("day")):(this.options.interval===1&&this.add(t("week")),this.origOptions.bymonth&&(this.add(t("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.origOptions.byhour&&this._byhour())},e.prototype.MONTHLY=function(){var t=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(t("months")),this.plural(this.options.interval)&&this.add(t("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("months"):t("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(t("on")).add(t("weekdays")):this.byweekday&&this._byweekday()},e.prototype.YEARLY=function(){var t=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(t("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("years"):t("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(t("on the")).add(this.list(this.options.byyearday,this.nth,t("and"))).add(t("day")),this.options.byweekno&&this.add(t("in")).add(this.plural(this.options.byweekno.length)?t("weeks"):t("week")).add(this.list(this.options.byweekno,void 0,t("and")))},e.prototype._bymonthday=function(){var t=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(t("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,t("or"))).add(t("the")).add(this.list(this.bymonthday,this.nth,t("or"))):this.add(t("on the")).add(this.list(this.bymonthday,this.nth,t("and")))},e.prototype._byweekday=function(){var t=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(t("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(t("and")),this.add(t("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,t("and"))))},e.prototype._byhour=function(){var t=this.gettext;this.add(t("at")).add(this.list(this.origOptions.byhour,void 0,t("and")))},e.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},e.prototype.nth=function(t){t=parseInt(t.toString(),10);var n,r=this.gettext;if(t===-1)return r("last");var s=Math.abs(t);switch(s){case 1:case 21:case 31:n=s+r("st");break;case 2:case 22:n=s+r("nd");break;case 3:case 23:n=s+r("rd");break;default:n=s+r("th")}return t<0?n+" "+r("last"):n},e.prototype.monthtext=function(t){return this.language.monthNames[t-1]},e.prototype.weekdaytext=function(t){var n=xi(t)?(t+1)%7:t.getJsWeekday();return(t.n?this.nth(t.n)+" ":"")+this.language.dayNames[n]},e.prototype.plural=function(t){return t%100!==1},e.prototype.add=function(t){return this.text.push(" "),this.text.push(t),this},e.prototype.list=function(t,n,r,s){var a=this;s===void 0&&(s=","),Da(t)||(t=[t]);var o=function(c,u,d){for(var m="",h=0;h<c.length;h++)h!==0&&(h===c.length-1?m+=" "+d+" ":m+=u+" "),m+=c[h];return m};n=n||function(c){return c.toString()};var i=function(c){return n&&n.call(a,c)};return r?o(t.map(i),s,r):t.map(i).join(s+" ")},e}(),UUe=function(){function e(t){this.done=!0,this.rules=t}return e.prototype.start=function(t){return this.text=t,this.done=!1,this.nextSymbol()},e.prototype.isDone=function(){return this.done&&this.symbol===null},e.prototype.nextSymbol=function(){var t,n;this.symbol=null,this.value=null;do{if(this.done)return!1;var r=void 0;t=null;for(var s in this.rules){r=this.rules[s];var a=r.exec(this.text);a&&(t===null||a[0].length>t[0].length)&&(t=a,n=s)}if(t!=null&&(this.text=this.text.substr(t[0].length),this.text===""&&(this.done=!0)),t==null){this.done=!0,this.symbol=null,this.value=null;return}}while(n==="SKIP");return this.symbol=n,this.value=t,!0},e.prototype.accept=function(t){if(this.symbol===t){if(this.value){var n=this.value;return this.nextSymbol(),n}return this.nextSymbol(),!0}return!1},e.prototype.acceptNumber=function(){return this.accept("number")},e.prototype.expect=function(t){if(this.accept(t))return!0;throw new Error("expected "+t+" but found "+this.symbol)},e}();function Dce(e,t){t===void 0&&(t=h2);var n={},r=new UUe(t.tokens);if(!r.start(e))return null;return s(),n;function s(){r.expect("every");var h=r.acceptNumber();if(h&&(n.interval=parseInt(h[0],10)),r.isDone())throw new Error("Unexpected end");switch(r.symbol){case"day(s)":n.freq=rt.DAILY,r.nextSymbol()&&(o(),m());break;case"weekday(s)":n.freq=rt.WEEKLY,n.byweekday=[rt.MO,rt.TU,rt.WE,rt.TH,rt.FR],r.nextSymbol(),o(),m();break;case"week(s)":n.freq=rt.WEEKLY,r.nextSymbol()&&(a(),o(),m());break;case"hour(s)":n.freq=rt.HOURLY,r.nextSymbol()&&(a(),m());break;case"minute(s)":n.freq=rt.MINUTELY,r.nextSymbol()&&(a(),m());break;case"month(s)":n.freq=rt.MONTHLY,r.nextSymbol()&&(a(),m());break;case"year(s)":n.freq=rt.YEARLY,r.nextSymbol()&&(a(),m());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":n.freq=rt.WEEKLY;var p=r.symbol.substr(0,2).toUpperCase();if(n.byweekday=[rt[p]],!r.nextSymbol())return;for(;r.accept("comma");){if(r.isDone())throw new Error("Unexpected end");var g=c();if(!g)throw new Error("Unexpected symbol "+r.symbol+", expected weekday");n.byweekday.push(rt[g]),r.nextSymbol()}o(),d(),m();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(n.freq=rt.YEARLY,n.bymonth=[i()],!r.nextSymbol())return;for(;r.accept("comma");){if(r.isDone())throw new Error("Unexpected end");var y=i();if(!y)throw new Error("Unexpected symbol "+r.symbol+", expected month");n.bymonth.push(y),r.nextSymbol()}a(),m();break;default:throw new Error("Unknown symbol")}}function a(){var h=r.accept("on"),p=r.accept("the");if(h||p)do{var g=u(),y=c(),v=i();if(g)y?(r.nextSymbol(),n.byweekday||(n.byweekday=[]),n.byweekday.push(rt[y].nth(g))):(n.bymonthday||(n.bymonthday=[]),n.bymonthday.push(g),r.accept("day(s)"));else if(y)r.nextSymbol(),n.byweekday||(n.byweekday=[]),n.byweekday.push(rt[y]);else if(r.symbol==="weekday(s)")r.nextSymbol(),n.byweekday||(n.byweekday=[rt.MO,rt.TU,rt.WE,rt.TH,rt.FR]);else if(r.symbol==="week(s)"){r.nextSymbol();var x=r.acceptNumber();if(!x)throw new Error("Unexpected symbol "+r.symbol+", expected week number");for(n.byweekno=[parseInt(x[0],10)];r.accept("comma");){if(x=r.acceptNumber(),!x)throw new Error("Unexpected symbol "+r.symbol+"; expected monthday");n.byweekno.push(parseInt(x[0],10))}}else if(v)r.nextSymbol(),n.bymonth||(n.bymonth=[]),n.bymonth.push(v);else return}while(r.accept("comma")||r.accept("the")||r.accept("on"))}function o(){var h=r.accept("at");if(h)do{var p=r.acceptNumber();if(!p)throw new Error("Unexpected symbol "+r.symbol+", expected hour");for(n.byhour=[parseInt(p[0],10)];r.accept("comma");){if(p=r.acceptNumber(),!p)throw new Error("Unexpected symbol "+r.symbol+"; expected hour");n.byhour.push(parseInt(p[0],10))}}while(r.accept("comma")||r.accept("at"))}function i(){switch(r.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function c(){switch(r.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return r.symbol.substr(0,2).toUpperCase();default:return!1}}function u(){switch(r.symbol){case"last":return r.nextSymbol(),-1;case"first":return r.nextSymbol(),1;case"second":return r.nextSymbol(),r.accept("last")?-2:2;case"third":return r.nextSymbol(),r.accept("last")?-3:3;case"nth":var h=parseInt(r.value[1],10);if(h<-366||h>366)throw new Error("Nth out of range: "+h);return r.nextSymbol(),r.accept("last")?-h:h;default:return!1}}function d(){r.accept("on"),r.accept("the");var h=u();if(h)for(n.bymonthday=[h],r.nextSymbol();r.accept("comma");){if(h=u(),!h)throw new Error("Unexpected symbol "+r.symbol+"; expected monthday");n.bymonthday.push(h),r.nextSymbol()}}function m(){if(r.symbol==="until"){var h=Date.parse(r.text);if(!h)throw new Error("Cannot parse until date:"+r.text);n.until=new Date(h)}else r.accept("for")&&(n.count=parseInt(r.value[0],10),r.expect("number"))}}var xn;(function(e){e[e.YEARLY=0]="YEARLY",e[e.MONTHLY=1]="MONTHLY",e[e.WEEKLY=2]="WEEKLY",e[e.DAILY=3]="DAILY",e[e.HOURLY=4]="HOURLY",e[e.MINUTELY=5]="MINUTELY",e[e.SECONDLY=6]="SECONDLY"})(xn||(xn={}));function ML(e){return e<xn.HOURLY}var BUe=function(e,t){return t===void 0&&(t=h2),new rt(Dce(e,t)||void 0)},gp=["count","until","interval","byweekday","bymonthday","bymonth"];yc.IMPLEMENTED=[];yc.IMPLEMENTED[xn.HOURLY]=gp;yc.IMPLEMENTED[xn.MINUTELY]=gp;yc.IMPLEMENTED[xn.DAILY]=["byhour"].concat(gp);yc.IMPLEMENTED[xn.WEEKLY]=gp;yc.IMPLEMENTED[xn.MONTHLY]=gp;yc.IMPLEMENTED[xn.YEARLY]=["byweekno","byyearday"].concat(gp);var VUe=function(e,t,n,r){return new yc(e,t,n,r).toString()},$Ue=yc.isFullyConvertible,p2=function(){function e(t,n,r,s){this.hour=t,this.minute=n,this.second=r,this.millisecond=s||0}return e.prototype.getHours=function(){return this.hour},e.prototype.getMinutes=function(){return this.minute},e.prototype.getSeconds=function(){return this.second},e.prototype.getMilliseconds=function(){return this.millisecond},e.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},e}(),WUe=function(e){Xj(t,e);function t(n,r,s,a,o,i,c){var u=e.call(this,a,o,i,c)||this;return u.year=n,u.month=r,u.day=s,u}return t.fromDate=function(n){return new this(n.getUTCFullYear(),n.getUTCMonth()+1,n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.valueOf()%1e3)},t.prototype.getWeekday=function(){return gh(new Date(this.getTime()))},t.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},t.prototype.getDay=function(){return this.day},t.prototype.getMonth=function(){return this.month},t.prototype.getYear=function(){return this.year},t.prototype.addYears=function(n){this.year+=n},t.prototype.addMonths=function(n){if(this.month+=n,this.month>12){var r=Math.floor(this.month/12),s=no(this.month,12);this.month=s,this.year+=r,this.month===0&&(this.month=12,--this.year)}},t.prototype.addWeekly=function(n,r){r>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-r))+n*7:this.day+=-(this.getWeekday()-r)+n*7,this.fixDay()},t.prototype.addDaily=function(n){this.day+=n,this.fixDay()},t.prototype.addHours=function(n,r,s){for(r&&(this.hour+=Math.floor((23-this.hour)/n)*n);;){this.hour+=n;var a=oT(this.hour,24),o=a.div,i=a.mod;if(o&&(this.hour=i,this.addDaily(o)),Ci(s)||jn(s,this.hour))break}},t.prototype.addMinutes=function(n,r,s,a){for(r&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/n)*n);;){this.minute+=n;var o=oT(this.minute,60),i=o.div,c=o.mod;if(i&&(this.minute=c,this.addHours(i,!1,s)),(Ci(s)||jn(s,this.hour))&&(Ci(a)||jn(a,this.minute)))break}},t.prototype.addSeconds=function(n,r,s,a,o){for(r&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/n)*n);;){this.second+=n;var i=oT(this.second,60),c=i.div,u=i.mod;if(c&&(this.second=u,this.addMinutes(c,!1,s,a)),(Ci(s)||jn(s,this.hour))&&(Ci(a)||jn(a,this.minute))&&(Ci(o)||jn(o,this.second)))break}},t.prototype.fixDay=function(){if(!(this.day<=28)){var n=uz(this.year,this.month-1)[1];if(!(this.day<=n))for(;this.day>n;){if(this.day-=n,++this.month,this.month===13&&(this.month=1,++this.year,this.year>Rce))return;n=uz(this.year,this.month-1)[1]}}},t.prototype.add=function(n,r){var s=n.freq,a=n.interval,o=n.wkst,i=n.byhour,c=n.byminute,u=n.bysecond;switch(s){case xn.YEARLY:return this.addYears(a);case xn.MONTHLY:return this.addMonths(a);case xn.WEEKLY:return this.addWeekly(a,o);case xn.DAILY:return this.addDaily(a);case xn.HOURLY:return this.addHours(a,r,i);case xn.MINUTELY:return this.addMinutes(a,r,i,c);case xn.SECONDLY:return this.addSeconds(a,r,i,c,u)}},t}(p2);function Fce(e){for(var t=[],n=Object.keys(e),r=0,s=n;r<s.length;r++){var a=s[r];jn(xBe,a)||t.push(a),jce(e[a])&&!ry(e[a])&&t.push(a)}if(t.length)throw new Error("Invalid options: "+t.join(", "));return zn({},e)}function HUe(e){var t=zn(zn({},TL),Fce(e));if(Cr(t.byeaster)&&(t.freq=rt.YEARLY),!(Cr(t.freq)&&rt.FREQUENCIES[t.freq]))throw new Error("Invalid frequency: ".concat(t.freq," ").concat(e.freq));if(t.dtstart||(t.dtstart=new Date(new Date().setMilliseconds(0))),Cr(t.wkst)?xi(t.wkst)||(t.wkst=t.wkst.weekday):t.wkst=rt.MO.weekday,Cr(t.bysetpos)){xi(t.bysetpos)&&(t.bysetpos=[t.bysetpos]);for(var n=0;n<t.bysetpos.length;n++){var r=t.bysetpos[n];if(r===0||!(r>=-366&&r<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(t.byweekno||Wr(t.byweekno)||Wr(t.byyearday)||t.bymonthday||Wr(t.bymonthday)||Cr(t.byweekday)||Cr(t.byeaster)))switch(t.freq){case rt.YEARLY:t.bymonth||(t.bymonth=t.dtstart.getUTCMonth()+1),t.bymonthday=t.dtstart.getUTCDate();break;case rt.MONTHLY:t.bymonthday=t.dtstart.getUTCDate();break;case rt.WEEKLY:t.byweekday=[gh(t.dtstart)];break}if(Cr(t.bymonth)&&!Da(t.bymonth)&&(t.bymonth=[t.bymonth]),Cr(t.byyearday)&&!Da(t.byyearday)&&xi(t.byyearday)&&(t.byyearday=[t.byyearday]),!Cr(t.bymonthday))t.bymonthday=[],t.bynmonthday=[];else if(Da(t.bymonthday)){for(var s=[],a=[],n=0;n<t.bymonthday.length;n++){var r=t.bymonthday[n];r>0?s.push(r):r<0&&a.push(r)}t.bymonthday=s,t.bynmonthday=a}else t.bymonthday<0?(t.bynmonthday=[t.bymonthday],t.bymonthday=[]):(t.bynmonthday=[],t.bymonthday=[t.bymonthday]);if(Cr(t.byweekno)&&!Da(t.byweekno)&&(t.byweekno=[t.byweekno]),!Cr(t.byweekday))t.bynweekday=null;else if(xi(t.byweekday))t.byweekday=[t.byweekday],t.bynweekday=null;else if(cz(t.byweekday))t.byweekday=[Vs.fromStr(t.byweekday).weekday],t.bynweekday=null;else if(t.byweekday instanceof Vs)!t.byweekday.n||t.freq>rt.MONTHLY?(t.byweekday=[t.byweekday.weekday],t.bynweekday=null):(t.bynweekday=[[t.byweekday.weekday,t.byweekday.n]],t.byweekday=null);else{for(var o=[],i=[],n=0;n<t.byweekday.length;n++){var c=t.byweekday[n];if(xi(c)){o.push(c);continue}else if(cz(c)){o.push(Vs.fromStr(c).weekday);continue}!c.n||t.freq>rt.MONTHLY?o.push(c.weekday):i.push([c.weekday,c.n])}t.byweekday=Wr(o)?o:null,t.bynweekday=Wr(i)?i:null}return Cr(t.byhour)?xi(t.byhour)&&(t.byhour=[t.byhour]):t.byhour=t.freq<rt.HOURLY?[t.dtstart.getUTCHours()]:null,Cr(t.byminute)?xi(t.byminute)&&(t.byminute=[t.byminute]):t.byminute=t.freq<rt.MINUTELY?[t.dtstart.getUTCMinutes()]:null,Cr(t.bysecond)?xi(t.bysecond)&&(t.bysecond=[t.bysecond]):t.bysecond=t.freq<rt.SECONDLY?[t.dtstart.getUTCSeconds()]:null,{parsedOptions:t}}function zUe(e){var t=e.dtstart.getTime()%1e3;if(!ML(e.freq))return[];var n=[];return e.byhour.forEach(function(r){e.byminute.forEach(function(s){e.bysecond.forEach(function(a){n.push(new p2(r,s,a,t))})})}),n}function VA(e){var t=e.split(`
`).map(GUe).filter(function(n){return n!==null});return zn(zn({},t[0]),t[1])}function g2(e){var t={},n=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(e);if(!n)return t;var r=n[1],s=n[2];return r&&(t.tzid=r),t.dtstart=EL(s),t}function GUe(e){if(e=e.replace(/^\s+|\s+$/,""),!e.length)return null;var t=/^([A-Z]+?)[:;]/.exec(e.toUpperCase());if(!t)return pz(e);var n=t[1];switch(n.toUpperCase()){case"RRULE":case"EXRULE":return pz(e);case"DTSTART":return g2(e);default:throw new Error("Unsupported RFC prop ".concat(n," in ").concat(e))}}function pz(e){var t=e.replace(/^RRULE:/i,""),n=g2(t),r=e.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return r.forEach(function(s){var a=s.split("="),o=a[0],i=a[1];switch(o.toUpperCase()){case"FREQ":n.freq=xn[i.toUpperCase()];break;case"WKST":n.wkst=Ro[i.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var c=qUe(i),u=o.toLowerCase();n[u]=c;break;case"BYWEEKDAY":case"BYDAY":n.byweekday=KUe(i);break;case"DTSTART":case"TZID":var d=g2(e);n.tzid=d.tzid,n.dtstart=d.dtstart;break;case"UNTIL":n.until=EL(i);break;case"BYEASTER":n.byeaster=Number(i);break;default:throw new Error("Unknown RRULE property '"+o+"'")}}),n}function qUe(e){if(e.indexOf(",")!==-1){var t=e.split(",");return t.map(gz)}return gz(e)}function gz(e){return/^[+-]?\d+$/.test(e)?Number(e):e}function KUe(e){var t=e.split(",");return t.map(function(n){if(n.length===2)return Ro[n];var r=n.match(/^([+-]?\d{1,2})([A-Z]{2})$/);if(!r||r.length<3)throw new SyntaxError("Invalid weekday string: ".concat(n));var s=Number(r[1]),a=r[2],o=Ro[a].weekday;return new Vs(o,s)})}var y2=function(){function e(t,n){if(isNaN(t.getTime()))throw new RangeError("Invalid date passed to DateWithZone");this.date=t,this.tzid=n}return Object.defineProperty(e.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!1,configurable:!0}),e.prototype.toString=function(){var t=CL(this.date.getTime(),this.isUTC);return this.isUTC?":".concat(t):";TZID=".concat(this.tzid,":").concat(t)},e.prototype.getTime=function(){return this.date.getTime()},e.prototype.rezonedDate=function(){return this.isUTC?this.date:LUe(this.date,this.tzid)},e}();function $A(e){for(var t=[],n="",r=Object.keys(e),s=Object.keys(TL),a=0;a<r.length;a++)if(r[a]!=="tzid"&&jn(s,r[a])){var o=r[a].toUpperCase(),i=e[r[a]],c="";if(!(!Cr(i)||Da(i)&&!i.length)){switch(o){case"FREQ":c=rt.FREQUENCIES[e.freq];break;case"WKST":xi(i)?c=new Vs(i).toString():c=i.toString();break;case"BYWEEKDAY":o="BYDAY",c=AUe(i).map(function(p){return p instanceof Vs?p:Da(p)?new Vs(p[0],p[1]):new Vs(p)}).toString();break;case"DTSTART":n=YUe(i,e.tzid);break;case"UNTIL":c=CL(i,!e.tzid);break;default:if(Da(i)){for(var u=[],d=0;d<i.length;d++)u[d]=String(i[d]);c=u.toString()}else c=String(i)}c&&t.push([o,c])}}var m=t.map(function(p){var g=p[0],y=p[1];return"".concat(g,"=").concat(y.toString())}).join(";"),h="";return m!==""&&(h="RRULE:".concat(m)),[n,h].filter(function(p){return!!p}).join(`
`)}function YUe(e,t){return e?"DTSTART"+new y2(new Date(e),t).toString():""}function QUe(e,t){return Array.isArray(e)?!Array.isArray(t)||e.length!==t.length?!1:e.every(function(n,r){return n.getTime()===t[r].getTime()}):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():e===t}var XUe=function(){function e(){this.all=!1,this.before=[],this.after=[],this.between=[]}return e.prototype._cacheAdd=function(t,n,r){n&&(n=n instanceof Date?BA(n):dz(n)),t==="all"?this.all=n:(r._value=n,this[t].push(r))},e.prototype._cacheGet=function(t,n){var r=!1,s=n?Object.keys(n):[],a=function(d){for(var m=0;m<s.length;m++){var h=s[m];if(!QUe(n[h],d[h]))return!0}return!1},o=this[t];if(t==="all")r=this.all;else if(Da(o))for(var i=0;i<o.length;i++){var c=o[i];if(!(s.length&&a(c))){r=c._value;break}}if(!r&&this.all){for(var u=new mm(t,n),i=0;i<this.all.length&&u.accept(this.all[i]);i++);r=u.getValue(),this._cacheAdd(t,r,n)}return Da(r)?dz(r):r instanceof Date?BA(r):r},e}(),ZUe=Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge([],vn(1,31),!0),vn(2,28),!0),vn(3,31),!0),vn(4,30),!0),vn(5,31),!0),vn(6,30),!0),vn(7,31),!0),vn(8,31),!0),vn(9,30),!0),vn(10,31),!0),vn(11,30),!0),vn(12,31),!0),vn(1,7),!0),JUe=Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge([],vn(1,31),!0),vn(2,29),!0),vn(3,31),!0),vn(4,30),!0),vn(5,31),!0),vn(6,30),!0),vn(7,31),!0),vn(8,31),!0),vn(9,30),!0),vn(10,31),!0),vn(11,30),!0),vn(12,31),!0),vn(1,7),!0),eBe=ml(1,29),tBe=ml(1,30),qc=ml(1,31),ys=ml(1,32),nBe=Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge([],ys,!0),tBe,!0),ys,!0),qc,!0),ys,!0),qc,!0),ys,!0),ys,!0),qc,!0),ys,!0),qc,!0),ys,!0),ys.slice(0,7),!0),rBe=Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge([],ys,!0),eBe,!0),ys,!0),qc,!0),ys,!0),qc,!0),ys,!0),ys,!0),qc,!0),ys,!0),qc,!0),ys,!0),ys.slice(0,7),!0),sBe=ml(-28,0),aBe=ml(-29,0),Kc=ml(-30,0),vs=ml(-31,0),oBe=Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge([],vs,!0),aBe,!0),vs,!0),Kc,!0),vs,!0),Kc,!0),vs,!0),vs,!0),Kc,!0),vs,!0),Kc,!0),vs,!0),vs.slice(0,7),!0),iBe=Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge(Ge([],vs,!0),sBe,!0),vs,!0),Kc,!0),vs,!0),Kc,!0),vs,!0),vs,!0),Kc,!0),vs,!0),Kc,!0),vs,!0),vs.slice(0,7),!0),lBe=[0,31,60,91,121,152,182,213,244,274,305,335,366],cBe=[0,31,59,90,120,151,181,212,243,273,304,334,365],yz=function(){for(var e=[],t=0;t<55;t++)e=e.concat(ml(7));return e}();function uBe(e,t){var n=Gd(e,1,1),r=Py(e)?366:365,s=Py(e+1)?366:365,a=UA(n),o=gh(n),i=zn(zn({yearlen:r,nextyearlen:s,yearordinal:a,yearweekday:o},dBe(e)),{wnomask:null});if(Ci(t.byweekno))return i;i.wnomask=vn(0,r+7);var c,u,d=c=no(7-o+t.wkst,7);d>=4?(d=0,u=i.yearlen+no(o-t.wkst,7)):u=r-d;for(var m=Math.floor(u/7),h=no(u,7),p=Math.floor(m+h/4),g=0;g<t.byweekno.length;g++){var y=t.byweekno[g];if(y<0&&(y+=p+1),y>0&&y<=p){var v=void 0;y>1?(v=d+(y-1)*7,d!==c&&(v-=7-c)):v=d;for(var x=0;x<7&&(i.wnomask[v]=1,v++,i.wdaymask[v]!==t.wkst);x++);}}if(jn(t.byweekno,1)){var v=d+p*7;if(d!==c&&(v-=7-c),v<r)for(var g=0;g<7&&(i.wnomask[v]=1,v+=1,i.wdaymask[v]!==t.wkst);g++);}if(d){var b=void 0;if(jn(t.byweekno,-1))b=-1;else{var _=gh(Gd(e-1,1,1)),w=no(7-_.valueOf()+t.wkst,7),S=Py(e-1)?366:365,C=void 0;w>=4?(w=0,C=S+no(_-t.wkst,7)):C=r-d,b=Math.floor(52+no(C,7)/4)}if(jn(t.byweekno,b))for(var v=0;v<d;v++)i.wnomask[v]=1}return i}function dBe(e){var t=Py(e)?366:365,n=Gd(e,1,1),r=gh(n);return t===365?{mmask:ZUe,mdaymask:rBe,nmdaymask:iBe,wdaymask:yz.slice(r),mrange:cBe}:{mmask:JUe,mdaymask:nBe,nmdaymask:oBe,wdaymask:yz.slice(r),mrange:lBe}}function fBe(e,t,n,r,s,a){var o={lastyear:e,lastmonth:t,nwdaymask:[]},i=[];if(a.freq===rt.YEARLY)if(Ci(a.bymonth))i=[[0,n]];else for(var c=0;c<a.bymonth.length;c++)t=a.bymonth[c],i.push(r.slice(t-1,t+1));else a.freq===rt.MONTHLY&&(i=[r.slice(t-1,t+1)]);if(Ci(i))return o;o.nwdaymask=vn(0,n);for(var c=0;c<i.length;c++)for(var u=i[c],d=u[0],m=u[1]-1,h=0;h<a.bynweekday.length;h++){var p=void 0,g=a.bynweekday[h],y=g[0],v=g[1];v<0?(p=m+(v+1)*7,p-=no(s[p]-y,7)):(p=d+(v-1)*7,p+=no(7-s[p]+y,7)),d<=p&&p<=m&&(o.nwdaymask[p]=1)}return o}function mBe(e,t){t===void 0&&(t=0);var n=e%19,r=Math.floor(e/100),s=e%100,a=Math.floor(r/4),o=r%4,i=Math.floor((r+8)/25),c=Math.floor((r-i+1)/3),u=Math.floor(19*n+r-a-c+15)%30,d=Math.floor(s/4),m=s%4,h=Math.floor(32+2*o+2*d-u-m)%7,p=Math.floor((n+11*u+22*h)/451),g=Math.floor((u+h-7*p+114)/31),y=(u+h-7*p+114)%31+1,v=Date.UTC(e,g-1,y+t),x=Date.UTC(e,0,1);return[Math.ceil((v-x)/(1e3*60*60*24))]}var hBe=function(){function e(t){this.options=t}return e.prototype.rebuild=function(t,n){var r=this.options;if(t!==this.lastyear&&(this.yearinfo=uBe(t,r)),Wr(r.bynweekday)&&(n!==this.lastmonth||t!==this.lastyear)){var s=this.yearinfo,a=s.yearlen,o=s.mrange,i=s.wdaymask;this.monthinfo=fBe(t,n,a,o,i,r)}Cr(r.byeaster)&&(this.eastermask=mBe(t,r.byeaster))},Object.defineProperty(e.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!1,configurable:!0}),e.prototype.ydayset=function(){return[ml(this.yearlen),0,this.yearlen]},e.prototype.mdayset=function(t,n){for(var r=this.mrange[n-1],s=this.mrange[n],a=vn(null,this.yearlen),o=r;o<s;o++)a[o]=o;return[a,r,s]},e.prototype.wdayset=function(t,n,r){for(var s=vn(null,this.yearlen+7),a=UA(Gd(t,n,r))-this.yearordinal,o=a,i=0;i<7&&(s[a]=a,++a,this.wdaymask[a]!==this.options.wkst);i++);return[s,o,a]},e.prototype.ddayset=function(t,n,r){var s=vn(null,this.yearlen),a=UA(Gd(t,n,r))-this.yearordinal;return s[a]=a,[s,a,a+1]},e.prototype.htimeset=function(t,n,r,s){var a=this,o=[];return this.options.byminute.forEach(function(i){o=o.concat(a.mtimeset(t,i,r,s))}),kv(o),o},e.prototype.mtimeset=function(t,n,r,s){var a=this.options.bysecond.map(function(o){return new p2(t,n,o,s)});return kv(a),a},e.prototype.stimeset=function(t,n,r,s){return[new p2(t,n,r,s)]},e.prototype.getdayset=function(t){switch(t){case xn.YEARLY:return this.ydayset.bind(this);case xn.MONTHLY:return this.mdayset.bind(this);case xn.WEEKLY:return this.wdayset.bind(this);case xn.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},e.prototype.gettimeset=function(t){switch(t){case xn.HOURLY:return this.htimeset.bind(this);case xn.MINUTELY:return this.mtimeset.bind(this);case xn.SECONDLY:return this.stimeset.bind(this)}},e}();function pBe(e,t,n,r,s,a){for(var o=[],i=0;i<e.length;i++){var c=void 0,u=void 0,d=e[i];d<0?(c=Math.floor(d/t.length),u=no(d,t.length)):(c=Math.floor((d-1)/t.length),u=no(d-1,t.length));for(var m=[],h=n;h<r;h++){var p=a[h];Cr(p)&&m.push(p)}var g=void 0;c<0?g=m.slice(c)[0]:g=m[c];var y=t[u],v=Oce(s.yearordinal+g),x=Lce(v,y);jn(o,x)||o.push(x)}return kv(o),o}function Uce(e,t){var n=t.dtstart,r=t.freq,s=t.interval,a=t.until,o=t.bysetpos,i=t.count;if(i===0||s===0)return _l(e);var c=WUe.fromDate(n),u=new hBe(t);u.rebuild(c.year,c.month);for(var d=vBe(u,c,t);;){var m=u.getdayset(r)(c.year,c.month,c.day),h=m[0],p=m[1],g=m[2],y=yBe(h,p,g,u,t);if(Wr(o))for(var v=pBe(o,d,p,g,u,h),x=0;x<v.length;x++){var b=v[x];if(a&&b>a)return _l(e);if(b>=n){var _=vz(b,t);if(!e.accept(_)||i&&(--i,!i))return _l(e)}}else for(var x=p;x<g;x++){var w=h[x];if(Cr(w))for(var S=Oce(u.yearordinal+w),C=0;C<d.length;C++){var E=d[C],b=Lce(S,E);if(a&&b>a)return _l(e);if(b>=n){var _=vz(b,t);if(!e.accept(_)||i&&(--i,!i))return _l(e)}}}if(t.interval===0||(c.add(t,y),c.year>Rce))return _l(e);ML(r)||(d=u.gettimeset(r)(c.hour,c.minute,c.second,0)),u.rebuild(c.year,c.month)}}function gBe(e,t,n){var r=n.bymonth,s=n.byweekno,a=n.byweekday,o=n.byeaster,i=n.bymonthday,c=n.bynmonthday,u=n.byyearday;return Wr(r)&&!jn(r,e.mmask[t])||Wr(s)&&!e.wnomask[t]||Wr(a)&&!jn(a,e.wdaymask[t])||Wr(e.nwdaymask)&&!e.nwdaymask[t]||o!==null&&!jn(e.eastermask,t)||(Wr(i)||Wr(c))&&!jn(i,e.mdaymask[t])&&!jn(c,e.nmdaymask[t])||Wr(u)&&(t<e.yearlen&&!jn(u,t+1)&&!jn(u,-e.yearlen+t)||t>=e.yearlen&&!jn(u,t+1-e.yearlen)&&!jn(u,-e.nextyearlen+t-e.yearlen))}function vz(e,t){return new y2(e,t.tzid).rezonedDate()}function _l(e){return e.getValue()}function yBe(e,t,n,r,s){for(var a=!1,o=t;o<n;o++){var i=e[o];a=gBe(r,i,s),a&&(e[i]=null)}return a}function vBe(e,t,n){var r=n.freq,s=n.byhour,a=n.byminute,o=n.bysecond;return ML(r)?zUe(n):r>=rt.HOURLY&&Wr(s)&&!jn(s,t.hour)||r>=rt.MINUTELY&&Wr(a)&&!jn(a,t.minute)||r>=rt.SECONDLY&&Wr(o)&&!jn(o,t.second)?[]:e.gettimeset(r)(t.hour,t.minute,t.second,t.millisecond)}var Ro={MO:new Vs(0),TU:new Vs(1),WE:new Vs(2),TH:new Vs(3),FR:new Vs(4),SA:new Vs(5),SU:new Vs(6)},TL={freq:xn.YEARLY,dtstart:null,interval:1,wkst:Ro.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},xBe=Object.keys(TL),rt=function(){function e(t,n){t===void 0&&(t={}),n===void 0&&(n=!1),this._cache=n?null:new XUe,this.origOptions=Fce(t);var r=HUe(t).parsedOptions;this.options=r}return e.parseText=function(t,n){return Dce(t,n)},e.fromText=function(t,n){return BUe(t,n)},e.fromString=function(t){return new e(e.parseString(t)||void 0)},e.prototype._iter=function(t){return Uce(t,this.options)},e.prototype._cacheGet=function(t,n){return this._cache?this._cache._cacheGet(t,n):!1},e.prototype._cacheAdd=function(t,n,r){if(this._cache)return this._cache._cacheAdd(t,n,r)},e.prototype.all=function(t){if(t)return this._iter(new mz("all",{},t));var n=this._cacheGet("all");return n===!1&&(n=this._iter(new mm("all",{})),this._cacheAdd("all",n)),n},e.prototype.between=function(t,n,r,s){if(r===void 0&&(r=!1),!ry(t)||!ry(n))throw new Error("Invalid date passed in to RRule.between");var a={before:n,after:t,inc:r};if(s)return this._iter(new mz("between",a,s));var o=this._cacheGet("between",a);return o===!1&&(o=this._iter(new mm("between",a)),this._cacheAdd("between",o,a)),o},e.prototype.before=function(t,n){if(n===void 0&&(n=!1),!ry(t))throw new Error("Invalid date passed in to RRule.before");var r={dt:t,inc:n},s=this._cacheGet("before",r);return s===!1&&(s=this._iter(new mm("before",r)),this._cacheAdd("before",s,r)),s},e.prototype.after=function(t,n){if(n===void 0&&(n=!1),!ry(t))throw new Error("Invalid date passed in to RRule.after");var r={dt:t,inc:n},s=this._cacheGet("after",r);return s===!1&&(s=this._iter(new mm("after",r)),this._cacheAdd("after",s,r)),s},e.prototype.count=function(){return this.all().length},e.prototype.toString=function(){return $A(this.origOptions)},e.prototype.toText=function(t,n,r){return VUe(this,t,n,r)},e.prototype.isFullyConvertibleToText=function(){return $Ue(this)},e.prototype.clone=function(){return new e(this.origOptions)},e.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],e.YEARLY=xn.YEARLY,e.MONTHLY=xn.MONTHLY,e.WEEKLY=xn.WEEKLY,e.DAILY=xn.DAILY,e.HOURLY=xn.HOURLY,e.MINUTELY=xn.MINUTELY,e.SECONDLY=xn.SECONDLY,e.MO=Ro.MO,e.TU=Ro.TU,e.WE=Ro.WE,e.TH=Ro.TH,e.FR=Ro.FR,e.SA=Ro.SA,e.SU=Ro.SU,e.parseString=VA,e.optionsToString=$A,e}();function bBe(e,t,n,r,s,a){var o={},i=e.accept;function c(h,p){n.forEach(function(g){g.between(h,p,!0).forEach(function(y){o[Number(y)]=!0})})}s.forEach(function(h){var p=new y2(h,a).rezonedDate();o[Number(p)]=!0}),e.accept=function(h){var p=Number(h);return isNaN(p)?i.call(this,h):!o[p]&&(c(new Date(p-1),new Date(p+1)),!o[p])?(o[p]=!0,i.call(this,h)):!0},e.method==="between"&&(c(e.args.after,e.args.before),e.accept=function(h){var p=Number(h);return o[p]?!0:(o[p]=!0,i.call(this,h))});for(var u=0;u<r.length;u++){var d=new y2(r[u],a).rezonedDate();if(!e.accept(new Date(d.getTime())))break}t.forEach(function(h){Uce(e,h.options)});var m=e._result;switch(kv(m),e.method){case"all":case"between":return m;case"before":return m.length&&m[m.length-1]||null;case"after":default:return m.length&&m[0]||null}}var xz={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function _Be(e,t){var n=[],r=[],s=[],a=[],o=g2(e),i=o.dtstart,c=o.tzid,u=MBe(e,t.unfold);return u.forEach(function(d){var m;if(d){var h=EBe(d),p=h.name,g=h.parms,y=h.value;switch(p.toUpperCase()){case"RRULE":if(g.length)throw new Error("unsupported RRULE parm: ".concat(g.join(",")));n.push(VA(d));break;case"RDATE":var v=(m=/RDATE(?:;TZID=([^:=]+))?/i.exec(d))!==null&&m!==void 0?m:[],x=v[1];x&&!c&&(c=x),r=r.concat(_z(y,g));break;case"EXRULE":if(g.length)throw new Error("unsupported EXRULE parm: ".concat(g.join(",")));s.push(VA(y));break;case"EXDATE":a=a.concat(_z(y,g));break;case"DTSTART":break;default:throw new Error("unsupported property: "+p)}}}),{dtstart:i,tzid:c,rrulevals:n,rdatevals:r,exrulevals:s,exdatevals:a}}function wBe(e,t){var n=_Be(e,t),r=n.rrulevals,s=n.rdatevals,a=n.exrulevals,o=n.exdatevals,i=n.dtstart,c=n.tzid,u=t.cache===!1;if(t.compatible&&(t.forceset=!0,t.unfold=!0),t.forceset||r.length>1||s.length||a.length||o.length){var d=new kBe(u);return d.dtstart(i),d.tzid(c||void 0),r.forEach(function(h){d.rrule(new rt(iT(h,i,c),u))}),s.forEach(function(h){d.rdate(h)}),a.forEach(function(h){d.exrule(new rt(iT(h,i,c),u))}),o.forEach(function(h){d.exdate(h)}),t.compatible&&t.dtstart&&d.rdate(i),d}var m=r[0]||{};return new rt(iT(m,m.dtstart||t.dtstart||i,m.tzid||t.tzid||c),u)}function bz(e,t){return t===void 0&&(t={}),wBe(e,SBe(t))}function iT(e,t,n){return zn(zn({},e),{dtstart:t,tzid:n})}function SBe(e){var t=[],n=Object.keys(e),r=Object.keys(xz);if(n.forEach(function(s){jn(r,s)||t.push(s)}),t.length)throw new Error("Invalid options: "+t.join(", "));return zn(zn({},xz),e)}function CBe(e){if(e.indexOf(":")===-1)return{name:"RRULE",value:e};var t=PUe(e,":",1),n=t[0],r=t[1];return{name:n,value:r}}function EBe(e){var t=CBe(e),n=t.name,r=t.value,s=n.split(";");if(!s)throw new Error("empty property name");return{name:s[0].toUpperCase(),parms:s.slice(1),value:r}}function MBe(e,t){if(t===void 0&&(t=!1),e=e&&e.trim(),!e)throw new Error("Invalid empty string");if(!t)return e.split(/\s/);for(var n=e.split(`
`),r=0;r<n.length;){var s=n[r]=n[r].replace(/\s+$/g,"");s?r>0&&s[0]===" "?(n[r-1]+=s.slice(1),n.splice(r,1)):r+=1:n.splice(r,1)}return n}function TBe(e){e.forEach(function(t){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(t))throw new Error("unsupported RDATE/EXDATE parm: "+t)})}function _z(e,t){return TBe(t),e.split(",").map(function(n){return EL(n)})}function wz(e){var t=this;return function(n){if(n!==void 0&&(t["_".concat(e)]=n),t["_".concat(e)]!==void 0)return t["_".concat(e)];for(var r=0;r<t._rrule.length;r++){var s=t._rrule[r].origOptions[e];if(s)return s}}}var kBe=function(e){Xj(t,e);function t(n){n===void 0&&(n=!1);var r=e.call(this,{},n)||this;return r.dtstart=wz.apply(r,["dtstart"]),r.tzid=wz.apply(r,["tzid"]),r._rrule=[],r._rdate=[],r._exrule=[],r._exdate=[],r}return t.prototype._iter=function(n){return bBe(n,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},t.prototype.rrule=function(n){Sz(n,this._rrule)},t.prototype.exrule=function(n){Sz(n,this._exrule)},t.prototype.rdate=function(n){Cz(n,this._rdate)},t.prototype.exdate=function(n){Cz(n,this._exdate)},t.prototype.rrules=function(){return this._rrule.map(function(n){return bz(n.toString())})},t.prototype.exrules=function(){return this._exrule.map(function(n){return bz(n.toString())})},t.prototype.rdates=function(){return this._rdate.map(function(n){return new Date(n.getTime())})},t.prototype.exdates=function(){return this._exdate.map(function(n){return new Date(n.getTime())})},t.prototype.valueOf=function(){var n=[];return!this._rrule.length&&this._dtstart&&(n=n.concat($A({dtstart:this._dtstart}))),this._rrule.forEach(function(r){n=n.concat(r.toString().split(`
`))}),this._exrule.forEach(function(r){n=n.concat(r.toString().split(`
`).map(function(s){return s.replace(/^RRULE:/,"EXRULE:")}).filter(function(s){return!/^DTSTART/.test(s)}))}),this._rdate.length&&n.push(Ez("RDATE",this._rdate,this.tzid())),this._exdate.length&&n.push(Ez("EXDATE",this._exdate,this.tzid())),n},t.prototype.toString=function(){return this.valueOf().join(`
`)},t.prototype.clone=function(){var n=new t(!!this._cache);return this._rrule.forEach(function(r){return n.rrule(r.clone())}),this._exrule.forEach(function(r){return n.exrule(r.clone())}),this._rdate.forEach(function(r){return n.rdate(new Date(r.getTime()))}),this._exdate.forEach(function(r){return n.exdate(new Date(r.getTime()))}),n},t}(rt);function Sz(e,t){if(!(e instanceof rt))throw new TypeError(String(e)+" is not RRule instance");jn(t.map(String),String(e))||t.push(e)}function Cz(e,t){if(!(e instanceof Date))throw new TypeError(String(e)+" is not Date instance");jn(t.map(Number),Number(e))||(t.push(e),kv(t))}function Ez(e,t,n){var r=!n||n.toUpperCase()==="UTC",s=r?"".concat(e,":"):"".concat(e,";TZID=").concat(n,":"),a=t.map(function(o){return CL(o.valueOf(),r)}).join(",");return"".concat(s).concat(a)}const NBe=e=>{switch(e.kind){case"ONCE":return new Date(e.year,e.month,e.day,e.hour,e.minute);case"DAILY":return new Date(2e3,0,1,e.hour,e.minute);case"WEEKLY":return new Date(2e3,0,2+e.dayOfWeek,e.hour,e.minute);case"MONTHLY":return new Date(2e3,0,e.day,e.hour,e.minute);case"YEARLY":return new Date(2e3,e.month,e.day,e.hour,e.minute);case"WEEKDAYS":return new Date(2e3,0,1,e.hour,e.minute)}};function kL(e,t){const n=new Date;switch(e.kind){case"ONCE":{const r=new Date(e.year,e.month,e.day,e.hour,e.minute);return r>n?r:n}case"DAILY":return new rt({freq:rt.DAILY,dtstart:new Date(n.getFullYear(),n.getMonth(),n.getDate(),e.hour,e.minute),byhour:e.hour,byminute:e.minute}).after(n)||n;case"WEEKLY":{const r=e.dayOfWeek===0?rt.SU:e.dayOfWeek-1;return new rt({freq:rt.WEEKLY,dtstart:new Date(n.getFullYear(),n.getMonth(),n.getDate(),e.hour,e.minute),byweekday:r,byhour:e.hour,byminute:e.minute}).after(n)||n}case"MONTHLY":return new rt({freq:rt.MONTHLY,dtstart:new Date(n.getFullYear(),n.getMonth(),1,e.hour,e.minute),bymonthday:e.day,byhour:e.hour,byminute:e.minute}).after(n)||n;case"YEARLY":return new rt({freq:rt.YEARLY,dtstart:new Date(n.getFullYear(),0,1,e.hour,e.minute),bymonth:e.month+1,bymonthday:e.day,byhour:e.hour,byminute:e.minute}).after(n)||n;case"WEEKDAYS":return new rt({freq:rt.WEEKLY,dtstart:new Date(n.getFullYear(),n.getMonth(),n.getDate(),e.hour,e.minute),byweekday:[rt.MO,rt.TU,rt.WE,rt.TH,rt.FR],byhour:e.hour,byminute:e.minute}).after(n)||n;default:return n}}function ABe({schedule:e,expiryDate:t,intl:n}){const r=(m,h)=>new Date(2e3,0,1,m,h).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"}),s=m=>{const h=new Date(2e3,0,2+m);return n.formatDate(h,{weekday:"long"})},a=m=>{const h=new Date(2e3,m,1);return n.formatDate(h,{month:"long"})},o=m=>{if(m>=11&&m<=13)return"th";switch(m%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},i=()=>{if(t)return n.formatDate(t,{dateStyle:"medium"})},c=r(e.hour,e.minute);let u;switch(e.kind){case"ONCE":u=n.formatMessage({defaultMessage:"On {date} at {time}",id:"bv0hyO8Sv/"},{date:new Date(e.year,e.month,e.day).toLocaleDateString(),time:c});break;case"DAILY":u=n.formatMessage({defaultMessage:"Daily at {time}",id:"726zmavyTI"},{time:c});break;case"WEEKLY":u=n.formatMessage({defaultMessage:"Weekly on {day} at {time}",id:"5SH2BDqH3d"},{day:s(e.dayOfWeek),time:c});break;case"MONTHLY":u=n.formatMessage({defaultMessage:"Monthly on the {day} at {time}",id:"rPxmQzqpAv"},{day:`${e.day}${o(e.day)}`,time:c});break;case"YEARLY":u=n.formatMessage({defaultMessage:"Yearly on {month} {day} at {time}",id:"II1Soh9YFV"},{month:a(e.month),day:e.day,time:c});break;case"WEEKDAYS":u=n.formatMessage({defaultMessage:"Every weekday at {time}",id:"pzcq2ZSM7J"},{time:c});break;default:Qt(e.kind)}const d=i();if(d){const m=n.formatMessage({defaultMessage:"Expires {date}",id:"/VQpyOVqYe"},{date:d});return`${u}  ${m}`}return u}function PBe(e,t){const n=NBe(e);switch(e.kind){case"ONCE":return t.formatDate(n,{dateStyle:"medium",timeStyle:"short"});case"DAILY":return t.formatTime(n,{timeStyle:"short"});case"WEEKLY":return t.formatDate(n,{weekday:"short",hour:"numeric",minute:"numeric"});case"MONTHLY":return t.formatMessage({defaultMessage:"Day {day}, {time}",id:"grA/MDsLjr"},{day:n.getDate().toString(),time:t.formatTime(n,{timeStyle:"short"})});case"YEARLY":return t.formatDate(n,{hour:"numeric",minute:"numeric",day:"numeric",month:"short"});case"WEEKDAYS":return t.formatTime(n,{timeStyle:"short"})}}const $f=vt({kindOnce:{defaultMessage:"Once",id:"DqTQOpG2Me"},kindDaily:{defaultMessage:"Daily",id:"zxvhnETmn2"},kindWeekly:{defaultMessage:"Weekly",id:"/clOBUs/wZ"},kindWeekdays:{defaultMessage:"Every weekday",id:"8Hjql2wdJG"},kindMonthly:{defaultMessage:"Monthly",id:"wYsv4ZHu+B"},kindYearly:{defaultMessage:"Yearly",id:"dqD39hnoA/"}}),RBe={ONCE:$f.kindOnce,DAILY:$f.kindDaily,WEEKLY:$f.kindWeekly,MONTHLY:$f.kindMonthly,YEARLY:$f.kindYearly,WEEKDAYS:$f.kindWeekdays};function NL(){const e=new Date;return e.setHours(e.getHours()+1,e.getMinutes(),0,0),{kind:"ONCE",minute:e.getMinutes(),hour:e.getHours(),day:e.getDate(),month:e.getMonth(),year:e.getFullYear(),dayOfWeek:e.getDay()}}function IBe(e="",t=fe.PRO,n=["web"]){return{title:"",prompt:e,schedule:NL(),searchModel:t,sources:n,expiryDate:void 0,defaultExpiryDate:Vce(t)}}function jBe(e,t){return t.formatMessage(RBe[e])}const OBe=()=>Intl.DateTimeFormat().resolvedOptions().timeZone;function LBe(e){switch(e.kind){case"ONCE":return new Date(e.year,e.month,e.day,e.hour,e.minute);default:return new Date}}function DBe(e){switch(e.kind){case"ONCE":return"FREQ=DAILY;COUNT=1";case"DAILY":return`FREQ=DAILY;BYHOUR=${e.hour};BYMINUTE=${e.minute}`;case"WEEKLY":return`FREQ=WEEKLY;BYDAY=${["SU","MO","TU","WE","TH","FR","SA"][e.dayOfWeek]};BYHOUR=${e.hour};BYMINUTE=${e.minute}`;case"MONTHLY":return`FREQ=MONTHLY;BYMONTHDAY=${e.day};BYHOUR=${e.hour};BYMINUTE=${e.minute}`;case"YEARLY":return`FREQ=YEARLY;BYMONTH=${e.month+1};BYMONTHDAY=${e.day};BYHOUR=${e.hour};BYMINUTE=${e.minute}`;case"WEEKDAYS":return`FREQ=WEEKLY;BYDAY=MO,TU,WE,TH,FR;BYHOUR=${e.hour};BYMINUTE=${e.minute}`}}function Ry(e){const t=LBe(e);return{start_at:gc(t,"yyyy-MM-dd'T'HH:mm:ss"),rrule:DBe(e),tzid:OBe()}}function Bce(e){if(!(e===null||!e))return gc(e,"yyyy-MM-dd'T'HH:mm:ss")}function v2(e){const t=new Date(e.start_at),n={kind:"ONCE",minute:t.getMinutes(),hour:t.getHours(),day:t.getDate(),month:t.getMonth(),year:t.getFullYear(),dayOfWeek:t.getDay()};if(e.rrule.includes("FREQ=DAILY;COUNT=1"))return n;const r=rt.parseString(e.rrule),s=d=>Array.isArray(d)?d[0]:d,a=s(r.byhour),o=s(r.byminute),i=s(r.bymonth),c=s(r.bymonthday),u=s(r.byweekday);switch(r.freq){case rt.DAILY:return a===void 0||o===void 0?(ee.error("DAILY schedule missing required BYHOUR or BYMINUTE parameter"),{...n}):{...n,kind:"DAILY",hour:a,minute:o};case rt.WEEKLY:{if(u===void 0||a===void 0||o===void 0)return ee.error("WEEKLY schedule missing required parameters"),{...n};if(Array.isArray(r.byweekday)&&r.byweekday.length===5)return{...n,kind:"WEEKDAYS",hour:a,minute:o};const d=u.weekday===6?0:u.weekday+1;return{...n,kind:"WEEKLY",dayOfWeek:d,hour:a,minute:o}}case rt.MONTHLY:return c===void 0||a===void 0||o===void 0?(ee.error("MONTHLY schedule missing required BYMONTHDAY parameter"),{...n}):{...n,kind:"MONTHLY",day:c,hour:a,minute:o};case rt.YEARLY:return i===void 0||c===void 0||a===void 0||o===void 0?(ee.error("YEARLY schedule missing required BYMONTH parameter"),{...n}):{...n,kind:"YEARLY",month:i-1,day:c,hour:a,minute:o}}return ee.error("Invalid task schedule"),{...n}}function FBe({expiryDate:e,schedule:t,defaultExpiryDate:n}){return e===null||!e||!t?e:kL(t)>e?n??null:e}function UBe(e,t){return(e===fe.BETA||e===fe.ALPHA)&&(t.kind==="DAILY"||t.kind==="WEEKLY"||t.kind==="WEEKDAYS")}function Vce(e,t){if(!(!t||!UBe(e,t))&&(e===fe.BETA||e===fe.ALPHA)){const n=kL(t);return(s=>{switch(s){case"DAILY":return cs(n,14);case"WEEKLY":return d2(n,14);case"WEEKDAYS":return cs(n,21);case"ONCE":case"MONTHLY":case"YEARLY":return;default:Qt(s)}})(t.kind)}}const yp={should_send_email:!0,should_send_in_app:!0,should_send_push:!0},$ce=e=>({id:e.task_id,type:BBe(e),createdAt:new Date(e.created_at),updatedAt:new Date(e.updated_at),expiryDate:e.end_at?new Date(e.end_at):void 0,title:e.task_name,prompt:e.task_data.task_prompt,status:e.status,nextRun:new Date(e.next_trigger_intended_time),scheduleInfo:{start_at:e.start_at,rrule:e.trigger_condition_schedule,tzid:e.tzid},subscription:e.event_subscription,searchModel:e.task_data?.task_params?.model_preference||"pplx_pro",sources:e.task_data?.task_params?.sources||["web"],notificationSettings:e.notification_settings||yp}),BBe=e=>{switch(e.scheduler_type){case"EVENT_PUSH":return"ALERT";case"POLL":return"SCHEDULE";case"SHORTCUT":return"SHORTCUT";default:return null}};function VBe({intl:e,triggerType:t}){switch(t){case lt.SCHEDULED:return e.formatMessage({defaultMessage:"Scheduled task",id:"dG8VrMkuAT"});case lt.PRICE_ALERT:return e.formatMessage({defaultMessage:"Price alert",id:"XMapyUiPpV"});case lt.SHORTCUT:return e.formatMessage({defaultMessage:"Shortcut",id:"tceWOrncgz"});default:Qt(t)}}function $Be({intl:e,triggerType:t,actionPerformed:n}){const r=WBe({intl:e,actionPerformed:n});switch(t){case lt.SCHEDULED:return e.formatMessage({defaultMessage:"Task has been {actionDisplayName}",id:"dztI4FIBBf"},{actionDisplayName:r});case lt.PRICE_ALERT:return e.formatMessage({defaultMessage:"Price alert has been {actionDisplayName}",id:"ApBHuTxt1D"},{actionDisplayName:r});case lt.SHORTCUT:return e.formatMessage({defaultMessage:"Shortcut has been {actionDisplayName}",id:"oprPa0O7KY"},{actionDisplayName:r});default:Qt(t)}}function WBe({intl:e,actionPerformed:t}){switch(t){case"created":return e.formatMessage({defaultMessage:"created",id:"lr7wlbGcN2"});case"updated":return e.formatMessage({defaultMessage:"updated",id:"fM7xZh2bri"});case"paused":return e.formatMessage({defaultMessage:"paused",id:"onIpArq3j6"});case"resumed":return e.formatMessage({defaultMessage:"resumed",id:"NUz1enNtoA"});case"deleted":return e.formatMessage({defaultMessage:"deleted",id:"GBLHN+CxXe"});case"copied":return e.formatMessage({defaultMessage:"copied",id:"JZWZSAD5l1"});default:Qt(t)}}const HBe=1e9,Mz=-1e9;function Wce(e){return{trigger:{type:lt.SCHEDULED,schedule:e.schedule},query:{prompt:e.prompt,searchModel:e.searchModel,sources:e.sources??cC()},status:"ACTIVE",notificationSettings:yp}}function Hce({selectedTask:e}){if(!e||e.type===null)return null;switch(e.type){case"SCHEDULE":return{id:e.id,trigger:{type:lt.SCHEDULED,schedule:v2(e.scheduleInfo),expiryDate:e.expiryDate},query:{prompt:e.prompt,searchModel:e.searchModel,sources:e.sources},status:e.status,notificationSettings:e.notificationSettings??yp};case"ALERT":switch(e.subscription?.event_type){case"STOCK_PRICE_TARGET":return{id:e.id,trigger:{type:lt.PRICE_ALERT,alertType:_a.TARGET_PRICE,price:(e.subscription.value_lower_bound??Mz)<0?e.subscription.value_upper_bound??HBe:e.subscription.value_lower_bound??Mz,currency:"usd",symbol:e.subscription.event_entity??""},query:{prompt:e.prompt,searchModel:e.searchModel,sources:e.sources},status:e.status};case"STOCK_PRICE_MOVEMENT":return{id:e.id,trigger:{type:lt.PRICE_ALERT,alertType:_a.MOVEMENT_AMOUNT,percentageDecimalLowerBound:(e.subscription.value_lower_bound??0)/100,percentageDecimalUpperBound:(e.subscription.value_upper_bound??0)/100,symbol:e.subscription.event_entity??""},query:{prompt:e.prompt,searchModel:e.searchModel,sources:e.sources},status:e.status};default:throw new Error("Unhandled subscription.event_type: "+e.subscription?.event_type)}case"SHORTCUT":return{id:e.id,trigger:{type:lt.SHORTCUT,shortcut:e.title},query:{prompt:e.prompt,searchModel:e.searchModel,sources:e.sources},status:e.status};default:Qt(e.type)}}function AL(e=!0){return{trigger:{type:lt.SCHEDULED,schedule:NL()},query:{searchModel:e?fe.PRO:fe.DEFAULT,prompt:"",sources:cC()},status:"ACTIVE",notificationSettings:yp}}function zBe({symbol:e=""}={symbol:""}){return{trigger:{type:lt.PRICE_ALERT,alertType:_a.TARGET_PRICE,price:0,currency:"usd",symbol:e},query:{prompt:"",searchModel:fe.PRO,sources:cC()},status:"ACTIVE"}}function zce(e){if(e.trigger.type!==lt.SCHEDULED)return e;const t=Vce(e.query.searchModel,e.trigger.schedule),n=FBe({expiryDate:e.trigger.expiryDate,schedule:e.trigger.schedule,defaultExpiryDate:t});return e.id?{...e,trigger:{...e.trigger,expiryDate:n}}:{...e,trigger:{...e.trigger,schedule:{...e.trigger.schedule},expiryDate:n,defaultExpiryDate:t}}}function cC(){return["web"]}/*!
 * Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */function GBe(e,t,n){return(t=KBe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Fe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Tz(Object(n),!0).forEach(function(r){GBe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qBe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KBe(e){var t=qBe(e,"string");return typeof t=="symbol"?t:t+""}const kz=()=>{};let PL={},Gce={},qce=null,Kce={mark:kz,measure:kz};try{typeof window<"u"&&(PL=window),typeof document<"u"&&(Gce=document),typeof MutationObserver<"u"&&(qce=MutationObserver),typeof performance<"u"&&(Kce=performance)}catch{}const{userAgent:Nz=""}=PL.navigator||{},gu=PL,qn=Gce,Az=qce,Ux=Kce;gu.document;const vc=!!qn.documentElement&&!!qn.head&&typeof qn.addEventListener=="function"&&typeof qn.createElement=="function",Yce=~Nz.indexOf("MSIE")||~Nz.indexOf("Trident/");var YBe=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,QBe=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,Qce={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},XBe={GROUP:"duotone-group",PRIMARY:"primary",SECONDARY:"secondary"},Xce=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],As="classic",uC="duotone",ZBe="sharp",JBe="sharp-duotone",Zce=[As,uC,ZBe,JBe],eVe={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}},tVe={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}},nVe=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),rVe={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}},sVe=["fak","fa-kit","fakd","fa-kit-duotone"],Pz={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},aVe=["kit"],oVe={kit:{"fa-kit":"fak"}},iVe=["fak","fakd"],lVe={kit:{fak:"fa-kit"}},Rz={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},Bx={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},cVe=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],uVe=["fak","fa-kit","fakd","fa-kit-duotone"],dVe={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},fVe={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}},mVe={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]},WA={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},hVe=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],HA=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt",...cVe,...hVe],pVe=["solid","regular","light","thin","duotone","brands"],Jce=[1,2,3,4,5,6,7,8,9,10],gVe=Jce.concat([11,12,13,14,15,16,17,18,19,20]),yVe=[...Object.keys(mVe),...pVe,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Bx.GROUP,Bx.SWAP_OPACITY,Bx.PRIMARY,Bx.SECONDARY].concat(Jce.map(e=>"".concat(e,"x"))).concat(gVe.map(e=>"w-".concat(e))),vVe={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}};const Zl="___FONT_AWESOME___",zA=16,eue="fa",tue="svg-inline--fa",qd="data-fa-i2svg",GA="data-fa-pseudo-element",xVe="data-fa-pseudo-element-pending",RL="data-prefix",IL="data-icon",Iz="fontawesome-i2svg",bVe="async",_Ve=["HTML","HEAD","STYLE","SCRIPT"],nue=(()=>{try{return!0}catch{return!1}})();function q0(e){return new Proxy(e,{get(t,n){return n in t?t[n]:t[As]}})}const rue=Fe({},Qce);rue[As]=Fe(Fe(Fe(Fe({},{"fa-duotone":"duotone"}),Qce[As]),Pz.kit),Pz["kit-duotone"]);const wVe=q0(rue),qA=Fe({},rVe);qA[As]=Fe(Fe(Fe(Fe({},{duotone:"fad"}),qA[As]),Rz.kit),Rz["kit-duotone"]);const jz=q0(qA),KA=Fe({},WA);KA[As]=Fe(Fe({},KA[As]),lVe.kit);const jL=q0(KA),YA=Fe({},fVe);YA[As]=Fe(Fe({},YA[As]),oVe.kit);q0(YA);const SVe=YBe,sue="fa-layers-text",CVe=QBe,EVe=Fe({},eVe);q0(EVe);const MVe=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],lT=XBe,TVe=[...aVe,...yVe],Iy=gu.FontAwesomeConfig||{};function kVe(e){var t=qn.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}function NVe(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}qn&&typeof qn.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(t=>{let[n,r]=t;const s=NVe(kVe(n));s!=null&&(Iy[r]=s)});const aue={styleDefault:"solid",familyDefault:As,cssPrefix:eue,replacementClass:tue,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Iy.familyPrefix&&(Iy.cssPrefix=Iy.familyPrefix);const yh=Fe(Fe({},aue),Iy);yh.autoReplaceSvg||(yh.observeMutations=!1);const bt={};Object.keys(aue).forEach(e=>{Object.defineProperty(bt,e,{enumerable:!0,set:function(t){yh[e]=t,jy.forEach(n=>n(bt))},get:function(){return yh[e]}})});Object.defineProperty(bt,"familyPrefix",{enumerable:!0,set:function(e){yh.cssPrefix=e,jy.forEach(t=>t(bt))},get:function(){return yh.cssPrefix}});gu.FontAwesomeConfig=bt;const jy=[];function AVe(e){return jy.push(e),()=>{jy.splice(jy.indexOf(e),1)}}const Pc=zA,Ii={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function PVe(e){if(!e||!vc)return;const t=qn.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;const n=qn.head.childNodes;let r=null;for(let s=n.length-1;s>-1;s--){const a=n[s],o=(a.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(r=a)}return qn.head.insertBefore(t,r),e}const RVe="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Nv(){let e=12,t="";for(;e-- >0;)t+=RVe[Math.random()*62|0];return t}function vp(e){const t=[];for(let n=(e||[]).length>>>0;n--;)t[n]=e[n];return t}function OL(e){return e.classList?vp(e.classList):(e.getAttribute("class")||"").split(" ").filter(t=>t)}function oue(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function IVe(e){return Object.keys(e||{}).reduce((t,n)=>t+"".concat(n,'="').concat(oue(e[n]),'" '),"").trim()}function dC(e){return Object.keys(e||{}).reduce((t,n)=>t+"".concat(n,": ").concat(e[n].trim(),";"),"")}function LL(e){return e.size!==Ii.size||e.x!==Ii.x||e.y!==Ii.y||e.rotate!==Ii.rotate||e.flipX||e.flipY}function jVe(e){let{transform:t,containerWidth:n,iconWidth:r}=e;const s={transform:"translate(".concat(n/2," 256)")},a="translate(".concat(t.x*32,", ").concat(t.y*32,") "),o="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),i="rotate(".concat(t.rotate," 0 0)"),c={transform:"".concat(a," ").concat(o," ").concat(i)},u={transform:"translate(".concat(r/2*-1," -256)")};return{outer:s,inner:c,path:u}}function OVe(e){let{transform:t,width:n=zA,height:r=zA,startCentered:s=!1}=e,a="";return s&&Yce?a+="translate(".concat(t.x/Pc-n/2,"em, ").concat(t.y/Pc-r/2,"em) "):s?a+="translate(calc(-50% + ".concat(t.x/Pc,"em), calc(-50% + ").concat(t.y/Pc,"em)) "):a+="translate(".concat(t.x/Pc,"em, ").concat(t.y/Pc,"em) "),a+="scale(".concat(t.size/Pc*(t.flipX?-1:1),", ").concat(t.size/Pc*(t.flipY?-1:1),") "),a+="rotate(".concat(t.rotate,"deg) "),a}var LVe=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}`;function iue(){const e=eue,t=tue,n=bt.cssPrefix,r=bt.replacementClass;let s=LVe;if(n!==e||r!==t){const a=new RegExp("\\.".concat(e,"\\-"),"g"),o=new RegExp("\\--".concat(e,"\\-"),"g"),i=new RegExp("\\.".concat(t),"g");s=s.replace(a,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(i,".".concat(r))}return s}let Oz=!1;function cT(){bt.autoAddCss&&!Oz&&(PVe(iue()),Oz=!0)}var DVe={mixout(){return{dom:{css:iue,insertCss:cT}}},hooks(){return{beforeDOMElementCreation(){cT()},beforeI2svg(){cT()}}}};const Jl=gu||{};Jl[Zl]||(Jl[Zl]={});Jl[Zl].styles||(Jl[Zl].styles={});Jl[Zl].hooks||(Jl[Zl].hooks={});Jl[Zl].shims||(Jl[Zl].shims=[]);var ji=Jl[Zl];const lue=[],cue=function(){qn.removeEventListener("DOMContentLoaded",cue),x2=1,lue.map(e=>e())};let x2=!1;vc&&(x2=(qn.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(qn.readyState),x2||qn.addEventListener("DOMContentLoaded",cue));function FVe(e){vc&&(x2?setTimeout(e,0):lue.push(e))}function K0(e){const{tag:t,attributes:n={},children:r=[]}=e;return typeof e=="string"?oue(e):"<".concat(t," ").concat(IVe(n),">").concat(r.map(K0).join(""),"</").concat(t,">")}function Lz(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}var uT=function(t,n,r,s){var a=Object.keys(t),o=a.length,i=n,c,u,d;for(r===void 0?(c=1,d=t[a[0]]):(c=0,d=r);c<o;c++)u=a[c],d=i(d,t[u],u,t);return d};function UVe(e){const t=[];let n=0;const r=e.length;for(;n<r;){const s=e.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){const a=e.charCodeAt(n++);(a&64512)==56320?t.push(((s&1023)<<10)+(a&1023)+65536):(t.push(s),n--)}else t.push(s)}return t}function QA(e){const t=UVe(e);return t.length===1?t[0].toString(16):null}function BVe(e,t){const n=e.length;let r=e.charCodeAt(t),s;return r>=55296&&r<=56319&&n>t+1&&(s=e.charCodeAt(t+1),s>=56320&&s<=57343)?(r-55296)*1024+s-56320+65536:r}function Dz(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return!!r.icon?t[r.iconName]=r.icon:t[n]=r,t},{})}function XA(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{skipHooks:r=!1}=n,s=Dz(t);typeof ji.hooks.addPack=="function"&&!r?ji.hooks.addPack(e,Dz(t)):ji.styles[e]=Fe(Fe({},ji.styles[e]||{}),s),e==="fas"&&XA("fa",t)}const{styles:Av,shims:VVe}=ji,uue=Object.keys(jL),$Ve=uue.reduce((e,t)=>(e[t]=Object.keys(jL[t]),e),{});let DL=null,due={},fue={},mue={},hue={},pue={};function WVe(e){return~TVe.indexOf(e)}function HVe(e,t){const n=t.split("-"),r=n[0],s=n.slice(1).join("-");return r===e&&s!==""&&!WVe(s)?s:null}const gue=()=>{const e=r=>uT(Av,(s,a,o)=>(s[o]=uT(a,r,{}),s),{});due=e((r,s,a)=>(s[3]&&(r[s[3]]=a),s[2]&&s[2].filter(i=>typeof i=="number").forEach(i=>{r[i.toString(16)]=a}),r)),fue=e((r,s,a)=>(r[a]=a,s[2]&&s[2].filter(i=>typeof i=="string").forEach(i=>{r[i]=a}),r)),pue=e((r,s,a)=>{const o=s[2];return r[a]=a,o.forEach(i=>{r[i]=a}),r});const t="far"in Av||bt.autoFetchSvg,n=uT(VVe,(r,s)=>{const a=s[0];let o=s[1];const i=s[2];return o==="far"&&!t&&(o="fas"),typeof a=="string"&&(r.names[a]={prefix:o,iconName:i}),typeof a=="number"&&(r.unicodes[a.toString(16)]={prefix:o,iconName:i}),r},{names:{},unicodes:{}});mue=n.names,hue=n.unicodes,DL=fC(bt.styleDefault,{family:bt.familyDefault})};AVe(e=>{DL=fC(e.styleDefault,{family:bt.familyDefault})});gue();function FL(e,t){return(due[e]||{})[t]}function zVe(e,t){return(fue[e]||{})[t]}function _d(e,t){return(pue[e]||{})[t]}function yue(e){return mue[e]||{prefix:null,iconName:null}}function GVe(e){const t=hue[e],n=FL("fas",e);return t||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function yu(){return DL}const vue=()=>({prefix:null,iconName:null,rest:[]});function qVe(e){let t=As;const n=uue.reduce((r,s)=>(r[s]="".concat(bt.cssPrefix,"-").concat(s),r),{});return Zce.forEach(r=>{(e.includes(n[r])||e.some(s=>$Ve[r].includes(s)))&&(t=r)}),t}function fC(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{family:n=As}=t,r=wVe[n][e];if(n===uC&&!e)return"fad";const s=jz[n][e]||jz[n][r],a=e in ji.styles?e:null;return s||a||null}function KVe(e){let t=[],n=null;return e.forEach(r=>{const s=HVe(bt.cssPrefix,r);s?n=s:r&&t.push(r)}),{iconName:n,rest:t}}function Fz(e){return e.sort().filter((t,n,r)=>r.indexOf(t)===n)}function mC(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{skipLookups:n=!1}=t;let r=null;const s=HA.concat(uVe),a=Fz(e.filter(m=>s.includes(m))),o=Fz(e.filter(m=>!HA.includes(m))),i=a.filter(m=>(r=m,!Xce.includes(m))),[c=null]=i,u=qVe(a),d=Fe(Fe({},KVe(o)),{},{prefix:fC(c,{family:u})});return Fe(Fe(Fe({},d),ZVe({values:e,family:u,styles:Av,config:bt,canonical:d,givenPrefix:r})),YVe(n,r,d))}function YVe(e,t,n){let{prefix:r,iconName:s}=n;if(e||!r||!s)return{prefix:r,iconName:s};const a=t==="fa"?yue(s):{},o=_d(r,s);return s=a.iconName||o||s,r=a.prefix||r,r==="far"&&!Av.far&&Av.fas&&!bt.autoFetchSvg&&(r="fas"),{prefix:r,iconName:s}}const QVe=Zce.filter(e=>e!==As||e!==uC),XVe=Object.keys(WA).filter(e=>e!==As).map(e=>Object.keys(WA[e])).flat();function ZVe(e){const{values:t,family:n,canonical:r,givenPrefix:s="",styles:a={},config:o={}}=e,i=n===uC,c=t.includes("fa-duotone")||t.includes("fad"),u=o.familyDefault==="duotone",d=r.prefix==="fad"||r.prefix==="fa-duotone";if(!i&&(c||u||d)&&(r.prefix="fad"),(t.includes("fa-brands")||t.includes("fab"))&&(r.prefix="fab"),!r.prefix&&QVe.includes(n)&&(Object.keys(a).find(h=>XVe.includes(h))||o.autoFetchSvg)){const h=nVe.get(n).defaultShortPrefixId;r.prefix=h,r.iconName=_d(r.prefix,r.iconName)||r.iconName}return(r.prefix==="fa"||s==="fa")&&(r.prefix=yu()||"fas"),r}class JVe{constructor(){this.definitions={}}add(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];const s=n.reduce(this._pullDefinitions,{});Object.keys(s).forEach(a=>{this.definitions[a]=Fe(Fe({},this.definitions[a]||{}),s[a]),XA(a,s[a]);const o=jL[As][a];o&&XA(o,s[a]),gue()})}reset(){this.definitions={}}_pullDefinitions(t,n){const r=n.prefix&&n.iconName&&n.icon?{0:n}:n;return Object.keys(r).map(s=>{const{prefix:a,iconName:o,icon:i}=r[s],c=i[2];t[a]||(t[a]={}),c.length>0&&c.forEach(u=>{typeof u=="string"&&(t[a][u]=i)}),t[a][o]=i}),t}}let Uz=[],hm={};const jm={},e$e=Object.keys(jm);function t$e(e,t){let{mixoutsTo:n}=t;return Uz=e,hm={},Object.keys(jm).forEach(r=>{e$e.indexOf(r)===-1&&delete jm[r]}),Uz.forEach(r=>{const s=r.mixout?r.mixout():{};if(Object.keys(s).forEach(a=>{typeof s[a]=="function"&&(n[a]=s[a]),typeof s[a]=="object"&&Object.keys(s[a]).forEach(o=>{n[a]||(n[a]={}),n[a][o]=s[a][o]})}),r.hooks){const a=r.hooks();Object.keys(a).forEach(o=>{hm[o]||(hm[o]=[]),hm[o].push(a[o])})}r.provides&&r.provides(jm)}),n}function ZA(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];return(hm[e]||[]).forEach(o=>{t=o.apply(null,[t,...r])}),t}function Kd(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];(hm[e]||[]).forEach(a=>{a.apply(null,n)})}function vu(){const e=arguments[0],t=Array.prototype.slice.call(arguments,1);return jm[e]?jm[e].apply(null,t):void 0}function JA(e){e.prefix==="fa"&&(e.prefix="fas");let{iconName:t}=e;const n=e.prefix||yu();if(t)return t=_d(n,t)||t,Lz(xue.definitions,n,t)||Lz(ji.styles,n,t)}const xue=new JVe,n$e=()=>{bt.autoReplaceSvg=!1,bt.observeMutations=!1,Kd("noAuto")},r$e={i2svg:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return vc?(Kd("beforeI2svg",e),vu("pseudoElements2svg",e),vu("i2svg",e)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:t}=e;bt.autoReplaceSvg===!1&&(bt.autoReplaceSvg=!0),bt.observeMutations=!0,FVe(()=>{a$e({autoReplaceSvgRoot:t}),Kd("watch",e)})}},s$e={icon:e=>{if(e===null)return null;if(typeof e=="object"&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:_d(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&e.length===2){const t=e[1].indexOf("fa-")===0?e[1].slice(3):e[1],n=fC(e[0]);return{prefix:n,iconName:_d(n,t)||t}}if(typeof e=="string"&&(e.indexOf("".concat(bt.cssPrefix,"-"))>-1||e.match(SVe))){const t=mC(e.split(" "),{skipLookups:!0});return{prefix:t.prefix||yu(),iconName:_d(t.prefix,t.iconName)||t.iconName}}if(typeof e=="string"){const t=yu();return{prefix:t,iconName:_d(t,e)||e}}}},qa={noAuto:n$e,config:bt,dom:r$e,parse:s$e,library:xue,findIconDefinition:JA,toHtml:K0},a$e=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:t=qn}=e;(Object.keys(ji.styles).length>0||bt.autoFetchSvg)&&vc&&bt.autoReplaceSvg&&qa.dom.i2svg({node:t})};function hC(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(n=>K0(n))}}),Object.defineProperty(e,"node",{get:function(){if(!vc)return;const n=qn.createElement("div");return n.innerHTML=e.html,n.children}}),e}function o$e(e){let{children:t,main:n,mask:r,attributes:s,styles:a,transform:o}=e;if(LL(o)&&n.found&&!r.found){const{width:i,height:c}=n,u={x:i/c/2,y:.5};s.style=dC(Fe(Fe({},a),{},{"transform-origin":"".concat(u.x+o.x/16,"em ").concat(u.y+o.y/16,"em")}))}return[{tag:"svg",attributes:s,children:t}]}function i$e(e){let{prefix:t,iconName:n,children:r,attributes:s,symbol:a}=e;const o=a===!0?"".concat(t,"-").concat(bt.cssPrefix,"-").concat(n):a;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Fe(Fe({},s),{},{id:o}),children:r}]}]}function UL(e){const{icons:{main:t,mask:n},prefix:r,iconName:s,transform:a,symbol:o,title:i,maskId:c,titleId:u,extra:d,watchable:m=!1}=e,{width:h,height:p}=n.found?n:t,g=iVe.includes(r),y=[bt.replacementClass,s?"".concat(bt.cssPrefix,"-").concat(s):""].filter(S=>d.classes.indexOf(S)===-1).filter(S=>S!==""||!!S).concat(d.classes).join(" ");let v={children:[],attributes:Fe(Fe({},d.attributes),{},{"data-prefix":r,"data-icon":s,class:y,role:d.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(h," ").concat(p)})};const x=g&&!~d.classes.indexOf("fa-fw")?{width:"".concat(h/p*16*.0625,"em")}:{};m&&(v.attributes[qd]=""),i&&(v.children.push({tag:"title",attributes:{id:v.attributes["aria-labelledby"]||"title-".concat(u||Nv())},children:[i]}),delete v.attributes.title);const b=Fe(Fe({},v),{},{prefix:r,iconName:s,main:t,mask:n,maskId:c,transform:a,symbol:o,styles:Fe(Fe({},x),d.styles)}),{children:_,attributes:w}=n.found&&t.found?vu("generateAbstractMask",b)||{children:[],attributes:{}}:vu("generateAbstractIcon",b)||{children:[],attributes:{}};return b.children=_,b.attributes=w,o?i$e(b):o$e(b)}function Bz(e){const{content:t,width:n,height:r,transform:s,title:a,extra:o,watchable:i=!1}=e,c=Fe(Fe(Fe({},o.attributes),a?{title:a}:{}),{},{class:o.classes.join(" ")});i&&(c[qd]="");const u=Fe({},o.styles);LL(s)&&(u.transform=OVe({transform:s,startCentered:!0,width:n,height:r}),u["-webkit-transform"]=u.transform);const d=dC(u);d.length>0&&(c.style=d);const m=[];return m.push({tag:"span",attributes:c,children:[t]}),a&&m.push({tag:"span",attributes:{class:"sr-only"},children:[a]}),m}function l$e(e){const{content:t,title:n,extra:r}=e,s=Fe(Fe(Fe({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),a=dC(r.styles);a.length>0&&(s.style=a);const o=[];return o.push({tag:"span",attributes:s,children:[t]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}const{styles:dT}=ji;function eP(e){const t=e[0],n=e[1],[r]=e.slice(4);let s=null;return Array.isArray(r)?s={tag:"g",attributes:{class:"".concat(bt.cssPrefix,"-").concat(lT.GROUP)},children:[{tag:"path",attributes:{class:"".concat(bt.cssPrefix,"-").concat(lT.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(bt.cssPrefix,"-").concat(lT.PRIMARY),fill:"currentColor",d:r[1]}}]}:s={tag:"path",attributes:{fill:"currentColor",d:r}},{found:!0,width:t,height:n,icon:s}}const c$e={found:!1,width:512,height:512};function u$e(e,t){!nue&&!bt.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}function tP(e,t){let n=t;return t==="fa"&&bt.styleDefault!==null&&(t=yu()),new Promise((r,s)=>{if(n==="fa"){const a=yue(e)||{};e=a.iconName||e,t=a.prefix||t}if(e&&t&&dT[t]&&dT[t][e]){const a=dT[t][e];return r(eP(a))}u$e(e,t),r(Fe(Fe({},c$e),{},{icon:bt.showMissingIcons&&e?vu("missingIconAbstract")||{}:{}}))})}const Vz=()=>{},nP=bt.measurePerformance&&Ux&&Ux.mark&&Ux.measure?Ux:{mark:Vz,measure:Vz},sy='FA "6.7.1"',d$e=e=>(nP.mark("".concat(sy," ").concat(e," begins")),()=>bue(e)),bue=e=>{nP.mark("".concat(sy," ").concat(e," ends")),nP.measure("".concat(sy," ").concat(e),"".concat(sy," ").concat(e," begins"),"".concat(sy," ").concat(e," ends"))};var BL={begin:d$e,end:bue};const l_=()=>{};function $z(e){return typeof(e.getAttribute?e.getAttribute(qd):null)=="string"}function f$e(e){const t=e.getAttribute?e.getAttribute(RL):null,n=e.getAttribute?e.getAttribute(IL):null;return t&&n}function m$e(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(bt.replacementClass)}function h$e(){return bt.autoReplaceSvg===!0?c_.replace:c_[bt.autoReplaceSvg]||c_.replace}function p$e(e){return qn.createElementNS("http://www.w3.org/2000/svg",e)}function g$e(e){return qn.createElement(e)}function _ue(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{ceFn:n=e.tag==="svg"?p$e:g$e}=t;if(typeof e=="string")return qn.createTextNode(e);const r=n(e.tag);return Object.keys(e.attributes||[]).forEach(function(a){r.setAttribute(a,e.attributes[a])}),(e.children||[]).forEach(function(a){r.appendChild(_ue(a,{ceFn:n}))}),r}function y$e(e){let t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}const c_={replace:function(e){const t=e[0];if(t.parentNode)if(e[1].forEach(n=>{t.parentNode.insertBefore(_ue(n),t)}),t.getAttribute(qd)===null&&bt.keepOriginalSource){let n=qn.createComment(y$e(t));t.parentNode.replaceChild(n,t)}else t.remove()},nest:function(e){const t=e[0],n=e[1];if(~OL(t).indexOf(bt.replacementClass))return c_.replace(e);const r=new RegExp("".concat(bt.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){const a=n[0].attributes.class.split(" ").reduce((o,i)=>(i===bt.replacementClass||i.match(r)?o.toSvg.push(i):o.toNode.push(i),o),{toNode:[],toSvg:[]});n[0].attributes.class=a.toSvg.join(" "),a.toNode.length===0?t.removeAttribute("class"):t.setAttribute("class",a.toNode.join(" "))}const s=n.map(a=>K0(a)).join(`
`);t.setAttribute(qd,""),t.innerHTML=s}};function Wz(e){e()}function wue(e,t){const n=typeof t=="function"?t:l_;if(e.length===0)n();else{let r=Wz;bt.mutateApproach===bVe&&(r=gu.requestAnimationFrame||Wz),r(()=>{const s=h$e(),a=BL.begin("mutate");e.map(s),a(),n()})}}let VL=!1;function Sue(){VL=!0}function rP(){VL=!1}let b2=null;function Hz(e){if(!Az||!bt.observeMutations)return;const{treeCallback:t=l_,nodeCallback:n=l_,pseudoElementsCallback:r=l_,observeMutationsRoot:s=qn}=e;b2=new Az(a=>{if(VL)return;const o=yu();vp(a).forEach(i=>{if(i.type==="childList"&&i.addedNodes.length>0&&!$z(i.addedNodes[0])&&(bt.searchPseudoElements&&r(i.target),t(i.target)),i.type==="attributes"&&i.target.parentNode&&bt.searchPseudoElements&&r(i.target.parentNode),i.type==="attributes"&&$z(i.target)&&~MVe.indexOf(i.attributeName))if(i.attributeName==="class"&&f$e(i.target)){const{prefix:c,iconName:u}=mC(OL(i.target));i.target.setAttribute(RL,c||o),u&&i.target.setAttribute(IL,u)}else m$e(i.target)&&n(i.target)})}),vc&&b2.observe(s,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function v$e(){b2&&b2.disconnect()}function x$e(e){const t=e.getAttribute("style");let n=[];return t&&(n=t.split(";").reduce((r,s)=>{const a=s.split(":"),o=a[0],i=a.slice(1);return o&&i.length>0&&(r[o]=i.join(":").trim()),r},{})),n}function b$e(e){const t=e.getAttribute("data-prefix"),n=e.getAttribute("data-icon"),r=e.innerText!==void 0?e.innerText.trim():"";let s=mC(OL(e));return s.prefix||(s.prefix=yu()),t&&n&&(s.prefix=t,s.iconName=n),s.iconName&&s.prefix||(s.prefix&&r.length>0&&(s.iconName=zVe(s.prefix,e.innerText)||FL(s.prefix,QA(e.innerText))),!s.iconName&&bt.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(s.iconName=e.firstChild.data)),s}function _$e(e){const t=vp(e.attributes).reduce((s,a)=>(s.name!=="class"&&s.name!=="style"&&(s[a.name]=a.value),s),{}),n=e.getAttribute("title"),r=e.getAttribute("data-fa-title-id");return bt.autoA11y&&(n?t["aria-labelledby"]="".concat(bt.replacementClass,"-title-").concat(r||Nv()):(t["aria-hidden"]="true",t.focusable="false")),t}function w$e(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Ii,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function zz(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0};const{iconName:n,prefix:r,rest:s}=b$e(e),a=_$e(e),o=ZA("parseNodeAttributes",{},e);let i=t.styleParser?x$e(e):[];return Fe({iconName:n,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:r,transform:Ii,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:s,styles:i,attributes:a}},o)}const{styles:S$e}=ji;function Cue(e){const t=bt.autoReplaceSvg==="nest"?zz(e,{styleParser:!1}):zz(e);return~t.extra.classes.indexOf(sue)?vu("generateLayersText",e,t):vu("generateSvgReplacementMutation",e,t)}function C$e(){return[...sVe,...HA]}function Gz(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!vc)return Promise.resolve();const n=qn.documentElement.classList,r=d=>n.add("".concat(Iz,"-").concat(d)),s=d=>n.remove("".concat(Iz,"-").concat(d)),a=bt.autoFetchSvg?C$e():Xce.concat(Object.keys(S$e));a.includes("fa")||a.push("fa");const o=[".".concat(sue,":not([").concat(qd,"])")].concat(a.map(d=>".".concat(d,":not([").concat(qd,"])"))).join(", ");if(o.length===0)return Promise.resolve();let i=[];try{i=vp(e.querySelectorAll(o))}catch{}if(i.length>0)r("pending"),s("complete");else return Promise.resolve();const c=BL.begin("onTree"),u=i.reduce((d,m)=>{try{const h=Cue(m);h&&d.push(h)}catch(h){nue||h.name==="MissingIcon"&&console.error(h)}return d},[]);return new Promise((d,m)=>{Promise.all(u).then(h=>{wue(h,()=>{r("active"),r("complete"),s("pending"),typeof t=="function"&&t(),c(),d()})}).catch(h=>{c(),m(h)})})}function E$e(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;Cue(e).then(n=>{n&&wue([n],t)})}function M$e(e){return function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=(t||{}).icon?t:JA(t||{});let{mask:s}=n;return s&&(s=(s||{}).icon?s:JA(s||{})),e(r,Fe(Fe({},n),{},{mask:s}))}}const T$e=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=Ii,symbol:r=!1,mask:s=null,maskId:a=null,title:o=null,titleId:i=null,classes:c=[],attributes:u={},styles:d={}}=t;if(!e)return;const{prefix:m,iconName:h,icon:p}=e;return hC(Fe({type:"icon"},e),()=>(Kd("beforeDOMElementCreation",{iconDefinition:e,params:t}),bt.autoA11y&&(o?u["aria-labelledby"]="".concat(bt.replacementClass,"-title-").concat(i||Nv()):(u["aria-hidden"]="true",u.focusable="false")),UL({icons:{main:eP(p),mask:s?eP(s.icon):{found:!1,width:null,height:null,icon:{}}},prefix:m,iconName:h,transform:Fe(Fe({},Ii),n),symbol:r,title:o,maskId:a,titleId:i,extra:{attributes:u,styles:d,classes:c}})))};var k$e={mixout(){return{icon:M$e(T$e)}},hooks(){return{mutationObserverCallbacks(e){return e.treeCallback=Gz,e.nodeCallback=E$e,e}}},provides(e){e.i2svg=function(t){const{node:n=qn,callback:r=()=>{}}=t;return Gz(n,r)},e.generateSvgReplacementMutation=function(t,n){const{iconName:r,title:s,titleId:a,prefix:o,transform:i,symbol:c,mask:u,maskId:d,extra:m}=n;return new Promise((h,p)=>{Promise.all([tP(r,o),u.iconName?tP(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(g=>{let[y,v]=g;h([t,UL({icons:{main:y,mask:v},prefix:o,iconName:r,transform:i,symbol:c,maskId:d,title:s,titleId:a,extra:m,watchable:!0})])}).catch(p)})},e.generateAbstractIcon=function(t){let{children:n,attributes:r,main:s,transform:a,styles:o}=t;const i=dC(o);i.length>0&&(r.style=i);let c;return LL(a)&&(c=vu("generateAbstractTransformGrouping",{main:s,transform:a,containerWidth:s.width,iconWidth:s.width})),n.push(c||s.icon),{children:n,attributes:r}}}},N$e={mixout(){return{layer(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{classes:n=[]}=t;return hC({type:"layer"},()=>{Kd("beforeDOMElementCreation",{assembler:e,params:t});let r=[];return e(s=>{Array.isArray(s)?s.map(a=>{r=r.concat(a.abstract)}):r=r.concat(s.abstract)}),[{tag:"span",attributes:{class:["".concat(bt.cssPrefix,"-layers"),...n].join(" ")},children:r}]})}}}},A$e={mixout(){return{counter(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{title:n=null,classes:r=[],attributes:s={},styles:a={}}=t;return hC({type:"counter",content:e},()=>(Kd("beforeDOMElementCreation",{content:e,params:t}),l$e({content:e.toString(),title:n,extra:{attributes:s,styles:a,classes:["".concat(bt.cssPrefix,"-layers-counter"),...r]}})))}}}},P$e={mixout(){return{text(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=Ii,title:r=null,classes:s=[],attributes:a={},styles:o={}}=t;return hC({type:"text",content:e},()=>(Kd("beforeDOMElementCreation",{content:e,params:t}),Bz({content:e,transform:Fe(Fe({},Ii),n),title:r,extra:{attributes:a,styles:o,classes:["".concat(bt.cssPrefix,"-layers-text"),...s]}})))}}},provides(e){e.generateLayersText=function(t,n){const{title:r,transform:s,extra:a}=n;let o=null,i=null;if(Yce){const c=parseInt(getComputedStyle(t).fontSize,10),u=t.getBoundingClientRect();o=u.width/c,i=u.height/c}return bt.autoA11y&&!r&&(a.attributes["aria-hidden"]="true"),Promise.resolve([t,Bz({content:t.innerHTML,width:o,height:i,transform:s,title:r,extra:a,watchable:!0})])}}};const R$e=new RegExp('"',"ug"),qz=[1105920,1112319],Kz=Fe(Fe(Fe(Fe({},{FontAwesome:{normal:"fas",400:"fas"}}),tVe),vVe),dVe),sP=Object.keys(Kz).reduce((e,t)=>(e[t.toLowerCase()]=Kz[t],e),{}),I$e=Object.keys(sP).reduce((e,t)=>{const n=sP[t];return e[t]=n[900]||[...Object.entries(n)][0][1],e},{});function j$e(e){const t=e.replace(R$e,""),n=BVe(t,0),r=n>=qz[0]&&n<=qz[1],s=t.length===2?t[0]===t[1]:!1;return{value:QA(s?t[0]:t),isSecondary:r||s}}function O$e(e,t){const n=e.replace(/^['"]|['"]$/g,"").toLowerCase(),r=parseInt(t),s=isNaN(r)?"normal":r;return(sP[n]||{})[s]||I$e[n]}function Yz(e,t){const n="".concat(xVe).concat(t.replace(":","-"));return new Promise((r,s)=>{if(e.getAttribute(n)!==null)return r();const o=vp(e.children).filter(h=>h.getAttribute(GA)===t)[0],i=gu.getComputedStyle(e,t),c=i.getPropertyValue("font-family"),u=c.match(CVe),d=i.getPropertyValue("font-weight"),m=i.getPropertyValue("content");if(o&&!u)return e.removeChild(o),r();if(u&&m!=="none"&&m!==""){const h=i.getPropertyValue("content");let p=O$e(c,d);const{value:g,isSecondary:y}=j$e(h),v=u[0].startsWith("FontAwesome");let x=FL(p,g),b=x;if(v){const _=GVe(g);_.iconName&&_.prefix&&(x=_.iconName,p=_.prefix)}if(x&&!y&&(!o||o.getAttribute(RL)!==p||o.getAttribute(IL)!==b)){e.setAttribute(n,b),o&&e.removeChild(o);const _=w$e(),{extra:w}=_;w.attributes[GA]=t,tP(x,p).then(S=>{const C=UL(Fe(Fe({},_),{},{icons:{main:S,mask:vue()},prefix:p,iconName:b,extra:w,watchable:!0})),E=qn.createElementNS("http://www.w3.org/2000/svg","svg");t==="::before"?e.insertBefore(E,e.firstChild):e.appendChild(E),E.outerHTML=C.map(M=>K0(M)).join(`
`),e.removeAttribute(n),r()}).catch(s)}else r()}else r()})}function L$e(e){return Promise.all([Yz(e,"::before"),Yz(e,"::after")])}function D$e(e){return e.parentNode!==document.head&&!~_Ve.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(GA)&&(!e.parentNode||e.parentNode.tagName!=="svg")}function Qz(e){if(vc)return new Promise((t,n)=>{const r=vp(e.querySelectorAll("*")).filter(D$e).map(L$e),s=BL.begin("searchPseudoElements");Sue(),Promise.all(r).then(()=>{s(),rP(),t()}).catch(()=>{s(),rP(),n()})})}var F$e={hooks(){return{mutationObserverCallbacks(e){return e.pseudoElementsCallback=Qz,e}}},provides(e){e.pseudoElements2svg=function(t){const{node:n=qn}=t;bt.searchPseudoElements&&Qz(n)}}};let Xz=!1;var U$e={mixout(){return{dom:{unwatch(){Sue(),Xz=!0}}}},hooks(){return{bootstrap(){Hz(ZA("mutationObserverCallbacks",{}))},noAuto(){v$e()},watch(e){const{observeMutationsRoot:t}=e;Xz?rP():Hz(ZA("mutationObserverCallbacks",{observeMutationsRoot:t}))}}}};const Zz=e=>{let t={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e.toLowerCase().split(" ").reduce((n,r)=>{const s=r.toLowerCase().split("-"),a=s[0];let o=s.slice(1).join("-");if(a&&o==="h")return n.flipX=!0,n;if(a&&o==="v")return n.flipY=!0,n;if(o=parseFloat(o),isNaN(o))return n;switch(a){case"grow":n.size=n.size+o;break;case"shrink":n.size=n.size-o;break;case"left":n.x=n.x-o;break;case"right":n.x=n.x+o;break;case"up":n.y=n.y-o;break;case"down":n.y=n.y+o;break;case"rotate":n.rotate=n.rotate+o;break}return n},t)};var B$e={mixout(){return{parse:{transform:e=>Zz(e)}}},hooks(){return{parseNodeAttributes(e,t){const n=t.getAttribute("data-fa-transform");return n&&(e.transform=Zz(n)),e}}},provides(e){e.generateAbstractTransformGrouping=function(t){let{main:n,transform:r,containerWidth:s,iconWidth:a}=t;const o={transform:"translate(".concat(s/2," 256)")},i="translate(".concat(r.x*32,", ").concat(r.y*32,") "),c="scale(".concat(r.size/16*(r.flipX?-1:1),", ").concat(r.size/16*(r.flipY?-1:1),") "),u="rotate(".concat(r.rotate," 0 0)"),d={transform:"".concat(i," ").concat(c," ").concat(u)},m={transform:"translate(".concat(a/2*-1," -256)")},h={outer:o,inner:d,path:m};return{tag:"g",attributes:Fe({},h.outer),children:[{tag:"g",attributes:Fe({},h.inner),children:[{tag:n.icon.tag,children:n.icon.children,attributes:Fe(Fe({},n.icon.attributes),h.path)}]}]}}}};const fT={x:0,y:0,width:"100%",height:"100%"};function Jz(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function V$e(e){return e.tag==="g"?e.children:[e]}var $$e={hooks(){return{parseNodeAttributes(e,t){const n=t.getAttribute("data-fa-mask"),r=n?mC(n.split(" ").map(s=>s.trim())):vue();return r.prefix||(r.prefix=yu()),e.mask=r,e.maskId=t.getAttribute("data-fa-mask-id"),e}}},provides(e){e.generateAbstractMask=function(t){let{children:n,attributes:r,main:s,mask:a,maskId:o,transform:i}=t;const{width:c,icon:u}=s,{width:d,icon:m}=a,h=jVe({transform:i,containerWidth:d,iconWidth:c}),p={tag:"rect",attributes:Fe(Fe({},fT),{},{fill:"white"})},g=u.children?{children:u.children.map(Jz)}:{},y={tag:"g",attributes:Fe({},h.inner),children:[Jz(Fe({tag:u.tag,attributes:Fe(Fe({},u.attributes),h.path)},g))]},v={tag:"g",attributes:Fe({},h.outer),children:[y]},x="mask-".concat(o||Nv()),b="clip-".concat(o||Nv()),_={tag:"mask",attributes:Fe(Fe({},fT),{},{id:x,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[p,v]},w={tag:"defs",children:[{tag:"clipPath",attributes:{id:b},children:V$e(m)},_]};return n.push(w,{tag:"rect",attributes:Fe({fill:"currentColor","clip-path":"url(#".concat(b,")"),mask:"url(#".concat(x,")")},fT)}),{children:n,attributes:r}}}},W$e={provides(e){let t=!1;gu.matchMedia&&(t=gu.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){const n=[],r={fill:"currentColor"},s={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};n.push({tag:"path",attributes:Fe(Fe({},r),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const a=Fe(Fe({},s),{},{attributeName:"opacity"}),o={tag:"circle",attributes:Fe(Fe({},r),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||o.children.push({tag:"animate",attributes:Fe(Fe({},s),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Fe(Fe({},a),{},{values:"1;0;1;1;0;1;"})}),n.push(o),n.push({tag:"path",attributes:Fe(Fe({},r),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:Fe(Fe({},a),{},{values:"1;0;0;0;0;1;"})}]}),t||n.push({tag:"path",attributes:Fe(Fe({},r),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Fe(Fe({},a),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:n}}}},H$e={hooks(){return{parseNodeAttributes(e,t){const n=t.getAttribute("data-fa-symbol"),r=n===null?!1:n===""?!0:n;return e.symbol=r,e}}}},z$e=[DVe,k$e,N$e,A$e,P$e,F$e,U$e,B$e,$$e,W$e,H$e];t$e(z$e,{mixoutsTo:qa});qa.noAuto;qa.config;qa.library;qa.dom;const aP=qa.parse;qa.findIconDefinition;qa.toHtml;const G$e=qa.icon;qa.layer;qa.text;qa.counter;var mT={exports:{}},hT,eG;function q$e(){if(eG)return hT;eG=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return hT=e,hT}var pT,tG;function K$e(){if(tG)return pT;tG=1;var e=q$e();function t(){}function n(){}return n.resetWarningCache=t,pT=function(){function r(o,i,c,u,d,m){if(m!==e){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}r.isRequired=r;function s(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:t};return a.PropTypes=a,a},pT}var nG;function $L(){return nG||(nG=1,mT.exports=K$e()()),mT.exports}var Y$e=$L();const we=Ha(Y$e);function rG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Ei(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rG(Object(n),!0).forEach(function(r){pm(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rG(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _2(e){"@babel/helpers - typeof";return _2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_2(e)}function pm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q$e(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function X$e(e,t){if(e==null)return{};var n=Q$e(e,t),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)r=a[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function oP(e){return Z$e(e)||J$e(e)||eWe(e)||tWe()}function Z$e(e){if(Array.isArray(e))return iP(e)}function J$e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function eWe(e,t){if(e){if(typeof e=="string")return iP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iP(e,t)}}function iP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tWe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nWe(e){var t,n=e.beat,r=e.fade,s=e.beatFade,a=e.bounce,o=e.shake,i=e.flash,c=e.spin,u=e.spinPulse,d=e.spinReverse,m=e.pulse,h=e.fixedWidth,p=e.inverse,g=e.border,y=e.listItem,v=e.flip,x=e.size,b=e.rotation,_=e.pull,w=(t={"fa-beat":n,"fa-fade":r,"fa-beat-fade":s,"fa-bounce":a,"fa-shake":o,"fa-flash":i,"fa-spin":c,"fa-spin-reverse":d,"fa-spin-pulse":u,"fa-pulse":m,"fa-fw":h,"fa-inverse":p,"fa-border":g,"fa-li":y,"fa-flip":v===!0,"fa-flip-horizontal":v==="horizontal"||v==="both","fa-flip-vertical":v==="vertical"||v==="both"},pm(t,"fa-".concat(x),typeof x<"u"&&x!==null),pm(t,"fa-rotate-".concat(b),typeof b<"u"&&b!==null&&b!==0),pm(t,"fa-pull-".concat(_),typeof _<"u"&&_!==null),pm(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(w).map(function(S){return w[S]?S:null}).filter(function(S){return S})}function rWe(e){return e=e-0,e===e}function Eue(e){return rWe(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,function(t,n){return n?n.toUpperCase():""}),e.substr(0,1).toLowerCase()+e.substr(1))}var sWe=["style"];function aWe(e){return e.charAt(0).toUpperCase()+e.slice(1)}function oWe(e){return e.split(";").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,n){var r=n.indexOf(":"),s=Eue(n.slice(0,r)),a=n.slice(r+1).trim();return s.startsWith("webkit")?t[aWe(s)]=a:t[s]=a,t},{})}function Mue(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var r=(t.children||[]).map(function(c){return Mue(e,c)}),s=Object.keys(t.attributes||{}).reduce(function(c,u){var d=t.attributes[u];switch(u){case"class":c.attrs.className=d,delete t.attributes.class;break;case"style":c.attrs.style=oWe(d);break;default:u.indexOf("aria-")===0||u.indexOf("data-")===0?c.attrs[u.toLowerCase()]=d:c.attrs[Eue(u)]=d}return c},{attrs:{}}),a=n.style,o=a===void 0?{}:a,i=X$e(n,sWe);return s.attrs.style=Ei(Ei({},s.attrs.style),o),e.apply(void 0,[t.tag,Ei(Ei({},s.attrs),i)].concat(oP(r)))}var Tue=!1;try{Tue=!0}catch{}function iWe(){if(!Tue&&console&&typeof console.error=="function"){var e;(e=console).error.apply(e,arguments)}}function sG(e){if(e&&_2(e)==="object"&&e.prefix&&e.iconName&&e.icon)return e;if(aP.icon)return aP.icon(e);if(e===null)return null;if(e&&_2(e)==="object"&&e.prefix&&e.iconName)return e;if(Array.isArray(e)&&e.length===2)return{prefix:e[0],iconName:e[1]};if(typeof e=="string")return{prefix:"fas",iconName:e}}function gT(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?pm({},e,t):{}}var aG={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},xt=A.forwardRef(function(e,t){var n=Ei(Ei({},aG),e),r=n.icon,s=n.mask,a=n.symbol,o=n.className,i=n.title,c=n.titleId,u=n.maskId,d=sG(r),m=gT("classes",[].concat(oP(nWe(n)),oP((o||"").split(" ")))),h=gT("transform",typeof n.transform=="string"?aP.transform(n.transform):n.transform),p=gT("mask",sG(s)),g=G$e(d,Ei(Ei(Ei(Ei({},m),h),p),{},{symbol:a,title:i,titleId:c,maskId:u}));if(!g)return iWe("Could not find icon",d),null;var y=g.abstract,v={ref:t};return Object.keys(n).forEach(function(x){aG.hasOwnProperty(x)||(v[x]=n[x])}),lWe(y[0],v)});xt.displayName="FontAwesomeIcon";xt.propTypes={beat:we.bool,border:we.bool,beatFade:we.bool,bounce:we.bool,className:we.string,fade:we.bool,flash:we.bool,mask:we.oneOfType([we.object,we.array,we.string]),maskId:we.string,fixedWidth:we.bool,inverse:we.bool,flip:we.oneOf([!0,!1,"horizontal","vertical","both"]),icon:we.oneOfType([we.object,we.array,we.string]),listItem:we.bool,pull:we.oneOf(["right","left"]),pulse:we.bool,rotation:we.oneOf([0,90,180,270]),shake:we.bool,size:we.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:we.bool,spinPulse:we.bool,spinReverse:we.bool,symbol:we.oneOfType([we.bool,we.string]),title:we.string,titleId:we.string,transform:we.oneOfType([we.string,we.object]),swapOpacity:we.bool};var lWe=Mue.bind(null,A.createElement),yT={},oG;function cWe(){return oG||(oG=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="chevron-down",r=512,s=512,a=[],o="f078",i="M239 401c9.4 9.4 24.6 9.4 33.9 0L465 209c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-175 175L81 175c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9L239 401z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faChevronDown=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(yT)),yT}var pC=cWe();const uWe=async(e,t,n,r)=>await dWe({headers:{},reason:"Report Bug",bugText:e,url:t,email:n,category:r}),dWe=async({headers:e,reason:t,bugText:n,url:r,email:s,category:a})=>{try{const o=await ne.POST("/webhooks/slack-web-debugger/web",t,{body:{bug_text:n,url:r,email:s??"",category:a??""},headers:e,timeoutMs:1e4});return o.data?o.data:null}catch(o){return ee.error("Failed to make bug report request",o),null}},fWe=e=>{if(!e.includes("/sidecar/"))return e;const t=new URL(e);return t.searchParams.delete("erp"),t.pathname=t.pathname.replace("/sidecar",""),t.toString()},kue=20,Yd="list_ask_threads",lP=10,Nue=async({paginationParams:e,timeoutMs:t,ascending:n=!1,reason:r})=>{const s=await ne.POST("/rest/thread/list_ask_threads",r,{timeoutMs:t,body:{limit:kue,ascending:n,...e}});if(s.error||!s.data)throw new Error(s.error?.detail?.toString()||"Failed to get user threads");return s.data},Aue=async({thread_uuid:e,format:t,filename:n,reason:r})=>{const s=await ne.POST("/rest/thread/export",r,{body:{thread_uuid:e,format:t,filename:n},timeoutMs:je({productionMs:6e3,clientSideMs:1e4})});if(s.error)throw new Error(s.error.detail?.toString()||"Failed to export thread");return s.data},gC=async(e,t)=>{try{await ne.PUT("/rest/thread/{entry_uuid_or_slug}","remove-thread-expiry",{params:{path:{entry_uuid_or_slug:e}},body:{expired:!1}}),t?.()}catch{throw new Error("Failed to remove thread expiry")}},mWe=({slugOrUUID:e})=>{const t=f.useCallback(async()=>{e&&await gC(e)},[e]);return f.useMemo(()=>({handleRemoveExpiry:t}),[t])},Pue="",Rue="rwTokenStorage",iG=20,Pv=e=>{const t=JSON.stringify(e);try{Ve.setItem(Rue,t)}catch(n){ee.warn("Could not put rw token storage"),ee.warn(n)}},WL=()=>{let e=null;try{e=Ve.getItem(Rue)}catch(t){ee.warn("Could not access local storage"),ee.warn(t)}if(!e)return Pv({}),{};try{return JSON.parse(e)??{}}catch(t){ee.warn("Could not deserialize rw token storage"),ee.warn(t);const n={};return Pv({}),n}},hWe=(e,t)=>{if(!e||!t)return;let n=WL(),r=Object.keys(n);if(r.length>=iG){const s=r[Math.floor(Math.random()*r.length)];s&&delete n[s]}r=Object.keys(n),r.length>iG+5&&(ee.warn("Too many rw tokens stored; resetting"),n={}),n[e]=t,Pv(n)},pWe=e=>e?WL()[e]:void 0,Iue=e=>{const t=e.context_uuid;if(!t)return;const n=pWe(t);if(n)return n;const r=e?.read_write_token;if(r)return hWe(t,r),r},KFt=e=>{if(!e)return;const t=WL();delete t[e],Pv(t)},YFt=()=>{Pv({})},gWe=e=>e?.context_uuid??void 0,yWe=e=>e?.frontend_context_uuid??void 0,vWe=e=>e?.thread_title??Pue,xWe=e=>e?.query_str??void 0,bWe=e=>e?.search_focus??void 0,_We=e=>e.sources?.sources??void 0,wWe=e=>e?.author_id??void 0,SWe=e=>e?.author_username??void 0,CWe=e=>e?.author_image??void 0,EWe=e=>{if(e.parent_info)return e.parent_info},MWe=e=>e?.mode??null,TWe=e=>e?.personalized??void 0,kWe=e=>e?.collection_info??void 0,NWe=e=>e?.bookmark_state??void 0,AWe=e=>e?.thread_access??void 0,PWe=e=>e?.thread_url_slug??void 0,RWe=e=>e?.updated_datetime??void 0,IWe=e=>e?.expiry_time??null,jWe=e=>e?.privacy_state??void 0;function Rv(e,t){const n={};for(const r of e){const s=t(r);Object.prototype.hasOwnProperty.call(n,s)?n[s].push(r):Object.defineProperty(n,s,{value:[r],configurable:!0,enumerable:!0,writable:!0})}return n}const ki={web:"web",scholar:"scholar",social:"social",edgar:"edgar",org:"org",my_files:"my_files",crunchbase:"crunchbase",factset:"factset",google_drive:"google_drive",onedrive:"onedrive",sharepoint:"sharepoint",wiley:"wiley",dropbox:"dropbox",box:"box",notion:"notion",notion_mcp:"notion_mcp",outlook:"outlook",linear:"linear",linear_alt:"linear_alt",slack:"slack",space:"space",gcal:"gcal"},OWe=Object.values(ki),LWe=["linear","linear_alt","slack","notion_mcp"],xp=e=>OWe.includes(e),jue=e=>Array.isArray(e)?e.filter(xp):[],DWe=e=>Array.isArray(e)?e.filter(xp).filter(t=>LWe.includes(t)):[],Oue=e=>e?.entity_group_type!=="CALENDAR_ACTION"&&!!e?.entities?.length,Lue=e=>{const t=!!e?.gauge_familiarity_card_block?.question,n=!!e?.multiple_choice_quiz_card_block?.questions?.length,r=!!e?.flash_card_section_block;return t||n||r};class an{static hasAnswer(t,n){const r=!!(t.chunks&&t.chunks.length>0),s=!!(t.answer&&t.answer.length>0),a=!!t.structured_answer_blocks?.some(u=>u.markdown_block?.chunks?.length||u.entity_list_block?.chunks?.length),o=!!t.structured_answer_blocks?.some(u=>Lue(u.inline_entity_block)),i=!!t.structured_answer_blocks?.some(u=>u.markdown_block?.answer?.length||u.entity_list_block?.text?.length||Oue(u.entity_group_block)),c=!!t.structured_answer_blocks?.some(u=>u.inline_entity_block?.media_block?.generated_media_items?.some(d=>d.status==="COMPLETED"))&&n;return r||s||a||i||c||o}static isPerplexityMessage(t){return t?.blocks!==void 0}static isPerplexityArticleSection(t){return t?.message!==void 0}static isArticleSection(t){return t?.article_info!==void 0}static mergePlaceBlocks(t){const n=t.filter(o=>!!o);if(!n.length)return;const[r,...s]=n;return Object.assign({},r,...s.map(o=>({review_summary:o.review_summary})))}static mergeMediaBlocks(t){const n=t.filter(s=>!!s);return n.length?{media_items:n.flatMap(s=>s?.media_items||[]),generated_media_items:n[n.length-1].generated_media_items||[],progress:n[n.length-1].progress}:void 0}static mergeShoppingBlocks(t){const n=t.filter(o=>!!o);if(!n.length)return;const[r,...s]=n;return Object.assign({},r,...s.map(o=>({review_summary:o.review_summary})))}static mergeEntityListItems(t){const n=Rv(t,s=>s.index),r=[];return Object.values(n).forEach(s=>{const a=s[0];r.push({title:a.title,text:s.map(({text:o})=>o).join(""),chunks:s.flatMap(o=>o.chunks),chunk_starting_offset:0,index:a.index,awaiting_backfill:s.reduce((o,i)=>i.awaiting_backfill??o,!1),place_block:an.mergePlaceBlocks(s.map(o=>o.place_block)),shopping_block:an.mergeShoppingBlocks(s.map(o=>o.shopping_block))})}),r}static parseStructuredAnswerBlocks(t){if(!this.isPerplexityMessage(t)||!t.structured_answer_block_usages?.length)return null;const n=Rv(t.blocks,s=>s.intended_usage),r=[];return t.structured_answer_block_usages.forEach(s=>{const a=n[s];if(!a)return;const{markdownBlocks:o,placeBlocks:i,mediaBlocks:c,shoppingPreviewBlocks:u,entityListBlocks:d,jobsPreviewBlocks:m,hotelsPreviewBlocks:h,placesPreviewBlocks:p,knowledgeCardsBlocks:g,calendarEventBlocks:y,entityGroupBlocks:v,entityGroupV2Blocks:x,assetsPreviewBlocks:b,assetsInlineBlocks:_,shoppingBlocks:w,proPerkOfferBlocks:S,placeholderBlocks:C,financeInlineBlocks:E,gaugeFamiliarityCardBlocks:M,multipleChoiceQuizCardBlocks:T,flashCardSectionBlocks:I}=a.reduce((j,N)=>(N.markdown_block?j.markdownBlocks.push(N.markdown_block):N.inline_entity_block?.place_block?j.placeBlocks.push(N.inline_entity_block.place_block):N.inline_entity_block?.media_block?j.mediaBlocks.push(N.inline_entity_block.media_block):N.inline_entity_block?.shopping_preview_block?j.shoppingPreviewBlocks.push(N.inline_entity_block.shopping_preview_block):N.entity_list_block?j.entityListBlocks.push(N.entity_list_block):N.inline_entity_block?.jobs_preview_block?j.jobsPreviewBlocks.push(N.inline_entity_block.jobs_preview_block):N.inline_entity_block?.hotels_preview_block?j.hotelsPreviewBlocks.push(N.inline_entity_block.hotels_preview_block):N.inline_entity_block?.places_preview_block?j.placesPreviewBlocks.push(N.inline_entity_block.places_preview_block):N.inline_entity_block?.knowledge_card_block?j.knowledgeCardsBlocks.push(N.inline_entity_block.knowledge_card_block):N.inline_entity_block?.calendar_event_block?j.calendarEventBlocks.push(N.inline_entity_block.calendar_event_block):N.entity_group_block?j.entityGroupBlocks.push(N.entity_group_block):N.entity_group_v2_block?j.entityGroupV2Blocks.push(N.entity_group_v2_block):N.inline_entity_block?.assets_preview_block?j.assetsPreviewBlocks.push(N.inline_entity_block.assets_preview_block):N.inline_entity_block?.assets_inline_block?j.assetsInlineBlocks.push(N.inline_entity_block.assets_inline_block):N.inline_entity_block?.shopping_block?j.shoppingBlocks.push(N.inline_entity_block?.shopping_block):N.pro_perk_offer_block?j.proPerkOfferBlocks.push(N.pro_perk_offer_block):N.inline_entity_block?.finance_inline_block?j.financeInlineBlocks.push(N.inline_entity_block.finance_inline_block):N.inline_entity_block?.placeholder_block?j.placeholderBlocks.push(N.inline_entity_block?.placeholder_block):N.inline_entity_block?.gauge_familiarity_card_block?j.gaugeFamiliarityCardBlocks.push(N.inline_entity_block.gauge_familiarity_card_block):N.inline_entity_block?.multiple_choice_quiz_card_block?j.multipleChoiceQuizCardBlocks.push(N.inline_entity_block.multiple_choice_quiz_card_block):N.inline_entity_block?.flash_card_section_block&&j.flashCardSectionBlocks.push(N.inline_entity_block.flash_card_section_block),j),{markdownBlocks:[],placeBlocks:[],mediaBlocks:[],shoppingPreviewBlocks:[],entityListBlocks:[],jobsPreviewBlocks:[],hotelsPreviewBlocks:[],placesPreviewBlocks:[],knowledgeCardsBlocks:[],calendarEventBlocks:[],entityGroupBlocks:[],entityGroupV2Blocks:[],assetsPreviewBlocks:[],assetsInlineBlocks:[],shoppingBlocks:[],proPerkOfferBlocks:[],placeholderBlocks:[],financeInlineBlocks:[],gaugeFamiliarityCardBlocks:[],multipleChoiceQuizCardBlocks:[],flashCardSectionBlocks:[]});if(o.length){const j=o[o.length-1];r.push({intended_usage:s,markdown_block:{answer:o.map(N=>N.answer).join(""),chunks:o.flatMap(N=>N.chunks),chunk_starting_offset:0,progress:j.progress,media_items:o.flatMap(N=>N.media_items||[]),inline_token_annotations:o.flatMap(N=>N.inline_token_annotations||[])}})}if(u.length&&r.push({intended_usage:s,inline_entity_block:{shopping_preview_block:u[u.length-1]}}),m.length&&r.push({intended_usage:s,inline_entity_block:{jobs_preview_block:m[m.length-1]}}),h.length&&r.push({intended_usage:s,inline_entity_block:{hotels_preview_block:h[h.length-1]}}),p.length&&r.push({intended_usage:s,inline_entity_block:{places_preview_block:p[p.length-1]}}),i.length&&r.push({intended_usage:s,inline_entity_block:{place_block:an.mergePlaceBlocks(i)}}),c.length&&r.push({intended_usage:s,inline_entity_block:{media_block:an.mergeMediaBlocks(c)}}),d.length&&r.push({intended_usage:s,entity_list_block:{text:d.map(({text:j})=>j).join(""),chunks:d.flatMap(j=>j.chunks),chunk_starting_offset:0,entities:an.mergeEntityListItems(d.flatMap(j=>j.entities))}}),g.length&&r.push({intended_usage:s,inline_entity_block:{knowledge_card_block:g[g.length-1]}}),y.length&&r.push({intended_usage:s,inline_entity_block:{calendar_event_block:y[y.length-1]}}),v.length&&r.push({intended_usage:s,entity_group_block:{entities:v[v.length-1].entities,entity_group_type:v[v.length-1].entity_group_type}}),x.length){const j=x[x.length-1];r.push({intended_usage:s,entity_group_v2_block:j})}b.length&&r.push({intended_usage:s,inline_entity_block:{assets_preview_block:b[b.length-1]}}),_.length&&r.push({intended_usage:s,inline_entity_block:{assets_inline_block:_[_.length-1]}}),w.length&&r.push({intended_usage:s,inline_entity_block:{shopping_block:this.mergeShoppingBlocks(w)}}),S.length&&r.push({intended_usage:s,pro_perk_offer_block:S[S.length-1]}),E.length&&r.push({intended_usage:s,inline_entity_block:{finance_inline_block:E[E.length-1]}}),C.length&&r.push({intended_usage:s,inline_entity_block:{placeholder_block:C[C.length-1]}}),M.length&&r.push({intended_usage:s,inline_entity_block:{gauge_familiarity_card_block:M[M.length-1]}}),T.length&&r.push({intended_usage:s,inline_entity_block:{multiple_choice_quiz_card_block:T[T.length-1]}}),I.length&&r.push({intended_usage:s,inline_entity_block:{flash_card_section_block:I[I.length-1]}})}),r}static parseAskTextField(t){if(!this.isPerplexityMessage(t))return this.legacyParseBackendOutputStr(t.text);if(!t.blocks?.length)return null;const n={answer:""};n.structured_answer_blocks=an.parseStructuredAnswerBlocks(t);const r=t.blocks?.filter(a=>a.intended_usage==="ask_text"&&a.markdown_block).map(a=>a.markdown_block);if(r.length>0){const a=r.flatMap(o=>o.chunks);n.chunks=a,n.answer=a.join("")}const s=t.blocks?.filter(a=>a.intended_usage==="web_results"&&a.web_result_block).flatMap(a=>a.web_result_block.web_results);return s.length>0&&(n.web_results=s),n}static legacyParseBackendOutputStr(t){let n=null;try{if(n=JSON.parse(t??""),Array.isArray(n)){const r=n[n.length-1];r.step_type=="FINAL"&&r?.content?.answer!=null&&(n=JSON.parse(r.content.answer))}}catch{return null}return n}static isStatusPending(t){return t.status?.toLowerCase()===dr.PENDING.toLowerCase()}static isStatusBlocked(t){return t.status?.toLowerCase()===dr.BLOCKED.toLowerCase()}static isStatusFailed(t){return t.status?.toLowerCase()===dr.FAILED.toLowerCase()}static isStatusCompleted(t){return t.status?.toLowerCase()===dr.COMPLETED.toLowerCase()}static isCopilotMode(t){return t.mode?.toLowerCase()===Pm.COPILOT.toLowerCase()}static isArticleMode(t){return this.isPerplexityMessage(t)?t?.mode===Pm.ARTICLE:this.isPerplexityArticleSection(t)?t?.message?.mode===Pm.ARTICLE:t?.mode==="article"}static isSourceListType(t){return Array.isArray(t)&&t.every(n=>Object.values(ki).includes(n))}static hasUnspecifiedSelectionStatus(t){return t?.selection_status===Lo.SELECTION_STATUS_UNSPECIFIED}static extractClarifyingQuestion(t){if(!t?.length)return null;const n=[];return t.forEach(r=>{if(r.intended_usage==="clarification_responses"&&r?.clarification_responses_block){const s=r.clarification_responses_block?.responses;if(s?.length>0&&s[0]){const a=s[0];a?.input_hint?.hint&&n.push(a.input_hint.hint)}}}),n[0]??null}static extractClarificationResponses(t){if(!t?.length)return null;const n=[];return t.forEach(r=>{r.intended_usage==="pro_search_steps"&&r.plan_block?.steps&&r.plan_block.steps.forEach(s=>{s.clarifying_questions_output_content?.clarification&&n.push(s.clarifying_questions_output_content.clarification)})}),n}}var w2;(function(e){e[e.NONE=0]="NONE",e[e.READER=1]="READER",e[e.WRITER=2]="WRITER",e[e.EDITOR=5]="EDITOR",e[e.ADMIN=3]="ADMIN",e[e.OWNER=4]="OWNER",e[e.OWNER_DEFAULT_BOOKMARKS=6]="OWNER_DEFAULT_BOOKMARKS",e[e.INVITED_READER=11]="INVITED_READER",e[e.INVITED_WRITER=12]="INVITED_WRITER",e[e.INVITED_EDITOR=15]="INVITED_EDITOR",e[e.INVITED_ADMIN=13]="INVITED_ADMIN"})(w2||(w2={}));function FWe(e){return e>=w2.WRITER&&e<w2.INVITED_READER}const Due="CLIENT_SEARCH_PLACEHOLDER",UWe=({rawQuery:e,fork:t,existingEntryUUID:n,existingUuid:r,collection:s,isRelatedQuery:a,newFrontendContextUUID:o,existingFrontendContextUUID:i,submitFromArticleOverride:c,isNavSuggestionsDisabled:u,isCopilot:d,newAttachments:m,firstResultFrontendContextUUID:h,isPersonalized:p,forceNew:g,finalSources:y,finalRecency:v,uuid:x,threadMetadataTitle:b,threadMetadataThreadUrlSlug:_,modelPreferenceSubmit:w,querySource:S,side_by_side_metadata:C})=>{const E=e.trim(),M=d?JSON.stringify([{step_type:"INITIAL_QUERY",content:{query:""},uuid:""}]):m.length>0?JSON.stringify({web_results:m.map(j=>({url:j,is_attachment:!0}))}):null,T=t?{title:c?.article_info?.title??b,url_slug:(c&&"thread_url_slug"in c?c.thread_url_slug:void 0)??_,mode:((c&&"mode"in c?c.mode:void 0)??h)?.toUpperCase()}:void 0,I=s&&FWe(s.user_permission)?s:void 0;return{parent_info:void 0,plan:void 0,summary:void 0,form:void 0,reasoning_plan:void 0,status:"PENDING",final:!1,query_str:E,query_source:S,backend_uuid:g?"":n??"",bookmark_state:s?"BOOKMARKED":"NOT_BOOKMARKED",context_uuid:"",frontend_context_uuid:i??o??"",uuid:r??x,frontend_uuid:r??x,...t?{parent_info:T}:{},author_username:void 0,author_image:void 0,search_focus:y.length===0?"writing":"internet",search_recency_filter:v??void 0,sources:{sources:y},num_sources_display:void 0,personalized:p,attachments:m,blocks:[],social_info:{like_count:0,view_count:0,fork_count:0,user_likes:!1},mode:d?"COPILOT":"CONCISE",text:M??void 0,collection_info:I,is_related_query_result:a??!1,related_queries:[],media_items:[],widget_data:[],widget_intents:[],knowledge_cards:[],sponsored_results:[],expect_sponsored_results:!1,related_query_items:[],sources_list:[],answer_modes:[],is_nav_suggestions_disabled:u,structured_answer_block_usages:[],display_model:w,model_preference:w,side_by_side_metadata:C}},HL="DEFAULT_SEARCH_PLACEHOLDER",BWe=(e={})=>{const t=e.uuid??e.frontend_uuid??ar();return{status:"PENDING",parent_info:void 0,query_str:"",backend_uuid:HL,author_username:void 0,author_image:void 0,search_focus:"internet",display_model:"turbo",personalized:!1,attachments:[],social_info:{like_count:0,view_count:0,fork_count:0,user_likes:!1},text:void 0,collection_info:void 0,image_completions:[],is_related_query_result:!1,final:!1,sources:{sources:["web"]},should_index:!1,updated_datetime:new Date().toISOString(),thread_access:0,thread_url_slug:"",expiry_time:void 0,privacy_state:void 0,context_uuid:"",related_queries:[],media_items:[],widget_data:[],blocks:[],message_mode:"MESSAGE_MODE_UNSPECIFIED",widget_intents:[],knowledge_cards:[],sponsored_results:[],plan:void 0,reasoning_plan:void 0,summary:void 0,form:void 0,sources_list:[],related_query_items:[],answer_modes:[],structured_answer_block_usages:[],...e,frontend_context_uuid:e.frontend_context_uuid??ar(),frontend_uuid:t,uuid:t,attachment_processing_progress:[]}};/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var VWe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)s.hasOwnProperty(a)&&(r[a]=s[a])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),$We=Object.prototype.hasOwnProperty;function cP(e,t){return $We.call(e,t)}function uP(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var s in e)cP(e,s)&&r.push(s);return r}function Fa(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function dP(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function ud(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function Fue(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function fP(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(fP(e[t]))return!0}else if(typeof e=="object"){for(var r=uP(e),s=r.length,a=0;a<s;a++)if(fP(e[r[a]]))return!0}}return!1}function lG(e,t){var n=[e];for(var r in t){var s=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof s<"u"&&n.push(r+": "+s)}return n.join(`
`)}var Uue=function(e){VWe(t,e);function t(n,r,s,a,o){var i=this.constructor,c=e.call(this,lG(n,{name:r,index:s,operation:a,tree:o}))||this;return c.name=r,c.index=s,c.operation=a,c.tree=o,Object.setPrototypeOf(c,i.prototype),c.message=lG(n,{name:r,index:s,operation:a,tree:o}),c}return t}(Error),ur=Uue,WWe=Fa,gm={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=S2(n,this.path);r&&(r=Fa(r));var s=Ad(n,{op:"remove",path:this.from}).removed;return Ad(n,{op:"add",path:this.path,value:s}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=S2(n,this.from);return Ad(n,{op:"add",path:this.path,value:Fa(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:Iv(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},HWe={add:function(e,t,n){return dP(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:gm.move,copy:gm.copy,test:gm.test,_get:gm._get};function S2(e,t){if(t=="")return e;var n={op:"_get",path:t};return Ad(e,n),n.value}function Ad(e,t,n,r,s,a){if(n===void 0&&(n=!1),r===void 0&&(r=!0),s===void 0&&(s=!0),a===void 0&&(a=0),n&&(typeof n=="function"?n(t,0,e,t.path):C2(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=S2(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=Iv(e,t.value),o.test===!1)throw new ur("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new ur("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,t,e);return o}}else{r||(e=Fa(e));var i=t.path||"",c=i.split("/"),u=e,d=1,m=c.length,h=void 0,p=void 0,g=void 0;for(typeof n=="function"?g=n:g=C2;;){if(p=c[d],p&&p.indexOf("~")!=-1&&(p=Fue(p)),s&&(p=="__proto__"||p=="prototype"&&d>0&&c[d-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&h===void 0&&(u[p]===void 0?h=c.slice(0,d).join("/"):d==m-1&&(h=t.path),h!==void 0&&g(t,0,e,h)),d++,Array.isArray(u)){if(p==="-")p=u.length;else{if(n&&!dP(p))throw new ur("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,t,e);dP(p)&&(p=~~p)}if(d>=m){if(n&&t.op==="add"&&p>u.length)throw new ur("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,t,e);var o=HWe[t.op].call(t,u,p,e);if(o.test===!1)throw new ur("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return o}}else if(d>=m){var o=gm[t.op].call(t,u,p,e);if(o.test===!1)throw new ur("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return o}if(u=u[p],n&&d<m&&(!u||typeof u!="object"))throw new ur("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",a,t,e)}}}function yC(e,t,n,r,s){if(r===void 0&&(r=!0),s===void 0&&(s=!0),n&&!Array.isArray(t))throw new ur("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Fa(e));for(var a=new Array(t.length),o=0,i=t.length;o<i;o++)a[o]=Ad(e,t[o],n,!0,s,o),e=a[o].newDocument;return a.newDocument=e,a}function zWe(e,t,n){var r=Ad(e,t);if(r.test===!1)throw new ur("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function C2(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new ur("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(gm[e.op]){if(typeof e.path!="string")throw new ur("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new ur('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new ur("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new ur("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&fP(e.value))throw new ur("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var s=e.path.split("/").length,a=r.split("/").length;if(s!==a+1&&s!==a)throw new ur("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new ur("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},i=Bue([o],n);if(i&&i.name==="OPERATION_PATH_UNRESOLVABLE")throw new ur("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new ur("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function Bue(e,t,n){try{if(!Array.isArray(e))throw new ur("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)yC(Fa(t),Fa(e),n||!0);else{n=n||C2;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(s){if(s instanceof ur)return s;throw s}}function Iv(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),s,a,o;if(n&&r){if(a=e.length,a!=t.length)return!1;for(s=a;s--!==0;)if(!Iv(e[s],t[s]))return!1;return!0}if(n!=r)return!1;var i=Object.keys(e);if(a=i.length,a!==Object.keys(t).length)return!1;for(s=a;s--!==0;)if(!t.hasOwnProperty(i[s]))return!1;for(s=a;s--!==0;)if(o=i[s],!Iv(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const GWe=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:ur,_areEquals:Iv,applyOperation:Ad,applyPatch:yC,applyReducer:zWe,deepClone:WWe,getValueByPointer:S2,validate:Bue,validator:C2},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var zL=new WeakMap,qWe=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),KWe=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function YWe(e){return zL.get(e)}function QWe(e,t){return e.observers.get(t)}function XWe(e,t){e.observers.delete(t.callback)}function ZWe(e,t){t.unobserve()}function JWe(e,t){var n=[],r,s=YWe(e);if(!s)s=new qWe(e),zL.set(e,s);else{var a=QWe(s,t);r=a&&a.observer}if(r)return r;if(r={},s.value=Fa(e),t){r.callback=t,r.next=null;var o=function(){mP(r)},i=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",i),window.addEventListener("keyup",i),window.addEventListener("mousedown",i),window.addEventListener("keydown",i),window.addEventListener("change",i))}return r.patches=n,r.object=e,r.unobserve=function(){mP(r),clearTimeout(r.next),XWe(s,r),typeof window<"u"&&(window.removeEventListener("mouseup",i),window.removeEventListener("keyup",i),window.removeEventListener("mousedown",i),window.removeEventListener("keydown",i),window.removeEventListener("change",i))},s.observers.set(t,new KWe(t,r)),r}function mP(e,t){t===void 0&&(t=!1);var n=zL.get(e.object);GL(n.value,e.object,e.patches,"",t),e.patches.length&&yC(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function GL(e,t,n,r,s){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var a=uP(t),o=uP(e),i=!1,c=o.length-1;c>=0;c--){var u=o[c],d=e[u];if(cP(t,u)&&!(t[u]===void 0&&d!==void 0&&Array.isArray(t)===!1)){var m=t[u];typeof d=="object"&&d!=null&&typeof m=="object"&&m!=null&&Array.isArray(d)===Array.isArray(m)?GL(d,m,n,r+"/"+ud(u),s):d!==m&&(s&&n.push({op:"test",path:r+"/"+ud(u),value:Fa(d)}),n.push({op:"replace",path:r+"/"+ud(u),value:Fa(m)}))}else Array.isArray(e)===Array.isArray(t)?(s&&n.push({op:"test",path:r+"/"+ud(u),value:Fa(d)}),n.push({op:"remove",path:r+"/"+ud(u)}),i=!0):(s&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!i&&a.length==o.length))for(var c=0;c<a.length;c++){var u=a[c];!cP(e,u)&&t[u]!==void 0&&n.push({op:"add",path:r+"/"+ud(u),value:Fa(t[u])})}}}function eHe(e,t,n){n===void 0&&(n=!1);var r=[];return GL(e,t,r,"",n),r}const tHe=Object.freeze(Object.defineProperty({__proto__:null,compare:eHe,generate:mP,observe:JWe,unobserve:ZWe},Symbol.toStringTag,{value:"Module"}));Object.assign({},GWe,tHe,{JsonPatchError:Uue,deepClone:Fa,escapePathComponent:ud,unescapePathComponent:Fue});function nHe(e,t){const n=new Map(e.map(r=>[r.intended_usage,r]));for(const r of t)if(r.diff_block){const s=r.diff_block.field,a=n.get(r.intended_usage)?.[s]??{},o=yC(a,r.diff_block.patches,!1,!1).newDocument;n.set(r.intended_usage,{intended_usage:r.intended_usage,[s]:o})}else n.set(r.intended_usage,r);return Array.from(n.values())}let Vue=()=>({emit(e,...t){for(let n=this.events[e]||[],r=0,s=n.length;r<s;r++)n[r](...t)},events:{},on(e,t){return(this.events[e]||=[]).push(t),()=>{this.events[e]=this.events[e]?.filter(n=>t!==n)}}});const Br=Vue();function rHe(e,t){return e.reduce((n,r)=>r(n),t)}const sHe=e=>e&&l4e(e,t=>t!=null);function hP(e){return e?!e.resume_entry_uuid:!1}function aHe(e,t){const n={minuteCount:0,hourCount:0,minuteWindow:Math.floor(Date.now()/6e4),hourWindow:Math.floor(Date.now()/36e5)};return async(...r)=>{const s=Date.now(),a=Math.floor(s/(60*1e3)),o=Math.floor(s/(60*60*1e3));return a!==n.minuteWindow&&(n.minuteCount=0,n.minuteWindow=a),o!==n.hourWindow&&(n.hourCount=0,n.hourWindow=o),n.minuteCount>=t.perMinute?{allowed:!1}:n.hourCount>=t.perHour?{allowed:!1}:(n.minuteCount++,n.hourCount++,{allowed:!0,result:await e(...r)})}}const oHe=Symbol(),$ue=Symbol(),ay="a",Wue="f",cG="p",Hue="c",zue="t",Gue="h",u_="w",que="o",Kue="k";let iHe=(e,t)=>new Proxy(e,t);const pP=Object.getPrototypeOf,uG=new WeakMap,lHe=e=>e&&(uG.has(e)?uG.get(e):pP(e)===Object.prototype||pP(e)===Array.prototype),dG=e=>typeof e=="object"&&e!==null,cHe=e=>Object.values(Object.getOwnPropertyDescriptors(e)).some(t=>!t.configurable&&!t.writable),uHe=e=>{if(Array.isArray(e))return Array.from(e);const t=Object.getOwnPropertyDescriptors(e);return Object.values(t).forEach(n=>{n.configurable=!0}),Object.create(pP(e),t)},dHe=(e,t)=>{const n={[Wue]:t};let r=!1;const s=(i,c)=>{if(!r){let u=n[ay].get(e);if(u||(u={},n[ay].set(e,u)),i===u_)u[u_]=!0;else{let d=u[i];d||(d=new Set,u[i]=d),d.add(c)}}},a=()=>{r=!0,n[ay].delete(e)},o={get(i,c){return c===$ue?e:(s(Kue,c),Que(Reflect.get(i,c),n[ay],n[Hue],n[zue]))},has(i,c){return c===oHe?(a(),!0):(s(Gue,c),Reflect.has(i,c))},getOwnPropertyDescriptor(i,c){return s(que,c),Reflect.getOwnPropertyDescriptor(i,c)},ownKeys(i){return s(u_),Reflect.ownKeys(i)}};return t&&(o.set=o.deleteProperty=()=>!1),[o,n]},Yue=e=>e[$ue]||e,Que=(e,t,n,r)=>{if(!lHe(e))return e;let s=r&&r.get(e);if(!s){const c=Yue(e);cHe(c)?s=[c,uHe(c)]:s=[c],r?.set(e,s)}const[a,o]=s;let i=n&&n.get(a);return(!i||i[1][Wue]!==!!o)&&(i=dHe(a,!!o),i[1][cG]=iHe(o||a,i[0]),n&&n.set(a,i)),i[1][ay]=t,i[1][Hue]=n,i[1][zue]=r,i[1][cG]},fHe=(e,t)=>{const n=Reflect.ownKeys(e),r=Reflect.ownKeys(t);return n.length!==r.length||n.some((s,a)=>s!==r[a])},gP=(e,t,n,r,s=Object.is)=>{if(s(e,t))return!1;if(!dG(e)||!dG(t))return!0;const a=n.get(Yue(e));if(!a)return!0;if(r){if(r.get(e)===t)return!1;r.set(e,t)}let o=null;for(const i of a[Gue]||[])if(o=Reflect.has(e,i)!==Reflect.has(t,i),o)return o;if(a[u_]===!0){if(o=fHe(e,t),o)return o}else for(const i of a[que]||[]){const c=!!Reflect.getOwnPropertyDescriptor(e,i),u=!!Reflect.getOwnPropertyDescriptor(t,i);if(o=c!==u,o)return o}for(const i of a[Kue]||[])if(o=gP(e[i],t[i],n,r,s),o)return o;if(o===null)throw new Error("invalid used");return o},mHe=e=>()=>{const[,n]=f.useReducer(u=>u+1,0),r=f.useMemo(()=>new WeakMap,[]),s=f.useRef(),a=f.useRef();f.useEffect(()=>{s.current!==a.current&&gP(s.current,a.current,r,new WeakMap)&&(s.current=a.current,n())});const o=f.useCallback(u=>(a.current=u,s.current&&s.current!==u&&!gP(s.current,u,r,new WeakMap)?s.current:(s.current=u,u)),[r]),i=e(o),c=f.useMemo(()=>new WeakMap,[]);return Que(i,r,c)};function Y0(e){const t=A.createContext(null),{useSelector:n,useStore:r,useTrackedState:s}=Xue(t,e);return{Context:t,useSelector:n,useStore:r,useTrackedState:s}}function Xue(e,t){const n=()=>{const a=A.useContext(e);if(!a)throw new Error(`This hook must be used within ${t}.Provider`);return a},r=a=>n()(a),s=mHe(r);return{useSelector:r,useStore:n,useTrackedState:s}}const bp=(e,t)=>{const n=A.createContext(null),r=i=>{const[c]=A.useState(()=>i.initialValue?t(i?.initialValue):t(void 0));return l.jsx(n.Provider,{value:c,children:i.children})},{useSelector:s,useStore:a,useTrackedState:o}=Xue(n,e);return{useSelector:s,useStore:a,useTrackedState:o,Context:n,Provider:r}},hHe="2.18",yP=Object.freeze([]);function Om(e,t){return t?e.streams[t]:void 0}function qL(e,t){const n=Object.values(e.streams),r=n.length;for(let s=r-1;s>=0;s--){const a=n[s];if(a.entryId===t&&e.activeStreams.includes(a.id.description))return a}}function pHe(e,t){const n=Object.values(e.streams),r=n.length;for(let s=r-1;s>=0;s--){const a=n[s];if(a.threadId===t&&e.activeStreams.includes(a.id.description))return a}}const Zue=5,gHe=100,fG=1e3;function vT(e,t,n){const r=rHe(e.middlewares,n);if(!r)return{newState:e};const s=Om(e,t);if(!s||!e.activeStreams.includes(t))return{newState:e};const a=r.context_uuid,o=r.backend_uuid,i=r.uuid,u=!!!(s.entryId&&s.isReconnect&&e.erroredStreams[s.entryId])&&(!s.threadId||!s.entryId);if(o===HL||o===Due)return{newState:{streams:{...e.streams,[t]:{...s,placeholderChunk:r}}}};if(r.status===dr.PENDING&&r.blocks?.length===0||r.status===dr.RESUMING)return{newState:{...vP(e,r,{isFirstMessage:u,placeholderChunk:s.placeholderChunk,streamId:s.id.description}),streams:{...e.streams,[t]:{...s,threadId:r.context_uuid,entryId:o,extraEntryId:i,placeholderChunk:r}}},ingested:r};if(!a||!o)return{newState:e};let d=s;return u&&(d={...s,threadId:a,entryId:o,extraEntryId:i}),{newState:{...vP(e,r,{isFirstMessage:u,placeholderChunk:s.placeholderChunk,streamId:s.id.description}),streams:{...e.streams,[t]:d}},ingested:r}}function vP(e,t,{isFirstMessage:n,placeholderChunk:r,streamId:s}){const a=t.context_uuid,o=t.backend_uuid,i=Array.from(e.threads),c={...e.entries};if(i.length>=gHe){const m=i.shift();if(m)for(const h of m.entryIds)delete c[h]}const u=i.findIndex(m=>m.id===a),d=i[u];if(d?d.entryIds.includes(o)||(i[u]={...d,entryIds:[...d.entryIds,o]}):i.push({id:a,entryIds:[o]}),t.status===dr.COMPLETED)c[o]=t;else if(t.blocks){let m=c[o];m&&m.uuid!==t.uuid?m=r:m||(m=r);const h=m?.frontend_context_uuid??t.frontend_context_uuid??s,p=m?.frontend_uuid??t.frontend_uuid??s,g=m?.query_str??t.query_str,y=m?.connector_auth_info!=null&&!("connector_auth_info"in t)&&!n,v={...m??{},...t,frontend_context_uuid:h,frontend_uuid:p,query_str:g,...y&&{connector_auth_info:void 0},blocks:nHe(n?yP:m?.blocks??yP,t.blocks)};c[o]=v}return{threads:i,entries:c}}function yHe(e,t,n){ee.error("Error in reading stream",n);const r=Om(e,t);if(!r)return e;const s=r?.entryId;if(!s)return e;const a={...e.entries[s],status:dr.FAILED},{promise:o,abortController:i,...c}=r;return{erroredStreams:{...e.erroredStreams,[s]:{...c,code:n instanceof O6?n.code:void 0}},entries:{...e.entries,[s]:a}}}const mG=Object.freeze([sHe]);function vHe(e,t){const n=Om(e,t);if(!n)return;const r=e.threads.find(s=>s.id===n.threadId);Br.emit("completed",{stream:n,thread:(r?.entryIds.map(s=>e.entries[s])??yP).filter(s=>s!=null),message:n.entryId?e.entries[n.entryId]:void 0})}const xHe=(e,t)=>({threads:[],entries:{},activeStreams:[],erroredStreams:{},middlewares:mG,streamTimers:{},streams:{},actions:{abortStream:n=>{e(r=>{let s=r.activeStreams;const a=Om(r,n);if(a){try{a.abortController?.abort("Forced abort")}catch(o){ee.error("Failed to abort stream",o)}finally{s=s.filter(o=>o!==n)}return{activeStreams:s,streams:{...r.streams,[n]:{...a,promise:null,abortController:null}}}}return r},void 0,"abortStream")},getEntryById:n=>t().entries[n],createStream:n=>t().actions.createBackwardsCompatibleStream(n,{reason:"create-stream",timer:Wl(void 0,{nowFromTimeOrigin:performance.now()})}).id,retryStream:n=>{const r=t().entries[n];if(!r)return;const s=t().erroredStreams[n];if(!s)return;const a=s.placeholderChunk?.query_str;if(a){if(e(o=>{const{entries:i,threads:c}=o,{[n]:u,...d}=i,m=Array.from(c),h=c.findIndex(p=>p.entryIds.includes(n));return m.splice(h,1,{id:m[h].id,entryIds:m[h].entryIds}),{threads:m,entries:d}}),!hP(s.params))throw new Error("Stream params are not SubmitParams so cannot retry");return t().actions.createBackwardsCompatibleStream({query_str:a,params:{...s.params,existing_entry_uuid:n,query_source:"retry",frontend_context_uuid:r.frontend_context_uuid}},{placeholderChunk:s.placeholderChunk,timer:Wl(void 0,{nowFromTimeOrigin:performance.now()}),reason:"retry-stream"})}},reconnectStream:n=>{const r=qL(t(),n);if(r&&r.promise&&r.abortController&&!r.abortController.signal.aborted)return r.id;const s=t().entries[n],a=s?.cursor,o=t().actions.createBackwardsCompatibleStream({query_str:"",params:{resume_entry_uuid:n,cursor:a}},{isReconnect:!0,timer:Wl(void 0,{nowFromTimeOrigin:performance.now()}),reason:"reconnect-stream"});return e(i=>vT(i,o.id.description,{...s,status:dr.PENDING}).newState,void 0,"ingestPlaceholderChunk"),o.id},createBackwardsCompatibleStream:(n,{isReconnect:r,placeholderChunk:s,onFinalResponse:a,onFirstMessageReceived:o,timer:i,reason:c})=>{const u=Array.from(t().activeStreams),d={...t().streams};if(u.length>=Zue)try{const x=u.shift();x&&(d[x]?.abortController?.abort(),d[x]={...d[x],promise:null,abortController:null})}catch(x){ee.error("Failed to abort stream",x)}const m=n.params?.frontend_uuid??ar(),h=new AbortController,p={id:{description:m},promise:Promise.resolve(),abortController:h,isReconnect:r,entryId:n.params?.resume_entry_uuid,params:n.params,timer:i},g={message:async x=>{const b=Om(t(),m);let _=!1;b?.threadId||(_=!0,o?.(x)),e(w=>{const{newState:S,ingested:C}=vT(w,m,x);if(C?.status===dr.COMPLETED&&a?.(C),C?.status===dr.FAILED&&b&&b.entryId){const{promise:E,abortController:M,...T}=b;return{...S,erroredStreams:{...w.erroredStreams,[b.entryId]:T}}}return S},void 0,"ingest"),b&&Br.emit("progress",{stream:b,message:t().entries[x.backend_uuid]??x,isFirstMessage:_})}},y=n.params?.query_source==="default_search",v={[yr]:m};return ee.info("Starting stream",{request_id:m}),p.promise=(r?ne.SSE("/rest/sse/perplexity_ask/reconnect/{resume_entry_uuid}",c,{path:{resume_entry_uuid:n.params?.resume_entry_uuid??""},params:{cursor:n.params?.cursor},signal:h.signal,handlers:g,headers:v}):ne.SSE("/rest/sse/perplexity_ask",c,{params:{...n,params:{...n.params,version:hHe}},signal:h.signal,handlers:g,metrics:{omnisearch:y},timer:i,headers:v})).then(()=>vHe(t(),m),x=>{const b=t(),_=Om(b,m);_&&(e(w=>yHe(w,m,x),void 0,"handleStreamError"),Br.emit("error",{stream:_,error:x}))}).finally(()=>{e(({activeStreams:x,streams:b})=>({streams:{...b,[m]:{...b[m],promise:null,abortController:null}},activeStreams:x.filter(_=>_!==m)}),void 0,"cleanupBackwardsCompatibleStream")}),u.push(m),e({activeStreams:u,streams:{...d,[m]:p}},void 0,"createBackwardsCompatibleStream"),Br.emit("created",{stream:p,query:n.query_str,params:n.params}),p.abortController?.signal.addEventListener("abort",()=>{Br.emit("aborted",{stream:p})}),s&&e(x=>vT(x,m,s).newState,void 0,"ingestPlaceholderChunk"),p},setMiddlewares:n=>{e(()=>({middlewares:[...mG,...n]}))}}}),KL=bp("StreamState",()=>yo()(c4e(zne(xHe),{name:"StreamStore"}))),Qd=KL.useSelector,Jue=KL.useStore,bHe=()=>{const e=Jue(),t=f.useMemo(()=>aHe(e.getState().actions.reconnectStream,{perMinute:20,perHour:120}),[e]);return f.useEffect(()=>{function n(){const o=e.getState(),i=new Set(o.activeStreams),c=new Set(Object.values(o.streams).filter(u=>i.has(u.id.description)).map(u=>u.entryId));Object.values(o.entries).forEach(u=>{u?.reconnectable&&i.size<Zue&&!c.has(u?.backend_uuid)&&t(u.backend_uuid)})}n();let r=setInterval(n,fG);function s(){clearInterval(r),n(),r=setInterval(n,fG)}function a(){clearInterval(r)}return window.addEventListener("online",s,!0),window.addEventListener("offline",a,!0),()=>{clearInterval(r),window.removeEventListener("online",s,!0),window.removeEventListener("offline",a,!0)}},[t,e]),null},_He=A.memo(({children:e})=>l.jsxs(KL.Provider,{children:[l.jsx(bHe,{}),e]})),QFt=()=>Qd(e=>e.actions.getEntryById),wHe=()=>Qd(e=>e.actions.createBackwardsCompatibleStream),SHe=()=>Qd(e=>e.actions.reconnectStream),CHe=()=>Qd(e=>e.actions.retryStream),EHe=()=>{const e=Qd(t=>t.entries);return f.useCallback(t=>t?e[t]?.status===dr.COMPLETED:!1,[e])},ede=e=>{const t=Qd(s=>s.activeStreams),n=Qd(s=>s.streams),r=Object.values(n).find(s=>s.id.description===e);return!!(r&&t.includes(r?.id.description))},Ma=()=>Jue(),MHe=()=>{const e=Ma();return f.useCallback(n=>{for(const r of n){if(e.getState().entries[r.backend_uuid])continue;const a=!r.reconnectable;e.setState(o=>vP(o,{...r,status:a?r.status===dr.BLOCKED?dr.BLOCKED:dr.COMPLETED:dr.PENDING,final:a,final_sse_message:a},{streamId:r.frontend_uuid??ar()}),void 0,"ingestInitialEntries")}},[e])},tde=()=>{const e=Ma();return f.useCallback((t,n)=>{t&&e.setState(r=>{const s=r.entries[t],a=qL(r,t);if(a&&a.promise&&a.abortController&&!a.abortController.signal.aborted&&ee.error("Attempting to mutate entries while stream is active"),!s||!n)return r;const o=n(s);return o?{...r,entries:{...r.entries,[t]:o}}:r},void 0,"mutateEntry")},[e])},THe=()=>{const e=Ma();return f.useCallback((t,n,{terminateStream:r=!0}={})=>{t&&e.setState(s=>{if(!t)return s;pHe(s,t)&&r&&ee.error("Attempting to mutate entries while stream is active");const o=s.threads.findIndex(h=>h.id===t);if(o===-1)return s;const i=s.threads[o];if(!i)return s;const u=i.entryIds.map(h=>s.entries[h]).filter(h=>h!=null),d=n?.(u);if(!d)return s;const m=Array.from(s.threads);return m.splice(o,1,{...i,entryIds:d.map(h=>h.backend_uuid)}),{...s,entries:{...s.entries,...d.reduce((h,p)=>(h[p.backend_uuid]=p,h),{})},threads:m}},void 0,"mutateEntries")},[e])};function XFt(e){const t=Ma();return qL(t.getState(),e)}function kHe(e){const t=Ma(),n=Object.values(t.getState().erroredStreams),r=n.length;for(let s=r-1;s>=0;s--){const a=n[s];if(a.entryId===e)return a}}const nde=A.memo(({middlewares:e})=>{const t=Ma();return f.useLayoutEffect(()=>{t.getState().actions.setMiddlewares(e)},[e,t]),null});nde.displayName="MiddlewareRegistry";function YL(){const e=Ma();return f.useCallback(t=>e.getState().streams[t]?.timer,[e])}function rde(){const e=Ma();return f.useCallback(()=>e.getState().activeStreams.length>0,[e])}const d_=e=>e?{author_id:wWe(e),author_image:CWe(e),author_username:SWe(e),bookmarkState:NWe(e),collection:kWe(e),contextUUID:gWe(e),expiry_time:IWe(e)??void 0,first_query:xWe(e),focus:bWe(e),frontendContextUUID:yWe(e),mode:MWe(e)??void 0,parent_info:EWe(e)??void 0,personalized:TWe(e)??void 0,privacy_state:jWe(e)??void 0,rwToken:Iue({backend_uuid:e.backend_uuid,read_write_token:e.read_write_token,context_uuid:e.context_uuid}),sources:_We(e)??void 0,text_completed:!1,thread_access:AWe(e)??void 0,thread_url_slug:PWe(e),title:vWe(e),updated_datetime:RWe(e)}:voe,xP=e=>({forkCount:e?.fork_count??0,likeCount:e?.like_count??0,viewCount:e?.view_count??0,userLikes:e?.user_likes??!1}),sde={fork_count:0,like_count:0,view_count:0,user_likes:!1};function Pg({entries:e,threads:t,streams:n},r,s){const a=r?n[r]:void 0;if(a&&a.threadId&&(s=a.threadId),s){const o=t.find(i=>i.id===s);if(o){const i=o.entryIds.map(c=>e[c]).filter(c=>c!=null);return a&&!a.entryId&&a.placeholderChunk&&i.push(a.placeholderChunk),{results:i,currentStreamId:r,currentThreadId:s}}}return{results:a?.placeholderChunk?[a.placeholderChunk]:[],currentStreamId:r,currentThreadId:s}}const NHe=({streamStore:e})=>{const t=yo()((r,s)=>({results:[],resultsLength:0,firstResult:void 0,lastResult:void 0,inFlight:!1,inFlightLatest:!1,inFlightEntry:void 0,isReadOnly:!1,socialStats:{forkCount:0,likeCount:0,viewCount:0,userLikes:!1},actions:{setResults:a=>{const o=a[0],i=xP(o?.social_info??sde),c={inFlight:a.some(u=>an.isStatusPending(u)),inFlightLatest:a.length>0&&an.isStatusPending(a[a.length-1]),inFlightEntry:a.find(u=>an.isStatusPending(u))};r({results:a,firstResult:o,lastResult:a[a.length-1],inFlight:c.inFlight,inFlightLatest:c.inFlightLatest,inFlightEntry:c.inFlightEntry,socialStats:i,resultsLength:a.length},void 0)},setCurrentStreamId:a=>{const o=s(),i=Pg(e.getState(),a,o.currentThreadId);o.actions.setResults(i.results),r({currentStreamId:i.currentStreamId,currentThreadId:i.currentThreadId},void 0)},clearCurrentStreamId:()=>{r({currentStreamId:void 0},void 0);const a=s(),o=Pg(e.getState(),void 0,a.currentThreadId);a.actions.setResults(o.results),r({currentStreamId:o.currentStreamId,currentThreadId:o.currentThreadId},void 0)},setCurrentThreadId:a=>{r({currentThreadId:a},void 0);const o=s(),i=o.currentStreamId,c=Object.values(e.getState().streams).find(d=>d.threadId===a);c?c.id.description!==i&&o.actions.setCurrentStreamId(c.id.description):o.actions.clearCurrentStreamId();const u=Pg(e.getState(),s().currentStreamId,a);o.actions.setResults(u.results),r({currentStreamId:u.currentStreamId,currentThreadId:u.currentThreadId},void 0)},clearCurrentThreadId:()=>{r({currentThreadId:void 0},void 0);const a=s(),o=Pg(e.getState(),a.currentStreamId,void 0);a.actions.setResults(o.results),r({currentStreamId:o.currentStreamId,currentThreadId:o.currentThreadId},void 0)}}})),n=e.subscribe(({entries:r,threads:s,streams:a})=>Pg({entries:r,threads:s,streams:a},t.getState().currentStreamId,t.getState().currentThreadId),r=>{t.getState().actions.setResults(r.results),t.setState({currentStreamId:r.currentStreamId,currentThreadId:r.currentThreadId},void 0)});return{store:t,clearSubscriptions:()=>{n()}}},{Context:AHe,useStore:PHe,useSelector:RHe,useTrackedState:IHe}=Y0("ResultsStore"),jHe=RHe,zt=IHe,OHe=({children:e})=>{const t=Ma(),[{store:n,clearSubscriptions:r}]=f.useState(()=>NHe({streamStore:t}));return f.useEffect(()=>r,[r]),l.jsx(AHe.Provider,{value:n,children:e})},LHe=()=>{const{firstResult:e}=zt();return f.useMemo(()=>d_(e),[e])},DHe=e=>e.results.find(t=>an.isStatusPending(t)),FHe=e=>Ke({queryKey:["navigationResults",e],queryFn:()=>Promise.resolve({}),enabled:!1}),vC=()=>{const e=PHe(),t=THe();return f.useCallback(n=>{const r=e.getState().currentThreadId;t(r,n)},[t,e])};function vo(){const{firstResult:{backend_uuid:e,context_uuid:t,read_write_token:n}={}}=zt();return f.useMemo(()=>Iue({context_uuid:t,read_write_token:n}),[t,n,e])}var UHe={};const ZFt=async({reason:e})=>{const{data:t,error:n}=await ne.GET("/rest/enterprise/previous-subscription",e,{timeoutMs:je({productionMs:2e3})});if(n)throw new Me("API_CLIENTS_ERROR",{cause:n,details:{reason:e}});return t},BHe=async({source:e,locale:t,headers:n,reason:r})=>{try{const{data:s,error:a}=await ne.POST("/rest/enterprise/customer-portal",r,{body:{origin:e,locale:t},timeoutMs:7500,headers:{...n,"Content-Type":"application/json"}});if(a)throw new Me("API_CLIENTS_ERROR",{cause:a,details:{reason:r}});if(s.status!=="success")throw new Me("API_CLIENTS_ERROR",{cause:a,details:{reason:r}});return s.url}catch(s){return ee.error(s),null}},VHe=async({tier:e,origin:t,locale:n,reason:r})=>{const s=OS(),a=yf();try{const{data:o,error:i}=await ne.POST("/rest/enterprise/checkout-session",r,{body:{referral_code:null,discount_code:null,origin:t,tier:e,locale:n,visitor_id:a},timeoutMs:3500,headers:{...s?{"Screen-Dimensions":s}:{}}});if(i)throw new Me("API_CLIENTS_ERROR",{cause:i,details:{reason:r}});return o}catch(o){return ee.error(o),null}},$He=async({tier:e,origin:t,locale:n,collectionMethod:r,billingAddress:s,reason:a})=>{const o=OS();try{const{data:i,error:c}=await ne.POST("/rest/enterprise/subscription",a,{body:{collection_method:r,origin:t,locale:n,tier:e,billing_address:s},timeoutMs:1e4,headers:{...o?{"Screen-Dimensions":o}:{}}});if(c)throw new Me("API_CLIENTS_ERROR",{cause:c,details:{reason:a}});return i}catch(i){return ee.error(i),null}},xC=async({headers:e,reason:t})=>{const n={organization:void 0,org_user:void 0,is_in_organization:!1};try{const{data:r,error:s}=await ne.GET("/rest/enterprise/user/organization",t,{headers:e,timeoutMs:je({productionMs:2e3}),numRetries:1});if(s)throw new Me("API_CLIENTS_ERROR",{cause:s,details:{reason:t}});return r.status!=="success",r}catch(r){return ee.error(r),n}},ade=async({email:e,headers:t,useNextAuthService:n,reason:r})=>{if(!e)throw new Error("No email");const s=e.split("@"),a=s.length>=2?s[s.length-1]:null;if(!a)throw new Error(`No domain extracted from ${e}`);return WHe({domain:a,headers:t,useNextAuthService:n,reason:r})},WHe=async({domain:e,headers:t,useNextAuthService:n,reason:r})=>{let s;try{if(n){const o=`/rest/nextauth/organization/domain/${e}`,i=UHe.PPL_NEXTAUTH_SERVER_URL;s=await er({headers:t,urlPath:o,timeoutMs:3e3,numRetries:1,baseUrlOverride:i,reason:r})}else{const o=`/rest/enterprise/organization/domain/${e}`;s=await er({headers:t,urlPath:o,timeoutMs:3e3,numRetries:1,reason:r})}const a=await s.json();if(a.status!=="success")throw new Error("Failed to get organization from domain");return a?.organization??null}catch(a){return ee.error("Failed to get organization from domain",a),null}},JFt=async({headers:e,query:t,reason:n})=>{try{const r=t?.["user-limit"]??2e4,s=t?.["user-offset"]??0,a=t?.["invite-limit"]??2e4,o=t?.["invite-offset"]??0,{data:i,error:c}=await ne.GET("/rest/enterprise/user/organization/users",n,{params:{query:{"user-limit":r,"user-offset":s,"invite-limit":a,"invite-offset":o}},headers:e,timeoutMs:je({productionMs:2e3,clientSideMs:1e4}),numRetries:1});if(c)throw new Me("API_CLIENTS_ERROR",{cause:c,details:{reason:n}});if(i.status!=="success")throw new Me("API_CLIENTS_ERROR",{cause:c,details:{reason:n}});return{userList:i?.user_list??[],hasNextUserPage:i?.has_next_user_page??!1,totalUsers:i?.total_users??0,inviteList:i?.invite_list??[],hasNextInvitePage:i?.has_next_invite_page??!1,totalInvites:i?.total_invites??0}}catch(r){return ee.error("Failed to get organization users",r),null}},HHe=20,zHe=1,eUt=async({page:e=zHe,limit:t=HHe,emailFilter:n,reason:r,headers:s})=>{const a=await ne.GET("/rest/enterprise/user/organization/members",r,{params:{query:{page:e,limit:t,"email-filter":n??null}},timeoutMs:je({productionMs:5e3}),headers:s});if(a.error)throw a.error;return a.data},tUt=async({reason:e,headers:t})=>{const n=await ne.GET("/rest/enterprise/user/organization/trials/count",e,{headers:t,timeoutMs:je({productionMs:5e3})});if(n.error)throw new Me("API_CLIENTS_ERROR",{cause:n.error,details:{reason:e}});return n.data},ode=async({headers:e,reason:t})=>{try{const{data:n,error:r}=await ne.GET("/rest/enterprise/organization/subscription/refresh",t,{headers:e,timeoutMs:4e3});if(r)throw new Me("API_CLIENTS_ERROR",{cause:r,details:{reason:t}});return{subscriptionStatus:n?.subscription_status??null}}catch(n){return ee.error(n),null}},nUt=async({reason:e})=>{try{const{data:t,error:n}=await ne.GET("/rest/enterprise/user/organization/seat-info",e,{timeoutMs:2e3});if(n)throw new Me("API_CLIENTS_ERROR",{cause:n,details:{reason:e}});return t}catch(t){return ee.error(t),null}};async function rUt({orgUuid:e,headers:t,reason:n,prefersDark:r}){const s=await ne.GET("/rest/enterprise/organization/{org_uuid}/insights/embed-url",n,{params:{path:{org_uuid:e},query:{prefersDark:r}},headers:t,timeoutMs:je({productionMs:5e3}),numRetries:1});if(s.error){ee.error("Failed to fetch Omni insights embed URL",{url:`/rest/enterprise/organization/${e}/insights/embed-url`,error:s.error,status:s.response.status,statusText:s.response.statusText});return}return s.data}const sUt=async({headers:e,reason:t})=>{try{const{data:n,error:r}=await ne.GET("/rest/enterprise/organization/premium-secure-eligibility",t,{headers:e,timeoutMs:je({productionMs:2e3}),numRetries:1});if(r)throw new Me("API_CLIENTS_ERROR",{cause:r,details:{reason:t}});return n}catch(n){return ee.error(n),null}},aUt=async({headers:e,reason:t})=>{try{const{data:n,error:r}=await ne.POST("/rest/enterprise/organization/premium-secure-billing-update",t,{headers:{...e,"Content-Type":"application/json"},timeoutMs:je({productionMs:2e3}),numRetries:1});if(r)throw new Me("API_CLIENTS_ERROR",{cause:r,details:{reason:t}});return n}catch(n){return ee.error(n),null}},oUt=async({headers:e,reason:t})=>{try{const n=await ne.GET("/rest/enterprise/organization/subscription-info",t,{headers:e,timeoutMs:je({productionMs:2e3}),numRetries:1});if(n.error)throw n.error;return n.data}catch(n){return ee.error("Failed to get org subscription info",n),null}},GHe=async({uuid:e,success:t,reason:n})=>{try{if((await ne.POST("/rest/sse/perplexity_connector_auth_response",n,{body:{result:{tool_uuid:e,success:t}},backOffTime:100,numRetries:1,headers:{"Content-Type":"application/json"}})).data?.status!=="success")throw new Error("Failed to post perplexity connector auth response");return!0}catch(r){return ee.error("Failed to post perplexity connector auth response",r),!1}},qHe={orgUser:void 0,organization:void 0,isEnterprise:!1,refetch:Rn,isLoading:!1,isSuccess:!1};function pn({shouldRefetchOnMount:e=!0,reason:t}){const n=Je(),{data:r,refetch:s,fetchStatus:a,isSuccess:o}=Ke({enabled:n,queryKey:lp(),queryFn:()=>xC({reason:t}),placeholderData:qHe,refetchOnMount:e});return f.useMemo(()=>({orgUser:r?.org_user,organization:r?.organization,isEnterprise:r?.is_in_organization??!1,refetch:s,isLoading:a==="fetching",isSuccess:o}),[r?.is_in_organization,r?.org_user,r?.organization,a,o,s])}function QL({shouldRefetchOnMount:e=!0,reason:t}){const n=Je(),{data:r,isFetching:s}=Ke({enabled:n,queryKey:lp(),queryFn:()=>xC({reason:t}),refetchOnMount:e});return f.useMemo(()=>({isEnterprise:r?.is_in_organization??!1,isFetching:s}),[r?.is_in_organization,s])}function ide({reason:e}){const t=Je(),n=f.useRef(void 0),{data:r,status:s}=Ke({enabled:t,queryKey:lp(),queryFn:()=>xC({reason:e})}),a=f.useMemo(()=>s==="success"&&r?.organization?.uuid?(n.current=r.organization.uuid,r.organization.uuid):n.current??void 0,[r,s]);return f.useMemo(()=>({uuid:a}),[a])}const lde=({currentAccessLevel:e,onClick:t,isCollection:n,isPage:r,spaceIsOrgPinned:s=!1,addOrgPinnedSpace:a,deleteOrgPinnedSpace:o,reason:i,hideLabels:c=!1,isCollectionOwner:u=!1})=>{const{$t:d}=X(),m=X(),{isIOS:h,isAndroid:p}=Wt(),{isEnterprise:g,organization:y}=pn({reason:i}),{firstResult:{collection_info:v,sources:{sources:x}={}}={}}=zt(),b=n?y?.settings?.public_collection_sharing_allowed??!0:r?y?.settings?.public_page_sharing_allowed??!0:y?.settings?.public_thread_sharing_allowed??!0,_=x?.includes(ki.factset),w=f.useMemo(()=>n&&u?[{label:m.formatMessage({defaultMessage:"Share via link",id:"oJFaPCNcIw"}),text:m.formatMessage({defaultMessage:"Link share",id:"5CBpesC8V9"}),onClick:()=>o?.(),active:!s},{label:m.formatMessage({defaultMessage:"Pinned for everyone in org",id:"BCLJqQMHbj"}),text:m.formatMessage({defaultMessage:"Pinned",id:"fWZYP5U4xZ"}),onClick:()=>a?.(),active:s}]:void 0,[a,o,m,n,u,s]),S=f.useMemo(()=>[{label:c?void 0:"",text:d({defaultMessage:"Owner Only",id:"RUPRkBML7X"}),icon:th,show:!1,accessLevel:pt.OWNER_ONLY},{label:c?void 0:d({defaultMessage:"Only the author can view",id:"ZKx/MMPXAk"}),text:d(n?{defaultMessage:"Only invited members",id:"mm5vL8ueCo"}:{defaultMessage:"Private",id:"viXE3205/2"}),icon:th,show:!r,onClick:()=>t(pt.PRIVATE_READ),active:e===pt.PRIVATE_READ,accessLevel:pt.PRIVATE_READ,testId:"access-level-private"},{label:c?void 0:d({defaultMessage:"Anyone in your Space can view",id:"8i8H9TisQU"}),text:d({defaultMessage:"Space",id:"0ah2udCSKF"}),icon:ya,onClick:()=>t(pt.COLLECTION_READ),active:e===pt.COLLECTION_READ,show:!n&&!r&&!!v?.uuid,accessLevel:pt.COLLECTION_READ,testId:"access-level-space"},{label:c?void 0:d({defaultMessage:"Anyone in your organization can view",id:"T2yBpbP3mu"}),text:d({defaultMessage:"Anyone in my org with the link",id:"ah50gEdYbM"}),icon:cc,onClick:()=>t(pt.ORG_READ),active:e===pt.ORG_READ,show:g&&(!r||b),accessLevel:pt.ORG_READ,testId:"access-level-org",subMenu:w},{label:c?void 0:d({defaultMessage:"Anyone with the link",id:"KL1VgUyLuG"}),text:d({defaultMessage:"Anyone with the link",id:"KL1VgUyLuG"}),icon:h?cS:p?Kne:by,onClick:()=>t(pt.PUBLIC_READ),active:e===pt.PUBLIC_READ,show:b&&!_,accessLevel:pt.PUBLIC_READ,testId:"access-level-public"}],[d,v?.uuid,e,_,c,p,n,g,h,r,t,b,w]),C=S.find(E=>E.accessLevel===e)||null;return f.useMemo(()=>({accessLevelMenuItems:S,selectedAccessMenuItem:C}),[S,C])},iUt=e=>e?[pt.ORG_READ,pt.PUBLIC_READ,pt.PUBLIC_PUBLISHED].includes(e):!1,KHe=e=>e?[pt.OWNER_ONLY,pt.PRIVATE_READ].includes(e):!0,cde=e=>e?[pt.PUBLIC_READ,pt.PUBLIC_PUBLISHED,pt.ORG_READ,pt.COLLECTION_READ].includes(e):!1,YHe=e=>e?[pt.PUBLIC_READ,pt.PUBLIC_PUBLISHED].includes(e):!1,QHe=e=>{switch(e){case pt.PUBLIC_PUBLISHED:case pt.PUBLIC_READ:return by;case pt.COLLECTION_READ:return ya;case pt.ORG_READ:return cc;case pt.PRIVATE_READ:case pt.OWNER_ONLY:return th;default:return null}},hG=e=>{switch(e){case pt.PUBLIC_READ:case pt.PUBLIC_PUBLISHED:return"public";case pt.ORG_READ:return"organization";case pt.COLLECTION_READ:return"collection";case pt.PRIVATE_READ:case pt.OWNER_ONLY:return"private";default:return"private"}},Jt=["list_user_collections",{}],Ol="list_collection_threads",Rc="__temp__";async function XHe({contextUUID:e,updatedAccess:t,rwToken:n,callback:r,reason:s}){try{const o=await(await ne.POST("/rest/thread/update_thread_access",s,{body:{context_uuid:e??"",updated_access:t,read_write_token:n??""}}))?.data;r?.(o?.access)}catch(a){ee.error(a),r?.(a)}}const XL=({threadAccess:e,contextUUID:t,rwToken:n,collectionSlug:r,reason:s})=>{const{trackEvent:a}=Te(),o=Je(),i=gt(),c=vC(),u=cde(e),d=f.useCallback((p,g)=>{!t||!n||!o||e===p||XHe({contextUUID:t,updatedAccess:p,rwToken:n,reason:s,callback:y=>{if(y===p){if(c(v=>{if(v)return v.map(x=>({...x,thread_access:y}))}),e&&a("thread privacy changed",{oldPrivacy:hG(e),newPrivacy:hG(y),contextUUID:t}),r){const v=[Ol,{collection_slug:r.slice(-22)}];i.invalidateQueries({queryKey:v})}g?.(y)}}})},[t,n,e,o,c,a,r,i,s]),m=f.useCallback(p=>{!o||u||(a("click share thread to space"),d(pt.COLLECTION_READ,p))},[o,u,d,a]),h=f.useCallback(p=>{!o||!u||(a("click make thread private"),d(pt.PRIVATE_READ,p))},[o,u,d,a]);return f.useMemo(()=>({isShareable:u,currentAccess:e,onShareThreadToSpace:m,onMakeThreadPrivate:h,handleAccessChange:d}),[u,d,h,m,e])};function bP(){return bP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bP.apply(null,arguments)}function ZHe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var JHe=f.useLayoutEffect,eze=function(t){var n=A.useRef(t);return JHe(function(){n.current=t}),n},pG=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},tze=function(t,n){var r=A.useRef();return A.useCallback(function(s){t.current=s,r.current&&pG(r.current,null),r.current=n,n&&pG(n,s)},[n])},gG={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},nze=function(t){Object.keys(gG).forEach(function(n){t.style.setProperty(n,gG[n],"important")})},yG=nze,Ds=null,vG=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function rze(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Ds||(Ds=document.createElement("textarea"),Ds.setAttribute("tabindex","-1"),Ds.setAttribute("aria-hidden","true"),yG(Ds)),Ds.parentNode===null&&document.body.appendChild(Ds);var s=e.paddingSize,a=e.borderSize,o=e.sizingStyle,i=o.boxSizing;Object.keys(o).forEach(function(h){var p=h;Ds.style[p]=o[p]}),yG(Ds),Ds.value=t;var c=vG(Ds,e);Ds.value=t,c=vG(Ds,e),Ds.value="x";var u=Ds.scrollHeight-s,d=u*n;i==="border-box"&&(d=d+s+a),c=Math.max(d,c);var m=u*r;return i==="border-box"&&(m=m+s+a),c=Math.min(m,c),[c,u]}var xG=function(){},sze=function(t,n){return t.reduce(function(r,s){return r[s]=n[s],r},{})},aze=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],oze=!!document.documentElement.currentStyle,ize=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=sze(aze,n),s=r.boxSizing;if(s==="")return null;oze&&s==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var a=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:a,borderSize:o}},lze=ize;function ZL(e,t,n){var r=eze(n);f.useLayoutEffect(function(){var s=function(o){return r.current(o)};if(e)return e.addEventListener(t,s),function(){return e.removeEventListener(t,s)}},[])}var cze=function(t,n){ZL(document.body,"reset",function(r){t.current.form===r.target&&n(r)})},uze=function(t){ZL(window,"resize",t)},dze=function(t){ZL(document.fonts,"loadingdone",t)},fze=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],mze=function(t,n){var r=t.cacheMeasurements,s=t.maxRows,a=t.minRows,o=t.onChange,i=o===void 0?xG:o,c=t.onHeightChange,u=c===void 0?xG:c,d=ZHe(t,fze),m=d.value!==void 0,h=f.useRef(null),p=tze(h,n),g=f.useRef(0),y=f.useRef(),v=function(){var _=h.current,w=r&&y.current?y.current:lze(_);if(w){y.current=w;var S=rze(w,_.value||_.placeholder||"x",a,s),C=S[0],E=S[1];g.current!==C&&(g.current=C,_.style.setProperty("height",C+"px","important"),u(C,{rowHeight:E}))}},x=function(_){m||v(),i(_)};return f.useLayoutEffect(v),cze(h,function(){if(!m){var b=h.current,_=b.value;requestAnimationFrame(function(){_!==b.value&&v()})}}),uze(v),dze(v),f.createElement("textarea",bP({},d,{onChange:x,ref:p}))},ude=f.forwardRef(mze),xT={},bG;function hze(){return bG||(bG=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="circle-half-stroke",r=512,s=512,a=[9680,"adjust"],o="f042",i="M464 256c0-114.9-93.1-208-208-208l0 416c114.9 0 208-93.1 208-208zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faCircleHalfStroke=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(xT)),xT}var pze=hze();const dde=A.memo(({text:e})=>l.jsx(D,{variant:"tiny",children:l.jsx("span",{className:"text-caution",children:e})}));dde.displayName="FormError";const JL=A.memo(({label:e,subtitle:t,errorText:n,isOptional:r=!1,withMargin:s=!0,optionalLabel:a="optional",testId:o})=>e||n||t?l.jsxs("div",{className:B({"mb-sm":s}),"data-test-id":o,children:[l.jsxs("div",{className:"flex items-center justify-between",children:[(e||t)&&l.jsx("label",{htmlFor:e,children:l.jsx("div",{className:"gap-y-xs flex flex-col",children:e&&l.jsxs("div",{className:"gap-x-xs flex",children:[l.jsx(D,{variant:"smallBold",className:"select-none",children:e}),r&&l.jsx(D,{variant:"small",color:"light",children:`(${a})`})]})})}),n&&l.jsx(dde,{text:n})]}),t&&l.jsx(D,{variant:"small",color:"light",children:t})]}):null);JL.displayName="FormItemHeader";var bT={},_T={},_G;function gze(){return _G||(_G=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="magnifying-glass",r=512,s=512,a=[128269,"search"],o="f002",i="M368 208A160 160 0 1 0 48 208a160 160 0 1 0 320 0zM337.1 371.1C301.7 399.2 256.8 416 208 416C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208c0 48.8-16.8 93.7-44.9 129.1L505 471c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0L337.1 371.1z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faMagnifyingGlass=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(_T)),_T}var wG;function yze(){return wG||(wG=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=gze();e.definition={prefix:t.prefix,iconName:t.iconName,icon:[t.width,t.height,t.aliases,t.unicode,t.svgPathData]},e.faSearch=e.definition,e.prefix=t.prefix,e.iconName=t.iconName,e.width=t.width,e.height=t.height,e.ligatures=t.aliases,e.unicode=t.unicode,e.svgPathData=t.svgPathData,e.aliases=t.aliases}(bT)),bT}var vze=yze();function _p(e){const t=f.useRef(void 0);return f.useEffect(()=>{t.current=e},[e]),t.current}class oo{static isEnterKey(t){return t.code==="Enter"||t.key==="Enter"||t.keyCode===13}static isEnterKeyWithoutShift(t){return this.isEnterKey(t)&&!t.shiftKey}static isArrowDown(t){return t.key==="ArrowDown"}static isArrowUp(t){return t.key==="ArrowUp"}static isEscapeKey(t){return t.key==="Escape"}static isTabKey(t){return t.key==="Tab"}static isOnlySlashKey(t){return t.key==="/"&&!t.metaKey&&!t.ctrlKey&&!t.altKey}static isCtrlOrCmdJ(t){return(t.metaKey||t.ctrlKey)&&t.key==="j"}}const jv=(e,t)=>{if(oo.isEnterKeyWithoutShift(e)){if(t.isComposing||e.keyCode===229){e.preventDefault();return}if(t.isMobileUserAgent||t.allowEnterNewlines)return;e.preventDefault()}t.onKeyDown?.(e)},e9=e=>{e(!0)},t9=e=>{setTimeout(()=>{e(!1)},0)};var Lm;(function(e){e.INLINE="inline",e.LABEL="label"})(Lm||(Lm={}));const xze=({onClear:e})=>l.jsx(ke,{icon:Xt,pill:!0,onClick:e,size:Ft.small}),bze=["email","tel"],xo=A.memo(({type:e,className:t,wrapperClassName:n,value:r,name:s,maxLength:a,errorText:o,errorPlacement:i=Lm.INLINE,disabled:c=!1,required:u=!1,autoFocus:d=!1,placeholder:m="",rightItems:h=ce,onChange:p,onClear:g,onBlur:y,onFocus:v,onKeyDown:x,isLoading:b,inlineEditBlock:_,label:w,subtitle:S,isOptional:C,isMobileUserAgent:E,labelMargin:M=!0,testId:T,variant:I,pill:j=!0,disable1pass:N,ClearIcon:P=xze,enterKeyHint:R,size:k,ref:O,colorVariant:L="default",min:F,max:U,spellCheck:V})=>{const W=_p(c),H=f.useRef(null),[G,K]=f.useState(!1),[$,q]=f.useState(!1),Z=f.useRef(G);Z.current=G,f.useEffect(()=>{!E&&d&&H.current?.focus()},[E,H,d]),f.useEffect(()=>{W!==c&&!c&&!E&&d&&setTimeout(()=>{H.current?.focus()},200)});const se=f.useMemo(()=>B({"border-r mr-sm pr-xs border-subtler":h.length!=0}),[h.length]),Y=f.useMemo(()=>{const Se=(()=>{switch(L){case"default":return"bg-base dark:bg-offset";case"offsetPlus":return"bg-offsetPlus";default:Qt(L)}})(),De=B("w-full outline-none focus:outline-none focus:ring-subtler font-sans flex items-center","text-foreground caret-super selection:bg-super/50 dark:selection:bg-super/10 dark:selection:text-super",Se,"border border-subtler  focus:ring-1 placeholder-quieter","duration-200 transition-all",{"ring-subtler ring-1":G,"rounded-t-[32px] rounded-b-[32px]":j,rounded:!j},t),Ne=B({"py-xs px-sm text-xs placeholder:text-xs":k==="xs","py-sm px-sm text-sm placeholder:text-xs":k==="sm","py-lg px-xl text-lg placeholder:text-base":k==="lg","pl-[40px]":e==="search","!font-mono md:text-base":I==="monospace","!text-3xl !placeholder:text-3xl !font-medium":I==="page-title","py-sm md:text-sm px-md placeholder:text-sm":!k&&!I}),Pe=B({"pr-xs":h.length===0&&k==="xs","pr-sm":h.length===0&&k==="sm","pr-md":h.length===0&&!k,"pr-lg":h.length===0&&k==="lg","pr-[49px] md:pr-[59px]":h.length===1,"pr-[128px] md:pr-[138px]":h.length===2});return B(De,Ne,Pe)},[G,j,t,k,e,I,h.length,L]),Q=!!o,re=!Q&&!!a&&!!r&&r.length>a,te=f.useMemo(()=>e==="search"?l.jsx("div",{className:"left-md absolute flex items-center rounded-l-lg",children:l.jsx(D,{color:"light",children:l.jsx(xt,{icon:vze.faSearch})})}):null,[e]),le=f.useMemo(()=>{const Se=i===Lm.INLINE&&Q;return l.jsxs("div",{className:B("right-sm gap-sm absolute flex items-center rounded-full"),children:[b?l.jsx(D,{color:"light",className:"mr-xs",children:l.jsx(Ns,{})}):null,Se&&l.jsx(z,{className:"mr-sm",children:l.jsx(D,{color:"red",variant:"tiny",children:o})}),re&&l.jsx(z,{className:"mr-sm",children:a&&r&&l.jsx(D,{color:"red",variant:"tiny",children:a-r.length})}),g&&l.jsx("div",{className:se,children:l.jsx(P,{onClear:g,inputValue:r})}),h.map((De,Ne)=>l.jsx(ye,{...De.buttonProps,size:De.buttonProps.size,disabled:De.buttonProps.disabled||Q||re,pill:!0},Ne))]})},[i,Q,b,o,re,a,r,g,se,P,h]),ie=f.useCallback(()=>{if(H.current){const Se=H.current.value.length;H.current.focus();try{H.current.setSelectionRange(Se,Se)}catch{}}},[]),pe=f.useCallback(Se=>{v?.(Se.nativeEvent),K(!0)},[v]),me=f.useCallback(Se=>{y?.(Se.nativeEvent),K(!1)},[y]);f.useImperativeHandle(O,()=>{const Se=H.current;return Se.focusAtEnd=ie,Se.isFocused=()=>Z.current,Se.append=De=>{H.current&&(H.current.value+=De)},Se.scrollToEnd=()=>{H.current&&(H.current.scrollTop=H.current.scrollHeight)},Se.trim=()=>{H.current&&(H.current.value=H.current.value.trim())},Se},[ie]),f.useEffect(()=>{d&&!E&&ie()},[d,ie,E]);const de=f.useCallback(Se=>{p?.(Se.target.value)},[p]),ve=f.useCallback(Se=>{jv(Se.nativeEvent,{isMobileUserAgent:E,isComposing:$,onKeyDown:x})},[x,E,$]),Ae=i===Lm.LABEL?o:void 0;return l.jsxs("div",{className:n,children:[l.jsx(JL,{label:w,subtitle:S,isOptional:C,errorText:Ae,withMargin:M}),l.jsx("div",{className:"rounded-full",children:l.jsxs("div",{className:"relative flex items-center",children:[l.jsx("input",{type:e,ref:H,autoFocus:d,placeholder:m,disabled:c,value:r,required:u,name:s??w,onChange:de,onKeyDown:ve,onCompositionStart:()=>e9(q),onCompositionEnd:()=>t9(q),onBlur:me,onFocus:pe,className:Y,autoComplete:bze.includes(e??"")?e:"off","data-test-id":T,"data-1p-ignore":N,enterKeyHint:R,min:F,max:U,spellCheck:V}),te,le]})}),_&&l.jsx("div",{className:"mt-sm flex justify-end",children:_})]})});xo.displayName="Input";function n9(e){const t=f.useRef({value:e,previous:e});return f.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var bC="Switch",[_ze,lUt]=Ga(bC),[wze,Sze]=_ze(bC),fde=f.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:a,required:o,disabled:i,value:c="on",onCheckedChange:u,form:d,...m}=e,[h,p]=f.useState(null),g=kn(t,_=>p(_)),y=f.useRef(!1),v=h?d||!!h.closest("form"):!0,[x,b]=ti({prop:s,defaultProp:a??!1,onChange:u,caller:bC});return l.jsxs(wze,{scope:n,checked:x,disabled:i,children:[l.jsx(on.button,{type:"button",role:"switch","aria-checked":x,"aria-required":o,"data-state":gde(x),"data-disabled":i?"":void 0,disabled:i,value:c,...m,ref:g,onClick:jt(e.onClick,_=>{b(w=>!w),v&&(y.current=_.isPropagationStopped(),y.current||_.stopPropagation())})}),v&&l.jsx(pde,{control:h,bubbles:!y.current,name:r,value:c,checked:x,required:o,disabled:i,form:d,style:{transform:"translateX(-100%)"}})]})});fde.displayName=bC;var mde="SwitchThumb",hde=f.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,s=Sze(mde,n);return l.jsx(on.span,{"data-state":gde(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:t})});hde.displayName=mde;var Cze="SwitchBubbleInput",pde=f.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...s},a)=>{const o=f.useRef(null),i=kn(o,a),c=n9(n),u=NS(t);return f.useEffect(()=>{const d=o.current;if(!d)return;const m=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(m,"checked").set;if(c!==n&&p){const g=new Event("click",{bubbles:r});p.call(d,n),d.dispatchEvent(g)}},[c,n,r]),l.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:i,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});pde.displayName=Cze;function gde(e){return e?"checked":"unchecked"}var Eze=fde,Mze=hde;const Go=f.memo(f.forwardRef(({active:e=!1,disabled:t,id:n,text:r,testId:s,onChange:a,size:o="default",switchProps:i,...c},u)=>{const d=B("rounded-full relative bg-base dark:bg-inverse dark:text-foreground",o==="default"?"size-4":"size-2.5","before:content-[''] before:duration-150 before:shadow-xs dark:before:shadow-md before:absolute before:inset-0 before:rounded-full before:bg-base before:dark:bg-white",{"before:opacity-20":t},"data-[state=unchecked]:opacity:80"),m=B("flex rounded-full duration-150 shadow-inset-xs",o==="default"?"w-9  p-three":"w-5 h-3.5 p-0.5","data-[state=checked]:justify-end","data-[state=checked]:bg-super dark:data-[state=checked]:bg-super/85","data-[state=unchecked]:bg-inverse/45 dark:data-[state=unchecked]:bg-inverse/20",{"opacity-50":t});return l.jsxs("div",{className:B("group/switch gap-sm flex cursor-default items-center",{"cursor-pointer":!t}),"data-testid":s,ref:u,...c,children:[l.jsx(Eze,{asChild:!0,checked:e,onCheckedChange:t?void 0:a,id:n,disabled:t,className:"group/switch gap-sm flex items-center","data-testid":s,style:{WebkitTapHighlightColor:"transparent"},...i,children:l.jsx(_e.button,{className:m,layout:!0,layoutRoot:!0,children:l.jsx(Mze,{asChild:!0,children:l.jsx(_e.div,{className:d,layout:"position",transition:{layout:{type:"spring",duration:.2,bounce:.3}}})})})}),r&&l.jsx(D,{variant:"smallBold",className:B("mr-sm whitespace-nowrap duration-150",{"cursor-pointer":!t},{"group-hover/switch:text-foreground":!e&&!t}),htmlFor:n,as:"label",color:e?"super":"light",children:r})]})}));Go.displayName="Switch";const Tze=A.forwardRef(({wrapperClassName:e,variant:t="default",size:n="default",errorText:r,className:s,value:a,maxLength:o,errorMessage:i,disabled:c=!1,hasShadow:u=!1,autoFocus:d=!1,placeholder:m="",rightItems:h=ce,onChange:p,onClear:g,onClick:y,onBlur:v,onFocus:x,onKeyDown:b,onPaste:_,isLoading:w,inlineEditBlock:S,label:C,subtitle:E,isOptional:M,minRows:T,isMobileUserAgent:I,allowEnterNewlines:j=!1,testId:N,textAreaClassname:P},R)=>{const k=_p(c),O=f.useRef(null),[L,F]=f.useState(!1),[U,V]=f.useState(!1),W=f.useRef(L);W.current=L,f.useEffect(()=>{!I&&d&&O.current?.focus()},[I,O,d]),f.useEffect(()=>{k!==c&&!c&&!I&&d&&setTimeout(()=>{O.current?.focus()},200)});const H=f.useMemo(()=>B({"border-r mr-sm pr-xs border-subtler":h.length!=0}),[h.length]),G=B("overflow-auto max-h-[50vh] outline-none w-full flex items-center","text-foreground font-sans resize-none","bg-transparent placeholder-quieter","caret-super selection:bg-super/50 dark:selection:bg-super/10 dark:selection:text-super",P),K=f.useMemo(()=>{const de=(()=>{switch(t){case"offsetPlus":return"bg-offsetPlus";case"default":return"bg-base dark:bg-offset";default:Qt(t)}})(),ve=B("w-full focus:ring-subtler flex items-center",de,"border border-subtler  focus:ring-1 rounded-md","duration-200 transition-all",{"ring-subtler ring-1":L,"shadow-sm":u},s),Ae=B({"py-sm text-sm px-md":n==="default","text-base p-md pb-xl":n==="large"}),Se=B({"pr-md":h.length===0});return B(ve,Ae,Se)},[L,u,s,n,h.length,t]),$=i!==void 0,q=!$&&!!o&&!!a&&a.length>o,Z=f.useMemo(()=>l.jsxs("div",{className:"right-sm gap-sm bg-base dark:bg-offset mb-xs pb-xs absolute bottom-0 flex items-center rounded-full",children:[w?l.jsx(D,{color:"light",children:l.jsx(xt,{className:"aspect-square animate-spin",fixedWidth:!0,icon:pze.faCircleHalfStroke})}):null,$&&l.jsx(z,{className:"mr-sm",children:l.jsx(D,{color:"red",variant:"tiny",children:i})}),q&&l.jsx(z,{className:"mr-sm",children:o&&a&&l.jsx(D,{color:"red",variant:"tiny",children:o-a.length})}),g!==void l.jsx("div",{className:H,children:l.jsx(ke,{icon:Xt,pill:!0,onClick:g,size:Ft.small})}),h.map((de,ve)=>de.type=="toggleButton"?l.jsx(Go,{...de.buttonProps,disabled:de.buttonProps.disableOverride?!1:de.buttonProps.disabled||$||q},ve):l.jsx(ye,{...de.buttonProps,size:Ft.small,disabled:de.buttonProps.disabled||$||q,pill:!0},ve))]}),[i,w,o,g,h,a,H,$,q]),se=f.useCallback(()=>{if(O.current){const de=O.current.value.length;O.current.focus(),O.current.setSelectionRange(de,de)}},[]),Y=f.useCallback(de=>{x?.(de.nativeEvent),F(!0)},[x]),Q=f.useCallback(de=>{v?.(de.nativeEvent),F(!1)},[v]),re=f.useCallback(de=>{y?.(de.nativeEvent)},[y]),te=f.useCallback(de=>{p?.(de.target.value)},[p]),le=f.useCallback(de=>{jv(de.nativeEvent,{isMobileUserAgent:I,isComposing:U,allowEnterNewlines:j,onKeyDown:b})},[b,U,I,j]),ie=f.useCallback(()=>e9(V),[V]),pe=f.useCallback(()=>t9(V),[V]),me=f.useCallback(de=>{_?.(de.nativeEvent)},[_]);return f.useImperativeHandle(R,()=>{const de=O.current;return de.focusAtEnd=se,de.isFocused=()=>W.current,de.append=ve=>{O.current&&(O.current.value+=ve)},de.scrollToEnd=()=>{O.current&&(O.current.scrollTop=O.current.scrollHeight)},de.trim=()=>{O.current&&(O.current.value=O.current.value.trim())},de},[se]),f.useEffect(()=>{d&&!I&&se()},[d,se,I]),l.jsxs("div",{"data-test-id":N,children:[l.jsx(JL,{label:C,subtitle:E,isOptional:M,errorText:r}),l.jsx("div",{className:B("rounded-3xl",e),children:l.jsxs("div",{className:"relative flex items-center",children:[l.jsx("div",{className:K,children:l.jsx(ude,{ref:O,autoFocus:d,placeholder:m,disabled:c,minRows:T,value:a,onClick:re,onChange:te,name:C,onKeyDown:le,onBlur:Q,onCompositionStart:ie,onCompositionEnd:pe,onFocus:Y,onPaste:me,className:G,autoComplete:"off","data-testid":N})}),l.jsx("div",{className:"bg-base focus:bg-base dark:bg-offset dark:focus:bg-offset absolute bottom-0 m-px flex justify-between rounded-b-md px-[6px]",style:{width:"calc(100% - 2px)"},children:Z})]})}),S&&l.jsx("div",{className:"mt-sm flex justify-end",children:S})]})}),el=A.memo(Tze),kze=new Set(["super","textColor","max","orange"]),Nze=new Set(["red"]),Aze=e=>kze.has(e)?"defaultInverted":Nze.has(e)?"white":e==="maxBorder"?"max":e==="superBorder"?"super":"default",yde=A.memo(({text:e,variant:t="super",boxProps:n})=>{const r=Aze(t);return l.jsx(z,{variant:t,...n,className:B("px-xs rounded-badge -mt-px box-border inline-flex",n?.className),children:l.jsx(D,{variant:"tiny",className:"leading-4",color:r,inline:!0,children:e})})});yde.displayName="Badge";const Q0=A.memo(({children:e,className:t,disabled:n,onClick:r,onMouseDown:s,onMouseEnter:a,onMouseMove:o,testId:i,rounded:c,href:u,focused:d,disableHoverStyles:m=!1,target:h="_blank",tooltipText:p,tooltipLayout:g="right",tooltipDelayDuration:y,active:v=!1,role:x="menuitem"})=>{const b=f.useRef(null),_=Is(),w=l.jsx("div",{className:B("relative select-none rounded-lg transition-all duration-300","px-sm py-1.5 md:h-full",{"hover:bg-offset cursor-pointer":!n&&!m,"cursor-pointer":!n&&m,rounded:c,"bg-offset":d}),children:e}),S=B("group/item md:h-full",t);f.useEffect(()=>{b.current&&d&&b.current.scrollIntoView({behavior:"instant",block:"nearest"})},[d]);const C=x==="menuitemradio"||x==="menuitemcheckbox"?v?"true":"false":void 0;return u&&!n?l.jsx(at,{href:u,target:h,className:S,onClick:r,"data-testid":i,children:w}):l.jsx(bn,{tooltipText:p,showTooltip:!_&&!!p,tooltipLayout:g,delayDuration:y,offset:12,asChild:!0,children:l.jsx("div",{role:x,"aria-checked":C,ref:b,"data-testid":i,className:S,onClick:n?void 0:r,onMouseDown:n?void 0:s,onMouseEnter:n?void 0:a,onMouseMove:n?void 0:o,children:w})})}),Pze=({icon:e,avatar:t,destructive:n})=>{if(t)return t;if(!e)return null;const r=B({"!text-caution":n},"opacity-90");return l.jsx(be,{icon:e,className:r,size:"sm"})},Rze=/\bgap(-[xy])?-/,Ize={[Ft.small]:"extraSmall",[Ft.tiny]:"tiny"},wp=A.memo(({customDescriptionNode:e,customTextNode:t,text:n,description:r,icon:s,avatar:a,label:o,badge:i,link:c,onLinkClick:u,size:d=Ft.small,color:m="default",badgeVariant:h="super",destructive:p,leftElement:g,rightElement:y,bottomElement:v,className:x="",preserveLeftIconSpace:b=!1,textClassName:_})=>{const w=s||a;return l.jsxs("div",{className:B("flex",x,Rze.test(x)?"":"gap-sm"),children:[(w||b)&&l.jsx("div",{className:"flex",children:l.jsx(D,{color:m,className:"pt-two flex size-5 justify-center leading-none",children:!b||w?l.jsx(Pze,{icon:s,avatar:a,destructive:p}):null})}),g,l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex flex-col gap-y-0.5",children:[t||l.jsxs(D,{variant:Ize[d]??"baseSemi",color:m,className:B("flex items-center gap-x-1.5",{"!text-caution":p}),children:[l.jsx("span",{className:_,children:n}),i&&l.jsx(yde,{text:i,variant:h})]}),e||r&&l.jsx(D,{className:"whitespace-pre-wrap",variant:"tinyRegular",color:"light",children:r}),c&&l.jsx(D,{variant:"tinyRegular",color:"super",onClick:u,children:c}),v]}),o&&l.jsx(D,{className:"mt-one whitespace-pre-wrap",variant:"tinyRegular",color:"light",children:o})]}),y]})});wp.displayName="BaseMenuItem";const vde=A.memo(e=>{const{active:t,show:n=!0,className:r,rounded:s,color:a="default",badgeVariant:o="super",disabled:i,href:c,onClick:u,onMouseDown:d,onMouseEnter:m,onMouseMove:h,testId:p,rightElement:g,focused:y,preserveRightElementSpace:v=!0,disableHoverStyles:x=!1,target:b,tooltipText:_,tooltipLayout:w,tooltipDelayDuration:S,role:C}=e;if(!n)return null;let E=a;i?E="ultraLight":t&&(E="super");const M=g??l.jsx(D,{color:t?"super":E,className:"size-5",children:l.jsx(be,{icon:Ea,size:"sm",className:t?"opacity-100":"opacity-0","aria-hidden":!t})});return l.jsx(Q0,{className:r,disabled:i,onClick:u,onMouseDown:d,onMouseEnter:m,onMouseMove:h,testId:p,rounded:s,href:c,focused:y,disableHoverStyles:x,target:b,tooltipText:_,tooltipLayout:w,tooltipDelayDuration:S,role:C,active:t,children:l.jsx(wp,{...e,color:E,badgeVariant:o,rightElement:v?M:g})})});vde.displayName="DefaultMenuItem";const xde=A.memo(e=>{const{className:t,rounded:n,color:r="default",disabled:s,onClick:a,onMouseDown:o,onMouseEnter:i,onMouseMove:c,testId:u,selected:d,active:m,disableHoverStyles:h=!1,tooltipText:p,tooltipLayout:g,tooltipDelayDuration:y,iconVariant:v="checkbox",disableActiveStyles:x=!1}=e;let b=r;s?b="ultraLight":(m||d)&&!x&&(b="super");const _=f.useMemo(()=>v==="check"?l.jsx(D,{color:d&&!x?"super":b,className:"size-5",children:l.jsx(be,{icon:Ea,size:"sm",className:d?"opacity-100":"opacity-0","aria-hidden":!d})}):l.jsx(D,{color:d&&!x?"super":b,children:l.jsx(be,{icon:d?Yne:m4e,size:"sm"})}),[b,d,v,x]);return l.jsx(Q0,{className:t,disabled:s,onClick:a,onMouseDown:o,onMouseEnter:i,onMouseMove:c,testId:u,rounded:n,disableHoverStyles:h,tooltipText:p,tooltipLayout:g,tooltipDelayDuration:y,children:l.jsx(wp,{...e,color:b,rightElement:_})})});xde.displayName="MultiSelectMenuItem";const bde=A.memo(e=>{const{className:t,rounded:n,color:r="default",disabled:s,onClick:a,onMouseDown:o,onMouseEnter:i,onMouseMove:c,testId:u,selected:d,active:m,rightElement:h,disableHoverStyles:p=!1,tooltipText:g,tooltipLayout:y,tooltipDelayDuration:v}=e;let x=r;s?x="ultraLight":(m||d)&&(x="super");const b=f.useMemo(()=>l.jsxs("div",{className:"gap-x-sm flex items-start pt-0.5",children:[h,l.jsx(Go,{active:d,disabled:s,size:"small"})]}),[s,h,d]);return l.jsx(Q0,{className:t,disabled:s,onClick:a,onMouseDown:o,onMouseEnter:i,onMouseMove:c,testId:u,rounded:n,disableHoverStyles:p,tooltipText:g,tooltipLayout:y,tooltipDelayDuration:v,children:l.jsx(wp,{...e,color:x,rightElement:b})})});bde.displayName="ToggleMenuItem";const _de=A.memo(e=>{const{className:t,rounded:n,color:r="default",disabled:s,onClick:a,onMouseDown:o,onMouseEnter:i,onMouseMove:c,testId:u,selected:d,active:m,showIconLeft:h=!1,disableHoverStyles:p=!1,tooltipText:g,tooltipLayout:y,tooltipDelayDuration:v}=e;let x=r;(m||d)&&(x="super");const b=l.jsx(D,{color:d?x:"ultraLight",className:B("leading-non flex pt-0.5",{"opacity-50":s}),children:l.jsx(be,{icon:d?L6:h4e,size:"sm"})});return l.jsx(Q0,{className:t,disabled:s,onClick:a,onMouseDown:o,onMouseEnter:i,onMouseMove:c,testId:u,rounded:n,disableHoverStyles:p,tooltipText:g,tooltipLayout:y,tooltipDelayDuration:v,children:l.jsx(wp,{...e,rightElement:h?void 0:b,leftElement:h?b:void 0})})});_de.displayName="RadioMenuItem";const wde=A.memo(e=>{const{text:t,show:n,className:r}=e;return n?l.jsxs(l.Fragment,{children:[l.jsx(z,{className:B("sm:mx-sm my-sm border-b first:hidden",r)}),t&&l.jsx(z,{variant:"background",className:"sm:mx-sm mt-xs mb-sm pr-sm",children:l.jsx(D,{className:"w-max",variant:"tinyMono",color:"light",children:t})})]}):null});wde.displayName="MenuItemSeparator";const jze=A.memo(e=>{const{className:t,rounded:n,color:r="default",disabled:s,onMouseDown:a,onMouseEnter:o,onMouseMove:i,testId:c,submenu:u,active:d,disableHoverStyles:m=!1,isSubmenuOpen:h,onSubmenuOpen:p,onSubmenuClose:g,menuWidth:y="200px"}=e;let v=r;s?v="ultraLight":d&&(v="super");const x=f.useMemo(()=>l.jsx(D,{color:"light",children:l.jsx(be,{icon:Jr,size:"sm"})}),[]),b=f.useMemo(()=>({className:"min-w-0",style:{width:y}}),[y]),_=f.useMemo(()=>({hasInteractiveContent:!0}),[]);return l.jsx(en,{isOpen:h,items:u,placement:"right-end",onOpen:p,onClose:g,isMobileStyle:!1,hoverOpen:!0,boxProps:b,popoverProps:_,children:l.jsx(Q0,{className:t,disabled:s,onMouseDown:a,onMouseEnter:o,onMouseMove:i,testId:c,rounded:n,disableHoverStyles:m,children:l.jsx(wp,{...e,color:v,rightElement:x})})})}),vh=A.memo(e=>{switch(e.type){case"default":{const{type:t,...n}=e;return l.jsx(vde,{...n,role:n.role||"menuitem"})}case"multiSelect":{const{type:t,...n}=e;return l.jsx(xde,{...n,role:"menuitemcheckbox"})}case"toggle":{const{type:t,...n}=e;return l.jsx(bde,{...n,role:"menuitemcheckbox"})}case"radio":{const{type:t,...n}=e;return l.jsx(_de,{...n,role:"menuitemradio"})}case"separator":{const{type:t,...n}=e;return l.jsx(wde,{...n})}case"nested":{const{type:t,...n}=e;return l.jsx(jze,{...n})}}});vh.displayName="MenuItem";var Oze=f.createContext(void 0);function _C(e){const t=f.useContext(Oze);return e||t||"ltr"}function Lze(e,[t,n]){return Math.min(n,Math.max(t,e))}function Dze(e,t){return f.useReducer((n,r)=>t[n][r]??n,e)}var r9="ScrollArea",[Sde,cUt]=Ga(r9),[Fze,bo]=Sde(r9),Cde=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:a=600,...o}=e,[i,c]=f.useState(null),[u,d]=f.useState(null),[m,h]=f.useState(null),[p,g]=f.useState(null),[y,v]=f.useState(null),[x,b]=f.useState(0),[_,w]=f.useState(0),[S,C]=f.useState(!1),[E,M]=f.useState(!1),T=kn(t,j=>c(j)),I=_C(s);return l.jsx(Fze,{scope:n,type:r,dir:I,scrollHideDelay:a,scrollArea:i,viewport:u,onViewportChange:d,content:m,onContentChange:h,scrollbarX:p,onScrollbarXChange:g,scrollbarXEnabled:S,onScrollbarXEnabledChange:C,scrollbarY:y,onScrollbarYChange:v,scrollbarYEnabled:E,onScrollbarYEnabledChange:M,onCornerWidthChange:b,onCornerHeightChange:w,children:l.jsx(on.div,{dir:I,...o,ref:T,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":_+"px",...e.style}})})});Cde.displayName=r9;var Ede="ScrollAreaViewport",Mde=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:s,...a}=e,o=bo(Ede,n),i=f.useRef(null),c=kn(t,i,o.onViewportChange);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),l.jsx(on.div,{"data-radix-scroll-area-viewport":"",...a,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:l.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});Mde.displayName=Ede;var hl="ScrollAreaScrollbar",Tde=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=bo(hl,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=s,i=e.orientation==="horizontal";return f.useEffect(()=>(i?a(!0):o(!0),()=>{i?a(!1):o(!1)}),[i,a,o]),s.type==="hover"?l.jsx(Uze,{...r,ref:t,forceMount:n}):s.type==="scroll"?l.jsx(Bze,{...r,ref:t,forceMount:n}):s.type==="auto"?l.jsx(kde,{...r,ref:t,forceMount:n}):s.type==="always"?l.jsx(s9,{...r,ref:t}):null});Tde.displayName=hl;var Uze=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=bo(hl,e.__scopeScrollArea),[a,o]=f.useState(!1);return f.useEffect(()=>{const i=s.scrollArea;let c=0;if(i){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return i.addEventListener("pointerenter",u),i.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),i.removeEventListener("pointerenter",u),i.removeEventListener("pointerleave",d)}}},[s.scrollArea,s.scrollHideDelay]),l.jsx(Rs,{present:n||a,children:l.jsx(kde,{"data-state":a?"visible":"hidden",...r,ref:t})})}),Bze=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=bo(hl,e.__scopeScrollArea),a=e.orientation==="horizontal",o=SC(()=>c("SCROLL_END"),100),[i,c]=Dze("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return f.useEffect(()=>{if(i==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[i,s.scrollHideDelay,c]),f.useEffect(()=>{const u=s.viewport,d=a?"scrollLeft":"scrollTop";if(u){let m=u[d];const h=()=>{const p=u[d];m!==p&&(c("SCROLL"),o()),m=p};return u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)}},[s.viewport,a,c,o]),l.jsx(Rs,{present:n||i!=="hidden",children:l.jsx(s9,{"data-state":i==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:jt(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:jt(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),kde=f.forwardRef((e,t)=>{const n=bo(hl,e.__scopeScrollArea),{forceMount:r,...s}=e,[a,o]=f.useState(!1),i=e.orientation==="horizontal",c=SC(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;o(i?u:d)}},10);return xh(n.viewport,c),xh(n.content,c),l.jsx(Rs,{present:r||a,children:l.jsx(s9,{"data-state":a?"visible":"hidden",...s,ref:t})})}),s9=f.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,s=bo(hl,e.__scopeScrollArea),a=f.useRef(null),o=f.useRef(0),[i,c]=f.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=Rde(i.viewport,i.content),d={...r,sizes:i,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:h=>a.current=h,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:h=>o.current=h};function m(h,p){return qze(h,o.current,i,p)}return n==="horizontal"?l.jsx(Vze,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&a.current){const h=s.viewport.scrollLeft,p=SG(h,i,s.dir);a.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=m(h,s.dir))}}):n==="vertical"?l.jsx($ze,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&a.current){const h=s.viewport.scrollTop,p=SG(h,i);a.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=m(h))}}):null}),Vze=f.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,a=bo(hl,e.__scopeScrollArea),[o,i]=f.useState(),c=f.useRef(null),u=kn(t,c,a.onScrollbarXChange);return f.useEffect(()=>{c.current&&i(getComputedStyle(c.current))},[c]),l.jsx(Ade,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":wC(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,m)=>{if(a.viewport){const h=a.viewport.scrollLeft+d.deltaX;e.onWheelScroll(h),jde(h,m)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:M2(o.paddingLeft),paddingEnd:M2(o.paddingRight)}})}})}),$ze=f.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,a=bo(hl,e.__scopeScrollArea),[o,i]=f.useState(),c=f.useRef(null),u=kn(t,c,a.onScrollbarYChange);return f.useEffect(()=>{c.current&&i(getComputedStyle(c.current))},[c]),l.jsx(Ade,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":wC(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,m)=>{if(a.viewport){const h=a.viewport.scrollTop+d.deltaY;e.onWheelScroll(h),jde(h,m)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:M2(o.paddingTop),paddingEnd:M2(o.paddingBottom)}})}})}),[Wze,Nde]=Sde(hl),Ade=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:i,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:m,...h}=e,p=bo(hl,n),[g,y]=f.useState(null),v=kn(t,T=>y(T)),x=f.useRef(null),b=f.useRef(""),_=p.viewport,w=r.content-r.viewport,S=ha(d),C=ha(c),E=SC(m,10);function M(T){if(x.current){const I=T.clientX-x.current.left,j=T.clientY-x.current.top;u({x:I,y:j})}}return f.useEffect(()=>{const T=I=>{const j=I.target;g?.contains(j)&&S(I,w)};return document.addEventListener("wheel",T,{passive:!1}),()=>document.removeEventListener("wheel",T,{passive:!1})},[_,g,w,S]),f.useEffect(C,[r,C]),xh(g,E),xh(p.content,E),l.jsx(Wze,{scope:n,scrollbar:g,hasThumb:s,onThumbChange:ha(a),onThumbPointerUp:ha(o),onThumbPositionChange:C,onThumbPointerDown:ha(i),children:l.jsx(on.div,{...h,ref:v,style:{position:"absolute",...h.style},onPointerDown:jt(e.onPointerDown,T=>{T.button===0&&(T.target.setPointerCapture(T.pointerId),x.current=g.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),M(T))}),onPointerMove:jt(e.onPointerMove,M),onPointerUp:jt(e.onPointerUp,T=>{const I=T.target;I.hasPointerCapture(T.pointerId)&&I.releasePointerCapture(T.pointerId),document.body.style.webkitUserSelect=b.current,p.viewport&&(p.viewport.style.scrollBehavior=""),x.current=null})})})}),E2="ScrollAreaThumb",Pde=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Nde(E2,e.__scopeScrollArea);return l.jsx(Rs,{present:n||s.hasThumb,children:l.jsx(Hze,{ref:t,...r})})}),Hze=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...s}=e,a=bo(E2,n),o=Nde(E2,n),{onThumbPositionChange:i}=o,c=kn(t,m=>o.onThumbChange(m)),u=f.useRef(void 0),d=SC(()=>{u.current&&(u.current(),u.current=void 0)},100);return f.useEffect(()=>{const m=a.viewport;if(m){const h=()=>{if(d(),!u.current){const p=Kze(m,i);u.current=p,i()}};return i(),m.addEventListener("scroll",h),()=>m.removeEventListener("scroll",h)}},[a.viewport,d,i]),l.jsx(on.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:jt(e.onPointerDownCapture,m=>{const p=m.target.getBoundingClientRect(),g=m.clientX-p.left,y=m.clientY-p.top;o.onThumbPointerDown({x:g,y})}),onPointerUp:jt(e.onPointerUp,o.onThumbPointerUp)})});Pde.displayName=E2;var a9="ScrollAreaCorner",zze=f.forwardRef((e,t)=>{const n=bo(a9,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?l.jsx(Gze,{...e,ref:t}):null});zze.displayName=a9;var Gze=f.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,s=bo(a9,n),[a,o]=f.useState(0),[i,c]=f.useState(0),u=!!(a&&i);return xh(s.scrollbarX,()=>{const d=s.scrollbarX?.offsetHeight||0;s.onCornerHeightChange(d),c(d)}),xh(s.scrollbarY,()=>{const d=s.scrollbarY?.offsetWidth||0;s.onCornerWidthChange(d),o(d)}),u?l.jsx(on.div,{...r,ref:t,style:{width:a,height:i,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function M2(e){return e?parseInt(e,10):0}function Rde(e,t){const n=e/t;return isNaN(n)?0:n}function wC(e){const t=Rde(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function qze(e,t,n,r="ltr"){const s=wC(n),a=s/2,o=t||a,i=s-o,c=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-i,d=n.content-n.viewport,m=r==="ltr"?[0,d]:[d*-1,0];return Ide([c,u],m)(e)}function SG(e,t,n="ltr"){const r=wC(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-s,o=t.content-t.viewport,i=a-r,c=n==="ltr"?[0,o]:[o*-1,0],u=Lze(e,c);return Ide([0,o],[0,i])(u)}function Ide(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function jde(e,t){return e>0&&e<t}var Kze=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function s(){const a={left:e.scrollLeft,top:e.scrollTop},o=n.left!==a.left,i=n.top!==a.top;(o||i)&&t(),n=a,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function SC(e,t){const n=ha(e),r=f.useRef(0);return f.useEffect(()=>()=>window.clearTimeout(r.current),[]),f.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function xh(e,t){const n=ha(t);Ql(()=>{let r=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(e),()=>{window.cancelAnimationFrame(r),s.unobserve(e)}}},[e,n])}var Yze=Cde,Qze=Mde,CG=Tde,EG=Pde;const ec=A.memo(({children:e,orientation:t="vertical",showScrollIndicator:n=!0,thumbClassName:r="",className:s,viewportRef:a,viewportClassName:o,showIndicatorOnHover:i=!0,onScroll:c})=>{const d="before:content-[''] before:absolute before:top-[50%] before:left-[50%] before:translate-x-[-50%] before:translate-y-[-50%] before:w-[100%] before:h-[100%] before:min-w-[10px] before:min-h-[10px]"+" rounded-full bg-inverse/15 duration-150 relative",m=B("flex flex-col p-[1px] duration-150",{"data-[state=visible]:opacity-100":n,"pointer-events-none":!n,"opacity-0":i,"opacity-100":!i});return l.jsxs(Yze,{className:B("w-full overflow-hidden",s),children:[l.jsx(Qze,{className:B("h-full w-full",o),ref:a,onScroll:c,children:e}),["vertical","both"].includes(t)&&l.jsx(CG,{forceMount:!0,orientation:"vertical",className:m,children:l.jsx(EG,{className:`!w-[6px] ${d} ${r}`})}),["horizontal","both"].includes(t)&&l.jsx(CG,{forceMount:!0,orientation:"horizontal",className:m,children:l.jsx(EG,{className:`!h-[6px] ${d} ${r}`})})]})}),MG="z-[1] pointer-events-none absolute top-0 w-[50px] h-full transition-all duration-500 from-base to-transparent";f.memo(({scrollRef:e,threshold:t=10})=>{const[n,r]=f.useState(!0),[s,a]=f.useState(!1);return f.useEffect(()=>{const o=()=>{if(e.current){const c=e.current.scrollLeft,u=e.current.scrollWidth,d=e.current.clientWidth,m=u-d;r(c<=t),a(c>=m-t)}},i=e.current;return i?.addEventListener("scrollend",o),o(),()=>{i?.removeEventListener("scrollend",o)}},[e,t]),l.jsxs(l.Fragment,{children:[l.jsx("div",{className:B(MG,"left-0 bg-gradient-to-r",{"opacity-0":n})}),l.jsx("div",{className:B(MG,"right-0 bg-gradient-to-l",{"opacity-0":s})})]})});A.memo(({scrollRef:e,buttonProps:t,children:n,className:r})=>{const s=f.useCallback(()=>{e.current?.scrollTo({left:e.current?.scrollLeft-e.current?.scrollWidth/3,behavior:"smooth"})},[e]),a=f.useCallback(()=>{e.current?.scrollTo({left:e.current?.scrollLeft+e.current?.scrollWidth/3,behavior:"smooth"})},[e]);return l.jsxs(z,{className:r,children:[l.jsx(ke,{pill:!0,icon:uS,onClick:s,...t}),n,l.jsx(ke,{pill:!0,icon:Jr,onClick:a,...t})]})});ec.displayName="ScrollArea";const bh=A.memo(({items:e,grid:t,cols:n=1,disableScrollArea:r=!1,menuItemClassName:s="",disableHoverStyles:a=!1})=>{const o=f.useMemo(()=>t&&n>1?{display:"grid",gridTemplateColumns:`repeat(${n}, minmax(0, 1fr))`,gap:"1px"}:void 0,[t,n]),i=({children:c})=>o?l.jsx("div",{role:"menu",style:o,children:c}):r?l.jsx("div",{role:"menu",className:"p-xs flex flex-col gap-px",children:c}):l.jsx(ec,{showIndicatorOnHover:!1,className:"p-xs",children:l.jsx("div",{role:"menu",className:"flex flex-col gap-px",children:c})});return l.jsx(i,{children:e.map((c,u)=>c.type==="separator"?l.jsx(vh,{...c},u):l.jsx(vh,{className:s,disableHoverStyles:a,...c},u))})});bh.displayName="Menu";const Ode={...Yj},Xze=Ode.useInsertionEffect,Zze=Xze||(e=>e());function Jze(e){const t=f.useRef(()=>{});return Zze(()=>{t.current=e}),f.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}var T2=typeof document<"u"?f.useLayoutEffect:f.useEffect;function _P(){return _P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_P.apply(this,arguments)}let TG=!1,eGe=0;const kG=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+eGe++;function tGe(){const[e,t]=f.useState(()=>TG?kG():void 0);return T2(()=>{e==null&&t(kG())},[]),f.useEffect(()=>{TG=!0},[]),e}const nGe=Ode.useId,Lde=nGe||tGe,rGe=f.forwardRef(function(t,n){const{context:{placement:r,elements:{floating:s},middlewareData:{arrow:a,shift:o}},width:i=14,height:c=7,tipRadius:u=0,strokeWidth:d=0,staticOffset:m,stroke:h,d:p,style:{transform:g,...y}={},...v}=t,x=Lde(),[b,_]=f.useState(!1);if(T2(()=>{if(!s)return;mo(s).direction==="rtl"&&_(!0)},[s]),!s)return null;const[w,S]=r.split("-"),C=w==="top"||w==="bottom";let E=m;(C&&o!=null&&o.x||!C&&o!=null&&o.y)&&(E=null);const M=d*2,T=M/2,I=i/2*(u/-8+1),j=c/2*u/4,N=!!p,P=E&&S==="end"?"bottom":"top";let R=E&&S==="end"?"right":"left";E&&b&&(R=S==="end"?"left":"right");const k=a?.x!=null?E||a.x:"",O=a?.y!=null?E||a.y:"",L=p||"M0,0"+(" H"+i)+(" L"+(i-I)+","+(c-j))+(" Q"+i/2+","+c+" "+I+","+(c-j))+" Z",F={top:N?"rotate(180deg)":"",left:N?"rotate(90deg)":"rotate(-90deg)",bottom:N?"":"rotate(180deg)",right:N?"rotate(-90deg)":"rotate(90deg)"}[w];return f.createElement("svg",_P({},v,{"aria-hidden":!0,ref:n,width:N?i:i+M,height:i,viewBox:"0 0 "+i+" "+(c>i?c:i),style:{position:"absolute",pointerEvents:"none",[R]:k,[P]:O,[w]:C||N?"100%":"calc(100% - "+M/2+"px)",transform:[F,g].filter(U=>!!U).join(" "),...y}}),M>0&&f.createElement("path",{clipPath:"url(#"+x+")",fill:"none",stroke:h,strokeWidth:M+(p?0:1),d:L}),f.createElement("path",{stroke:M&&!p?v.fill:"none",d:L}),f.createElement("clipPath",{id:x},f.createElement("rect",{x:-T,y:T*(N?-1:1),width:i+M,height:i})))});function sGe(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(s=>s(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(s=>s!==n))||[])}}}const aGe=f.createContext(null),oGe=f.createContext(null),iGe=()=>{var e;return((e=f.useContext(aGe))==null?void 0:e.id)||null},lGe=()=>f.useContext(oGe);function cGe(e){const{open:t=!1,onOpenChange:n,elements:r}=e,s=Lde(),a=f.useRef({}),[o]=f.useState(()=>sGe()),i=iGe()!=null,[c,u]=f.useState(r.reference),d=Jze((p,g,y)=>{a.current.openEvent=p?g:void 0,o.emit("openchange",{open:p,event:g,reason:y,nested:i}),n?.(p,g,y)}),m=f.useMemo(()=>({setPositionReference:u}),[]),h=f.useMemo(()=>({reference:c||r.reference||null,floating:r.floating||null,domReference:r.reference}),[c,r.reference,r.floating]);return f.useMemo(()=>({dataRef:a,open:t,onOpenChange:d,elements:h,events:o,floatingId:s,refs:m}),[t,d,h,o,s,m])}function uGe(e){e===void 0&&(e={});const{nodeId:t}=e,n=cGe({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,s=r.elements,[a,o]=f.useState(null),[i,c]=f.useState(null),d=s?.domReference||a,m=f.useRef(null),h=lGe();T2(()=>{d&&(m.current=d)},[d]);const p=Xae({...e,elements:{...s,...i&&{reference:i}}}),g=f.useCallback(_=>{const w=Gs(_)?{getBoundingClientRect:()=>_.getBoundingClientRect(),contextElement:_}:_;c(w),p.refs.setReference(w)},[p.refs]),y=f.useCallback(_=>{(Gs(_)||_===null)&&(m.current=_,o(_)),(Gs(p.refs.reference.current)||p.refs.reference.current===null||_!==null&&!Gs(_))&&p.refs.setReference(_)},[p.refs]),v=f.useMemo(()=>({...p.refs,setReference:y,setPositionReference:g,domReference:m}),[p.refs,y,g]),x=f.useMemo(()=>({...p.elements,domReference:d}),[p.elements,d]),b=f.useMemo(()=>({...p,...r,refs:v,elements:x,nodeId:t}),[p,v,x,t,r]);return T2(()=>{r.dataRef.current.floatingContext=b;const _=h?.nodesRef.current.find(w=>w.id===t);_&&(_.context=b)}),f.useMemo(()=>({...p,context:b,refs:v,elements:x}),[p,v,x,b])}class dGe{static detectOverflowOptions={padding:8};static offsetMiddleware=sO({mainAxis:4,crossAxis:0});static shiftMiddleware=Zae({limiter:Jae(),...this.detectOverflowOptions});static flipMiddleware=eoe(this.detectOverflowOptions);static sizeMiddleware(t={matchTargetWidth:!1},n=!0){return toe({...this.detectOverflowOptions,apply({availableHeight:r,rects:s,elements:a}){n&&(a.floating.style.maxHeight=`${r}px`),(t.matchTargetWidth??!0)&&(a.floating.style.width=`${s.reference.width}px`)}})}static defaultMiddleWare(t={avoidCollisions:!0,matchTargetWidth:!1}){const n=t.avoidCollisions??!0,r=t.avoidPositionCollisions!==void 0?t.avoidPositionCollisions:n,s=t.avoidSizeCollisions!==void 0?t.avoidSizeCollisions:n;return[this.offsetMiddleware,r&&this.shiftMiddleware,r&&this.flipMiddleware,this.sizeMiddleware({matchTargetWidth:t.matchTargetWidth},s)].filter(Boolean)}}const fGe=130,ci=A.memo(({content:e,contentClassName:t="",children:n,delayTime:r=200,isOpen:s,hoverOpen:a,placement:o="bottom-end",matchTargetWidth:i=!1,childrenClassName:c,testId:u,overlayProps:d,onOpen:m,onClose:h,disableAnimation:p,hasInteractiveContent:g=!1,avoidCollisions:y=!0,avoidPositionCollisions:v,avoidSizeCollisions:x,customFloatingUIOptions:b,disableShadow:_,floatingElementProps:w,arrowClassName:S,borderRadius:C="rounded-xl",sideOffset:E=4})=>{const M=f.useRef(null),T=f.useMemo(()=>{const de=dGe.defaultMiddleWare({avoidCollisions:y,avoidPositionCollisions:v,avoidSizeCollisions:x,matchTargetWidth:i});return E!==4&&(de[0]=sO({mainAxis:E,crossAxis:0})),S&&de.push(noe({element:M})),de},[y,v,x,i,S,E]),{refs:I,floatingStyles:j,placement:N,context:P}=uGe({strategy:"fixed",placement:o,middleware:T,whileElementsMounted:(...de)=>Yae(...de),...b}),[R,k]=f.useState(!1),O=f.useRef(R),[L,F]=f.useState(!1),U=f.useRef(L),[V,W]=f.useState(!1),H=s!==void 0,[G,K]=f.useState(!1),$=f.useMemo(()=>H?s:G,[H,s,G]),q=f.useCallback(de=>{de.stopPropagation()},[]),Z=f.useCallback(()=>{$||(m?.(),H||K(!0))},[H,$,m]),se=f.useCallback(()=>{W(de=>$&&!de?(h?.(),H||K(!1),p?!1:(setTimeout(()=>{W(!1)},fGe),!0)):de)},[H,$,h,p]),Y=f.useCallback(()=>{$?se():Z()},[se,Z,$]),Q=f.useCallback(()=>{setTimeout(()=>{!U.current&&!O.current&&se()},r)},[r,se,U,O]);f.useEffect(()=>{if(!a||!$||V)return;const de=setInterval(()=>{const ve=I.reference.current,Ae=I.floating.current,Se=ve.matches(":hover"),De=Ae.matches(":hover");!Se&&O.current&&le(),!De&&U.current&&pe(),!Se&&!De&&Q()},250);return()=>clearInterval(de)},[V,$,Q,a]);const re=f.useCallback(()=>{setTimeout(()=>{if(H&&h){h();return}se()},0)},[H,h,se]),te=f.useCallback(()=>{O.current=!0,k(!0),Z()},[Z]),le=f.useCallback(()=>{O.current=!1,k(!1),Q()},[Q]),ie=()=>{U.current=!0,F(!0)},pe=f.useCallback(()=>{U.current=!1,F(!1),Q()},[Q]),me=f.useCallback(de=>{de.stopPropagation(),Y()},[Y]);return l.jsxs(l.Fragment,{children:[l.jsx("span",{onMouseEnter:a?te:void 0,onMouseLeave:a?le:void 0,ref:I.setReference,onMouseDown:q,onClick:a?void 0:me,className:c,"data-test-id":u,children:n}),e?l.jsx(pp,{isOpen:$||V,onClose:re,transparent:!0,childVariant:"clean",disableAnimation:p,delayClose:!1,...d,children:l.jsx("div",{className:"absolute inset-x-0 top-0",children:l.jsx("div",{className:"flex",ref:I.setFloating,onMouseEnter:a?ie:void 0,onMouseLeave:a?pe:void 0,onClick:de=>{g&&de.stopPropagation()},style:j,...w,children:l.jsxs(z,{variant:"background",className:B({"shadow-overlay":!_},"flex min-h-0 min-w-0","data-[placement=bottom-end]:origin-top-right data-[placement=bottom-start]:origin-top-left data-[placement=top-end]:origin-bottom-right data-[placement=top-start]:origin-bottom-left",{"duration-150":!p,"animate-out fade-out zoom-out-[0.97] ease-in":V&&!p,"p-xs animate-in fade-in zoom-in-[0.97] ease-out":!p},t,C),"data-placement":N,children:[e,S&&l.jsx(rGe,{ref:M,context:P,className:S})]})})})}):null]})});ci.displayName="Popover";const en=A.memo(({isOpen:e,hoverOpen:t=!1,children:n,items:r,placement:s,disabled:a=!1,grid:o,onOpen:i,title:c,onClose:u,testid:d,isMobileStyle:m,boxProps:h,modalProps:p,popoverProps:g,cols:y=1,footer:v=null,menuItemClassName:x="",contentClassName:b="",wrapperClassName:_,header:w,alwaysShowChildren:S,size:C,showFooterOnMobile:E=!1})=>{const[M,T]=f.useState(!1),I=e!==void 0,j=I?e:M,N=f.useCallback(()=>{if(!j&&!a){const L=i?.()??!0;!I&&L&&T(!0)}},[a,I,i,j]),P=f.useCallback(()=>{j&&!a&&(u?.(),I||T(!1))},[a,I,u,j]),R=f.useMemo(()=>r.map(L=>({...L,size:C??(m?Ft.regular:void 0),onClick:F=>{!a&&"onClick"in L&&(L.onClick?.(F),L.type==="toggle"||L.type==="multiSelect"||P())}})),[a,P,r,C,m]),k=f.useMemo(()=>l.jsx(z,{className:B("flex max-h-[80vh] min-h-0 min-w-[160px] flex-col",{"max-w-[250px]":!o,"gap-two grid max-w-lg":o}),...h,children:l.jsxs("div",{className:"flex h-full flex-col",children:[w&&l.jsx(z,{className:"mb-sm mx-sm flex-shrink-0 border-b",children:w}),c&&l.jsx(z,{testId:d,className:"mb-sm mx-sm flex-shrink-0 border-b",children:l.jsx(D,{variant:"smallBold",className:"py-sm mb-1",children:c})}),l.jsxs(ec,{orientation:"vertical",showIndicatorOnHover:!1,className:"min-h-0 flex-1 overflow-auto",children:[l.jsx(bh,{items:R,grid:o,cols:y,menuItemClassName:x,disableScrollArea:!0}),v]})]})}),[h,y,v,o,w,R,x,d,c]);return r.every(L=>L.show===!1)?S?n:null:m?l.jsxs(l.Fragment,{children:[l.jsx(rn,{variant:"bottom-left-sheet",actionList:ce,isOpen:j,onClose:P,footerContent:E&&v?v:void 0,footerClassname:E&&v?"!pt-0 pb-5 sticky bottom-0":void 0,wrapperClassname:E&&v?"!pb-0":void 0,...p,children:l.jsx(z,{className:"divide-y",children:l.jsx(bh,{items:R,grid:o,menuItemClassName:x})})}),l.jsx("span",{className:_,onClick:t?void 0:L=>{L.stopPropagation(),N()},children:n})]}):l.jsx(ci,{...g,hoverOpen:t,isOpen:j,placement:s,onClose:P,onOpen:N,contentClassName:b,childrenClassName:_,content:k,hasInteractiveContent:!0,children:n})});en.displayName="DropDownMenu";const mGe=[{label:"Comet Assistant",value:"AGENT",description:"Use cases where Comet Assistant is acting on your behalf and does the wrong thing. For general Comet issues please use Comet Browser instead."},{label:"Comet Browser",value:"BROWSER",description:"General Comet UI/UX issues. For general Perplexity web issues please use Web instead."},{label:"Product",value:"PRODUCT",description:"General product features, UI/UX issues, or user experience problems"},{label:"AI",value:"AI",description:"Core AI model issues, accuracy problems, or response quality"},{label:"Enterprise",value:"ENTERPRISE",description:"Enterprise-specific features"},{label:"Platform",value:"PLATFORM",description:"Infrastructure, performance, or system-level issues"},{label:"Mobile",value:"MOBILE",description:"Mobile app functionality or design issues"},{label:"Search",value:"SEARCH",description:"Search functionality, results quality, or indexing problems"},{label:"Web",value:"WEB",description:"General Web UI/UX issues."}],hGe=({value:e,onSelect:t,options:n,placeholder:r="Select a category..."})=>{const a=n.find(c=>c.value===e)?.label||r,o=n.map(c=>({type:"default",text:c.label,tooltipText:c.description,onClick:()=>t(c.value),show:!0})),i={text:a,variant:"common",size:"small",trailingComponent:l.jsx(xt,{icon:pC.faChevronDown}),extraCSS:"w-full justify-between border-subtler bg-base p-sm dark:border-subtle dark:bg-offset"};return l.jsx(en,{items:o,isMobileStyle:!1,placement:"bottom-start",children:l.jsx(ke,{...i})})},Dde=({isOpen:e,onClose:t})=>{const[n,r]=f.useState(""),[s,a]=f.useState(""),[o,i]=f.useState(""),[c,u]=f.useState(!1),[d,m]=f.useState(null),{firstResult:{context_uuid:h,backend_uuid:p,expiry_time:g,collection_info:{slug:y}={}}={}}=zt(),v=vo(),{handleAccessChange:x}=XL({contextUUID:h,rwToken:v,collectionSlug:y,reason:"Bug Report"}),{handleRemoveExpiry:b}=mWe({slugOrUUID:p}),_=async()=>{if(!n.trim()){m("Please describe the bug");return}u(!0),m(null);try{const S=fWe(window.location.href),C=await uWe(n,S,s,o);t(),C?.status==="success"&&C.linear_url&&window.open(C.linear_url,"_blank"),x(pt.PUBLIC_READ),g&&await b(),r(""),i("")}catch(S){ee.error("Failed to submit bug report",S),m("Failed to submit bug report. Please try again.")}finally{u(!1)}},w=()=>{r(""),i(""),a(""),m(null),t()};return l.jsx(rn,{isOpen:e,onClose:w,title:"Report a Bug",variant:"large",actionList:[{text:"Cancel",onClick:w,variant:"common"},{text:c?"Submitting...":"Submit Bug Report",onClick:_,variant:"primary",disabled:c||!n.trim(),isLoading:c}],children:l.jsxs("div",{className:"space-y-md",children:[l.jsxs("div",{children:[l.jsx(D,{variant:"base",className:"mb-sm",children:"Category (optional)"}),l.jsx(hGe,{value:o,onSelect:i,options:mGe,placeholder:"Select a category..."})]}),l.jsxs("div",{children:[l.jsx(D,{variant:"base",className:"mb-sm",children:"Who should we assign this bug to? (optional)"}),l.jsx(el,{value:s,onChange:S=>a(S),placeholder:"Please provide the email address. E.g. johnny@perplexity.ai",className:"w-full",isMobileUserAgent:!1,isMobileStyle:!1,minRows:1})]}),l.jsxs("div",{children:[l.jsx(D,{variant:"base",className:"mb-sm",children:"Please describe the bug you encountered:"}),l.jsx(el,{value:n,onChange:S=>r(S),placeholder:"Describe what happened, steps to reproduce, and any other relevant details...",className:"w-full",isMobileUserAgent:!1,isMobileStyle:!1,minRows:1})]}),d&&l.jsx(D,{variant:"smallMono",color:"red",className:"text-sm",children:d})]})})};var Dn=(e=>(e.MACOS="macos",e.WINDOWS="windows",e))(Dn||{}),os=(e=>(e.NEW_THREAD="NEW_THREAD",e.STOP_GENERATING="STOP_GENERATING",e.TOGGLE_INCOGNITO="TOGGLE_INCOGNITO",e.SHOW_SHORTCUTS="SHOW_SHORTCUTS",e.FOCUS_ASK_INPUT="FOCUS_ASK_INPUT",e.TOGGLE_DICTATION="TOGGLE_DICTATION",e.TOGGLE_V2V="TOGGLE_V2V",e))(os||{});const uUt="keyboard-shortcuts",Fde=(e,t,n=!1)=>[{type:"NEW_THREAD",label:e.formatMessage({defaultMessage:"New Thread",id:"76XSxT3hV8"}),macos:["","K"],windows:t?["Ctrl","Shift","P"]:["Ctrl","I"],editable:!0,global:!0},{type:"TOGGLE_V2V",label:e.formatMessage({defaultMessage:"Toggle Voice Mode",id:"ulahVrf1h4"}),macos:["","Shift","B"],windows:["Ctrl","Shift","B"],editable:!0,global:!0,requiresAuth:!0,windowsAppOnly:!0},{type:"TOGGLE_DICTATION",label:e.formatMessage({defaultMessage:"Toggle Voice Dictation",id:"tWip/8rlIv"}),macos:["","D"],windows:["Ctrl","D"],editable:!1,windowsAppOnly:!0},{type:"TOGGLE_INCOGNITO",label:e.formatMessage({defaultMessage:"Toggle Incognito",id:"YNMg3vd9IG"}),macos:["",";"],windows:["Ctrl",";"],editable:!1},{type:"SHOW_SHORTCUTS",label:e.formatMessage({defaultMessage:"Show Shortcuts",id:"8o6rUVckYq"}),macos:["","/"],windows:["Ctrl","/"],editable:!1},{type:"FOCUS_ASK_INPUT",label:e.formatMessage({defaultMessage:"Focus Ask Input",id:"RP5ybIk9wM"}),macos:["","J"],windows:["Ctrl","J"],editable:!1}].filter(s=>(!s.requiresAuth||n)&&(!s.windowsAppOnly||t)),pGe={Meta:"",Shift:"",ArrowUp:"",ArrowDown:"",ArrowLeft:"",ArrowRight:"",Enter:"",Period:".",Semicolon:";",Slash:"/",Escape:"Esc"},gGe={"":"Meta","":"Shift","":"ArrowUp","":"ArrowDown","":"ArrowLeft","":"ArrowRight","":"Enter"},yGe=(e,t="macos")=>e==="Meta"?t==="windows"?"Win":"":pGe[e]||e,NG=e=>e==="Win"?"Meta":gGe[e]||e,vGe=({label:e,keys:t})=>l.jsxs(D,{color:"light",className:"py-md flex place-content-between items-center",children:[l.jsx(D,{as:"dd",variant:"small",color:"light",className:"line-clamp-1 overflow-hidden text-clip",children:e}),l.jsx(z,{as:"dl",className:"space-x-two flex items-center",children:t.map(n=>l.jsx(z,{className:"px-xs flex h-5 min-w-5 items-center justify-center rounded border font-mono",children:n},n))})]}),xGe=A.memo(({closeModal:e,isOpen:t})=>{const n=X(),{isMacOS:r,isWindowsApp:s}=Wt(),a=Je(),o=r?Dn.MACOS:Dn.WINDOWS,i=f.useMemo(()=>Fde(n,s,a),[n,s,a]);return l.jsx(pp,{childVariant:"hide-chrome",isOpen:t,canOutsideClickClose:!0,onClose:e,children:l.jsxs(z,{variant:"offset",className:"p-md relative w-[90vw] max-w-screen-sm rounded-xl",children:[l.jsx(D,{className:"mb-2",variant:"section-title",as:"h2",children:n.formatMessage({defaultMessage:"Keyboard Shortcuts",id:"nFkLBjIGMy"})}),l.jsx(z,{as:"dl",className:"divide-y",children:i.map(c=>l.jsx(vGe,{label:c.label,keys:c[o]},c.type))})]})})});var wT={},AG;function bGe(){return AG||(AG=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="fas",n="user",r=448,s=512,a=[128100,62144],o="f007",i="M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304l-91.4 0z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faUser=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(wT)),wT}var _Ge=bGe(),ST={},PG;function wGe(){return PG||(PG=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="fas",n="user-secret",r=448,s=512,a=[128373],o="f21b",i="M224 16c-6.7 0-10.8-2.8-15.5-6.1C201.9 5.4 194 0 176 0c-30.5 0-52 43.7-66 89.4C62.7 98.1 32 112.2 32 128c0 14.3 25 27.1 64.6 35.9c-.4 4-.6 8-.6 12.1c0 17 3.3 33.2 9.3 48l-59.9 0C38 224 32 230 32 237.4c0 1.7 .3 3.4 1 5l38.8 96.9C28.2 371.8 0 423.8 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c16.4 0 29.7-13.3 29.7-29.7c0-58.5-28.2-110.4-71.7-143L415 242.4c.6-1.6 1-3.3 1-5c0-7.4-6-13.4-13.4-13.4l-59.9 0c6-14.8 9.3-31 9.3-48c0-4.1-.2-8.1-.6-12.1C391 155.1 416 142.3 416 128c0-15.8-30.7-29.9-78-38.6C324 43.7 302.5 0 272 0c-18 0-25.9 5.4-32.5 9.9c-4.8 3.3-8.8 6.1-15.5 6.1zm56 208l-12.4 0c-16.5 0-31.1-10.6-36.3-26.2c-2.3-7-12.2-7-14.5 0c-5.2 15.6-19.9 26.2-36.3 26.2L168 224c-22.1 0-40-17.9-40-40l0-14.4c28.2 4.1 61 6.4 96 6.4s67.8-2.3 96-6.4l0 14.4c0 22.1-17.9 40-40 40zm-88 96l16 32L176 480 128 288l64 32zm128-32L272 480 240 352l16-32 64-32z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faUserSecret=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(ST)),ST}var SGe=wGe();const o9=A.memo(({width:e="w-14",fillColor:t="fill-max",svgClassName:n,...r})=>{const s=B("h-auto group",e);return l.jsx("div",{className:s,...r,children:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 99 36",className:n,children:[l.jsx("path",{className:t,d:"M50.0858 22.3525C50.0858 23.9034 51.4144 24.8675 53.5527 24.8675C55.1684 24.8675 56.5468 24.3911 57.5393 23.4903C58.5991 22.5277 59.1595 21.1074 59.1595 19.3821V19.3262L53.1962 19.956C51.1311 20.147 50.0858 20.9534 50.0858 22.3525Z"}),l.jsx("path",{className:t,d:"M96.7015 8.60077C95.1033 5.76707 92.7331 3.49361 89.8477 2.02806C87.198 0.682565 84.1956 0 80.925 0H4.46551C1.9767 0.000755049 -0.00527674 2.02051 1.0554e-05 4.5084V36H80.925C83.8489 36 86.556 35.4503 88.9904 34.3736L78.7837 21.1444H78.5571L72.8105 28.5922H67.2136V27.4883L75.0795 17.6697L67.2136 7.851V6.74712H72.8105L78.5571 14.1949H78.7837L84.5302 6.74712H90.1264V7.851L82.2612 17.6697L93.3728 31.5407C94.6878 30.3568 95.8171 28.9675 96.7023 27.3977C98.2266 24.6946 99 21.5355 99 18.0102C99 14.4849 98.2266 11.3054 96.7015 8.60077ZM40.5936 28.593H35.122V14.6268C35.122 13.5886 34.8214 12.7392 34.2518 12.1699C33.6612 11.5794 32.8009 11.2804 31.6951 11.2804C30.0009 11.2804 27.1586 11.926 27.1586 16.2517V28.593H21.687V14.6268C21.687 13.5886 21.3863 12.7392 20.8168 12.1699C20.2262 11.5794 19.3658 11.2804 18.26 11.2804C16.5658 11.2804 13.7228 11.926 13.7228 16.2517V28.593H8.29124V7.35569H13.5649V9.06814C13.5649 9.20934 13.7402 9.27276 13.8308 9.16479C14.25 8.66721 14.7236 8.2693 15.2788 7.94236C16.3883 7.29 17.8182 6.96005 19.5275 6.96005C21.2368 6.96005 22.8419 7.38212 24.0602 8.21418C24.9538 8.82426 25.5248 9.54835 25.8828 10.1554C25.938 10.2498 26.0739 10.2543 26.1358 10.1645C27.5997 8.0375 29.88 6.9608 32.9232 6.9608C35.1363 6.9608 37.0239 7.60184 38.3812 8.81445C39.8277 10.1063 40.5928 11.9932 40.5928 14.2704L40.5936 28.593ZM64.5518 28.593H59.2781V26.5407C59.2781 26.4033 59.1074 26.3361 59.016 26.4388C57.5076 28.1316 55.3406 28.9894 52.5625 28.9894C47.7344 28.9894 44.6149 26.5083 44.6149 22.6696C44.6149 20.7261 45.3718 19.1699 46.8658 18.0449C48.1733 17.0596 49.9838 16.4503 52.249 16.2321L59.1603 15.5148V14.8647C59.1603 12.2658 57.806 11.0033 55.0203 11.0033C53.1093 11.0033 50.6885 11.6119 50.366 14.5105L50.3282 14.8458H45.1097C45.1097 14.8458 45.0863 14.4154 45.1746 13.8129C45.7978 9.61102 49.7542 6.91927 55.0989 6.91927C60.93 6.91927 64.5525 10.0852 64.5525 15.181L64.5518 28.593Z"})]})})});o9.displayName="Max";const Cn=A.memo(({size:e="medium",user:t,showEdit:n,onChange:r,anon:s,altText:a,defaultIcon:o=_Ge.faUser,rounded:i=!0,showBackground:c=!0,showProBadge:u,showMaxBadge:d,className:m,proBadgeClassName:h,badgeProps:p})=>{let g="xs";e==="medium"?g="1x":e==="xlarge"&&(g="2x");const y=f.useCallback(()=>{const v=document.createElement("input");v.type="file",v.accept="image/*",v.onchange=x=>{const b=x.target.files?.[0];if(b){const _=new FileReader;_.onload=w=>{r&&r(w.target?.result)},_.readAsDataURL(b)}},v.click()},[r]);return l.jsx("div",{className:B("text-offset relative",m),children:l.jsxs(z,{variant:c?"offset":"transparent",className:B("relative flex aspect-square shrink-0 items-center justify-center",{"rounded-full":i,"size-3":e==="tiny","size-4":e==="mini","size-5":e==="small","size-6":e==="base","size-8":e==="medium","size-10":e==="large","size-20":e==="xlarge","!ring-super border-subtlest border-2 ring-[1.5px]":u,"!ring-max border-subtlest border-2 ring-[1.5px]":d}),children:[p?.show&&l.jsx("div",{className:B("absolute right-0 top-0 h-3 w-3 -translate-y-1/4 translate-x-1/4 select-none rounded-full border-2",p?.className)}),t&&!s?l.jsx("img",{alt:a??"User avatar",className:B("size-full object-cover",{"rounded-full":i}),src:t}):l.jsx(D,{color:"light",children:l.jsx(xt,{size:g,icon:s?SGe.faUserSecret:o,fixedWidth:!0})}),n&&e!=="small"&&l.jsx("div",{className:"absolute -bottom-1 -right-2",children:l.jsx(ye,{ariaLabel:"Edit avatar",variant:t?"common":"primary",size:e!=="xlarge"?"tiny":"small",pill:!0,icon:t?uc:mr,onClick:y})}),u&&l.jsx("div",{className:B("absolute top-full -mt-[6px] w-[24px] rounded-r-full bg-current p-[1.5px]",{"opacity-0":e==="small"},{"w-lg -mt-[10px]":e==="xlarge"},h),children:l.jsx(tC,{fillColor:"fill-super",width:"w-full",sizeVariant:"small"})}),d&&l.jsx("div",{className:B("absolute left-1/2 top-full -mt-[6px] flex w-[28px] -translate-x-1/2 items-center justify-center rounded-full bg-current p-[1.5px]",{"opacity-0":e==="small"},{"w-xl -mt-[10px]":e==="xlarge"}),children:l.jsx(o9,{width:"w-full"})})]})})});Cn.displayName="Avatar";const ro=10,RG=20,dUt=ro*41+46,CGe=(e,t)=>{const{value:n,loading:r}=Ut({flag:"file-manager-ui-redesign",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},EGe=async({reason:e})=>{try{return(await(await er({urlPath:"/rest/collections/list_recent",reason:e})).json()).map(r=>({...r,link:r.link.replace(/^\/collections\//,"/spaces/")}))}catch(t){return ee.error("Failed to get recent collections.",t),[]}},MGe=async({headers:e={},params:t,reason:n})=>{const r=await ne.GET("/rest/collections/list_user_collections",n,{params:{query:{limit:t.limit,offset:t.offset,version:ni}},timeoutMs:je(),headers:e});if(!r.response.ok||!r.data)throw new Me("API_CLIENTS_ERROR",{message:"Failed to list user collections",cause:r.error});return r.data},TGe=async({headers:e={},params:t,reason:n})=>{try{const{error:r,data:s}=await ne.GET("/rest/collections/get_collection",n,{params:{query:t},headers:e,timeoutMs:je()});if(r)throw new Me("API_CLIENTS_ERROR",{message:"Failed to get collection",cause:r});if(!s?.status||s?.status==="failed")throw new Me("API_CLIENTS_ERROR",{message:"Failed to get collection",cause:s});return s}catch(r){ee.error(r);return}},kGe=async({headers:e={},params:t,reason:n})=>{try{const{error:r}=await ne.PUT("/rest/collections/{collection_uuid}/access",n,{params:{path:{collection_uuid:t.collection_uuid}},headers:e,body:{updated_access:t.updated_access},timeoutMs:je()});if(r)throw new Me("API_CLIENTS_ERROR",{message:"Failed to update collection access",cause:r})}catch(r){ee.error(r)}},fUt=async({headers:e={},params:t,reason:n})=>{try{const{error:r}=await ne.POST("/rest/collections/{collection_uuid}/remove_user",n,{params:{path:{collection_uuid:t.collectionUUID}},body:{email:t.email},headers:e,timeoutMs:je()});if(r)throw new Me("API_CLIENTS_ERROR",{message:"Failed to remove user from collection",cause:r})}catch(r){ee.error(r)}},mUt=async({headers:e={},params:t,reason:n})=>{try{const{error:r,data:s}=await ne.GET("/rest/collections/list_collection_threads",n,{params:{query:t},headers:e,timeoutMs:je()});if(r)throw new Me("API_CLIENTS_ERROR",{message:"Failed to list collection threads",cause:r});if(!s||!Array.isArray(s))throw new Me("API_CLIENTS_ERROR",{message:"Failed to list collection threads",cause:s});return s}catch(r){return ee.error(r),[]}},hUt=async({reason:e})=>{try{const{error:t,data:n}=await ne.GET("/rest/collections/invitations",e,{});if(t)throw new Me("API_CLIENTS_ERROR",{message:"Failed to get invited collections",cause:t});return{collections:n.collections}}catch{return{collections:[]}}},Vx=async({params:e,reason:t})=>{try{const{error:n,data:r}=await ne.POST("/rest/collections/upsert_thread_collection",t,{body:e});if(n)throw new Me("API_CLIENTS_ERROR",{message:"Failed to upsert thread collection",cause:n});if(!r)throw new Me("API_CLIENTS_ERROR",{message:"Failed to upsert thread collection",cause:r});return r}catch{return}},pUt=async({params:e,reason:t})=>{try{const{error:n,data:r}=await ne.POST("/rest/collections/invite_to_collection",t,{body:e,timeoutMs:je()});if(n)throw new Me("API_CLIENTS_ERROR",{message:"Failed to invite user to collection",cause:n});return r}catch{return}},IG=async({collectionUUID:e,entryUUID:t,reason:n})=>{try{const{error:r}=await ne.DELETE("/rest/collections/remove_collection_thread",n,{params:{query:{collection_uuid:e,entry_uuid:t}}});if(r)throw new Me("API_CLIENTS_ERROR",{message:"Failed to remove thread from collection",cause:r})}catch{return}},xc=({collectionSlug:e,reason:t,enabled:n=!!e})=>{const r=async()=>e?await TGe({params:{collection_slug:e,version:ni},reason:t})??null:null,{data:s,isLoading:a}=Ke({enabled:n,queryKey:["get_collection",{collection_slug:e?.slice(-22)}],queryFn:r,placeholderData:W0});return f.useMemo(()=>({collection:s??void 0,isLoading:a}),[s,a])},wP=async({request:e,reason:t})=>{const{fileRepositoryInfo:n,limit:r,offset:s,searchTerm:a,fileStates:o,email:i}=e;try{let c;o.includes("COMPLETE")?c={file_repository_info:n,limit:r,offset:s??0,search_term:a,file_states_in_filter:o}:c={file_repository_info:n,limit:r,offset:s??0,search_term:a,file_states_in_filter:o,email_in_filter:[i]};const{data:u,error:d}=await ne.POST("/rest/file-repository/list-files",t,{headers:{"content-type":"application/json"},body:c,timeoutMs:je(),numRetries:1});if(d)throw new Me("API_CLIENTS_ERROR",{cause:d});return{files:u?.files??[],numTotalFiles:u?.num_total_files??0}}catch(c){return ee.error(c),null}},NGe=async({request:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/file-repository/get-file-upload-urls",t,{body:e,timeoutMs:5e3,numRetries:1});if(r)throw new Error("Failed to get fileUploadUrl",{cause:r});return n},Ude=async({request:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/files/list",t,{body:e,timeoutMs:je(),numRetries:1});if(r)throw new Error("Failed to get connector files",{cause:r});return n},gUt=async({request:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/files/delete",t,{body:e,timeoutMs:je(),numRetries:1});if(r)throw new Error("Failed to delete connector files",{cause:r});return n},yUt=async({request:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/files/resync",t,{body:e,timeoutMs:je(),numRetries:1});if(r)throw new Error("Failed to resync connector files",{cause:r});return n};async function i9({request:e,reason:t}){return new Promise((n,r)=>{ne.SSE("/rest/sse/index_files",t,{params:e,headers:{"content-type":"application/json",accept:"text/event-stream"},handlers:{message:s=>{s.status==="success"?n():r(new Error("Indexing failed"))}}}).catch(r)})}const vUt=({fileRepoInfo:e,connectionTypes:t,status:n,searchKeyword:r,parentUuids:s,rootFilesOnly:a,cursor:o,pollingEnabled:i=!1,pageSize:c,fileTypes:u,reason:d})=>{const[m,h]=f.useState(!1),p=f.useMemo(()=>({file_repository_info:e,filters:{connection_types:t??ce,status:n??ce,search_keyword:r,parent_uuids:s??ce,root_files_only:a??!1,file_types:u??ce,connection_ids:ce,ids:ce,remote_file_ids:ce,uuids:ce,upload_ids:ce},pagination:{cursor:o,page_size:c??100},order_by:"updated",order_dir:"desc"}),[e,t,n,r,s,a,o,c,u]),g=Ke({queryKey:hie(p),queryFn:()=>Ude({request:p,reason:d}),refetchInterval:()=>i&&m?5e3:!1,staleTime:0,gcTime:0,enabled:e.file_repository_type!=="COLLECTION"||e.file_repository_type==="COLLECTION"&&!!e.owner_id});return f.useEffect(()=>{const y=g.data?.files.some(v=>v.status==="SYNCING"||v.status==="QUEUED")||!1;h(y)},[g.data]),g},AGe=({fileRepoInfo:e,connectionTypes:t,status:n,searchKeyword:r,parentUuids:s,rootFilesOnly:a,pageSize:o,fileTypes:i,reason:c})=>{const u={file_repository_info:e,filters:{connection_types:t??ce,status:n??ce,search_keyword:r,parent_uuids:s??ce,root_files_only:a??!1,file_types:i??ce,connection_ids:ce,ids:ce,remote_file_ids:ce,uuids:ce,upload_ids:ce},pagination:{page_size:o},order_by:"updated",order_dir:"desc"};return fc({enabled:e.file_repository_type==="USER"||e.file_repository_type==="COLLECTION"&&!!e.owner_id,initialPageParam:void 0,queryKey:hie(u,!0),queryFn:({pageParam:d})=>Ude({request:{...u,pagination:{cursor:d,page_size:o}},reason:c}),getNextPageParam:d=>d.next_cursor??void 0})},xUt=async({backendUUID:e,title:t,rwToken:n,reason:r})=>{if(!n)return;const{data:s,error:a}=await ne.PUT("/rest/article/section/title/{section_uuid}",r,{params:{path:{section_uuid:e}},body:{read_write_token:n,title:t},headers:{"content-type":"application/json"},numRetries:1});if(a)throw new Error("Error updating article section title",{cause:a});return s},bUt=async({backendUUID:e,heroOffset:t,rwToken:n,reason:r})=>{if(!n)return;const{data:s,error:a}=await ne.PUT("/rest/article/section/hero_offset/{section_uuid}",r,{params:{path:{section_uuid:e}},body:{read_write_token:n,hero_offset:t},timeoutMs:je()});if(a)throw new Error("Error updating article section hero offset",{cause:a});return s},_Ut=async({backendUUID:e,rwToken:t,reason:n})=>{if(!e||!t)return;const{data:r,error:s}=await ne.DELETE("/rest/article/section/{section_uuid}",n,{params:{path:{section_uuid:e}},body:{read_write_token:t},timeoutMs:je()});if(s)throw new Error("Error deleting article section",{cause:s});return r},wUt=async({sections:e,rwToken:t,reason:n})=>{if(!t||e.length===0)return;const{data:r,error:s}=await ne.PUT("/rest/article/sections/layout",n,{body:{read_write_token:t,sections:e},timeoutMs:je()});if(s)throw new Error("Error updating article sections layout",{cause:s});return r},SUt=async({sectionUUID:e,mediaItem:t,targetIndex:n,rwToken:r,isNewMediaItem:s=!1,reason:a})=>{if(!r)return;const{data:o,error:i}=await ne.PUT("/rest/article/section/image/{section_uuid}",a,{params:{path:{section_uuid:e}},timeoutMs:5500,body:{read_write_token:r,media_item:t,target_index:n,new_media_item:s}});if(i)throw new Error("Error updating article section image",{cause:i});return o},CUt=async({sectionUUID:e,mediaItem:t,rwToken:n,isNewMediaItem:r,reason:s})=>{n&&await ne.PUT("/rest/page/section/media/add/{section_uuid}",s,{params:{path:{section_uuid:e}},timeoutMs:je(),method:"PUT",body:{read_write_token:n,media_item:t,new_media_item:r}})},EUt=async({sectionUUID:e,image:t,rwToken:n,reason:r})=>{if(!n)return;const{data:s,error:a}=await ne.POST("/rest/article/section/upload_image/{section_uuid}",r,{params:{path:{section_uuid:e}},timeoutMs:je(),method:"POST",body:{read_write_token:n,content_type:t.type},headers:{"content-type":"application/json"},numRetries:1});if(a)throw new Error("Failed to upload image to section media items",{cause:a});return s},MUt=async({sectionUUID:e,mediaItemImageUrl:t,rwToken:n,reason:r})=>{if(!n)return;const{data:s,error:a}=await ne.PUT("/rest/article/section/media/remove/{section_uuid}",r,{params:{path:{section_uuid:e}},timeoutMs:je(),body:{read_write_token:n,media_item_image_url:t}});if(a)throw new Error("Error removing media item from section selected images",{cause:a});return s},TUt=async({sectionUUID:e,relativeMove:t,rwToken:n,articleSlug:r,reason:s})=>{if(!n||!r)return;const{data:a,error:o}=await ne.PUT("/rest/article/reorder/{article_slug}",s,{params:{path:{article_slug:r}},timeoutMs:je(),method:"PUT",body:{read_write_token:n,section_uuid:e,relative_move:t}});if(o)throw new Error("Error reordering article section",{cause:o});return a},kUt=async({backendUUID:e,reason:t})=>{if(!e)return;const{data:n,error:r}=await ne.POST("/rest/article/section/terminate",t,{body:{entry_uuid:e},timeoutMs:1500,method:"POST",numRetries:1});if(r)throw new Error("Error terminating article section streaming",{cause:r});return n},NUt=async({sectionUUID:e,mediaItem:t,rwToken:n,reason:r})=>{if(!n)return;const{data:s,error:a}=await ne.PUT("/rest/article/section/add/media_item/{section_uuid}",r,{params:{path:{section_uuid:e}},body:{read_write_token:n,media_item:t}});if(a)throw new Error("Error adding article section media item",{cause:a});return s},PGe=async({entryUUIDs:e,rwToken:t,reason:n})=>{await ne.DELETE("/rest/thread",n,{body:{entry_uuids:e,read_write_token:t??""}})},RGe=async({entryUUID:e,rwToken:t,callback:n,reason:r})=>{n?.(),await ne.DELETE("/rest/thread/delete_thread_by_entry_uuid",r,{body:{entry_uuid:e,read_write_token:t??""}})},IGe=async({backendUUID:e,url:t,rwToken:n,reason:r})=>{if(!n)return;const{data:s,error:a}=await ne.PUT("/rest/thread/entry/remove_widget",r,{timeoutMs:je(),body:{entry_uuid:e,read_write_token:n,url:t}});if(a)throw new Error("Error removing widget from entry",{cause:a});return s},AUt=async({backendUUID:e,rwToken:t,value:n,reason:r})=>{const{data:s,error:a}=await ne.PUT("/rest/article/emphasize_sources/{section_uuid}",r,{params:{path:{section_uuid:e}},timeoutMs:je(),method:"PUT",body:{read_write_token:t,value:n}});if(a)throw new Error("Error toggling emphasize sources",{cause:a});return s},PUt=async({connectorName:e,apiKey:t,reason:n})=>{const{data:r,error:s}=await ne.POST("/rest/connectors/store-api-key",n,{body:{api_key:t,connector_id:e}});if(s)throw new Error(`Failed to store ${e} API key`,{cause:s});return r},jGe=async({name:e,referrer:t,referrerId:n,redirectPath:r,unauthedRedirectPath:s,reason:a})=>{try{let o="";if(e!=="factset"){const u=new URLSearchParams;t&&(u.append("referrer",t),n&&u.append("referrer_id",n)),r&&u.append("redirect_path",r),s&&u.append("unauthed_redirect_path",s),o="?"+u.toString()}const i=await er({urlPath:`/rest/connectors/${e}/connect${o}`,method:"GET",headers:{"content-type":"application/json"},timeoutMs:je(),numRetries:1,reason:a});if(!i.ok)throw new Error("Failed to initiate OAuth flow");return(await i.json()).redirect_url}catch(o){return ee.error("Error fetching factset OAuth redirect URL:",o),null}},OGe=async({connectorName:e,reason:t})=>{const n=`disconnectConnector:${e}`;try{const r=await er({urlPath:`/rest/connectors/${e}/disconnect`,method:"GET",headers:{"content-type":"application/json"},timeoutMs:je({productionMs:500}),numRetries:1,reason:t});if(!r.ok)throw new Error("Failed to disconnect connector");return await r.json()}catch(r){return ee.log(`Error in ${n}:`,r),null}},LGe=async({connectionUUID:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/connections/{uuid}/update",t,{params:{path:{uuid:e}},body:{disconnect:!0}});if(r)throw new Error("Failed to disconnect file connector",{cause:r});return n},DGe=async({connectionUUID:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/connections/{uuid}/delete",t,{params:{path:{uuid:e}}});if(r)throw new Error("Failed to disconnect file connector and delete files",{cause:r});return n},RUt=async({connectorName:e,fileIds:t,fileRepoInfo:n,folder_ids:r,reason:s})=>{const a="uploadConnectorFiles";try{const o=await er({urlPath:`/rest/connectors/${e}/files`,method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({file_ids:t,file_repository_info:n,folder_ids:r}),reason:s});if(!o.ok)throw new Error("Failed to upload connector files");return await o.json()}catch(o){throw ee.log(`Error in ${a}:`,o),o}},FGe=async({reason:e})=>{const{data:t,error:n}=await ne.POST("/rest/connectors/box/picker",e);if(n)throw new Error("Failed to refresh box picker credentials",{cause:n});return t},UGe=async({connectionType:e,content:t,reason:n})=>{const{data:r,error:s}=await ne.POST("/rest/connectors/picker/log",n,{body:{connection_type:e,content:t}});if(s)throw new Error("Failed log connector picker",{cause:s});return r},BGe=async({request:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/file-repository/delete-files",t,{body:e});if(r)throw new Error("Failed to delete files",{cause:r});return n};class l9 extends Error{constructor(){super("Downloads are disabled"),this.name="DownloadsDisabledError"}}class c9 extends Error{constructor(){super("PDF downloads are restricted"),this.name="PdfUntrustedOriginError"}}class u9 extends Error{constructor(){super("This file belongs to a different organization"),this.name="UserNotInFileOrgError"}}const VGe=async({request:e,reason:t})=>{const n=await ne.POST("/rest/file-repository/download",t,{body:e,timeoutMs:2e3,numRetries:1});if(n.error){if(n.error.detail&&typeof n.error.detail=="object"&&"error_details"in n.error.detail){if(n.error.detail.error_details==="DOWNLOADS_DISABLED")throw new l9;if(n.error.detail.error_details==="PDF_UNTRUSTED_ORIGIN")throw new c9;if(n.error.detail.error_details==="USER_NOT_IN_FILE_ORG")throw new u9}throw new Me("API_CLIENTS_ERROR",{message:"Failed to download file",cause:n.error})}return n.data},$Ge=async({request:e,reason:t})=>{const n=await ne.POST("/rest/file-repository/download-attachment",t,{body:e,timeoutMs:2e3,numRetries:1});if(n.error){if(n.error.detail&&typeof n.error.detail=="object"&&"error_details"in n.error.detail){if(n.error.detail.error_details==="DOWNLOADS_DISABLED")throw new l9;if(n.error.detail.error_details==="PDF_UNTRUSTED_ORIGIN")throw new c9;if(n.error.detail.error_details==="USER_NOT_IN_FILE_ORG")throw new u9}throw new Me("API_CLIENTS_ERROR",{message:"Failed to download attachment",cause:n.error})}return n.data},IUt=async({seedDirectoryRequest:e,reason:t})=>{const n="seedDirectoryWithExampleFiles";try{if((await ne.POST("/rest/file-repository/seed-examples",t,{body:e,timeoutMs:je(),numRetries:1})).response.ok)return;throw new Error("Failed to seed file repository")}catch(r){throw ee.log(`Error in ${n}:`,r),r}},Bde=e=>{const{accessLevel:t,enableWebByDefault:n,...r}=e;return{...r,access:t,enable_web_by_default:n}},WGe=async({collectionUuid:e,changes:t,reason:n})=>{const r=Bde(t),s=await ne.POST("/rest/collections/edit_collection/{collection_uuid}",n,{params:{path:{collection_uuid:e}},body:r,timeoutMs:je()});if(!s.response.ok||!s.data)throw new Error("Failed to edit collection",{cause:s.error});const a=s.data,{access:o,...i}=a;return o!==void 0?{...i,accessLevel:o}:i},jG=async({params:e,reason:t})=>{const n=Bde(e);e.template_id&&(n.template_id=e.template_id);const r=await ne.POST("/rest/collections/create_collection",t,{body:n,timeoutMs:je()});if(!r.response.ok||!r.data)throw new Error("Failed to create collection",{cause:r.error});return r.data},jUt=async({entryUUID:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/entry/convert-to-report/{entry_uuid}",t,{params:{path:{entry_uuid:e}},timeoutMs:je()});if(r)throw new Error("Failed to convert entry to report",{cause:r});return n},OUt=async({spaceUuid:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/spaces/{space_uuid}/subscription",t,{params:{path:{space_uuid:e}},timeoutMs:je(),numRetries:1});if(r)throw new Error("Failed to subscribe to space",{cause:r});return n},LUt=async({spaceUuid:e,reason:t})=>{const{data:n,error:r}=await ne.DELETE("/rest/spaces/{space_uuid}/subscription",t,{params:{path:{space_uuid:e}},timeoutMs:je(),numRetries:1});if(r)throw new Error("Failed to unsubscribe from space",{cause:r});return n},DUt=async({reason:e})=>{const{error:t}=await ne.DELETE("/rest/user/delete-account",e);if(t)throw new Error("Failed to delete account",{cause:t})},HGe=async({collectionUuid:e,reason:t})=>{const{error:n}=await ne.DELETE("/rest/collections/delete_collection/{collection_uuid}",t,{params:{path:{collection_uuid:e}},timeoutMs:je(),numRetries:1});if(n)throw new Error("Failed to delete collection",{cause:n})},zGe=async({contextUUID:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/thread/mark_viewed/{context_uuid}",t,{params:{path:{context_uuid:e}},timeoutMs:je(),numRetries:1});if(r)throw new Error("Failed to mark thread as viewed",{cause:r});return n},Vde=({reason:e,onSuccess:t})=>{const{$t:n}=X(),{openToast:r}=On();return Mt({mutationFn:async({file_url:s})=>(await VGe({request:{file_url:s,view_mode:!1},reason:e})).file_url,onSuccess:(s,{tab_id:a})=>{t?t(s,a):window.open(s,"_blank"),r(n({defaultMessage:"Downloading file...",id:"/vA9NyIeJh"}),"success",3)},onError:s=>{s instanceof l9?r(n({defaultMessage:"Downloads are disabled for files in this organization.",id:"NfM+Ayxvc6"}),"error",8):s instanceof c9?r(n({defaultMessage:"PDF downloads are restricted",id:"aJYvzl3Lq5"}),"error",8):s instanceof u9?r(n({defaultMessage:"This file belongs to a different organization",id:"lo7Bg402Jd"}),"error",8):r(n({defaultMessage:"Failed to download file",id:"RIWlU8NdpC"}),"error",3)}})},k2=async({fileRepositoryType:e,ownerId:t,limit:n,offset:r,searchTerm:s,email:a,reason:o})=>{const[i,c]=await Promise.all([wP({request:{fileRepositoryInfo:{file_repository_type:e,owner_id:t},limit:n,offset:r,searchTerm:s,fileStates:["COMPLETE"],email:a},reason:o}),wP({request:{fileRepositoryInfo:{file_repository_type:e,owner_id:t},limit:100,offset:0,searchTerm:"",fileStates:["PROCESSING","FAILED"],email:a},reason:o})]),u=d=>({name:d.filename,file_uuid:d.file_uuid,file_s3_url:d.file_s3_url??"",file_title:d.file_title,file_description:d.file_description,uploadedBy:d.uploaded_by,state:d.file_state,size:d.file_size??0,date:new Date(d.time_created).toLocaleString(void 0,{dateStyle:"short",timeStyle:"short"}),error:d.error??void 0,isOptimistic:!1});if(i||c){const d=i?.files?.map(u)||[],m=c?.files?.map(u)||[];return{completedFiles:d,processingFiles:m.filter(h=>h.state==="PROCESSING"),failedFiles:m.filter(h=>h.state==="FAILED"),numTotalFiles:i?.numTotalFiles||0}}return{completedFiles:[],processingFiles:[],failedFiles:[],numTotalFiles:0}},GGe=({fileRepositoryType:e,limit:t,offset:n,searchTerm:r,ownerId:s,reason:a})=>{const o=gt(),c=Ot()?.user?.email??"",{isEnterprise:u}=pn({reason:a}),d=!!(e==="COLLECTION"&&s||e==="ORG"&&u),m=zS(e,s,t,n,r),h=Ke({queryKey:m,queryFn:()=>d?k2({fileRepositoryType:e,ownerId:s,limit:t,offset:n,searchTerm:r,email:c,reason:a}):Promise.reject(),enabled:d,placeholderData:W0,staleTime:5*60*1e3,gcTime:10*60*1e3});return f.useEffect(()=>{d&&(h.data?.numTotalFiles??0)>n+t&&o.prefetchQuery({queryKey:m,queryFn:()=>k2({fileRepositoryType:e,ownerId:s,limit:t,offset:n+t,searchTerm:r,email:c,reason:a}),staleTime:5*60*1e3,gcTime:10*60*1e3})},[m,d,o,e,t,n,r,h.data?.numTotalFiles,c,s,a]),h},qGe=({fileRepositoryType:e,limit:t,searchTerm:n,ownerId:r,reason:s})=>{const o=Ot()?.user?.email??"",{isEnterprise:i}=pn({reason:s}),c=!!(e==="COLLECTION"&&r||e==="ORG"&&i),u=zS(e,r,t,void 0,n,!0);return fc({enabled:c,initialPageParam:0,queryKey:u,queryFn:({pageParam:m})=>!c||m===void 0?Promise.reject():k2({fileRepositoryType:e,ownerId:r,limit:t,offset:m,searchTerm:n,email:o,reason:s}),getNextPageParam:(m,h)=>{const g=h.length*t+t;if(!(g>=m.numTotalFiles))return g}})},FUt=({fileRepoInfo:e,offset:t,setOffset:n,searchTerm:r,reason:s})=>{const a=e.file_repository_type,o=e.owner_id,{data:i,isLoading:c}=GGe({fileRepositoryType:a,limit:ro,offset:t,searchTerm:r,ownerId:o,reason:s}),{completedFiles:u,processingFiles:d,failedFiles:m,totalFiles:h}=f.useMemo(()=>({completedFiles:i?.completedFiles||[],processingFiles:i?.processingFiles||[],failedFiles:i?.failedFiles||[],totalFiles:i?.numTotalFiles??0}),[i]),p=t>0,g=h>t+ro,y=Math.floor(t/ro)+1,v=Math.max(1,Math.ceil(h/ro)),x=f.useCallback(()=>{p&&n(Math.max(0,t-ro))},[p,t,n]),b=f.useCallback(()=>{g&&n(t+ro)},[g,t,n]);return f.useMemo(()=>({completedFiles:u,processingFiles:d,failedFiles:m,totalFiles:h,isLoadingFileDirectory:c,hasPreviousPage:p,hasNextPage:g,searchTerm:r,offset:t,currentPage:y,totalPages:v,setOffset:n,handlePrevPage:x,handleNextPage:b}),[u,y,m,b,x,g,p,c,t,d,r,n,h,v])},KGe=({fileRepoInfo:e,searchTerm:t,limit:n=ro,reason:r})=>{const s=e.file_repository_type,a=e.owner_id,{data:o,isLoading:i,hasNextPage:c,fetchNextPage:u}=qGe({fileRepositoryType:s,limit:n,searchTerm:t,ownerId:a,reason:r}),{completedFiles:d,processingFiles:m,failedFiles:h,totalFiles:p}=f.useMemo(()=>{const g=o?o.pages[o.pages.length-1]:null;return{completedFiles:o?.pages.map(y=>y.completedFiles).flat()||[],processingFiles:o?.pages.map(y=>y.processingFiles).flat()||[],failedFiles:o?.pages.map(y=>y.failedFiles).flat()||[],totalFiles:g?.numTotalFiles??0}},[o]);return f.useMemo(()=>({completedFiles:d,processingFiles:m,failedFiles:h,totalFiles:p,isLoading:i,hasNextPage:c,searchTerm:t,fetchNextPage:u}),[d,h,u,c,i,m,t,p])},Au=({reason:e,collectionSlugOverride:t})=>{const n=Pt(),r=ul(),{firstResult:{collection_info:{uuid:s}={}}={}}=zt(),a=n?.includes("/search/")&&!!s,o=t??(Array.isArray(r?.slug)?r.slug[0]:r?.slug),{collection:i}=xc({collectionSlug:o,reason:e}),c=f.useMemo(()=>{let u,d;return a?(u="COLLECTION",d=s??""):n?.includes("/collections")||n?.includes("/spaces")?(u="COLLECTION",d=i?.uuid||""):(u="ORG",d=""),{file_repository_type:u,owner_id:d}},[a,n,s,i?.uuid]);return f.useMemo(()=>({fileRepoInfo:c}),[c])},$de=({fileRepositoryType:e,offset:t,searchTerm:n,ownerId:r,reason:s})=>{const{$t:a}=X(),o=gt(),i=ul(),{openToast:c}=On(),{isEnterprise:u}=pn({reason:s}),d=lp(),m=zS(e,r,ro,t,n),h=DO(r),p=Array.isArray(i?.slug)?i.slug[0]:i?.slug,g=p?jO(p):void 0,y=e==="USER"||e==="ORG"||e==="COLLECTION"&&!!r;return{...Mt({mutationFn:async x=>{if(!y){c(a({defaultMessage:"Unable to delete files.",id:"QYfmPDehhb"}),"error",3);return}return BGe({request:{file_uuids:x,file_repository_info:{file_repository_type:e,owner_id:r}},reason:s})},onMutate:async x=>{await o.cancelQueries({queryKey:m});const b=o.getQueryData(m);return b&&o.setQueryData(m,_=>({..._,completedFiles:_.completedFiles.filter(w=>!x.includes(w.file_uuid)),processingFiles:_.processingFiles.filter(w=>!x.includes(w.file_uuid)),failedFiles:_.failedFiles.filter(w=>!x.includes(w.file_uuid)),numTotalFiles:Math.max((_.numTotalFiles||0)-x.length,0)})),{previousData:b}},onSuccess:()=>{u&&o.invalidateQueries({queryKey:d}),o.invalidateQueries({queryKey:m}),p&&o.invalidateQueries({queryKey:g}),o.invalidateQueries({queryKey:h})},onError:(x,b,_)=>{_?.previousData&&o.setQueryData(m,_.previousData),c(a({defaultMessage:"Failed to delete file",id:"aJlra1/tgY"}),"error",3)}}),isDeleteEnabled:y}},YGe=({fileRepoInfo:e,reason:t})=>{const n=gt(),r=ul(),s=lp(),a=Array.isArray(r?.slug)?r.slug[0]:r?.slug,o=a?jO(a):void 0,i=zS(e.file_repository_type,e.owner_id,ro,0,""),c=["list_file_directory",e.file_repository_type,e.owner_id];return Mt({mutationFn:async u=>{await i9({request:{file_repository_info:e,file_index_params:[{file_s3_url:u.file_s3_url,file_size:u.size,filename:u.name,file_uuid:u.file_uuid,replace_existing:!0}]},reason:t})},onMutate:async u=>{await n.cancelQueries({queryKey:i});const d={...u,state:"PROCESSING",error:void 0};return n.setQueriesData({queryKey:i},m=>{if(!m)return m;const h=m.completedFiles.filter(y=>y.name!==d.name),p=m.failedFiles.filter(y=>y.file_uuid!==d.file_uuid),g=[...m.processingFiles||[],d];return{...m,completedFiles:h,processingFiles:g,failedFiles:p}}),d},onSettled:()=>{n.invalidateQueries({queryKey:c}),e.file_repository_type==="ORG"&&n.invalidateQueries({queryKey:s}),a&&n.invalidateQueries({queryKey:o})}})},UUt=e=>e?.[0]?.article_info?.is_live;function BUt(e){return e.length==1&&e[0]?.article_info?.is_auto_generated}function QGe(e,t){return e.startsWith("http")?e:t?`/discover/${t}/${e}`:`/page/${e}`}const d9=e=>e?.toLowerCase(),f_=e=>d9(e.status)==="pending",VUt=e=>d9(e.status)==="staged",$Ut=e=>d9(e.status)==="completed",XGe=e=>e.find(t=>f_(t)&&t.backend_uuid),ZGe=e=>!!(e&&e.length>0&&"blocks"in e[0]),WUt=e=>{if(!e?.blocks||e.blocks.length===0||!e.page_structured_answer_block_usages?.REPORT||e.page_structured_answer_block_usages.REPORT.length===0)return;const n=e.page_structured_answer_block_usages.REPORT[0];return e.blocks.find(r=>r.intended_usage===n)?.markdown_block},HUt=e=>{const t=/##\s*([^\n]+)/,n=e.match(t);return n&&n.length>1&&n[1]?n[1].trim():e.trim()},Wde=/(\[\d{1,3}\])/,JGe=/(\[\d{1,3},\s*\{ts:.*\}\])/,CC=new RegExp(Wde.source+"|"+JGe.source),zUt=(e,t)=>{if(CC.test(e))if(Wde.test(e)){const n=parseInt(e.substring(1,e.length-1))-1,r=t?.[n]??null;return r||void 0}else{const n=e.indexOf(","),r=parseInt(e.substring(1,n))-1,s=t?.[r]??null;if(!s)return;if(!s.url){ee.warn("[parseCitation] web_result has no url",{web_result:s});return}return s.url=eqe(s.url,e),s}},eqe=(e,t)=>{const n=e.split("&")[0],r=t.indexOf(":");if(r===-1)return n;const s=t.indexOf("}"),a=t.substring(r+1,s);return n+`&t=${a}`},tqe=e=>{const t=an.legacyParseBackendOutputStr(e);return t?t.answer.replace(CC,""):null},nqe=e=>{const t=e.mode==="article"?"/page":"/search";return{title:e.title??"",preview:tqe(e.first_answer),threadCount:e.query_count,lastUpdated:e.last_query_datetime,href:`${t}/${e.slug}`,rwToken:e.read_write_token,focus:e.search_focus??"internet",entryUUID:e.uuid,contextUUID:e.context_uuid,copilot:e.mode==="copilot",socialInfo:e.social_info,collectionUUID:e.collection?.uuid??null,authorImage:e.author_image??null,featuredImage:e?.featured_images?.[0]?.image??null,thumbnailImage:e?.featured_images?.[0]?.thumbnail??null,threadAccess:e.thread_access,collection:e.collection,mode:e.mode,expiry:e.expiry_time,source:e?.source??null,displayModel:e.display_model,slug:e.slug}},GUt=(e,t)=>({title:e.title??"",summary:e.summary??"",description:e.description??"",href:QGe(e.slug,t),backendUUID:e.uuid,collectionUUID:e.collection?.uuid??null,authorImage:e.author_image??null,authorUsername:e.author_username??null,featuredImage:e?.featured_images?.[0]?.image??null,collection:e.collection,socialInfo:e.social_info,feedbackState:e.feedback_state,supportedFeedbacks:e.supported_feedbacks,accessLevel:e.access??e.thread_access,preview:e.description.replace(CC,""),offset:e.hero_offset,entryUUID:e.uuid,rwToken:e.read_write_token,lastUpdated:e.last_query_datetime,threadAccess:e.access,thumbnailImage:e?.featured_images?.[0]?.thumbnail??null,contextUUID:e.context_uuid,webResults:e.web_results_preview,feedUUID:e.feed_uuid}),rqe={gpt4_limit:"gpt4Limit",gpt4_total:"gpt4Total",opus_limit:"opusLimit",pages_limit:"pagesLimit",upload_limit:"uploadLimit",article_image_upload_limit:"articleImageUploadLimit",max_files_per_user:"maxFilesPerUser",max_files_per_repository:"maxFilesPerRepository",default_image_generation_model:"defaultImageGenerationModel",query_count:"queryCount",query_count_copilot:"queryCountCopilot",query_count_mobile:"queryCountMobile",has_ai_profile:"hasAiProfile",referral_code:"referralCode",referral_num_success:"referralNumSuccess",referral_num_coupons:"referralNumCoupons",disable_training:"disableTraining",is_sidebar_collapsed:"isSidebarCollapsed",is_sidebar_pinned:"isSidebarPinned",sidebar_hidden_hubs:"sidebarHiddenHubs",subscription_tier:"subscriptionTier",create_limit:"createLimit",notif_status:"notifStatus",email_status:"emailStatus",allow_article_creation:"allowArticleCreation",is_verified:"isVerified"};function sqe(e){return e||{connectors:[]}}const OG=e=>({hasLoadedSettings:!0,gpt4Limit:e?.gpt4_limit??0,gpt4Total:e?.gpt4_total??0,pplxAlphaLimit:e?.pplx_alpha_limit??0,pplxBetaLimit:e?.pplx_beta_limit??0,pagesLimit:e?.pages_limit??0,uploadLimit:e?.upload_limit,defaultImageGenerationModel:e?.default_image_generation_model??"default",articleImageUploadLimit:e?.article_image_upload_limit??0,maxFilesPerUser:e?.max_files_per_user??0,maxFilesPerRepository:e?.max_files_per_repository??0,queryCount:e?.query_count??0,queryCountCopilot:e?.query_count_copilot??0,queryCountMobile:e?.query_count_mobile??0,hasAiProfile:e?.has_ai_profile??!1,referralCode:e?.referral_code??"",referralNumSuccess:e?.referral_num_success??0,referralNumCoupons:e?.referral_num_coupons??0,disableTraining:e?.disable_training??!1,isSidebarCollapsed:e?.is_sidebar_collapsed??!1,isSidebarPinned:e?.is_sidebar_pinned??!1,sidebarHiddenHubs:e?.sidebar_hidden_hubs??[],subscriptionTier:e?.subscription_tier??e?.subscription_tier??"null",stripeStatus:e?.stripe_status??"none",revenuecatStatus:e?.revenuecat_status??"none",revenuecatSource:e?.revenuecat_source??"none",createLimit:e?.create_limit??0,notifStatus:e?.notif_status??"daily",emailStatus:e?.email_status??"daily",hasDataRetentionWarning:e?.has_data_retention_warning??!1,allowArticleCreation:e?.allow_article_creation??!1,isVerified:e?.is_verified??!1,connectors:sqe(e?.connectors),connectorLimits:e?.connector_limits??{global_file_count:void 0,repo_type_limits:{},max_file_size_mb:void 0,max_attachment_file_size_mb:void 0}});function aqe(e,t){return e?e.place_widget_block&&t.place_widget_block?{...t,place_widget_block:{...e.place_widget_block,review_summary:t.place_widget_block.review_summary}}:e.shopping_widget_block&&t.shopping_widget_block?{...t,shopping_widget_block:{...e.shopping_widget_block,review_summary:t.shopping_widget_block.review_summary}}:t:t}var oqe=(e=>(e.SAVE_PROFILE="save_profile",e.DELETE_PROFILE="delete_profile",e.TOGGLE_DISABLED="toggle_disabled",e))(oqe||{});const iqe=async({profileName:e,reason:t})=>{try{const{error:n,data:r}=await ne.GET("/rest/auth/get_special_profile",t,{params:{query:{profile_name:e}},timeoutMs:1500,numRetries:1});if(n||!r)throw new Me("API_CLIENTS_ERROR",{message:`Failed to get special profile ${e}`,cause:n});return{unlimitedProSearch:!!r.unlimited_pro_search,maxModelSelection:!!r.max_model_selection,unlimitedResearch:!!r.unlimited_research,fileUpload:!!r.file_upload}}catch(n){return ee.error(n),{unlimitedProSearch:!1,maxModelSelection:!1,unlimitedResearch:!1,fileUpload:!1}}},f9=async({reason:e})=>{try{const{error:t,data:n}=await ne.GET("/rest/user/subscription/refresh",e,{timeoutMs:je(),headers:{"X-Perplexity-CSRF-Protection":"1"}});if(t)throw new Me("API_CLIENTS_ERROR",{message:"Failed to refresh subscription status",cause:t});return n}catch(t){return ee.error(t),null}},Hde={has_profile:!1,disabled:!1,bio:"",location:"",response_language:"",location_lng:"",location_lat:"",use_memory:!1,use_search_history:!1,language:""},lqe=async({headers:e,reason:t})=>{try{const{error:n,data:r}=await ne.GET("/rest/user/get_user_ai_profile",t,{timeoutMs:1500,numRetries:hc,headers:e});if(n||!r)throw new Me("API_CLIENTS_ERROR",{message:"Failed to get user profile",cause:n});return r}catch(n){return ee.error(n),Hde}},cqe=async({headers:e,reason:t})=>{try{const{error:n,data:r}=await ne.GET("/rest/user/settings",t,{timeoutMs:1500,numRetries:hc,headers:e});if(n||!r)throw new Me("API_CLIENTS_ERROR",{message:"Failed to get user settings",cause:n});return OG(r)}catch(n){return ee.error(n),OG({})}},qUt=async({amount:e,headers:t,reason:n})=>{try{const{error:r,data:s}=await ne.GET("/rest/shopping/user-discount-offer",n,{params:{query:{amount_micros:e}},headers:t});if(r||!s)throw new Me("API_CLIENTS_ERROR",{message:"Failed to fetch user discount offer",cause:r});return s}catch(r){return ee.error(r),{}}},KUt=async({action:e,location:t,response_language:n,bio:r,location_lat:s,location_lng:a,use_memory:o,use_search_history:i,reason:c})=>{const u={...t!==void 0&&{location:t},...n!==void 0&&{response_language:n},...r!==void 0&&{bio:r},...s!==void 0&&{location_lat:s},...a!==void 0&&{location_lng:a},...o!==void 0&&{use_memory:o},...i!==void 0&&{use_search_history:i},version:ni},{error:d,data:m}=await ne.POST("/rest/user/save_user_ai_profile",c,{body:{action:e,updated_profile:u},timeoutMs:je(),numRetries:1});if(d)throw new Me("API_CLIENTS_ERROR",{message:"Failed to save user ai profile",cause:d});return m},LG=async({type:e,value:t,reason:n})=>{const r=e==="memory"?{use_memory:t}:{use_search_history:t},{error:s,data:a}=await ne.POST("/rest/user/save_user_ai_profile",n,{timeoutMs:je(),numRetries:1,headers:{"content-type":"application/json"},body:{action:"save_profile",updated_profile:{...r,version:ni}}});if(s)throw new Me("API_CLIENTS_ERROR",{message:"Failed to update personal search settings",cause:s});return a},uqe=async({settings:e,reason:t})=>{const{error:n}=await ne.PUT("/rest/user/save-settings",t,{body:{updated_settings:e},timeoutMs:je(),numRetries:1});if(n)throw new Me("API_CLIENTS_ERROR",{message:"Failed to save user settings",cause:n});return{status:"success"}},dqe=async({reason:e})=>{const{error:t,data:n}=await ne.GET("/rest/user/previous-subscription",e,{timeoutMs:3e3,numRetries:1});if(t)throw new Me("API_CLIENTS_ERROR",{message:"Failed to get user previous subscription",cause:t});return n},YUt=async({reason:e})=>{const{error:t,data:n}=await ne.GET("/rest/user/carrier-billing-subscription",e,{timeoutMs:je({productionMs:2e3})});if(t)throw new Me("API_CLIENTS_ERROR",{message:"Failed to fetch carrier billing subscription status",cause:t});return n},fqe=async({filters:e,skipToken:t,reason:n})=>{const{error:r,data:s}=await ne.POST("/rest/connectors/sharepoint/sites",n,{body:{filters:e,skip_token:t},timeoutMs:je({productionMs:500}),numRetries:1});if(r)throw new Me("API_CLIENTS_ERROR",{message:"Failed to fetch sharepoint sites",cause:r});return{sites:s.sites,skipToken:s.skip_token}},QUt=async({orgId:e,reason:t,tokenName:n})=>{const{error:r,data:s}=await ne.POST("/rest/pplx-api/v2/groups/{api_org_id}/api-keys",t,{params:{path:{api_org_id:e}},body:{token_name:n},timeoutMs:5e3});if(r)throw new Me("API_CLIENTS_ERROR",{message:"Failed to generate user api key v2",cause:r});return s},XUt=async({orgId:e,authToken:t,reason:n})=>{const{error:r,data:s}=await ne.DELETE("/rest/pplx-api/v2/groups/{api_org_id}/api-keys",n,{params:{path:{api_org_id:e}},body:{auth_token:t},timeoutMs:5e3});if(r)throw new Me("API_CLIENTS_ERROR",{message:"Failed to delete user api key v2",cause:r});return s},mqe=async({reason:e})=>{try{const{error:t,data:n}=await ne.GET("/rest/auth/check_government_request_origin",e,{timeoutMs:1500,numRetries:hc});if(t||!n)throw new Me("API_CLIENTS_ERROR",{message:"Failed to check government origin",cause:t});return{isGovernmentRequestOrigin:n.is_government_request_origin}}catch(t){return ee.error(t),{isGovernmentRequestOrigin:!1}}},ZUt=async({reason:e})=>{try{const{error:t,data:n}=await ne.GET("/rest/user/site-instructions",e,{timeoutMs:1500,numRetries:hc});if(t||!n)throw new Me("API_CLIENTS_ERROR",{message:"Failed to get user site instructions",cause:t});return n}catch(t){return ee.error(t),{site_instructions:{}}}},JUt=async({siteInstructions:e,reason:t})=>{const{error:n,data:r}=await ne.PUT("/rest/user/site-instructions",t,{body:{site_instructions:e},timeoutMs:je(),numRetries:1});if(n||!r)throw new Me("API_CLIENTS_ERROR",{message:"Failed to save user site instructions",cause:n});return r},eBt=async({site:e,reason:t})=>{const{error:n,data:r}=await ne.POST("/rest/user/site-instructions/{site}/reset",t,{params:{path:{site:e}},timeoutMs:je(),numRetries:1});if(n||!r)throw new Me("API_CLIENTS_ERROR",{message:`Failed to reset site instruction for ${e}`,cause:n});return r},hqe=()=>{const e=yn("isCollapsed"),{isWindowsApp:t}=Wt();return e===null?t:e==="true"},js=({enabled:e,reason:t,refetchOnMount:n})=>{const{locale:r}=X(),s=r?{"accept-language":r}:{},a=async()=>cqe({headers:s,reason:t}),o=Je(),i=hqe(),{data:c,refetch:u}=Ke({enabled:o?typeof e>"u"?!0:e:!1,queryKey:HS(),queryFn:a,networkMode:"always",refetchOnMount:n});return f.useEffect(()=>{c&&L3e({queryCount:c.queryCount,queryCountCopilot:c.queryCountCopilot,queryCountMobile:c.queryCountMobile})},[c]),{...c?{...c,isSidebarCollapsed:i}:{hasLoadedSettings:!1,gpt4Limit:void 0,gpt4Total:void 0,pplxAlphaLimit:void 0,pplxBetaLimit:void 0,pagesLimit:0,uploadLimit:void 0,articleImageUploadLimit:0,defaultImageGenerationModel:"default",queryCount:void 0,queryCountCopilot:void 0,queryCountMobile:void 0,hasAiProfile:!1,referralCode:void 0,referralNumSuccess:void 0,referralNumCoupons:void 0,disableTraining:!1,defaultCopilot:!1,isSidebarCollapsed:i,subscriptionTier:void 0,stripeStatus:"none",revenuecatStatus:"none",revenuecatSource:"none",createLimit:0,notifStatus:void 0,emailStatus:void 0,hasDataRetentionWarning:!1,allowArticleCreation:!1,connectors:{connectors:ce},connectorLimits:{global_file_count:void 0,repo_type_limits:{},max_file_size_mb:void 0,max_attachment_file_size_mb:void 0}},refetch:u}},DG=10,pqe=async(e,t)=>{const s=new FormData;Object.entries(t.fields).forEach(([o,i])=>{s.append(o,i)}),s.append("file",e);let a=null;for(let o=0;o<1;o++)try{o>0&&await new Promise(c=>setTimeout(c,2e3));const i=await fetch(t.s3_bucket_url,{method:"POST",body:s});if(!i.ok)throw new Error(`HTTP error ${i.status}: ${i.statusText}`);return}catch(i){a=i instanceof Error?i:new Error(String(i))}throw new Error(`UPLOAD_FAILED after 1 attempts: ${a?.message||"Unknown error"}`)},zde=({fileRepoInfo:e,setTotalFilesUploading:t,replaceExisting:n,reason:r,onLocalFileUploadSuccess:s})=>{const{$t:a}=X(),o=gt(),i=lp(),c=ul(),u=Array.isArray(c?.slug)?c.slug[0]:c?.slug,d=u?jO(u):void 0,{openToast:m}=On(),p=Ot()?.user?.email??"",g=js({reason:r}),y=["list_file_directory",e.file_repository_type,e.owner_id],v=["list_file_directory_infinite",e.file_repository_type,e.owner_id],x=e.file_repository_type==="USER"||e.file_repository_type==="ORG"||e.file_repository_type==="COLLECTION"&&!!e.owner_id;return{...Mt({mutationFn:async _=>{if(!x){m(a({defaultMessage:"Unable to upload files.",id:"GrtfijFWiu"}),"error",3);return}t(_.length);for(let w=0;w<_.length;w+=DG){const S=_.slice(w,w+DG),C=await NGe({request:{file_upload_params:S.map(I=>({filename:I.name,content_type:I.type,file_size:I.size})),file_repository_info:e},reason:r}),E=C.limits_reached[0];if(E==="FILE_REPOSITORY_LIMIT_EXCEEDED"){const I=g.maxFilesPerRepository;m(a({defaultMessage:"You have reached the file limit of {limit} files per repository.",id:"J0uyf2gB1u"},{limit:I}),"error",3);break}else if(E==="USER_FILE_LIMIT_EXCEEDED"){const I=g.maxFilesPerUser;m(a({defaultMessage:"You have reached the file limit of {limit} files for your account. Please delete some files or upgrade.",id:"McWabfKCqx"},{limit:I}),"error",3);break}const T=(await Promise.allSettled(C.file_url_params.map((I,j)=>({fileUploadUrlInfo:I,file:S[j]})).filter(({fileUploadUrlInfo:I})=>I!==null).map(async({fileUploadUrlInfo:I,file:j})=>{try{return await pqe(j,I),{file_s3_url:I.s3_object_url,filename:j.name,file_size:j.size,file_uuid:I.file_uuid,replace_existing:n}}catch(N){throw m(a({defaultMessage:"Failed to upload file",id:"x2gE8tKhMn"}),"error",3),N}}))).filter(I=>I.status==="fulfilled").map(I=>I.value);if(T.length>0&&await i9({request:{file_repository_info:e,file_index_params:T},reason:r}),C.limits_reached.length>0)break}},onMutate:async _=>{await o.cancelQueries({queryKey:y});const w=o.getQueryData(y),S=_.map(C=>({name:C.name,file_s3_url:"",file_title:null,file_description:null,file_uuid:ar(),uploadedBy:p,state:"PROCESSING",size:C.size,date:new Date().toLocaleString(),isOptimistic:!0}));return o.setQueriesData({queryKey:y},C=>C&&{...C,processingFiles:[...C.processingFiles||[],...S]}),{previousData:w,optimisticFiles:S,uploadedFilesCount:_.length}},onError:(_,w,S)=>{m(a({defaultMessage:"Failed to upload file",id:"x2gE8tKhMn"}),"error",3),S?.previousData&&o.setQueriesData({queryKey:y},S.previousData)},onSettled:()=>{o.invalidateQueries({queryKey:y}),o.invalidateQueries({queryKey:v}),o.invalidateQueries({queryKey:["connector-files"]}),o.invalidateQueries({queryKey:["connector-files-infinite"]}),e.file_repository_type==="ORG"&&o.invalidateQueries({queryKey:i}),u&&o.invalidateQueries({queryKey:d})},onSuccess:()=>{s?.()}}),isUploadEnabled:x}},gqe=({reason:e,onLocalFileUploadSuccess:t,collectionSlugOverride:n})=>{const r=gt(),{fileRepoInfo:s}=Au({reason:e,collectionSlugOverride:n}),[a,o]=f.useState(0),[i,c]=f.useState(""),[u,d]=f.useState(0),{mutate:m}=zde({fileRepoInfo:s,setTotalFilesUploading:d,reason:e,onLocalFileUploadSuccess:t}),{mutate:h}=$de({fileRepositoryType:s.file_repository_type,offset:a,searchTerm:i,ownerId:s.owner_id,reason:e}),{mutate:p}=YGe({fileRepoInfo:s,reason:e}),g=f.useCallback(b=>{h(b),u>0&&d(u-b.length)},[h,u]),y=f.useCallback(b=>{d(_=>_+1),p(b)},[p]),v=f.useCallback(b=>{r.setQueryData(["list_file_directory",s.file_repository_type,s.owner_id,ro,a,i],_=>({..._,processingFiles:[],failedFiles:[],numTotalFiles:Math.max(0,(_?.numTotalFiles??0)-b.length)})),h(b.map(_=>_.file_uuid))},[s.file_repository_type,s.owner_id,a,i,r,h]),x=f.useCallback(async b=>{const _=[],w=async S=>{if(S.isFile){const C=await new Promise(E=>S.file(E));C.type!==""&&_.push(C)}else if(S.isDirectory){const C=S.createReader(),E=await new Promise(M=>C.readEntries(M));await Promise.all(E.map(w))}};b instanceof FileList?Array.from(b).forEach(S=>_.push(S)):await Promise.all(Array.from(b).map(async S=>{if(S.kind==="file"){const C=S.webkitGetAsEntry();C&&await w(C)}})),_.length>0&&m(_)},[m]);return f.useMemo(()=>({offset:a,setOffset:o,searchTerm:i,setSearchTerm:c,totalFilesUploading:u,setTotalFilesUploading:d,handleRemoveFiles:g,handleReplaceExistingFile:y,handleClearAllFiles:v,handleFileSelect:x}),[v,x,g,y,a,i,u])};var Es;(function(e){e[e.NONE=0]="NONE",e[e.READER=1]="READER",e[e.WRITER=2]="WRITER",e[e.EDITOR=5]="EDITOR",e[e.ADMIN=3]="ADMIN",e[e.OWNER=4]="OWNER",e[e.OWNER_DEFAULT_BOOKMARKS=6]="OWNER_DEFAULT_BOOKMARKS",e[e.INVITED_READER=11]="INVITED_READER",e[e.INVITED_WRITER=12]="INVITED_WRITER",e[e.INVITED_EDITOR=15]="INVITED_EDITOR",e[e.INVITED_ADMIN=13]="INVITED_ADMIN"})(Es||(Es={}));function Gde(){return[Es.INVITED_READER,Es.INVITED_WRITER,Es.INVITED_EDITOR,Es.INVITED_ADMIN]}function yqe(e){return e===Es.OWNER||e===Es.OWNER_DEFAULT_BOOKMARKS}function _h(e){return e===Es.OWNER_DEFAULT_BOOKMARKS}function vqe(e){return e>=Es.WRITER&&e<Es.INVITED_READER}function xqe(e){return e>=Es.READER&&e<Es.INVITED_READER}function bqe(e){return e==Es.READER||e==Es.INVITED_READER}function _qe(e){return Gde().includes(e)}function tBt(e){if(e===void 0)return{ownerUser:void 0,contributorUsers:[],invitedUsers:[]};const t=e.owner_user,n=e.contributor_users,r=[],s=[],a=Gde();return n?.forEach(o=>{o.permission&&a.includes(o.permission)?r.push(o):s.push(o)}),{ownerUser:t,contributorUsers:s,invitedUsers:r}}var Pd;(function(e){e.PageAccessNotAllowed="pageAccessNotAllowed",e.ThreadAccessNotAllowed="threadAccessNotAllowed",e.InvalidThread="invalidThread",e.ThreadExpired="threadExpired",e.ThreadStreamError="threadStreamError",e.CollectionAccessNotAllowed="collectionAccessNotAllowed",e.SpaceAccessNotAllowed="spaceAccessNotAllowed",e.InvalidCollection="invalidCollection",e.SubscriptionAlreadyActive="subscriptionAlreadyActive",e.UnableToGrantAccess="unableToGrantAccess"})(Pd||(Pd={}));const wqe="ENTRY_EXPIRED",FG="VIEW_THREAD_NOT_ALLOWED";function m9({reason:e,collectionSlugOverride:t}){const n=ul(),r=t??(Array.isArray(n?.slug)?n.slug[0]:n?.slug),{collection:s}=xc({collectionSlug:r,reason:e}),a=s?yqe(s.user_permission):!1,o=s?_qe(s.user_permission):!1,i=s?bqe(s.user_permission):!1,c=s?xqe(s.user_permission):!1,u=s?vqe(s.user_permission):!1;return f.useMemo(()=>({isUserOwner:a,isUserInvited:o,isUserReader:i,isUserAtLeastReader:c,isUserAtLeastWriter:u}),[c,u,o,a,i])}const Sqe=async({slugOrUUID:e,headers:t,reason:n})=>{const{data:r,error:s}=await ne.GET("/rest/article/{article_uuid_or_slug}",n,{params:{path:{article_uuid_or_slug:e}},headers:t,timeoutMs:je({productionMs:3e3}),numRetries:1});if(s)throw new Me("API_CLIENTS_ERROR",{cause:s});if(r.status!=="success")throw new Me("API_CLIENTS_ERROR",{cause:r});return r.entries},nBt=async({reason:e})=>{const t="signOutAllSessions";try{const r=await(await er({urlPath:"/rest/user/sign-out-all",headers:{"X-Perplexity-CSRF-Protection":"1"},method:"POST",numRetries:1,reason:e})).json();return r.status!=="success"?(ee.log(`Unsuccessful ${t} call:`,r),!1):!0}catch(n){return ee.log(`Error in ${t}:`,n),!1}},rBt=async({articleUUID:e,reason:t})=>{const{data:n,error:r}=await ne.GET("/rest/page/get_related_pages",t,{params:{query:{context_uuid:e}},numRetries:1});if(r)throw new Me("API_CLIENTS_ERROR",{cause:r});if(n.status!=="success")throw new Me("API_CLIENTS_ERROR",{cause:n});return n.related_pages},UG=e=>e.length>0&&e[0].article_info?{title:e[0].article_info.title||"",suggested_sections:e[0].article_info.suggested_sections||[],audience:e[0].article_info.audience||"anyone",read_time:e[0].article_info.read_time,emphasize_sources:e[0].article_info.emphasize_sources??!1,num_sections:e.length,should_index:e[0].should_index??!1}:null,Cqe={isBlocksApi:!1,article:[],heroSection:void 0,isLoading:!1,isPublished:!1,isOrgInternal:!1,inFlight:!1,inFlightLatest:!1,currentlyStreamingSection:void 0,socialStats:{forkCount:0,likeCount:0,viewCount:0,userLikes:!1},threadMetadata:{rwToken:void 0,contextUUID:void 0,frontendContextUUID:void 0,title:void 0,first_query:void 0,focus:void 0,author_id:void 0,author_username:void 0,author_image:void 0,parent_info:void 0,mode:void 0,personalized:!1,collection:void 0,thread_access:0,thread_url_slug:void 0,updated_datetime:void 0,expiry_time:void 0,privacy_state:mh.NONE},articleMetadata:{title:"",suggested_sections:[],audience:"anyone",read_time:0,emphasize_sources:!1,num_sections:0,should_index:!1},articleMedia:[],articleWebResults:[],relatedPages:[],articleLocalState:{isEditModeEnabled:!1,setEditModeEnabled:()=>{},isCreating:!1,setIsCreating:()=>{},isTitleVisible:!0,setTitleVisible:()=>{},clickedImage:null,setClickedImage:()=>{},clickedImageIndex:0,isRewritingSection:!1,setRewritingSection:()=>{}},refetch:()=>{}},qde=f.createContext(Cqe),Eqe=A.memo(({relatedPages:e=ce,children:t,slug:n})=>{const r="article-results-provider",[s,a]=f.useState(!1),[o,i]=f.useState(!1),[c,u]=f.useState(null),[d,m]=f.useState(!0),[h,p]=f.useState(!1),{isEnterprise:g}=pn({reason:r}),y=gt(),x=Ht()?.get("newFrontendContextUUID"),[b,_]=f.useState(y.getQueryData(Z$(n||"")));f.useEffect(()=>{if(x){_(x);return}const H=y.getQueryData(Z$(n||""));_(H)},[x,y,n]);const{data:w,isLoading:S}=Ke({enabled:!!n&&n!=="new",queryKey:OO(b||""),queryFn:()=>Sqe({slugOrUUID:n,reason:r}),refetchOnMount:!0,placeholderData:W0}),C=ZGe(w),E=f.useMemo(()=>{if(!(!w||C))return{inFlight:w.some(f_),inFlightLatest:w.length>0&&f_(w[w.length-1])}},[w,C]),M=E?.inFlight??!1,T=E?.inFlightLatest??!1,I=f.useMemo(()=>{if(!(!w||C))return XGe(w)},[w,C]),j=f.useMemo(()=>{if(!w||w.length===0)return null;const H=w[0];if(f_(H))return null;const G=H.social_info;return xP(G||sde)},[w]),N=f.useMemo(()=>!w||w.length===0?d_():d_(w[0]),[w]),P=f.useMemo(()=>w?UG(w):null,[w]),R=f.useMemo(()=>{const H=[];return w?.forEach(G=>{if(G.article_info.layout==="media-only"){const $=(G.article_info.user_selected_media_items??[])?.filter(q=>q.medium==="image");H.push(...$)}else{const K=G?.media_items??[],$=G?.featured_images??[];G.article_info.layout!=="text"&&($.length>0&&$[0].medium==="image"?H.push($[0]):K.length>0&&K[0].medium==="image"&&H.push(K[0]))}}),H},[w]),k=f.useMemo(()=>{if(!c)return 0;const H=R.findIndex(G=>G?.image===c?.image);return H>-1?H:0},[c,R]),O=f.useMemo(()=>{const H=new Map;return!w||w.length===0?[]:(w?.forEach(G=>{const K=an.parseAskTextField(G);K?.web_results&&K.web_results.forEach($=>{H.has($.url)?H.get($.url).count+=1:H.set($.url,{...$,count:1})})}),Array.from(H.values()).sort((G,K)=>K.count-G.count).map(G=>({...G,count:void 0})))},[w]),L={isEditModeEnabled:s,setEditModeEnabled:a,isTitleVisible:d,setTitleVisible:m,isCreating:o,setIsCreating:i,clickedImage:c,setClickedImage:u,clickedImageIndex:k,isRewritingSection:h,setRewritingSection:p},F=N??d_(),U=g&&!!F.collection&&F.thread_access===pt.COLLECTION_READ,V=!!g&&F.thread_access===pt.ORG_READ,W=U||V||F.thread_access===pt.PUBLIC_READ;return l.jsx(qde.Provider,{value:{isBlocksApi:C,article:w??[],isLoading:S,heroSection:w?.[0],lastSection:w?.[w.length-1],socialStats:j,isPublished:W,isOrgInternal:V,inFlight:M,inFlightLatest:T,currentlyStreamingSection:I,threadMetadata:F,articleMetadata:P??UG([]),articleLocalState:L,articleMedia:R,articleWebResults:O,relatedPages:e},children:t})});Eqe.displayName="ArticleResultsProvider";const h9=()=>{const e=f.useContext(qde);if(!e)throw new Error("useArticleResults must be used within ArticleResultsContext");return e},{Context:Mqe,useTrackedState:Tqe}=Y0("LocalUserSettings"),kqe=({trackEvent:e,initialLocalUserSettings:t})=>yo()(zne(n=>({...t,actions:{setIsSplashPageDismissed:(r,s)=>{kOe(r,s),n({isSplashPageDismissed:r})},setColorScheme:r=>{n({colorScheme:r})},setIsSidebarPinned:r=>{n({isSidebarPinned:r}),qt("isSidebarPinned",String(r),{expires:vr})},setSidebarHiddenHubs:r=>{n({sidebarHiddenHubs:r}),qt("sidebarHiddenHubs",JSON.stringify(r),{expires:vr})},setIsCollapsed:r=>{e("sidebar toggled",{is_collapsed:r}),qt("isCollapsed",String(r),{expires:vr}),n({isCollapsed:r})},setIsIncognito:async r=>{const s=await za.getSession(),a=s!==null&&typeof s<"u";a&&Vne(),a&&(Lie(r),n({isIncognitoLocal:r}))},setIsDiscoverInterestBoxDismissed:r=>{NOe(r),n({isDiscoverInterestBoxDismissed:r})},setIsEnterpriseAdDismissed:r=>{POe(r),n({isEnterpriseAdDismissed:r})},setIsSuggestionsDisabled:r=>{e("auto suggestion setting toggled",{isEnabled:!r}),ROe(r),n({isSuggestionsDisabled:r})},setIsHomepageWidgetsDisabled:r=>{e("homepage widgets setting toggled",{isEnabled:!r}),IOe(r),n({isHomepageWidgetsDisabled:r})},setIsSportsIosCtaDismissed:r=>{LOe(r),n({isSportsIosCtaDismissed:r})},setPreferredSearchMode(r){r?qt(AA,r,{expires:vr}):Fd(AA),n({preferredSearchMode:r})},setIsMaxAssistantModeEnabled:r=>{e("max assistant mode toggled",{isEnabled:r}),qt(jie,String(r),{expires:vr}),n({isMaxAssistantMode:r})},setPreferredSearchModel(r,s){n(a=>{const{preferredSearchModels:o={}}=a;s?o[r]=s:r&&delete o[r];try{qt(Iie,JSON.stringify(o),{expires:vr})}catch{}finally{a.preferredSearchModels=o}return a})},setWelcomeBackGateImpressions:r=>{jOe(r),n({welcomeBackGateImpressions:r})},setShareGateImpressions:r=>{OOe(r),n({shareGateImpressions:r})},setIsSidebarConnectorsAdDismissed:r=>{BOe(r),n({isSidebarConnectorsAdDismissed:r})},setIsStudentReferralBannerDismissed:r=>{WOe(r),n({isStudentReferralBannerDismissed:r})},setIsStudentSpaceUpsellDismissed:r=>{HOe(r),n({isStudentSpaceUpsellDismissed:r})},setStudentSpaceUpsellImpressions:r=>{zOe(r),n({studentSpaceUpsellImpressions:r})}}}))),Nqe=({children:e,initialLocalUserSettings:t})=>{const{trackEvent:n}=Te(),[r]=f.useState(()=>kqe({trackEvent:n,initialLocalUserSettings:t}));return QO(GS,s=>{s&&r.setState({isIncognitoLocal:JSON.parse(s.value)})}),l.jsx(Mqe.Provider,{value:r,children:e})},hn=Tqe,ea=({reason:e})=>{const{organization:t}=pn({reason:e}),n=t?.settings?.always_incognito,{isIncognitoLocal:r}=hn();return n||r},em="recentCollections",Kde=({reason:e})=>{const t=ea({reason:e}),{inFlightLatest:n}=zt(),s=Ot()?.user?.email,{data:a,refetch:o}=Ke({queryKey:[em,s],queryFn:async()=>s?await EGe({reason:e}):[],enabled:!t&&!!s,refetchOnMount:!1,refetchOnWindowFocus:!1,initialData:null});return f.useEffect(()=>{n||o({cancelRefetch:!1})},[n,o]),f.useMemo(()=>!s||t?{data:[]}:{data:a},[a,s,t])},sBt=async({collectionUUID:e,reason:t})=>{const n=await ne.POST("/rest/spaces/bookmarks",t,{body:{collection_uuid:e},timeoutMs:je(),numRetries:0}),r=n.data;if(!n.response.ok||!r)throw new Error("Failed to create space bookmark");return r},aBt=async({query:e,reason:t})=>{const{data:n,error:r}=await ne.GET("/rest/spaces/bookmarks",t,{params:{query:e}});if(r)throw new Me("API_CLIENTS_ERROR",{message:"Failed to list bookmarked spaces",cause:r});return n},Yde=async({params:e,reason:t})=>{const n=await ne.GET("/rest/spaces",t,{params:{query:{limit:e.limit,offset:e.offset,category:e.category,version:ni}},timeoutMs:je()});if(n.error)throw new Me("API_CLIENTS_ERROR",{message:"Failed to list spaces",cause:n.error});return n.data},Aqe=async({reason:e})=>{const t=await ne.GET("/rest/spaces/mentions",e,{timeoutMs:je()});if(t.error)throw new Me("API_CLIENTS_ERROR",{message:"Failed to list at mention spaces",cause:t.error});return t.data},oBt=async({collectionUUID:e,reason:t})=>{const n=await ne.POST("/rest/spaces/org/pins",t,{body:{collection_uuid:e},timeoutMs:je(),numRetries:0}),r=n.data;if(!n.response.ok||!r)throw new Error("Failed to create org pinned space");return r},iBt=async({query:e,reason:t})=>{const{data:n,error:r}=await ne.GET("/rest/spaces/org/pins",t,{params:{query:e},timeoutMs:je()});if(r)throw new Me("API_CLIENTS_ERROR",{message:"Failed to list org pinned spaces",cause:r});return n},lBt=async({spaceUuid:e,reason:t})=>{const n=await ne.GET("/rest/spaces/{space_uuid}/subscription",t,{params:{path:{space_uuid:e}},timeoutMs:je(),numRetries:1}),r=n.data;if(!n.response.ok||!r)throw new Error("Failed to get space subscription status");return r.subscribed},Pqe=async({reason:e})=>{const t=await ne.GET("/rest/collections/list_space_templates",e,{timeoutMs:je(),numRetries:1});if(t.error)throw new Me("API_CLIENTS_ERROR",{message:"Failed to list space templates",cause:t.error});return t.data},SP=10,BG=["invited","private","shared","saved","organization"];function tm(e){return["spaces","list",e]}function nm(){return["spaces","list","all"]}const Rqe=({reason:e})=>{const t=gt(),{data:n,isLoading:r}=Ke({queryKey:nm(),queryFn:()=>Yde({params:{offset:0,limit:SP,category:void 0},reason:e})});return f.useEffect(()=>{n&&(n.private_spaces&&t.setQueryData(tm("private"),s=>({...s,pages:[n.private_spaces||[]],pageParams:[0]})),n.shared_spaces&&t.setQueryData(tm("shared"),s=>({...s,pages:[n.shared_spaces||[]],pageParams:[0]})),n.saved_spaces&&t.setQueryData(tm("saved"),s=>({...s,pages:[n.saved_spaces||[]],pageParams:[0]})),n.organization_spaces&&t.setQueryData(tm("organization"),s=>({...s,pages:[n.organization_spaces||[]],pageParams:[0]})),n.invited_spaces&&t.setQueryData(tm("invited"),s=>({...s,pages:[n.invited_spaces||[]],pageParams:[0]})))},[n,t]),f.useMemo(()=>({data:n,isLoading:r}),[n,r])},Iqe=({category:e,reason:t})=>fc({queryKey:tm(e),queryFn:async({pageParam:n})=>{const r=await Yde({params:{offset:n,limit:SP,category:e},reason:t});switch(e){case"private":return r.private_spaces;case"shared":return r.shared_spaces;case"saved":return r.saved_spaces;case"organization":return r.organization_spaces;case"invited":return r.invited_spaces;default:throw new Error("Invalid category")}},enabled:!1,getNextPageParam:(n,r,s)=>(s??0)+SP,initialPageParam:0}),p9={searchTerm:"",updateUserInput:e=>{}},Qde=f.createContext(p9),jqe=({children:e})=>{const[t,n]=f.useState(p9),r=a=>{n(o=>({...o,...a}))},s=f.useMemo(()=>({...t,updateUserInput:r}),[t.searchTerm]);return l.jsx(Qde.Provider,{value:s,children:e})},g9=()=>{const e=f.useContext(Qde);return e||p9},cBt=(e,t)=>e&&e[0]?.has_next_page?t.length+1:void 0,Oqe=(e,t)=>e.getQueryData(["results"])?.find(r=>r.frontend_context_uuid===t)?.collection_info,Lqe=(e,t)=>e.getQueryData(OO(t))?.find(r=>r.frontend_context_uuid===t)?.collection_info,Dqe=(e,t,n)=>{e.setQueryData(OO(t),r=>r&&r.map(n))},Fqe=[pt.OWNER_ONLY,pt.PRIVATE_READ,pt.COLLECTION_READ],VG=(e,t,n,r,s)=>{const{entryUUID:a,frontendContextUUID:o,newCollectionUUID:i,newCollectionTitle:c,newCollectionEmoji:u,newCollectionSlug:d,newCollectionAccess:m,newCollectionUserPermission:h}=t,p={collection_info:{uuid:i,title:c,emoji:u,slug:d,access:m,user_permission:h},bookmark_state:"BOOKMARKED"};o&&(s(g=>g?g.map(y=>y.frontend_context_uuid===o?{...y,...p}:y):[]),e.setQueryData([r,{frontend_context_uuid:o}],g=>g?g.map(y=>y.frontend_context_uuid===o?{...y,...p}:y):[])),e.setQueryData(n,g=>{g=g||{pages:[],pageParams:[]};const y=g.pages.map(v=>v.map(x=>x.uuid===a?{...x,collection:{...x.collection,...p.collection_info}}:x));return{...g,pages:y}})},Sp=({reason:e})=>{const{searchTerm:t}=g9(),n=gt(),{isEnterprise:r}=pn({reason:e}),{threadMetadata:s}=h9(),a=vo(),o=Pt();let i="results";const c=[Yd,{search_term:t??""}],u=[Yd,{search_term:t??""}];let d=c,m=lOe,h=Oqe;const p=vC();let g=f.useCallback((N,P,R)=>{p(k=>k&&k.map(R))},[p]);(o?.startsWith("/page")||o?.startsWith("/discover"))&&(i="articleResults",d=u,m=cOe,h=Lqe,g=Dqe);const y=f.useCallback(N=>{const P=!a&&!s?.rwToken;!r||P||p(R=>{if(R)return R.map(k=>{let O=!1,L=pt.PRIVATE_READ;return N==="add"?(O=Fqe.includes(k.thread_access??null),L=an.isArticleMode(k)?pt.PRIVATE_READ:pt.COLLECTION_READ):(O=k.thread_access!==pt.COLLECTION_READ,L=pt.PRIVATE_READ),{...k,thread_access:O?k.thread_access:L}})})},[a,s?.rwToken,r,p]),{mutate:v}=Mt({mutationFn:async({title:N,description:P,emoji:R,instructions:k,accessLevel:O,existingCollection:L,enableWebByDefault:F,closeModal:U})=>(U(),WGe({collectionUuid:L.uuid,changes:{title:N,description:P,emoji:R,instructions:k,accessLevel:O,enableWebByDefault:F},reason:e})),onMutate:async N=>{const k=["get_collection",{collection_slug:N.existingCollection.slug.slice(-22)}];await n.cancelQueries({queryKey:k});const O=n.getQueryData(k);return n.setQueryData(k,L=>({...L,title:N.title,description:N.description,emoji:N.emoji,instructions:N.instructions,access:N.accessLevel,enable_web_by_default:N.enableWebByDefault})),{previousCollection:O}},onSettled:(N,P,R,k)=>{const L=["get_collection",{collection_slug:R.existingCollection.slug.slice(-22)}];P?n.setQueryData(L,k?.previousCollection):(n.setQueryData(L,F=>({...F,...N})),n.setQueryData(Jt,F=>F?.pages?{...F,pages:F.pages.map(U=>U.map(V=>V.uuid===R.existingCollection.uuid?{...V,...N}:V))}:F),n.invalidateQueries({queryKey:nm()}),n.invalidateQueries({queryKey:ny()}))}}),{mutate:x}=Mt({mutationFn:async({accessLevel:N,collectionUuid:P})=>{await kGe({params:{collection_uuid:P,updated_access:N},reason:e})},onMutate:async N=>{const k=["get_collection",{collection_slug:N.collectionSlug.slice(-22)}];await n.cancelQueries({queryKey:k});const O=n.getQueryData(k);return n.setQueryData(k,L=>({...L,access:N.accessLevel})),{previousCollection:O}},onSettled:async(N,P,R,k)=>{if(P)n.setQueryData(Jt,k?.previousCollection);else{const O=R.collectionSlug.slice(-22);await n.invalidateQueries({queryKey:["org_pinned_spaces_query_key"]}),await n.invalidateQueries({queryKey:["get_collection",{collection_slug:O}]}),n.invalidateQueries({queryKey:nm()})}}}),{mutate:b}=Mt({mutationFn:async({entryUUID:N,title:P,description:R,emoji:k,instructions:O,accessLevel:L,callback:F,frontendContextUUID:U})=>{const V=await jG({params:{title:P,description:R,emoji:k,instructions:O,accessLevel:L},reason:e});return await Vx({params:{new_collection_uuid:V.uuid,entry_uuid:N,return_collection:!1,return_thread:!1},reason:e}),F(V),y("add"),{title:P,description:R,emoji:k,instructions:O,accessLevel:L,newCollection:V}},onMutate:async({entryUUID:N,frontendContextUUID:P,...R})=>{await n.cancelQueries({queryKey:d}),await n.cancelQueries({queryKey:Jt});const k=n.getQueryData(d),O=n.getQueryData(Jt);n.setQueryData(Jt,F=>{F=F||{pages:[],pageParams:[]};const U=(F&&F.pages&&F.pages[0])??[],W={...U?.length>0?U[0]:[],...R,uuid:Rc,thread_count:1};return{...F,pages:[[W,...U]]}}),n.setQueryData(d,F=>{F=F||{pages:[],pageParams:[]};const U=F.pages.map(V=>V.map(W=>W.uuid===N?{...W,collection:{...W.collection,description:R.description,uuid:Rc,title:R.title,emoji:R.emoji}}:W));return{...F,pages:U}}),n.setQueryData(m(N),F=>{const U=F?.collection_info??{};return{...F,collection_info:{...U,uuid:Rc,description:R.description,title:R.title,emoji:R.emoji}}});let L=null;return P&&(L=h(n,P)??null,g(n,P,F=>F.frontend_context_uuid===P?{...F,collection_info:{...F.collection_info,uuid:Rc,title:R.title,emoji:R.emoji},bookmark_state:"BOOKMARKED"}:F)),{previousThreads:k,previousCollections:O,previousCollectionInfo:L}},onSettled:(N,P,R,k)=>{P?(n.setQueryData(d,k.previousThreads),n.setQueryData(Jt,k.previousCollections),R.frontendContextUUID&&g(n,R.frontendContextUUID,O=>O.frontend_context_uuid===R.frontendContextUUID?{...O,collection_info:k?.previousCollectionInfo??null,bookmark_state:k?.previousCollectionInfo?"BOOKMARKED":"NOT_BOOKMARKED"}:O)):(n.invalidateQueries({queryKey:d}),n.invalidateQueries({queryKey:Jt}),n.invalidateQueries({queryKey:[em]}),n.invalidateQueries({queryKey:ny()}),n.invalidateQueries({queryKey:nm()}),R.frontendContextUUID&&g(n,R.frontendContextUUID,O=>O.frontend_context_uuid===R.frontendContextUUID?{...O,collection_info:{...O.collection_info,uuid:N?.newCollection?.uuid,title:N?.newCollection?.title,emoji:N?.newCollection?.emoji,slug:N?.newCollection?.slug},bookmark_state:"BOOKMARKED"}:O))}}),{mutate:_}=Mt({mutationFn:async({title:N,description:P,emoji:R,instructions:k,accessLevel:O,template_id:L,callback:F})=>{const U=await jG({params:{title:N,description:P,emoji:R,instructions:k,accessLevel:O,template_id:L},reason:e});return F(U),{collection:U}},onMutate:async({...N})=>{n.setQueryData(Jt,P=>{P=P||{pages:[],pageParams:[]};const R=P.pages[0]||[],k={...R.length>0?R[0]:{},...N,uuid:Rc,thread_count:0};return{...P,pages:[[k,...R]]}})},onSuccess:async()=>{n.refetchQueries({queryKey:Jt}),n.invalidateQueries({queryKey:[em]}),n.invalidateQueries({queryKey:ny()}),n.invalidateQueries({queryKey:nm()})}}),{mutate:w}=Mt({mutationFn:async({entryUUID:N})=>{const P=await Vx({params:{entry_uuid:N,upsert_type:"bookmark",return_collection:!0,return_thread:!1},reason:e});return y("add"),P},onMutate:async({entryUUID:N,topic:P})=>{const R=n.getQueryData(kl(P));let k;for(const O of R?.pages??[])for(const L of O.threads)if(L.uuid===N){k=L.collection;break}return n.setQueryData(kl(P),O=>{if(O)return{pageParams:O.pageParams,pages:O.pages.map(L=>({...L,threads:L.threads.map(F=>({...F,collection:F.uuid===N?{uuid:Rc,title:"Bookmarks",emoji:"1f516",slug:Rc}:F.collection}))}))}}),{previousCollection:k}},onSettled:(N,P,R,k)=>{const{entryUUID:O,topic:L}=R;if(P||!N)k?.previousCollection&&n.setQueryData(kl(L),F=>{if(F)return{pageParams:F.pageParams,pages:F.pages.map(U=>({...U,threads:U.threads.map(V=>({...V,collection:V.uuid===O?k.previousCollection:V.collection}))}))}});else{const{updated_collection:F}=N,{uuid:U,title:V,emoji:W,slug:H}=F;n.setQueryData(kl(L),G=>{if(G)return{pageParams:G.pageParams,pages:G.pages.map(K=>({...K,threads:K.threads.map($=>({...$,collection:$.uuid===O?{uuid:U,title:V,emoji:W,slug:H}:$.collection}))}))}})}}}),{mutate:S}=Mt({mutationFn:async({entryUUID:N,topic:P,oldCollectionUUID:R})=>(await IG({collectionUUID:R,entryUUID:N,reason:e}),{topic:P}),onMutate:async({entryUUID:N,topic:P})=>{const R=n.getQueryData(kl(P));let k;for(const O of R?.pages??[])for(const L of O.threads)if(L.uuid===N){k=L.collection;break}return n.setQueryData(kl(P),O=>{if(O)return{pageParams:O.pageParams,pages:O.pages.map(L=>({...L,threads:L.threads.map(F=>({...F,collection:F.uuid===N?void 0:F.collection}))}))}}),{previousCollection:k}},onSettled:(N,P,R,k)=>{const{entryUUID:O,topic:L}=R;P&&k?.previousCollection&&n.setQueryData(kl(L),F=>{if(F)return{pageParams:F.pageParams,pages:F.pages.map(U=>({...U,threads:U.threads.map(V=>({...V,collection:V.uuid===O?k.previousCollection:V.collection}))}))}})}}),{mutate:C}=Mt({mutationFn:async({entryUUID:N,frontendContextUUID:P})=>{const R=await Vx({params:{entry_uuid:N,upsert_type:"bookmark",return_collection:!0,return_thread:!1},reason:e});return y("add"),{response:R,entryUUID:N,frontendContextUUID:P}},onMutate:async({frontendContextUUID:N})=>{await n.cancelQueries({queryKey:d}),await n.cancelQueries({queryKey:Jt}),p(P=>P&&P.map(R=>R.frontend_context_uuid===N?{...R,bookmark_state:"BOOKMARKED",collection_info:{uuid:null,title:"Bookmarks",emoji:"1f516",slug:null,access:null,user_permission:Es.OWNER_DEFAULT_BOOKMARKS}}:R))},onSettled:async(N,P)=>{if(!N||!N.response?.updated_collection)return;const R=N.response.updated_collection,k=N.entryUUID,O=N.frontendContextUUID,{uuid:L,title:F,emoji:U=null,slug:V,access:W,user_permission:H}=R;await n.cancelQueries({queryKey:d}),await n.cancelQueries({queryKey:Jt}),VG(n,{entryUUID:k,frontendContextUUID:O,newCollectionUUID:L,newCollectionTitle:F,newCollectionEmoji:U,newCollectionSlug:V,newCollectionAccess:W,newCollectionUserPermission:H},d,i,p),n.invalidateQueries({queryKey:Jt}),n.invalidateQueries({queryKey:d}),n.invalidateQueries({queryKey:["results"]}),n.invalidateQueries({queryKey:[i,{frontend_context_uuid:O}]})}}),{mutate:E}=Mt({mutationFn:async({entryUUID:N,currentCollectionUUID:P,newCollectionTitle:R,newCollectionUUID:k,newCollectionSlug:O,newCollectionAccess:L,closeModal:F,callback:U})=>{if(k!==Rc)return F(),await Vx({params:{new_collection_uuid:k,entry_uuid:N,return_collection:!1,return_thread:!1},reason:e}),U?.(),y("add"),{entryUUID:N,currentCollectionUUID:P,newCollectionTitle:R,newCollectionUUID:k,newCollectionSlug:O,newCollectionAccess:L,closeModal:F}},onMutate:async({entryUUID:N,frontendContextUUID:P,currentCollectionUUID:R,newCollectionUUID:k,newCollectionTitle:O,newCollectionEmoji:L,newCollectionSlug:F,newCollectionAccess:U,newCollectionUserPermission:V})=>{await n.cancelQueries({queryKey:d}),await n.cancelQueries({queryKey:Jt});const W=n.getQueryData(d),H=n.getQueryData(Jt);return VG(n,{entryUUID:N,frontendContextUUID:P,newCollectionUUID:k,newCollectionTitle:O,newCollectionEmoji:L,newCollectionSlug:F,newCollectionAccess:U,newCollectionUserPermission:V},d,i,p),n.setQueryData(Jt,G=>{G=G||{pages:[],pageParams:[]};const K=G.pages.map($=>$.map(q=>q.uuid===R?{...q,thread_count:q.thread_count-1}:q.uuid===k?{...q,thread_count:q.thread_count+1}:q));return{...G,pages:K}}),{previousThread:W,previousCollections:H}},onSettled:(N,P,R,k)=>{if(P)n.setQueryData(d,k.previousThread),n.setQueryData(Jt,k.previousCollections);else{const L={collection_slug:R.existingCollectionSlug?.slice(-22)},F={collection_slug:R.newCollectionSlug.slice(-22)},U=[Ol,L],V=[Ol,F];n.invalidateQueries({queryKey:["get_collection",F]}),n.invalidateQueries({queryKey:U}),n.refetchQueries({queryKey:V}),n.refetchQueries({queryKey:m(R.entryUUID)}),n.invalidateQueries({queryKey:Jt}),n.invalidateQueries({queryKey:d}),n.invalidateQueries({queryKey:["results"]}),n.invalidateQueries({queryKey:[i,{frontend_context_uuid:R.frontendContextUUID}]}),n.invalidateQueries({queryKey:[em]})}}}),{mutate:M}=Mt({mutationFn:async({entryUUID:N,oldCollectionUUID:P,callback:R})=>{if(P)return await IG({collectionUUID:P,entryUUID:N,reason:e}),R?.(),y("remove"),{entryUUID:N,oldCollectionUUID:P}},onMutate:async({entryUUID:N,oldCollectionUUID:P,frontendContextUUID:R,collectionSlug:k})=>{await n.cancelQueries({queryKey:d}),await n.cancelQueries({queryKey:Jt});const O=n.getQueryData(d),L=n.getQueryData(Jt);return R&&(p(F=>F?F.map(U=>U.frontend_context_uuid===R?{...U,collection_info:void 0,bookmark_state:"NOT_BOOKMARKED"}:U):[]),n.setQueryData([i,{frontend_context_uuid:R}],F=>F?F.map(U=>U.frontend_context_uuid===R?{...U,collection_info:null,bookmark_state:"NOT_BOOKMARKED"}:U):[])),n.setQueryData(d,F=>{F=F||{pages:[],pageParams:[]};const U=F.pages.map(V=>V.map(W=>N===W.uuid&&W.collection?.uuid===P?{...W,collection:null}:W));return{...F,pages:U}}),n.setQueryData(Jt,F=>{F=F||{pages:[],pageParams:[]};const U=F.pages.map(V=>V.map(W=>W.uuid===P?{...W,thread_count:W.thread_count-1}:W));return n.setQueryData(m(N),V=>V&&Array.isArray(V.pages)?{...V,pages:V.pages.map(W=>W.map(H=>H.uuid===N?{...H,collection_info:null}:H))}:{...V,collection_info:null}),{...F,pages:U}}),k&&n.setQueryData([Ol,{collection_slug:k.slice(-22)}],(F={pages:[],pageParams:[]})=>({...F,pages:F.pages.map(U=>U.filter(V=>V.uuid!==N))})),{previousThreads:O,previousCollections:L}},onSettled:(N,P,R,k)=>{if(P)n.setQueryData(d,k.previousThreads),n.setQueryData(Jt,k.previousCollections);else if(n.invalidateQueries({queryKey:m(R.entryUUID)}),n.invalidateQueries({queryKey:d}),n.invalidateQueries({queryKey:Jt}),n.invalidateQueries({queryKey:["results"]}),n.invalidateQueries({queryKey:[em]}),n.invalidateQueries({queryKey:[i,{frontend_context_uuid:R.frontendContextUUID}]}),R.collectionSlug){const O={collection_slug:R.collectionSlug.slice(-22)},L=[Ol,O];n.invalidateQueries({queryKey:L}),n.invalidateQueries({queryKey:["get_collection",O]})}}}),{mutate:T}=Mt({mutationFn:async N=>{await HGe({collectionUuid:N,reason:e})},onSuccess:(N,P)=>{n.invalidateQueries({queryKey:Jt}),n.invalidateQueries({queryKey:[em]}),n.invalidateQueries({queryKey:ny()}),n.invalidateQueries({queryKey:nm()}),n.setQueryData(Jt,R=>!R||!R.pages?R:{...R,pages:R.pages.map(k=>k.filter(O=>O.uuid!==P))})}}),{mutate:I}=Mt({mutationFn:async({collectionUuid:N,link:P,reason:R})=>{const k=await er({urlPath:"/rest/collections/focused_web_config/links",timeoutMs:je(),method:"POST",body:JSON.stringify({collection_uuid:N,link:P}),headers:{"content-type":"application/json"},numRetries:1,reason:R});if(!k.ok){const O=await k.json();throw new Error(O.detail||"Failed to add link")}return k},onSettled:(N,P,R,k)=>{n.invalidateQueries({queryKey:["get_collection",{collection_slug:R.collectionSlug.slice(-22)}]})}}),{mutate:j}=Mt({mutationFn:async({collectionUuid:N,link:P,reason:R})=>{await er({urlPath:"/rest/collections/focused_web_config/links",timeoutMs:je(),method:"DELETE",body:JSON.stringify({collection_uuid:N,link:P}),headers:{"content-type":"application/json"},numRetries:1,reason:R})},onSettled:(N,P,R,k)=>{n.invalidateQueries({queryKey:["get_collection",{collection_slug:R.collectionSlug.slice(-22)}]})}});return f.useMemo(()=>({updateCollectionInfo:v,updateCollectionAccessLevel:x,createCollectionForThread:b,createCollection:_,bookmarkFromFeed:w,removeBookmarkFromFeed:S,firstTimeBookmark:C,swapThreadCollection:E,removeThreadFromCollection:M,deleteCollection:T,addLink:I,removeLink:j}),[I,w,b,_,T,C,S,j,M,E,x,v])},Uqe=({reason:e})=>Ke({queryKey:["list_space_templates"],queryFn:()=>Pqe({reason:e})}),Xde=({collectionSlug:e,reason:t})=>{const{data:n,isLoading:r}=Uqe({reason:t});return f.useMemo(()=>!n?.templates||!e?{templateSpace:void 0,isLoading:r}:{templateSpace:n.templates.find(s=>s.collection.slug===e),isLoading:r},[e,n?.templates,r])},uBt=({template:e,reason:t})=>{const n=At(),{$t:r}=X(),{trackEvent:s}=Te(),{openToast:a}=On(),{createCollection:o,addLink:i}=Sp({reason:t}),{collection:c,tags:u}=e,d=f.useCallback(()=>{c&&(s("space template copied",{collectionSlug:c.slug??"",templateTitle:c?.title??"",tags:Array.from(u)}),o({...c,title:c.title??"",description:c.description??"",instructions:c.instructions??"",emoji:c.emoji??"",accessLevel:pt.PRIVATE_READ,callback:async m=>{c.focused_web_config?.link_configs&&await Promise.all(c.focused_web_config.link_configs.map(h=>i({collectionUuid:m.uuid,link:h.link??"",collectionSlug:m.slug,reason:t}))),n.push(`/spaces/${m.slug}`),a(r({defaultMessage:"Space is ready to customize",id:"AWqOucIdz5"}),"success",3)}}))},[n,c,u,o,a,r,s,i,t]);return f.useMemo(()=>({handleCopyTemplate:d}),[d])},y9=(e,t,n)=>{f.useEffect(()=>{const r=new IntersectionObserver(a=>{a.forEach(o=>{o.isIntersecting&&t()})},n),s=e.current;return s&&r.observe(s),()=>{s&&r.unobserve(s)}},[e,t,n])},N2=(e,t)=>{const n=t?.isOverlapping??!1,r=t?.stackDirection??"left";if(!e.length)return l.jsx(be,{icon:nh,size:"sm"});const s=t?.maxVisuals??3;if(e.length>s)return l.jsxs("div",{className:"gap-x-xs flex items-center px-1",children:[l.jsx(be,{icon:nh}),l.jsx("span",{className:"text-xs",children:l.jsx(he,{id:"Pc503bLReE",defaultMessage:"{count, plural, one {#source} other {# sources}}",values:{count:e.length}})})]});const a=e.map((o,i)=>{const c=B("relative flex items-center justify-center rounded-full",{"size-4":t?.size==="sm","size-5":t?.size==="md","size-6":t?.size==="lg","size-7":t?.size==="xl"}),u=B(c,"bg-offsetPlus ring-inverse dark:ring-offset first:ml-0",{"-ml-0.25 ring-[4px]":t?.size==="sm","-ml-1 ring-1":t?.size==="md","-ml-1 ring-[2px]":t?.size==="lg"||t?.size==="xl"});return l.jsx("div",{className:n?u:c,style:{zIndex:r==="left"?e.length-i-1:e.length+i},children:o},i)});return l.jsxs("div",{className:t?.containerClass??"my-xs flex items-center",children:[l.jsx("div",{className:B("flex items-center",{"gap-2":!n}),children:a.slice(0,s)}),t?.rightText&&l.jsx("div",{className:"ml-2",children:t.rightText})]})},v9=e=>{switch(e){case"GOOGLE_DRIVE":return lh;case"ONEDRIVE":return ch;case"SHAREPOINT":return uh;case"DROPBOX":return dh;case"BOX":return $S;case"WILEY":return NO;case"GCAL":return _v;case"NOTION":return hu;case"NOTION_MCP":return hu;case"LINEAR":return fh;case"LINEAR_ALT":return fh;case"SLACK":return Sv;default:return""}};function dBt(e){if(e===0)return"0 bytes";const t=1024,n=["bytes","KB","MB","GB","TB"],r=Math.floor(Math.log(e)/Math.log(t));return Math.ceil(e/Math.pow(t,r))+" "+n[r]}const fBt=e=>{const t=e.file_metadata.file_type;return t==="FOLDER"||t==="DATABASE"||t==="WORKSPACE"||t==="PAGE"},mBt=e=>{const t=e.file_metadata.file_type;return t==="FOLDER"||t==="DATABASE"||t==="WORKSPACE"?p4e:hf},$c=e=>{switch(e){case"GOOGLE_DRIVE":return DS;case"ONEDRIVE":return US;case"SHAREPOINT":return BS;case"DROPBOX":return AO;case"BOX":return VS;case"GCAL":return FS;case"NOTION":return wv;case"NOTION_MCP":return wv;case"OUTLOOK":return iie;case"LINEAR":case"LINEAR_ALT":return PO;case"SLACK":return RO;default:return null}},A2=e=>{switch(e){case"crunchbase":return TO;case"factset":return EO;case"wiley":return LS;case"google_drive":return DS;case"onedrive":return US;case"sharepoint":return BS;case"gcal":return FS;case"dropbox":return AO;case"box":return VS;case"gmail":return A8e;case"notion":case"notion_mcp":return wv;case"outlook":return iie;case"linear":case"linear_alt":return PO;case"slack":return RO;default:return null}},$x=e=>{switch(e){case"crunchbase":return kO;case"factset":return MO;case"google_drive":return lh;case"onedrive":return ch;case"sharepoint":return uh;case"gcal":return _v;case"dropbox":return dh;case"box":return $S;case"gmail":return P8e;case"notion":case"notion_mcp":return hu;case"outlook":return TA;case"linear":case"linear_alt":return fh;case"slack":return Sv;default:return e}},Bqe=e=>{switch(e){case"GOOGLE_DRIVE":return lh;case"ONEDRIVE":return ch;case"SHAREPOINT":return uh;case"DROPBOX":return dh;case"BOX":return $S;case"NOTION":return hu;case"NOTION_MCP":return hu;case"LINEAR":case"LINEAR_ALT":return fh;case"SLACK":return Sv;default:return""}},hBt=(e,t)=>new Date(e+"Z").toLocaleString(t,{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone}),pBt=(e,t)=>{switch(e){case"RECEIVED":case"QUEUED":case"RATE_LIMITED":return t.formatMessage({id:"Cnm0QAkWnp",defaultMessage:"Queued"});case"SYNCING":return t.formatMessage({id:"eOnwqs6QFY",defaultMessage:"Syncing"});case"SYNC_ERROR":return t.formatMessage({id:"N1cqoEe4CZ",defaultMessage:"Sync error"});case"EVALUATING_RESYNC":case"READY":return t.formatMessage({id:"IZFEUgrg25",defaultMessage:"Ready"})}},gBt=(e,t)=>{if(t==="WILEY")return v9(t);if(t||e.is_memory||e.is_conversation_history)return e.name&&e.name.trim()?e.name:void 0},Zde=e=>e.isFile,Jde=e=>e.isDirectory,Vqe=async(e,t=i8e)=>{const n=[e],r=[];for(;n.length>0;){const s=n.pop();if(s){if(Zde(s)){const a=await new Promise(o=>{s.file(o)});if(r.push(a),r.length>t)return r}else if(Jde(s)){const a=s.createReader(),o=await new Promise(i=>a.readEntries(i));n.push(...o)}}}return r},Wi=A.memo(({blockCount:e,size:t=Ft.large,animateLines:n=!0,divider:r,noLines:s,noHeight:a,variant:o="offset",className:i,...c})=>{const u="h-1 bg-inverse/70  rounded-full",d=f.useMemo(()=>{const m=[];for(let h=0;h<(e??1);h++)m.push(l.jsx(z,{variant:o,className:B("animate-pulse rounded-md",{"h-8":t===Ft.small,"h-10":t===Ft.regular,"h-[72px]":t===Ft.large,"h-32":t===Ft.xl,"h-6":t===Ft.tiny,"h-full":a}),children:l.jsx("div",{className:"gap-y-sm p-md flex h-full flex-col",children:!s&&l.jsxs(l.Fragment,{children:[l.jsx(_e.div,{initial:{width:n?0:"100%"},animate:{width:"100%"},transition:{duration:.8,delay:.2},className:u}),l.jsx(_e.div,{initial:{width:n?0:"100%"},animate:{width:"100%"},transition:{duration:.8,delay:.2},className:u}),l.jsx(_e.div,{initial:{width:n?0:"80%"},animate:{width:"80%"},transition:{duration:.8,delay:.2},className:u}),l.jsx(_e.div,{initial:{width:n?0:"20%"},animate:{width:"20%"},transition:{duration:.8,delay:.2},className:u})]})})},h));return m},[n,e,t,s,a,o]);return l.jsx(z,{className:B("h-full",{"divider gap-y-sm flex flex-col":r,"absolute top-0 w-full":a},i),...c,children:d})});var Pn;(function(e){e.GOOGLE_DRIVE="GOOGLE_DRIVE",e.ONEDRIVE="ONEDRIVE",e.SHAREPOINT="SHAREPOINT",e.DROPBOX="DROPBOX",e.BOX="BOX",e.WILEY="WILEY",e.GCAL="GCAL",e.GENERATED_IMAGE="GENERATED_IMAGE",e.GENERATED_VIDEO="GENERATED_VIDEO",e.NOTION="NOTION",e.NOTION_MCP="NOTION_MCP",e.OUTLOOK="OUTLOOK",e.LINEAR="LINEAR",e.LINEAR_ALT="LINEAR_ALT",e.SLACK="SLACK",e.LOCAL="LOCAL"})(Pn||(Pn={}));const $qe=({totalLocalFiles:e,totalRepoFiles:t,isFileManagerUiRedesignEnabled:n})=>{const r=t-e;return n?"files":e===0&&r>0?"connectors":(e>0&&r===0||e>0&&r>0,"localFiles")},efe=A.memo(({collectionSlug:e,handleSpaceEdit:t,handleSourcesEdit:n})=>{const r="space-context",s=X(),{variation:a}=CGe(!1),{collection:o}=xc({collectionSlug:e,reason:r}),{isUserReader:i,isUserAtLeastWriter:c,isUserInvited:u}=m9({collectionSlugOverride:e,reason:r}),{templateSpace:d}=Xde({collectionSlug:e??"",reason:r}),m=i&&!!d,h=f.useRef(null),{fileRepoInfo:p}=Au({reason:r,collectionSlugOverride:e}),{mutate:g}=Vde({reason:r}),{searchTerm:y}=gqe({reason:r}),{completedFiles:v,totalFiles:x,hasNextPage:b,fetchNextPage:_}=KGe({fileRepoInfo:p,searchTerm:y,limit:RG,reason:r}),{data:w,hasNextPage:S,fetchNextPage:C}=AGe({connectionTypes:[Pn.GOOGLE_DRIVE,Pn.ONEDRIVE,Pn.SHAREPOINT,Pn.DROPBOX,Pn.BOX],status:["READY"],fileRepoInfo:p,pageSize:RG,fileTypes:["FILE"],reason:r}),{connectorFiles:E,totalRepoFiles:M}=f.useMemo(()=>{const L=w?w.pages[w.pages.length-1]:null;return{connectorFiles:w?.pages.map(F=>F.files).flat()||[],totalRepoFiles:L?.files_in_repo??0}},[w]),{focusedWebLinks:T,totalFocusedWebLinks:I}=f.useMemo(()=>{const L=o?.focused_web_config?.link_configs??[];return{focusedWebLinks:L,totalFocusedWebLinks:L.length}},[o?.focused_web_config?.link_configs]),j=f.useCallback(L=>L.file_s3_url?()=>g({file_url:L.file_s3_url}):null,[g]),N=f.useCallback(L=>()=>{L.connection_file_url&&window.open(L.connection_file_url,"_blank")},[]),P=f.useCallback(L=>()=>window.open(`https://${L.link}`,"_blank"),[]),R=f.useCallback(L=>{let F="",U=null;return L==="INSTRUCTIONS"?F=s.formatMessage({defaultMessage:"Add instructions to format, scope, and add relevance to your search results.",id:"JnYU6ctsCn"}):L==="FILES"?(F=c?s.formatMessage({defaultMessage:"Upload or sync files to be used as sources in every search.",id:"yF+cGexY2F"}):s.formatMessage({defaultMessage:"No files included.",id:"wZ9qntul+a"}),c&&(U=N2([l.jsx(Cn,{user:DS,showBackground:!1,size:"small"},"gdrive"),l.jsx(Cn,{user:US,showBackground:!1,size:"small"},"onedrive"),l.jsx(Cn,{user:BS,showBackground:!1,size:"small"},"sharepoint"),l.jsx(be,{icon:cS,size:"sm"},"upload")],{isOverlapping:!0,maxVisuals:4,size:"xl",stackDirection:"right"}))):L==="LINKS"&&(F=c?s.formatMessage({defaultMessage:"Add URLs to be used as sources in every search.",id:"FTItpgdarF"}):s.formatMessage({defaultMessage:"No links included.",id:"Qid6Kgk2jz"})),F?l.jsxs(z,{className:"px-sm py-md gap-y-xs flex flex-col items-center",children:[U&&l.jsx(z,{className:"mb-xs",children:U}),l.jsx(D,{variant:"small",color:"light",className:"text-center",children:F})]}):null},[s,c]),k=f.useMemo(()=>[{id:"INSTRUCTIONS",text:s.formatMessage({defaultMessage:"Instructions",id:"sV2v5LjRpX"}),content:[{icon:null,badge:null,text:o?.instructions,onClick:null}],hasNextPage:!1,showSection:!u&&c||m,actionIcon:uc,action:t,showButton:!u&&c,isEmpty:!o?.instructions,testId:"space-context-instructions-edit-button"},{id:"FILES",text:s.formatMessage({defaultMessage:"Files",id:"m4vqJl0/FT"}),content:[...v.map(L=>({icon:hf,badge:null,text:L.name,onClick:j(L)})),...E.map(L=>({icon:Qne,badge:$c(L.connection_type),text:L.name,onClick:N(L)}))],hasNextPage:b||S,showSection:!0,actionIcon:mr,action:n?()=>{const L=$qe({totalLocalFiles:x,totalRepoFiles:M,isFileManagerUiRedesignEnabled:a});n(L)}:void 0,itemCount:M,showButton:!u&&c,isEmpty:M===0,testId:"space-context-files-add-button"},{id:"LINKS",text:s.formatMessage({defaultMessage:"Links",id:"qCcwo3DU78"}),content:T.map(L=>({icon:N0,badge:null,text:L.link,onClick:P(L)})),hasNextPage:!1,showSection:!0,actionIcon:mr,action:n?()=>n("links"):void 0,showButton:!u&&c,isEmpty:I===0,testId:"space-context-links-add-button"}],[s,o?.instructions,v,E,T,x,M,I,b,S,n,t,j,N,P,u,c,m,a]),O=f.useMemo(()=>ks(()=>{b?_():S&&C()},500),[b,_,S,C]);return y9(h,O,{threshold:.5}),l.jsx(z,{className:"hideScroll h-full flex-col overflow-y-auto",children:k.map((L,F)=>L.showSection?l.jsxs(z,{children:[l.jsxs("div",{className:"my-xs py-xs pl-sm flex items-center justify-between",children:[l.jsx(D,{variant:"smallBold",children:L.itemCount?`${L.text} (${L.itemCount})`:L.text}),L.showButton&&L.action&&L.actionIcon&&l.jsx(ke,{variant:"common",size:"small",icon:L.actionIcon,pill:!0,onClick:L.action,"data-testid":L.testId})]}),L.isEmpty?R(L.id):L.content.map((U,V)=>{const W=U.icon&&l.jsx(z,{className:"flex size-6 flex-none items-center justify-center",children:l.jsx(tfe,{icon:U.icon,badge:U.badge})});return l.jsx(z,{children:U.onClick?l.jsx(ke,{variant:"positive",text:U.text,leadingComponent:W,onClick:U.onClick,textClassName:"font-sans font-normal text-sm",layout:"left",fullWidth:!0}):l.jsxs(z,{className:"pl-sm gap-x-xs flex w-full items-center py-[10px]",children:[W,l.jsx(D,{variant:"small",color:"light",className:`${L.id==="INSTRUCTIONS"?"line-clamp-4":"line-clamp-1"} pl-px`,children:U.text})]})},L.id+V)}),L.hasNextPage&&l.jsx(Wi,{ref:h,size:"small",className:"my-xs"}),k.some((U,V)=>V>F&&U.showSection)&&l.jsx("hr",{className:"my-sm"})]},L.id):null)})});efe.displayName="SpaceContext";const tfe=A.memo(({icon:e,badge:t})=>{const n=f.useMemo(()=>t&&l.jsx(Cn,{size:"tiny",showBackground:!1,rounded:!1,user:t}),[t]);return l.jsx(be,{icon:e,size:18,stroke:2,color:"#64645F",badge:n})});tfe.displayName="BadgedIconFactory";const nfe=A.memo(({closeModal:e,isOpen:t,collectionSlug:n})=>{const r="space-context-modal",s=X(),{openModal:a}=_t(),{collection:o}=xc({collectionSlug:n,reason:r}),{isUserAtLeastWriter:i,isUserAtLeastReader:c}=m9({reason:r,collectionSlugOverride:n}),u=gt(),d=f.useCallback(()=>{if(n){const g=["get_collection",{collection_slug:n.slice(-22)}];u.invalidateQueries({queryKey:g})}e()},[e,n,u]),m=f.useCallback(()=>{o&&a("spaceSettings",{existingSpace:o})},[o,a]),h=f.useCallback(g=>{o&&a("uploadFilesModal",{initialTab:g,collectionSlug:n})},[o,n,a]),p=f.useMemo(()=>l.jsx(D,{variant:"section-title",className:"px-sm",children:s.formatMessage({defaultMessage:"Context",id:"V2qutIKrxy"})}),[s]);return l.jsx(rn,{variant:"side-sheet",isOpen:t,onClose:d,includeBlur:!1,titleContent:p,modalClassname:"!min-w-[300px] !w-[25vw]",closeButtonClassname:"right-sm absolute",fixedTitle:!0,children:l.jsx(efe,{collectionSlug:n,handleSpaceEdit:i?m:void 0,handleSourcesEdit:c?h:void 0})})});nfe.displayName="SpaceContextModal";const Wqe=({children:e,title:t,handleClose:n,experimentalImageDesign:r})=>{const{image:s,imageAlt:a}=r;return l.jsxs(z,{variant:"offset",className:"max-w-[400px] overflow-hidden rounded-xl md:flex md:max-w-[960px]",children:[l.jsx("div",{className:"md:w-[55%]",children:l.jsx("img",{src:s,alt:a,className:"md:object-cover"})}),l.jsxs("div",{className:"p-lg md:p-xl relative flex flex-col md:w-[45%]",children:[l.jsx(nC,{testId:"close-modal",variant:"common",size:"small",onClick:n}),l.jsx("div",{className:"mb-lg grow",children:l.jsx(D,{color:"default",variant:"page-title",className:"font-editorial my-sm text-center text-[2rem] font-light leading-none tracking-tight",children:t})}),e]})]})},P2=(e,t)=>e==="highlightPrimary"?t?"primary":"common":e==="highlightBackToSchool"?t?"orange":"common":"inverted",Hqe=({handleThirdPartySignIn:e,loginButtonsStyle:t})=>{const{$t:n}=X();return l.jsx(ye,{fullWidth:!0,leadingComponent:l.jsx(g4e,{className:"left-two relative -top-px",size:18}),extraCSS:"h-11",variant:P2(t,!1),text:n({defaultMessage:"Continue with {apple}",id:"Iy1YQBJ5Tk"},{apple:"Apple"}),onClick:()=>e("apple")})},zqe=({onClick:e})=>{const{$t:t}=X();return l.jsx(ke,{fullWidth:!0,variant:"noBackground",extraCSS:"border-none text-inverse",text:t({defaultMessage:"Close",id:"rbrahOGMC3"}),onClick:e})},Gqe=({autoFocus:e=!1,isSSO:t,email:n,emailInFlight:r,handleEmailClick:s,inputRef:a,handleKeyDown:o,setEmail:i,error:c,setError:u,placeholder:d,loginButtonsStyle:m})=>{const{$t:h}=X(),{isMobileUserAgent:p}=Ce(),g="regular",y="w-full h-11",v=B("h-11 border-none rounded-lg","!bg-offsetPlus");return l.jsxs(z,{className:"space-y-xs",children:[l.jsx(xo,{autoFocus:e,isMobileUserAgent:p,type:"email",name:"email",className:v,pill:!1,errorText:c,placeholder:d||h(t?{defaultMessage:"Enter your work email",id:"jAgre55Zsn"}:{defaultMessage:"Enter your email",id:"5MDGuMLnEB"}),value:n,onKeyDown:o,onChange:x=>{u(""),i(x)},ref:a,disabled:r,errorPlacement:Lm.LABEL}),l.jsx("div",{className:"flex justify-center",children:t?l.jsx(ye,{chevron:!0,chevronIcon:Jr,size:g,text:h(t?{defaultMessage:"Continue with SSO",id:"qank7+0V6w"}:{defaultMessage:"Continue with email",id:"l6yCDglZqT"}),extraCSS:B(y,"mt-xs"),variant:P2(m,!0),onClick:s,isLoading:r,disabled:n===""||r}):l.jsx(ye,{size:g,text:h({defaultMessage:"Continue with email",id:"l6yCDglZqT"}),onClick:s,isLoading:r,disabled:n===""||r,extraCSS:"w-full h-11 mt-xs",variant:P2(m,!0)})})]})},qqe=({handleThirdPartySignIn:e,loginButtonsStyle:t})=>{const{$t:n}=X();return l.jsx(ye,{fullWidth:!0,leadingComponent:l.jsx(y4e,{size:18}),text:n({defaultMessage:"Continue with {google}",id:"Fc2NqN6N7A"},{google:"Google"}),onClick:()=>e("google"),extraCSS:"h-11",variant:P2(t,!0)})},Kqe=({internalItems:e,isMobileStyle:t})=>{const{$t:n}=X();return l.jsx(z,{children:l.jsx(en,{items:e.map(r=>({type:"default",...r})),isMobileStyle:t,children:l.jsx(ye,{icon:v4e,text:n({defaultMessage:"Internal Login",id:"waIOTqSbxu"}),chevron:!0,fullWidth:!0,variant:"rejected"})})})},Yqe=({onClick:e})=>{const{$t:t}=X();return l.jsx(ke,{size:"tiny",variant:"noBackground",text:t({defaultMessage:"Single sign-on (SSO)",id:"TI79WvQ5kU"}),onClick:e})},rfe={SIDEBAR:"sidebar",LOGIN_MODAL:"login-modal"},Fs={ANSWER_MODE_TABS_ROOT:"answer-mode-tabs",ANSWER_MODE_TABS:{ANSWER:e=>`answer-mode-tabs-tab-${e}`,SEARCH:"answer-mode-tabs-tab-search",RESEARCH:"answer-mode-tabs-tab-research",SHOPPING:"answer-mode-tabs-tab-shopping",ASSETS:"answer-mode-tabs-tab-assets",JOBS:"answer-mode-tabs-tab-jobs",HOTELS:"answer-mode-tabs-tab-hotels",PLACES:"answer-mode-tabs-tab-places",IMAGES:"answer-mode-tabs-tab-images",VIDEOS:"answer-mode-tabs-tab-videos",SOURCES:"answer-mode-tabs-tab-sources",APPS:"answer-mode-tabs-tab-apps",TASKS:"answer-mode-tabs-tab-tasks",CHAT:"answer-mode-tabs-tab-chat"},ANSWER_MODE_JOBS:{FILTERS_ROOT:"jobs-filters"},ANSWER_MODE_VIDEO:{VIDEO_PREVIEW:"jobs-video-preview"},ANSWER_MODE_IMAGE:{IMAGE_PREVIEW:"jobs-image-preview"},ANSWER_MODE_SHOPPING:{SHOPPING_ITEM:"shopping-item"},ANSWER_MODE_PLACES:{PLACE_ITEM:"place-item"},ANSWER_MODE_HOTELS:{HOTEL_ITEM:"hotel-item"}},Qqe=({autoFocus:e,showInternal:t,disallowedMethods:n,className:r,email:s,setEmail:a,error:o,onClose:i,setError:c,handleEmailClick:u,handleKeyDown:d,emailInFlight:m,handleThirdPartySignIn:h,isSSO:p,setIsSSO:g,internalItems:y,envHasDevLogins:v,isMobileStyle:x,placeholder:b,showCloseButton:_,loginButtonsStyle:w})=>{const S=A.useRef(null),C=!n?.includes("google"),E=!n?.includes("apple"),M=!p&&!n?.includes("sso"),T=f.useMemo(()=>[...C?["google"]:[],...E?["apple"]:[],...t&&v?["internal"]:[]],[C,E,t,v]),I=f.useMemo(()=>({google:l.jsx(qqe,{handleThirdPartySignIn:h,loginButtonsStyle:w}),apple:l.jsx(Hqe,{handleThirdPartySignIn:h,loginButtonsStyle:w}),internal:l.jsx(Kqe,{internalItems:y,isMobileStyle:x})}),[h,y,x,w]);return l.jsxs("div",{className:r,"data-testid":rfe.LOGIN_MODAL,children:[p&&l.jsx("div",{className:"absolute left-0 top-0 z-40",children:l.jsx(ke,{size:"small",icon:dS,onClick:()=>{g(!1),c(void 0)}})}),l.jsxs("div",{className:"mx-auto max-w-sm",children:[!p&&l.jsxs(l.Fragment,{children:[T.length>0&&l.jsx("div",{className:"space-y-sm mx-auto w-[90%]",children:T.map(j=>l.jsx(A.Fragment,{children:I[j]},j))}),T.length>0&&l.jsx(z,{className:"mx-auto my-4 h-0 w-[90%] shrink-0 border-t"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"mx-auto w-[90%]",children:l.jsx(Gqe,{autoFocus:e||p,isSSO:p,email:s,emailInFlight:m,handleEmailClick:u,inputRef:S,handleKeyDown:d,setError:c,setEmail:a,error:o,placeholder:b,loginButtonsStyle:w})}),M&&l.jsx("div",{className:"mt-md flex justify-center",children:l.jsx(Yqe,{onClick:()=>{g(!0)}})}),_&&l.jsxs(l.Fragment,{children:[l.jsx(z,{className:"my-4 h-0 w-full shrink-0"}),l.jsx(zqe,{onClick:i})]})]})]})]})};let sfe=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");function Xqe(e,t){const n=$G(e),r=$G(t);return n.major>r.major?!0:n.major<r.major?!1:n.minor>r.minor?!0:n.minor<r.minor?!1:n.patch>r.patch?!0:!(n.patch<r.patch)}function $G(e){const[t,n,r]=e.split(".").map(Number);return{major:t,minor:n,patch:r}}function Zqe(e){return Xqe(afe(),e)}function Oy(e,t){return Zqe(t)?!0:(console.warn(`[todesktop-client] ${e} not called. ${e} was introduced in ${t}. You are running version ${afe()}.`),!1)}const afe=()=>typeof window.todesktop=="object"&&window.todesktop.desktopifyVersion,Hl=typeof window<"u"&&window.todesktop,Jqe=e=>async(t,n)=>{const r=sfe(),s=t==="*"?Object.keys(e):[t];for(const o of s){const i=e[o];Hl?.on(i,n,r)}const a=ofe(e);return async()=>a(t,n,r)},eKe=e=>async(t,n)=>{const r=sfe(),s=t==="*"?Object.keys(e):[t];for(const o of s){const i=e[o];Hl?.on(i,n,r)}const a=ofe(e);return async()=>a(t,n,r)},ofe=e=>(t,n,r)=>{const s=t==="*"?Object.keys(e):[t];for(const a of s){const o=e[a];Hl?.off(o,n,r)}};function tKe(e,t){const n={package:{name:e,version:t},invoke:{version:"1.0.0"}};function r(o){const i={metadata:n,payload:{command:o}};return window.todesktop.invoke(i)}function s(o){const i={metadata:n,payload:{command:Object.assign(Object.assign({},o),{method:":new"})}};return window.todesktop.invoke(i)}function a(o){if(Oy("releaseMemory","4.6.0")){if(!o?.length){console.log("No memory references to release");return}return window.todesktop.releaseMemory(o)}}return{invoke:r,construct:s,releaseMemory:a}}const{invoke:xa,construct:ife}=tKe("client-core","1.0.0-dev"),nKe={openProtocolURL:"open-protocol-url"},rKe=eKe(nKe);var CT;const ET=typeof window<"u"&&window.todesktop,sKe=(e,t)=>{const n=async(a,o,{ref:i,preventDefault:c}={})=>{if(t&&!Oy(`${e} addEventListener`,t))return;const u=await xa({instanceRef:i,namespace:e,eventName:a,eventOptions:{preventDefault:c}});return window.todesktop.on(u,(d,...m)=>{if(cKe(m[0])){const[,...h]=m;return o(...h)}else return o(...m)}),()=>r(a,{eventId:u,ref:i})},r=async(a,...o)=>{const{eventId:i,ref:c}=o[0]||{};t&&!Oy(`${e} removeEventListener`,t)||(await xa({instanceRef:c,namespace:e,eventName:a,eventId:i}),window.todesktop.off(i))};return{removeAllListeners:async(a,{ref:o}={})=>{t&&!Oy(`${e} removeAllListeners`,t)||(await xa({instanceRef:o,namespace:e,method:"removeAllListeners",args:[a]}),window.todesktop.off(a))},on:n}};function aKe(e){console.warn(`[todesktop-client] ${e} is a legacy event and may be removed in future.
        Contact support or look through our typescript files to find a suitable replacement.`)}function oKe(e,t){const n=e[0],r=n in t;return r&&aKe(n),r}const iKe=(e,t)=>oKe(e,t),lKe=(e,t)=>{const n=sKe(t),r=(...s)=>iKe(s,e)?Jqe(e)(...s):n.on(...s);return{removeAllListeners:n.removeAllListeners,on:r}};(CT=ET?.env)===null||CT===void 0||CT.NODE_ENV;const cKe=e=>uKe(e)&&"preventDefault"in e&&"sender"in e,uKe=e=>e===null?!1:typeof e=="function"||typeof e=="object";async function dKe(e,t){return window.todesktop.shortcut.register(e,t)}async function MT(e){return window.todesktop.shortcut.unregister(e)}async function fKe(e){return ife({namespace:"BrowserWindow",args:[e]})}async function mKe({ref:e,viewRef:t}){return xa({instanceRef:e,namespace:"BrowserWindow",method:"setBrowserView",args:[t]})}async function hKe({ref:e}={}){return xa({instanceRef:e,namespace:"BrowserWindow",method:"getSize",args:[]})}async function x9({ref:e}={}){return xa({instanceRef:e,namespace:"BrowserWindow",method:"focus",args:[]})}async function CP({ref:e}={}){return xa({instanceRef:e,namespace:"BrowserWindow",method:"isVisible",args:[]})}async function pKe({ref:e}={}){return xa({instanceRef:e,namespace:"BrowserWindow",method:"hide",args:[]})}async function b9({ref:e}={}){return xa({instanceRef:e,namespace:"BrowserWindow",method:"show",args:[]})}async function gKe({ref:e}={}){return await xa({instanceRef:e,namespace:"BrowserWindow",property:"webContents"})}async function yKe({ref:e}={},...t){return xa({instanceRef:e,namespace:"BrowserWindow",method:"setPosition",args:t})}const vKe={enterFullscreen:"window.enter-full-screen",exitFullscreen:"window.leave-full-screen"},lfe=lKe(vKe,"BrowserWindow"),oy=lfe.on,EP=lfe.removeAllListeners;async function WG({id:e}){if(Oy(`${HG}:retrieve`,"4.18.0"))return window.todesktop[HG]({action:"retrieve",payload:{id:e}})}const HG="objectStore";async function R2(e){return window.todesktop.contents.openUrlInBrowser(e)}async function xKe(){return xa({namespace:"screen",method:"getCursorScreenPoint",args:[]})}async function bKe(e){return xa({namespace:"screen",method:"getDisplayNearestPoint",args:[e]})}async function _Ke(e){return ife({namespace:"BrowserView",args:[e]})}async function wKe({ref:e},...t){return xa({instanceRef:e,namespace:"WebContents",method:"loadURL",args:t})}const SKe="pkce_verifier",CKe=5/(24*60),EKe=128,MKe=e=>{const t=Math.ceil(e*.75),n=new Uint8Array(t);return crypto.getRandomValues(n),btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"").slice(0,e)},TKe=async e=>{const n=new TextEncoder().encode(e);try{let r;typeof window<"u"&&window.crypto?.subtle?r=await window.crypto.subtle.digest("SHA-256",n):r=new TextEncoder().encode(e);const s=Array.from(new Uint8Array(r)),a=String.fromCharCode(...s);return btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}catch(r){throw ee.error("Failed to generate code challenge: "+r),new Error("Failed to generate code challenge: "+r)}},kKe=e=>{qt(SKe,e,{secure:!0,sameSite:"Lax",expires:CKe,path:"/"})},zG=async()=>{const e=MKe(EKe);return kKe(e),TKe(e)},TT={cacheName:{prefix:"pplx",suffix:"v2",runtime:"runtime"}},NKe=[TT.cacheName.prefix,TT.cacheName.runtime,TT.cacheName.suffix].join("-");async function GG(){const e=Ys();if("serviceWorker"in navigator){const{Workbox:t}=await oe(async()=>{const{Workbox:s}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:s}},[]),n=new URL("/service-worker.js",window.location.origin);e.version&&n.searchParams.set("v",e.version);const r=new t(n.toString());try{await r.register()}catch(s){ee.error("Error registering service worker",s)}}}async function AKe(){"serviceWorker"in navigator&&await navigator.serviceWorker.getRegistrations().then(e=>Promise.all(e.map(t=>t.unregister())))}async function EC(){if("serviceWorker"in navigator){await caches.delete(NKe);return}}const iy=async(...e)=>(await EC(),za.signIn(...e)),PKe=async({email:e,reason:t})=>{let n=null;try{n=await ade({email:e,reason:t})}catch(r){return ee.log(r),null}return n?.workos_org_id??null},RKe=async({email:e,reason:t})=>{let n=null;try{n=await ade({email:e,reason:t})}catch(r){return ee.log(r),null}return n?.force_sso??!1},IKe=({email:e,onError:t,onClose:n,redirectUrl:r,reason:s})=>{const{$t:a}=X(),{trackEvent:o}=Te(),{isWindowsApp:i}=Wt(),c=At(),{locale:u}=X(),d=f.useMemo(()=>e.length>0&&e.includes("@")&&e.includes(".")&&e.indexOf("@")<e.lastIndexOf(".")&&e.indexOf("@")>0,[e]),m=f.useCallback(async y=>{o("login with third party clicked",{thirdParty:y});const v=window.location.origin;if(i){const x=await zG(),b=`${v}/auth/${o2}/${y}?code_challenge=${x}&desktopRedirect=${encodeURIComponent(r)}&client_id=${z$}`;return R2(b),b}return await iy(y,{callbackUrl:r})},[o,r,i]),h=f.useCallback(async()=>{const y=await PKe({email:e,reason:s});if(!y){t(`SSO not available for email ${e}`);return}if(n(),i){const v=window.location.origin,x=await zG(),b=`${v}/auth/${o2}/workos?code_challenge=${x}&desktopRedirect=${r}&organization=${y}&login_hint=${e}&client_id=${z$}`;R2(b);return}await iy("workos",{callbackUrl:r},{organization:y,login_hint:e})},[e,n,t,r,i,s]),p=f.useCallback(async()=>{const y=e?.toLowerCase();if(await RKe({email:y,reason:s})){await h();return}const x=_Oe({redirect:r});o("login with email clicked",{email:y});let b=`${x}#locale=${u}`;i&&(b=`${x}?windows-app-redirect-token=${j8e}#locale=${u}`);const _=await iy("email",{email:y,callbackUrl:b,redirect:!1});if(_?.ok){H3(`email request POST successful for ${y}`);const w=encodeURIComponent(y),S=encodeURIComponent(x),C=`/auth/verify-request?email=${w}&redirectUrl=${S}`;c.push(C)}else if(_?.status===429)H3(`email sign in rate limited for ${y}`),c.push("/auth/email-rate-limited");else{const w=`email sign in generic error: ${y} Response(status=${_?.status}, error=${_?.error}, ok=${_?.ok}, url=${_?.url})`;H3(w),ee.error(new Error(w)),t(a({defaultMessage:"Something went wrong. Please try again.",id:"W/5hwrn09m"}))}},[e,r,c,o,u,h,t,a,i,s]),g=f.useCallback(async(y,v)=>{const x={callbackUrl:r};switch(y){case"basic":x.pro=!1;break;case"pro":x.pro=!0;break;case"enterpriseMember":x.enterprise_member=!0;break;case"enterpriseAdmin":x.enterprise_admin=!0;break;case"enterpriseBillingAdmin":x.enterprise_billing_admin=!0;break;case"script":x.script=!0;break;case"frontendTest":x.fe_test=!0;break;case"example.com":x.email_handle=v??"pplx-dev";break}return await iy("devlogin",x)},[r]);return f.useMemo(()=>({emailIsValid:d,handleThirdPartySignIn:m,handleMagicLinkEmailSignIn:p,handleSSOSignIn:h,handleDevSignIn:g}),[d,g,p,h,m])},Ov=({autoFocus:e=!1,onClose:t=Rn,redirectUrl:n,showInternal:r,disallowedMethods:s,className:a,preEnteredEmail:o,placeholder:i,showCloseButton:c=!0,loginButtonsStyle:u="allInverted"})=>{const d="login-modal-inner",[m,h]=A.useState(o??""),[p,g]=A.useState(),[y,v]=A.useState(!1),{emailIsValid:x,handleThirdPartySignIn:b,handleMagicLinkEmailSignIn:_,handleSSOSignIn:w,handleDevSignIn:S}=IKe({email:m,onClose:t,redirectUrl:n??"/",onError:g,reason:d}),{envHasDevLogins:C}=pc(),{isMobileStyle:E}=Ce(),{$t:M}=X(),[T,I]=A.useState(!1),{closeModal:j}=_t(),N=f.useCallback(async()=>{if(!x){g(M({defaultMessage:"Please enter a valid email address",id:"oLpv295HWX"}));return}if(!y){if(v(!0),m.endsWith("@example.com")&&C&&!T){t(),await S("example.com",m.split("@")[0]),v(!1);return}T?await w():(await _(),await j()),v(!1)}},[x,y,m,C,T,M,t,S,w,_,j]),P=f.useCallback(k=>{oo.isEnterKeyWithoutShift(k)&&N()},[N]),R=[{icon:Xne,text:"Basic",onClick:()=>S("basic")},{icon:e8,text:"Pro",onClick:()=>S("pro")},{icon:cc,text:"Enterprise Member",onMouseDown:k=>k.preventDefault(),onClick:()=>S("enterpriseMember")},{icon:D6,text:"Enterprise Admin",onMouseDown:k=>k.preventDefault(),onClick:()=>S("enterpriseAdmin")},{icon:D6,text:"Enterprise Billing Admin",onMouseDown:k=>k.preventDefault(),onClick:()=>S("enterpriseBillingAdmin")},{icon:V_,text:"Script Default User",onClick:()=>S("script")},{icon:V_,text:"FE Test User",onClick:()=>S("frontendTest")}];return l.jsx(Qqe,{autoFocus:e,onClose:t,redirectUrl:n,showInternal:r,disallowedMethods:s,className:a,email:m,setEmail:h,handleEmailClick:N,handleKeyDown:P,error:p,setError:g,emailInFlight:y,setEmailInFlight:v,emailIsValid:x,handleThirdPartySignIn:b,isSSO:T,setIsSSO:I,handleDevSignIn:S,internalItems:R,envHasDevLogins:C,isMobileStyle:E,placeholder:i,showCloseButton:c,loginButtonsStyle:u})},_9=A.memo(({title:e,subtitle:t,subtitleClassname:n,centerTitle:r,children:s,actionList:a=ce,variant:o="centered-sheet",onClose:i,noPadding:c,onIsClosing:u,footerContent:d,icon:m,overlayVariant:h,titleLeadingButtonProps:p,showCloseButton:g=!0,...y})=>{const[v,x]=f.useState(!1),[b,_]=f.useState(!1),w=f.useMemo(()=>B("shadow-md overflow-y-auto scrollbar-subtle fill-mode-both",{"bg-none dark:bg-none bg-backdrop/25 backdrop-blur-sm":o==="full-sheet-blurred","bg-gradient-to-t from-base from-45% to-transparent":o==="bottom-sheet-gradient","w-screen md:h-screen h-[100dvh] flex flex-col":o==="full-sheet-blurred"||o==="full-sheet","w-screen min-h-[60dvh] md:min-h-[60vh] max-h-[96dvh] md:max-h-[96vh] flex flex-col fixed bottom-0 left-0 right-0 bg-none dark:bg-none bg-backdrop/70 backdrop-blur-md":o==="bottom-sheet-blurred","flex items-center justify-end w-screen h-[100dvh] md:max-h-[96vh] flex flex-col fixed bottom-0 left-0 right-0":o==="bottom-sheet-gradient","animate-in slide-in-from-bottom ease-in":o==="bottom-sheet-blurred"&&!b,"animate-out slide-out-to-bottom ease-out":o==="bottom-sheet-blurred"&&b,"animate-in fade-in ease-in duration-300":o==="bottom-sheet-gradient"&&!b,"animate-out fade-out ease-out duration-300":o==="bottom-sheet-gradient"&&b,"bg-base":o==="full-sheet","bg-base rounded-lg md:min-w-[600px] max-w-screen-lg max-h-[100vh]":o==="centered-sheet","bg-base rounded-2xl max-w-[90dvw] max-h-[90dvh]":o==="inset-centered-sheet"}),[o,b]),S=f.useMemo(()=>B("py-md px-md grow flex flex-col",{"justify-center":o!=="bottom-sheet-gradient","justify-end":o==="bottom-sheet-gradient","md:pt-lg":e===void 0,"md:pb-lg":a?.length===0,"px-0":c,"py-0":c}),[a?.length,c,e,o]),C=f.useMemo(()=>a.map(({text:N,onClick:P,variant:R,disabled:k,isLoading:O,testId:L,icon:F},U)=>{const V={key:U,text:N,chevron:F!==void 0,disabled:k,isLoading:O,onClick:P,testId:L,chevronIcon:F};return R?f.createElement(ye,{fullWidthMobile:!0,variant:R,...V,key:V.key}):f.createElement(ye,{fullWidthMobile:!0,...V,key:V.key})}),[a]),E=f.useCallback(()=>{u?.(),_(!0)},[_,u]),M=f.useCallback(()=>{_(!1),x(!1),i?.()},[_,x,i]),T=f.useCallback(()=>{_(!1),x(!1),i?.()},[x,_,i]),I=f.useMemo(()=>{switch(o){case"full-sheet-blurred":return"full-sheet";case"full-sheet":return"full-sheet";case"bottom-sheet-blurred":case"bottom-sheet-gradient":return"bottom-sheet";default:return"default"}},[o]),j=f.useMemo(()=>o==="bottom-sheet-blurred"||o==="bottom-sheet-gradient",[o]);return l.jsx(pp,{transparent:j,canOutsideClickClose:!0,childVariant:I,shouldClose:v,onIsClosing:E,onClose:M,variant:h,...y,children:l.jsx("div",{children:l.jsxs("div",{className:w,children:[l.jsx("div",{className:"right-sm top-sm fixed z-[23] md:absolute"}),l.jsxs(z,{className:B("flex h-full w-[100vw] grow flex-col rounded-none md:w-[unset] md:grow-[unset]",{"border-t":o!=="bottom-sheet-gradient","w-[90dvw]":o==="inset-centered-sheet"}),children:[l.jsxs(z,{variant:"transparent",className:B("px-md py-sm md:py-md sticky top-0 z-[22] w-full shrink-0",{"border-b":e&&!r,"text-center":r,"h-8":!e&&g}),children:[l.jsxs("div",{className:"gap-sm md:gap-md flex items-center",children:[p&&l.jsx(ke,{extraCSS:"-ml-sm",...p,size:"small",variant:"common"}),m&&l.jsx(xt,{icon:m,size:"xl",className:"text-foreground -translate-y-two"}),e&&l.jsx(D,{variant:"page-title",className:B("line-clamp-1 md:line-clamp-2",{"pt-lg grow":r,"mr-lg":!r}),children:e}),!j&&o!=="full-sheet-blurred"&&g&&l.jsx(nC,{onClick:T,testId:"close-modal"})]}),t&&l.jsx(D,{variant:"base",color:"light",className:B("mt-xs line-clamp-3",n),children:t})]}),l.jsx("div",{className:S,children:s}),(C?.length>0||d)&&l.jsxs(z,{variant:"background",className:B("gap-x-sm p-sm pb-md md:pb-sm sticky bottom-0 z-[10] flex items-center border-t",{"justify-end":!d},{"justify-between":d}),children:[d,C]})]})]})})})});_9.displayName="SheetModal";const MP=e=>{const t=Number(e);return isNaN(t)?(console.log(`formatNumber number failed on: ${e}`),"0"):t.toLocaleString("en-US")},Sa=()=>ar(),yBt={status:"PENDING",uuid:Sa()},vBt=(e,t,n)=>{if(e===t)return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),s=Object.keys(t);return r.length==s.length&&r.every(a=>n?n(e[a],t[a]):e[a]===t[a])},I2=(e,t)=>{const n=new URL(e);return n.searchParams.delete("source"),n.searchParams.delete("s"),t&&(n.hash=t),n.searchParams.sort(),n.href};function cfe(e){return e.charAt(0).toUpperCase()+e.slice(1)}function jKe(e,t){try{const n=new Date(e.replace(/-/g,"/")).toLocaleString(t,{weekday:"long",hour:"numeric",minute:"numeric",hour12:!0});return cfe(n)}catch(n){console.log(n)}return null}function w9(e,t,n="short"){const s=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].indexOf(e.toLowerCase());if(s===-1)return"";const a=new Date,o=new Date(a.setDate(a.getDate()-a.getDay()+s)),i=Intl.DateTimeFormat(t,{weekday:n}).format(o);return cfe(i)}function OKe(e){return e.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:12})}function MC(e,t,n){const r=new URL(e),s=r.searchParams;return s.set(t,n),r.search=s.toString(),r.toString()}const xBt=e=>{let t;if(typeof e=="string"){if(t=parseFloat(e),isNaN(t))throw new Error("Invalid input: not a number")}else if(typeof e=="number")t=e;else throw new Error("Invalid input: not a string or number");return t.toLocaleString("en-US")},LKe=/\[(\d{1,3})(,\s*\{ts:\d+\})?\]/g,DKe=/(\n*^(("""+|'''+|```+)[A-Za-z0-9]*|#+ .*)$|^- |\*\*|\$\$|\||`|[-|]{3,})/gm;function FKe(e){return e.replace(LKe,"")}function UKe(e){return e.replace(DKe,"")}function wh(e,t){const n=FKe(UKe(e)).trim();if(n.length<=t)return n;{const r=n.slice(0,t).trim(),s=r.lastIndexOf(" ");return s*2>t&&s<t-1?r.slice(0,s)+"...":r+"..."}}const BKe=A.memo(({pitchMessage:e,origin:t,isOpen:n,closeModal:r,closeCallback:s,experimentalImageDesign:a,sheetModalDesign:o,overrideRedirectUrl:i,disallowedMethods:c,loginButtonsStyle:u})=>{const{$t:d}=X(),m=Je(),[h,p]=f.useState(""),{trackEvent:g}=Te(),{isMobileStyle:y}=Ce(),v=e?.title??d({defaultMessage:"Welcome",id:"PwaN2oE2pC"}),[x]=f.useState(!1),b=f.useCallback(()=>{r(),s?.()},[r,s]);return f.useEffect(()=>{n&&g("login modal opened",{origin:t})},[n,t,g]),f.useEffect(()=>{!m&&t&&p(MC(i??window.location.href,mc,t))},[m,t,i]),l.jsx(l.Fragment,{children:a?l.jsx(rn,{isOpen:n,onClose:b,centerTitle:!!e,actionList:ce,variant:"hide-chrome",children:l.jsx(Wqe,{title:v,handleClose:b,experimentalImageDesign:a,children:l.jsx(Ov,{autoFocus:!0,onClose:b,redirectUrl:h,disallowedMethods:c,loginButtonsStyle:u,showCloseButton:!1})})}):l.jsx(_9,{isOpen:n,onClose:b,shouldClose:x,centerTitle:!!e,actionList:ce,variant:o,children:l.jsxs("div",{onClick:_=>_.stopPropagation(),children:[l.jsxs("div",{className:"px-lg mx-auto max-w-sm md:max-w-lg",children:[l.jsx(D,{variant:"page-title",className:"font-editorial text-pretty text-center !font-light !leading-snug tracking-tight md:text-4xl",children:e?.title??l.jsx(he,{defaultMessage:"Sign up below to <italic>unlock</italic> the full {br} potential of Perplexity",id:"exZDTeIaG0",values:{italic:_=>l.jsx("span",{className:"italic",children:_}),br:l.jsx("br",{})}})}),l.jsx(D,{className:"mt-md text-pretty text-center",children:e?.description?e.description:l.jsx(he,{defaultMessage:"By continuing, you agree to our {privacyPolicyLink}.",id:"cE5rUKm7fb",values:{privacyPolicyLink:l.jsx(at,{className:"underline",target:"_blank",href:"https://www.perplexity.ai/hub/legal/privacy-policy",children:l.jsx(he,{defaultMessage:"privacy policy",id:"LIDXd2UwSl"})})}})}),l.jsx("div",{className:"mt-lg"})]}),l.jsx(Ov,{autoFocus:!y,onClose:b,redirectUrl:h,showInternal:!0,disallowedMethods:c,loginButtonsStyle:u})]})})})});function VKe({onClose:e,announcementImageModal:t}){const{imageUrl:n,title:r,description:s,primaryAction:a,secondaryAction:o}=t;return l.jsx(rn,{isOpen:!0,onClose:e,variant:"hide-chrome",actionList:ce,children:l.jsxs(z,{variant:"background",className:"p-sm mx-auto flex max-w-lg flex-col overflow-hidden rounded-xl",children:[l.jsx("img",{src:n,alt:r,className:"aspect-[16/9] overflow-hidden rounded-lg object-cover"}),l.jsxs("div",{className:"p-md gap-sm flex flex-col items-center text-center",children:[l.jsx(D,{variant:"entry-title-200",children:r}),l.jsx(D,{variant:"small",color:"light",className:"px-1",children:s}),l.jsxs("div",{className:"gap-md mt-sm flex w-1/2 flex-col",children:[a,o]})]})]})})}function ufe(e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var kT={},qG;function $Ke(){return qG||(qG=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="fas",n="microchip-ai",r=512,s=512,a=[],o="e1ec",i="M176 24c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40c-35.3 0-64 28.7-64 64l-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0 0 56-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0 0 56-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0c0 35.3 28.7 64 64 64l0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40 56 0 0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40 56 0 0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40c35.3 0 64-28.7 64-64l40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0 0-56 40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0 0-56 40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0c0-35.3-28.7-64-64-64l0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40-56 0 0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40-56 0 0-40zm32 152c6.4 0 12.1 3.8 14.7 9.6l42 96 14 32c3.5 8.1-.1 17.5-8.2 21.1s-17.5-.2-21.1-8.2L239.5 304l-63.1 0-9.8 22.4c-3.5 8.1-13 11.8-21.1 8.2s-11.8-13-8.2-21.1l14-32 42-96c2.5-5.8 8.3-9.6 14.7-9.6zm17.5 96L208 231.9 190.5 272l35.1 0zM336 176c8.8 0 16 7.2 16 16l0 128c0 8.8-7.2 16-16 16s-16-7.2-16-16l0-128c0-8.8 7.2-16 16-16z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faMicrochipAi=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(kT)),kT}var WKe=$Ke();const HKe=({children:e,className:t,delimiter:n="",...r})=>{const s=A.Children.toArray(e),a=s.map((o,i)=>{if(A.isValidElement(o)&&o.type===dfe){const c=o.props.id;return l.jsxs(A.Fragment,{children:[o,i!==s.length-1&&l.jsxs(D,{className:"inline-flex !text-inherit",children:[" ",n," "]})]},c)}return null});return l.jsx("div",{className:`gap-sm flex items-center ${t}`,...r,children:a})},dfe=({children:e})=>l.jsx(l.Fragment,{children:e}),bc=HKe,fr=dfe,zKe=e=>e.trim().replace(/\/+$/,"").replace(/^(?:https?:\/\/)?(?:www\.)?/,""),bBt=e=>!!new RegExp("^((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,})(\\/[\\w\\-._~:/@!$&'()*+,;=%.]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e);function Hi(e){const t=/(?:https?:\/\/)?(?:www\.)?([a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*(?:\.[a-zA-Z]{2,})?|localhost|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(?::\d+)?/,n=e.match(t);return n&&n.length>0?n[1]||n[0]:"unknown"}function ffe(e){const t=Hi(e);return t==="unknown"?"unknown":t.replace(/\.[^.]*$/,"")}function S9(e){return e.includes("calendar.google.com")||e.includes("google.com/calendar")?"https://calendar.google.com":e.includes("mail.google.com")||e.includes("google.com/mail")?"https://mail.google.com":qKe(e)?"www.perplexity.ai":Hi(e)}function _Bt(e){return e.startsWith("http://")||e.startsWith("https://")?e:`https://${e}`}function Cp(e){const t=["(?:youtube?\\.com\\/","(?:[^/\\n\\s]+\\/\\S+\\/","|(?:v|e(?:mbed)?)\\/","|\\S*?[?&]v=",")","|youtu\\.be\\/",")([a-zA-Z0-9_-]{11})"].join(""),n=new RegExp(t),r=e.match(n);if(r&&r[1].length==11)return r[1]}const wBt=e=>e.indexOf("unsplash.com")>-1;function Dm(e){return e.startsWith("https://pplx-res.cloudinary.com/")||e.startsWith("https://api.cloudinary.com/v1_1/pplx/image/download")}function SBt(e){return e.includes("code-interpreter-files.s3.amazonaws.com")||e.includes("pplx_code_interpreter")}function CBt(e){return e.includes("user-gen-media-assets")}function TP(e){return e.replace(/\/s--[^/]+--\/v\d+\//,"/")}function C9(e){return(!e.is_attachment||e.meta_data?.connection_type)&&!!e.url&&!Cp(e.url)&&!Dm(e.url)&&!e.is_memory&&!e.is_conversation_history}const mfe=e=>{try{const r=new URL(e).pathname.replace(/^\//,"").split("/"),s=r[r.length-1];return decodeURIComponent(s)}catch{return"File"}},GKe=e=>{const t=e,n=t.indexOf("/"),r=Math.max(23,n+16);return t.length>r?t.substring(0,r-1)+"":t},EBt=e=>`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(e)}`;function hfe(e,t){let n=e;const r=e.match(/{([^}]+)}/g)||[];for(const s of r){const a=s.slice(1,-1);t[a]!==void 0?n=n.replace(s,t[a]):n=n.replace(s,"")}try{return new URL(n).toString()}catch{return n}}function MBt(e){return e.includes("https://openai.com/index/image-generation-api/")}function qKe(e){return e.startsWith("chrome://")||e.startsWith("chrome-extension://")||e.startsWith("browser-extension://")||e.startsWith("browser://")||e.startsWith("comet://")}const TBt=e=>e.replace("comet://","chrome://"),KKe=e=>{if(!e)return null;try{return new URL(e)}catch{return null}},kBt=async e=>{const t=[];return await Promise.all(e.map(async n=>{try{(await fetch(n,{method:"HEAD"})).ok&&t.push(n)}catch(r){console.debug(`URL ${n} is not reachable:`,r)}})),t},E9=e=>{try{const t=new URL(e);return["AWSAccessKeyId","Signature","Expires"].every(n=>t.searchParams.has(n))}catch{return!1}},kP=e=>{if(!e)return"";const t=e.indexOf("?");return(t===-1?e:e.substring(0,t)).replace(/\/+$/,"")},YKe=["ppl-ai-file-upload","ppl-ai-sandbox-file-upload","ppl-ai-experimental-file-upload"],pfe=e=>YKe.some(t=>e.url.includes(`${t}.s3.amazonaws.com/web/direct-files`));var NP;(function(e){e.token_limit_exceeded="token_limit_exceeded",e.parsing_error="parsing_error",e.unknown_error="unknown_error",e.unauthorized="unauthorized",e.no_data_received="no_data_received",e.file_type_not_supported="file_type_not_supported",e.image_failed_moderation="image_failed_moderation"})(NP||(NP={}));var Ly;(function(e){e.generic_upload_error="generic_upload_error",e.unsupported_type="unsupported_type",e.too_large="too_large",e.too_small="too_small",e.no_name="no_name",e.failed_moderation="failed_moderation",e.rate_limited="rate_limited",e.over_file_count="over_file_count",e.over_image_count="over_image_count"})(Ly||(Ly={}));const m_=e=>{const n=e.split("?")[0].split("#")[0].split(".").pop()?.toLowerCase();return n&&{png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",jpe:"image/jpeg",jp2:"image/jp2",gif:"image/gif",bmp:"image/bmp",tiff:"image/tiff",tif:"image/tiff",svg:"image/svg+xml",webp:"image/webp",ico:"image/x-icon",avif:"image/avif",heic:"image/heic",heif:"image/heif",pdf:"application/pdf",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",txt:"text/plain",csv:"text/csv",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",md:"text/markdown"}[n]||"application/octet-stream"},QKe=e=>{const t=e.meta_data?.repo_type;return e.is_attachment&&!t&&!e.meta_data?.file_uuid},XKe=e=>{if(!e)return!1;try{return new URL(e).hostname.includes("s3.amazonaws.com")}catch{return!1}},To=vt({token_limit_exceeded:{id:"cnFlyTXVDl",defaultMessage:"File {filename} exceeds the model's token limit."},parsing_error:{id:"RdRRX8+YG/",defaultMessage:"Failed to parse file {filename}."},file_type_not_supported:{id:"IaflMSTTq6",defaultMessage:"File type not supported for {filename}."},unknown_error:{id:"zhy7qBi3Eu",defaultMessage:"Unknown error for file {filename}."},unauthorized:{id:"6bOe+cTUhc",defaultMessage:"User not authorised to access file {filename}."},no_data_received:{id:"34PXW7VvKh",defaultMessage:"No data received for file {filename}."},generic_upload_error:{id:"xVFvYDY5wK",defaultMessage:"File upload failed"},unsupported_type:{id:"VUOyYEDS96",defaultMessage:"The file type you uploaded is not supported."},too_large:{id:"XBcIjOYq8V",defaultMessage:"File too large: {max} maximum."},too_small:{id:"ZUyiNCx0Aw",defaultMessage:"File too small."},no_name:{id:"IkAmckATMw",defaultMessage:"File name is required."},image_failed_moderation:{id:"YCCLnMQDPb",defaultMessage:"File {filename} failed moderation."},failed_moderation:{id:"hnN6c9ExET",defaultMessage:"File upload failed moderation."},rate_limited:{id:"el7NlqcDQZ",defaultMessage:"You have reached the daily upload limit for your plan."},over_file_count:{id:"2+5sg16GUy",defaultMessage:"You are allowed up to {maxNumFiles, plural, one {# file} other {# files}} at once."},over_image_count:{id:"FIudmpgA1s",defaultMessage:"You are allowed up to {maxNumImages, plural, one {# image} other {# images}} at once."}}),ZKe=e=>{if(e.startsWith("/rest/connectors/wiley/"))return"WILEY";if(e.includes("drive.google.com")||e.includes("connectors/google-drive")||e.includes("docs.google.com"))return"GOOGLE_DRIVE";if(e.includes("onedrive.live.com")||e.includes("1drv.ms")||e.includes("connectors/onedrive"))return"ONEDRIVE";if(e.includes(".sharepoint.com")||e.includes("connectors/sharepoint"))return"SHAREPOINT";if(e.includes("dropbox.com/preview")||e.includes("connectors/dropbox"))return"DROPBOX";if(e.includes("app.box.com/file")||e.includes("connectors/box"))return"BOX"},gfe=e=>!!(e?.meta_data?.connection_type&&e?.meta_data.connection_type!=="LOCAL")||e.is_attachment&&!!ZKe(e.url),TC=e=>e.is_attachment&&(pfe(e)||Dm(e.url)),JKe=1080;function co(e){return typeof e=="string"?m_(e).startsWith("image/"):e.type.startsWith("image/")}const yfe=(e,t=32)=>`https://www.google.com/s2/favicons?sz=${t}&domain=${e}`,eYe=(e,t,n)=>{const r=Math.min(e,t);if(r<=n)return{width:e,height:t};const s=n/r;return{width:Math.round(e*s),height:Math.round(t*s)}},tYe=(e,t=JKe,n=.98)=>new Promise((r,s)=>{if(!co(e)){s(new Error("File is not an image."));return}const a=document.createElement("canvas"),o=a.getContext("2d",{alpha:!0,colorSpace:"srgb"}),i=new Image,c=URL.createObjectURL(e);if(!o){s(new Error("Could not get canvas context"));return}o.imageSmoothingEnabled=!0,o.imageSmoothingQuality="high",i.onload=()=>{const u=eYe(i.width,i.height,t);a.width=u.width,a.height=u.height;const d="image/jpeg",m=n;o.fillStyle="#fff",o.fillRect(0,0,a.width,a.height),o.drawImage(i,0,0,u.width,u.height),a.toBlob(h=>{if(!h){s(new Error("Failed to create blob from canvas"));return}const g=e.name.replace(/\.[^/.]+$/,"")+".jpg",y=new File([h],g,{type:d});URL.revokeObjectURL(c),r(y)},d,m)},i.onerror=()=>{URL.revokeObjectURL(c),s(new Error("Failed to load image."))},i.src=c}),nYe={"my.apps.factset.com":"www.factset.com"},Xd=A.memo(({domain:e,overrideIconUrl:t,size:n=16,hideBorder:r=!1,className:s,...a})=>{const o=nYe[e]||e,i=yfe(o,128),c=f.useMemo(()=>t||i,[t,i]),[u,d]=f.useState(!0);f.useEffect(()=>{d(!0)},[c]);const m=f.useMemo(()=>({width:n,height:n}),[n]),h=f.useMemo(()=>({width:n*.7,height:n*.7}),[n]);return l.jsxs("div",{style:{width:n,height:n},className:B("relative overflow-hidden rounded-full",s),...a,children:[u?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:B("rounded-inherit absolute inset-0",!r&&"bg-white")}),l.jsx("img",{className:"relative block",src:c,alt:`${e} favicon`,width:n,height:n,onLoad:p=>{const g=p.target,y=t!==void 0||g.naturalWidth!==16||g.naturalHeight!==16;d(y||e!==o)},onError:()=>{d(!1)},style:{width:n,height:n}})]}):l.jsx(z,{variant:"offset",style:m,className:"flex items-center justify-center",children:l.jsx(D,{color:"ultraLight",children:l.jsx(be,{icon:A0,className:"relative block",style:h})})}),!r&&l.jsx("div",{className:"rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"})]})});function rYe(e,t,n=2){if(e==null)return"";const r=e.includes(".")?e.slice(e.lastIndexOf(".")):"",s=e.substring(0,e.length-r.length);return s.length>t?s.substring(0,t-r.length-3)+".".repeat(n)+r:s+r}const kC=e=>{try{return(new URL(e).pathname.split("/").pop()||"").split(".").pop()?.toLowerCase()}catch{return e.split(".").pop()?.toLowerCase()}},vfe=e=>e.file.type.includes("image"),sYe=e=>e.file.type==="application/pdf",aYe=e=>e.file.type==="text/csv"||e.file.type=="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",oYe=e=>e.file.type==="text/plain"||e.file.type==="application/vnd.openxmlformats-officedocument.wordprocessingml.document"||e.file.type==="text/markdown",AP={txt:"text/plain",pdf:"application/pdf",jpeg:"image/jpeg",jpg:"image/jpeg",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",md:"text/markdown",png:"image/png",csv:"text/csv"},iYe=e=>{if(e<0)throw new Error("Number of bytes cannot be negative");const t=["B","KB","MB","GB"];let n=0,r=e;for(;r>=1e3&&n<t.length-1;)r/=1e3,n++;return`${r%1===0?r.toString():r.toFixed(1)} ${t[n]}`},Ao={PDF:"pdf",TXT:"txt",CSV:"csv",XLSX:"xlsx",DOCX:"docx",PPTX:"pptx",MARKDOWN:"md",JSON:"json",JPG:"jpg",JPEG:"jpeg",PNG:"png"},lYe=e=>{switch(kC(e)){case Ao.TXT:return Ra;case Ao.MARKDOWN:return Ra;case Ao.PDF:return Jne;case Ao.XLSX:return Zne;case Ao.CSV:return _4e;case Ao.DOCX:return b4e;case Ao.PPTX:return x4e;case Ao.JPG:case Ao.JPEG:case Ao.PNG:return P0;default:return hf}},cYe={[Pn.GOOGLE_DRIVE]:T4e,[Pn.ONEDRIVE]:M4e,[Pn.SHAREPOINT]:tre,[Pn.DROPBOX]:E4e,[Pn.BOX]:C4e,[Pn.GENERATED_IMAGE]:P0,[Pn.GENERATED_VIDEO]:ere,[Pn.NOTION]:S4e,[Pn.WILEY]:w4e,[Pn.LOCAL]:hf},xfe=A.memo(({url:e,isConversationHistory:t,isMemory:n,isInlineAttachment:r,connectionType:s,isAttachment:a,isClientContext:o})=>{const i=f.useMemo(()=>{const c=S9(e),u=a?lYe(e):null;if(t)return l.jsx(be,{icon:pf,size:"xs"});if(n)return l.jsx(be,{icon:Gl,size:"xs"});if(r)return l.jsx(be,{icon:t8,size:"xs"});if(s){const d=cYe[s];return d?l.jsx(be,{icon:d}):l.jsx(Xd,{domain:c})}else return a?l.jsx(be,{icon:u||hf,size:"xs"}):o?l.jsx(be,{icon:k4e,size:"xs"}):l.jsx(Xd,{domain:c})},[e,t,n,r,s,a,o]);return l.jsx("div",{className:"flex size-4 items-center justify-center",children:i})}),bfe=A.memo(({url:e,source:t,isAttachment:n,connectionType:r,isConversationHistory:s})=>{const a=X(),o=f.useMemo(()=>{if(s)return a.formatMessage({defaultMessage:"library",id:"B7J+pmy9R5"});if(t!=null)return t;let i;return n?i=mfe(e):r?i=v9(r):i=Hi(e),i.replace(/\.[^.]*$/,"")},[e,t,n,r,s,a]);return l.jsx(l.Fragment,{children:o})}),uYe=A.memo(({url:e,source:t,isAttachment:n,isClientContext:r,variant:s="small",color:a="default",truncate:o=!0,className:i,connectionType:c,isInlineAttachment:u,isMemory:d,isConversationHistory:m,name:h,snippet:p,...g})=>l.jsxs(z,{className:"flex items-center gap-x-1.5",children:[l.jsx(D,{variant:s,className:"relative -mt-px flex-none",color:d||m?"light":a,children:l.jsx(xfe,{url:e,isConversationHistory:m,isMemory:d,isInlineAttachment:u,connectionType:c,isAttachment:n,isClientContext:r})}),h&&l.jsx(D,{variant:s,color:a,...g,className:B(i,"min-w-0 truncate"),children:h}),l.jsx(D,{variant:s,color:h?"light":a,className:B("line-clamp-1 min-w-0 grow break-all transition-all duration-300",{"max-w-[150px]":t!=null&&o},i),...g,children:l.jsx(bfe,{url:e,source:t,isAttachment:n,connectionType:c,isMemory:d,isConversationHistory:m})})]})),xu=Object.assign(uYe,{Icon:xfe,Source:bfe}),X0=A.memo(({isOpen:e,onClose:t,imgProps:n,alt:r,width:s,height:a,origin:o,onDownload:i})=>{const{url:c,name:u,showCitation:d=!0}=o||{},m=Is(),h=f.useCallback(p=>{p.stopPropagation(),i?.()},[i]);return l.jsxs(rn,{onClose:t,isOpen:e,variant:"hide-chrome",disableAnimation:!1,removeScroll:!m,modalClassname:"z-[100]",children:[l.jsx("div",{className:"flex h-screen w-screen place-content-center",onClick:t,children:l.jsxs("div",{className:B("gap-md p-md md:p-lg flex w-full flex-col",{"md:pb-md":d&&(c||i)}),children:[l.jsx("div",{className:"relative grow",children:l.jsx("img",{width:s,height:a,...n,alt:r,className:"absolute inset-0 size-full object-contain"})}),d&&(c||i)?l.jsxs("div",{className:"gap-sm flex w-full flex-row justify-center",children:[c&&l.jsx(at,{href:c,target:"_blank",children:l.jsxs(z,{variant:"offsetPlus",className:"gap-x-xs bg-offset/50 p-sm dark:bg-offset/80 flex items-center rounded-full",children:[l.jsx(xu,{url:c,source:u,isAttachment:!1}),l.jsx(D,{variant:"small",className:"pr-xs",children:l.jsx(be,{icon:ql,size:"xs"})})]})}),i&&l.jsx(z,{as:"button",onClick:h,variant:"offsetPlus",className:"gap-x-xs bg-offset/50 p-sm dark:bg-offset/80 flex !aspect-square w-9 items-center justify-center rounded-full",children:l.jsx(be,{icon:gf,size:"sm"})})]}):null]})}),l.jsx(ye,{onClick:t,icon:Xt,extraCSS:"!fixed top-md right-md shadow-sm",size:"small",pill:!0,ariaLabel:"Close"})]})});X0.displayName="LightboxImage";const es=A.memo(({src:e,lightboxSrc:t,alt:n,fadeIn:r,fallbackSrc:s,fallback:a,hasShadow:o=!1,includeLightBoxModal:i=!0,origin:c,draggable:u=!0,imageClassName:d,maskClassName:m,containerClassName:h,rounded:p="md",onClick:g,AIProps:y,authorName:v,authorUrl:x,onLoad:b,onFail:_,softBlockSaveImage:w=!1,imageRef:S,imageProps:C,testId:E,onDownload:M,...T})=>{const[I,j]=f.useState(!1),[N,P]=f.useState(!1),[R,k]=f.useState(!1),O=f.useRef(null),{isAI:L,AILabel:F}=y||{isAI:!1,AILabel:""},U=f.useCallback(()=>{j(!0),_?.()},[]),V=f.useCallback(()=>{P(!0),b?.()},[P,b]);f.useEffect(()=>{if(O.current){if(O.current.complete){V();return}O.current.src||(O.current.src=e)}},[e,V,O]);const W=B(d,"transition-all ease-in-out",{"opacity-100 duration-200 scale-100":N&&r,"opacity-0 scale-[0.98]":!N&&r,"hidden opacity-0":I&&!s,"max-h-[90vh]":i,"cursor-zoom-in hover:shadow-lg duration-200 ":i&&!R}),H=f.useMemo(()=>({className:W,src:e,alt:n,onError:U,onClick:()=>k(!0),...C}),[n,W,C,U,e]),G=f.useMemo(()=>({ref:O,onLoad:V,...H}),[V,H]),K=f.useMemo(()=>({...H,src:t??e}),[t,H,e]),$=f.useCallback(se=>{se.stopPropagation()},[]),q=l.jsxs(l.Fragment,{children:[l.jsx(D,{variant:"tiny",color:"white",className:"px-xs py-two h-5 rounded-md bg-black/60 opacity-0 transition-all group-hover:opacity-100",children:l.jsxs(bc,{className:"gap-xs",children:[l.jsx(fr,{id:"authorName",children:v}),x?l.jsx(fr,{id:"authorDomain",children:Hi(x)}):null]})}),l.jsx("div",{className:"size-xs bg-black/60 opacity-0 transition-all group-hover:opacity-100"})]}),Z=f.useCallback(()=>k(!1),[]);if(I){if(s&&O.current)O.current.src=s;else if(a!==void 0)return a}return l.jsxs(l.Fragment,{children:[l.jsx("div",{onClick:g,className:h,"data-testid":E,children:l.jsxs("div",{className:B("bg-offset group relative h-full w-full overflow-hidden",m,{"shadow-md":o&&N,"transition-all duration-200 ease-in-out hover:scale-[1.02] hover:shadow-lg":o,"rounded-sm":p==="sm","rounded-md":p==="md",rounded:p===!0}),children:[L&&l.jsxs("div",{className:"bottom-xs right-xs absolute z-10 flex items-center justify-center",children:[l.jsx("div",{children:l.jsx(D,{variant:"tiny",color:"white",className:"gap-x-two px-xs py-two flex h-5 items-center rounded-md bg-black/60 opacity-0 transition-all group-hover:opacity-100",children:l.jsx("span",{children:F})})}),l.jsx("div",{className:"size-xs bg-black/60 opacity-0 transition-all group-hover:opacity-100"}),l.jsx("div",{children:l.jsx(D,{variant:"tiny",color:"white",className:"gap-x-two p-two flex h-5 items-center rounded-md bg-black/60",children:l.jsx(xt,{fixedWidth:!0,icon:WKe.faMicrochipAi})})})]}),v&&(x?l.jsx(at,{href:x??"",target:"_blank",onClick:$,className:"bottom-xs right-xs absolute z-10 flex items-center justify-center",children:q}):l.jsx("div",{onClick:$,className:"bottom-xs right-xs absolute z-10 flex items-center justify-center",children:q})),w&&!L&&l.jsx("div",{className:"absolute inset-0",onClick:i?()=>k(!0):void 0}),l.jsx("img",{width:T.width,height:T.height,alt:n,...G,ref:ufe([S,O]),draggable:u})]})}),i&&l.jsx(X0,{onClose:Z,isOpen:R,imgProps:K,origin:c,width:T.width,height:T.height,alt:n,onDownload:M})]})});es.displayName="Image";const dYe=A.memo(({isOpen:e,onClose:t,onCapture:n})=>{const r=f.useRef(null),s=f.useRef(null),a=f.useRef(null),[o,i]=f.useState(!1),[c,u]=f.useState(null),[d,m]=f.useState(null),h=f.useCallback(async()=>{try{a.current&&a.current.getTracks().forEach(w=>w.stop());const _=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:"user"}});a.current=_,r.current&&(r.current.srcObject=_,i(!0),m(null))}catch{m("Unable to access camera. Please check your permissions."),i(!1)}},[]),p=f.useCallback(()=>{a.current&&(a.current.getTracks().forEach(_=>_.stop()),a.current=null,i(!1)),r.current&&(r.current.srcObject=null)},[]),g=f.useCallback(()=>{if(r.current&&s.current){const _=r.current,w=s.current,S=w.getContext("2d");if(S){w.width=_.videoWidth,w.height=_.videoHeight,S.drawImage(_,0,0,w.width,w.height);const C=w.toDataURL("image/jpeg",.95);u(C),p()}}},[p]),y=f.useCallback(()=>{u(null),h()},[h]),v=f.useCallback(()=>{m(null),h()},[h]),x=f.useCallback(()=>{p(),u(null),m(null),t()},[p,t]),b=f.useCallback(async()=>{if(c)try{const w=await(await fetch(c)).blob(),S=new File([w],"selfie.jpg",{type:"image/jpeg"});n(S),x()}catch{m("Failed to process the image. Please try again.")}},[c,n,x,m]);return f.useEffect(()=>(e&&!c&&!d&&h(),()=>{p()}),[e,c,d,h,p]),l.jsxs(rn,{isOpen:e,onClose:x,title:"Take a Selfie",children:[l.jsx("div",{className:"p-lg",children:d?l.jsxs("div",{className:"gap-md flex h-[400px] flex-col items-center justify-center",children:[l.jsx(D,{variant:"base",color:"red",children:d}),l.jsx(ye,{text:"Try again",variant:"primary",onClick:v})]}):c?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"bg-offset relative aspect-video overflow-hidden rounded-lg",children:l.jsx(es,{src:c,alt:"Captured selfie",className:"size-full object-contain"})}),l.jsxs("div",{className:"mt-lg gap-sm flex justify-center",children:[l.jsx(ye,{text:"Retake",variant:"border",onClick:y}),l.jsx(ye,{text:"Use this photo",variant:"primary",onClick:b})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-offset relative aspect-video overflow-hidden rounded-lg",children:[l.jsx("video",{ref:r,autoPlay:!0,playsInline:!0,muted:!0,className:"size-full object-contain"}),!o&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx(D,{variant:"small",color:"light",children:"Starting camera..."})})]}),l.jsxs("div",{className:"mt-md gap-xs flex flex-col items-center",children:[l.jsx(D,{variant:"small",color:"light",className:"text-center",children:"Position your face in the center of the frame"}),l.jsx(D,{variant:"tiny",color:"ultraLight",className:"text-center",children:"Make sure your face is well-lit and clearly visible"})]}),l.jsx("div",{className:"mt-lg flex justify-center",children:l.jsx(ye,{text:"Take photo",icon:nre,variant:"primary",onClick:g,disabled:!o})})]})}),l.jsx("canvas",{ref:s,className:"hidden"})]})});function KG(e,t){let n;return(...r)=>{window.clearTimeout(n),n=window.setTimeout(()=>e(...r),t)}}function tc({debounce:e,scroll:t,polyfill:n,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const s=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,o]=f.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),i=f.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),c=e?typeof e=="number"?e:e.scroll:null,u=e?typeof e=="number"?e:e.resize:null,d=f.useRef(!1);f.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[m,h,p]=f.useMemo(()=>{const x=()=>{if(!i.current.element)return;const{left:b,top:_,width:w,height:S,bottom:C,right:E,x:M,y:T}=i.current.element.getBoundingClientRect(),I={left:b,top:_,width:w,height:S,bottom:C,right:E,x:M,y:T};i.current.element instanceof HTMLElement&&r&&(I.height=i.current.element.offsetHeight,I.width=i.current.element.offsetWidth),Object.freeze(I),d.current&&!pYe(i.current.lastBounds,I)&&o(i.current.lastBounds=I)};return[x,u?KG(x,u):x,c?KG(x,c):x]},[o,r,c,u]);function g(){i.current.scrollContainers&&(i.current.scrollContainers.forEach(x=>x.removeEventListener("scroll",p,!0)),i.current.scrollContainers=null),i.current.resizeObserver&&(i.current.resizeObserver.disconnect(),i.current.resizeObserver=null),i.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",i.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",i.current.orientationHandler))}function y(){i.current.element&&(i.current.resizeObserver=new s(p),i.current.resizeObserver.observe(i.current.element),t&&i.current.scrollContainers&&i.current.scrollContainers.forEach(x=>x.addEventListener("scroll",p,{capture:!0,passive:!0})),i.current.orientationHandler=()=>{p()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",i.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",i.current.orientationHandler))}const v=x=>{!x||x===i.current.element||(g(),i.current.element=x,i.current.scrollContainers=_fe(x),y())};return mYe(p,!!t),fYe(h),f.useEffect(()=>{g(),y()},[t,p,h]),f.useEffect(()=>g,[]),[v,a,m]}function fYe(e){f.useEffect(()=>{const t=e;return window.addEventListener("resize",t),()=>void window.removeEventListener("resize",t)},[e])}function mYe(e,t){f.useEffect(()=>{if(t){const n=e;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[e,t])}function _fe(e){const t=[];if(!e||e===document.body)return t;const{overflow:n,overflowX:r,overflowY:s}=window.getComputedStyle(e);return[n,r,s].some(a=>a==="auto"||a==="scroll")&&t.push(e),[...t,..._fe(e.parentElement)]}const hYe=["x","y","top","bottom","left","right","width","height"],pYe=(e,t)=>hYe.every(n=>e[n]===t[n]),tr=A.memo(({children:e,header:t,fullBleed:n,roundedClass:r,shadow:s,fullBleedBorderClassname:a,...o})=>l.jsxs(l.Fragment,{children:[t,l.jsxs(z,{...o,variant:o.variant??"raised",className:B("relative",{border:!n&&!o.variant,[r||"rounded-xl"]:!o.variant,"shadow-[0_1px_2px_0_rgba(0,0,0,0.03)]":s},o.className),children:[n&&l.jsx("div",{className:B("rounded-inherit pointer-events-none absolute inset-0 z-[1] border border-[black]/5 dark:border-[white]/5",a)}),e]})]}));tr.displayName="CanonicalCard";const PP=async({request:e,reason:t})=>{const{error:n,data:r}=await ne.POST("/rest/deeper-research/download-asset",t,{body:e,timeoutMs:2e3,numRetries:1});if(n)throw new Me("API_CLIENTS_ERROR",{message:"Failed to download file",cause:n});return r.file_url},gYe=async({request:e,reason:t})=>{const{error:n,data:r}=await ne.POST("/rest/deeper-research/export-asset",t,{body:e,timeoutMs:6e4,numRetries:1,parseAs:"blob"});if(n)throw new Me("API_CLIENTS_ERROR",{message:"Failed to export asset",cause:n});return r},yYe=async({request:e,reason:t})=>{const{error:n,data:r}=await ne.POST("/rest/deeper-research/export-all-assets",t,{body:e,timeoutMs:6e4,numRetries:1,parseAs:"blob"});if(n)throw new Me("API_CLIENTS_ERROR",{message:"Failed to export all assets",cause:n});return r},wfe=({reason:e})=>{const{$t:t}=X(),{openToast:n}=On(),r=f.useCallback(async o=>{try{const i=await PP({request:o,reason:e});window.open(i,"_blank"),n(t({defaultMessage:"Downloading file...",id:"/vA9NyIeJh"}),"success",3)}catch(i){ee.error("Failed to download S3 asset",{error:i,request:o,errorMessage:i instanceof Error?i.message:"Unknown error"}),n(t({defaultMessage:"Failed to download file",id:"RIWlU8NdpC"}),"error",3)}},[e,t,n]),s=f.useCallback(async(o,i="media",c=document.body)=>{try{const u=await fetch(o,{mode:"cors",cache:"no-cache"});if(!u.ok)throw new Error(`HTTP error! status: ${u.status}`);const d=await u.blob(),m=URL.createObjectURL(d),h=document.createElement("a");h.href=m,h.download=i,c.appendChild(h),h.click(),c.removeChild(h),URL.revokeObjectURL(m);const p=i.toLowerCase().includes(".mp4")||i.toLowerCase().includes(".mov")||i.toLowerCase().includes(".avi")||d.type.startsWith("video/"),g=t(p?{defaultMessage:"Video downloaded",id:"WHvofOjBQO"}:{defaultMessage:"Image downloaded",id:"nS5vxnEXaW"});n(g,"success",3)}catch(u){const d=i.toLowerCase().includes(".mp4")||i.toLowerCase().includes(".mov")||i.toLowerCase().includes(".avi");ee.error("Failed to download media asset",{error:u,mediaUrl:o,errorMessage:u instanceof Error?u.message:"Unknown error",errorType:u instanceof TypeError&&u.message.includes("Failed to fetch")?"CORS":"Unknown"});const m=t(d?{defaultMessage:"Failed to download video",id:"g8uGrbPLMV"}:{defaultMessage:"Failed to download image",id:"YPAbL/7UuZ"});n(m,"error",3)}},[t,n]),a=f.useCallback(async(o,i="image.jpg",c=document.body)=>s(o,i,c),[s]);return f.useMemo(()=>({downloadS3Asset:r,downloadImageAsset:a,downloadMediaAsset:s}),[a,r,s])},Sfe=({assetType:e,entryUUID:t,answerMode:n,reason:r,skip:s})=>{const{trackEventOnce:a}=Te();f.useEffect(()=>{s||a("generated asset viewed",{assetType:e,entryUUID:t,answerMode:n,reason:r})},[a,e,t,n,r,s])},Cfe=A.memo(({videoUrl:e,hideTimeline:t=!0,aspectRatio:n=16/9,className:r,onLoadedData:s,isGenerated:a=!1,entryUUID:o,autoPlay:i=!1,muted:c=!0})=>{const u=f.useRef(null),[d,m]=f.useState(!1),[h,p]=f.useState(c),[g,y]=f.useState(0),[v,x]=f.useState(!1),[b,_]=f.useState(!1),[w,S]=f.useState(!0),{trackEvent:C}=Te();Sfe({assetType:$s.GENERATED_VIDEO,entryUUID:o??"",answerMode:"search",reason:"video-player",skip:!a}),f.useEffect(()=>{if(b&&u.current){const K=u.current,$=K.mozHasAudio||!!K.webkitAudioDecodedByteCount||!!(K.audioTracks&&K.audioTracks.length);S($)}},[b,u]);const E=f.useCallback(K=>{K.stopPropagation(),u.current&&(u.current.paused?u.current.play():u.current.pause(),m(!d))},[d]),M=f.useCallback(K=>{K.stopPropagation(),u.current&&(u.current.muted=!h,p(!h))},[h]),T=f.useCallback(K=>{if(K.stopPropagation(),u.current){const $=K.currentTarget.getBoundingClientRect(),se=(K.clientX-$.left)/$.width*u.current.duration;u.current.currentTime=se}},[]);f.useEffect(()=>{const K=setInterval(()=>{if(!u.current)return;const $=u.current.currentTime,q=u.current.duration;y($/q)},16);return()=>clearInterval(K)},[]);const{$t:I}=X(),[j,N]=f.useState(!1),P=f.useCallback(()=>N(!0),[]),R=f.useCallback(()=>N(!1),[]),{trackEventOnce:k}=Te(),{openToast:O}=On(),{isMobileStyle:L}=Ce(),{downloadMediaAsset:F}=wfe({reason:"GeneratedVideoCard"}),U=f.useCallback(()=>{e&&(k("generated video reported",{video_url:e}),O(I({defaultMessage:"Video reported",id:"Ir50ThCD/C"}),"success",3))},[I,e,O,k]),V=f.useCallback(async K=>{K.stopPropagation(),e&&(await F(e,"video.mp4",document.body),a&&C("generated asset downloaded",{assetType:$s.GENERATED_VIDEO,answerMode:"search",entryUUID:o??"",reason:"video-player"}))},[e,F,a,o,C]),W=f.useMemo(()=>[{type:"default",text:I({defaultMessage:"Report",id:"x5Tz6MZH82"}),icon:$_,onClick:U}],[I,U]),H=f.useCallback(K=>{K.stopPropagation(),u.current&&(u.current.requestFullscreen?u.current.requestFullscreen():u.current.webkitEnterFullscreen?u.current.webkitEnterFullscreen():u.current.mozRequestFullScreen?u.current.mozRequestFullScreen():u.current.msRequestFullscreen&&u.current.msRequestFullscreen())},[]),G=f.useMemo(()=>({aspectRatio:n}),[n]);return l.jsx(tr,{fullBleed:!0,className:B("group relative w-full overflow-hidden",r),style:G,children:l.jsxs("div",{className:"relative size-full overflow-hidden",onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),children:[l.jsx("video",{ref:u,loop:!0,autoPlay:i,playsInline:!0,muted:h,className:B("size-full object-cover",{"opacity-0":!b}),onPlay:()=>m(!0),onPause:()=>m(!1),onClick:E,onLoadedData:()=>{_(!0),s?.()},src:e+"#t=0.001"}),l.jsx("div",{className:B("absolute inset-0 flex flex-col justify-end transition-opacity duration-200",v||j||!d?"opacity-100":"opacity-0",b?"":"pointer-events-none opacity-0"),onClick:E,children:l.jsxs("div",{className:B("p-md flex w-full flex-col bg-gradient-to-t from-black/60 to-transparent pb-0",t?"pb-md":"pb-0"),children:[l.jsxs("div",{className:"gap-md flex",children:[l.jsx(z,{as:"button",onClick:E,children:l.jsx(D,{color:"white",children:l.jsx(be,{icon:d?rre:sre})})}),l.jsx(bn,{showTooltip:a&&!w,tooltipLayout:"right",tooltipText:I({defaultMessage:"This video does not have audio.",id:"V7VF0Hgi7t"}),asChild:!0,children:l.jsx(z,{as:"button",onClick:w?M:K=>K.stopPropagation(),className:B({"opacity-50":!w}),children:l.jsx(D,{color:"white",children:l.jsx(be,{icon:h?are:ore})})})}),l.jsx(z,{as:"button",className:"ml-auto",onClick:V,children:l.jsx(D,{color:"white",children:l.jsx(be,{icon:gf})})}),l.jsx(z,{as:"button",onClick:H,children:l.jsx(D,{color:"white",children:l.jsx(be,{icon:N4e})})}),l.jsx(en,{isMobileStyle:L,items:W,onOpen:P,onClose:R,wrapperClassName:"flex",children:l.jsx(z,{as:"button",className:"size-[20px]",children:l.jsx(D,{color:"white",children:l.jsx(be,{icon:ire})})})})]}),!t&&l.jsx("div",{className:"py-md cursor-pointer",onClick:T,children:l.jsx("div",{className:"relative h-0.5 flex-1 shrink-0 cursor-pointer overflow-hidden rounded-full bg-white/30",children:l.jsx("div",{className:"absolute left-0 top-0 size-full bg-white",style:{transformOrigin:"left",transform:`scaleX(${g})`}})})})]})})]})})});Cfe.displayName="VideoPlayer";const vYe=A.memo(({loading:e,size:t=30})=>{const[n,{width:r,height:s}]=tc(),[a,o]=f.useState(0),[i,c]=f.useState(0),u=Va(0,0,.58,1),d=Va(.19,1,.22,1);f.useEffect(()=>{if(r&&s){const g=Math.ceil(r/t),y=Math.ceil(s/t);o(g),c(y)}},[r,s,t]);function m(g,y){const v=Math.ceil(g),x=Math.floor(y);return Math.floor(Math.random()*(x-v)+v)}const p=r?((g,y)=>{let v=Math.floor(y/g);return v%2!==0&&(v=v-1),v=Math.max(2,v),y/v})(t,r):t;return l.jsx("div",{ref:n,style:{gridTemplateColumns:`repeat(auto-fill, ${p}px)`,gridTemplateRows:`repeat(auto-fill, ${p}px)`},className:B("pointer-events-none absolute inset-0 z-[5] grid h-full w-full gap-0",{"bg-raised dark:bg-offset":a===0||i===0}),children:l.jsx(st,{children:[...Array(a*i)].map((g,y)=>e?l.jsx(_e.div,{animate:{opacity:[.9,0],transition:{repeat:1/0,duration:.5,delay:m(0,10)/10,repeatType:"mirror",ease:u}},exit:{opacity:0,transition:{duration:1,ease:d}},className:"bg-raised dark:bg-offset"},y):null)})})}),xYe="IMAGE_GEN_PLACEHOLDER",bYe="VIDEO_GEN_PLACEHOLDER",_Ye=A.memo(({sourceImage:e,media:t,generating:n,square:r=!1,type:s="image",onMediaLoad:a,entryUUID:o})=>{const i=Va(.19,1,.22,1),[c,u]=f.useState(void 0),[d,m]=f.useState(!1),[h,p]=f.useState(!n),[g,y]=f.useState(!0),[v,{width:x}]=tc();f.useEffect(()=>{const C=s==="video"?bYe:xYe;t&&t.name!==C&&u(t)},[t,s]),f.useEffect(()=>{g&&y(!1)},[g]),f.useEffect(()=>{n&&(m(!1),p(!1))},[n]),f.useEffect(()=>{if(d&&!n){const C=setTimeout(()=>{p(!0)},1e3);return()=>clearTimeout(C)}},[d,n]);const _=((C,E)=>{let M=Math.floor(E/C);return M%2!==0&&(M=M-1),M=Math.max(2,M),E/M})(30,x),w=f.useCallback(()=>{m(!0),a?.()},[a]),S=f.useMemo(()=>({url:c?.url,name:c?.name,showCitation:!1}),[c?.url,c?.name]);return l.jsx("div",{ref:v,className:"relative size-full shrink-0",children:_!==0?l.jsxs(l.Fragment,{children:[l.jsx(vYe,{loading:!h,size:_}),l.jsx(_e.div,{className:"relative size-full",style:{maskSize:`${_}px ${_}px`,maskPosition:"top left",maskRepeat:"repeat"},initial:{maskImage:h?`radial-gradient(black ${_/5*4}px, transparent 0px)`:`radial-gradient(black ${_/5}px, transparent 0px)`},animate:{maskImage:h?`radial-gradient(black ${_/5*4}px, transparent 0px)`:`radial-gradient(black ${_/5}px, transparent 0px)`},transition:{duration:1,ease:i},children:l.jsx(tr,{className:B(`relative h-full w-full overflow-hidden !rounded-md ${h?"cursor-pointer":""}`,{"!rounded-none":r}),fullBleed:!0,children:l.jsx(_e.div,{animate:{filter:!h&&e?"blur(20px) saturate(2)":"none"},transition:{duration:1,ease:i},className:"grid size-full",children:l.jsx("div",{className:"relative w-full bg-black/40 dark:bg-white/40",children:l.jsxs(st,{children:[(e?.startsWith("http")||e?.startsWith("blob"))&&!h&&l.jsx(_e.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:1,ease:i},className:"absolute inset-0 size-full",children:l.jsx("img",{src:e,alt:"Source",className:"block size-full object-cover"})},"source"),c?.image?.startsWith("http")&&l.jsx(_e.div,{initial:{opacity:0},animate:{opacity:h?1:0},exit:{opacity:0},transition:{duration:1,ease:i},className:"absolute inset-0 size-full",children:s==="image"?l.jsxs(l.Fragment,{children:[l.jsx(es,{src:c.image||c.thumbnail,alt:c.name||"Generated Image",origin:S,includeLightBoxModal:!!h,maskClassName:B("!bg-transparent",{"!rounded-none":r}),imageClassName:"block w-full h-full object-contain !bg-transparent",containerClassName:"w-full h-full absolute inset-0 z-10 !bg-transparent",onLoad:w}),l.jsx("img",{src:c.image||c.thumbnail,alt:c.name||"Generated Image",className:"absolute inset-0 block size-full object-cover blur-[20px] saturate-150"})]}):l.jsx(Cfe,{videoUrl:c.image,isGenerated:!0,aspectRatio:11/6,onLoadedData:w,className:"absolute inset-0 block size-full !rounded-none object-cover",entryUUID:o})},"generated")]})})})})})]}):null})}),wYe=A.memo(({setViewState:e})=>{const{$t:t}=X(),n=f.useCallback(()=>e("create_avatar"),[e]);return l.jsxs("div",{className:"flex flex-col",children:[l.jsxs("div",{className:"mb-lg relative -mx-6 h-[600px] overflow-hidden rounded-lg",children:[l.jsx(es,{src:"https://r2cdn.perplexity.ai/virtual-tryon-intro-avatars.png",alt:"Avatar preview",imageClassName:"h-full w-full object-cover object-top pointer-events-none bg-base",containerClassName:"flex-shrink-0",includeLightBoxModal:!1,className:"pointer-events-none"}),l.jsxs("div",{className:"from-base gap-md p-lg absolute inset-x-0 bottom-0 flex h-1/2 flex-col items-center justify-end bg-gradient-to-t from-35% to-transparent",children:[l.jsx("span",{className:"font-editorial text-3xl font-light",children:l.jsx(he,{defaultMessage:"Skip the guesswork",id:"xUwopw2/ud"})}),l.jsx(D,{variant:"small",className:"max-w-[350px] text-pretty text-center",color:"light",children:l.jsx(he,{defaultMessage:"Upload a photo, create your avatar, and explore how outfits look on your digital self.",id:"Mtc6VpYStx"})})]})]}),l.jsx("div",{className:"-mt-md flex justify-center",children:l.jsx(ye,{text:t({defaultMessage:"Create your avatar",id:"pkptzIeNWN"}),variant:"primary",onClick:n})})]})}),SYe=A.memo(({setViewState:e,uploadSelfie:t,setLocalPreviewUrl:n,isSelfieUploading:r})=>{const{$t:s}=X(),[a,o]=f.useState(!1),i=f.useCallback(async m=>{const h=m.target.files?.[0];if(h){const p=URL.createObjectURL(h);n(p),await t(h)&&e("choose_body")}m.target.value=""},[t,n,e]),c=f.useCallback(async m=>{const h=URL.createObjectURL(m);n(h),await t(m)&&e("choose_body")},[t,n,e]),u=f.useCallback(()=>{o(!0)},[]),d=f.useCallback(()=>{o(!1)},[]);return l.jsxs("div",{className:"gap-lg -mb-sm -mt-md flex flex-col",children:[l.jsxs("div",{className:"gap-sm flex flex-col items-center",children:[l.jsx(Efe,{step:2,totalSteps:4}),l.jsx("span",{className:"font-editorial text-3xl font-light",children:l.jsx(he,{defaultMessage:"Take a selfie",id:"0H3vV1IwP1"})}),l.jsx(D,{variant:"small",className:"max-w-[400px] text-pretty text-center",color:"light",children:l.jsx(he,{defaultMessage:"To create a personalized avatar, please upload a well lit, front-facing selfie.",id:"2hp5WUjFRc"})})]}),l.jsxs("div",{className:"gap-sm grid grid-cols-2 grid-rows-4",children:[l.jsx(TYe,{image:"https://r2cdn.perplexity.ai/virtual-tryon-selfie.png",title:s({defaultMessage:"Front facing selfie",id:"v5qKOPNOwM"}),description:s({defaultMessage:"Simple front facing photo is all we need.",id:"7sBIYn49Jb"}),className:"!col-start-1 !row-span-4 !row-start-1"}),l.jsx(Wx,{title:s({defaultMessage:"Face fully visible",id:"I+I2q2Gn3a"}),icon:ov}),l.jsx(Wx,{title:s({defaultMessage:"Looking Forward",id:"79tlG9DGSR"}),icon:lre}),l.jsx(Wx,{title:s({defaultMessage:"Even natural light",id:"2OWeBoZV0d"}),icon:A4e}),l.jsx(Wx,{title:s({defaultMessage:"No harsh shadows",id:"vXaeUswXsx"}),icon:P4e})]}),l.jsx("div",{className:"gap-sm flex justify-center",children:r?l.jsxs("div",{className:"px-md py-sm gap-sm bg-offsetPlus flex items-center rounded-lg",children:[l.jsx(Ns,{}),l.jsx(D,{variant:"baseSemi",children:l.jsx(he,{defaultMessage:"Uploading...",id:"JEsxDwhXPG"})})]}):l.jsxs(l.Fragment,{children:[l.jsx("input",{type:"file",accept:"image/*",className:"absolute hidden",id:"shopping-try-on-file-input",onChange:i}),l.jsx(ye,{text:s({defaultMessage:"Take a selfie",id:"0H3vV1IwP1"}),icon:nre,variant:"common",onClick:u}),l.jsxs("label",{htmlFor:"shopping-try-on-file-input",className:"px-md py-sm gap-sm bg-super active:ease-outExpo group flex origin-center transform-gpu cursor-pointer select-none flex-row items-center whitespace-nowrap rounded-lg duration-300 hover:opacity-80 active:scale-[0.97] active:duration-150",children:[l.jsx(D,{children:l.jsx(be,{icon:cS,size:"md",className:"text-white dark:text-black"})}),l.jsx(D,{variant:"baseSemi",color:"defaultInverted",children:l.jsx(he,{defaultMessage:"Upload a selfie",id:"bODqv8TA31"})})]})]})}),l.jsx(dYe,{isOpen:a,onClose:d,onCapture:c})]})}),Efe=({step:e,totalSteps:t})=>{const n=e/t*100;return l.jsx(z,{className:"py-xs flex flex-row items-center justify-center rounded",children:l.jsx("div",{className:"bg-offsetPlus w-xl h-xs relative overflow-hidden rounded-full",children:l.jsx("div",{className:"bg-dark h-full transition-all duration-300",style:{width:`${n}%`}})})})},CYe=A.memo(({setViewState:e,generateDefaultAvatar:t,selfieUrl:n,uploadPhoto:r,generateCustomAvatar:s,setLocalPreviewUrl:a})=>{const{$t:o}=X(),[i,c]=f.useState("default"),[u,d]=f.useState(!1),m=f.useCallback(()=>{n&&(e("generating_avatar"),t(n))},[e,t,n]),h=f.useCallback(()=>{const x=document.getElementById("choose-body-file-input");x&&x.click()},[]),p=f.useCallback(()=>{i==="default"?m():h()},[i,m,h]),g=f.useCallback(()=>{c("default")},[]),y=f.useCallback(()=>{c("your")},[]),v=f.useCallback(async x=>{const b=x.target.files?.[0];if(b){if(!n)return;const _=URL.createObjectURL(b);a(_);try{d(!0);const w=await r(b);w&&(e("generating_avatar"),s(n,w))}finally{d(!1)}}x.target.value=""},[r,s,n,a,e]);return l.jsxs("div",{className:"gap-xl flex flex-col",children:[l.jsxs("div",{className:"gap-sm flex flex-col items-center",children:[l.jsx(Efe,{step:4,totalSteps:4}),l.jsx("span",{className:"font-editorial text-3xl font-light",children:l.jsx(he,{defaultMessage:"Choose your avatar body",id:"+VyjlR/lAC"})}),l.jsx(D,{variant:"small",className:"max-w-[400px] text-pretty text-center",color:"light",children:l.jsx(he,{defaultMessage:"You can continue with a default body or create a more personalized avatar with your body.",id:"cWLZ08Ydju"})})]}),l.jsxs("div",{className:"gap-md grid grid-cols-2",children:[l.jsx(YG,{onClick:g,title:o({defaultMessage:"Default body",id:"vO54ZADRPV"}),description:o({defaultMessage:"Uses a generic body shape, no photo needed",id:"ZuGM1SxB8y"}),selected:i==="default"}),l.jsx(YG,{onClick:y,title:o({defaultMessage:"Your body",id:"7ZKFrdUySm"}),description:o({defaultMessage:"Uses a full body photo to create a custom body",id:"ddPGzyfCV3"}),selected:i==="your"})]}),l.jsxs("div",{className:"flex justify-center",children:[l.jsx("input",{type:"file",accept:"image/*",className:"absolute hidden",id:"choose-body-file-input",onChange:v}),l.jsx(ye,{text:o(u?{defaultMessage:"Uploading full body photo...",id:"Xg5+S5kxLh"}:i==="default"?{defaultMessage:"Continue with default",id:"zlYIh9m2kM"}:{defaultMessage:"Upload full body photo",id:"VD13bqnxFO"}),icon:i==="default"?ov:cS,isLoading:u,disabled:u,variant:"primary",onClick:p})]})]})}),YG=({onClick:e,title:t,description:n,selected:r})=>l.jsxs(z,{className:B("gap-xs p-md !ring-super relative flex cursor-pointer flex-col rounded-xl border duration-150",r?"!border-transparent ring-2":"ring-0"),onClick:e,children:[l.jsx("div",{className:"mb-sm aspect-square overflow-hidden rounded-md",children:l.jsx(es,{src:"/static/images/tryon/avatar_body.png",alt:"Default body",imageClassName:"size-full object-contain invert opacity-10",containerClassName:"size-full",maskClassName:"bg-transparent",includeLightBoxModal:!1,draggable:!1})}),l.jsx(D,{variant:"baseSemi",className:"text-center",children:t}),l.jsx(D,{variant:"small",className:"px-md text-pretty text-center",color:"light",children:n})]}),EYe=A.memo(({status:e,onClose:t,onBack:n,resultUrl:r,saveAvatar:s,onSuccessfulOnboarding:a})=>{const{$t:o}=X(),[i,c]=f.useState(!1),u=f.useCallback(async()=>{if(r&&e==="success"&&!i){c(!0);const d=await s(r);t(),c(!1),a(d)}else c(!1),t()},[t,r,e,s,a,i]);return l.jsxs("div",{className:"gap-lg flex flex-col",children:[l.jsx("div",{className:"flex justify-center",children:l.jsx(z,{className:B("gap-sm relative isolate flex flex-col overflow-hidden rounded-lg border"),children:r&&l.jsx(es,{src:r,alt:"Your Avatar",imageClassName:"max-h-[500px] max-w-full object-contain",containerClassName:"flex justify-center",includeLightBoxModal:!1})})}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(D,{variant:"page-title",className:"text-center",children:l.jsx(he,{defaultMessage:"Your new virtual you",id:"LoEf9iMkXR"})}),l.jsx(D,{variant:"small",className:"text-center",color:"light",children:l.jsx(he,{defaultMessage:"Your personalized avatar is ready",id:"MLiXNgEouW"})})]}),l.jsxs("div",{className:"gap-sm flex justify-center",children:[l.jsx(ye,{text:o({defaultMessage:"Retry",id:"62nsdyMyIO"}),variant:"border",onClick:n,disabled:i}),l.jsx(ye,{text:o({defaultMessage:"Start Shopping",id:"BRgXJINE++"}),variant:"primary",onClick:u,disabled:e!=="success"||i,isLoading:i})]})]})}),MYe=A.memo(({localPreviewUrl:e,onClose:t})=>{const{$t:n}=X(),r=f.useMemo(()=>{if(e)return{image:e,name:"Avatar Preview",status:S9e.IN_PROGRESS,type:"image",medium:"image",author_name:"PPLX",author_url:"https://pplx.ai",image_width:100,image_height:100,url:e,source:"pplx",thumbnail:e,dark_image_url:e,locations:[],thumbnail_height:100,thumbnail_width:100,sponsored_uuid:"",ad_content_uuid:"",modal_url:"",low_res_image:""}},[e]);return l.jsxs("div",{className:"gap-lg flex flex-col",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx(D,{variant:"page-title",className:"text-center",children:l.jsx(he,{defaultMessage:"Working on your avatar",id:"9nXG80mtI6"})}),l.jsx(D,{variant:"small",className:"text-center",color:"light",children:l.jsx(he,{defaultMessage:"You can continue shopping while we create your virtual you. It shouldn't be long.",id:"Z5TNVvv3SP"})})]}),l.jsxs("div",{className:"gap-lg flex flex-col items-center",children:[l.jsx(z,{className:"gap-sm relative isolate flex aspect-[252/336] w-full max-w-[400px] flex-col overflow-hidden rounded-lg border",children:l.jsx(_Ye,{generating:!0,media:r})}),l.jsx(ye,{text:n({defaultMessage:"Continue shopping",id:"Yywm0pqtZa"}),variant:"primary",onClick:t})]})]})}),Wx=A.memo(({title:e,icon:t})=>l.jsx(z,{className:"gap-sm p-sm flex flex-col items-center justify-center rounded-lg border",children:l.jsxs(D,{variant:"smallBold",className:"gap-xs flex flex-row items-center",children:[l.jsx(be,{icon:t,size:"md"}),e]})})),TYe=A.memo(({image:e,title:t,className:n,description:r})=>l.jsxs(z,{className:B("gap-sm relative col-start-2 row-start-2 flex flex-col overflow-hidden rounded-lg border",n),children:[e&&l.jsx(es,{src:e,alt:"Intro",imageClassName:"w-full object-cover object-top pointer-events-none max-h-[175px]",containerClassName:"flex-shrink-0",includeLightBoxModal:!1,className:"pointer-events-none"}),l.jsxs("div",{className:"from-base gap-xs p-md absolute inset-0 flex flex-col items-center justify-end bg-gradient-to-t from-5% to-transparent",children:[l.jsx(D,{variant:"smallBold",className:"flex items-end justify-center text-center",children:t}),r&&l.jsx(D,{variant:"tinyRegular",className:"text-pretty text-center leading-tight",color:"light",children:r})]})]}));async function kYe({request:e,reason:t}){const{data:n,error:r}=await ne.POST("/rest/shopping/generate-shopping-try-on",t,{body:e,timeoutMs:35e3,headers:{"content-type":"application/json"}});return r?{status:"error",image_url:""}:n}async function QG({request:e,reason:t}){const{data:n,error:r}=await ne.POST("/rest/shopping/try-on-photo/generate-avatar",t,{body:e,timeoutMs:4e4,headers:{"content-type":"application/json"}});return r?{status:"error",image_url:""}:n}const NYe=async({reason:e,try_on_photo_url:t})=>{try{const n=await ne.PUT("/rest/shopping/try-on-photo/save",e,{body:{try_on_photo_url:t},timeoutMs:je()});return n.data?n.data:{status:"error",user_try_on_photo_url:""}}catch(n){return ee.error("Failed to save user try on photo",n),{status:"error",user_try_on_photo_url:""}}},AYe=async({reason:e})=>{try{const t=await ne.DELETE("/rest/shopping/try-on-photo/delete",e,{timeoutMs:je()});return t.data?t.data:{status:"error"}}catch(t){return ee.error("Failed to delete user try on photo",t),{status:"error"}}},M9=async({file:e,fileSource:t,forceImage:n,reason:r})=>{const s=await ne.POST("/rest/uploads/create_upload_url",r,{body:{filename:e.name,content_type:e.type,source:t??"default",file_size:e.size,force_image:n??!1},timeoutMs:nn.MEDIUM,retries:2});return s.data?s.data:null},PYe=async({remote_file_id:e,connection_type:t,source:n,reason:r})=>{const s=await ne.POST("/rest/connectors/attachments/upload",r,{body:{remote_file_id:e,connection_type:t,source:n??"default"},timeoutMs:nn.VERY_HIGH,retries:2});return s.data?s.data:null};async function RYe({request:e,reason:t}){return new Promise((n,r)=>{ne.SSE("/rest/sse/attachment_processing/subscribe",t,{params:e,handlers:{message:s=>{n(s)}}}).catch(r)})}const Mfe=({reason:e,productImageUrl:t})=>{const{$t:n}=X(),{openToast:r}=On(),{openModal:s,closeModal:a}=_t(),o=gt(),[i,c]=f.useState({status:"idle",error:null,resultUrl:null,selfieUrl:null});f.useEffect(()=>{if(t){const E=o.getQueryData(V3(t));E&&c(M=>({...M,resultUrl:E}))}},[t,o]);const u=f.useRef(!1),d=f.useCallback(()=>{c({status:"idle",error:null,resultUrl:null,selfieUrl:null})},[]),m=f.useCallback(E=>{c(M=>({...M,status:"error",error:E}))},[]),h=f.useCallback(async E=>{if(!E.type.startsWith("image/"))return m(n({defaultMessage:"Only image files are supported.",id:"f4sVsu2Ean"})),null;const M=10*1024*1024;if(E.size>M)return m(n({defaultMessage:"Image size exceeds 10MB limit.",id:"/lVoGk8eeX"})),null;try{c(P=>({...P,status:"uploading"}));const T=await M9({file:E,fileSource:"shopping_try_on",forceImage:!0,reason:e});if(!T?.fields||!T?.s3_bucket_url)throw T?.rate_limited?new Error("File upload failed due to rate limit."):new Error("Failed to get upload URL");const I=new FormData;Object.entries(T.fields).forEach(([P,R])=>{I.append(P,R)}),I.append("file",E);const j=await fetch(T.s3_bucket_url,{method:"POST",body:I});if(!j.ok)throw new Error("Failed to upload file");let N=null;try{const P=await j.json();P?.secure_url?N=P.secure_url:P?.eager?.[0]?.secure_url&&(N=P.eager[0].secure_url),N&&Dm(N)&&(N=TP(N))}catch{T.s3_object_url&&(N=T.s3_object_url)}if(!N)throw new Error("Failed to get image URL from upload response");return c(P=>({...P,status:"idle"})),N}catch(T){return m(T instanceof Error?T.message:n({defaultMessage:"Failed to upload image.",id:"+eCvtPyOJg"})),null}},[n,e,m]),p=f.useCallback(async E=>{const M=await h(E);return M&&c(T=>({...T,selfieUrl:M})),M},[h]),g=f.useCallback(()=>{s("shoppingTryOnOnboardingModal",{onSuccessfulOnboarding:E=>{o.setQueryData(i2(),{try_on_photo_url:E}),o.setQueryData(Yu(),!1),r(n({defaultMessage:"Avatar updated successfully!",id:"tjpCN5PY48"}),"success",3)},onClose:()=>{a()}})},[s,a,o,r,n]),y=f.useCallback(async E=>{try{const{user_try_on_photo_url:M}=await NYe({reason:e,try_on_photo_url:E});return M}catch(M){return r(n({defaultMessage:"Failed to save avatar. Please try again.",id:"Z5lnZQ5t8Q"}),"error",5),ee.error("Failed to save avatar",M),""}},[e,n,r]),v=f.useCallback(async()=>{try{await AYe({reason:e})}catch(E){ee.error("Failed to delete avatar",E)}},[e]),x=f.useCallback(E=>{u.current=E},[]),b=f.useCallback(async E=>{const M=await y(E);o.setQueryData(i2(),{try_on_photo_url:M}),r(n({defaultMessage:"Your avatar has been generated! You can now try on clothes.",id:"moiCrokdKs"}),"success",10,"",n({defaultMessage:"Check it out",id:"IjqWGw+QT1"}),()=>{s("avatarManagementModal",{source:"toast",onRetry:g})})},[y,n,r,o,s,g]),_=f.useCallback(async E=>{try{c(T=>({...T,status:"processing",resultUrl:null,error:null})),o.setQueryData(Yu(),!0);const M=await QG({request:{user_image_url:E},reason:e});if(M.status==="failed")throw o.setQueryData(Yu(),!1),new Error("Failed to generate avatar");c(T=>({...T,status:"success",resultUrl:M.image_url})),u.current&&await b(M.image_url),o.setQueryData(Yu(),!1)}catch(M){m(M instanceof Error?M.message:n({defaultMessage:"Failed to generate avatar.",id:"anPmJ/DLsx"}))}},[e,n,m,b,u,o]),w=f.useCallback(async(E,M)=>{try{c(I=>({...I,status:"processing",resultUrl:null,error:null})),o.setQueryData(Yu(),!0);const T=await QG({request:{user_image_url:M,selfie_image_url:E},reason:e});if(T.status==="failed")throw o.setQueryData(Yu(),!1),new Error("Failed to generate avatar");c(I=>({...I,status:"success",resultUrl:T.image_url})),u.current&&await b(T.image_url),o.setQueryData(Yu(),!1)}catch(T){m(T instanceof Error?T.message:n({defaultMessage:"Failed to generate avatar.",id:"anPmJ/DLsx"}))}},[e,n,m,b,u,o]),S=f.useCallback(async(E,M)=>{try{c(I=>({...I,status:"processing",resultUrl:null,error:null}));const T=await kYe({request:{image_url:E,product_image_url:M},reason:e});if(T.status==="error")throw new Error("Failed to generate try-on");c(I=>({...I,status:"success",resultUrl:T.image_url})),M&&o.setQueryData(V3(M),T.image_url)}catch(T){m(T instanceof Error?T.message:n({defaultMessage:"Failed to generate try-on.",id:"ptEP5MGDf6"}))}},[e,n,m,o]),C=f.useCallback(()=>{t&&o.removeQueries({queryKey:V3(t)}),c(E=>({...E,resultUrl:null}))},[t,o]);return f.useMemo(()=>({status:i.status,error:i.error,resultUrl:i.resultUrl,selfieUrl:i.selfieUrl,uploadPhoto:h,uploadSelfie:p,generateDefaultAvatar:_,generateCustomAvatar:w,tryOnProduct:S,saveAvatar:y,resetState:d,deleteAvatar:v,setShouldAutoSaveAvatar:x,clearCachedTryOn:C}),[i.status,i.error,i.resultUrl,i.selfieUrl,h,p,_,w,S,y,d,v,x,C])},IYe=A.memo(({isOpen:e,onClose:t,onSuccessfulOnboarding:n})=>{const r="shopping-try-on-onboarding",{status:s,resultUrl:a,selfieUrl:o,uploadSelfie:i,generateDefaultAvatar:c,generateCustomAvatar:u,uploadPhoto:d,saveAvatar:m,resetState:h,setShouldAutoSaveAvatar:p}=Mfe({reason:r}),[g,y]=f.useState("intro"),[v,x]=f.useState(null),[b,_]=f.useState(null),w=f.useCallback(T=>{x(I=>(I&&I!==T&&URL.revokeObjectURL(I),T))},[]),S=f.useCallback(()=>{s==="processing"&&g==="generating_avatar"?p(!0):h(),y("intro"),_(null),t()},[t,h,s,g,p]);f.useEffect(()=>{!e&&v&&(URL.revokeObjectURL(v),x(null))},[e,v]),f.useEffect(()=>{g==="generating_avatar"&&(s==="success"&&a?y("confirm_avatar"):s==="error"&&(y("choose_body"),_(null)))},[g,s,a]);const C=f.useCallback(()=>y("create_avatar"),[]),E=f.useCallback(T=>(_("selfie"),i(T)),[i]),M=f.useCallback(T=>(_("body"),d(T)),[d]);return l.jsx(rn,{isOpen:e,onClose:S,children:l.jsxs("div",{className:"size-full",children:[g==="intro"&&l.jsx(wYe,{setViewState:y}),g==="create_avatar"&&l.jsx(SYe,{setViewState:y,uploadSelfie:E,setLocalPreviewUrl:w,isSelfieUploading:s==="uploading"&&b==="selfie"}),g==="choose_body"&&l.jsx(CYe,{setViewState:y,generateDefaultAvatar:c,selfieUrl:o,uploadPhoto:M,generateCustomAvatar:u,setLocalPreviewUrl:w}),g==="generating_avatar"&&l.jsx(MYe,{localPreviewUrl:v,onClose:S}),g==="confirm_avatar"&&l.jsx(EYe,{status:s,onClose:S,onBack:C,resultUrl:a,saveAvatar:m,onSuccessfulOnboarding:n})]})})}),T9=A.memo(()=>l.jsx("div",{className:"bg-base fixed inset-0 z-[999] flex h-screen w-screen items-center justify-center opacity-50"}));T9.displayName="VoiceToVoiceModalLoader";const Tfe=cl("VisibilityChangeContext",{isVisible:!1}),kfe=A.memo(function(t){const{children:n}=t,[r,s]=f.useState((typeof document<"u"&&document?.visibilityState==="hidden")??!1);return f.useEffect(()=>{if(typeof window>"u")return;function a(){s(document.visibilityState==="hidden")}return document.addEventListener("visibilitychange",a,!1),()=>{typeof window>"u"||document.removeEventListener("visibilitychange",a)}},[]),l.jsx(Tfe.Provider,{value:{isVisible:r},children:n})});kfe.displayName="VisibilityChangeProvider";function jYe(){return f.useContext(Tfe)}const k9=A.forwardRef(function(t,n){const{bounceDuration:r=6e4,blurDuration:s=5e3,children:a,href:o,trackEvent:i,className:c,onClickLink:u,...d}=t,[m,h]=f.useState(null),[p,g]=f.useState(null),y=f.useRef(!1),{isVisible:v}=jYe();f.useEffect(()=>{if(!(y.current||!m)){if(m&&!p&&!v){const b=Date.now();b-m<s?g(b):y.current=!0;return}if(m&&p&&v){const b=Date.now()-p;b<r&&!y.current&&i?.("bounced from external link",{url:o,timeSpent:b}),g(null),y.current=!0}}},[s,p,r,m,o,v,i]);const x=f.useCallback(()=>{u?.(),h(Date.now()),y.current=!1},[u]);return l.jsx(at,{ref:n,href:o,target:"_blank",rel:"noopener",className:c,onClick:x,...d,children:a})}),N9=A.memo(function(t){const{className:n,children:r,result:s,trackEvent:a,...o}=t,i=B("group flex w-full cursor-pointer items-stretch h-full",n);return C9(s)?l.jsx(k9,{className:i,href:s.url,trackEvent:a,...o,children:l.jsx("div",{className:"w-full",children:r})}):l.jsx(l.Fragment,{children:r})});N9.displayName="CitationCardLink";const A9=A.memo(({variant:e="medium",searchType:t})=>{const n=t==="memory",s=B("flex items-center justify-between w-full",e==="small"?"mb-0":"mb-2");return l.jsxs("div",{className:s,children:[l.jsxs(D,{className:"flex items-center gap-2",variant:"tiny",color:"light",children:[l.jsx(be,{icon:n?Gl:pf,size:"sm"}),n?l.jsx(he,{defaultMessage:"Memory",id:"dVx3yznM2C"}):l.jsx(he,{defaultMessage:"Library",id:"StcK672jB9"})]}),l.jsx(D,{variant:"tiny",color:"ultraLight",children:l.jsx(be,{icon:W_,size:"sm"})})]})});A9.displayName="MemorySearchCitationCardTitle";const Nfe=e=>e.is_scrubbed??!1,OYe=e=>P9(e)?Nfe(e):!1,P9=e=>e.is_memory||e.is_conversation_history,LYe=e=>e.is_memory,NC=e=>{const t=e.is_client_context,n=OYe(e);return t||n},Afe=A.memo(function(t){const{$t:n}=X(),{result:r,additionalMetadata:s,variant:a}=t,o=r.url,i=r.meta_data?.generated_file_description??r.snippet,c=r.meta_data?.generated_file_title??r.name,u=r?.is_client_context,d=!!r.meta_data?.connection_type,m=typeof r.meta_data?.quoteBeforeContext=="string"?r.meta_data?.quoteBeforeContext:"",h=typeof r.meta_data?.quoteEmphasisText=="string"?r.meta_data?.quoteEmphasisText:"",p=typeof r.meta_data?.quoteAfterContext=="string"?r.meta_data?.quoteAfterContext:"",g=m.length>0||h.length>0||p.length>0,y=a!=="grid"&&i&&g,v=r.meta_data?.repo_type,x=typeof r.meta_data?.wiley_book_uuid=="string",b=typeof r.meta_data?.domain_name=="string"?r.meta_data?.domain_name:void 0,_=QKe(r),w=()=>{if(d&&r.meta_data?.connection_type!==Pn.WILEY)return v9(r.meta_data?.connection_type);if(r.is_attachment){if(v=="USER")return n({defaultMessage:"Local Files",id:"FBnEWaGOHR"});if(v=="ORG")return n({defaultMessage:"Org Files",id:"DaFSYzpM1Q"});if(v=="COLLECTION")return n({defaultMessage:"Files",id:"m4vqJl0/FT"});if(!r?.meta_data?.file_uuid)return n({defaultMessage:"Attachment",id:"eLCAEP8LHj"})}return b},S=P9(r),C=r.is_memory,E=NC(r);return l.jsxs("div",{className:B("items gap-xs pointer-events-none relative flex h-full max-w-full select-none flex-col",{"px-sm pb-sm pt-sm w-full":a==="grid"},{"p-md":a!=="grid"}),children:[l.jsxs("div",{className:"flex w-full items-center justify-between",children:[S&&!E?l.jsx(A9,{variant:"small",searchType:C?"memory":"conversation-history"}):l.jsxs("div",{className:"space-x-xs flex",children:[s||null,l.jsx(xu,{variant:"tiny",color:"light",url:o,isAttachment:r.is_attachment,connectionType:r.meta_data?.connection_type,source:w(),isInlineAttachment:_})]}),l.jsxs("div",{children:[x&&l.jsx(D,{variant:"tiny",color:"super",children:l.jsx(be,{size:"sm",icon:cre})}),u&&a==="grid"?l.jsx(D,{variant:"tiny",color:"super",children:l.jsx(be,{size:"sm",icon:ure})}):null]})]}),l.jsx(D,{variant:a==="grid"?"tiny":a==="list"?"small":"base",className:B("",{"":a==="grid","pr-1":a==="list"}),children:C&&!E?l.jsx(D,{variant:"tiny",className:"line-clamp-2 h-8",children:r?.snippet}):l.jsx("span",{className:"line-clamp-1 text-left md:line-clamp-2 md:h-8",children:c||l.jsx("div",{children:""})})}),c!==r.name?l.jsx(D,{variant:"small",color:"light",className:"line-clamp-1",children:r.name}):null,y&&l.jsxs(D,{variant:a==="list"?"tiny":"small",className:"mt-two border-super line-clamp-[8] border-l-4 pl-2 font-normal",children:[l.jsx("span",{children:m}),l.jsx("span",{className:"bg-super/30",children:h}),l.jsx("span",{children:p})]}),a!=="grid"&&i&&!g&&l.jsx(D,{variant:a==="list"?"tiny":"small",className:"mt-two line-clamp-1 font-normal md:line-clamp-4",children:i}),E&&a!=="grid"?l.jsxs(z,{className:"gap-xs pt-sm mt-xs flex items-center border-t",children:[l.jsx(D,{variant:"tiny",color:"super",children:l.jsx(be,{size:"sm",icon:W_})}),l.jsx(D,{variant:"tiny",color:"super",children:l.jsx(he,{defaultMessage:"Personal Search",id:"7+aLCEyqS2",description:"title"})})]}):null]})});Afe.displayName="CitationDefaultCard";const Pfe=A.memo(function(t){const{result:n,imageURL:r,citationNumber:s,useLightBoxModal:a=!0}=t,o=B(" w-full relative max-h-[76px]");return l.jsxs("div",{className:o,children:[l.jsx(es,{includeLightBoxModal:a,alt:n.name,containerClassName:"w-full h-full p-xs",imageClassName:"object-cover object-center w-full h-full rounded-md",src:r}),s&&l.jsx(D,{className:"bottom-sm left-sm px-xs absolute z-[1] inline-flex rounded-sm bg-black/50",variant:"tiny",color:"white",children:s})]})});Pfe.displayName="CitationImageCard";function R9(e){const t=new Date;return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function h_(e){return!isNaN(new Date(e).getTime())}function NBt(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function DYe(e){const t=new Date;return t.setDate(t.getDate()-1),e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function Rfe(e){const t=new Date;return t.setDate(t.getDate()+1),e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function AC(e,t,n={numeric:"auto",style:"long"},r=1e3*60*60*24){if(!t)return"";const s=new Date(t);if(isNaN(s.getTime()))return"";const a=s.getTime()-Date.now(),o=Math.abs(a);return o<=1e3?"":o<1e3*60?e.formatRelativeTime(Math.round(a/1e3),"second",n):o<1e3*60*60?e.formatRelativeTime(Math.round(a/(1e3*60)),"minute",n):o<r&&o<1e3*60*60*24?e.formatRelativeTime(Math.round(a/(1e3*60*60)),"hour",n):o<r&&o>=1e3*60*60*24?e.formatRelativeTime(Math.round(a/(1e3*60*60*24)),"day",n):e.formatDate(s,{month:"short",day:"numeric",year:"numeric"})}const Ife=A.memo(e=>{const{children:t,timestamp:n,timestampProps:r,includeIcon:s=!0}=e,a=X();if(!n)return null;const o=n?.endsWith("Z")?n:`${n}Z`;return l.jsxs(z,{className:"gap-x-xs flex",children:[s?l.jsx(D,{variant:"tiny",color:"super",children:l.jsx(be,{icon:dre,size:"xs"})}):null,l.jsxs(D,{variant:"tinyRegular",color:"light",...r,children:[t&&l.jsxs(l.Fragment,{children:[t," "]}),AC(a,o)]})]})});class FYe extends Date{constructor(t){const n=t?new Date(t):new Date,r=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds());super(r)}getTimezoneOffset(){return 0}}class jfe{static isRecentlyTrending(t,n=432e5){return t.meta_data?.client!=="trending"?!1:new Date().getTime()-new FYe(t.meta_data?.published_date).getTime()<n}}const Ofe=A.memo(e=>{const{result:t,imageURL:n}=e,r=t.url,s=X(),a=f.useMemo(()=>({color:"white"}),[]),o=f.useMemo(()=>l.jsx(Ife,{recentlyUpdatedLabel:s.$t({defaultMessage:"just now",id:"I90sbWU03C"}),timestamp:t.meta_data?.published_date,timestampProps:a,includeIcon:!1,children:s.$t({defaultMessage:"Updated",id:"xrk6zgu9jU"})}),[s,t.meta_data?.published_date,a]);return l.jsxs("div",{className:B("p-sm gap-sm flex h-full max-h-[190px]"),children:[l.jsxs("div",{className:"gap-xs flex flex-col",children:[l.jsxs("div",{className:"space-x-xs flex justify-between",children:[l.jsx(xu,{variant:"tiny",color:"light",url:r,isAttachment:t.is_attachment}),jfe.isRecentlyTrending(t)?l.jsx(bn,{tooltipText:o,children:l.jsx(dre,{className:"text-super size-3.5"})}):null]}),l.jsx("div",{children:l.jsx(D,{variant:"tiny",className:"line-clamp-2",children:t.name})})]}),n?l.jsx("div",{className:"relative -my-1 -mr-1 size-[60px] shrink-0",children:l.jsx(es,{includeLightBoxModal:!1,alt:t.name,containerClassName:"w-full h-full",imageClassName:"object-cover object-center w-full h-full  rounded-md",src:n})}):null]})});Ofe.displayName="CitationTrendingCard";var NT,XG;function UYe(){return XG||(XG=1,NT=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,s,a;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(s=r;s--!==0;)if(!e(t[s],n[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(a=Object.keys(t),r=a.length,r!==Object.keys(n).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,a[s]))return!1;for(s=r;s--!==0;){var o=a[s];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}),NT}var BYe=UYe();const VYe=Ha(BYe);var Hx={exports:{}},AT,ZG;function $Ye(){if(ZG)return AT;ZG=1;var e;/**
* @link https://github.com/gajus/sister for the canonical source repository
* @license https://github.com/gajus/sister/blob/master/LICENSE BSD 3-Clause
*/return e=function(){var t={},n={};return t.on=function(r,s){var a={name:r,handler:s};return n[r]=n[r]||[],n[r].unshift(a),a},t.off=function(r){var s=n[r.name].indexOf(r);s!==-1&&n[r.name].splice(s,1)},t.trigger=function(r,s){var a=n[r],o;if(a)for(o=a.length;o--;)a[o].handler(s)},t},AT=e,AT}var zx={exports:{}},PT,JG;function WYe(){if(JG)return PT;JG=1,PT=function(s,a,o){var i=document.head||document.getElementsByTagName("head")[0],c=document.createElement("script");typeof a=="function"&&(o=a,a={}),a=a||{},o=o||function(){},c.type=a.type||"text/javascript",c.charset=a.charset||"utf8",c.async="async"in a?!!a.async:!0,c.src=s,a.attrs&&e(c,a.attrs),a.text&&(c.text=""+a.text);var u="onload"in c?t:n;u(c,o),c.onload||t(c,o),i.appendChild(c)};function e(r,s){for(var a in s)r.setAttribute(a,s[a])}function t(r,s){r.onload=function(){this.onerror=this.onload=null,s(null,r)},r.onerror=function(){this.onerror=this.onload=null,s(new Error("Failed to load "+this.src),r)}}function n(r,s){r.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,s(null,r))}}return PT}var eq;function HYe(){return eq||(eq=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=WYe(),r=s(n);function s(a){return a&&a.__esModule?a:{default:a}}t.default=function(a){var o=new Promise(function(i){if(window.YT&&window.YT.Player&&window.YT.Player instanceof Function){i(window.YT);return}else{var c=window.location.protocol==="http:"?"http:":"https:";(0,r.default)(c+"//www.youtube.com/iframe_api",function(d){d&&a.trigger("error",d)})}var u=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){u&&u(),i(window.YT)}});return o},e.exports=t.default}(zx,zx.exports)),zx.exports}var Gx={exports:{}},qx={exports:{}},Kx={exports:{}},RT,tq;function zYe(){if(tq)return RT;tq=1;var e=1e3,t=e*60,n=t*60,r=n*24,s=r*365.25;RT=function(u,d){d=d||{};var m=typeof u;if(m==="string"&&u.length>0)return a(u);if(m==="number"&&isNaN(u)===!1)return d.long?i(u):o(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function a(u){if(u=String(u),!(u.length>100)){var d=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(u);if(d){var m=parseFloat(d[1]),h=(d[2]||"ms").toLowerCase();switch(h){case"years":case"year":case"yrs":case"yr":case"y":return m*s;case"days":case"day":case"d":return m*r;case"hours":case"hour":case"hrs":case"hr":case"h":return m*n;case"minutes":case"minute":case"mins":case"min":case"m":return m*t;case"seconds":case"second":case"secs":case"sec":case"s":return m*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return m;default:return}}}}function o(u){return u>=r?Math.round(u/r)+"d":u>=n?Math.round(u/n)+"h":u>=t?Math.round(u/t)+"m":u>=e?Math.round(u/e)+"s":u+"ms"}function i(u){return c(u,r,"day")||c(u,n,"hour")||c(u,t,"minute")||c(u,e,"second")||u+" ms"}function c(u,d,m){if(!(u<d))return u<d*1.5?Math.floor(u/d)+" "+m:Math.ceil(u/d)+" "+m+"s"}return RT}var nq;function GYe(){return nq||(nq=1,function(e,t){t=e.exports=s.debug=s.default=s,t.coerce=c,t.disable=o,t.enable=a,t.enabled=i,t.humanize=zYe(),t.names=[],t.skips=[],t.formatters={};var n;function r(u){var d=0,m;for(m in u)d=(d<<5)-d+u.charCodeAt(m),d|=0;return t.colors[Math.abs(d)%t.colors.length]}function s(u){function d(){if(d.enabled){var m=d,h=+new Date,p=h-(n||h);m.diff=p,m.prev=n,m.curr=h,n=h;for(var g=new Array(arguments.length),y=0;y<g.length;y++)g[y]=arguments[y];g[0]=t.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");var v=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,function(b,_){if(b==="%%")return b;v++;var w=t.formatters[_];if(typeof w=="function"){var S=g[v];b=w.call(m,S),g.splice(v,1),v--}return b}),t.formatArgs.call(m,g);var x=d.log||t.log||console.log.bind(console);x.apply(m,g)}}return d.namespace=u,d.enabled=t.enabled(u),d.useColors=t.useColors(),d.color=r(u),typeof t.init=="function"&&t.init(d),d}function a(u){t.save(u),t.names=[],t.skips=[];for(var d=(typeof u=="string"?u:"").split(/[\s,]+/),m=d.length,h=0;h<m;h++)d[h]&&(u=d[h].replace(/\*/g,".*?"),u[0]==="-"?t.skips.push(new RegExp("^"+u.substr(1)+"$")):t.names.push(new RegExp("^"+u+"$")))}function o(){t.enable("")}function i(u){var d,m;for(d=0,m=t.skips.length;d<m;d++)if(t.skips[d].test(u))return!1;for(d=0,m=t.names.length;d<m;d++)if(t.names[d].test(u))return!0;return!1}function c(u){return u instanceof Error?u.stack||u.message:u}}(Kx,Kx.exports)),Kx.exports}var rq;function qYe(){return rq||(rq=1,function(e,t){var n={};t=e.exports=GYe(),t.log=a,t.formatArgs=s,t.save=o,t.load=i,t.useColors=r,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:c(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function r(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(u){try{return JSON.stringify(u)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}};function s(u){var d=this.useColors;if(u[0]=(d?"%c":"")+this.namespace+(d?" %c":" ")+u[0]+(d?"%c ":" ")+"+"+t.humanize(this.diff),!!d){var m="color: "+this.color;u.splice(1,0,m,"color: inherit");var h=0,p=0;u[0].replace(/%[a-zA-Z%]/g,function(g){g!=="%%"&&(h++,g==="%c"&&(p=h))}),u.splice(p,0,m)}}function a(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(u){try{u==null?t.storage.removeItem("debug"):t.storage.debug=u}catch{}}function i(){var u;try{u=t.storage.debug}catch{}return!u&&typeof process<"u"&&"env"in process&&(u=n.DEBUG),u}t.enable(i());function c(){try{return window.localStorage}catch{}}}(qx,qx.exports)),qx.exports}var Yx={exports:{}},sq;function KYe(){return sq||(sq=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=["cueVideoById","loadVideoById","cueVideoByUrl","loadVideoByUrl","playVideo","pauseVideo","stopVideo","getVideoLoadedFraction","cuePlaylist","loadPlaylist","nextVideo","previousVideo","playVideoAt","setShuffle","setLoop","getPlaylist","getPlaylistIndex","setOption","mute","unMute","isMuted","setVolume","getVolume","seekTo","getPlayerState","getPlaybackRate","setPlaybackRate","getAvailablePlaybackRates","getPlaybackQuality","setPlaybackQuality","getAvailableQualityLevels","getCurrentTime","getDuration","removeEventListener","getVideoUrl","getVideoEmbedCode","getOptions","getOption","addEventListener","destroy","setSize","getIframe"],e.exports=t.default}(Yx,Yx.exports)),Yx.exports}var Qx={exports:{}},aq;function YYe(){return aq||(aq=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=["ready","stateChange","playbackQualityChange","playbackRateChange","error","apiChange","volumeChange"],e.exports=t.default}(Qx,Qx.exports)),Qx.exports}var Xx={exports:{}},Zx={exports:{}},oq;function QYe(){return oq||(oq=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={BUFFERING:3,ENDED:0,PAUSED:2,PLAYING:1,UNSTARTED:-1,VIDEO_CUED:5},e.exports=t.default}(Zx,Zx.exports)),Zx.exports}var iq;function XYe(){return iq||(iq=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=QYe(),r=s(n);function s(a){return a&&a.__esModule?a:{default:a}}t.default={pauseVideo:{acceptableStates:[r.default.ENDED,r.default.PAUSED],stateChangeRequired:!1},playVideo:{acceptableStates:[r.default.ENDED,r.default.PLAYING],stateChangeRequired:!1},seekTo:{acceptableStates:[r.default.ENDED,r.default.PLAYING,r.default.PAUSED],stateChangeRequired:!0,timeout:3e3}},e.exports=t.default}(Xx,Xx.exports)),Xx.exports}var lq;function ZYe(){return lq||(lq=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=qYe(),r=d(n),s=KYe(),a=d(s),o=YYe(),i=d(o),c=XYe(),u=d(c);function d(p){return p&&p.__esModule?p:{default:p}}var m=(0,r.default)("youtube-player"),h={};h.proxyEvents=function(p){var g={},y=function(E){var M="on"+E.slice(0,1).toUpperCase()+E.slice(1);g[M]=function(T){m('event "%s"',M,T),p.trigger(E,T)}},v=!0,x=!1,b=void 0;try{for(var _=i.default[Symbol.iterator](),w;!(v=(w=_.next()).done);v=!0){var S=w.value;y(S)}}catch(C){x=!0,b=C}finally{try{!v&&_.return&&_.return()}finally{if(x)throw b}}return g},h.promisifyPlayer=function(p){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,y={},v=function(M){g&&u.default[M]?y[M]=function(){for(var T=arguments.length,I=Array(T),j=0;j<T;j++)I[j]=arguments[j];return p.then(function(N){var P=u.default[M],R=N.getPlayerState(),k=N[M].apply(N,I);return P.stateChangeRequired||Array.isArray(P.acceptableStates)&&P.acceptableStates.indexOf(R)===-1?new Promise(function(O){var L=function F(){var U=N.getPlayerState(),V=void 0;typeof P.timeout=="number"&&(V=setTimeout(function(){N.removeEventListener("onStateChange",F),O()},P.timeout)),Array.isArray(P.acceptableStates)&&P.acceptableStates.indexOf(U)!==-1&&(N.removeEventListener("onStateChange",F),clearTimeout(V),O())};N.addEventListener("onStateChange",L)}).then(function(){return k}):k})}:y[M]=function(){for(var T=arguments.length,I=Array(T),j=0;j<T;j++)I[j]=arguments[j];return p.then(function(N){return N[M].apply(N,I)})}},x=!0,b=!1,_=void 0;try{for(var w=a.default[Symbol.iterator](),S;!(x=(S=w.next()).done);x=!0){var C=S.value;v(C)}}catch(E){b=!0,_=E}finally{try{!x&&w.return&&w.return()}finally{if(b)throw _}}return y},t.default=h,e.exports=t.default}(Gx,Gx.exports)),Gx.exports}var cq;function JYe(){return cq||(cq=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},r=$Ye(),s=u(r),a=HYe(),o=u(a),i=ZYe(),c=u(i);function u(m){return m&&m.__esModule?m:{default:m}}var d=void 0;t.default=function(m){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,g=(0,s.default)();if(d||(d=(0,o.default)(g)),h.events)throw new Error("Event handlers cannot be overwritten.");if(typeof m=="string"&&!document.getElementById(m))throw new Error('Element "'+m+'" does not exist.');h.events=c.default.proxyEvents(g);var y=new Promise(function(x){if((typeof m>"u"?"undefined":n(m))==="object"&&m.playVideo instanceof Function){var b=m;x(b)}else d.then(function(_){var w=new _.Player(m,h);return g.on("ready",function(){x(w)}),null})}),v=c.default.promisifyPlayer(y,p);return v.on=g.on,v.off=g.off,v},e.exports=t.default}(Hx,Hx.exports)),Hx.exports}var eQe=JYe();const tQe=Ha(eQe);var nQe=Object.defineProperty,rQe=Object.defineProperties,sQe=Object.getOwnPropertyDescriptors,uq=Object.getOwnPropertySymbols,aQe=Object.prototype.hasOwnProperty,oQe=Object.prototype.propertyIsEnumerable,dq=(e,t,n)=>t in e?nQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,RP=(e,t)=>{for(var n in t||(t={}))aQe.call(t,n)&&dq(e,n,t[n]);if(uq)for(var n of uq(t))oQe.call(t,n)&&dq(e,n,t[n]);return e},IP=(e,t)=>rQe(e,sQe(t)),iQe=(e,t,n)=>new Promise((r,s)=>{var a=c=>{try{i(n.next(c))}catch(u){s(u)}},o=c=>{try{i(n.throw(c))}catch(u){s(u)}},i=c=>c.done?r(c.value):Promise.resolve(c.value).then(a,o);i((n=n.apply(e,t)).next())});function lQe(e,t){var n,r;if(e.videoId!==t.videoId)return!0;const s=((n=e.opts)==null?void 0:n.playerVars)||{},a=((r=t.opts)==null?void 0:r.playerVars)||{};return s.start!==a.start||s.end!==a.end}function fq(e={}){return IP(RP({},e),{height:0,width:0,playerVars:IP(RP({},e.playerVars),{autoplay:0,start:0,end:0})})}function cQe(e,t){return e.videoId!==t.videoId||!VYe(fq(e.opts),fq(t.opts))}function uQe(e,t){var n,r,s,a;return e.id!==t.id||e.className!==t.className||((n=e.opts)==null?void 0:n.width)!==((r=t.opts)==null?void 0:r.width)||((s=e.opts)==null?void 0:s.height)!==((a=t.opts)==null?void 0:a.height)||e.iframeClassName!==t.iframeClassName||e.title!==t.title}var dQe={videoId:"",id:"",className:"",iframeClassName:"",style:{},title:"",loading:void 0,opts:{},onReady:()=>{},onError:()=>{},onPlay:()=>{},onPause:()=>{},onEnd:()=>{},onStateChange:()=>{},onPlaybackRateChange:()=>{},onPlaybackQualityChange:()=>{}},fQe={videoId:we.string,id:we.string,className:we.string,iframeClassName:we.string,style:we.object,title:we.string,loading:we.oneOf(["lazy","eager"]),opts:we.objectOf(we.any),onReady:we.func,onError:we.func,onPlay:we.func,onPause:we.func,onEnd:we.func,onStateChange:we.func,onPlaybackRateChange:we.func,onPlaybackQualityChange:we.func},p_=class extends A.Component{constructor(e){super(e),this.destroyPlayerPromise=void 0,this.onPlayerReady=t=>{var n,r;return(r=(n=this.props).onReady)==null?void 0:r.call(n,t)},this.onPlayerError=t=>{var n,r;return(r=(n=this.props).onError)==null?void 0:r.call(n,t)},this.onPlayerStateChange=t=>{var n,r,s,a,o,i,c,u;switch((r=(n=this.props).onStateChange)==null||r.call(n,t),t.data){case p_.PlayerState.ENDED:(a=(s=this.props).onEnd)==null||a.call(s,t);break;case p_.PlayerState.PLAYING:(i=(o=this.props).onPlay)==null||i.call(o,t);break;case p_.PlayerState.PAUSED:(u=(c=this.props).onPause)==null||u.call(c,t);break}},this.onPlayerPlaybackRateChange=t=>{var n,r;return(r=(n=this.props).onPlaybackRateChange)==null?void 0:r.call(n,t)},this.onPlayerPlaybackQualityChange=t=>{var n,r;return(r=(n=this.props).onPlaybackQualityChange)==null?void 0:r.call(n,t)},this.destroyPlayer=()=>this.internalPlayer?(this.destroyPlayerPromise=this.internalPlayer.destroy().then(()=>this.destroyPlayerPromise=void 0),this.destroyPlayerPromise):Promise.resolve(),this.createPlayer=()=>{if(typeof document>"u")return;if(this.destroyPlayerPromise){this.destroyPlayerPromise.then(this.createPlayer);return}const t=IP(RP({},this.props.opts),{videoId:this.props.videoId});this.internalPlayer=tQe(this.container,t),this.internalPlayer.on("ready",this.onPlayerReady),this.internalPlayer.on("error",this.onPlayerError),this.internalPlayer.on("stateChange",this.onPlayerStateChange),this.internalPlayer.on("playbackRateChange",this.onPlayerPlaybackRateChange),this.internalPlayer.on("playbackQualityChange",this.onPlayerPlaybackQualityChange),(this.props.title||this.props.loading)&&this.internalPlayer.getIframe().then(n=>{this.props.title&&n.setAttribute("title",this.props.title),this.props.loading&&n.setAttribute("loading",this.props.loading)})},this.resetPlayer=()=>this.destroyPlayer().then(this.createPlayer),this.updatePlayer=()=>{var t;(t=this.internalPlayer)==null||t.getIframe().then(n=>{this.props.id?n.setAttribute("id",this.props.id):n.removeAttribute("id"),this.props.iframeClassName?n.setAttribute("class",this.props.iframeClassName):n.removeAttribute("class"),this.props.opts&&this.props.opts.width?n.setAttribute("width",this.props.opts.width.toString()):n.removeAttribute("width"),this.props.opts&&this.props.opts.height?n.setAttribute("height",this.props.opts.height.toString()):n.removeAttribute("height"),this.props.title?n.setAttribute("title",this.props.title):n.setAttribute("title","YouTube video player"),this.props.loading?n.setAttribute("loading",this.props.loading):n.removeAttribute("loading")})},this.getInternalPlayer=()=>this.internalPlayer,this.updateVideo=()=>{var t,n,r,s;if(typeof this.props.videoId>"u"||this.props.videoId===null){(t=this.internalPlayer)==null||t.stopVideo();return}let a=!1;const o={videoId:this.props.videoId};if((n=this.props.opts)!=null&&n.playerVars&&(a=this.props.opts.playerVars.autoplay===1,"start"in this.props.opts.playerVars&&(o.startSeconds=this.props.opts.playerVars.start),"end"in this.props.opts.playerVars&&(o.endSeconds=this.props.opts.playerVars.end)),a){(r=this.internalPlayer)==null||r.loadVideoById(o);return}(s=this.internalPlayer)==null||s.cueVideoById(o)},this.refContainer=t=>{this.container=t},this.container=null,this.internalPlayer=null}componentDidMount(){this.createPlayer()}componentDidUpdate(e){return iQe(this,null,function*(){uQe(e,this.props)&&this.updatePlayer(),cQe(e,this.props)&&(yield this.resetPlayer()),lQe(e,this.props)&&this.updateVideo()})}componentWillUnmount(){this.destroyPlayer()}render(){return A.createElement("div",{className:this.props.className,style:this.props.style},A.createElement("div",{id:this.props.id,className:this.props.iframeClassName,ref:this.refContainer}))}},PC=p_;PC.propTypes=fQe;PC.defaultProps=dQe;PC.PlayerState={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5};var mq=PC;const hq={fadeIn:{opacity:1},fadeOut:{opacity:0}},mQe={width:"100%",height:"100%",playerVars:{autoplay:1,color:"white",playsinline:1}},Z0=A.memo(e=>{const{isOpen:t,name:n,setisOpen:r,url:s}=e,a=s?Cp(s):void 0,o=f.useRef(void 0),[i,c]=f.useState(!1),u=f.useCallback(h=>{o.current=h.target,c(!0)},[o]),d=f.useCallback(h=>{if(o.current)switch(h.key){case" ":{o.current.getPlayerState()===mq.PlayerState.PLAYING?o.current.pauseVideo():o.current.playVideo();break}case"ArrowRight":{o.current.seekTo(o.current.getCurrentTime()+5,!0);break}case"ArrowLeft":{o.current.seekTo(o.current.getCurrentTime()-5,!0);break}}},[o]);f.useEffect(()=>(t?window.addEventListener("keydown",d):window.removeEventListener("keydown",d),()=>{window.removeEventListener("keydown",d)}),[d,t]);const m=f.useCallback(h=>{r(h)},[r]);return a?l.jsx(hL,{open:t,onOpenChange:m,children:l.jsx(ice,{className:"z-10",asChild:!0,children:l.jsxs(_e.div,{className:"bg-backdrop/65 fixed inset-0 flex items-center justify-center backdrop-blur-md",initial:"fadeOut",animate:"fadeIn",exit:"fadeOut",variants:hq,transition:{duration:.2},children:[l.jsx(SDe,{asChild:!0,children:l.jsx(ye,{extraCSS:"!fixed top-md right-md shadow-sm",icon:Xt,pill:!0,size:"small",variant:"common"})}),l.jsxs(aC,{className:"grid outline-none","aria-describedby":void 0,children:[l.jsx(V0,{children:l.jsx(oC,{children:n})}),l.jsxs(st,{children:[!i&&l.jsx(_e.div,{className:"grid place-items-center [grid-area:1/-1]",initial:"fadeOut",animate:"fadeIn",exit:"fadeOut",transition:{duration:.2},variants:hq,children:l.jsx(Ns,{size:24})},"youtube-player-loading"),l.jsx(_e.div,{className:B("aspect-video overflow-hidden rounded-2xl shadow-lg [grid-area:1/-1] *:size-full","w-[calc(100dvw-(2*var(--size-md)))] sm:w-[75vw]"),initial:{opacity:0},animate:{opacity:i?1:0},transition:{duration:.2},children:l.jsx(mq,{onReady:u,opts:mQe,title:n,videoId:a})},"youtube-player-content")]})]})]},"youtube-player-overlay")})}):null});Z0.displayName="YoutubeVideoPlayer";const I9=A.memo(({result:e,idx:t,isSelected:n,testId:r,additionalMetadata:s,isTrendingLayout:a=!1,trackEvent:o,downloadCitation:i,getImageUrl:c,variant:u,isSidecar:d,onClick:m,useLightBoxModal:h=!0})=>{const p=e.meta_data?.file_uuid?"fileRepositoryFile":e.is_attachment?"fileAttachment":"sourceCard";f.useEffect(()=>{const P=setTimeout(()=>o?.("source card viewed",{citation_url:e.url,position:t,title:e.name,source:p}),100);return()=>clearTimeout(P)},[o,e.name,e.url,t,p]);const g=e.url,[y,v]=f.useState(()=>!e.is_memory&&E9(e.url)?e.url:null),[x,b]=f.useState(!1),_=f.useMemo(()=>g&&!d&&Cp(g),[g,d]),[w,S]=f.useState(!1),C=gfe(e),E=co(e.url),M=!_&&!e.is_attachment&&!E,T=a&&e.meta_data?.client==="trending",I=f.useMemo(()=>T?l.jsx(Ofe,{result:e,authors:e.meta_data?.authors,imageURL:e.meta_data?.images?.[0]}):E&&y?l.jsx(Pfe,{result:e,imageURL:y,useLightBoxModal:h}):E&&!y?l.jsx(Wi,{blockCount:1,size:"large"}):l.jsx(Afe,{result:e,variant:u,additionalMetadata:s,isSelected:n}),[T,E,y,e,h,u,s,n]),j=f.useCallback((P,R)=>{b(R),v(P)},[]),N=f.useRef(null);return f.useEffect(()=>{const P=new IntersectionObserver(k=>{k.forEach(O=>{O.isIntersecting&&E&&y===null&&!x&&c?.(e,j)})},{threshold:.1}),R=N.current;return R&&E&&P.observe(R),()=>{R&&E&&P.unobserve(R)}},[N,g,c,e,y,j,x,E]),l.jsxs(N9,{result:e,trackEvent:o,children:[l.jsx("div",{ref:N,onClick:P=>{const R=typeof e.meta_data?.quoteBeforeContext=="string"?e.meta_data?.quoteBeforeContext:"",k=typeof e.meta_data?.quoteEmphasisText=="string"?e.meta_data?.quoteEmphasisText:"",O=typeof e.meta_data?.quoteAfterContext=="string"?e.meta_data?.quoteAfterContext:"",L=R.length>0||k.length>0||O.length>0;if(_&&!w&&S(!0),C&&typeof window<"u"){const F=window.open(g,"_blank");F&&F.focus()}else i&&!E?(P.preventDefault(),i(e)):m?.(P);o?.("click citation",{source:p,citation_url:g}),L&&o?.("click check sources citation",{source:p,citation_url:g,quoteBeforeContext:R,quoteEmphasisText:k,quoteAfterContext:O})},className:B("group relative flex w-full items-stretch",{"h-full":u==="grid","cursor-pointer":!!i||!!_||!!m}),"data-test-id":r,children:l.jsx(z,{variant:"offset",bgHover:M||_?"offsetPlus":void 0,className:B("flex w-full rounded-lg",{"bg-super/10 ring-super/80 hover:!bg-super/10 dark:bg-super/20 dark:ring-super/80 dark:hover:!bg-super/20 ring-1":n}),children:I},e.name)}),_&&g&&e.name&&l.jsx(Z0,{isOpen:w,name:e.name,url:g,setisOpen:S})]})});I9.displayName="CitationCard";const hQe=ge(async()=>{const{MarkSpinner:e}=await oe(async()=>{const{MarkSpinner:t}=await Promise.resolve().then(()=>oMe);return{MarkSpinner:t}},void 0);return{default:e}}),Lfe=A.memo(({entryUUID:e,frontendContextUUID:t,contextUUID:n,webResults:r,isOpen:s,onClose:a,extendedBeforeContext:o,beforeContext:i,selectedText:c,afterContext:u,state:d})=>{const{$t:m}=X(),{isMobileStyle:h}=Ce(),{trackEvent:p}=Te(),g=f.useCallback((b,_)=>{p(b,{entryUUID:e,frontendContextUUID:t,contextUUID:n,selectedTextExtendedBeforeContext:o,selectedTextBeforeContext:i,selectedText:c,selectedTextAfterContext:u,..._})},[e,t,n,o,i,c,u,p]),y=r?.length??0,v=d==="completed"?y===0?m({defaultMessage:"No sources",id:"tN3HZvczgp"}):m({defaultMessage:"{sources, plural, one {# source} other {# sources}}",id:"oWRBjE1HK2"},{sources:y}):m(d==="loading"?{defaultMessage:"Checking...",id:"1SvspNS1us"}:{defaultMessage:"Error",id:"KN7zKn8z4F"}),x=f.useMemo(()=>l.jsxs("div",{className:"gap-sm md:gap-md flex items-center",children:[l.jsx(hQe,{size:32,shouldAnimate:d==="loading"}),l.jsx(D,{variant:"page-title",className:B("mr-lg line-clamp-1 md:line-clamp-2"),children:v})]}),[d,v]);return l.jsxs(rn,{isOpen:s,variant:h?"bottom-left-sheet":"side-sheet",onClose:a,titleContent:x,children:[l.jsxs(D,{children:[l.jsx("span",{children:i}),l.jsx("span",{className:"bg-super/30 font-bold",children:c}),l.jsx("span",{children:u})]}),l.jsx("hr",{className:"border-subtlest my-4 w-full border-t"}),l.jsx(z,{className:"gap-md flex h-full flex-col items-start",children:r?.map((b,_)=>l.jsx("div",{className:"gap-sm flex w-full min-w-0 flex-row-reverse",children:l.jsx(I9,{result:b,idx:_,isSelected:!1,variant:"modal",trackEvent:g})},_))})]})});Lfe.displayName="CheckSourcesModal";const ABt=3,pQe=120,gQe=1.5,PBt=2,RBt=4;function Dfe(e){return"article_info"in e}const IBt=(e,t)=>({backend_uuid:"",context_uuid:"",frontend_context_uuid:"",knowledge_cards:void 0,widget_data:void 0,query_str:e,status:dr.STAGED.toLowerCase(),uuid:t,article_info:{title:e,summary:"",has_changed_title:!1,layout:"text",format:"paragraph",length:"concise",suggested_sections:[],user_selected_media_items:[],audience:"anyone",read_time:0,hero_offset:-1,emphasize_sources:!1,is_live:!1,is_auto_generated:!1},prompt_source:"page_suggestion",final:!1,mode:Pm.ARTICLE.toLowerCase(),sources:{sources:[]},should_index:!1,updated_datetime:void 0,thread_url_slug:void 0,expiry_time:null,thread_access:0,privacy_state:mh.NONE}),jBt=e=>e?e.image_width&&e.image_height?e.image_width<pQe?!1:e.image_width>=gQe*e.image_height:!0:!1,OBt=(e,t,n,r)=>{const s=[...e],a=t.find(o=>o.image===n);return a&&r<s.length&&s.splice(r,1,a),s},LBt=(e,t,n)=>{const r=[...e],s=r.findIndex(a=>a.image===t);if(s!==-1&&n<r.length){const a=r[n];r[n]=r[s],r[s]=a}return r};var RC="Checkbox",[yQe,DBt]=Ga(RC),[vQe,j9]=yQe(RC);function xQe(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:s,disabled:a,form:o,name:i,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:m}=e,[h,p]=ti({prop:n,defaultProp:s??!1,onChange:c,caller:RC}),[g,y]=f.useState(null),[v,x]=f.useState(null),b=f.useRef(!1),_=g?!!o||!!g.closest("form"):!0,w={checked:h,disabled:a,setChecked:p,control:g,setControl:y,name:i,form:o,value:d,hasConsumerStoppedPropagationRef:b,required:u,defaultChecked:eu(s)?!1:s,isFormControl:_,bubbleInput:v,setBubbleInput:x};return l.jsx(vQe,{scope:t,...w,children:bQe(m)?m(w):r})}var Ffe="CheckboxTrigger",Ufe=f.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},s)=>{const{control:a,value:o,disabled:i,checked:c,required:u,setControl:d,setChecked:m,hasConsumerStoppedPropagationRef:h,isFormControl:p,bubbleInput:g}=j9(Ffe,e),y=kn(s,d),v=f.useRef(c);return f.useEffect(()=>{const x=a?.form;if(x){const b=()=>m(v.current);return x.addEventListener("reset",b),()=>x.removeEventListener("reset",b)}},[a,m]),l.jsx(on.button,{type:"button",role:"checkbox","aria-checked":eu(c)?"mixed":c,"aria-required":u,"data-state":zfe(c),"data-disabled":i?"":void 0,disabled:i,value:o,...r,ref:y,onKeyDown:jt(t,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:jt(n,x=>{m(b=>eu(b)?!0:!b),g&&p&&(h.current=x.isPropagationStopped(),h.current||x.stopPropagation())})})});Ufe.displayName=Ffe;var Bfe=f.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:a,required:o,disabled:i,value:c,onCheckedChange:u,form:d,...m}=e;return l.jsx(xQe,{__scopeCheckbox:n,checked:s,defaultChecked:a,disabled:i,required:o,onCheckedChange:u,name:r,form:d,value:c,internal_do_not_use_render:({isFormControl:h})=>l.jsxs(l.Fragment,{children:[l.jsx(Ufe,{...m,ref:t,__scopeCheckbox:n}),h&&l.jsx(Hfe,{__scopeCheckbox:n})]})})});Bfe.displayName=RC;var Vfe="CheckboxIndicator",$fe=f.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...s}=e,a=j9(Vfe,n);return l.jsx(Rs,{present:r||eu(a.checked)||a.checked===!0,children:l.jsx(on.span,{"data-state":zfe(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});$fe.displayName=Vfe;var Wfe="CheckboxBubbleInput",Hfe=f.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:a,defaultChecked:o,required:i,disabled:c,name:u,value:d,form:m,bubbleInput:h,setBubbleInput:p}=j9(Wfe,e),g=kn(n,p),y=n9(a),v=NS(r);f.useEffect(()=>{const b=h;if(!b)return;const _=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(_,"checked").set,C=!s.current;if(y!==a&&S){const E=new Event("click",{bubbles:C});b.indeterminate=eu(a),S.call(b,eu(a)?!1:a),b.dispatchEvent(E)}},[h,y,a,s]);const x=f.useRef(eu(a)?!1:a);return l.jsx(on.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??x.current,required:i,disabled:c,name:u,value:d,form:m,...t,tabIndex:-1,ref:g,style:{...t.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Hfe.displayName=Wfe;function bQe(e){return typeof e=="function"}function eu(e){return e==="indeterminate"}function zfe(e){return eu(e)?"indeterminate":e?"checked":"unchecked"}const O9=A.memo(({checked:e,toggleChecked:t,className:n="",variant:r="default",unselectedCheckboxClassName:s,...a})=>l.jsx(Bfe,{className:B("inline-flex cursor-pointer items-center justify-center duration-150",{"size-[24px]":r==="large","size-[18px]":r==="default"},n),checked:e,onCheckedChange:t,...a,children:l.jsx(z,{variant:e?"super":"background",noBorder:!0,className:B("border-subtle inline-flex size-full items-center justify-center rounded border",{"!border-super bg-super":e},!e&&s),children:l.jsx($fe,{children:l.jsx(st,{children:e&&l.jsx(_e.div,{initial:{opacity:0,scale:.6},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.6},transition:{type:"spring",bounce:.2,duration:.2},children:l.jsx(be,{icon:Ea,size:"sm",className:"text-inverse"})})})})})})),Gfe=A.memo(({onSelect:e,isSelected:t,result:n,idx:r})=>{const s=o=>{e?.(o)},{trackEvent:a}=Te();return l.jsxs("div",{className:"gap-sm flex w-full flex-row-reverse",children:[l.jsx("div",{className:"w-full min-w-0",children:l.jsx(I9,{result:n,idx:r,isSelected:t,variant:"modal",trackEvent:a})}),e&&l.jsx("div",{className:"mt-[6px] shrink-0",children:l.jsx(O9,{checked:t,toggleChecked:s.bind(null,n.url)})})]})});Gfe.displayName="ManageCitationRow";const Ep=()=>{const e=Ot(),t=tn(),{firstResult:{backend_uuid:n,context_uuid:r}={}}=zt(),s=f.useCallback((a,o)=>{Uo({name:a,data:{entryUUID:n,threadUUID:r,...o,isPerplexityBrowser:t},session:e??void 0})},[n,r,t,e]);return f.useMemo(()=>({trackEvent:s}),[s])},Dy=/<q>(.*?)<\/q>/s,pq=(e,t)=>{if(!e||!t)return e;const n=e.trim(),r=n[n.length-1];return r&&!["!","?",".",":",";"].includes(r)?`${n}. ${t}`:`${n} ${t}`};function nc(e,t){if(!e)return{quote:null,actualQuery:null};if(!Dy.test(e)){const i=t?.join(" ").trim();return{quote:null,actualQuery:i?pq(e,i):e}}const s=e.match(Dy)?.[1]||null;let a=e.replace(Dy,"").trim();const o=t?.join(" ").trim();return o&&(a=pq(a,o)),{quote:s,actualQuery:a}}function _Qe(e,t){const n=t.trim();return n?Dy.test(e)?e.replace(Dy,`<q>${n}</q>`):e.length===0?n:`<q>${n}</q> ${e}`:e}const qfe=A.memo(({webResults:e,isOpen:t,submit:n,onClose:r,entry:s})=>{const{$t:a}=X(),{isMobileStyle:o}=Ce(),[i,c]=f.useState([]),{trackEvent:u}=Ep(),d=b=>{c(_=>_.includes(b)?_.filter(w=>w!==b):_.concat(b))},m=f.useCallback(()=>{c([]),r()},[c,r]),h=f.useCallback(b=>{u("click apply curation",{toDelete:b,entryUUID:s?.backend_uuid??void 0}),n?.(b)},[u,s,n]),p=f.useCallback(()=>{i.length>0&&h([...i]),m()},[i,m,h]),g=f.useMemo(()=>i.length>0?[{text:i.length===0?a({defaultMessage:"No sources",id:"tN3HZvczgp"}):a({defaultMessage:"{sources, plural, one {Remove # source} other {Remove # sources}}",id:"aRfiMe0V3R"},{sources:i.length}),disabled:i.length===0,onClick:p}]:[],[i.length,a,p]),y=s?.query_str??"";let v=y?nc(y).actualQuery:"";s&&Dfe(s)&&s.article_info?.title&&(v=s.article_info.title);const x=e?.length??0;return l.jsx(rn,{actionList:g,title:x===0?a({defaultMessage:"No sources",id:"tN3HZvczgp"}):a({defaultMessage:"{sources, plural, one {# source} other {# sources}}",id:"oWRBjE1HK2"},{sources:x}),subtitle:v??void 0,isOpen:t,variant:o?"bottom-left-sheet":"side-sheet",onClose:m,icon:nh,children:l.jsx(z,{className:"gap-md flex h-full flex-col items-start",children:e?.map((b,_)=>l.jsx(Gfe,{onSelect:s&&n?d:void 0,isSelected:i.includes(b.url),idx:_,result:b},b.url))})})});qfe.displayName="CitationListModal";const ms=()=>{const[e,t]=A.useState(!1);return A.useEffect(()=>{t(!0)},[]),e},wQe=({children:e,initial:t=!1,mode:n="wait",className:r,transition:s,supportZeroHeight:a=!0,...o})=>{const[i,{height:c}]=tc(),u=ms(),d=a||c>0?c:"auto";return l.jsx(_e.div,{animate:{height:u?d:"auto"},className:r,transition:s,...o,children:l.jsx("div",{ref:i,children:l.jsx(st,{mode:n,initial:t,children:e})})})},Jn=Va(.16,1,.3,1),FBt=Va(.7,0,.84,0),SQe=f.forwardRef(({children:e,initial:t={opacity:0},animate:n={opacity:1},exit:r,transition:s,className:a,style:o},i)=>l.jsx(_e.div,{initial:t,animate:n,exit:r??t,transition:s,ref:i,className:a,style:o,children:e})),_c=wQe,tl=SQe,Oi={outOfDate:J({defaultMessage:"Out of date",id:"osuyeDna3D"}),inaccurate:J({defaultMessage:"Inaccurate",id:"nzRZzFiqUd"}),irrelevant:J({defaultMessage:"Irrelevant",id:"yi63oZJMHr"}),upToDate:J({defaultMessage:"Up to date",id:"aOfyGCCmT0"}),accurate:J({defaultMessage:"Accurate",id:"wrxp13nnhA"}),relevant:J({defaultMessage:"Relevant",id:"XpZsjM22T8"}),successToast:J({defaultMessage:"Thank you for your detailed feedback!",id:"ZrHT928df5"}),positivePrompt:J({defaultMessage:"What did you like about this memory? (optional)",id:"xNH2PHiuYB"}),negativePrompt:J({defaultMessage:"What didn't you like about this memory? (optional)",id:"gEOv/lEKfP"}),placeholder:J({defaultMessage:"Add specific details",id:"HY/Q6ifj24"})},CQe={out_of_date:Oi.outOfDate,inaccurate:Oi.inaccurate,irrelevant:Oi.irrelevant},EQe={up_to_date:Oi.upToDate,accurate:Oi.accurate,relevant:Oi.relevant},Kfe=A.memo(({type:e,message:t,onFeedbackClick:n})=>{const s=X().formatMessage,a=f.useCallback(()=>{n(e)},[e,n]);return l.jsx(ye,{size:"small",variant:"common",text:s(t),onClick:a,extraCSS:"w-full justify-start text-left"})});Kfe.displayName="FeedbackOption";const Yfe=A.memo(({isPositive:e,onFeedbackClick:t,onFreeformVisible:n})=>{const r=e?EQe:CQe,s=f.useMemo(()=>Object.entries(r).map(([a,o])=>l.jsx(Kfe,{type:a,message:o,onFeedbackClick:t},a)),[r,t]);return l.jsxs("div",{className:"gap-sm flex flex-col",children:[s,l.jsx(ye,{size:"small",variant:"common",text:"Other...",onClick:n,extraCSS:"w-full justify-start text-left"})]})});Yfe.displayName="FeedbackOptions";const Qfe=A.memo(({onSubmit:e,feedbackState:t,setFeedbackState:n,onDismiss:r,isPositive:s})=>{const{openToast:a}=On(),i=X().formatMessage,{isMobileStyle:c,isMobileUserAgent:u}=Ce(),[d,m]=f.useState(!1),h=f.useCallback(()=>{a(i(Oi.successToast),"success",2)},[a,i]),p=f.useCallback(S=>{h(),e(S)},[h,e]),g=f.useCallback(()=>{t&&p(t)},[t,p]),y=f.useCallback(S=>{const C={type:S};n(C),p(C)},[n,p]),v=f.useCallback(()=>{m(!1)},[m]),x=f.useCallback(()=>{m(!0)},[m]),b=f.useCallback(S=>{n({type:"comment",comment:S})},[n]),_=f.useCallback(S=>{oo.isEnterKeyWithoutShift(S)&&g()},[g]),w=f.useMemo(()=>[{type:"button",buttonProps:{variant:"primary",size:"small",icon:fre,onClick:g,disabled:!t?.comment,extraCSS:"aspect-square min-h-md h-md w-md",pill:!0}}],[g,t?.comment]);return l.jsx("div",{className:"mt-lg animate-in fade-in w-full duration-500",children:l.jsxs(z,{className:"gap-sm p-md pt-sm relative flex w-full flex-col rounded-md border",children:[l.jsx("div",{className:B("absolute bottom-full flex size-0 items-end",s?"left-2":"left-10"),children:l.jsx(z,{variant:"background",className:"size-3 shrink-0 origin-bottom-left rotate-45 border border-b-0 border-r-0"})}),l.jsxs("div",{className:B("ease-outExpo flex items-center pr-8 duration-150",{"pl-4":d}),children:[l.jsx(ke,{size:"tiny",onClick:v,pill:!0,icon:dS,extraCSS:B("!absolute duration-150",{"opacity-0 pointer-events-none":!d,"top-xs left-xs":d})}),l.jsx(D,{variant:"small",color:"light",children:i(s?Oi.positivePrompt:Oi.negativePrompt)})]}),l.jsx(_c,{mode:"popLayout",transition:{duration:.2,ease:Jn},children:l.jsx(tl,{initial:{opacity:0,x:d?10:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:d?-10:10},transition:{duration:.2,ease:Jn},children:d?l.jsx("div",{className:"gap-x-sm flex items-end",children:l.jsx("div",{className:"flex-1",children:l.jsx(el,{className:"pr-md w-full",placeholder:i(Oi.placeholder),value:t?.comment||"",minRows:3,isOptional:!0,onChange:b,onKeyDown:_,autoFocus:!0,isMobileStyle:c,isMobileUserAgent:u,rightItems:w})})}):l.jsx(Yfe,{isPositive:s,onFeedbackClick:y,onFreeformVisible:x})},d?"visible":"hidden")}),l.jsx(ke,{size:"tiny",onClick:r,pill:!0,icon:Xt,extraCSS:"!absolute top-xs right-xs"})]})})});Qfe.displayName="MemoryFeedbackInput";const MQe=20,TQe=async({queryParams:e,headers:t={},reason:n})=>{const r="getMemories";try{const s=await ne.GET("/rest/memories/list",n,{params:{query:{limit:e.limit,offset:e.offset,query:e.query},timeoutMs:nn.MEDIUM},headers:t});return s.data?{memories:s.data.memories,totalCount:s.data.total_memory_count}:{memories:[],totalCount:0}}catch(s){return ee.log(`Error in ${r}:`,s),{memories:[],totalCount:0}}},kQe=(e,t)=>{const n=t.reduce((r,s)=>r+s.memories.length,0);if(n<e.totalCount)return n},UBt=({initialPageParam:e=0,searchQuery:t,reason:n})=>fc({queryKey:LO(t),queryFn:async({pageParam:r})=>TQe({queryParams:{limit:MQe,offset:r??0,query:t},reason:n}),getNextPageParam:kQe,initialPageParam:e,refetchOnMount:"always",placeholderData:r=>r}),NQe=async({memoryKey:e,reason:t})=>{try{return(await ne.DELETE("/rest/memories/delete",t,{params:{query:{memory_key:e}}})).data}catch(n){ee.log("Error in deleteMemory:",n);return}},AQe=({reason:e})=>{const t=gt();return Mt({mutationFn:n=>NQe({memoryKey:n,reason:e}),onMutate:async n=>{await t.cancelQueries({queryKey:["memories"]});const r=t.getQueryData(["memories"]);try{t.setQueryData(["memories"],s=>{if(!s)return s;const a=s.pages.map(o=>({totalCount:o.totalCount-1,memories:o.memories.filter(i=>i.memory_key!==n)}));return{...s,pages:a}})}catch(s){ee.log(`Error in onMutate deleteMemories (${LO()}):`,s)}return{previousData:r}},onError:(n,r,s)=>{s?.previousData&&t.setQueryData(["memories"],s.previousData)},onSettled:()=>{t.invalidateQueries({queryKey:["memories"]})}})},PQe=async({reason:e})=>{try{return(await ne.DELETE("/rest/memories/delete-all",e)).data}catch(t){ee.log("Error in deleteAllMemories:",t);return}},RQe=()=>{const e=gt();return Mt({mutationFn:PQe,onMutate:async()=>{await e.cancelQueries({queryKey:["memories"]});const t=e.getQueryData(["memories"]);try{e.setQueryData(["memories"],()=>({pages:[{memories:[],totalCount:0}],pageParams:[0]}))}catch(n){ee.log(`Error in onMutate deleteAllMemories (${LO()}):`,n)}return{previousData:t}},onError:(t,n,r)=>{r?.previousData&&e.setQueryData(["memories"],r.previousData)},onSuccess:()=>{e.invalidateQueries({queryKey:["memories"]})}})},IQe=async({memoryKey:e,shouldForget:t,feedback:n,feedbackEntryUuid:r,reason:s})=>{try{return(await ne.POST("/rest/memories/toggle_memory_feedback",s,{params:{query:{memory_key:e,should_forget:t===null?void 0:t,feedback:n,feedback_entry_uuid:r}}})).data}catch(a){ee.log("Error in forgetMemory:",a);return}},jQe=({memoryKey:e,reason:t})=>{const n=gt();return Mt({mutationFn:({shouldForget:r,feedback:s,feedbackEntryUuid:a})=>IQe({memoryKey:e,shouldForget:r,feedback:s,feedbackEntryUuid:a,reason:t}),onMutate:async({shouldForget:r})=>{await n.cancelQueries({queryKey:Zf(e)});const s=n.getQueryData(Zf(e));return n.setQueryData(Zf(e),r),{previousFeedback:s}},onError:(r,s,a)=>{a?.previousFeedback!==void 0&&n.setQueryData(Zf(e),a.previousFeedback)},onSuccess:()=>{n.invalidateQueries({queryKey:Zf(e)})}})},OQe=async({entryUuid:e,shouldForget:t,feedback:n,feedbackEntryUuid:r,reason:s})=>{try{return(await ne.POST("/rest/memories/toggle_entry_feedback",s,{params:{query:{entry_uuid:e,should_forget:t===null?void 0:t,feedback:n,feedback_entry_uuid:r}}})).data}catch(a){ee.log("Error in forgetEntry:",a);return}},LQe=({entryUuid:e,reason:t})=>{const n=gt();return Mt({mutationFn:({shouldForget:r,feedback:s,feedbackEntryUuid:a})=>OQe({entryUuid:e,shouldForget:r,feedback:s,feedbackEntryUuid:a,reason:t}),onMutate:async({shouldForget:r})=>{await n.cancelQueries({queryKey:Jf(e)});const s=n.getQueryData(Jf(e));return n.setQueryData(Jf(e),r),{previousFeedback:s}},onError:(r,s,a)=>{a?.previousFeedback!==void 0&&n.setQueryData(Jf(e),a.previousFeedback)},onSuccess:()=>{n.invalidateQueries({queryKey:Jf(e)})}})},DQe=async({memoryKey:e,reason:t})=>{try{return(await ne.GET("/rest/memories/get",t,{params:{query:{memory_key:e}}})).data?.memories?.[0]?.is_thumbs_down}catch(n){ee.log("Error in getMemory:",n);return}},FQe=({memoryKey:e,enabled:t,reason:n})=>Ke({queryKey:Zf(e??""),queryFn:()=>e?DQe({memoryKey:e,reason:n}):null,enabled:!!e&&t}),UQe=async({entryUuid:e,reason:t})=>{try{return(await ne.GET("/rest/memories/get_entries",t,{params:{query:{entry_uuid:e}}})).data?.entries?.[0]?.is_thumbs_down}catch(n){ee.log("Error in getEntry:",n);return}},BQe=({entryUuid:e,enabled:t,reason:n})=>Ke({queryKey:Jf(e??""),queryFn:()=>e?UQe({entryUuid:e,reason:n}):null,enabled:!!e&&t}),Xfe=e=>{if(!e)return;const t=e.split("/").filter(Boolean);return t.length>0?t[t.length-1]:void 0},Zfe=e=>{const t=e.is_memory?"memory":"conversation_history",n=e.is_memory?e.url:void 0,r=e.is_conversation_history?Xfe(e.url):void 0;return{snippet:e.snippet,url:e.url??"",title:e.name,type:t,memoryKey:n,entryUuid:r,timestamp:e.timestamp??""}},Jfe=A.memo(({isOpen:e,onClose:t,snippet:n,type:r,url:s,memoryKey:a,entryUuid:o,title:i,timestamp:c})=>{const{formatDate:u}=X(),d=Is(),m=r==="conversation_history",h=r==="memory",{trackEvent:p}=Te(),{openStackedModal:g}=_t(),y=f.useCallback(()=>{p("navigated to manage memory",{memory_key:a}),g("memoryListModal",{isMemoryEnabled:!0})},[a,p,g]),v=f.useMemo(()=>l.jsx(D,{variant:"small",children:l.jsx(he,{defaultMessage:"Manage",id:"0AzlrbMWV9"})}),[]),x=f.useMemo(()=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(be,{icon:m?pf:Gl}),l.jsx(D,{variant:"baseSemi",children:m?l.jsx(he,{defaultMessage:"Library",id:"StcK672jB9"}):l.jsx(he,{defaultMessage:"Memory",id:"dVx3yznM2C"})})]}),[m]);return l.jsxs(rn,{variant:d?"bottom-sheet":"side-sheet",isOpen:e,onClose:t,modalClassname:"md:!max-w-[400px] md:!min-w-[400px]",modalContentClassname:"justify-between",titleContent:x,children:[l.jsxs(z,{className:"flex size-full flex-col items-start",children:[i&&c&&l.jsxs(l.Fragment,{children:[l.jsx(D,{variant:"baseSemi",children:i}),l.jsx(D,{variant:"tinyRegular",color:"light",className:"pb-sm",children:u(c,{dateStyle:"long"})})]}),l.jsxs("div",{className:"inline",children:[l.jsx(D,{variant:"small",className:"inline",children:n}),l.jsx(D,{variant:"smallBold",className:"ml-1 inline",color:"super",children:m&&l.jsx(at,{href:s,target:"_blank",rel:"noopener",className:"whitespace-nowrap",children:l.jsx(he,{defaultMessage:"See more",id:"yoLwRWw99S"})})})]}),l.jsx(eme,{entryUuid:o??"",memoryKey:a??"",type:r})]}),h&&l.jsxs(z,{className:"flex w-full items-center justify-center gap-1",children:[l.jsx(D,{variant:"small",className:"inline",color:"light",children:l.jsx(he,{defaultMessage:"See all your memories.",id:"h0JAuR900y"})}),l.jsx(ke,{onClick:y,size:"small",variant:"common",noPadding:!0,text:v})]})]})});Jfe.displayName="MemorySearchHistoryModal";const eme=A.memo(({entryUuid:e,memoryKey:t,type:n})=>{const r="feedback-container",{$t:s}=X(),a=f.useMemo(()=>{if(typeof window>"u")return;const M=Xfe(window.location.pathname);if(M)return M.split("-").pop()},[]),{mutate:o}=LQe({entryUuid:e??"",reason:r}),{mutate:i}=jQe({memoryKey:t??"",reason:r}),{trackEvent:c}=Te(),{data:u}=FQe({memoryKey:t,enabled:!!t&&n==="memory",reason:r}),{data:d}=BQe({entryUuid:e??"",enabled:!!e&&n==="conversation_history",reason:r}),[m,h]=f.useState(!1),[p,g]=f.useState(!1),[y,v]=f.useState(null),x=f.useMemo(()=>n==="memory"?u:d,[n,u,d]),b=f.useCallback((M,T)=>{n==="conversation_history"&&e&&o({shouldForget:M,feedback:T,feedbackEntryUuid:a}),n==="memory"&&t&&i({shouldForget:M,feedback:T,feedbackEntryUuid:a})},[n,e,t,o,i,a]),_=f.useCallback(M=>{c("memory search history feedback",{type:n,isHelpful:!M,...n==="conversation_history"&&{entry_uuid:e},...n==="memory"&&{memory_key:t}}),b(M),g(!M),h(!0)},[n,e,t,c,b]),w=f.useCallback(()=>{if(x===!1){b(null),h(!1);return}_(!1)},[x,b,_]),S=f.useCallback(()=>{if(x===!0){b(null),h(!1);return}_(!0)},[x,b,_]),C=f.useCallback(M=>{const T=M.type==="comment"?M.comment:M.type;b(!p,T),c("memory search history feedback",{type:n,isHelpful:p,...n==="conversation_history"&&{entry_uuid:e},...n==="memory"&&{memory_key:t}}),h(!1),v(null)},[n,e,t,c,p,b]),E=f.useCallback(()=>{h(!1),v(null)},[]);return l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx(ke,{size:"small",icon:$Qe(x??null),onClick:w,toolTip:s({defaultMessage:"Helpful",id:"5vwKkgYwrE"}),pill:!0}),l.jsx(ke,{size:"small",icon:VQe(x??null),onClick:S,toolTip:s({defaultMessage:"Not helpful",id:"04tuTF23S7"}),pill:!0})]}),x===!0&&l.jsx(D,{variant:"tinyRegular",color:"light",children:l.jsx(he,{defaultMessage:"This {type} will not be referenced in future searches.",id:"167AKZjMm1",values:{type:n==="memory"?"memory":"entry"}})}),m&&l.jsx(Qfe,{onSubmit:C,feedbackState:y,setFeedbackState:v,onDismiss:E,isPositive:p})]})});eme.displayName="FeedbackContainer";const VQe=e=>e===null?$_:e===!0?R4e:$_,$Qe=e=>e===null?F6:e===!1?I4e:F6;function WQe({isOpen:e,onContinue:t,onClose:n}){return l.jsx(rn,{isOpen:e,onClose:n,title:"",variant:"small",children:l.jsxs(z,{className:"mx-auto w-full rounded-2xl px-4 py-0",children:[l.jsx(D,{variant:"section-title",className:"mb-2",children:l.jsx(he,{defaultMessage:"We need more access to help with your Google calendar and email",id:"qfQz160ySM"})}),l.jsx(D,{variant:"small",color:"light",className:"mb-6",children:l.jsx(he,{defaultMessage:"These permissions let us help you schedule meetings, find important messages, manage your inbox, and provide personalized assistance based on your real schedule and communication needs.",id:"yN/31P429t"})}),l.jsx(D,{variant:"small",color:"light",className:"mb-6",children:l.jsx(he,{defaultMessage:"Important: Please select <b>all permission boxes</b> on the next screen to enable these features.",id:"sr/jqAmxMK",values:{b:r=>l.jsx("span",{className:"font-semibold",children:r})}})}),l.jsx(ye,{text:l.jsx(he,{defaultMessage:"Grant access to calendar and email",id:"SLN8GewG3+"}),variant:"primary",size:"regular",onClick:t,extraCSS:"w-full rounded-xl mb-4"})]})})}const HQe=({isOpen:e,onClose:t})=>{const n="delete-all-memories-modal",r=X(),{mutate:s}=RQe(),{trackEvent:a}=Te(),o=f.useMemo(()=>[{text:r.formatMessage({defaultMessage:"Cancel",id:"47FYwba+bI"}),onClick:t,variant:"common"},{text:r.formatMessage({defaultMessage:"Delete",id:"K3r6DQW7h+"}),onClick:()=>{a("cleared all memories",{}),s({reason:n}),t()},variant:"rejected"}],[s,r,t,a]);return l.jsx(rn,{isOpen:e,onClose:t,actionList:o,titleTextVariant:"smallBold",renderCloseButton:!1,modalClassname:"!min-w-0 max-w-[324px] p-0",headerClassname:"pt-6 px-6  md:px-6 border-b-0 !pb-0",modalContentClassname:"pt-0",footerClassname:"border-t-0 pt-2 px-6 !pb-6 md:pt-2 md:px-6 md:pb-6",title:r.formatMessage({defaultMessage:"Delete all memories",id:"wViT4HVZZG"}),children:l.jsx("div",{className:"w-full justify-start px-2 py-1",children:l.jsx(D,{variant:"tinyRegular",children:r.formatMessage({defaultMessage:"Are you sure you want to delete all of your memories? Memories cannot be recovered once deleted.",id:"2xMxdqIgTQ"})})})})},zQe=({isOpen:e,onClose:t,memoryId:n})=>{const r="delete-memory-modal",s=X(),{mutate:a}=AQe({reason:r}),{trackEvent:o}=Te(),i=f.useMemo(()=>[{text:s.formatMessage({defaultMessage:"Cancel",id:"47FYwba+bI"}),onClick:t,variant:"common",shouldShowConfirmDialog:!0},{text:s.formatMessage({defaultMessage:"Delete",id:"K3r6DQW7h+"}),onClick:()=>{n&&(o("delete memory",{memoryId:n}),a(n),t())},variant:"rejected"}],[a,s,n,t,o]);return l.jsx(rn,{isOpen:e,onClose:t,actionList:i,titleTextVariant:"smallBold",renderCloseButton:!1,modalClassname:"!min-w-0 max-w-[324px] p-0",headerClassname:"pt-6 px-6  md:px-6 border-b-0 !pb-0",modalContentClassname:"pt-0",footerClassname:"border-t-0 pt-2 px-6 !pb-6 md:pt-2 md:px-6 md:pb-6",title:s.formatMessage({defaultMessage:"Delete memory",id:"767lMfHCVm"}),children:l.jsx("div",{className:"w-full justify-start px-2 py-1",children:l.jsx(D,{variant:"tinyRegular",children:s.formatMessage({defaultMessage:"Are you sure you want to delete this memory? Memories cannot be recovered once deleted.",id:"bJP46nmx6X"})})})})},gq=50,Fy={title:J({defaultMessage:"Watchlist",id:"b+DoOaU7zT"}),saveWatchlist:J({defaultMessage:"Save",id:"jvo0vs3nF0"}),cancel:J({defaultMessage:"Cancel",id:"47FYwba+bI"}),settingsTitle:J({defaultMessage:"Categories",id:"VKb1MSJZP+"}),sports:vt({title:{defaultMessage:"Sports",id:"qEuXjx1B4z"},settingsCtaText:{defaultMessage:"Add teams",id:"kapmPqUzuB"},searchPlaceholder:{defaultMessage:"Search for a team",id:"yve+fFGCVl"},widgetDescription:{defaultMessage:"Choose your teams",id:"6ZVPGK17cb"},settingsDescription:{defaultMessage:"Event updates, breaking news, and live scores",id:"yBBV27kmkn"},modalDescription:{defaultMessage:"Get event updates, breaking news, and live scores",id:"VLVunZTFAF"}}),finance:vt({title:{defaultMessage:"Finance",id:"Fm3M+yFIbr"},settingsCtaText:{defaultMessage:"Add stocks",id:"IrqguKbukF"},searchPlaceholder:{defaultMessage:"Search...",id:"0BUTMvePvK"},widgetDescription:{defaultMessage:"Set your watchlist",id:"Uh4Ex766Qm"},settingsDescription:{defaultMessage:"Set your watchlist for daily updates and summaries",id:"7SMcHmFldb"},modalDescription:{defaultMessage:"Updates and news about stocks and more",id:"uJAhXQDitL"}}),f1:vt({title:{defaultMessage:"Sports",id:"qEuXjx1B4z"},settingsCtaText:{defaultMessage:"Add drivers",id:"R9U03Vy8bO"},searchPlaceholder:{defaultMessage:"Search for a driver",id:"lE7oUWeeV1"},widgetDescription:{defaultMessage:"Choose your drivers",id:"sCVGGM0Ka3"},settingsDescription:{defaultMessage:"Event updates, breaking news, and live scores",id:"yBBV27kmkn"},modalDescription:{defaultMessage:"Get event updates, breaking news, and live scores",id:"VLVunZTFAF"}})},GQe=({symbol:e})=>l.jsx(D,{color:"light",children:l.jsx("span",{className:"font-mono opacity-70",children:e.slice(0,1)})}),tme=({image:e,imageDark:t,alt:n,watchlistType:r,className:s,imageClassName:a})=>{const o=r==="FINANCE",{colorScheme:i}=fs(),c=o&&i==="dark"&&t?t:e,[u,d]=f.useState(()=>{if(!c)return!1;const g=new Image;return g.src=c,g.complete&&g.naturalWidth>0}),[m,h]=f.useState(!1),p=!u||m;return l.jsxs("div",{className:B("relative flex size-6 items-center justify-center",{"bg-offset":p},s),children:[p&&l.jsx(GQe,{symbol:n??""}),!m&&l.jsx("div",{className:B("absolute",a),children:l.jsx("img",{src:c,alt:n,width:32,height:32,className:B("inset-0 size-full object-contain",{"opacity-0":!u}),onLoad:()=>d(!0),onError:()=>h(!0)})})]})},nme=async({query:e,watchlistType:t,limit:n,category:r,cometRenderPlace:s,reason:a})=>{const o=encodeURIComponent(e),{data:i,error:c}=await ne.GET("/rest/homepage-widgets/watchlist/list-autosuggest",a,{params:{query:{type:t,query:o,limit:n,category:r,entropy_render_place:s}},timeoutMs:1500,numRetries:1});if(c)throw new Me("API_CLIENTS_ERROR",{message:"Failed to get watchlist autosuggestions",cause:c});return i.results??ce},qQe=async({watchlistType:e,reason:t})=>{try{const{error:n,data:r}=await ne.GET("/rest/homepage-widgets/watchlist/subscription",t,{params:{query:{type:e}},headers:{"content-type":"application/json"},numRetries:1});if(n)throw new Me("API_CLIENTS_ERROR",{message:"Failed to get watchlist subscriptions",cause:n});return r.results??[]}catch(n){return ee.error(n),[]}},KQe=async({watchlistType:e,reason:t})=>{try{const{error:n,data:r}=await ne.GET("/rest/homepage-widgets/watchlist/categories",t,{params:{query:{type:e}},numRetries:1});if(n)throw new Me("API_CLIENTS_ERROR",{message:"Failed to get watchlist categories",cause:n});return r?.results??[]}catch(n){return ee.error(n),[]}},YQe=async({watchlistType:e,identifier:t,category:n,reason:r})=>{try{const{error:s}=await ne.PUT("/rest/homepage-widgets/watchlist/subscription",r,{params:{query:{type:e,identifier:t??"",category:n}},headers:{"content-type":"application/json"}});if(s)throw new Me("API_CLIENTS_ERROR",{message:"Failed to add watchlist subscription",cause:s});return!0}catch(s){return ee.error(s),!1}},QQe=async({watchlistType:e,identifier:t,category:n,reason:r})=>{try{const{error:s}=await ne.DELETE("/rest/homepage-widgets/watchlist/subscription",r,{params:{query:{type:e,identifier:t,category:n}},headers:{"content-type":"application/json"}});if(s)throw new Me("API_CLIENTS_ERROR",{message:"Failed to remove watchlist subscription",cause:s});return!0}catch(s){return ee.error(s),!1}},XQe=async({watchlistType:e,identifier:t,order:n,reason:r})=>{try{const{error:s}=await ne.PATCH("/rest/homepage-widgets/watchlist/subscription",r,{params:{query:{type:e,identifier:t}},body:{order:n},headers:{"content-type":"application/json"}});if(s)throw new Me("API_CLIENTS_ERROR",{message:"Failed to update watchlist subscription order",cause:s});return!0}catch(s){return ee.error(s),!1}},IC=e=>["watchlist",e,"subscriptions"],ZQe=e=>["watchlist",e,"addSubscription"],JQe=e=>["watchlist",e,"removeSubscription"],eXe=e=>["watchlist",e,"updateSubscription"],rme=({watchlistType:e,reason:t})=>{const n=Je(),r=IC(e);return Ke({queryKey:r,queryFn:()=>qQe({watchlistType:e,reason:t}),staleTime:0,enabled:n})},tXe=({watchlistType:e,queryClient:t,reason:n})=>{const r=IC(e);return Mt({mutationKey:ZQe(e),mutationFn:async s=>YQe({watchlistType:e,reason:n,...s}),onMutate:async({identifier:s,category:a,description:o,image:i,title:c})=>{await t.cancelQueries({queryKey:r});const u=t.getQueryData(["watchlist",e]);return t.setQueryData(r,(d=[])=>{const m={identifier:s??"",category:a,description:o??"",image_url:i??"",title:c??"",subscribed:!0,order:Date.now()},h=d.filter(p=>p.identifier!==s);return[m,...h]}),{previousSubscriptions:u}},onError:(s,a,o)=>{ee.error("Error adding watchlist subscription",s),t.setQueryData(r,o?.previousSubscriptions)},onSuccess:()=>{t.invalidateQueries({queryKey:r})}})},nXe=({watchlistType:e,queryClient:t,reason:n})=>{const r=IC(e);return Mt({mutationKey:JQe(e),mutationFn:async s=>QQe({watchlistType:e,reason:n,...s}),onSuccess:()=>{t.invalidateQueries({queryKey:r})},onMutate:async({identifier:s})=>{await t.cancelQueries({queryKey:r});const a=t.getQueryData(["watchlist",e]);return t.setQueryData(r,(o=[])=>o.filter(i=>i.identifier!==s)),{previousSubscriptions:a}},onError:(s,a,o)=>{ee.error("Error removing watchlist subscription",s),t.setQueryData(r,o?.previousSubscriptions)}})},rXe=({watchlistType:e,queryClient:t,reason:n})=>{const r=IC(e);return Mt({mutationKey:eXe(e),mutationFn:async s=>XQe({watchlistType:e,reason:n,...s}),onMutate:async({newOrderedList:s})=>{await t.cancelQueries({queryKey:r});const a=t.getQueryData(r);return t.setQueryData(r,s),{previousSubscriptions:a}},onError:(s,a,o)=>{ee.error("Error updating watchlist subscription order",s),o?.previousSubscriptions&&t.setQueryData(r,o.previousSubscriptions)},onSuccess:()=>{t.invalidateQueries({queryKey:r})}})},yq={nba:Qb,nfl:mre,cricket:O4e,ncaam:Qb,ncaaw:Qb},IT=j4e,sXe=({watchlistType:e,selectedCategory:t,setSelectedCategory:n})=>{const r="watchlist-category-dropdown",{isMobileStyle:s}=Ce(),{$t:a}=X(),[o,i]=f.useState([]);f.useEffect(()=>{(async()=>{const m=await KQe({watchlistType:e,reason:r});i(m)})()},[e]);const c=a({defaultMessage:"All Categories",id:"1X6HtI/EN/"}),u=f.useMemo(()=>[{text:c,icon:IT,onClick:()=>n(void 0),type:"default",active:t===void 0,size:Ft.tiny},...o.map(m=>({text:m.display_name,icon:yq[m.category]||IT,onClick:()=>n(m),type:"default",active:t?.category===m.category,size:Ft.tiny}))],[o,n,t,c]);return o.length===0?null:l.jsx(en,{isMobileStyle:s,items:u,placement:"bottom-end",children:l.jsx(ye,{icon:yq[t?.category]||IT,size:Ft.tiny,text:t?.display_name??c})})},Ln=({children:e,className:t,as:n="div",active:r=!0,speed:s="normal",hoverOnly:a=!1,variant:o="default"})=>{const[i,c]=f.useState(!1),u=a?i:r;return A.createElement(n,{style:{animationDuration:s==="normal"?"1200ms":"1800ms"},className:B({shimmer:u&&o==="default","animate-gradient bg-clip-text text-transparent shimmer-super":u&&o==="super"},t),onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1)},e)};var jT={},vq;function aXe(){return vq||(vq=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="arrow-up-left",r=384,s=512,a=[],o="e09d",i="M56 96c-13.3 0-24 10.7-24 24l0 240c0 13.3 10.7 24 24 24s24-10.7 24-24l0-182.1L311 409c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-231-231L296 144c13.3 0 24-10.7 24-24s-10.7-24-24-24L56 96z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faArrowUpLeft=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(jT)),jT}var oXe=aXe(),OT={},xq;function iXe(){return xq||(xq=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="globe",r=512,s=512,a=[127760],o="f0ac",i="M256 464c7.4 0 27-7.2 47.6-48.4c8.8-17.7 16.4-39.2 22-63.6l-139.2 0c5.6 24.4 13.2 45.9 22 63.6C229 456.8 248.6 464 256 464zM178.5 304l155 0c1.6-15.3 2.5-31.4 2.5-48s-.9-32.7-2.5-48l-155 0c-1.6 15.3-2.5 31.4-2.5 48s.9 32.7 2.5 48zm7.9-144l139.2 0c-5.6-24.4-13.2-45.9-22-63.6C283 55.2 263.4 48 256 48s-27 7.2-47.6 48.4c-8.8 17.7-16.4 39.2-22 63.6zm195.3 48c1.5 15.5 2.2 31.6 2.2 48s-.8 32.5-2.2 48l76.7 0c3.6-15.4 5.6-31.5 5.6-48s-1.9-32.6-5.6-48l-76.7 0zm58.8-48c-21.4-41.1-56.1-74.1-98.4-93.4c14.1 25.6 25.3 57.5 32.6 93.4l65.9 0zm-303.3 0c7.3-35.9 18.5-67.7 32.6-93.4c-42.3 19.3-77 52.3-98.4 93.4l65.9 0zM53.6 208c-3.6 15.4-5.6 31.5-5.6 48s1.9 32.6 5.6 48l76.7 0c-1.5-15.5-2.2-31.6-2.2-48s.8-32.5 2.2-48l-76.7 0zM342.1 445.4c42.3-19.3 77-52.3 98.4-93.4l-65.9 0c-7.3 35.9-18.5 67.7-32.6 93.4zm-172.2 0c-14.1-25.6-25.3-57.5-32.6-93.4l-65.9 0c21.4 41.1 56.1 74.1 98.4 93.4zM256 512A256 256 0 1 1 256 0a256 256 0 1 1 0 512z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faGlobe=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(OT)),OT}var lXe=iXe(),LT={},bq;function cXe(){return bq||(bq=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="globe-pointer",r=512,s=512,a=[],o="e60e",i="M303.6 415.6C283 456.8 263.4 464 256 464c-3.1 0-8.3-1.3-14.8-5.7l-15.3 52c9.9 1.2 19.9 1.8 30.1 1.8c141.4 0 256-114.6 256-256S397.4 0 256 0S0 114.6 0 256c0 10.2 .6 20.2 1.8 30.1l46.9-13.8c-.4-5.4-.6-10.8-.6-16.3c0-16.5 1.9-32.6 5.6-48l76.7 0c-1.3 13.3-2 27-2.2 41l48.4-14.2c.4-9.1 1.1-18 2-26.7l155 0c1.6 15.3 2.5 31.4 2.5 48s-.9 32.7-2.5 48l-47 0-14.1 48 53.2 0c-5.6 24.4-13.2 45.9-22 63.6zM208.4 96.4C229 55.2 248.6 48 256 48s27 7.2 47.6 48.4c8.8 17.7 16.4 39.2 22 63.6l-139.2 0c5.6-24.4 13.2-45.9 22-63.6zM384 256c0-16.4-.8-32.5-2.2-48l76.7 0c3.6 15.4 5.6 31.5 5.6 48s-1.9 32.6-5.6 48l-76.7 0c1.5-15.5 2.2-31.6 2.2-48zm-9.3-96c-7.3-35.9-18.5-67.7-32.6-93.4c42.3 19.3 77 52.3 98.4 93.4l-65.9 0zM71.4 160c21.4-41.1 56.1-74.1 98.4-93.4c-14.1 25.6-25.3 57.5-32.6 93.4l-65.9 0zM374.7 352l65.9 0c-21.4 41.1-56.1 74.1-98.4 93.4c14.1-25.6 25.3-57.5 32.6-93.4zM39 308.5c-13.9 4.1-15.6 23.2-2.6 29.7l57.3 28.7c1.3 .7 2.6 1.5 3.7 2.5l-88 88c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l88-88c1 1.1 1.9 2.3 2.5 3.7l28.7 57.3c6.5 13 25.6 11.3 29.7-2.6l60.2-204.8c3.6-12.1-7.7-23.4-19.9-19.9L39 308.5z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faGlobePointer=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(LT)),LT}var uXe=cXe(),DT={},_q;function dXe(){return _q||(_q=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="plus",r=448,s=512,a=[10133,61543,"add"],o="2b",i="M248 72c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 160L40 232c-13.3 0-24 10.7-24 24s10.7 24 24 24l160 0 0 160c0 13.3 10.7 24 24 24s24-10.7 24-24l0-160 160 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-160 0 0-160z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faPlus=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(DT)),DT}var L9=dXe();const sme=e=>e?.includes("perplexity.ai/finance"),ame=e=>e==="https://www.perplexity.ai/finance",ome=A.memo(({query:e,completion:t,inputsAndCompletions:n,description:r,highlightPrefix:s,url:a,title:o,shouldShowTitle:i})=>{const c=sme(a),u=ame(a),d=i&&o?o:e,m=c?d.toUpperCase():d,{$t:h}=X(),p=c?t?.toUpperCase():t;return u?l.jsx(D,{variant:"small",inline:!0,children:h({defaultMessage:"{perplexity} Finance",id:"LnL5Kdg1cp"},{perplexity:"Perplexity"})},"perplexity-finance"):l.jsxs(l.Fragment,{children:[!r&&n?.length&&s?n.map(([g,y],v)=>g?l.jsx(D,{color:"light",variant:"small",className:"inline",as:"div",children:g},`${v}-${g}`):l.jsx(D,{className:"inline whitespace-pre",variant:"small",as:"div",children:y},`${v}-${y}`)):r?l.jsxs("div",{className:"flex flex-col",children:[l.jsx(D,{variant:"small",inline:!0,children:m}),l.jsx(D,{variant:"tinyRegular",className:"!text-quiet opacity-70",inline:!0,children:r})]}):l.jsx(D,{inline:!0,color:"light",variant:"small",children:m}),t&&s&&!n?.length&&l.jsx(D,{className:"whitespace-pre",inline:!0,variant:"small",children:p}),t&&!s&&l.jsx(D,{color:"light",inline:!0,variant:"small",children:p})]})});ome.displayName="DefaultQueryContentComponent";const ime=A.memo(({onClick:e,query:t,completion:n,inputsAndCompletions:r,url:s,suggestionIndex:a,keyboardFocusedIndex:o,setKeyboardFocusedIndex:i,leftIcon:c,rightIcon:u=l.jsx(xt,{icon:L9.faPlus}),className:d,description:m,title:h,shouldShowTitle:p,highlightPrefix:g=!0,category:y,QueryContentComponent:v=ome,metadata:x,actionHandler:b})=>{const{isMobileUserAgent:_}=Ce(),w="group-hover:opacity-100 group-data-[focused=self]:opacity-100",S="opacity-0 group-data-[focused=other]:opacity-0",C=f.useCallback(()=>{i?.(-1)},[i]),E=f.useCallback(M=>p&&h&&t?l.jsx(bn,{tooltipText:t,bodyClassName:"max-w-[300px]",showTooltip:!0,asChild:!0,tooltipLayout:"right",children:M}):M,[p,h,t]);return l.jsx(st,{children:E(l.jsx("div",{"data-focused":o===void 0||o===-1?"none":o===a?"self":"other",className:B("group flex cursor-pointer flex-row items-center rounded-lg p-[8px] last:rounded-b-xl",d),onPointerDown:()=>{b?b():e(n?t+n:t)},onPointerLeave:C,children:l.jsxs("div",{className:"flex w-full min-w-0 flex-row whitespace-pre leading-tight",children:[l.jsx(D,{className:"-mr-three",color:"light",inline:!0,variant:"small",children:c}),l.jsx(D,{variant:"small",className:_?"truncate":"line-clamp-2 text-wrap",children:s?l.jsx(at,{href:s,target:"_blank",rel:"noopener",children:l.jsx(v,{query:t,url:s,completion:n,inputsAndCompletions:r,description:m,category:y,highlightPrefix:g,metadata:x,title:h,shouldShowTitle:p})}):l.jsx(v,{query:t,url:s,completion:n,inputsAndCompletions:r,description:m,category:y,highlightPrefix:g,metadata:x,title:h,shouldShowTitle:p})}),l.jsx(D,{variant:"smallBold",color:"super",inline:!0,className:B("pr-xs ml-auto",w,{[S]:!s}),children:u})]})}))})});ime.displayName="SuggestionCard";const jP={ticker:{order:0,showHeader:!1,highlightPrefix:!1},suggestion:{order:1,showHeader:!1,highlightPrefix:!0},news:{displayName:"Latest News",order:2,showHeader:!0,highlightPrefix:!1},related_question:{displayName:"Related Questions",order:3,showHeader:!0,highlightPrefix:!1},shortcuts:{displayName:"Shortcuts",order:4,showHeader:!0,highlightPrefix:!0}},fXe=e=>{const t={};return e.forEach(n=>{const r=n.category||"suggestion";t[r]||(t[r]=[]),t[r].push(n)}),t},mXe=e=>Object.keys(e).sort((t,n)=>{const r=jP[t]?.order??Number.MAX_SAFE_INTEGER,s=jP[n]?.order??Number.MAX_SAFE_INTEGER;return r-s}),wq=e=>{const{metadata:t}=e;return!!t&&t.type==="price"&&!!t.price_info&&typeof t.price_info.currentPrice=="number"&&!!t.price_info.change&&!!t.price_info.changePercentage},hXe=e=>[...e].sort((t,n)=>{const r=wq(t),s=wq(n);return r&&!s?-1:!r&&s?1:0}),pXe=A.memo(e=>{const{text:t,show:n,className:r}=e;return n?l.jsxs(l.Fragment,{children:[l.jsx(z,{className:B("my-sm sm:mx-sm border-b first:hidden",r)}),t&&l.jsx(z,{variant:"transparent",className:"sm:mx-sm mt-xs mb-sm pr-sm",children:l.jsx(D,{className:"w-max",variant:"tinyMono",color:"light",children:t})})]}):null}),lme=A.memo(({category:e,suggestions:t,categoryConfig:n,value:r,focusedIndex:s,setFocusedIndex:a,handleSubmit:o,indexOffset:i,LeftIconComponent:c,RightIconComponent:u,QueryContentComponent:d,onFillButtonClick:m,titleClassName:h})=>{const p=f.useMemo(()=>e==="ticker"?hXe(t):t,[e,t]);return t.length?l.jsxs(l.Fragment,{children:[l.jsx(pXe,{show:n.showHeader,text:n.displayName,className:h}),p.map((g,y)=>l.jsx(cme,{suggestion:g,index:y,category:e,categoryConfig:n,value:r,focusedIndex:s,setFocusedIndex:a,handleSubmit:o,indexOffset:i,LeftIconComponent:c,RightIconComponent:u,onFillButtonClick:m,QueryContentComponent:d,highlightPrefix:n.highlightPrefix??!0},`${e}-${g.input+g.completion+g.description||g.query_uuid}`))]}):null});lme.displayName="SuggestionGroup";const cme=A.memo(({suggestion:{input:e,completion:t,query_uuid:n,image:r,imageDark:s,url:a="",description:o,identifier:i="",category:c,title:u="",subscribed:d=!1,metadata:m,submission_query:h,inputs_and_completions:p,icon_name:g,shouldShowTitle:y,actionHandler:v},index:x,LeftIconComponent:b,QueryContentComponent:_,RightIconComponent:w,highlightPrefix:S,focusedIndex:C,handleSubmit:E,indexOffset:M,onFillButtonClick:T,setFocusedIndex:I,value:j})=>{const N=f.useCallback(O=>E({query:O,query_uuid:n,url:a,identifier:i,category:c,description:o,image:r,imageDark:s,title:u,subscribed:d,submission_query:h},x+M),[c,o,E,i,r,s,x,M,n,h,d,u,a]),P=f.useCallback(()=>{T(e+t,a)},[t,e,T,a]),R=f.useMemo(()=>l.jsx(b,{image:r,imageDark:s,alt:e+j,url:a,category:c,iconName:g,value:j}),[b,c,g,r,s,e,a,j]),k=f.useMemo(()=>l.jsx(w,{onClick:P,url:a,isSelected:d,metadata:m,category:c}),[w,P,a,d,m,c]);return l.jsx(ime,{onClick:N,query:e,completion:t,inputsAndCompletions:p,url:a,suggestionIndex:x+M,keyboardFocusedIndex:C,setKeyboardFocusedIndex:I,description:o,title:u,shouldShowTitle:y,highlightPrefix:S,className:B("bg-raised dark:bg-offset","hover:bg-offset dark:hover:bg-offsetPlus","data-[focused=self]:bg-offset","dark:data-[focused=self]:bg-offsetPlus","hover:data-[focused=other]:bg-raised","dark:hover:data-[focused=other]:bg-offset"),category:c,QueryContentComponent:_,metadata:m,leftIcon:R,rightIcon:k,actionHandler:v})});cme.displayName="SuggestionCardFactory";var gXe={};const yXe=60,vXe=2e3,xXe=6,bXe=4,_Xe=5,Fm=(e,t)=>e?bXe:t?_Xe:xXe,wXe=e=>!(e.length===0||e.includes(`
`)),SXe=e=>e.map(t=>({query:t.text,image:t.image_url,url:t.url,title:t.title})),CXe=e=>e.sort((t,n)=>t.url?-1:n.url?1:t.image?-1:n.image?1:0),OP=(e,t,n)=>{let r=e;(t||gXe.NEXT_PUBLIC_IS_SIDECAR_BUILD)&&(r=e.filter(o=>!o.url));const s=Gne(r,"query");if(n){const o=s.findIndex(i=>i.query===n);if(~o){const i=s[o];s.splice(o,1),s.unshift(i)}}const a=CXe(s);return[a,a.slice(0,Fm(t))]},ume=(e,t,n)=>{const r=n?e.replace(/\s+/g,"").toLocaleLowerCase():e,s=t.query;let a=0,o=0;for(;a<r.length&&o<s.length;)r[a]===s[o].toLocaleLowerCase()&&a++,o++;return[a===r.length,o]},EXe=(e,t)=>{const n=e.replace(/\s+/g,""),r=[];let s="",a="",o=0,i=0;for(;o<n.length&&i<t.length;)n[o].toLocaleLowerCase()===t[i].toLocaleLowerCase()?(a&&(r.push(["",a]),a=""),s+=t[i],o++,i++):(s&&(r.push([s,""]),s=""),a+=t[i],i++);return s&&r.push([s,""]),a&&r.push(["",a]),i<t.length&&r.push(["",t.slice(i)]),r},MXe={calendar:mS,"report-search":gre,browser:F4e,mail:r8,"shopping-bag":U6,message:n8,"user-heart":pre,play:hre,globe:D4e,music:L4e,book:H_,plane:fS,plus:mr};function TXe(e){return e.blocks?.some(t=>t.intended_usage==="ask_text")??!1}function kXe(e,t,n=[]){return t===fe.DEFAULT||n.length>0&&n[n.length-1].step_type==="FINAL"||e?.some(s=>s.markdown_block||s.entity_list_block||Oue(s.entity_group_block)||Lue(s.inline_entity_block))}function xr(e){const t=e?.toLowerCase();return wa[t]??ae.SEARCH}const NXe=({enabled:e,reason:t})=>{const n=async()=>mqe({reason:t}),{data:r}=Ke({enabled:typeof e>"u"?!0:e,queryKey:aOe(),queryFn:n,networkMode:"always"});return r??{isGovernmentRequestOrigin:void 0}};function Mp(){const{isMax:e,isPro:t}=Nt(),{isMaxUpsellEnabled:n}=Pu(),{gpt4Limit:r,pplxAlphaLimit:s,pplxBetaLimit:a}=Sn();return f.useMemo(()=>i=>{let c=!1;return i===ae.RESEARCH?c=Math.min(r,s)<=0:c=Math.min(r,a)<=0,n&&!e&&t&&c&&(i===ae.RESEARCH||i===ae.STUDIO)},[n,e,t,r,s,a])}function Pu(){const{isEnterprise:e}=pn({reason:"max-tier"}),{value:t,loading:n}=Ut({flag:"max-upsell",defaultValue:!1,subjectType:"visitor_id",extraAttributes:{isEnterprise:e??!1}});return f.useMemo(()=>({isMaxUpsellEnabled:t,loading:n}),[t,n])}function AXe(e,t){return Ke({enabled:!!e,queryKey:oOe(e),queryFn:async()=>iqe({profileName:e,reason:t})})}const PXe=({reason:e})=>{const t=gt(),n=HS(),{mutate:r}=Mt({mutationFn:async s=>{await uqe({settings:s,reason:e})},onMutate:async s=>{await t.cancelQueries({queryKey:n});const a=t.getQueryData(n),o={};for(const i in s)o[rqe[i]]=s[i];return t.setQueryData(n,i=>({...i,...o})),{previousSettings:a}},onSettled(s,a,o,i){a&&t.setQueryData(n,i?.previousSettings)}});return f.useMemo(()=>({updateSettings:r}),[r])},RXe=["presentpicker"],dme=e=>e?RXe.includes(e):!1;function IXe(e){const t=Ht(),n=Je(),{hasAccessToProFeatures:r}=Nt(),{trackEvent:s}=Te(),{actions:a,preferredSearchModels:o,preferredSearchMode:i}=hn(),{isMaxUpsellEnabled:c}=Pu(),u=t?.get("copilot"),d=t?.get("pro"),m=t?.get("utm_source"),h=u==="false"||d==="false",p=!h&&(u==="true"||d==="true"||dme(m??void 0)),g=o[ae.SEARCH];g&&(wa[g]!==ae.SEARCH?(o[ae.SEARCH]=fe.PRO,a.setPreferredSearchModel(ae.SEARCH,fe.PRO)):g===fe.DEFAULT&&r&&a.setPreferredSearchModel(ae.SEARCH,void 0));const y=t?.get("model_id")==="pplx_alpha"?null:t?.get("model_id");let v;y&&(y==="deep_research"?v=fe.ALPHA:Object.values(fe).includes(y)&&(v=y));let x;return h?x=fe.DEFAULT:v?x=v:p&&(x=fe.PRO),x&&v&&v==x&&s("search mode utm",{mode:wa[x]}),f.useMemo(()=>{let b=fe.DEFAULT;if(!n)return b;if(x)return x;if(!c)return b=o[ae.SEARCH]??fe.PRO,b;switch(i){case ae.RESEARCH:b=o[ae.RESEARCH]??fe.ALPHA;break;case ae.STUDIO:b=o[ae.STUDIO]??fe.BETA;break;case ae.SEARCH:default:b=o[ae.SEARCH]??fe.PRO;break}return b},[n,c,x,i,o])}const fme={isCopilot:!1,sources:["web"],gpt4Limit:0,gpt4Total:0,pplxAlphaLimit:0,pplxBetaLimit:0,uploadRateLimit:void 0,createLimit:0,recency:null,askInputReasoningMode:!1,askInputReasoningModelPreference:null,setAskInputReasoningMode:()=>{},setAskInputReasoningModelPreference:()=>{},setConfiguredModel(){},setSources:()=>{},setIsCopilot:()=>{},decrementCreateLimit:()=>{},setGPT4Limit:()=>{},setPplxAlphaLimit:()=>{},setPplxBetaLimit:()=>{},setRecency:()=>{},setUploadRateLimit:()=>{},configuredModel:fe.DEFAULT,configuredSearchMode:ae.SEARCH,setConfiguredSearchMode(){},isGovernmentRequestOrigin:void 0,specialCapabilities:{unlimitedProSearch:!1,maxModelSelection:!1,unlimitedResearch:!1,fileUpload:!1}},mme=f.createContext(fme),jXe=({children:e,shouldFetchSettings:t})=>{const n="thread-settings-provider",r=js({enabled:t,reason:n}),{updateSettings:s}=PXe({reason:n}),a=NXe({enabled:t,reason:n}),o=a.isGovernmentRequestOrigin?"us_government_or_military":"",{data:i}=AXe(o,n),{organization:c}=pn({reason:"thread-settings-provider"}),u=hn(),{isMax:d}=Nt();let m=u.preferredSearchMode;const h=m?Object.values(ae).includes(m):!1,{isMaxUpsellEnabled:p}=Pu();!p&&m!==ae.SEARCH&&(m=void 0,u.actions.setPreferredSearchMode(void 0));const g=IXe(),[y,v]=f.useState({...fme,gpt4Limit:r.gpt4Limit,gpt4Total:r.gpt4Total,pplxAlphaLimit:r.pplxAlphaLimit,pplxBetaLimit:r.pplxBetaLimit,configuredModel:g,configuredSearchMode:wa[g]??ae.SEARCH}),x=f.useCallback(P=>v(R=>({...R,configuredModel:P,configuredSearchMode:wa[P]??R.configuredSearchMode})),[]),b=f.useCallback(()=>{x(fe.DEFAULT),u.actions.setPreferredSearchMode(ae.SEARCH)},[x,u.actions]),_=f.useCallback(P=>{v(R=>({...R,sources:P}))},[]),w=f.useCallback(P=>{v(R=>({...R,recency:P}))},[]),S=f.useCallback(P=>{v(R=>({...R,askInputReasoningModelPreference:P,askInputReasoningMode:!!P}))},[]),C=f.useCallback(P=>{v(R=>({...R,askInputReasoningMode:P}))},[]);f.useEffect(()=>{r.createLimit!==null&&v(P=>({...P,createLimit:r.createLimit}))},[r.createLimit]),f.useEffect(()=>{r.uploadLimit!==null&&r.uploadLimit!==void 0&&v(P=>({...P,uploadRateLimit:r.uploadLimit}))},[r.uploadLimit]),f.useEffect(()=>{r.gpt4Limit!==null&&v(P=>({...P,gpt4Limit:r.gpt4Limit}))},[r.gpt4Limit]),f.useEffect(()=>{r.gpt4Total!==null&&v(P=>({...P,gpt4Total:r.gpt4Total}))},[r.gpt4Total]),f.useEffect(()=>{r.pplxAlphaLimit!==null&&v(P=>({...P,pplxAlphaLimit:r.pplxAlphaLimit}))},[r.pplxAlphaLimit]),f.useEffect(()=>{r.pplxBetaLimit!==null&&v(P=>({...P,pplxBetaLimit:r.pplxBetaLimit}))},[r.pplxBetaLimit]),f.useEffect(()=>{if(!r.hasLoadedSettings)return;const P=!!y.specialCapabilities?.unlimitedProSearch;(y.configuredModel!==fe.DEFAULT&&r.gpt4Limit<=0&&!P||xr(y.configuredModel)===ae.RESEARCH&&r.pplxAlphaLimit<=0&&!d||xr(y.configuredModel)===ae.STUDIO&&r.pplxBetaLimit<=0&&!d)&&b(),(y.askInputReasoningMode||y.askInputReasoningModelPreference)&&r.gpt4Limit<=0&&b()},[b,r.gpt4Limit,r.pplxAlphaLimit,r.pplxBetaLimit,r.hasLoadedSettings,y.askInputReasoningMode,y.askInputReasoningModelPreference,y.configuredModel,d,y.specialCapabilities?.unlimitedProSearch]),f.useEffect(()=>{const P=c?.settings?.disabled_model_preferences??[];h&&m&&P?.includes(m)&&b()},[h,c?.settings?.disabled_model_preferences,m,b,x]),f.useEffect(()=>{a.isGovernmentRequestOrigin&&(c?.settings?.always_incognito||yn(GS)!=="true"&&Lie(!0))},[a.isGovernmentRequestOrigin,c?.settings?.always_incognito]),f.useEffect(()=>{v(P=>({...P,specialCapabilities:{unlimitedProSearch:!!i?.unlimitedProSearch,maxModelSelection:!!i?.maxModelSelection,unlimitedResearch:!!i?.unlimitedResearch,fileUpload:!!i?.fileUpload}}))},[i]);const E=f.useCallback(()=>{const P=Math.max(y.createLimit-1,0);r.createLimit!==P&&s({create_limit:P}),v(R=>({...R,createLimit:P}))},[y.createLimit,s,r.createLimit]),M=f.useCallback((P=1)=>{if(y.uploadRateLimit==null)return;const R=Math.max(y.uploadRateLimit-P,0);r.uploadLimit!==R&&s({upload_limit:R}),v(k=>({...k,uploadRateLimit:R}))},[y.uploadRateLimit,s,r.uploadLimit]),T=f.useCallback(P=>{v(R=>({...R,gpt4Limit:P})),r.gpt4Limit!==P&&s({gpt4_limit:P})},[s,r.gpt4Limit]),I=f.useCallback(P=>{v(R=>({...R,pplxAlphaLimit:P})),r.pplxAlphaLimit!==P&&s({pplx_alpha_limit:P})},[s,r.pplxAlphaLimit]),j=f.useCallback(P=>{v(R=>({...R,pplxBetaLimit:P})),r.pplxBetaLimit!==P&&s({pplx_beta_limit:P})},[s,r.pplxBetaLimit]),N={...y,setConfiguredModel:x,setSources:_,decrementCreateLimit:E,setUploadRateLimit:M,setGPT4Limit:T,setPplxAlphaLimit:I,setPplxBetaLimit:j,setRecency:w,askInputReasoningMode:y.askInputReasoningMode,isCopilot:y.configuredModel!==fe.DEFAULT,setAskInputReasoningMode:C,setAskInputReasoningModelPreference:S,configuredSearchMode:y.configuredSearchMode,setConfiguredSearchMode:P=>{v(R=>({...R,configuredSearchMode:P}))},isGovernmentRequestOrigin:a.isGovernmentRequestOrigin};return l.jsx(mme.Provider,{value:N,children:e})},Sn=()=>{const e=f.useContext(mme);if(!e)throw new Error("useThreadConfig must be used within ThreadSettingsContext");return e};var OXe={};function Ka(){const{configuredModel:e,configuredSearchMode:t}=Sn();return f.useMemo(()=>t||(OXe.NEXT_PUBLIC_IS_SIDECAR_BUILD&&e===fe.DEFAULT?ae.SEARCH:wa[e]),[t,e])}const LXe=(e,t)=>{const{value:n,loading:r}=Ut({flag:"comet-sidecar-thread-per-tab",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},DXe="npclhjbddhklpbnacpjloidibaggcgon",FXe="entropy-agent-extension-main",BBt="__";function Sq({onMessage:e,extensionId:t,name:n}){let r,s;const a=()=>{r&&clearTimeout(r),r=setTimeout(c,1e3)},o=()=>{ee.warn("Disconnected. Attempting to reconnect...",{extensionId:t}),a()},i=()=>{if(s){s.onMessage.removeListener(e),s.onDisconnect.removeListener(o),clearTimeout(r);try{s.disconnect()}catch{}s=void 0}};function c(){if(i(),typeof chrome>"u"||!chrome.runtime){Pi()&&(a(),ee.error("Comet browser is missing chrome.runtime"));return}try{s=chrome.runtime.connect(t,{name:n}),s.onMessage.addListener(e),s.onDisconnect.addListener(o)}catch(u){a(),ee.error("Failed to connect to extension",{err:u,extensionId:t})}}return Pi()&&(c(),Il("web.frontend.comet_extension_connected",{extensionId:t,startTime:performance.timeOrigin,duration:performance.now()})),{sendMessage:u=>(!s&&Pi()&&ee.warn("Attempting to send message while main port is not connected",{extensionId:t}),UXe(t,u)),sendMessageToPort:u=>{if(!Pi())return()=>{};s||ee.warn("Attempting to send message to port while main port is not connected",{extensionId:t});const d=chrome.runtime.connect(t,{name:`${n}_${ar()}`});return d.postMessage(u),()=>{try{d.disconnect()}catch{}}}}}async function UXe(e,t){return new Promise((n,r)=>{if(!Pi()){r(new ky("INVALID_BROWSER_ERROR"));return}if(typeof chrome>"u"||!chrome.runtime){r(new ky("MISSING_RUNTIME_ERROR"));return}chrome.runtime.sendMessage(e,t,s=>{if(chrome.runtime.lastError){r(new ky("RUNTIME_LAST_ERROR",{message:chrome.runtime.lastError.message,cause:chrome.runtime.lastError}));return}n(s)})})}function BXe(){const e="node";try{return{html:t(document.documentElement).innerHTML.trim(),url:window.location.href}}catch(p){return{html:"",url:window.location.href,error:p instanceof Error?p.message:"Unknown error while getting HTML"}}function t(p=document.body){const g=[p],y=n(p);if(!y)return console.error("Failed to process DOM. Fallback to original DOM"),p;const v=[y];for(;g.length>0;){const x=g.pop(),b=v.pop();if(!x||!b)break;x.childNodes.forEach(_=>{const w=n(_);w!==null&&(b.appendChild(w),v.push(w),g.push(_))})}return y}function n(p){if(!c(p))return null;const g=p.cloneNode();if(d(p)){if(i(p)){if(!p.hasAttribute(e)){const y=s();p.setAttribute(e,y),g.setAttribute(e,y)}r(p,g)}return a(g)}return g}function r(p,g){const y=["value"],v=["checked","disabled","hidden","readonly","required","selected"];for(const x of y)typeof p[x]<"u"&&g.setAttribute(x,p[x]);for(const x of v)typeof p[x]<"u"&&(p[x]?g.setAttribute(x,""):g.removeAttribute(x))}function s(){return globalThis.__idCounter||(globalThis.__idCounter=0),`${globalThis.__idCounter++}`}function a(p){const g=p.getAttributeNames();for(const y of g){if(y=="href"){const v=p.getAttribute(y)||"";v.startsWith("http:")||v.startsWith("https:")||p.removeAttribute(y);continue}if(y==="name"&&p.getAttribute(y).length>128){p.removeAttribute(y);continue}o(y)||p.removeAttribute(y)}return p}function o(p){return["alt","aria-checked","aria-description","aria-disabled","aria-expanded","aria-hidden","aria-label","aria-readonly","aria-required","aria-role","aria-selected","checked","content","default","disabled","name","placeholder","readonly","required","role","selected","title","type","value",e].includes(p)}function i(p){const g=["A","BUTTON","DETAILS","EMBED","INPUT","MENU","MENUITEM","OBJECT","SELECT","TEXTAREA","SUMMARY"],y=["button","menu","menuitem","link","checkbox","radio","slider","tab","tabpanel","textbox","combobox","grid","listbox","option","progressbar","scrollbar","searchbox","switch","tree","treeitem","spinbutton","tooltip"],v=["menu","menuitem","button"],x=["onclick","tabindex","autofocus"],b=p.tagName,_=p.getAttribute("role"),w=p.getAttribute("aria-role");return g.includes(b)||x.some(S=>p.hasAttribute(S))||_&&y.includes(_)||w&&v.includes(w)}function c(p){return d(p)?m(p)?!0:!h(p):u(p)}function u(p){return p.nodeType===Node.TEXT_NODE&&!!p.textContent?.trim()}function d(p){return p.nodeType===Node.ELEMENT_NODE}function m(p){const g=["HEAD","TITLE"],y=["description"];return g.includes(p.tagName)||p.tagName==="META"&&y.some(v=>p.getAttribute("name")===v)}function h(p){return p.hidden||p.getAttribute("aria-hidden")==="true"?!0:!(p.checkVisibility({contentVisibilityAuto:!0,opacityProperty:!0,visibilityProperty:!0})||p.computedStyleMap().get("display").value==="contents")}}function Cq({selector:e,value:t,submit:n}){const r=document.querySelector(e);if(!r)return{success:!1,reason:"not found"};if(r.scrollIntoView({behavior:"auto",block:"center",inline:"center"}),r instanceof HTMLElement&&r.focus(),r.tagName==="INPUT"||r.tagName==="TEXTAREA")r.value=t;else if(r instanceof HTMLElement&&r.isContentEditable)r.innerText=t;else return{success:!1,reason:"not editable"};if(r.dispatchEvent(new Event("input",{bubbles:!0})),r.dispatchEvent(new Event("change",{bubbles:!0})),n){let s=null;"closest"in r&&(s=r.closest("form")),!s&&(r instanceof HTMLInputElement||r instanceof HTMLTextAreaElement)&&(s=r.form),s?.requestSubmit?.()??s?.submit?.()}return{success:!0}}function VXe({selector:e}){const t=document.querySelector(e);return t instanceof HTMLElement&&t.offsetParent!==null?(t.scrollIntoView({behavior:"auto",block:"center",inline:"center"}),t.click(),{success:!0,outerHTML:t.outerHTML,text:t.innerText,tag:t.tagName}):{success:!1,reason:t?"invisible":"not found"}}function $Xe({scrollDirection:e}){const t=window.innerHeight,n=Math.round(t*4);return window.scrollBy({top:e===RA.DOWN?n:-n,left:0,behavior:"smooth"}),{scrolledBy:e===RA.DOWN?n:-n,scrollTop:window.scrollY}}function WXe({url:e}){window.location.href=e}const HXe=async(e,t)=>new GXe(e,t).start();class zXe{bridge;constructor(t){this.bridge=t}async GetPageState(t){const n=t.tab_id,r=await this.bridge.tabs_get({id:n}),{result:s}=await this.bridge.agent_execute_js({id:n,js:`(${BXe.toString()})()`});return console.log("[agent] GetPageState content:",{result:s}),ee.log("[agent] GetPageState content:",{result:s}),{page_state:{html:s.html,title:r.tab?.title??"",url:r.tab?.url??"",screenshot:void 0}}}async RunActions(t){console.log("[agent] RunActions request:",t),ee.log("[agent] RunActions request:",t);for(const n of t.actions){const r=t.tab_id;if(n.type===jf.CLICK){const s=await this.executeJs(r,VXe,{selector:n.selector??""});console.log("[agent] Click action result:",s),ee.log("[agent] Click action result:",s)}else n.type===jf.WAIT?await new Promise(s=>setTimeout(s,n.duration||1e3)):n.type===jf.SCROLL_PAGE?await this.executeJs(r,$Xe,{scrollDirection:n.scroll_direction??RA.DOWN}):n.type===jf.NAVIGATE?await this.executeJs(r,WXe,{url:n.value??""}):n.type===jf.FILL?await this.executeJs(r,Cq,{selector:n.selector??"",value:n.value??"",submit:!1}):n.type===jf.SEARCH?await this.executeJs(r,Cq,{selector:n.selector??"",value:n.value??"",submit:!0}):(console.warn("[agent] Unknown action type:",n.type),ee.warn("[agent] Unknown action type:",n.type));await this.bridge.agent_wait_idle({id:r}),await new Promise(s=>setTimeout(s,500))}return this.GetPageState({tab_id:t.tab_id,capture_screenshot:t.capture_screenshot})}async ShowMessage(t){return console.log("[agent] ShowMessage request:",t),ee.log("[agent] ShowMessage request:",t),{}}async ReportTaskProgress(t){return console.log("[agent] ReportTaskProgress request:",t),ee.log("[agent] ReportTaskProgress request:",t),{}}async ReportTaskComplete(t){return console.log("[agent] ReportTaskComplete request:",t),ee.log("[agent] ReportTaskComplete request:",t),{}}async executeJs(t,n,...r){return(await this.bridge.agent_execute_js({id:t,js:`(${n.toString()})(${r.map(a=>JSON.stringify(a)).join(",")})`})).result}}class GXe{payload;bridge;browserService;socket;constructor(t,n){this.payload=t,this.bridge=n,this.browserService=new zXe(n)}async start(){ee.log("[agent] Starting agent task:",this.payload),console.log("[agent] Starting agent task:",this.payload);const t=performance.now();let n=()=>{},r=()=>{};const s=new Promise((c,u)=>{n=c,r=u}),a=this.payload.base_url+"/agent";this.socket=new WebSocket(a),this.socket.onopen=n,this.socket.onerror=r,this.socket.onmessage=this.handleRpcMessage.bind(this),await s;const{tab:o}=await this.bridge.tabs_create({url:this.payload.start_url,hidden:!1,agent:!0});await this.bridge.agent_wait_idle({id:o.id});const i=await this.browserService.GetPageState({tab_id:o.id,capture_screenshot:!1});return this.socket.send(JSON.stringify({start_agent:{page_state:i.page_state,tab_id:o.id,task:this.payload.task,task_uuid:this.payload.uuid,extra_headers:this.payload.extra_headers,extension_version:"0.0.1",vision:this.payload.vision,url:this.payload.start_url,client_start_time_ms:Math.round(performance.now()-t),attachments:this.payload.attachments}})),()=>{this.socket?.close(),this.bridge.tabs_close({id:o.id})}}async handleRpcMessage(t){const n=JSON.parse(t.data),r=n.request_id,s=a=>{this.socket?.readyState===WebSocket.OPEN?this.socket.send(JSON.stringify({rpc_response:a})):(console.warn("[agent] Socket is not open, cannot send response:",a),ee.warn("[agent] Socket is not open, cannot send response:",a))};try{if(!n.method||!(n.method in this.browserService))throw ee.error("[agent] Unknown method:",n.method),console.error("[agent] Unknown method:",n.method),new Error(`Unknown method: ${n.method}`);const a=n.request?JSON.parse(n.request):void 0,o=n.method,i=await this.browserService[o]({...a});s({request_id:r,response:JSON.stringify(i)})}catch(a){const o=JSON.stringify({status:"error",error:`${a}`});s({request_id:r,response:o}),ee.error("[agent] Error handling RPC message:",a,n),console.error("[agent] Error handling RPC message:",a,n)}}}class qXe{requests=new Map;bridge;constructor(){this.bridge=new Proxy({},{get:(t,n)=>r=>{const s=ar(),a={request_id:s,[n]:r??{}};return new Promise((o,i)=>{this.requests.set(s,c=>{"error"in c?i(new Error(String(c.error))):o(c)}),window.cometBridge?.postMessage(JSON.stringify(a))})}}),this.startListenMessages()}startListenMessages(){window.cometBridge&&(window.cometBridge.onmessage=t=>{const n=t.data;if(n)try{const r=JSON.parse(n),s=this.requests.get(r.request_id);s?(this.requests.delete(r.request_id),s(r)):(console.warn("No callback found for requestId",r.request_id,r),ee.warn("No callback found for requestId",r.request_id,r))}catch(r){console.warn("Failed to parse bridge response",n,r),ee.warn("Failed to parse bridge response",n,r)}})}}class Eq{bridge;constructor(){this.bridge=new Proxy({},{get:(t,n)=>async r=>{const a={request_id:ar(),[n]:r??{}},o=await window.webkit?.messageHandlers?.cometBridge?.postMessage(JSON.stringify(a));if(!o)throw new Error("No response from cometBridge");return JSON.parse(o)}})}}function KXe(){return yo((e,t)=>({platformInfo:void 0,sidecarSourceTab:{url:"/",title:"",tabId:-1},screenshotToolEnabled:!0,sidecarUrlByTabId:new Map,tasksState:{},navigationResults:{},classifierResults:{},omniboxInput:{},navigationMeta:{},taskScreenshots:{},userSelection:void 0,mcpStdioServers:void 0,mcpTools:void 0,installedDxts:void 0,pendingTasks:new Map,actions:{setPlatformInfo:n=>{e({platformInfo:n})},setSidecarUrlByTabId:(n,r,s)=>{const a=t().sidecarUrlByTabId;a.set(n,{url:r,updatedAt:s??Date.now()}),e({sidecarUrlByTabId:a})},deleteSidecarUrlByTabId:n=>{const r=t().sidecarUrlByTabId;r.delete(n),e({sidecarUrlByTabId:r})},setSourceTab:n=>{let r=!0;try{const s=new URL(n.url);r=!((s.protocol==="chrome:"||s.protocol==="comet:")&&s.hostname!=="newtab")}catch{}e({sidecarSourceTab:n,screenshotToolEnabled:r})},setLastOmniboxInput:(n,r)=>{e(s=>({omniboxInput:{...s.omniboxInput,[n]:r}}))},addNavigationResults:(n,{results:r,classifierResult:s,...a})=>{r?.length&&e(o=>{const i={navigationResults:{...o.navigationResults,[n]:r}};return s&&(i.classifierResults={...o.classifierResults,[n]:s}),a&&!o.navigationMeta[n]&&(i.navigationMeta={...o.navigationMeta,[n]:a}),i})},setTaskScreenshot:(n,r)=>{e(s=>({taskScreenshots:{...s.taskScreenshots,[n]:r}}))},setTaskState:(n,r)=>{e(s=>{const a={...s.tasksState};return r===void 0?delete a[n]:a[n]={is_paused:r},{tasksState:a}})},setUserSelection:n=>{e({userSelection:n})},clearUserSelection:()=>{e({userSelection:void 0})},setMcpStdioServers:n=>{e({mcpStdioServers:n})},setMcpTools:n=>{e({mcpTools:n})},setInstalledDxts:n=>{e({installedDxts:n})},setPendingTask:(n,r)=>{e(s=>{const a=new Map(s.pendingTasks);return a.set(n,r),{pendingTasks:a}})},deletePendingTask:n=>{e(r=>{const s=new Map(r.pendingTasks);return s.delete(n),{pendingTasks:s}})},getPendingTask:n=>t().pendingTasks.get(n)}}))}const YXe="mcjlamohcooanphmebaiigheeeoplihb",QXe="streamId",XXe=Object.freeze([]);class ZXe{tools;mobileProxy=new Eq;isTestDebugMode=!1;platform="web";useAgentExtensionTools=!0;store=KXe();mainExtension;agentExtension;taskTeardowns=new Map;emitter=Vue();constructor(){const t=oi();t?.android_version&&(this.platform="android"),t?.ios_version&&(this.platform="ios"),this.useAgentExtensionTools=t?.agent_extension_version!=="0.0.96",this.mainExtension=Sq({onMessage:this.handleMessage,extensionId:YXe,name:"entropy_client_context"}),this.agentExtension=Sq({onMessage:this.handleAgentExtensionMessage,extensionId:DXe,name:FXe}),this.tools=JXe(this.agentExtension),this.platform==="web"?this.mainExtension.sendMessage({type:"INIT"}).then(n=>{n&&(this.isTestDebugMode=!!n.isTestDebugMode)},n=>{if(Pi())throw n}):this.mobileProxy=this.platform==="android"?new qXe:new Eq,F9e()}getStore(){return this.store}async openNewTab(t){const n=new URL(t);n.searchParams.delete("erp"),n.pathname=n.pathname.replace("/sidecar",""),await this.openTab({url:n.toString(),request_id:"openNewTab",key:"openNewTab"})}_getNavigationResults(t){return this.store.getState().navigationResults[t]??XXe}async closeSideCar(){return this.send({type:"HIDE_SIDECAR"})}async openTab(t){if(this.platform!=="web"){const r=(await this.mobileProxy?.bridge.tabs_create({url:t.url,hidden:!1})).tab;return{is_success:!0,_metadata:{time:1},result:{tab_id:r.id,url:r.url,title:r.title,last_accessed:r.last_accessed}}}return this.useAgentExtensionTools?{is_success:!0,result:(await this.tools.OpenTab({key:t.key??"unknown",request_id:t.request_id??"unknown",url:t.url,tab_id:t.tabId})).tab}:this.send({type:"OPEN_TAB",payload:{tabId:t.tabId??null,...t}})}async injectSearchResults(t,n,r={}){try{const s=Wl(),a={streamId:n,...r};uo("web.frontend.comet_navigation_run_inject",a);const o=this.platform==="web"?await this.send({type:"NAV_SEARCH",payload:{query:t,streamId:n}}):await this.mobileProxy.bridge.fetch_navigation_search_results({query:t,stream_id:n});if(this.isWebNavigationPayload(o)&&!o.is_success)throw new Error("Failed to inject search results");const i=this.extractNavigationData(o);this.store.getState().actions.addNavigationResults(n,i);const u={type:i.type??"unknown",...a};s.addTiming("web.frontend.comet_navigation_search_results",u);const d=s.getAbsoluteStartTime(),m={...u,startTime:d};this.isWebNavigationPayload(o)&&(o._metadata?.time&&Il("web.frontend.comet_navigation_extension_processing",{duration:o._metadata.time,...m}),o.searchTime&&Il("web.frontend.comet_navigation_search_time",{duration:o.searchTime,...m}),o.classifyTime&&Il("web.frontend.comet_navigation_classify_time",{duration:o.classifyTime,...m}),o.networkingTime&&Il("web.frontend.comet_navigation_networking_time",{duration:o.networkingTime,...m}))}catch(s){ee.error(new ky("NAV_RESULTS_INJECTION_FAILED",{details:{streamId:n},cause:s}))}}async getIsCometDefaultBrowser(t){try{const n=await this.send({type:"GET_IS_DEFAULT_BROWSER",key:t});return n.is_success?n.isDefault:null}catch{return null}}async setCometAsDefaultBrowser(t){return this.send({type:"SET_AS_DEFAULT_BROWSER",key:t})}subscribeCometNavigate(t){const n=r=>{const s=new URL(r.detail.url);if(delete window.pplxNavIntentEvent,this.store.getState().actions.clearUserSelection(),uo("comet_navigate"),s.pathname==="/search"&&s.searchParams.has("q")&&(s.pathname="/search/new"),s.pathname==="/search/new"){const a=ar(),o=r.detail.text||"",i=s.searchParams.get("q")??"";s.searchParams.set(QXe,a),this.injectSearchResults(i,a,{omnisearch:!0}),this.store.getState().actions.setLastOmniboxInput(a,o)}t({url:s})};return window.pplxNavIntentEvent&&n(window.pplxNavIntentEvent),document.addEventListener("comet-navigate",n),()=>{document.removeEventListener("comet-navigate",n)}}subscribeToCometQuery(t){const n=r=>{const s=r.detail.query;delete window.pplxCometQuery,t(s)};return window.pplxCometQuery&&n(window.pplxCometQuery),document.addEventListener("comet-query",n),()=>{document.removeEventListener("comet-query",n)}}getLastOmniboxInput(t){return this.store.getState().omniboxInput[t]}async searchTabs(t){if(this.platform!=="web"){const{tabs:n}=await this.mobileProxy.bridge.tabs_query();return{is_success:!0,tabs:n.map(r=>({tabId:r.id,title:r.title??"",url:r.url,isCurrent:!1,lastAccess:r.last_accessed??0,snippet:""})),_metadata:{time:1}}}return this.useAgentExtensionTools?{is_success:!0,tabs:(await this.tools.SearchBrowser({queries:[],sources:["OPEN_TABS"],key:t,history_max_results:0,open_tabs_max_results:500,closed_tabs_max_results:0,request_id:t})).open_tabs_results.map(r=>({...r,tabId:r.tab_id,lastAccess:r.last_accessed}))}:this.send({type:"SEARCH_TABS",payload:{queries:[]},key:t})}async ungroupTabs(t,n,r){return this.useAgentExtensionTools?{is_success:!0,tabIds:(await this.tools.UngroupTabs({group_ids:t.groupIds,tab_ids:t.tabIds,key:n,request_id:r})).ungrouped_tabs.map(a=>({id:a.tab_id,error:a.error})),groupIds:t.groupIds.map(a=>({id:a}))}:this.send({type:"UNGROUP_TABS",payload:t,key:n})}showNotification(){this.send({type:"SHOW_NOTIFICATION"}).catch(()=>{})}sendThreadStatusToMobile(t){const{status:n,streamId:r,text:s}=t;this.mobileProxy.bridge.thread_status({type:n,text:s,stream_id:r}).catch(a=>{ee.error("Failed to send thread status to mobile bridge",a)})}subscribeToMobileCommands(){const t=n=>{n.detail.cmd==="stop"?this.emitter.emit("BROWSER_TASK_STOP"):ee.warn("[comet-mobile] Unknown mobile command",n.detail.cmd)};return document.addEventListener("comet-mobile-cmd",t),()=>{document.removeEventListener("comet-mobile-cmd",t)}}sendQueryStatusToMobile(t){this.platform!=="web"&&this.mobileProxy.bridge.query_status({status:t}).catch(n=>{ee.error("Failed to send status to mobile bridge",n)})}setTabProgress(t){this.send({type:"SET_TAB_PROGRESS",payload:t}).catch(()=>{})}async searchTabGroups(t,n,r){return this.useAgentExtensionTools?{is_success:!0,results:(await this.tools.SearchTabGroups({queries:t.queries,request_id:r,key:n})).tab_groups.map(a=>({...a,color:a.color,tabs:a.tabs.map(o=>({...o,tabId:o.tab_id,isCurrent:o.is_current_tab??!1}))}))}:this.send({type:"SEARCH_TAB_GROUPS",payload:t,key:n})}showFeedbackForm(){this.send({type:"SHOW_FEEDBACK_FORM"}).catch(()=>{})}subscribeScreenshotCaptured(t){return this.emitter.on("SCREENSHOT_CAPTURED",t)}handleAgentExtensionMessage=t=>{try{Kr(t).with({type:"SCREENSHOT_CAPTURED"},async({payload:{screenshot:n}})=>{const s=await(await fetch(n)).blob(),a=new File([s],"screenshot.png",{type:s.type});ee.info("Screenshot captured"),this.emitter.emit("SCREENSHOT_CAPTURED",a)}).with({type:"BROWSER_TASK_PROGRESS_SCREENSHOT"},async({payload:{screenshot:n,taskUuid:r}})=>{this.store.getState().actions.setTaskScreenshot(r,`data:image/png;base64,${n}`)}).with({type:"BROWSER_TASK_PROGRESS"},({payload:{taskUuid:n,progress:r}})=>{const s=this.store.getState().actions.getPendingTask(n);s?.onProgress&&s.onProgress(r),this.emitter.emit("BROWSER_TASK_PROGRESS",n,r)}).with({type:"BROWSER_TASK_COMPLETE"},({payload:{taskUuid:n,result:r}})=>{const s=this.store.getState().actions.getPendingTask(n);s&&(this.store.getState().actions.deletePendingTask(n),s.resolve(r)),this.emitter.emit("BROWSER_TASK_COMPLETE",n,r)}).with({type:"BROWSER_TASK_STOP"},()=>{ee.info("Browser task stopped"),this.emitter.emit("BROWSER_TASK_STOP")}).with({type:"BROWSER_TASK_PAUSE_RESUME_FRONTEND"},({payload:n})=>{ee.info("Browser task paused/resumed"),this.store.getState().actions.setTaskState(n.task_uuid,n.is_paused)}).with({type:"AGENT_TASK_FAILURE"},({payload:{taskUuid:n,extraHeaders:r,error:s}})=>{mle({clientPayloadCacheKey:n,errorType:s,errorMsg:"Agent task failure."},r,"CometAdapter").catch(a=>{ee.error("Error sending tool failure",a)})}).with({type:"USER_SELECTION_CAPTURED"},({payload:{selection:n}})=>{this.store.getState().actions.setUserSelection(n)}).with({type:"MOVE_THREAD_TO_SIDECAR"},({payload:{url:n,task_tab_ids:r}})=>{const s=new URL(n);s.pathname="/sidecar"+s.pathname;const a=s.toString();r.forEach(o=>{this.store.getState().actions.setSidecarUrlByTabId(o,s.pathname)}),document.dispatchEvent(new CustomEvent("comet-navigate",{detail:{url:a,text:""}}))}).otherwise(n=>{ee.log("Unknown message type",n)})}catch(n){ee.error("Error parsing entropy message",n)}};async fetchOpenedTabs(){const t=await this.searchTabs("fetch_opened_tabs");return t.is_success?t.tabs.filter(n=>(n.url.startsWith("https://")||n.url.startsWith("file://"))&&!n.isCurrent).sort((n,r)=>r.lastAccess-n.lastAccess):[]}async getPersonalSuggestions(t,n){return this.send({type:"GET_PERSONAL_SUGGESTIONS",payload:t,key:n})}async getTopMostVisitedUrls(t,n){return this.send({type:"GET_TOP_MOST_VISITED_URLS",payload:t,key:n})}getQuickActions(t){return this.send({type:"GET_QUICK_ACTIONS",key:t})}async getInitialHistorySummary(t,n,r){return this.SearchBrowser({queries:[],sources:["HISTORY"],key:t,request_id:"",start_time:n*24*60*60*1e3,history_max_results:r,open_tabs_max_results:r,closed_tabs_max_results:r})}async getHistorySummary(t,n=[],r=14,s=20){return this.SearchBrowser({queries:n,sources:["HISTORY"],key:t,request_id:"",start_time:r*24*60*60*1e3,history_max_results:s,open_tabs_max_results:s,closed_tabs_max_results:s})}async GetContent(t){return this.platform!=="web"?{contents:(await Promise.allSettled(t.pages.map(async r=>r.id?(await this.mobileProxy.bridge.tabs_get_content({id:r.id})).tab_content:(await this.mobileProxy.bridge.tabs_get_url_content({url:r.url})).tab_content))).map(r=>r.status==="fulfilled"?r.value:void 0).filter(r=>r!==void 0).map(r=>({html:"",id:r.id,url:r.url,title:r.title??"",og_meta:r.og_meta??{},markdown:r.markdown??""}))}:this.tools.GetContent(t)}async GetVisibleTabScreenshot(t){return this.tools.GetVisibleTabScreenshot(t)}async SearchBrowser(t){if(this.platform!=="web"){const n=t.sources.includes("HISTORY")?Promise.allSettled((t.queries.length?t.queries:[""]).map(async o=>await this.mobileProxy.bridge.history_search({text:o,max_results:t.history_max_results,start_time:t.start_time,end_time:t.end_time}))):[],[{tabs:r},s]=await Promise.all([t.sources.includes("OPEN_TABS")?this.mobileProxy.bridge.tabs_query():{tabs:[]},n]),a=s.map(o=>o.status==="fulfilled"?o.value.history_items:[]).flat().map(o=>({title:o.title??"",url:o.url,last_accessed:o.last_visit_time??Date.now(),visit_count:o.visit_count??1}));return{closed_tabs_results:[],history_results:a,open_tabs_results:r.map(o=>({tab_id:o.id,title:o.title??"",url:o.url,last_accessed:o.last_accessed??0}))}}return this.tools.SearchBrowser(t)}async GetSidecarContext(t){return this.tools.GetSidecarContext(t)}async closeTabs(t,n,r){if(this.platform!=="web"){const{tabs:s}=await this.mobileProxy.bridge.tabs_query(),a=t.tabIds??[],o=s.filter(i=>a.includes(i.id));return o.forEach(i=>{this.mobileProxy.bridge.tabs_close({id:i.id})}),{is_success:!0,result:o.map(i=>({id:i.id,url:i.url,title:i.title??""}))}}return this.useAgentExtensionTools?{is_success:!0,result:(await this.tools.CloseTabs({tab_ids:t.tabIds??[],key:n,request_id:r})).tabs.map(a=>({id:a.tab_id,...a}))}:this.send({type:"CLOSE_TABS",payload:t,key:n})}async groupTabs(t,n,r){if(this.useAgentExtensionTools){const s=await this.tools.GroupTabs({...t,tab_ids:t.tabIds,group_id:t.groupId,key:n,request_id:r});if(!s.tab_group)throw new Error("[GroupTabs] Tab group not found");return{is_success:!0,tabGroup:{id:s.tab_group.id,title:s.tab_group.title,collapsed:s.tab_group.collapsed??!1,color:s.tab_group.color}}}return this.send({type:"GROUP_TABS",payload:t,key:n})}async maybeSendSearchResult(t,n,r){if(!this.isTestDebugMode||!t)return;const a=[...t.web_results??[],...t.extra_web_results??[]].map(o=>({name:o.name,snippet:o.snippet,url:o.url,isClientContext:!!o.is_client_context}));return this.send({type:"PERPLEXITY_SEARCH_RESULT",payload:{answer:t.answer,webResults:a,isPending:r,steps:n.map(o=>o.step_type)}})}submitTask(t,n){return new Promise((r,s)=>{const a=t.entryId;this.store.getState().actions.setPendingTask(a,{resolve:r,reject:s,onProgress:n});const o=this.taskTeardowns.get(a)??[];if(this.taskTeardowns.set(a,o),this.platform!=="web"){const i=HXe(t,this.mobileProxy.bridge);o.push(()=>i.then(c=>{c(),this.store.getState().actions.setTaskState(t.uuid,void 0)})),r({message:"Mobile task started",success:!0});return}o.push(this.agentExtension.sendMessageToPort(t))})}moveThreadToSidecar(t){this.agentExtension.sendMessage({type:"MOVE_THREAD_TO_SIDECAR",payload:{active_task_uuid:t}})}async makeTaskVisible(t){const n=await this.agentExtension.sendMessage({type:"MAKE_TASK_VISIBLE",payload:{task_uuid:t}});if(n.tab_ids){const r=new URL(window.location.href).pathname;n.tab_ids.forEach(s=>{this.store.getState().actions.setSidecarUrlByTabId(s,r)})}}cleanupTasks(t){if(!t)return;const n=this.taskTeardowns.get(t);n&&(n.forEach(r=>r()),this.taskTeardowns.delete(t))}captureSourceTabScreenshotV2({sourceTabUrl:t=""}){this.agentExtension.sendMessage({type:"CAPTURE_SCREENSHOT_V2",payload:{tabId:void 0,sourceTabUrl:t}})}deactivateScreenshotTool(){this.agentExtension.sendMessage({type:"DEACTIVATE_SCREENSHOT_TOOL",payload:{tabId:void 0}})}subscribeToSidecarBrowserTaskStop(t){return this.emitter.on("BROWSER_TASK_STOP",t)}subscribeForceSubmitQuery(t){return this.emitter.on("FORCE_SUBMIT_QUERY",t)}subscribeQuickActionButtonFired(t){return this.emitter.on("QUICK_ACTION_BUTTON_FIRED",t)}getMcpTools(t){return this.sendToAgent({type:"GET_MCP_TOOLS",payload:{serverName:t}})}callMcpTool(t,n){return this.sendToAgent({type:"CALL_MCP_TOOL",payload:t,context:n})}getMcpStdioServers(){const t=this.sendToAgent({type:"GET_STDIO_MCP_SERVERS",payload:void 0});return t.then(n=>{this.getStore().getState().actions.setMcpStdioServers(n)}).catch(()=>{}),t}addMcpStdioServer(t){return this.sendToAgent({type:"ADD_STDIO_MCP_SERVER",payload:t})}async updateMcpStdioServer(t,n){return await this.removeMcpStdioServer(t),this.addMcpStdioServer(n)}removeMcpStdioServer(t){return this.sendToAgent({type:"REMOVE_STDIO_MCP_SERVER",payload:{name:t}})}installDxt(t){return this.sendToAgent({type:"INSTALL_DXT",payload:{url:t}})}uninstallDxt(t){return this.sendToAgent({type:"UNINSTALL_DXT",payload:{name:t}})}getInstalledDxts(){const t=this.sendToAgent({type:"GET_INSTALLED_DXT"});return t.then(n=>{this.getStore().getState().actions.setInstalledDxts(n)}).catch(()=>{}),t}async refreshDxtAndMcpState(){await Promise.all([this.getMcpStdioServers(),this.getInstalledDxts()])}isWebNavigationPayload(t){return this.platform==="web"&&typeof t=="object"&&t!==null&&"_metadata"in t}isMobileNavigationPayload(t){return this.platform!=="web"&&typeof t=="object"&&t!==null&&"nav_search_response"in t}extractNavigationData(t){if(this.isWebNavigationPayload(t))return t;if(this.isMobileNavigationPayload(t))return t.nav_search_response;throw new Error("Invalid navigation payload format")}async send(t){return this.mainExtension.sendMessage(t).then(n=>(n.is_success=!n.errorType,n))}async sendToAgent(t){return this.agentExtension.sendMessage(t).then(n=>{if(!n.success)throw new Error(n.error);return n.response})}handleMessage=t=>{try{Kr(t).with({type:"UPDATE_SOURCE_TAB"},r=>{this.store.getState().actions.setSourceTab(r.payload),r.payload.url!==this.store.getState().sidecarSourceTab.url&&this.store.getState().actions.clearUserSelection()}).with({type:"FORCE_SUBMIT_QUERY"},r=>{this.isTestDebugMode&&this.emitter.emit("FORCE_SUBMIT_QUERY",r.payload)}).with({type:"QUICK_ACTION_BUTTON_FIRED"},()=>{this.emitter.emit("QUICK_ACTION_BUTTON_FIRED")}).with({type:"INIT"},r=>{this.isTestDebugMode=!!r.payload.isTestDebugMode,this.store.getState().actions.setPlatformInfo(r.payload.platform),this.store.getState().actions.setSourceTab({tabId:r.payload.sourceTabId??-1,url:r.payload.sourceTabUrl??"",title:r.payload.sourceTabTitle??""})}).otherwise(r=>{ee.log("Unknown message type",r)})}catch(n){ee.error("Error parsing entropy message",n)}}}const JXe=e=>new Proxy({},{get(t,n){return r=>e.sendMessage({type:"CALL_TOOL",method:n,request:r}).then(({success:s,response:a})=>{if(!s)throw a;return a}).catch(s=>{throw ee.error("Error calling tool",s),"errorType"in s?s:{errorType:"unhandled",errorMsg:"Proxy error."}})}});var Mq={};const wd=new ZXe,{Provider:eZe,useTrackedState:tZe}=bp("CometState",()=>wd.getStore()),hme=f.createContext(void 0),nZe=({children:e})=>{const t=At(),n=D3e(),{variation:r}=LXe(!0);return f.useLayoutEffect(()=>{const s=Ys();s.erp&&(document.documentElement.dataset.erp=s.erp);const a=wd.subscribeCometNavigate(({url:d})=>{if(d.origin===window.location.origin&&d.pathname.startsWith(t.base)&&(d.pathname=d.pathname.replace(t.base,""),n(d.pathname))){const h=d.searchParams.toString(),p=`${d.pathname}${h?`?${h}`:""}`;t.push(p,void 0,"Comet navigate");return}if(Mq.NEXT_PUBLIC_IS_SIDECAR_BUILD){ee.error("Invalid soft navigation in Sidecar",{url:d}),wd.openTab({url:d.toString()});return}const m=d.toString();window.location.href=m});if(!Mq.NEXT_PUBLIC_IS_SIDECAR_BUILD||r===!1)return a;const o=wd.getStore(),i=setInterval(()=>{o.getState().sidecarUrlByTabId.forEach((m,h)=>{m.updatedAt<Date.now()-1e3*60*60*24*7&&o.getState().actions.deleteSidecarUrlByTabId(h)}),VH(o)},1e3*60*60*6);B9e(o),V9e(o,t);let c=o.getState().sidecarSourceTab;const u=o.subscribe((d,m)=>{if(d.sidecarSourceTab===m.sidecarSourceTab)return;const h=d.sidecarSourceTab;if(h.tabId===c.tabId)return;const p=new URL(window.location.href).pathname;o.getState().actions.setSidecarUrlByTabId(c.tabId,p);const y=o.getState().sidecarUrlByTabId.get(h.tabId)?.url??"/";c=h,y!==p&&(t.replace(y,"Sidecar source tab changed"),VH(o))});return()=>{clearInterval(i),a(),u()}},[t,n,r]),l.jsx(eZe,{children:l.jsxs(hme.Provider,{value:wd,children:[e,l.jsx(rZe,{})]})})};function hr(e=!0){const t=f.useContext(hme);if(!t&&e)throw new Error("useEntropyBrowser must be used inside EntropyBrowserProvider");return t}const _o=tZe,rZe=()=>{const e=_o();f.useEffect(()=>{wd.refreshDxtAndMcpState()},[]);const t=f.useRef([]),n=f.useMemo(()=>{const r=e.mcpStdioServers?.map(a=>a.name)??[],s=t.current;return r.length===s.length&&r.every((a,o)=>a===s[o])?s:(t.current=r,r)},[e.mcpStdioServers]);return f.useEffect(()=>{Promise.all(n.map(r=>wd.getMcpTools(r).catch(()=>[]))).then(r=>{e.actions.setMcpTools(r.flat())})},[e.actions,n]),null};var FT,Tq;function sZe(){if(Tq)return FT;Tq=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,o=/^0o[0-7]+$/i,i=parseInt,c=typeof La=="object"&&La&&La.Object===Object&&La,u=typeof self=="object"&&self&&self.Object===Object&&self,d=c||u||Function("return this")(),m=Object.prototype,h=m.toString,p=Math.max,g=Math.min,y=function(){return d.Date.now()};function v(S,C,E){var M,T,I,j,N,P,R=0,k=!1,O=!1,L=!0;if(typeof S!="function")throw new TypeError(e);C=w(C)||0,x(E)&&(k=!!E.leading,O="maxWait"in E,I=O?p(w(E.maxWait)||0,C):I,L="trailing"in E?!!E.trailing:L);function F(Z){var se=M,Y=T;return M=T=void 0,R=Z,j=S.apply(Y,se),j}function U(Z){return R=Z,N=setTimeout(H,C),k?F(Z):j}function V(Z){var se=Z-P,Y=Z-R,Q=C-se;return O?g(Q,I-Y):Q}function W(Z){var se=Z-P,Y=Z-R;return P===void 0||se>=C||se<0||O&&Y>=I}function H(){var Z=y();if(W(Z))return G(Z);N=setTimeout(H,V(Z))}function G(Z){return N=void 0,L&&M?F(Z):(M=T=void 0,j)}function K(){N!==void 0&&clearTimeout(N),R=0,M=P=T=N=void 0}function $(){return N===void 0?j:G(y())}function q(){var Z=y(),se=W(Z);if(M=arguments,T=this,P=Z,se){if(N===void 0)return U(P);if(O)return N=setTimeout(H,C),F(P)}return N===void 0&&(N=setTimeout(H,C)),j}return q.cancel=K,q.flush=$,q}function x(S){var C=typeof S;return!!S&&(C=="object"||C=="function")}function b(S){return!!S&&typeof S=="object"}function _(S){return typeof S=="symbol"||b(S)&&h.call(S)==n}function w(S){if(typeof S=="number")return S;if(_(S))return t;if(x(S)){var C=typeof S.valueOf=="function"?S.valueOf():S;S=x(C)?C+"":C}if(typeof S!="string")return S===0?S:+S;S=S.replace(r,"");var E=a.test(S);return E||o.test(S)?i(S.slice(2),E?2:8):s.test(S)?t:+S}return FT=v,FT}var aZe=sZe();const kq=Ha(aZe);var pme=typeof window<"u"?f.useLayoutEffect:f.useEffect;function j2(e,t,n,r){const s=f.useRef(t);pme(()=>{s.current=t},[t]),f.useEffect(()=>{const a=window;if(!(a&&a.addEventListener))return;const o=i=>{s.current(i)};return a.addEventListener(e,o,r),()=>{a.removeEventListener(e,o,r)}},[e,n,r])}function O2(e){const t=f.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return pme(()=>{t.current=e},[e]),f.useCallback((...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[t])}var UT=typeof window>"u";function jC(e,t,n={}){const{initializeWithValue:r=!0}=n,s=f.useCallback(h=>n.serializer?n.serializer(h):JSON.stringify(h),[n]),a=f.useCallback(h=>{if(n.deserializer)return n.deserializer(h);if(h==="undefined")return;const p=t instanceof Function?t():t;let g;try{g=JSON.parse(h)}catch(y){return console.error("Error parsing JSON:",y),p}return g},[n,t]),o=f.useCallback(()=>{const h=t instanceof Function?t():t;if(UT)return h;try{const p=window.localStorage.getItem(e);return p?a(p):h}catch(p){return console.warn(`Error reading localStorage key ${e}:`,p),h}},[t,e,a]),[i,c]=f.useState(()=>r?o():t instanceof Function?t():t),u=O2(h=>{UT&&console.warn(`Tried setting localStorage key ${e} even though environment is not a client`);try{const p=h instanceof Function?h(o()):h;window.localStorage.setItem(e,s(p)),c(p),window.dispatchEvent(new StorageEvent("local-storage",{key:e}))}catch(p){console.warn(`Error setting localStorage key ${e}:`,p)}}),d=O2(()=>{UT&&console.warn(`Tried removing localStorage key ${e} even though environment is not a client`);const h=t instanceof Function?t():t;window.localStorage.removeItem(e),c(h),window.dispatchEvent(new StorageEvent("local-storage",{key:e}))});f.useEffect(()=>{c(o())},[e]);const m=f.useCallback(h=>{h.key&&h.key!==e||c(o())},[e,o]);return j2("storage",m),j2("local-storage",m),[i,u,d]}function OC(e){const t=f.useRef(e);t.current=e,f.useEffect(()=>()=>{t.current()},[])}function VBt(e,t=500,n){const r=f.useRef();OC(()=>{r.current&&r.current.cancel()});const s=f.useMemo(()=>{const a=kq(e,t,n),o=(...i)=>a(...i);return o.cancel=()=>{a.cancel()},o.isPending=()=>!!r.current,o.flush=()=>a.flush(),o},[e,t,n]);return f.useEffect(()=>{r.current=kq(e,t,n)},[e,t,n]),s}function gme({threshold:e=0,root:t=null,rootMargin:n="0%",freezeOnceVisible:r=!1,initialIsIntersecting:s=!1,onChange:a}={}){var o;const[i,c]=f.useState(null),[u,d]=f.useState(()=>({isIntersecting:s,entry:void 0})),m=f.useRef();m.current=a;const h=((o=u.entry)==null?void 0:o.isIntersecting)&&r;f.useEffect(()=>{if(!i||!("IntersectionObserver"in window)||h)return;const y=new IntersectionObserver(v=>{const x=Array.isArray(y.thresholds)?y.thresholds:[y.thresholds];v.forEach(b=>{const _=b.isIntersecting&&x.some(w=>b.intersectionRatio>=w);d({isIntersecting:_,entry:b}),m.current&&m.current(_,b)})},{threshold:e,root:t,rootMargin:n});return y.observe(i),()=>{y.disconnect()}},[i,JSON.stringify(e),t,n,h,r]);const p=f.useRef(null);f.useEffect(()=>{var y;!i&&((y=u.entry)!=null&&y.target)&&!r&&!h&&p.current!==u.entry.target&&(p.current=u.entry.target,d({isIntersecting:s,entry:void 0}))},[i,u.entry,r,h,s]);const g=[c,!!u.isIntersecting,u.entry];return g.ref=g[0],g.isIntersecting=g[1],g.entry=g[2],g}function yme(){const[e,t]=f.useState(!1);return f.useEffect(()=>{t(!0)},[]),e}function oZe(){const e=f.useRef(!1);return f.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),f.useCallback(()=>e.current,[])}var Nq={width:void 0,height:void 0};function iZe(e){const{ref:t,box:n="content-box"}=e,[{width:r,height:s},a]=f.useState(Nq),o=oZe(),i=f.useRef({...Nq}),c=f.useRef(void 0);return c.current=e.onResize,f.useEffect(()=>{if(!t.current||typeof window>"u"||!("ResizeObserver"in window))return;const u=new ResizeObserver(([d])=>{const m=n==="border-box"?"borderBoxSize":n==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",h=Aq(d,m,"inlineSize"),p=Aq(d,m,"blockSize");if(i.current.width!==h||i.current.height!==p){const y={width:h,height:p};i.current.width=h,i.current.height=p,c.current?c.current(y):o()&&a(y)}});return u.observe(t.current,{box:n}),()=>{u.disconnect()}},[n,t,o]),{width:r,height:s}}function Aq(e,t,n){return e[t]?Array.isArray(e[t])?e[t][0][n]:e[t][n]:t==="contentBoxSize"?e.contentRect[n==="inlineSize"?"width":"height"]:void 0}var BT=typeof window>"u";function D9(e,t,n={}){const{initializeWithValue:r=!0}=n,s=f.useCallback(h=>n.serializer?n.serializer(h):JSON.stringify(h),[n]),a=f.useCallback(h=>{if(n.deserializer)return n.deserializer(h);if(h==="undefined")return;const p=t instanceof Function?t():t;let g;try{g=JSON.parse(h)}catch(y){return console.error("Error parsing JSON:",y),p}return g},[n,t]),o=f.useCallback(()=>{const h=t instanceof Function?t():t;if(BT)return h;try{const p=window.sessionStorage.getItem(e);return p?a(p):h}catch(p){return console.warn(`Error reading sessionStorage key ${e}:`,p),h}},[t,e,a]),[i,c]=f.useState(()=>r?o():t instanceof Function?t():t),u=O2(h=>{BT&&console.warn(`Tried setting sessionStorage key ${e} even though environment is not a client`);try{const p=h instanceof Function?h(o()):h;window.sessionStorage.setItem(e,s(p)),c(p),window.dispatchEvent(new StorageEvent("session-storage",{key:e}))}catch(p){console.warn(`Error setting sessionStorage key ${e}:`,p)}}),d=O2(()=>{BT&&console.warn(`Tried removing sessionStorage key ${e} even though environment is not a client`);const h=t instanceof Function?t():t;window.sessionStorage.removeItem(e),c(h),window.dispatchEvent(new StorageEvent("session-storage",{key:e}))});f.useEffect(()=>{c(o())},[e]);const m=f.useCallback(h=>{h.key&&h.key!==e||c(o())},[e,o]);return j2("storage",m),j2("session-storage",m),[i,u,d]}var lZe={};const vme=A.memo(({image:e,alt:t,url:n,iconName:r,value:s,category:a})=>{const o=s.length===0,[i,c]=f.useState(!1),{sidecarSourceTab:{url:u}}=_o(),d=Ka(),m=f.useMemo(()=>{if(lZe.NEXT_PUBLIC_IS_SIDECAR_BUILD&&u&&o)return Ev(u);if(e)return e;if(n)return yfe(n)},[e,n,u,o]),h=r?MXe[r]:null,p=o?kUe[d]??fo:fo;return a==="shortcuts"&&!r?l.jsx(be,{icon:U4e,size:"sm",className:"mt-two mr-2 w-5 shrink-0"}):ame(n)?l.jsx("div",{className:"mr-2 flex size-5 shrink-0 items-center justify-center",children:l.jsx(be,{icon:R0,size:"sm",className:"text-foreground"})}):m&&!i?l.jsx("div",{className:"relative mr-2 size-5 shrink-0 overflow-hidden rounded-sm",children:l.jsx("img",{src:m,alt:t??"suggestion",className:"object-cover",sizes:"24px",onError:()=>c(!0)})}):i&&n?l.jsx(z,{className:"mr-2 flex size-5 shrink-0 items-center justify-center overflow-hidden rounded-sm",variant:"offsetPlus",children:l.jsx(xt,{icon:lXe.faGlobe})}):l.jsx(be,{icon:h??p,size:"sm",className:"mt-two mr-2 w-5 shrink-0"})});vme.displayName="LeftIcon";const xme=A.memo(({onClick:e,url:t,category:n})=>n==="shortcuts"?null:sme(t)?l.jsx("div",{className:"flex h-full items-center",children:l.jsx(be,{icon:Jr,size:"md",className:"text-quiet -mr-xs"})}):l.jsx("button",{className:"appearance-none",onPointerDown:r=>{r.stopPropagation(),r.preventDefault(),e(r)},type:"button",children:l.jsx(xt,{icon:t?uXe.faGlobePointer:oXe.faArrowUpLeft})}));xme.displayName="RightIcon";const bme=A.memo(()=>{const{$t:e}=X();return l.jsxs("div",{className:"flex w-full min-w-0 flex-row items-center whitespace-pre p-[8px] leading-tight",children:[l.jsx(D,{className:"-mr-three px-three shrink-0",color:"super",inline:!0,variant:"small",children:l.jsx(be,{size:"xs",icon:dl})}),l.jsx(D,{variant:"tinyMono",color:"super",className:"ml-2",children:e({defaultMessage:"Comet Assistant",id:"ML678gEBQ1"})})]})});bme.displayName="CometAssistantRow";const Tp=A.memo(({isOpen:e,suggestedQueries:t,focusedIndex:n,setFocusedIndex:r,handlePasteQuery:s,handleSubmit:a,dropdownClassName:o,dropdownType:i="query",components:c,value:u,children:d,popoverClassName:m,categoryTitleClassName:h,userInputQuery:p,portalTarget:g,placement:y="bottom",allowNonSequentialMatch:v=!1,isCometHome:x,scrollableShards:b=[],floatingStrategy:_,shouldEnableStacking:w=!1})=>{const{trackEvent:S}=Te(),{RightIconComponent:C=xme,LeftIconComponent:E=vme,QueryContentComponent:M}=c??{},T=f.useMemo(()=>t.map(({query:G,query_uuid:K,image:$,imageDark:q,url:Z,title:se,description:Y="",identifier:Q="",category:re,subscribed:te=!1,metadata:le,submission_query:ie,icon:pe,is_comet_assistant:me,shouldShowTitle:de,actionHandler:ve},Ae,Se)=>{if(i==="select")return{input:G,completion:"",query_uuid:K,title:se,image:$,imageDark:q,url:Z,description:Y,identifier:Q,category:re,subscribed:te,submission_query:ie,icon_name:pe,is_comet_assistant:me,shouldShowTitle:de,actionHandler:ve};const De=p?n===-1?u:p:u;return De.length>0&&G.startsWith(De)?{input:De,completion:G.slice(De.length),query_uuid:K,title:se,image:$,imageDark:q,url:Z,category:re,metadata:le,...(re==="ticker"||re==="news")&&{description:Y},submission_query:ie,icon_name:pe,is_comet_assistant:me,shouldShowTitle:de,actionHandler:ve}:v&&!Y&&De.length>0&&De.length<=G.length&&ume(De,Se[Ae],!0)[0]?{input:"",completion:G,inputs_and_completions:EXe(De,G),query_uuid:K,title:se,image:$,url:Z,category:re,metadata:le,...(re==="ticker"||re==="news")&&{description:Y},submission_query:ie,icon_name:pe,is_comet_assistant:me,shouldShowTitle:de,actionHandler:ve}:{input:G,completion:"",query_uuid:K,title:se,image:$,imageDark:q,url:Z,category:re,metadata:le,...(re==="ticker"||re==="news")&&{description:Y},submission_query:ie,icon_name:pe,is_comet_assistant:me,shouldShowTitle:de,actionHandler:ve}}),[t,u,i,p,n,v]),I=f.useMemo(()=>fXe(T),[T]),j=f.useMemo(()=>mXe(I),[I]),N=f.useMemo(()=>j.some(G=>I[G].some(K=>K.is_comet_assistant)),[j,I]),P=f.useCallback((G,K)=>{if(K){window.open(K,"_blank");return}S("auto suggestion filled",{}),s(G)},[s,S]),R=B("!block w-full",y==="bottom"?"rounded-b-[20px]":"rounded-t-[20px]",m),k=f.useRef(null),[O,L]=f.useState(null),F=!e||t.length===0;iZe({ref:k,onResize:G=>{L(G?.height??null)}});const U=f.useMemo(()=>({portalTarget:g??void 0,removeScroll:!0,shards:b}),[g,b]),V=f.useMemo(()=>l.jsx("div",{className:B(y==="bottom"?"!border-t-subtlest shadow-super/10 mt-[-5px] rounded-b-[20px] shadow-md dark:shadow-lg dark:shadow-black/10":"!border-b-subtler mb-[-5px] rounded-t-[20px]","border-subtle border","bg-raised dark:bg-offset p-3",o),children:l.jsx(_e.div,{animate:{height:F?0:O??"auto"},initial:{height:0},transition:{height:{type:"spring",bounce:.1,duration:.05}},style:{overflow:"hidden"},children:l.jsxs("div",{ref:k,className:"flex flex-col items-stretch",children:[x&&N?l.jsx(bme,{}):null,j.map((G,K)=>{const $=I[G],q=jP[G]||{order:999,showHeader:!1};let Z=0;for(let se=0;se<K;se++){const Y=j[se];Z+=I[Y]?.length||0}return $.length?l.jsx(lme,{category:G,suggestions:$,categoryConfig:q,value:u,focusedIndex:n,setFocusedIndex:r,handleSubmit:a,indexOffset:Z,LeftIconComponent:E,RightIconComponent:C,QueryContentComponent:M,onFillButtonClick:P,titleClassName:h},G):null})]})})}),[E,M,C,h,O,o,n,I,a,N,x,P,y,F,r,j,u]),W=f.useMemo(()=>_?{strategy:_}:void 0,[_]),H=f.useMemo(()=>w?{className:"flex z-[1]"}:void 0,[w]);return l.jsx(ci,{isOpen:e,matchTargetWidth:!0,disableAnimation:!0,placement:y,childrenClassName:"grow block",contentClassName:R,avoidCollisions:!1,disableShadow:!0,overlayProps:U,content:V,floatingElementProps:H,...W&&{customFloatingUIOptions:W},children:d})});Tp.displayName="SuggestDropdown";const Lv="homepage-widgets",F9="homepage/weather",cZe="homepage-widgets/dismiss",uZe=e=>({"x-loc-latitude":e.latitude.toString(),"x-loc-longitude":e.longitude.toString()}),dZe=(e,t,n)=>{let r="existing";return t<3?r="new":t<10&&(r="activated"),`/rest/homepage-widgets/public?isComet=${e}&lifecycle=${r}&lang=${n}`},fZe=async({headers:e,urlPath:t="/rest/homepage-widgets",params:n,reason:r})=>{if(n){const s=t.split("?"),a=new URLSearchParams(s[1]??"");new URLSearchParams(n).forEach((i,c)=>{a.set(c,i)}),t=s[0]+"?"+a.toString()}try{const s=await er({urlPath:t,method:"GET",timeoutMs:je({productionMs:2e3,clientSideMs:2e3,devMs:4e3}),numRetries:1,headers:{"content-type":"application/json",...e},reason:r}),a=await s.json();if(!s.ok)throw new Error("Homepage widget fetch failed");return a.widgets}catch(s){return ee.error("Failed to get homepage widgets",s),[]}},mZe=async({widgetUuid:e,reason:t})=>{try{return(await ne.POST("/rest/homepage-widgets/dismiss/{widget_uuid}",t,{params:{path:{widget_uuid:e}},numRetries:1})).data}catch(n){return ee.error("Failed to dismiss homepage widget",n),null}},hZe=({widget:e,reason:t})=>{const n=gt();return Mt({mutationKey:[cZe],mutationFn:()=>mZe({widgetUuid:e.uuid??"",reason:t}),onMutate:async()=>{e.size==="ROW"&&n.setQueryData([Lv],r=>r.filter(s=>s.uuid!==e.uuid))}})},_me=async({location:e,locale:t,reason:n})=>{const r={...e?uZe(e):{},"accept-language":t},s=await ne.GET("/rest/homepage-widgets/weather",n,{headers:r});if(!s.response.ok||!s.data)throw new Error("Failed to get weather");return s.data.data[0]},pZe=ge(async()=>{const{WatchlistSelections:e}=await oe(async()=>{const{WatchlistSelections:t}=await import("./WatchlistSelections-Cf_CGFQ9.js");return{WatchlistSelections:t}},__vite__mapDeps([0,1,2,3,4,5]));return{default:e}},{loading:()=>l.jsx(wme,{})}),gZe=5,yZe=e=>{const{isSelected:t}=e;return l.jsx("div",{className:"flex h-full flex-col items-center justify-center",children:l.jsx(ke,{icon:t?Ea:mr,size:"small",pill:!0})})},vZe=({onClear:e})=>l.jsx(ke,{icon:Xt,size:"tiny",pill:!0,onClick:e}),xZe=({isOpen:e,onClose:t,watchlistType:n,origin:r})=>{const{isMobileStyle:s,isMobileUserAgent:a}=Ce(),o="watchlist-modal",{$t:i}=X(),c=gt(),{trackEvent:u}=Te(),{openToast:d}=On(),m=f.useRef(null),[h,p]=f.useState(""),[g,y]=f.useState(ce),[v,x]=f.useState(-1),[b,_]=f.useState(!1),[w,S]=f.useState(!1),[C,E]=f.useState();f.useEffect(()=>{u("watchlist modal viewed",{origin:r,watchlistType:n})},[r,n,u]);const T=(re=>re==="sports"||re==="finance"||re==="f1")(C?.category)?C.category:n.toLowerCase(),I=f.useCallback(()=>{b&&c.invalidateQueries({queryKey:[Lv]}),t()},[b,c,t]),{data:j,isLoading:N}=rme({watchlistType:n,reason:o}),{mutate:P}=tXe({watchlistType:n,queryClient:c,reason:o}),{mutate:R}=nXe({watchlistType:n,queryClient:c,reason:o}),{mutate:k}=rXe({watchlistType:n,queryClient:c,reason:"watchlist-reorder"}),O=n==="FINANCE",L=[{text:i({defaultMessage:"Done",id:"JXdbo8Vnlw"}),variant:"inverted",onClick:I}],F=f.useCallback(async(re,te)=>{const ie=Ys().erp,me=(await c.fetchQuery({queryKey:["watchlist",n,re,te?.category],queryFn:()=>nme({query:re,watchlistType:n,limit:gZe,category:te?.category,cometRenderPlace:ie,reason:o}),staleTime:0})).map(de=>({query:de.title,title:de.title,image:de.image_url??void 0,imageDark:de.image_url_dark??void 0,description:de.description,identifier:de.identifier,category:de.category??void 0,subscribed:de.subscribed}));y(me)},[c,n]),U=ks(F,100,{leading:!0,trailing:!0}),V=f.useCallback((re,te)=>{U(re,te)},[U]),W=()=>{S(!0),V(h,C)},H=()=>{S(!1)},G=f.useCallback(re=>{const te=re;p(te),V(te,C)},[V,C]),K=()=>{p(""),y([])},$=(re,te)=>{Z(re),p(""),y([]),S(!1)},q=B("h-10 rounded-md dark:border-0 dark:border-transparent dark:bg-offsetPlus p-4 dark:[&:focus]:ring-0",{"rounded-t-md rounded-b-none":w&&g.length>0}),Z=f.useCallback(re=>{if(_(!0),y(ce),p(""),(j?.length??0)>=gq){d(i({defaultMessage:"Watchlist full (max {maxItems} items).",id:"mdbFzAw6E5"},{maxItems:gq}),"error",2);return}re.subscribed||P(re)},[P,j?.length,d,i]),se=f.useCallback((re,te)=>{R({identifier:re,category:te}),_(!0)},[R]),Y=f.useCallback((...re)=>{k(...re),_(!0)},[k]),Q=f.useMemo(()=>({image:re,imageDark:te,alt:le})=>l.jsx(tme,{image:re,imageDark:te,alt:le,watchlistType:n,className:"mr-sm bg-offset !size-8 overflow-hidden rounded",imageClassName:"inset-xs"}),[n]);return l.jsx(rn,{isOpen:e,onClose:I,title:i(Fy[T].title),titleTextVariant:"baseSemi",subtitle:i(Fy[T].settingsDescription),subtitleClassname:"text-sm",actionList:L,variant:s?"bottom-sheet":"medium",renderCloseButton:!1,delayClose:!1,noPadding:!0,children:l.jsxs("div",{className:"pt-md flex h-[50vh] min-h-0 shrink-0 flex-col",children:[l.jsx("div",{className:"px-md flex flex-row items-center justify-between",children:l.jsx(sXe,{watchlistType:n,selectedCategory:C,setSelectedCategory:E})}),l.jsxs("div",{className:"h-full",children:[l.jsx("div",{className:"px-md",children:l.jsx(Tp,{isOpen:w&&g.length>0,suggestedQueries:g,focusedIndex:v,setFocusedIndex:x,handlePasteQuery:Rn,handleSubmit:$,value:h,components:{RightIconComponent:yZe,LeftIconComponent:Q},dropdownClassName:"dark:border-none dark:ml-0 dark:mr-0 dark:w-full",dropdownType:"select",popoverClassName:"dark:!border-none",children:l.jsx(xo,{onFocus:W,onBlur:H,className:q,pill:!1,ref:m,isMobileUserAgent:a,placeholder:i(Fy[T].searchPlaceholder),value:h,onChange:G,ClearIcon:vZe,...h.length>0?{onClear:K}:{}})})}),N?l.jsx(wme,{}):l.jsx(pZe,{subscriptions:j??ce,onRemove:se,onUpdateOrder:Y,watchlistType:n,selectedCategory:C,isReorderingEnabled:O,isMobile:s})]})]})})},wme=()=>l.jsx(Ln,{children:l.jsx("div",{style:{maskImage:"linear-gradient(to bottom, black 50%, transparent)"},className:"flex flex-col items-center",children:Array.from({length:4}).map((e,t)=>l.jsx(bZe,{},t))})}),bZe=()=>l.jsx(z,{className:"gap-sm mt-2 flex w-full flex-col px-6 py-2",children:l.jsx(z,{variant:"offsetPlus",className:"h-10 w-full rounded-md"})});async function $Bt({headers:e,reason:t}){const n=await ne.GET("/rest/shopping/user-orders",t,{timeoutMs:je({productionMs:5e3}),headers:e});if(n.error)throw new Me("API_CLIENTS_ERROR",{message:"Failed to fetch shopping orders",cause:n.error});return n.data?.orders??ce}const WBt=async({shipping_address:e,amount:t,reason:n})=>{const{data:r,error:s}=await ne.POST("/rest/shopping/calculate-tax-and-shipping",n,{body:{shipping_address:e,amount:t},timeoutMs:je(),numRetries:1});if(s)throw new Me("API_CLIENTS_ERROR",{message:"Failed to calculate tax and shipping",cause:s});return r},_Ze=async({reason:e})=>{const{data:t,error:n}=await ne.GET("/rest/shopping/retrieve-customer-shopping-info",e,{timeoutMs:je({productionMs:5e3})});if(n)throw new Me("API_CLIENTS_ERROR",{message:"Failed to get customer shopping info",cause:n});return t};async function HBt({body:e,reason:t}){const n="createShoppingOrder";try{const r=await ne.POST("/rest/shopping/create-shopping-order",t,{headers:{"content-type":"application/json"},body:e,timeoutMs:1e4,numRetries:0});if(r.error)throw new Me("API_CLIENTS_ERROR",{message:"Failed to create shopping order",cause:r.error});return r.data}catch(r){throw ee.log(`Error in ${n}:`,r),r}}const zBt=async({request:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/shopping/create-shopping-payment-intent",t,{body:e,timeoutMs:6e3,numRetries:0});if(r)throw new Me("API_CLIENTS_ERROR",{message:"Failed to create shopping payment intent",cause:r});if(n.status!=="success")throw new Me("API_CLIENTS_ERROR",{message:"Failed to create payment intent",cause:n});return n},GBt=async({orderId:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/shopping/update-shopping-order",t,{body:{order_id:e,order_status:"cancelled"},timeoutMs:2e4});if(r)throw new Me("API_CLIENTS_ERROR",{message:"Failed to cancel shopping order",cause:r});return n},qBt=async({request:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/shopping/create-firmly-cart",t,{body:e,timeoutMs:je({clientSideMs:5e3})});if(r)throw new Me("API_CLIENTS_ERROR",{message:"Failed to create firmly cart",cause:r});return n},KBt=async({request:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/shopping/set-firmly-shipping-info",t,{body:e,timeoutMs:je({clientSideMs:7e3})});if(r)throw new Me("API_CLIENTS_ERROR",{message:"Failed to set firmly shipping info",cause:r});return n},wZe=async({reason:e})=>{const{data:t,error:n}=await ne.GET("/rest/shopping/create-firmly-session",e,{timeoutMs:je()});if(n)throw new Me("API_CLIENTS_ERROR",{message:"Failed to create firmly session",cause:n});return t},YBt=async({request:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/stripe/update-customer-shipping-address",t,{body:e,timeoutMs:je()});if(r)throw new Me("API_CLIENTS_ERROR",{message:"Failed to update customer shipping address",cause:r});return n},QBt=async({optionKey:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/shopping/fetch-product-details",t,{body:{option_key:e},timeoutMs:4e3});if(r)throw new Me("API_CLIENTS_ERROR",{message:"Failed to fetch product details",cause:r});return n},XBt=async({query:e,reason:t})=>{try{const{error:n,data:r}=await ne.GET("/rest/autosuggest/shopping/list-autosuggest",t,{timeoutMs:nn.MEDIUM,params:{query:{query:e}}});if(n)throw new Me("API_CLIENTS_ERROR",{message:"Failed to get shopping suggestions",cause:n});return r.results??ce}catch(n){return ee.error("Failed to get shopping suggestions",n),[]}},ZBt=async({page:e,reason:t})=>{const{data:n,error:r}=await ne.GET("/rest/shopping/landing-page/tile-data",t,{timeoutMs:nn.MEDIUM,params:e!==void 0?{query:{page:e}}:void 0});if(r)throw new Me("API_CLIENTS_ERROR",{message:"Failed to get shopping tile data",cause:r});return n.shopping_tile_data.length===0&&ee.error("Empty shopping tile data"),n.shopping_tile_data},JBt=async({request:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/shopping/search-shopping-for-entry",t,{body:{query:e.query,read_write_token:e.read_write_token,entry_uuid:e.entry_uuid},timeoutMs:nn.HIGH});if(r)throw new Me("API_CLIENTS_ERROR",{message:"Failed to search for additional products",cause:r});return!n||n.status==="failure"?[]:[...n.shopping_widgets]},SZe=async({reason:e})=>{const{error:t,data:n}=await ne.GET("/rest/shopping/try-on-photo/get",e,{timeoutMs:je()});return t?{status:"error",try_on_photo_url:null}:n},CZe=({reason:e})=>{const{data:t,isLoading:n,refetch:r}=Ke({queryKey:i2(),queryFn:()=>SZe({reason:e})});return f.useMemo(()=>({userTryOnPhotoUrl:t?.try_on_photo_url??null,isUserTryOnPhotoLoading:n,refetchUserTryOnPhoto:r}),[t,n,r])},U9=A.memo(({message:e,subtitle:t,...n})=>l.jsx(rn,{title:e,subtitle:t,closeButtonClassname:"right-sm top-md flex self-start justify-end grow",...n}));U9.displayName="ConfirmationModal";const EZe=({isOpen:e,onClose:t,config:n})=>{const{$t:r}=X(),s=gt(),[a,o]=f.useState(!1),{userTryOnPhotoUrl:i,isUserTryOnPhotoLoading:c}=CZe({reason:"avatar_management"}),{deleteAvatar:u}=Mfe({reason:"avatar_management"}),d=async()=>{await u(),s.setQueryData(i2(),{try_on_photo_url:null}),o(!1),t()},m=()=>{t(),n?.onRetry&&n.onRetry()},h=()=>{t()},p=n?.source==="toast";return l.jsxs(l.Fragment,{children:[l.jsx(rn,{isOpen:e,onClose:t,title:r({defaultMessage:"Your avatar photo",id:"fXPKMrv34o"}),centerTitle:!0,modalClassname:"max-w-lg mx-auto",children:l.jsxs("div",{className:"flex flex-col items-center gap-6 p-6",children:[c?l.jsx(Ns,{}):i?l.jsx(z,{className:"gap-sm relative isolate flex flex-col overflow-hidden rounded-lg border",children:i&&l.jsx(es,{src:i,alt:"Your Avatar",imageClassName:"max-h-[500px] max-w-full object-contain",containerClassName:"flex justify-center",includeLightBoxModal:!1})}):l.jsx(D,{variant:"smallMono",children:r({defaultMessage:"No avatar uploaded",id:"RDTTX4AfZg"})}),l.jsx("div",{className:"flex gap-3",children:p?l.jsxs(l.Fragment,{children:[l.jsx(ye,{variant:"border",onClick:m,text:r({defaultMessage:"Retry",id:"62nsdyMyIO"})}),l.jsx(ye,{variant:"primary",onClick:h,text:r({defaultMessage:"Continue shopping",id:"Yywm0pqtZa"})})]}):i&&l.jsx(ye,{variant:"common",onClick:()=>o(!0),text:r({defaultMessage:"Delete",id:"K3r6DQW7h+"})})})]})}),l.jsx(U9,{isOpen:a,onClose:()=>o(!1),message:r({defaultMessage:"Are you sure you want to delete?",id:"y7o4RnAvXG"}),subtitle:r({defaultMessage:"Once deleted, your avatar cannot be recovered.",id:"CtPvgMBMh3"}),children:l.jsxs("div",{className:"-mb-lg flex justify-center gap-3 p-6",children:[l.jsx(ye,{variant:"common",onClick:()=>o(!1),text:r({defaultMessage:"No",id:"oUWADlOjJt"})}),l.jsx(ye,{variant:"primary",onClick:d,text:r({defaultMessage:"Yes",id:"a5msuh5ORp"})})]})})]})};var VT={},Pq;function MZe(){return Pq||(Pq=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="fas",n="star",r=576,s=512,a=[11088,61446],o="f005",i="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faStar=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(VT)),VT}var Rg=MZe();function TZe(e){const t=new Uint8Array(e);return Array.from(t).map(n=>n.toString(16).padStart(2,"0")).join("")}async function kZe(e){const n=new TextEncoder().encode(e);return await crypto.subtle.digest("SHA-256",n)}async function NZe(e){const t=await kZe(e);return TZe(t)}const Sme=f.createContext({sendQueryEventSingular:()=>Promise.resolve(),maybeSendNthQueryEventSingular:()=>Promise.resolve(),sendSubscribedEventSingular:()=>Promise.resolve(),sendSubscribedPayingEventSingular:()=>Promise.resolve(),sendAppDownloadClickedEventSingular:()=>Promise.resolve(),sendResurrectedActivationEventSingular:()=>Promise.resolve(),sendCometDownloadPageLoadEventSingular:()=>Promise.resolve(),sendCometDownloadPageSignInEventSingular:()=>Promise.resolve(),sendCometDownloadedEventSingular:()=>Promise.resolve(),sendCometDownloadButtonClickedEventSingular:()=>Promise.resolve(),sendCometWaitlistButtonClickedEventSingular:()=>Promise.resolve(),sendSubscribedMaxEventSingular:()=>Promise.resolve()}),Rq={1:"activated",3:"true activated",5:"quality activated",10:"super activated"},Iq={1:"first comet query",3:"third comet query"},AZe="ai.testing.perplexity",PZe="ai.perplexity",Cme=async(e,t)=>{if(!e)return null;const n=new Date;n.setMilliseconds(0);const r=`${e}-${n.toISOString()}-${t}`;return await NZe(r)},RZe=async({productId:e,visitorId:t,userId:n})=>{const{SingularConfig:r,singularSdk:s}=await oe(async()=>{const{SingularConfig:c,singularSdk:u}=await import("./singular-sdk-CHVvA4e9.js").then(d=>d.s);return{SingularConfig:c,singularSdk:u}},[]),a=new r("perplexity_ai_039eb8fb","1e0179ca95965b57a3e91c1cf3049b64",e);n&&a.withCustomUserId(n),s.init(a);const o="initialized singular",i=await Cme(t,o);return s.event(o,{visitorId:t,eventId:i}),s},IZe=({children:e})=>{const t=Ot(),n=yf(),{isProduction:r,isStaging:s}=pc(),a=f.useRef([]),o=f.useRef([]),i=Ht(),{isMobile:c}=Wt(),[u,d]=f.useState(void 0);f.useEffect(()=>{const g=t?.user?.id;n&&RZe({userId:g,productId:r||s?PZe:AZe,visitorId:n}).then(v=>{v&&(d({sdk:v}),g&&v.setMatchID(g))})},[r,s,t?.user?.id,n]);const m=f.useCallback(async(g,y)=>{if(!u){a.current.push({name:g,extraArguments:y});return}const v=await Cme(n,g),x={...y,visitorId:n,eventId:v,isMobile:c};o.current.includes(g)||(u.sdk.event(g,x),o.current.push(g))},[u,n,c]),h=f.useCallback(async({totalQueryCount:g,cometQueryCount:y})=>{g&&Rq[g]&&await m(Rq[g]),y&&Iq[y]&&await m(Iq[y])},[m]),p=f.useCallback(async g=>{await m("user sign in",{isNewUser:g}),t?.user?.id&&u&&u.sdk.login(t.user.id)},[t?.user?.id,u,m]);return f.useEffect(()=>{u&&a.current.length>0&&(a.current.filter((y,v,x)=>v===x.findIndex(b=>b.name===y.name)).forEach(({name:y,extraArguments:v})=>{m(y,v)}),a.current=[])},[u,m]),f.useEffect(()=>{if(i?.get(mc)&&i?.get($$)){const g=i?.get($$)==="true";p(g),m(g?"new user sign in":"existing user sign in"),tn()&&m("comet user sign in")}},[i,p,m]),l.jsx(Sme.Provider,{value:f.useMemo(()=>({sendQueryEventSingular:()=>m("query submitted"),maybeSendNthQueryEventSingular:h,sendSubscribedEventSingular:()=>m("user subscribed"),sendSubscribedPayingEventSingular:()=>m("user subscribed paying"),sendAppDownloadClickedEventSingular:g=>m("app download button clicked",{origin:g}),sendResurrectedActivationEventSingular:()=>m("resurrected activated"),sendCometDownloadPageLoadEventSingular:()=>m("download-comet page loaded"),sendCometDownloadPageSignInEventSingular:()=>m("download-comet page signed in"),sendCometDownloadedEventSingular:()=>m("download-comet comet downloaded"),sendCometDownloadButtonClickedEventSingular:()=>m("download-comet download button clicked"),sendCometWaitlistButtonClickedEventSingular:()=>m("download-comet waitlist button clicked"),sendSubscribedMaxEventSingular:()=>m("user subscribed max")}),[m,h]),children:e})},B9=()=>{const e=f.useContext(Sme);if(!e)throw new Error("useSingularAttribution must be used within SingularAttributionContext");return e},jZe="https://perplexity.sng.link/A6awk/ppas?_smtype=3&pvid=",eVt="https://perplexity.sng.link/A6awk/rcv6y?_smtype=3&pvid=",J0=(e,t=jZe)=>{const n=yf(),[r,s]=f.useState(t),{sendAppDownloadClickedEventSingular:a}=B9(),o=Pt(),i=f.useMemo(()=>{const u=new URLSearchParams;return u.set("origin",e),n&&u.set("pvid",n),o&&u.set("pathname",o),u.toString()},[n,e,o]);f.useEffect(()=>{(async()=>{const{singularSdk:d}=await oe(async()=>{const{singularSdk:p}=await import("./singular-sdk-CHVvA4e9.js").then(g=>g.s);return{singularSdk:p}},[]);for(;!d._isInitialized;)await new Promise(p=>setTimeout(p,100));let m=null;o&&(m=`perplexity-app://${o.startsWith("/")?o.slice(1):o}`);const h=d.buildWebToAppLink(`${t}${n}&_ios_dl=${m}&_android_dl=${m}`,m,i,m);s(h)})()},[n,o,i,t]);const c=f.useCallback(()=>{aS(),a(e),window.location.href=r},[r,e,a]);return f.useMemo(()=>({downloadAppLink:r,handleAppDownloadClicked:c}),[r,c])},OZe=({origin:e})=>{const{isIOS:t}=Wt(),{downloadAppLink:n}=J0(e),{$t:r}=X();return l.jsx(at,{href:n,children:l.jsxs("div",{className:"gap-x-md py-lg flex items-center justify-center",children:[l.jsx("div",{"data-color-scheme":"dark",className:B("border-subtler bg-base inline-block border",{"p-sm rounded-xl":t,"p-md rounded-full":!t}),children:l.jsx("div",{className:"flex aspect-square w-12 items-center justify-center",children:l.jsx(Wa,{variant:"mark",size:"md",color:"white"})})}),l.jsxs("div",{className:"-mt-xs",children:[l.jsx(D,{variant:"baseSemi",children:"Perplexity"}),l.jsx(D,{variant:"small",color:"light",children:r({defaultMessage:"Search and discovery with AI",id:"n3oaAt293P"})}),l.jsx(D,{variant:"small",children:l.jsxs("div",{className:"gap-x-xs text-attention flex items-center",children:[l.jsx(xt,{icon:Rg.faStar}),l.jsx(xt,{icon:Rg.faStar}),l.jsx(xt,{icon:Rg.faStar}),l.jsx(xt,{icon:Rg.faStar}),l.jsx(xt,{icon:Rg.faStar}),l.jsxs(D,{variant:"tiny",color:"light",className:"gap-xs flex items-center pl-1 pt-1",children:[l.jsx("span",{children:"4.9"}),l.jsx("span",{className:"text-[8px]",children:""}),l.jsxs("span",{children:["176K"," ",r({defaultMessage:"Ratings",id:"XYovs/iySe"})]})]})]})})]})]})})},LZe=()=>{const e=Ht();return f.useMemo(()=>{const n=e?.get("pt")||JOe();if(n)try{const r=atob(n);return JSON.parse(r).title}catch{return}},[e])},DZe="https://api.whatsapp.com/send/?phone=18334363285&text&type=phone_number&app_absent=0",e1=({origin:e})=>{const{trackEvent:t}=Te();return f.useCallback(()=>{aS(),t("whatsapp button clicked",{origin:e}),window.open(DZe,"_blank")},[t,e])},t1=()=>{const{value:e,loading:t}=Yr({flag:"mweb-upsell-to-whatsapp",defaultValue:!1});return f.useMemo(()=>({mwebUpsellWhatsApp:e,loadingMwebUpsellWhatsApp:t}),[e,t])},FZe=({origin:e,isOpen:t,onClose:n,sheetModalVariant:r})=>{const{trackEventOnce:s,trackEvent:a}=Te(),{$t:o}=X(),{handleAppDownloadClicked:i}=J0("install-gate-modal-upsell"),c=LZe(),u=e1({origin:"install-gate"}),{mwebUpsellWhatsApp:d}=t1();f.useEffect(()=>{s("install modal opened",{origin:e})},[e,s]);const m=f.useCallback(()=>{a("install modal closed",{origin:e}),n()},[n,e,a]);return l.jsx(_9,{isOpen:t,onClose:m,variant:r,showCloseButton:!1,overlayVariant:"default-less-blur",children:d?l.jsxs(l.Fragment,{children:[l.jsx(D,{variant:"section-title",className:"px-sm text-center",children:l.jsx(he,{defaultMessage:"Keep the conversation going.",id:"4/VUgNnQik"})}),l.jsx(D,{variant:"section-title",className:"px-sm text-center",children:l.jsx(he,{defaultMessage:"Try Perplexity on WhatsApp",id:"YTg7pt2IE4"})}),l.jsxs("div",{className:"mt-md mb-lg flex flex-row items-center justify-center gap-4",children:[l.jsx("div",{className:"aspect-square size-10 overflow-hidden rounded-full shadow-lg",children:l.jsx("img",{src:"https://r2cdn.perplexity.ai/whatsapp.jpg",alt:"WhatsApp"})}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(D,{children:"Perplexity"}),l.jsx(D,{variant:"smallMono",color:"super",textCenter:!0,children:"+1 (833) 436-3285"})]})]}),l.jsx(ye,{variant:"primary",text:o({defaultMessage:"Continue on WhatsApp",id:"I7Lrfco0vS"}),size:"small",extraCSS:"h-[44px] mb-md",onClick:()=>{a("whatsapp button clicked",{origin:"install-gate"}),u()}})]}):l.jsxs(l.Fragment,{children:[l.jsx(D,{variant:"page-title",className:"px-sm text-center",children:c??l.jsx(he,{defaultMessage:"One verified answer to any question",id:"C+F6JBwTvO"})}),l.jsx(OZe,{origin:"install-gate-modal-upsell"}),l.jsx(ye,{variant:"primary",text:o({defaultMessage:"Open Perplexity app",id:"u0MSV+x6J3"}),size:"small",extraCSS:"h-[44px] mb-md",onClick:()=>{a("app download button clicked",{origin:"install-gate"}),i()}})]})})};var $T={},jq;function UZe(){return jq||(jq=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="fas",n="plus",r=448,s=512,a=[10133,61543,"add"],o="2b",i="M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faPlus=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}($T)),$T}var BZe=UZe();const VZe={xlarge:[64,"h-[64px] w-auto leading-[64px]"],large:[48,"h-[48px] w-auto leading-[48px]"],regular:[32,"h-[32px] w-auto leading-[32px]"],small:[18,"h-[18px] w-auto leading-[18px]"],tiny:[12,"h-[12px] w-auto leading-[12px]"]},$Ze=ge(async()=>{const{Emoji:e}=await oe(async()=>{const{Emoji:t}=await import("./emoji-picker-react.esm-CnqzA6rL.js");return{Emoji:t}},__vite__mapDeps([6,1,2]));return{default:e}},{nextFrame:!0}),Ru=A.memo(({unified:e,size:t})=>{const[n,r]=VZe[t];return e?l.jsx("div",{className:`relative align-middle ${r}`,children:l.jsx($Ze,{emojiStyle:"native",unified:e,size:n})}):null});Ru.displayName="PerplexityEmoji";const WZe=ge(()=>oe(()=>import("./emoji-picker-react.esm-CnqzA6rL.js"),__vite__mapDeps([6,1,2])),{nextFrame:!0}),Eme=A.memo(({emoji:e,setEmoji:t,size:n="large"})=>{const{$t:r}=X(),{colorScheme:s}=fs(),[a,o]=f.useState(!1),i=f.useCallback(g=>{o(!1),t(g.unified)},[t]),c={small:"h-8 w-8",medium:"h-11 w-11",large:"h-14 w-14"},u=f.useCallback(()=>o(!1),[]),d=f.useMemo(()=>({showPreview:!1}),[]),m=f.useMemo(()=>l.jsx(WZe,{emojiStyle:"native",onEmojiClick:i,autoFocusSearch:!0,width:"100%",theme:s==="dark"?"dark":"light",previewConfig:d}),[s,i,d]),h=f.useCallback(()=>t(""),[t]),p=f.useCallback(()=>o(g=>!g),[]);return l.jsxs("div",{className:"relative",children:[l.jsx(D,{variant:"smallBold",children:r({defaultMessage:"Emoji",id:"34NuzGC3+4"})}),l.jsxs("div",{className:"mt-sm relative inline-block",children:[e!==""&&l.jsx("div",{className:"-right-sm -top-sm absolute",children:l.jsx(ye,{pill:!0,size:"tiny",icon:Xt,onClick:h})}),l.jsx(ci,{isOpen:a,onClose:u,content:m,hasInteractiveContent:!0,children:l.jsx(z,{onClick:p,variant:"offset",bgHover:"offsetPlus",className:`p-sm flex cursor-pointer items-center justify-center rounded-full ${c[n]}`,children:e===""?l.jsx("div",{className:"flex size-full items-center justify-center",children:l.jsx(xt,{icon:BZe.faPlus})}):l.jsx("div",{className:"flex size-full items-center justify-center",children:l.jsx(Ru,{unified:e,size:"regular"})})})})]})]})});Eme.displayName="CollectionEmojiPicker";const HZe={in:{opacity:1,scale:1},out:{opacity:0,scale:.9}},Mme=f.forwardRef((e,t)=>{const{cancelButton:n,confirmButton:r,description:s,title:a}=e,{handleCancel:o,handleConfirm:i}=EDe();return l.jsx(aC,{asChild:!0,onEscapeKeyDown:c=>{c.stopPropagation()},ref:t,children:l.jsxs(_e.div,{animate:"in",className:"border-subtlest bg-base p-lg rounded-lg border shadow-lg",exit:"out",initial:"out",transition:{duration:.2},variants:HZe,children:[l.jsxs(V0,{children:[l.jsx(oC,{children:a}),l.jsx(mL,{children:s})]}),l.jsxs("div",{className:"gap-md flex flex-col items-center",children:[l.jsx(D,{children:s}),l.jsxs("div",{className:"gap-md mx-auto flex",children:[l.jsx(ye,{variant:"common",onClick:o,testId:"confirm-close-modal-cancel-button",...n}),l.jsx(ye,{variant:"rejected",onClick:i,testId:"confirm-close-modal-confirm-button",...r})]})]})]},"confirm-close-modal-content")})});Mme.displayName="ConfirmCloseModalContent";const Tme=f.forwardRef((e,t)=>{const{children:n,className:r="",motionProps:s}=e;return l.jsx(ice,{asChild:!0,ref:t,children:l.jsx(_e.div,{className:B("bg-backdrop/25 fixed inset-0 flex flex-col items-center justify-center backdrop-blur-[1px]",r),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},...s,children:n},"confirm-close-modal-overlay")})});Tme.displayName="ConfirmCloseModalOverlay";const kme=A.memo(function(){const{$t:t}=X(),n=f.useMemo(()=>({text:t({defaultMessage:"Cancel",id:"47FYwba+bI"}),testId:"default-confirm-modal-cancel-button"}),[t]),r=f.useMemo(()=>({text:t({defaultMessage:"Discard",id:"nmpevlUATU"}),testId:"default-confirm-modal-discard-button"}),[t]);return l.jsx(Tme,{children:l.jsx(Mme,{cancelButton:n,confirmButton:r,description:t({defaultMessage:"Discard any unsaved changes?",id:"p7u+eL35XP"}),title:t({defaultMessage:"Discard changes?",id:"41zpq3nBvm"})})})});kme.displayName="DefaultConfirmModal";const Oq=A.memo(({isOpen:e,closeModal:t,existingCollection:n,entryUUID:r,frontendContextUUID:s,onCreate:a,content:o})=>{const i="space-create-modal",{$t:c}=X(),{isMobileStyle:u,isMobileUserAgent:d}=Ce(),{createCollection:m,createCollectionForThread:h}=Sp({reason:i}),[p,g]=f.useState({title:o?.title??n?.title??"",description:o?.description??n?.description??"",instructions:o?.instructions??n?.instructions??"",emoji:o?.emoji??n?.emoji??"",accessLevel:n?.access??a2,enableWebByDefault:n?.enable_web_by_default??!0}),[y,v]=f.useState(!1),{title:x,description:b,emoji:_,instructions:w}=p,S=x?.length===0||x?.length>O$||b?.length>L$||w?.length>j$,C=k=>{g(O=>({...O,...k})),v(!0)},E=At(),M=f.useCallback(k=>{C({title:"",description:"",instructions:"",emoji:"",accessLevel:a2}),t(),E.push(`/spaces/${k.slug}`),a?.(k)},[t,E,a]),T=f.useCallback(()=>{r?h({...p,entryUUID:r,frontendContextUUID:s??"",callback:M}):m({...p,callback:M})},[r,h,p,s,M,m]),I=f.useMemo(()=>[{text:c({defaultMessage:"Cancel",id:"47FYwba+bI"}),variant:"common",onClick:t,shouldShowConfirmDialog:!0},{text:c({defaultMessage:"Continue",id:"acrOozm08x"}),variant:"primary",disabled:S,onClick:()=>T()}],[t,c,S,T]),j=f.useCallback(k=>C({title:k}),[]),N=f.useCallback(k=>C({emoji:k}),[]),P=f.useCallback(k=>C({description:k}),[]),R=f.useCallback(k=>C({instructions:k}),[]);return l.jsx(rn,{title:c({defaultMessage:"Create a Space",id:"SqVNRzqwJz"}),isOpen:e,onClose:t,actionList:I,confirmOnClose:y?l.jsx(kme,{}):void 0,children:l.jsxs("div",{className:"space-y-md",children:[l.jsxs("div",{className:"space-x-sm flex items-center",children:[l.jsx("div",{className:"grow",children:l.jsx(xo,{isMobileUserAgent:d,label:c({defaultMessage:"Title",id:"9a9+wwWy4u"}),value:x,autoFocus:!0,onChange:j,placeholder:c({defaultMessage:"Team Space...",id:"CR3RufeyCu"}),maxLength:O$})}),l.jsx("div",{className:"shrink-0",children:l.jsx(Eme,{emoji:_,setEmoji:N,size:"medium"})})]}),l.jsx(el,{isMobileStyle:u,isMobileUserAgent:d,placeholder:c({defaultMessage:"A collaborative space for discussing latest insights...",id:"r+xI8TGuu9"}),label:c({defaultMessage:"Description",id:"Q8Qw5BZ1VA"}),isOptional:!0,minRows:2,value:b,onChange:P,maxLength:L$}),l.jsx(el,{isMobileStyle:u,isMobileUserAgent:d,placeholder:c({defaultMessage:"Always respond in a formal tone and prioritize data-driven insights...",id:"ERATUnZFe3"}),label:c({defaultMessage:"Custom Instructions",id:"nRK52SgZ/p"}),subtitle:c({defaultMessage:"Give instructions to the AI that affects every thread in this space.",id:"6peDHp5LgI"}),isOptional:!0,value:w,minRows:2,onChange:R,maxLength:j$})]})})}),zZe=e=>e?Uke(e):void 0,rm=(e,t)=>{if(!e)return"";const n=zZe(e.currency);return n==null?"":t(e.price_minor_units/n,{style:"currency",currency:e.currency})},GZe=({billingInterval:e})=>e==="monthly"?l.jsx(he,{defaultMessage:"/ month",id:"Vn2ud4qKOl"}):e==="yearly"?l.jsx(he,{defaultMessage:"/ year",id:"8hNOud/igo"}):e==="unknown"?l.jsx(he,{defaultMessage:"/ month",id:"Vn2ud4qKOl"}):null,L2=({planName:e,price:t,formatNumber:n,isHighlighted:r=!1,className:s="",billingInterval:a})=>l.jsxs(z,{variant:"offset",className:`px-md h-xl my-sm flex items-center justify-between rounded-md ${s}`,children:[l.jsx(D,{variant:"baseSemi",color:r?"default":"light",children:l.jsx(he,{...e})}),l.jsxs("div",{className:"gap-xs flex items-center",children:[l.jsx(D,{variant:"small",children:t?rm(t,n):""}),l.jsx(D,{variant:"tinyRegular",children:l.jsx(GZe,{billingInterval:a})})]})]});function qZe(){kp(void 0)}function Dv(e={}){const t=new URL(window.location.href);for(const[n,r]of Object.entries(e))typeof r>"u"?t.searchParams.delete(n):t.searchParams.set(n,r);kp(Object.fromEntries(t.searchParams))}function kp(e){const t=new URL(window.location.href),r=(e?new URLSearchParams(e):new URLSearchParams).toString();r!==t.searchParams.toString()&&window.history.replaceState({},"",`?${r}`)}const KZe=({isOpen:e,onClose:t})=>{const{data:n}=Gie({reason:"downgrade-modal"}),{update:r}=za.useSession(),{currentOpenModals:s}=_t(),{openToast:a}=On(),{formatNumber:o,formatDate:i,$t:c}=X(),{trackEvent:u}=Te();f.useEffect(()=>{e&&u("subscription downgrade modal rendered")},[e,u]);const d=f.useCallback(async()=>{await f9({reason:"downgrade-to-pro-modal"}),await r(),t(),u("subscription downgrade success"),s.length>0&&t(),Dv({downgrade:"success"}),a(c({defaultMessage:"Subscription updated",id:"Eq5gCUdVyJ"}),"success",5)},[t,s,r,a,c,u]),{mutate:m,isPending:h}=Kie({reason:"downgrade-modal"},{onSuccess:d}),p=n?.next_billing_start_ts,g=p?i(p*1e3):"";return l.jsx(rn,{isOpen:e,onClose:t,renderCloseButton:!1,headerClassname:"hidden",modalClassname:"!w-[416px] !min-w-[416px] !max-w-[416px] !p-0",modalContentClassname:"!p-0",noPadding:!0,children:l.jsxs(z,{className:"p-ml",children:[l.jsx(D,{variant:"baseSemi",children:l.jsx(he,{defaultMessage:"Confirm changes",id:"AnPtOvcf8f"})}),l.jsx(L2,{planName:{id:"kkjl2vQekD",defaultMessage:"Max"},price:n?.old_product_price,formatNumber:o,billingInterval:n?.old_product_interval}),l.jsx(z,{children:l.jsxs(D,{variant:"tinyRegular",color:"light",className:"flex items-center justify-center gap-1",children:[l.jsx("div",{className:"border-subtlest flex-1 border-t"}),l.jsx(he,{defaultMessage:"Downgrade",id:"SduMNm+0em"}),l.jsx("div",{className:"border-subtlest flex-1 border-t"})]})}),l.jsx(L2,{planName:{id:"R/eOkjWqNU",defaultMessage:"Pro"},price:n?.new_product_price,formatNumber:o,billingInterval:n?.new_product_interval,isHighlighted:!0,className:"mb-0.5 !rounded-b-none rounded-t-md"}),l.jsx(z,{variant:"offset",className:"px-md py-sm flex items-center justify-between rounded-b-md",children:l.jsx(D,{variant:"small",color:"light",children:l.jsx(he,{defaultMessage:"Your current Max subscription will remain active until {date} when it will change to Pro.",id:"2C6tgt4MMg",values:{date:g}})})}),l.jsxs(z,{className:"gap-sm mt-ml flex justify-end",children:[l.jsx(ke,{text:l.jsx(he,{defaultMessage:"Cancel",id:"47FYwba+bI"}),onClick:t}),l.jsx(ye,{variant:"primary",text:l.jsx(he,{defaultMessage:"Confirm",id:"N2IrpMDHDB"}),disabled:h,onClick:()=>m()})]})]})})},Ig="clicked enterprise ad",jg="https://www.perplexity.ai/enterprise",Nme=()=>{const{trackEvent:e}=Te(),t=At(),{hasAccessToProFeatures:n}=Nt(),r=f.useCallback(async p=>{p.preventDefault(),e(Ig,{source:"sidebarAd",isSubscribed:n}),t.push(jg)},[e,t,n]),s=f.useCallback(async p=>{p?.preventDefault(),e(Ig,{source:"settingsHeader"}),t.push(jg)},[e,t]),a=f.useCallback(async p=>{p.preventDefault(),p.stopPropagation(),e(Ig,{source:"footer"}),t.push(jg)},[e,t]),o=f.useCallback(async p=>{p.preventDefault(),e(Ig,{source:"pricingTable"}),t.push(jg)},[e,t]),i=f.useCallback(async p=>{p.preventDefault(),e(Ig,{source:"paywall"}),t.push(jg)},[e,t]),c=f.useCallback(({orgName:p,success:g})=>{e("org created",{orgName:p,success:g})},[e]),u=f.useCallback(({invitedEmail:p,source:g,orgUUID:y,inviteType:v})=>{e("org user invited",{invitedEmail:p,source:g,orgUUID:y,inviteType:v})},[e]),d=f.useCallback(({orgUUID:p})=>{e("org invite step completed",{orgUUID:p})},[e]),m=f.useCallback(({orgUUID:p,source:g,intent:y,success:v})=>e("org payment portal entered",{orgUUID:p,source:g,intent:y,success:v}),[e]),h=f.useCallback(({orgUUID:p,success:g})=>{e("sso enabled",{orgUUID:p,success:g})},[e]);return f.useMemo(()=>({handleSidebarAdClick:r,handleSettingsHeaderAdClick:s,handleFooterAdClick:a,handlePricingTableAdClick:o,handlePaywallAdClick:i,trackOrgCreated:c,trackOrgUserInvited:u,trackOrgInviteStepCompleted:d,trackOrgPaymentPortalEntered:m,trackSSOEnabled:h}),[a,i,o,s,r,c,d,m,u,h])},YZe=({reason:e})=>{const t=At(),{organization:n}=pn({reason:e}),{trackOrgPaymentPortalEntered:r}=Nme(),s=f.useCallback(async({source:i})=>{const c=await BHe({source:i,locale:Jc(),reason:e});c?(r({orgUUID:n?.uuid,source:i,intent:"portal",success:!0}),t.push(c)):(r({orgUUID:n?.uuid,source:i,intent:"portal",success:!1}),ee.log("could not open Stripe portal"))},[r,n?.uuid,t,e]),a=f.useCallback(({tier:i="monthly",source:c,onErrorCallback:u,reason:d})=>{const m=Jc();VHe({tier:i,origin:c,locale:m,reason:d}).then(h=>{h&&h.status==="success"&&h.url!=null&&h.url!==""?(r({orgUUID:n?.uuid,source:c,intent:"checkout",success:!0}),h.url&&t.push(h.url)):(r({orgUUID:n?.uuid,source:c,intent:"checkout",success:!1}),u?.())})},[t,n?.uuid,r]),o=f.useCallback(async({tier:i,collectionMethod:c,source:u,billingAddress:d,reason:m})=>{const h=Jc(),p=await $He({tier:i,origin:u,locale:h,collectionMethod:c,billingAddress:d,reason:m});return await ode({reason:m}),p},[]);return f.useMemo(()=>({manageExistingBillingClick:s,navigateToCheckout:a,createInvoicedSubscription:o}),[o,s,a])};var WT={},Lq;function QZe(){return Lq||(Lq=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="arrow-right",r=448,s=512,a=[8594],o="f061",i="M440.6 273.4c4.7-4.5 7.4-10.8 7.4-17.4s-2.7-12.8-7.4-17.4l-176-168c-9.6-9.2-24.8-8.8-33.9 .8s-8.8 24.8 .8 33.9L364.1 232 24 232c-13.3 0-24 10.7-24 24s10.7 24 24 24l340.1 0L231.4 406.6c-9.6 9.2-9.9 24.3-.8 33.9s24.3 9.9 33.9 .8l176-168z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faArrowRight=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(WT)),WT}var XZe=QZe();function ZZe(e){return!!e&&typeof e=="object"&&"prefix"in e&&"iconName"in e}const JZe={good:"super",bad:"red",info:"offset",orange:"orange"},Np=A.memo(({variant:e,title:t,actionLabel:n,onClick:r,onClose:s,toolTip:a,icon:o,isMobileStyle:i,isLoading:c})=>{const u=e==="info"?"default":"white",d=e==="info"?"super":u,m=f.useCallback(p=>{p.stopPropagation(),s?.(p)},[s]),h=l.jsxs(z,{className:B("h-bannerHeight erp-tab:rounded-none md:rounded-md lg:rounded-lg","gap-xs px-md md:gap-sm relative flex w-full cursor-pointer items-center transition duration-200 hover:opacity-80",e==="info"?"md:justify-between":"md:justify-center",{"px-lg":s}),variant:JZe[e],onClick:r,children:[c?l.jsx(D,{color:u,children:l.jsx(Ns,{})}):o&&l.jsx(D,{color:u,className:"mr-xs md:mr-0",children:ZZe(o)?l.jsx(xt,{icon:o,size:"sm"}):l.jsx(be,{icon:o,size:i?"sm":"md"})}),l.jsx(D,{color:u,className:"leading-[1.1]",variant:i?"tiny":"small",children:t}),l.jsxs("div",{className:"flex items-center gap-1",children:[n&&l.jsx(D,{color:d,variant:i?"tiny":"small",className:B("hidden font-bold decoration-white/30 md:inline-flex",{"underline underline-offset-2":e!=="info"}),children:n}),r&&e!=="info"&&l.jsx(D,{color:u,className:"inline-flex",children:l.jsx(xt,{icon:XZe.faArrowRight,size:"2xs"})})]}),s&&l.jsx(ke,{icon:Xt,extraCSS:B("!absolute right-sm opacity-50",e==="info"?"text-foreground dark:!text-white":"!text-white"),variant:"noHover",size:"tiny",onClick:m})]});return a?l.jsx(bn,{tooltipText:a,children:h}):h});Np.displayName="SiteBanner";const eJe=({orgStripeStatus:e})=>{const t="org-billing-banner",n=At(),{$t:r}=X(),{navigateToCheckout:s}=YZe({reason:t}),{isMobileStyle:a}=Ce(),[o,i]=f.useState(!1),c=()=>{o||(i(!0),e==="none"?n.push("/onboarding/onboarding-org-subscription"):s({source:"banner",onErrorCallback:()=>{n.refresh("Org billing banner"),i(!1)},reason:t}))},u=r(e==="past_due"?{defaultMessage:"Please complete your invoice payment to use Enterprise Pro features",id:"XAdWAUIg7/"}:{defaultMessage:"Please complete the payment process to use Enterprise Pro features",id:"Mgy1Lo2SzZ"}),d=r({defaultMessage:"May take up to a minute to reflect payment status changes",id:"+w47QOW1fc"});return l.jsx(Np,{onClick:c,isLoading:o,variant:"bad",title:u,toolTip:d,icon:B4e,isMobileStyle:a})};var HT={},zT={},Dq;function tJe(){return Dq||(Dq=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="triangle-exclamation",r=512,s=512,a=[9888,"exclamation-triangle","warning"],o="f071",i="M248.4 84.3c1.6-2.7 4.5-4.3 7.6-4.3s6 1.6 7.6 4.3L461.9 410c1.4 2.3 2.1 4.9 2.1 7.5c0 8-6.5 14.5-14.5 14.5l-387 0c-8 0-14.5-6.5-14.5-14.5c0-2.7 .7-5.3 2.1-7.5L248.4 84.3zm-41-25L9.1 385c-6 9.8-9.1 21-9.1 32.5C0 452 28 480 62.5 480l387 0c34.5 0 62.5-28 62.5-62.5c0-11.5-3.2-22.7-9.1-32.5L304.6 59.3C294.3 42.4 275.9 32 256 32s-38.3 10.4-48.6 27.3zM288 368a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm-8-184c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 96c0 13.3 10.7 24 24 24s24-10.7 24-24l0-96z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faTriangleExclamation=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(zT)),zT}var Fq;function nJe(){return Fq||(Fq=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=tJe();e.definition={prefix:t.prefix,iconName:t.iconName,icon:[t.width,t.height,t.aliases,t.unicode,t.svgPathData]},e.faExclamationTriangle=e.definition,e.prefix=t.prefix,e.iconName=t.iconName,e.width=t.width,e.height=t.height,e.ligatures=t.aliases,e.unicode=t.unicode,e.svgPathData=t.svgPathData,e.aliases=t.aliases}(HT)),HT}var rJe=nJe(),GT={},Uq;function sJe(){return Uq||(Uq=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="gift",r=512,s=512,a=[127873],o="f06b",i="M231.9 44.4C215.7 16.9 186.1 0 154.2 0L152 0C103.4 0 64 39.4 64 88c0 14.4 3.5 28 9.6 40L48 128c-26.5 0-48 21.5-48 48l0 64c0 20.9 13.4 38.7 32 45.3l0 2.7 0 160c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-160 0-2.7c18.6-6.6 32-24.4 32-45.3l0-64c0-26.5-21.5-48-48-48l-25.6 0c6.1-12 9.6-25.6 9.6-40c0-48.6-39.4-88-88-88l-2.2 0c-31.9 0-61.5 16.9-77.7 44.4L256 85.5l-24.1-41zM464 176l0 64-32 0-144 0 0-64 72 0 104 0zm-240 0l0 64L80 240l-32 0 0-64 104 0 72 0zm0 112l0 176L96 464c-8.8 0-16-7.2-16-16l0-160 144 0zm64 176l0-176 144 0 0 160c0 8.8-7.2 16-16 16l-128 0zm72-336l-72 0-1.3 0 34.8-59.2C329.1 55.9 342.9 48 357.8 48l2.2 0c22.1 0 40 17.9 40 40s-17.9 40-40 40zm-136 0l-72 0c-22.1 0-40-17.9-40-40s17.9-40 40-40l2.2 0c14.9 0 28.8 7.9 36.3 20.8L225.3 128l-1.3 0z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faGift=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(GT)),GT}var aJe=sJe();const oJe=()=>{const e=At(),{trackEvent:t}=Te(),n=f.useCallback(async({origin:r,discountCode:s,tier:a,referralCode:o,subscriptionTier:i="pro"})=>{const c=new URL(`/${i}/payment`,window.location.origin);return c.searchParams.set("plan",a),c.searchParams.set("origin",r),s&&c.searchParams.set("promotion_code",s),t("pro checkout started",{subscriptionTier:i,origin:r,discountCode:s??"",referralCode:o??"",tier:"monthly",flowType:"embedded_checkout"}),e.push(c.toString()),!0},[e,t]);return f.useMemo(()=>({navigateToPayment:n}),[n])},Ame=()=>{const{openModal:e}=_t(),{isMobileUserAgent:t}=Ce(),n=YO(),r=f.useCallback(({origin:s,sheetModalVariant:a,closeCallback:o})=>{!t||n||e("installModal",{origin:s,sheetModalVariant:a,closeCallback:o})},[n,t,e]);return f.useMemo(()=>({openInstallUpsell:r}),[r])};var Bq={};const $n=({enabled:e})=>{const{openModal:t}=_t(),{keysRequiringRerender:n,removeKeyRequiringRerender:r}=xf(),{isMobileUserAgent:s}=Ce(),a=Je(),{openInstallUpsell:o}=Ame(),i=f.useCallback(({title:u,description:d,origin:m,image:h,imageAlt:p,closeCallback:g,loginButtonsStyle:y})=>{!e||a||Bq.NEXT_PUBLIC_IS_SIDECAR_BUILD||t("loginModal",{pitchMessage:u?{title:u,description:d}:void 0,origin:m,experimentalImageDesign:{image:h,imageAlt:p},closeCallback:g,loginButtonsStyle:y})},[e,t,a]),c=f.useCallback(({title:u,description:d,origin:m,sheetModalVariant:h,closeCallback:p,overrideRedirectUrl:g,disallowedMethods:y,overrideMobileVariant:v=!1})=>{if(!e||a||Bq.NEXT_PUBLIC_IS_SIDECAR_BUILD)return;let x="full-sheet";(v||!s)&&h&&(x=h),t("loginModal",{pitchMessage:u?{title:u,description:d}:void 0,origin:m,sheetModalDesign:x,closeCallback:p,overrideRedirectUrl:g,disallowedMethods:y})},[e,s,t,a]);return f.useEffect(()=>{e&&(n.includes("visitor-gate")&&(s&&!eh()?o({origin:Be.VISITOR_GATE,sheetModalVariant:"inset-centered-sheet"}):c({origin:Be.VISITOR_GATE,sheetModalVariant:"bottom-sheet-gradient"}),r("visitor-gate")),n.includes("visitor-gate-ii")&&(s&&!eh()?o({origin:Be.VISITOR_GATE,sheetModalVariant:"inset-centered-sheet"}):c({origin:Be.VISITOR_GATE}),r("visitor-gate-ii")))},[e,c,n,r,s,o]),f.useMemo(()=>({openVisitorLoginUpsell:c,openVisitorLoginImageUpsell:i}),[i,c])};function bu(e,t){ee.info("Redirecting window",{reason:t,url:window.location.href,redirect:F3e(e).toString()}),window.location.href=e}const iJe=({message:e,discountCode:t,clearDiscountCode:n})=>{const r="discount-code-banner",s=Je(),{trackEvent:a}=Te(),{$t:o}=X(),{isMobileStyle:i}=Ce(),[c,u]=f.useState(!1),[d,m]=f.useState(null),{openVisitorLoginUpsell:h}=$n({enabled:!s}),{navigateToPayment:p}=oJe(),g=Be.DISCOUNT_CODE_BANNER;f.useEffect(()=>{a("promo code banner shown",{discountCode:t})},[a,t]);const y=f.useCallback(()=>{const b=new URL(window.location.href);b.searchParams.delete("discount_code"),kp(Object.fromEntries(b.searchParams)),n()},[n]),v=f.useCallback(async()=>{if(a("promo code banner clicked",{discountCode:t}),!c){if(d){y(),m(null);return}if(s){if(u(!0),a("get started button clicked from discount banner",{tier:"monthly"}),await p({origin:g,discountCode:t,tier:"monthly"})){n();return}a("pro checkout started",{subscriptionTier:"pro",origin:g,discountCode:t??"",referralCode:"",tier:"monthly",flowType:"stripe_checkout"}),Bie({request:{subscriptionTier:"pro",tier:"monthly",referralCode:"",discountCode:t,origin:g,locale:Jc()},reason:r}).then(b=>{b?.url?bu(b.url,"Discount code banner checkout"):(b?.errorCode==="PROMO_CODE_CUSTOMER_NOT_FIRST_TIME"?m(o({defaultMessage:"This code is only valid for first-time customers. Click to dismiss.",id:"xTWJg0ueMJ"})):m(o({defaultMessage:"There was an error with your code. Please double-check your code and click to try again.",id:"CdOiX2ylN6"})),u(!1))})}else h({title:o({defaultMessage:"Get started with your Pro discount",id:"XTa2YrANRF"}),origin:g})}},[o,n,t,d,c,s,p,h,g,a,y]),x=b=>{y(),b.preventDefault()};return l.jsx(Np,{onClick:v,isLoading:c,icon:d?rJe.faExclamationTriangle:aJe.faGift,variant:d?"bad":"good",title:d||e,isMobileStyle:i,onClose:x})};var qT={},Vq;function lJe(){return Vq||(Vq=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="fas",n="gift",r=512,s=512,a=[127873],o="f06b",i="M190.5 68.8L225.3 128l-1.3 0-72 0c-22.1 0-40-17.9-40-40s17.9-40 40-40l2.2 0c14.9 0 28.8 7.9 36.3 20.8zM64 88c0 14.4 3.5 28 9.6 40L32 128c-17.7 0-32 14.3-32 32l0 64c0 17.7 14.3 32 32 32l448 0c17.7 0 32-14.3 32-32l0-64c0-17.7-14.3-32-32-32l-41.6 0c6.1-12 9.6-25.6 9.6-40c0-48.6-39.4-88-88-88l-2.2 0c-31.9 0-61.5 16.9-77.7 44.4L256 85.5l-24.1-41C215.7 16.9 186.1 0 154.2 0L152 0C103.4 0 64 39.4 64 88zm336 0c0 22.1-17.9 40-40 40l-72 0-1.3 0 34.8-59.2C329.1 55.9 342.9 48 357.8 48l2.2 0c22.1 0 40 17.9 40 40zM32 288l0 176c0 26.5 21.5 48 48 48l144 0 0-224L32 288zM288 512l144 0c26.5 0 48-21.5 48-48l0-176-192 0 0 224z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faGift=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(qT)),qT}var cJe=lJe();const uJe=f.memo(({className:e,innerClassName:t,gridClassName:n,children:r,fadeOut:s,dotClassName:a,highlightClassName:o,animate:i=!0,gridSize:c=22,count:u=20})=>{const[d,{width:m,height:h}]=tc(),[p,g]=f.useState([]),[y,v]=f.useState(0),[x,b]=f.useState(0),_=f.useRef(null),w=f.useRef(new Set),S=f.useCallback(()=>{const E=Math.floor(Math.random()*y)+1,M=Math.floor(Math.random()*x)+1,T=`${E}-${M}`;if(w.current.has(T))return;const I={col:E,row:M,id:T,duration:Math.floor(Math.random()*1001)+1e3,isSuper:Math.floor(Math.random()*5)%5===0};g(j=>{const N=[I,...j];if(N.length>u){const P=N.pop();P&&w.current.delete(P.id)}return w.current.add(T),N})},[y,x,u]);f.useEffect(()=>{if(i)return _.current=setInterval(S,100),()=>{_.current&&clearInterval(_.current)}},[S,i]),f.useEffect(()=>{v(Math.floor(m/c)),b(Math.floor(h/c))},[m,h,c]);const C=s?{maskImage:"radial-gradient(black, transparent)"}:void 0;return l.jsxs("div",{className:B("bg-base dotGridContainer pointer-events-none relative isolate",e),ref:d,children:[l.jsxs("div",{className:"absolute inset-0 overflow-hidden",style:C,children:[l.jsx("div",{className:B("dotHighlightGrid bg-inverse/20 absolute inset-0",o),children:p.map(E=>l.jsx(dJe,{item:E,className:a},E.id))}),l.jsx("div",{className:B("dotGrid absolute inset-0",n)})]}),l.jsx("div",{className:B("relative",t),children:r})]})}),dJe=f.memo(({item:e,className:t})=>l.jsx("div",{className:B("gridDot text-foreground",t,{highlight:e.isSuper}),style:{gridColumn:e.col,gridRow:e.row,animationDuration:`${e.duration}ms`}}));function Pme(){return jC("pplx.partner_banner",null,{initializeWithValue:!1})}function Rme(){return jC("pplx.partner_discount_code",null,{initializeWithValue:!1})}const fJe="back_to_school_winner",Ime="EDUFREEYEAR",KT=({partnerCode:e,partnerDiscountCode:t,bannerVariant:n})=>{const{$t:r}=X(),s=Ot(),{hasActiveSubscription:a}=Nt(),o=e==="edu"&&t===Ime?!1:a,[,,i]=Pme(),[,,c]=Rme(),[u,d]=f.useState(!1),{isMobileStyle:m}=Ce(),{data:h}=Ke({queryKey:["partner",e],queryFn:()=>fetch(`/api/subscription/config?partnerCode=${e}`).then(S=>S.json())}),p=At();if(!e)return null;const g=h?.messages??voe,y=o?r({defaultMessage:"Welcome to Perplexity Pro",id:"dcD7kilsgv"}):g?.bannerMessage??"",v=o?r({defaultMessage:"Learn More",id:"7DIW6+rckr"}):e.startsWith("edu")?r({defaultMessage:"Redeem Now",id:"EiBCDsh1sP"}):r({defaultMessage:"Get Started",id:"9QXm1EW9qz"}),x=o?void 0:cJe.faGift,b=o?`/join/p/${e}/welcome`:s&&t?`/join/p/${e}/${t}`:`/join/p/${e}`,_=S=>{i(),c(),S.preventDefault()},w=()=>{u||(d(!0),p.push(b))};return h?.maskPromoCodeFromQueryParams?null:l.jsx(Np,{icon:x,isMobileStyle:m,title:y,actionLabel:v,onClick:w,isLoading:u,variant:n??"good",onClose:_})},mJe="https://www.perplexity.ai/hub/blog/eligible-uber-one-members-can-now-unlock-a-complimentary-full-year-of-perplexity-pro",hJe=()=>{const{$t:e}=X(),t=At(),{isMobileStyle:n}=Ce(),[r,s]=f.useState(!1),a=()=>{r||(s(!0),t.push(mJe))};return l.jsx(Np,{variant:"good",title:e({defaultMessage:"{uberOne} members in the United States and Canada can redeem one free year of {perplexityPro}",id:"jo9fEuRnKx"},{uberOne:"Uber One",perplexityPro:"Perplexity Pro"}),onClick:a,isLoading:r,isMobileStyle:n})},hd={pro:V4e,collection:ya,research:Jj,labs:lS,comet_login:dl};function pJe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LP(){return LP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},LP.apply(this,arguments)}function $q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Wq(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$q(Object(n),!0).forEach(function(r){pJe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$q(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function gJe(e,t){if(e==null)return{};var n,r,s=function(o,i){if(o==null)return{};var c,u,d={},m=Object.keys(o);for(u=0;u<m.length;u++)c=m[u],i.indexOf(c)>=0||(d[c]=o[c]);return d}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function Og(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(n)))){var s=[],a=!0,o=!1,i=void 0;try{for(var c,u=n[Symbol.iterator]();!(a=(c=u.next()).done)&&(s.push(c.value),!r||s.length!==r);a=!0);}catch(d){o=!0,i=d}finally{try{a||u.return==null||u.return()}finally{if(o)throw i}}return s}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Hq(n,r);var s=Object.prototype.toString.call(n).slice(8,-1);if(s==="Object"&&n.constructor&&(s=n.constructor.name),s==="Map"||s==="Set")return Array.from(n);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return Hq(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Hq(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ly={},zq=function(e){var t=document.querySelector('script[src="'.concat(e,'"]'));if(t)return ly[e]={loading:!1,error:null,scriptEl:t}},Gq=typeof window<"u"&&window.document!==void 0,qq=function(e){return e?.linkToken!==void 0},yJe=function(e){var t=LP({},e),n=function(d){var m=d.src,h=d.checkForExisting,p=h!==void 0&&h,g=gJe(d,["src","checkForExisting"]),y=m?ly[m]:void 0;!y&&p&&m&&Gq&&(y=zq(m));var v=Og(f.useState(y?y.loading:!!m),2),x=v[0],b=v[1],_=Og(f.useState(y?y.error:null),2),w=_[0],S=_[1],C=Og(f.useState(!1),2),E=C[0],M=C[1];return f.useEffect(function(){if(Gq&&m&&!E&&!w){var T;!(y=ly[m])&&p&&(y=zq(m)),y?T=y.scriptEl:((T=document.createElement("script")).src=m,Object.keys(g).forEach(function(N){T[N]===void 0?T.setAttribute(N,g[N]):T[N]=g[N]}),y=ly[m]={loading:!0,error:null,scriptEl:T});var I=function(){y&&(y.loading=!1),b(!1),M(!0)},j=function(N){y&&(y.error=N),S(N)};return T.addEventListener("load",I),T.addEventListener("error",j),document.body.appendChild(T),function(){T.removeEventListener("load",I),T.removeEventListener("error",j),y&&y.loading&&(T.remove(),delete ly[m])}}},[m]),[x,w]}({src:"https://ah-cdn.merge.dev/initialize.js",checkForExisting:!0}),r=Og(n,2),s=r[0],a=r[1],o=Og(f.useState(!1),2),i=o[0],c=o[1],u=!(typeof window>"u")&&!!window.AgentHandlerLink&&!s&&!a&&qq(t);return f.useEffect(function(){u&&window.AgentHandlerLink&&qq(t)&&window.AgentHandlerLink.initialize(Wq(Wq({},t),{},{onReady:function(){return c(!0)}}))},[u,t]),{open:f.useCallback(function(){window.AgentHandlerLink&&window.AgentHandlerLink.openLink(t)},[t]),isReady:i,error:a}};const vJe="/account/connectors",Kq={GCAL_CONNECT:"gcal_connect",CONNECTOR_COMPLETE:"connector_complete"},xJe={UPSELL_CONNECTOR:"upsell-connector-channel"},tVt="18334363285",bJe=(e,t)=>{const{value:n,loading:r}=Ut({flag:"email-assistant-onboarding-callback-enabled",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])};function _Je({reason:e}){const t=gt(),n=HS();return Mt({mutationKey:["publishArticleMutation"],mutationFn:async({connectorName:r,connectionUUID:s,deleteFiles:a})=>{let o;return s&&!a?o=await LGe({connectionUUID:s,reason:e}):s&&a?o=await DGe({connectionUUID:s,reason:e}):o=await OGe({connectorName:r,reason:e}),o},onSettled:async()=>{await t.refetchQueries({queryKey:n})},onMutate:async({connectorName:r,connectionUUID:s})=>{t.setQueryData(n,a=>{if(!a)return a;const o=a.connectors.connectors.map(i=>i.name===r&&(!s||i.connection_uuid===s)?{...i,connected:!1}:i);return{...a,connectors:{connectors:o}}})}})}const jme=({reason:e})=>{const t=Ht(),n=t?.get("referrer"),r=t?.get("referrerId"),{$t:s}=X(),{openToast:a}=On(),o=f.useCallback(async({connectorName:i,redirectPath:c,customReferrer:u,customReferrerId:d,unauthedRedirectPath:m})=>{const h=await jGe({name:i,referrer:u??n??void 0,referrerId:d??r??void 0,redirectPath:c??void 0,unauthedRedirectPath:m??void 0,reason:e});if(!h){a(s({defaultMessage:"Unable to start connection.",id:"SPIzcd/Xa2"}),"error",3);return}bu(h,"File connector")},[e,n,r,s,a]);return f.useMemo(()=>({handleConnect:o}),[o])},V9=()=>{const{$t:e}=X(),t=At(),{createCollection:n,createCollectionForThread:r}=Sp({reason:"create-new-space"}),s=f.useCallback(()=>{const o=e({defaultMessage:"New Space",id:"t5xj3BH/Ni"});n({title:o,description:"",emoji:"",instructions:"",accessLevel:a2,enableWebByDefault:!0,callback:i=>{t.push(`/spaces/${i.slug}`)}})},[n,e,t]),a=f.useCallback((o,i)=>{const c=e({defaultMessage:"New Space",id:"t5xj3BH/Ni"});r({title:c,description:"",emoji:"",instructions:"",accessLevel:a2,enableWebByDefault:!0,entryUUID:o,frontendContextUUID:i,callback:u=>{t.push(`/spaces/${u.slug}`)}})},[r,e,t]);return f.useMemo(()=>({handleCreateNewSpace:s,handleCreateNewSpaceForThread:a}),[s,a])};function $9(){const{value:e}=Ut({flag:"spaces-creation-redesign",subjectType:"user_nextauth_id",defaultValue:!1});return e}var wJe={};const SJe=e=>{e=e??"mac_arm64";const t={channel:"stable",platform:e};e.includes("win")&&(t.mini="1");const n=new URLSearchParams(t),r=new URL(wJe.NEXT_PUBLIC_COMET_DOWNLOAD_URL??"https://www.perplexity.ai/rest/browser/download");return r.search=n.toString(),r},nVt=async({reason:e})=>(await ne.POST("/rest/browser/invites/status",e,{params:{},timeoutMs:nn.MEDIUM,numRetries:1})).data,CJe=({isUnsupportedDevice:e,isWindows:t})=>{const{trackEvent:n}=Te(),{sendCometDownloadedEventSingular:r,sendCometDownloadButtonClickedEventSingular:s}=B9(),a=f.useCallback((c,{upsellName:u,partnerCode:d})=>{n("click download comet",{requestedPlatform:c,upsellName:u,installPartner:d}),r(),setTimeout(()=>bu(SJe(c).href,"Comet download"),250)},[n,r]),o=f.useCallback(({upsellName:c,partnerCode:u})=>{if(!e)return t?a("win_x64",{upsellName:c,partnerCode:u}):a("mac_arm64",{upsellName:c,partnerCode:u})},[a,t,e]),i=f.useCallback(({upsellName:c,partnerCode:u})=>{s(),o({upsellName:c,partnerCode:u})},[s,o]);return{handleDownload:o,handleDownloadClick:i}},EJe=(e,t)=>{const{value:n,loading:r}=Ut({flag:"student-verification-onboarding",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},MJe=(e,t)=>{const{value:n,loading:r}=Ut({flag:"maybe-student-domains-regex",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])};var TJe=(e=>(e.SPRING_2025="SPRING_2025",e.GIVE_1_MONTH_FREE="GIVE_1MO_GET_1MO",e))(TJe||{});const kJe={EMAIL_ALREADY_REGISTERED:"Promo not valid for existing users",INVALID_REFERRAL_CODE:"Invalid referral code",UNKNOWN:"An unknown error occurred",EMAIL_RATE_LIMIT_EXCEEDED:"Too many emails sent to this address"},rVt=async({reason:e})=>{try{const{data:t,error:n}=await ne.GET("/rest/academic/student-partner-config",e,{timeoutMs:je()});if(n)throw new Error("Failed to get student partner config");return{countryOffers:t.country_offers||{},countryNames:t.country_names||{},defaultMonths:t.default_months||1}}catch(t){return ee.error("Failed to get student partner config",t),{countryOffers:{BR:3,PH:3,MY:1,ID:1},countryNames:{BR:"Brazil",PH:"Philippines",MY:"Malaysia",ID:"Indonesia"},defaultMonths:1}}},NJe=async({email:e,reason:t})=>{try{const{data:n,error:r}=await ne.GET("/rest/referrals/validate-email",t,{params:{query:{email:e}},timeoutMs:je()});if(r)throw new Error("Failed to validate referral email");return{valid:n.is_valid,error:!1}}catch(n){return ee.error("Failed to validate referral email",n),{valid:!1,error:!0}}},sVt=async({referralCode:e,reason:t})=>{try{const{data:n,error:r}=await ne.GET("/rest/referrals/get-user-from-referral-code",t,{params:{query:{referral_code:e}}});if(r)throw new Error("Failed to get user from referral code");return n}catch(n){return ee.error("Failed to get user from referral code",n),{email:null,is_student:null,is_active:!1}}},aVt=async({toEmail:e,referralType:t,reason:n})=>{try{const{error:r}=await ne.POST("/rest/referrals/send-referral-email",n,{body:{to_email:e,referral_type:t},timeoutMs:8e4});return r?{success:!1,error:r.detail?.[0]?.msg||r.detail}:{success:!0,error:null}}catch(r){return ee.error("Failed to send referral email",r),{success:!1,error:kJe.UNKNOWN}}},AJe=async({headers:e,email:t,reason:n})=>{const{data:r,error:s}=await ne.GET("/rest/referrals/",n,{headers:e,params:{query:{email:t}}});if(s)throw new Error("Failed to get user referral status");return r},PJe=async({verificationId:e,reason:t})=>{try{if(!e)throw new Error("Verification ID is required");const{data:n,error:r}=await ne.GET("/rest/referrals/student-reward-details",t,{params:{query:{verification_id:e}},timeoutMs:je()});if(r)throw new Error("Failed to get student reward details");return n}catch(n){return ee.error("Failed to get student reward details",n),{months_awarded:1,reward_type:"default",organization:null}}},W9=({email:e,reason:t})=>{const{data:n,isLoading:r}=Ke({queryKey:["user_student",e,t],queryFn:()=>NJe({email:e,reason:t}),enabled:!!e});return f.useMemo(()=>({isStudent:n?.valid??null,loading:r}),[n?.valid,r])},RJe=async({reason:e,headers:t})=>{try{return(await ne.GET("/rest/landing-page/academic/tile-data",e,{timeoutMs:nn.MEDIUM,headers:t})).data}catch(n){return ee.error("Failed to get academic tile data",n),null}},IJe=async({reason:e,headers:t})=>{try{return(await ne.GET("/rest/landing-page/academic/primer-queries",e,{timeoutMs:nn.MEDIUM,headers:t})).data}catch(n){return ee.error("Failed to get academic primer queries",n),null}},oVt=({reason:e})=>Ke({queryKey:fOe(),queryFn:()=>RJe({reason:e})}),iVt=({reason:e})=>Ke({queryKey:mOe(),queryFn:()=>IJe({reason:e})}),jJe=async({reason:e,headers:t})=>{try{return(await ne.GET("/rest/academic/check-edu-institution",e,{timeoutMs:nn.HIGH,headers:t})).data}catch(n){return ee.error("Failed to check institution",n),null}},OJe=({reason:e})=>Ke({queryKey:hOe(),queryFn:()=>jJe({reason:e})}),LJe=({reason:e})=>{const n=Ot()?.user?.email??"",{isStudent:r,loading:s}=W9({email:n,reason:e}),{variation:a,loading:o}=MJe(!1),{data:i,isLoading:c}=OJe({reason:e});return f.useMemo(()=>c||o||s?{isLoading:!0,signals:{isVerifiedStudent:null,isPossibleStudentByEmail:null,isPossibleStudentByIP:null}}:{isLoading:!1,signals:{isVerifiedStudent:!!r,isPossibleStudentByEmail:!!a,isPossibleStudentByIP:!!i?.institution}},[c,o,s,a,r,i?.institution])},DJe={currentStep:null,currentIndex:0,steps:[],handleNext:()=>null,insertStep:()=>null,insertStepAndNavigate:()=>null,experimentVariationsMeta:{},setCurrentIndex:()=>null},Ome=f.createContext(DJe),lVt=({steps:e,experimentVariationsMeta:t,handleFinish:n,initialIndex:r=0,children:s})=>{const[a,o]=f.useState(r),[i,c]=f.useState(e),[u,d]=f.useState(null),[m,h]=f.useState(t),{trackEventTyped:p}=Te();f.useEffect(()=>{c(e)},[e]),f.useEffect(()=>{h(t)},[t]),f.useEffect(()=>{p("step visited",{step:i[a],experimentVariationsMeta:m})},[a,m,i,p]),f.useEffect(()=>{u!==null&&(o(u),d(null),p("step transition",{sourceStep:i[a],destinationStep:i[u],isFinish:!1,experimentVariationsMeta:m}))},[a,m,u,i,p]);const g=(b,_)=>{const w=[...i];w.splice(_,0,b),c(w)},y=(b,_)=>{g(b,_),d(_)},v=()=>{i.length&&(a===i.length-1?(n?.(),p("step transition",{sourceStep:i[a],isFinish:!0,experimentVariationsMeta:m})):(o(a+1),p("step transition",{sourceStep:i[a],destinationStep:i[a+1],isFinish:!1,experimentVariationsMeta:m})))},x=f.useMemo(()=>i[a],[a,i]);return l.jsx(Ome.Provider,{value:{currentStep:x,insertStep:g,insertStepAndNavigate:y,handleNext:v,currentIndex:a,steps:i,setCurrentIndex:o,experimentVariationsMeta:m},children:s})},FJe=()=>{const e=f.useContext(Ome);if(!e)throw new Error("useMultiStep must be used within MultiStepContext");return e},UJe=({origin:e})=>{const{$t:t}=X(),n=Ht(),r=Je(),{openVisitorLoginUpsell:s}=$n({enabled:!r}),{insertStepAndNavigate:a,currentIndex:o}=FJe(),{openModal:i}=_t(),{variation:c}=EJe(!1),{signals:u,isLoading:d}=LJe({reason:"combined_paywall"}),m=f.useCallback(w=>{w&&(typeof window<"u"&&window.location.pathname==="/onboarding"?(Ts.setItem("student_verification_id",w),a("onboarding-student-referrals",o+1)):i("studentReferrals",{verificationId:w}))},[a,o,i]),[h,p]=f.useState({isOpen:!1}),g=f.useCallback(w=>{p({isOpen:!0,onSuccess:m,type:w})},[m]),y=f.useCallback(()=>{p({isOpen:!1})},[]),v=f.useCallback(w=>{if(!r){s({title:t({defaultMessage:"Sign in to unlock Education Pro",id:"UNeU1Y4Zdu"}),origin:e});return}g(w)},[r,s,g,t,e]),x=n?.get(mc),b=x===Be.STUDENT_LANDING_PAGE||x===Be.STUDENT_REFERRAL_LANDING_PAGE,_=!!c&&(b||!!u.isVerifiedStudent||!!u.isPossibleStudentByEmail||!!u.isPossibleStudentByIP);return{isLoading:!!d,showStudentVerification:c,isVerifiedStudent:!!u.isVerifiedStudent,handleStudentTierClick:v,handleVerificationSuccess:m,shouldDefaultToStudent:_,sheerIdModalState:h,closeSheerIdModal:y}},LC=async(e,t)=>{try{const{error:n}=await ne.POST("/rest/homepage-widgets/upsell/interacted","upsell interaction tracking",{body:{upsell_name:e,upsell_instance_identifier:t||null},timeoutMs:je(),numRetries:1});n&&ee.error("Failed to mark upsell as interacted",{upsellName:e,upsellInstanceIdentifier:t,error:n})}catch(n){ee.error("Error marking upsell as interacted",{upsellName:e,upsellInstanceIdentifier:t,error:n})}};var BJe={};const Lme=()=>{const e=tn(),t=hr(),n=f.useCallback(r=>{const s=!!r.last_backend_uuid,a=xr(r.model_preference)===ae.RESEARCH||xr(r.model_preference)===ae.STUDIO;return(r.sources?.some(i=>i==="web")??!0)&&e&&!s&&!BJe.NEXT_PUBLIC_IS_SIDECAR_BUILD&&!a&&!r.override_no_search},[e]);return f.useCallback((r,s,a)=>{!r||!n(s)||t.injectSearchResults(r,a)},[t,n])},Ap=f.createContext({markTTV:()=>{},addPageTiming:()=>{},getPageStartTime:()=>0,getPageTimer:()=>Wl(),addPageTimingOnce:()=>{}});function VJe({children:e}){const{startTimeFromTimeOriginRef:t}=At(),n=f.useRef({}),{markTTV:r}=U3e(),s=f.useCallback(()=>(n.current[t.current]||(n.current[t.current]=Wl(void 0,{nowFromTimeOrigin:t.current})),n.current[t.current]),[t]),a=f.useMemo(()=>({markTTV:()=>r(t.current),addPageTiming:(o,i={})=>s().addTiming(o,i),addPageTimingOnce:(o,i={})=>s().addTimingOnce(o,i),getPageStartTime:()=>t.current,getPageTimer:s}),[r,t,s]);return l.jsx(Ap.Provider,{value:a,children:e})}function $Je(){const{markTTV:e}=f.useContext(Ap);return e}function WJe(){const{addPageTiming:e}=f.useContext(Ap);return e}function Dme(){const{getPageStartTime:e}=f.useContext(Ap);return e}function Fme(){const{getPageTimer:e}=f.useContext(Ap);return e}const Ume=f.createContext({markTTV:()=>{}});function Yq({children:e,modules:t}){const{markTTV:n,addPageTimingOnce:r,getPageTimer:s}=f.useContext(Ap),a=s(),o=_p(a),i=f.useRef(new Set),c=f.useCallback(d=>{r(`web.ttv.${d}`),i.current?.add(d),t.every(m=>i.current?.has(m))&&(n(),i.current.clear())},[n,t,r]);f.useEffect(()=>{!o||o===a||i.current.clear()},[a,o]);const u=f.useMemo(()=>({markTTV:c}),[c]);return l.jsx(Ume.Provider,{value:u,children:e})}function HJe(){const{markTTV:e}=f.useContext(Ume);return e}function cVt(e={}){const t=$Je();f.useEffect(()=>{e.skip||t()},[e.skip,t])}function DC(e,t={}){const n=HJe();f.useEffect(()=>{t.skip||n(e)},[n,e,t.skip])}var Qq={};const zJe=e=>{try{return new URL(e),!0}catch{return!1}},GJe=({inPageOverride:e,dslQuery:t,existingEntryUUID:n,existingUuid:r,deletedUrls:s,redoSearch:a,collection:o,isRelatedQuery:i,isSponsored:c,relatedQueryUUID:u,inDomain:d,inPage:m,newFrontendContextUUID:h,promptSource:p,querySource:g,timeFromFirstType:y,utmSource:v,disableWidgets:x,isNavSuggestionsDisabled:b,entropyBrowser:_,clientPayloadUUID:w,isIncognito:S,sessionId:C,modelPreferenceSubmit:E,lastBackendUUID:M,deviceLocation:T,newAttachments:I,threadMetadataRwToken:j,forceNew:N,finalSources:P,finalRecency:R,mode:k,frontendUUID:O,isWindowsApp:L,browserHistorySummaryNumDays:F,mentions:U,reason:V,side_by_side_metadata:W,skipSearchEnabled:H,browserHistorySummaryMaxResults:G,sidecarUrl:K,sidecarTitle:$,isFirstEntry:q,alwaysSearchOverride:Z,overrideNoSearch:se,cometMaxAssistantEnabled:Y,resumingQuery:Q,resumeFromUuid:re,cometIsMissionControl:te,mcpTools:le})=>{const ie=T?{location_lat:T.latitude,location_lng:T.longitude,name:""}:null,pe=yf(),de=Ys().erp,ve=tn(),Ae=ve?{source:wO,client_payload_cache_key:w}:{},Se=L?{source:Am}:{};let De=!1,Ne="",Pe="";if(ve&&(De=!0,q&&(Ne=O9e({entropyBrowser:_,browserHistorySummaryNumDays:F,browserHistorySummaryMaxResults:G,reason:V}),Pe=_.getLastOmniboxInput(O)??""),g==="default_search"&&(zJe(Pe)&&(De=!1),!Pe))){const et=KKe(document.referrer);(!et||et.origin!==location.origin||et.pathname!=="/.well-known/comet-omnibox-text"&&et.pathname!=="/b/try-assistant")&&(De=!1)}const dt=g==="followup"?"followup-sidecar":"sidecar";return{last_backend_uuid:M??void 0,read_write_token:N?void 0:j,existing_entry_uuid:N?void 0:n,deleted_urls:s??void 0,attachments:I,language:Jc(),timezone:_O,in_page:e??m,in_domain:d,search_focus:P.length===0?"writing":"internet",sources:P,search_recency_filter:R,frontend_uuid:r??O,redo_search:a,mode:k,target_collection_uuid:o?.uuid,model_preference:E??void 0,is_related_query:i??!1,is_sponsored:c??!1,related_query_uuid:u,visitor_id:pe??void 0,user_nextauth_id:C??void 0,frontend_context_uuid:h??void 0,prompt_source:p??void 0,query_source:Qq.NEXT_PUBLIC_IS_SIDECAR_BUILD?dt:g??"",browser_history_summary_key:Ne||void 0,is_incognito:S,time_from_first_type:y??void 0,local_search_enabled:De,use_schematized_api:!0,send_back_text_in_streaming_api:!1,supported_block_use_cases:oie,utm_source:v,client_coordinates:ie,mentions:U,dsl_query:t,skip_search_enabled:H,is_nav_suggestions_disabled:b||!!Qq.NEXT_PUBLIC_IS_SIDECAR_BUILD,...g==="followup"?{followup_source:"link"}:{},...Ae,...Se,...x?{disable_widgets:x}:{},always_search_override:Z??!1,override_no_search:se??!1,comet_info:ve?{rendering_place:de??"unknown",sidecar_url:K,sidecar_title:$}:void 0,...W&&{side_by_side_metadata:W},client_search_results_cache_key:ve&&O?`nav-${O}`:void 0,comet_max_assistant_enabled:Y,resuming_query:Q,resume_from_uuid:re,comet_is_mission_control:te,mcp_tools:le}},qJe=["/?","/search","/discover"],KJe=["/"],H9=e=>e?!KJe.some(t=>e===t)&&!qJe.some(t=>e.startsWith(t)):!0,Bme=()=>{const e=Pt();return tn()&&e?.startsWith("/b/home")},DP=()=>Ts.getItem("signUpBannerDismissed")!=="true",YJe=()=>Ts.setItem("signUpBannerDismissed","true"),QJe=()=>Ts.setItem("signUpBannerDismissed","reset"),XJe=A.memo(({portalTarget:e})=>{const{$t:t}=X(),[n,r]=f.useState(!1),s=Pt(),{trackEvent:a}=Te(),{keysRequiringRerender:o,removeKeyRequiringRerender:i,addKeyRequiringRerender:c}=xf(),u=Bme(),[d,m]=f.useState(""),h=f.useCallback(()=>{m(MC(window.location.href,mc,Be.FLOATING_SIGNUP))},[]);if(f.useEffect(()=>{h()},[h]),f.useEffect(()=>{r(DP())},[]),f.useEffect(()=>{o.includes("floating-signup")&&(r(DP()),h()),i("floating-signup")},[i,o]),f.useEffect(()=>{n&&a("floating sign up shown",{})},[n,a]),H9(s)&&!u||!n)return null;const p=()=>{r(!1),YJe(),a("floating sign up dismissed",{}),c("sidebar-sign-in-button")};return l.jsx(hp,{portalTarget:e??void 0,children:l.jsx("div",{className:"bottom-md right-md fixed hidden w-[300px] md:block",children:l.jsx(z,{variant:"background",className:B("px-md py-lg animate-in fade-in ring-offsetPlus rounded-lg shadow-md ring-1 duration-300 ease-out"),children:l.jsxs("div",{children:[l.jsx("div",{className:"absolute right-0 top-0",children:l.jsx(ke,{pill:!0,size:"small",icon:Xt,onClick:p,testId:"floating-signup-close-button"})}),l.jsx("div",{className:"pb-md flex justify-center",children:l.jsx(Wa,{variant:"mark",color:"super",size:"small"})}),l.jsx(D,{variant:"baseSemi",className:"mb-xs text-center",children:t({defaultMessage:"Sign in or create an account",id:"eN8MTJfuKA"})}),l.jsx(D,{variant:"small",color:"light",className:"text-center",children:t({defaultMessage:"Unlock {proSearch} and History",id:"azC54WXvtr"},{proSearch:"Pro Search"})}),l.jsx("div",{className:"mt-md",children:l.jsx(Ov,{onClose:p,redirectUrl:d,showCloseButton:!1,autoFocus:!1,loginButtonsStyle:"highlightPrimary"})})]})})})})}),ZJe=2,JJe=10,eet=({response:e,isUserLoggedIn:t,submissionCount:n,session:r,queryCountMobile:s,isWindowsApp:a,addKeyRequiringRerender:o,setSubmissionCount:i,trackEvent:c,setShouldShowProductFeedback:u,setFeedbackEntryUUID:d,setShouldShowRecruitmentBanner:m,sendQueryEventSingular:h,maybeSendNthQueryEventSingular:p,recruitmentBannerEnabled:g,reason:y})=>{const v=tn();if(v&&B3e(),e?.backend_uuid){const x=e.backend_uuid;v7e({entryUUID:e.backend_uuid,params:{query:e.query_str||"",sources:e.sources?.sources??[]},reason:y}).then(b=>{u(b),b&&c("query feedback shown",{entry_uuid:x})}),g&&w7e({entryUUID:x,reason:y}).then(b=>{m(b),b&&c("power user recruitment banner shown",{})}),d(x)}!t&&n===ZJe-1&&(QJe(),o("floating-signup")),t&&r?.user?.id&&s===0&&n===JJe-1&&o("floating-mobile-download"),a?o("floating-milestone-refetch-legacy"):t&&o("floating-milestone-refetch"),i(n+1),h(),p({totalQueryCount:Gj(),cometQueryCount:v?V3e():void 0})},tet=({inPage:e})=>e?window.getSelection()?.toString():void 0;function net(){const{value:e}=p7e({flag:"client-context-max-chars",subjectType:"visitor_id",defaultValue:5e4});return e}function z9(){const{value:e}=y7e({flag:"max-file-upload-count",subjectType:"user_nextauth_id",defaultValue:10});return e}const ret=({isFollowup:e,isInSameThread:t,sourcesOverride:n,firstResultSources:r,firstResultRecency:s,defaultSources:a,defaultRecency:o})=>n?{finalSources:n,finalRecency:o}:!e||!t?{finalSources:a,finalRecency:o}:{finalSources:Array.isArray(r)?r:[],finalRecency:s},Pp=()=>{const[e,t]=jC("deviceLocation",void 0),n=f.useCallback(a=>{t(a),a?(qt("lat",a.latitude.toString()),qt("long",a.longitude.toString())):(Fd("lat"),Fd("long"))},[t]),[r,s]=f.useState(void 0);return f.useEffect(()=>{if(!navigator.geolocation||!("permissions"in navigator))return;const a=()=>{navigator.geolocation.getCurrentPosition(o=>{n({latitude:o.coords.latitude,longitude:o.coords.longitude})},null,{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};navigator.permissions.query({name:"geolocation"}).then(o=>{s(o.state),o.state==="granted"?a():n(void 0),o.addEventListener("change",()=>{s(o.state),o.state==="denied"?n(void 0):o.state==="granted"&&a()})}).catch(()=>{})},[n]),f.useMemo(()=>({location:e,permissionStatus:r,isPreciseLocationEnabled:r==="granted"&&!isNaN(e?.latitude??0)&&!isNaN(e?.longitude??0)}),[e,r])};var YT={};const set={submitQuery:()=>{ee.error("submitQuery must be used within PerplexityQueryStateProvider")},handleBotStep:()=>{ee.error("handleBotStep must be used within PerplexityQueryStateProvider")},deleteLastResult:()=>{ee.error("deleteLastResult must be used within PerplexityQueryStateProvider")},shouldShowProductFeedback:!1,shouldShowRecruitmentBanner:!1,feedbackEntryUUID:null,quote:null,setQuote:()=>{},updateLocalStatePostStream:()=>{}},aet=3,oet=6,iet=2,Vme=f.createContext(set),cet=(e,t,n,r,s)=>{if(!(n&&!r)&&!(e&&!t))return r?r.backend_uuid:s},uet=({children:e,shouldFetchSettings:t})=>{const n="perplexity-query-state-provider",r=At(),{trackEvent:s}=Te(),a=Ot(),o=hr(),{location:i}=Pp(),[c,u]=f.useState(null),{isWindowsApp:d,isMobile:m,isSamsungBrowser:h}=Wt(),p=Ka(),g=Fme(),{isMaxAssistantMode:y}=hn(),{sources:v,recency:x,isCopilot:b,setAskInputReasoningMode:_,setAskInputReasoningModelPreference:w,configuredModel:S,specialCapabilities:C}=Sn(),E=vo(),{firstResult:M,lastResult:T,actions:{setCurrentStreamId:I}}=zt(),{hasAiProfile:j,queryCountMobile:N}=js({enabled:t,reason:n}),[P,R]=f.useState(!1),[k,O]=f.useState(!1),[L,F]=f.useState(null),U=Je(),{addKeyRequiringRerender:V}=xf(),{value:W}=Ut({flag:"skip-search-button",subjectType:"visitor_id",defaultValue:!1}),H=net(),G=ea({reason:n}),[K,$]=f.useState(0),{sendQueryEventSingular:q,maybeSendNthQueryEventSingular:Z,sendResurrectedActivationEventSingular:se}=B9(),Y=_o(),Q=wHe(),{value:re}=Yr({flag:"power-user-recruitment-banner",defaultValue:!1}),{isMaxUpsellEnabled:te}=Pu(),{isMax:le}=Nt(),{value:{max_results:ie,num_days:pe}}=JO({flag:"browser-history-summary-settings",defaultValue:{max_results:500,num_days:7}}),me=z9(),de=Lme(),ve=f.useCallback(({rawQuery:Ne,dslQuery:Pe,fork:dt,inPageOverride:et,copilotOverride:Et,existingEntryUUID:ue,existingUuid:Ue,deletedUrls:Ct,redoSearch:Ye,attachments:mt,collection:We,modelPreferenceOverride:Oe,isRelatedQuery:Tt,isSponsored:$e,relatedQueryUUID:ct,inDomain:yt,inPage:ht,newFrontendContextUUID:ut,existingFrontendContextUUID:fn,promptSource:wr,querySource:sn,sourcesOverride:kt,submitFromArticleOverride:Kt,timeFromFirstType:xe,utmSource:qe,disableWidgets:He,isNavSuggestionsDisabled:ze,deviceLocation:ot,shouldRedirectToBackendUUID:it,onThreadSlugReceived:Gt,incognitoOverride:Vt,mentions:cn=[],shouldUsePageStartTime:Qn,side_by_side_metadata:Sr,frontendUUID:ns=ar(),alwaysSearchOverride:Os,overrideNoSearch:fi,resumingQuery:Tf,resumeFromUuid:ft,resumeFromPlaceholder:pr,cometIsMissionControl:yl})=>{if(Ne.trim().length===0&&!c){ee.error("Submit failed: empty query");return}const ra=cn.filter(ir=>ir.type==="tab").map(ir=>({id:Number(ir.id),url:ir.url}));if(!U&&!h&&!C.unlimitedProSearch){const ir=K+1;m&&!eh()?ir%iet===1&&V("visitor-gate"):ir%oet===0?V("visitor-gate-ii"):ir%aet===0&&V("visitor-gate")}const Tc=!!ut,mi=[...new Set([...mt??[]])].slice(0,me).filter(ir=>!Ct?.includes(ir)),Wu=tn()&&(!!YT.NEXT_PUBLIC_IS_SIDECAR_BUILD||!!ra?.length),sg=Wu?Sa():void 0,ag=(Et??b)||!!YT.NEXT_PUBLIC_IS_SIDECAR_BUILD||C.unlimitedProSearch,ox=ag?"copilot":"concise";let sa=S??fe.DEFAULT;sa===fe.DEFAULT&&C.unlimitedProSearch&&(sa=fe.PRO),(p===ae.RESEARCH||p===ae.STUDIO||p===ae.STUDY)&&(sa=p===ae.RESEARCH?fe.ALPHA:p===ae.STUDIO?fe.BETA:fe.STUDY,te&&le&&(sa=S));const Hu=Ace.some(ir=>ir.is_reasoning_model&&ir.search_model===sa);Oe?sa=Oe:(_(Hu),Hu||w(null));const kf=cet(Tc,dt??!1,M?.backend_uuid===ue,Kt??null,T?.backend_uuid??null);$3e(),W3e(()=>{s("resurrected activated"),se()}),xr(sa)===ae.RESEARCH?H3e():xr(sa)===ae.STUDIO&&z3e();const hi=!!kf,og=M?.frontend_context_uuid===fn,kc=ret({isFollowup:hi,isInSameThread:og,sourcesOverride:kt,firstResultSources:M?.sources?.sources,firstResultRecency:M?.search_recency_filter,defaultSources:v??[],defaultRecency:x??null}),{finalRecency:ix}=kc;let{finalSources:ig}=kc,lg;if(Y.mcpTools){const ir=kc.finalSources.filter(Ls=>Ls.startsWith("comet_mcp_")).map(Ls=>Ls.replace("comet_mcp_",""));ig=kc.finalSources.filter(Ls=>!Ls.startsWith("comet_mcp_")),lg=Y.mcpTools.filter(Ls=>ir.some(Pf=>Ls.id?.startsWith(`${Pf}__`)))}const lx=tet({inPage:et??ht})||c,Nf=(lx?_Qe(Ne,lx):Ne).trim();if(!Nf){ee.error("Submit failed: empty query");return}const vl=ue==M?.backend_uuid||!kf,cx=UWe({rawQuery:Nf,fork:dt,existingEntryUUID:ue,existingUuid:Ue,collection:We,isRelatedQuery:Tt,newFrontendContextUUID:ut,existingFrontendContextUUID:fn,submitFromArticleOverride:Kt,isNavSuggestionsDisabled:ze,isCopilot:ag,modelPreferenceSubmit:sa,newAttachments:mi,firstResultFrontendContextUUID:M?.frontend_context_uuid,isPersonalized:j,forceNew:Tc,querySource:sn,lastResultBackendUUID:T?.backend_uuid,finalSources:ig,finalRecency:ix??void 0,uuid:ns,threadMetadataTitle:M?.thread_title,threadMetadataThreadUrlSlug:M?.thread_url_slug,side_by_side_metadata:Sr}),Af=GJe({redoSearch:Ye,collection:We,dslQuery:Pe,isRelatedQuery:Tt,isSponsored:$e,relatedQueryUUID:ct,inDomain:yt,inPage:ht,newFrontendContextUUID:ut,promptSource:wr,querySource:sn,timeFromFirstType:xe,utmSource:qe,disableWidgets:He,isNavSuggestionsDisabled:ze,isWindowsApp:d,isIncognito:Vt??G,sessionId:a?.user?.id,modelPreferenceSubmit:sa,clientPayloadUUID:sg,lastBackendUUID:kf,deviceLocation:ot=ot??i,newAttachments:mi,threadMetadataRwToken:E,forceNew:Tc,finalSources:ig,finalRecency:ix,mode:ox,frontendUUID:ns,entropyBrowser:o,existingEntryUUID:ue,deletedUrls:Ct,browserHistorySummaryNumDays:pe,mentions:cn,side_by_side_metadata:Sr,reason:n,skipSearchEnabled:W,browserHistorySummaryMaxResults:ie,sidecarTitle:Y.sidecarSourceTab.title,sidecarUrl:Y.sidecarSourceTab.url,isFirstEntry:vl,alwaysSearchOverride:Os,overrideNoSearch:fi,cometMaxAssistantEnabled:y,resumingQuery:Tf,resumeFromUuid:ft,cometIsMissionControl:yl,mcpTools:lg});ut&&de(Nf,Af,Af.frontend_uuid),u(null);const ux={params:{...Af,version:ni},query_str:Nf};function dx(ir){if(Gt){if(!ir.thread_url_slug)throw new Error("thread_url_slug is required on first message");Gt(ir.thread_url_slug)}it&&r.push(`/search/${ir.thread_url_slug}`)}const cg=Q(ux,{onFirstMessageReceived:dx,placeholderChunk:pr||{...cx,backend_uuid:ue||Due},timer:Qn?g():Wl(void 0,{nowFromTimeOrigin:performance.now()}),reason:n});Wu&&sg&&N9e({clientPayloadCacheKey:sg,cometBrowser:o,maxChars:H,attachedTabs:ra,includeSidecar:!!YT.NEXT_PUBLIC_IS_SIDECAR_BUILD,reason:n,cometState:Y,requestId:cg.id.description}),I(cg.id.description)},[c,U,me,b,S,p,T?.backend_uuid,M?.frontend_context_uuid,M?.sources?.sources,M?.search_recency_filter,M?.thread_title,M?.thread_url_slug,M?.backend_uuid,v,x,j,d,G,a?.user,i,E,o,pe,W,ie,Y,Q,g,I,K,m,h,V,te,le,_,w,s,se,de,H,r,y,C]),Ae=f.useCallback(Ne=>{eet({response:Ne,isUserLoggedIn:U,submissionCount:K,session:a??void 0,queryCountMobile:N,isWindowsApp:d,addKeyRequiringRerender:V,setSubmissionCount:$,setShouldShowProductFeedback:R,setShouldShowRecruitmentBanner:O,setFeedbackEntryUUID:F,trackEvent:s,sendQueryEventSingular:q,maybeSendNthQueryEventSingular:Z,recruitmentBannerEnabled:re,reason:n})},[V,U,d,N,q,Z,a,K,s,re]),Se=vC(),De=f.useCallback(async()=>{const Ne=T?.backend_uuid;!Ne||!E||(s("delete last result",{entryUUID:Ne}),await ne.DELETE("/rest/entry/delete-ask-entry/{entry_uuid}",n,{params:{path:{entry_uuid:Ne}},body:{read_write_token:E}}),Se(Pe=>{if(!Pe)return;const dt=Pe??[];if(dt.length<1){r.push("/",void 0,"Delete last result");return}return dt.slice(0,-1)}))},[T?.backend_uuid,E,s,Se,r]);return l.jsx(Vme.Provider,{value:{submitQuery:ve,deleteLastResult:De,shouldShowProductFeedback:P,feedbackEntryUUID:L,quote:c,setQuote:u,shouldShowRecruitmentBanner:k,updateLocalStatePostStream:Ae},children:e})},Ta=()=>{const e=f.useContext(Vme);if(!e)throw new Error("usePerplexityQueryState must be used within PerplexityQueryStateContext");return e},det=(e,t)=>e.filter(n=>n.name===t).map(n=>n.connection_uuid).filter(n=>n!=null),uVt=e=>({google_drive:"GOOGLE_DRIVE",onedrive:"ONEDRIVE",sharepoint:"SHAREPOINT",dropbox:"DROPBOX",box:"BOX",notion:"NOTION",notion_mcp:"NOTION_MCP",linear:"LINEAR",linear_alt:"LINEAR_ALT",wiley:"WILEY",gcal:"GCAL",outlook:"OUTLOOK",slack:"SLACK",factset:null,crunchbase:null,edgar:null})[e]??null,dVt=e=>e==="LINEAR"||e==="NOTION_MCP"||e==="LINEAR_ALT"||e==="SLACK",fVt=e=>["gcal","outlook","factset","linear","linear_alt","notion_mcp","slack"].includes(e);var Lg={};const fet={logged_out_image_generation:Be.IMAGE_GENERATION_IN_THREAD,logged_out_video_generation:Be.VIDEO_GENERATION_IN_THREAD,subscription_upgrade_video_generation:Be.VIDEO_GENERATION_IN_THREAD,missing_out_on_pro:Be.MISSING_OUT_ON_PRO_IN_THREAD,auto_upgrade_to_pro:Be.AUTO_UPGRADE_TO_PRO,pro_feature_limit_queries:Be.PRO_FEATURE_LIMIT_BANNER,pro_feature_limit_files:Be.PRO_FEATURE_LIMIT_BANNER,login_for_comet_agent_queries:Be.LOGIN_FOR_COMET_AGENT_QUERIES_IN_THREAD,comet_agent_queries_rate_limited:Be.COMET_AGENT_QUERIES_RATE_LIMITED_IN_THREAD,pro_upgrade:Be.PRO_UPGRADE_IN_SIDE_HOMEPAGE,max_feature_limit_labs_queries:Be.PRO_FEATURE_LIMIT_BANNER},FC=(e,t,n)=>{const r=Je(),{openVisitorLoginUpsell:s}=$n({enabled:!r}),{trackEvent:a}=Te(),{lastResult:o}=zt(),{openModal:i}=_t(),c=tn(),u="?handle_upsell=true",{submitQuery:d}=Ta(),m=hr(),{handleVerificationSuccess:h}=UJe({origin:Be.STUDENT_VERIFICATION_UPSELL}),p=Lg.NEXT_PUBLIC_IS_SIDECAR_BUILD?"sidecar_thread":c?"search_results_page":void 0,{subscriptionTier:g}=Nt(),{isWindowsOS:y,isMacOS:v}=Wt(),{variation:x}=bJe(!1),b=At(),{handleConnect:_}=jme({reason:"upsell"}),{mutateAsync:w}=_Je({reason:"upsell"}),S=$9(),{handleCreateNewSpaceForThread:C}=V9(),{connectors:E}=js({reason:"upsell"}),{handleDownloadClick:M}=CJe({isWindows:y,isUnsupportedDevice:!v&&!y}),T=e?.cta_information?.merge_auth_token,I=e?.cta_information?.merge_auth_callback_uuid,{open:j,isReady:N}=yJe({linkToken:T?JSON.parse(T):void 0,onSuccess:()=>{I&&GHe({uuid:I,success:!0,reason:"Account successfully connected"}),b.push(window.location.pathname+u)}}),P=f.useCallback(async()=>{try{await m.setCometAsDefaultBrowser("set_default_browser")}catch{}},[m]);f.useEffect(()=>{if(!Lg.NEXT_PUBLIC_IS_SIDECAR_BUILD)return;const F=new BroadcastChannel(xJe.UPSELL_CONNECTOR);return F.onmessage=U=>{U.data.type===Kq.CONNECTOR_COMPLETE&&(window.focus(),window.location.href=window.location.pathname+u)},()=>{F.close()}},[u]);const R=f.useCallback(()=>{if(e)switch(e.app_location){case Vc.MODAL:a("upsell modal opened",{entryUUID:o?.backend_uuid,upsellType:e.upsell_type,upsellName:e.name,cometSurface:p,subscriptionTier:g});break;case Vc.IN_THREAD:case Vc.IN_THREAD_BOTTOM:case Vc.IN_THREAD_INPUT:a("thread upsell banner clicked",{entryUUID:o?.backend_uuid,upsellType:e.upsell_type,upsellName:e.name,cometSurface:p,subscriptionTier:g});break;case Vc.SIDEBAR:case Vc.SIDE_CARD:a("side upsell clicked",{upsellType:e.upsell_type,upsellName:e.name,cometSurface:p});break}},[o,a,e,p,g]),k=f.useCallback(()=>{o?.query_str&&d({rawQuery:o.query_str,existingEntryUUID:o.backend_uuid,redoSearch:!0,collection:null,newFrontendContextUUID:null,existingFrontendContextUUID:o.frontend_context_uuid,promptSource:"user",querySource:"rewrite-upsell",attachments:[],modelPreferenceOverride:e?.cta_information?.model_preference??"pplx_pro"})},[o,d,e]),O=f.useCallback(()=>{if(!e)return;const{permalink_new_tab:F,permalink:U}=e.cta_information??{};U&&(F?window.open(U,"_blank"):window.location.href=U)},[e]);return f.useCallback(()=>{if(!e)return;const F=e.cta===ia.SHORTCUT_MODAL?e.cta_information?.recommended_shortcut?.name:void 0;LC(e.name,F),R();const U=fet[e.name]??Be.UNSPECIFIED_GENERALIZED_UPSELL,V=o?.thread_url_slug?x?`/assistant?oauth_complete=true&advance_step=true&redirect_path=search/${o.thread_url_slug}${u}`:`/search/${o.thread_url_slug}${u}`:void 0,W=o?.thread_url_slug?`/search/${o.thread_url_slug}`:void 0;switch(e.cta){case ia.SIGN_UP_OR_LOGIN:if(Lg.NEXT_PUBLIC_IS_SIDECAR_BUILD)return;s({title:e.title,description:e.description,origin:U});break;case ia.PRO_UPGRADE:i("pricingModal",{pitchMessage:e.cta_information?.upgrade_paywall_title?{title:e.cta_information.upgrade_paywall_title}:void 0,origin:U});break;case ia.THREAD_TO_SPACE:{if(!o?.backend_uuid)return;S?C(o?.backend_uuid,o?.frontend_context_uuid):i("spaceCreateForThread",{entryUUID:o?.backend_uuid,frontendContextUUID:o?.frontend_context_uuid});break}case ia.CONNECTOR:if(!Lg.NEXT_PUBLIC_IS_SIDECAR_BUILD&&e.cta_information?.connector_type==="gcal"){const H="gcal",G=det(E?.connectors??[],H);for(const K of G)w({connectorName:H,connectionUUID:K});_({connectorName:H,redirectPath:V,unauthedRedirectPath:W})}else Lg.NEXT_PUBLIC_IS_SIDECAR_BUILD&&e.cta_information?.connector_type==="gcal"?window.open(`${window.location.origin}${vJe}?connector_type=${Kq.GCAL_CONNECT}`,"_blank"):ee.error("Unhandled upsell connector type",{connectorType:e.cta_information?.connector_type});break;case ia.REWRITE_ANSWER:t&&o?.backend_uuid?Mv({entryUUID:o?.backend_uuid,reason:"rewrite-upsell"}).catch(()=>{ee.error("Error terminating entry")}).finally(k):k();break;case ia.PERMALINK:{O();break}case ia.SET_DEFAULT_BROWSER:{P();break}case ia.IMAGE_ANNOUNCEMENT_MODAL:{if(!e.image_asset||!e.title||!e.description||!e.button_text)return;let H,G;e.upsell_type===dle.DOWNLOAD_COMET?(H=l.jsx(ye,{text:e.button_text,variant:"primary",fullWidth:!0,leadingComponent:l.jsx(gf,{size:16}),textClassName:"!text-sm",onClick:()=>M({upsellName:e.name})}),G=l.jsx(ke,{text:"Learn more",fullWidth:!0,variant:"super",textClassName:"!text-sm",noPadding:!0,onClick:O})):H=l.jsx(ye,{text:e.button_text,variant:"primary",fullWidth:!0,textClassName:"!text-sm",onClick:O}),i("announcementImageModal",{imageUrl:e.image_asset,title:e.title,description:e.description,primaryAction:H,secondaryAction:G});break}case ia.COMET_DOWNLOAD:{M({upsellName:e.name});break}case ia.MERGE_AUTH_CONNECTOR:{T&&N&&j();break}case ia.SHORTCUT_MODAL:{const H=e.cta_information?.recommended_shortcut;i("taskShortcutModal",{source:"thread_upsell_create",onCreated:n?.hideUpsell,shortcut:H?{title:H.name,prompt:H.prompt}:void 0});break}case ia.OPEN_SHEERID_MODAL:{i("sheerIdModal",{onSuccess:h,type:"student"});break}}},[e,R,o?.thread_url_slug,o?.backend_uuid,o?.frontend_context_uuid,u,s,i,t,S,C,E?.connectors,_,w,k,O,P,M,h,x,T,N,j,n?.hideUpsell])},met=async()=>{try{return(await ne.GET("/rest/homepage-widgets/upsell/","get upsells",{timeoutMs:je()})).data?.upsell_information??null}catch(e){return ee.error("Error getting homepage upsells",{error:e}),null}},G9=({enabled:e=!0}={})=>{const{data:t,isLoading:n,isError:r}=Ke({enabled:e,queryKey:iOe(),queryFn:met,networkMode:"always",staleTime:1/0,gcTime:1/0});return{data:t??null,isLoading:n,isError:r}},het=()=>{const{data:e}=G9(),{trackEvent:t,trackEventOnce:n}=Te(),r=FC(e??void 0),[s,a]=f.useState(!1);f.useEffect(()=>{e&&e.app_location==="BANNER"&&(a(!0),n("banner upsell viewed",{upsellName:e.name,upsellType:e.upsell_type}))},[e,n]);const o=f.useCallback(()=>{e&&(t("banner upsell dismissed",{upsellName:e.name,upsellType:e.upsell_type}),a(!1),LC(e.name))},[e,t]),i=f.useMemo(()=>{if(e&&e.icon_reference&&e.icon_reference in hd)return hd[e.icon_reference]},[e]);return f.useMemo(()=>({show:s&&!!e,onDismiss:o,onClick:r,icon:i,title:e?.title,actionLabel:e?.button_text}),[o,r,s,i,e])},pet="Welcome Ramp members. Your 6 month Perplexity Pro free trial starts now!",get="Welcome ATT Employees.  Your complimentary 1-year subscription starts now!",yet="Welcome AWS Employees.  Your complimentary 1-year subscription starts now!",vet="Welcome r1 owners.  Your complimentary 1-year Perplexity Pro subscription starts now!",xet="Welcome UT Staff.  Your complimentary 1-year Perplexity Pro subscription starts now!",bet="Welcome Databricks team.  Your complimentary 1-year Perplexity Pro subscription starts now!",_et="Welcome SRA team. Your complimentary 1-year Perplexity Pro subscription starts now!",wet="Welcome HBS Tech Conference Attendees.  Your complimentary 6 month Perplexity Pro subscription starts now!",Cet="Welcome HBS Tech Conference Attendees.  Your complimentary 1 year Perplexity Pro subscription starts now!",Eet="Welcome Friends!  Your complimentary 1-year Perplexity Pro subscription starts now!",Met="Welcome Inkitt Writers!  Your complimentary 1-year subscription to Perplexity Pro starts now!",Tet="Welcome Time team!  Your complimentary 1-year subscription to Perplexity Pro starts now!",ket="Welcome T-Mobile team!  Your complimentary 1-year subscription to Perplexity Pro starts now!",Net="Welcome Cavs team! Your complimentary 1-year Perplexity Pro subscription starts now!",Aet="Welcome Nothing owners. Your complimentary 6-month Perplexity Pro subscription starts now!",Pet="Welcome Nothing owners. Your complimentary 6-month Perplexity Pro subscription starts now!",Ret="Welcome Nothing owners. Your complimentary 1-year Perplexity Pro subscription starts now!",Iet="Welcome Nothing owners. Your complimentary 1-year Perplexity Pro subscription starts now!",jet="Welcome HooHacks Community. Your 1-year Perplexity Pro free trial starts now!",Oet="Welcome NJ ED Community. Your 1-year Perplexity Pro free trial starts now!",Let="Welcome Copy AI customers! Your 6-month complimentary Perplexity Pro subscription starts now!",Det="Welcome Raycast users! Your 6-month complimentary Perplexity Pro subscription starts now!",Fet="Welcome Raycast users! Your 3-month complimentary Perplexity Pro subscription starts now!",Uet="Welcome Deutsche Telekom!  Your complimentary 1-year Perplexity Pro subscription starts now!",Bet="Welcome friend of Perplexity! Your complimentary 1-year Perplexity Pro subscription starts now.",Vet="Welcome UTA team! Your complimentray 1-year Perplexity Pro subscription starts now.",$et="Willkommen Deutsche Telekom Kunde! Sie erhalten dank Magenta Moments ein kostenloses 1-Jahres-Abonnement fr Perplexity Pro.",Wet="Welcome! Your complimentary 1-year Perplexity Pro subscription starts now.",Xq={RAMP:pet,FREEATT:get,FREEAWS:yet,RABBIT:vet,FREEUT:xet,FREEDATABRICKS:bet,FREESRA:_et,HBSTECH:wet,HBSSTAFF:Cet,FREENEWSROOM:Eet,FREEINKITT:Met,FREETIME:Tet,FREETMOBILE:ket,"11LABS":"Welcome! Your complimentary 3-month subscription to Perplexity Pro starts now!",FREECAVS:Net,NOTHING6:Aet,FREENOTHING6:Pet,NOTHING1:Ret,FREENOTHING1:Iet,HOOHACKS:jet,NJED:Oet,COPYAI:Let,RAYCAST6:Det,RAYCAST3:Fet,FREEMAGENTALOVE:Uet,FREEPPLXVIP:Bet,FREEUTA1:Vet,DT:$et,MY:Wet},Jx="pplx.discount_code",QT="pplx.discount_code_expiry",Het=()=>{const[e,t]=f.useState(null),[n,r]=f.useState(null),s=At(),a=Ht(),o=Pt(),i=a?.get("discount_code"),{$t:c}=X(),u=Array.isArray(i)?i[0]:i,[d,m]=f.useState(u||null),{hasAccessToProFeatures:h}=Nt(),p=f.useCallback(()=>{Ve.removeItem(Jx),Ve.removeItem(QT),r(null),t(null)},[]),g=f.useCallback(()=>{p(),m(null)},[p]),y=f.useCallback(()=>{if(n&&e)return;const b=Ve.getItem(Jx);b?.startsWith("REPLIT")?(t("/static/images/replit.svg"),r("/static/images/replit_dark.svg")):b?.startsWith("BREX")?(t("/static/images/brex.svg"),r("/static/images/brex_dark.svg")):(r(null),t(null))},[n,e]),v=f.useCallback(()=>{const b=Ve.getItem(Jx),_=Ve.getItem(QT);if(h){p();return}if(!(!b&&!u)){if(_&&new Date(_)<new Date){p();return}if(!b||u&&u!==b){const w=new Date;w.setDate(w.getDate()+2),Ve.setItem(Jx,String(u)),Ve.setItem(QT,w.toString()),m(String(u)),y(),o==="/pro"&&s.push("/",void 0,"Pro page");return}if(b){m(b),y();return}}},[u,y,h,o,p,s]),x=f.useCallback(b=>{for(const _ in Xq)if(b&&b.startsWith(_))return Xq[_];return c({defaultMessage:"Redeem your promo code {discountCode}. Get started",id:"Vapo/CiOwF"},{discountCode:b})},[c]);return f.useEffect(()=>{v()},[u,v]),f.useMemo(()=>({discountCode:d,setDiscountCode:m,partnerLogoDark:n,partnerLogoLight:e,message:x(d??""),clearDiscountCode:g}),[g,d,x,n,e])},zet=({reason:e})=>{const{$t:t}=X(),{data:n,isLoading:r}=Ke({queryKey:sOe(),queryFn:()=>Fie({reason:e})}),s=!!n?.institution;let a=n?.offer?.discount_str??void 0;!a&&s&&(a=t({defaultMessage:"$4.99",id:"ngR/pJs1LV"}));const o=n?.offer?.discount_type??void 0;return f.useMemo(()=>({userPromotionsLoading:r,discountPrice:a,discountType:o,showStudentDiscountContent:s,campaignId:n?.campaign?.id,institution:n?.institution}),[n?.campaign?.id,n?.institution,a,o,r,s])};var D2;(function(e){e.NONE="none",e.ACTIVE="active",e.TRIALING="trialing",e.PAST_DUE="past_due",e.INVOICE_PAST_DUE="invoice_past_due",e.WHITE_GLOVE_PAST_DUE="white_glove_past_due",e.CANCELED="canceled"})(D2||(D2={}));const mVt=[{label:"N/A",value:""},{label:"AD NRT",value:"ad_nrt"},{label:"AE TRN",value:"ae_trn"},{label:"AL TIN",value:"al_tin"},{label:"AM TIN",value:"am_tin"},{label:"AO TIN",value:"ao_tin"},{label:"AR CUIT",value:"ar_cuit"},{label:"AU ABN",value:"au_abn"},{label:"AU ARN",value:"au_arn"},{label:"BA TIN",value:"ba_tin"},{label:"BB TIN",value:"bb_tin"},{label:"BG UIC",value:"bg_uic"},{label:"BH VAT",value:"bh_vat"},{label:"BO TIN",value:"bo_tin"},{label:"BR CNPJ",value:"br_cnpj"},{label:"BR CPF",value:"br_cpf"},{label:"BS TIN",value:"bs_tin"},{label:"BY TIN",value:"by_tin"},{label:"CA BN",value:"ca_bn"},{label:"CA GST/HST",value:"ca_gst_hst"},{label:"CA PST BC",value:"ca_pst_bc"},{label:"CA PST MB",value:"ca_pst_mb"},{label:"CA PST SK",value:"ca_pst_sk"},{label:"CA QST",value:"ca_qst"},{label:"CD NIF",value:"cd_nif"},{label:"CH UID",value:"ch_uid"},{label:"CH VAT",value:"ch_vat"},{label:"CL TIN",value:"cl_tin"},{label:"CN TIN",value:"cn_tin"},{label:"CO NIT",value:"co_nit"},{label:"CR TIN",value:"cr_tin"},{label:"DE STN",value:"de_stn"},{label:"DO RCN",value:"do_rcn"},{label:"EC RUC",value:"ec_ruc"},{label:"EG TIN",value:"eg_tin"},{label:"ES CIF",value:"es_cif"},{label:"EU OSS VAT",value:"eu_oss_vat"},{label:"EU VAT",value:"eu_vat"},{label:"GB VAT",value:"gb_vat"},{label:"GE VAT",value:"ge_vat"},{label:"GN NIF",value:"gn_nif"},{label:"HK BR",value:"hk_br"},{label:"HR OIB",value:"hr_oib"},{label:"HU TIN",value:"hu_tin"},{label:"ID NPWP",value:"id_npwp"},{label:"IL VAT",value:"il_vat"},{label:"IN GST",value:"in_gst"},{label:"IS VAT",value:"is_vat"},{label:"JP CN",value:"jp_cn"},{label:"JP RN",value:"jp_rn"},{label:"JP TRN",value:"jp_trn"},{label:"KE PIN",value:"ke_pin"},{label:"KH TIN",value:"kh_tin"},{label:"KR BRN",value:"kr_brn"},{label:"KZ BIN",value:"kz_bin"},{label:"LI UID",value:"li_uid"},{label:"LI VAT",value:"li_vat"},{label:"MA VAT",value:"ma_vat"},{label:"MD VAT",value:"md_vat"},{label:"ME PIB",value:"me_pib"},{label:"MK VAT",value:"mk_vat"},{label:"MR NIF",value:"mr_nif"},{label:"MX RFC",value:"mx_rfc"},{label:"MY FRP",value:"my_frp"},{label:"MY ITN",value:"my_itn"},{label:"MY SST",value:"my_sst"},{label:"NG TIN",value:"ng_tin"},{label:"NO VAT",value:"no_vat"},{label:"NO VOEC",value:"no_voec"},{label:"NP PAN",value:"np_pan"},{label:"NZ GST",value:"nz_gst"},{label:"OM VAT",value:"om_vat"},{label:"PE RUC",value:"pe_ruc"},{label:"PH TIN",value:"ph_tin"},{label:"RO TIN",value:"ro_tin"},{label:"RS PIB",value:"rs_pib"},{label:"RU INN",value:"ru_inn"},{label:"RU KPP",value:"ru_kpp"},{label:"SA VAT",value:"sa_vat"},{label:"SG GST",value:"sg_gst"},{label:"SG UEN",value:"sg_uen"},{label:"SI TIN",value:"si_tin"},{label:"SN NINEA",value:"sn_ninea"},{label:"SR FIN",value:"sr_fin"},{label:"SV NIT",value:"sv_nit"},{label:"TH VAT",value:"th_vat"},{label:"TJ TIN",value:"tj_tin"},{label:"TR TIN",value:"tr_tin"},{label:"TW VAT",value:"tw_vat"},{label:"TZ VAT",value:"tz_vat"},{label:"UA VAT",value:"ua_vat"},{label:"UG TIN",value:"ug_tin"},{label:"US EIN",value:"us_ein"},{label:"UY RUC",value:"uy_ruc"},{label:"UZ TIN",value:"uz_tin"},{label:"UZ VAT",value:"uz_vat"},{label:"VE RIF",value:"ve_rif"},{label:"VN TIN",value:"vn_tin"},{label:"ZA VAT",value:"za_vat"},{label:"ZM TIN",value:"zm_tin"},{label:"ZW TIN",value:"zw_tin"}],Get=e=>["/onboarding/org/create"].includes(e),qet="gov_free_year";function $me(){const e="app-banner-inner",{isMobileUserAgent:t}=Ce(),{message:n,discountCode:r,clearDiscountCode:s}=Het(),{hasAccessToProFeatures:a}=Nt(),[o]=Pme(),[i]=Rme(),c=Pt(),{organization:u,orgUser:d}=pn({reason:e}),m=[D2.NONE,D2.PAST_DUE],h=u?.stripe_status&&m.includes(u.stripe_status),p=d?.role==="ADMIN",g=Ht(),y=zet({reason:e}),v=y.campaignId===fJe,x=y.campaignId===qet,{show:b,onDismiss:_,onClick:w,icon:S,title:C,actionLabel:E}=het();return b&&C&&E?l.jsx(_e.div,{initial:{height:0},animate:{height:"auto"},exit:{height:0},transition:{duration:.2},children:l.jsx(Np,{icon:S,isMobileStyle:t,title:C,actionLabel:E,onClick:w,variant:"good",onClose:_})}):p&&h&&!Get(c??"")&&!t?l.jsx(eJe,{orgStripeStatus:u?.stripe_status}):/(^\/$)|(^\/search)/.test(c??"")&&o?l.jsx(KT,{partnerCode:o,partnerDiscountCode:i}):r&&!a&&!o?l.jsx(iJe,{message:n,discountCode:r,clearDiscountCode:s}):g?.get("utm_campaign")==="morningbrew_083024"&&g?.get("utm_source")==="newsletter"?l.jsx(hJe,{}):v?l.jsx(KT,{partnerCode:"edu",partnerDiscountCode:Ime,bannerVariant:"orange"}):x&&!a?l.jsx(KT,{partnerCode:"gov",partnerDiscountCode:"GOVFREEYEAR"}):null}const Ket=()=>{const e=f.useCallback(n=>{const r=document.documentElement,s=n??yn("colorSchemeTheme"),a=Xre(s);a?r.setAttribute("data-theme",a):r.removeAttribute("data-theme")},[]),t=f.useMemo(()=>ks(e,100),[e]);QO("colorSchemeTheme",n=>{t(n?.value)}),f.useEffect(()=>{e()},[e])},Wme=f.createContext(void 0),wc=()=>{const e=f.useContext(Wme);if(!e)throw new Error("useAppLayout must be used within an AppLayoutProvider");return e},Yet=({children:e})=>{const[t,n]=f.useState(!1);return Ket(),l.jsx(Wme.Provider,{value:{isMobileSidebarOpen:t,setMobileSidebarOpen:n},children:e})},Qet=({children:e})=>{const{isMobileSidebarOpen:t,setMobileSidebarOpen:n}=wc(),{$t:r}=X();return l.jsx(rL,{open:t,onOpenChange:n,children:l.jsxs(aL,{forceMount:!0,children:[l.jsx(V0,{children:l.jsx(cL,{children:r({defaultMessage:"Mobile Sidebar",id:"37aIxgWRuh"})})}),l.jsx(st,{children:t&&l.jsxs(l.Fragment,{children:[l.jsx(oL,{asChild:!0,children:l.jsx(_e.div,{className:"fixed inset-0 bg-black/20 dark:bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2}},"mobile-sidebar-overlay")}),l.jsx(iL,{asChild:!0,children:l.jsx(_e.div,{className:"bg-base fixed inset-y-0 left-0",initial:{x:"-100%"},animate:{x:"0%"},exit:{x:"-100%"},transition:{duration:.2,ease:Jn},children:e},"mobile-sidebar-content")})]})})]})})},q9=({className:e})=>{const{isMobileSidebarOpen:t,setMobileSidebarOpen:n}=wc();return l.jsx(ke,{icon:$4e,pill:!0,onClick:()=>n(!t),extraCSS:e})},ym=72,F2=200,Hme=()=>{const{isGovernmentRequestOrigin:e}=Sn();return e===void 0},Xet=()=>QOe()==="firefox"?!0:typeof window>"u"?!1:new URL(window.location.href).searchParams.get("pc")==="firefox",Zq="partnerships",Zet=()=>ZOe()===Zq?!0:typeof window>"u"?!1:new URL(window.location.href).searchParams.get("utm_source")===Zq,rc=f.memo(({isSamsungBrowser:e,isWindowsApp:t,isComet:n,isFirefoxDefaultSearch:r,isPartnershipCampaign:s,isGovernment:a,children:o})=>{const i=tn(),c=Xet(),u=Zet(),{isGovernmentRequestOrigin:d}=Sn(),{isWindowsApp:m,isSamsungBrowser:h}=Wt(),p=Hme();return f.useMemo(()=>!!(n&&i||t&&m||e&&h||r&&c||s&&u||a&&(p||d)),[i,m,h,n,e,t,r,c,s,u,a,d,p])?null:o}),Jet=A.memo(({})=>{const{$t:e}=X(),{trackEvent:t}=Te(),n=f.useCallback(()=>{t("click logo",{})},[t]),{isIOS:r}=Wt(),{handleAppDownloadClicked:s}=J0("mobile-header"),a=e1({origin:"mobile-header"}),{mwebUpsellWhatsApp:o,loadingMwebUpsellWhatsApp:i}=t1(),c=f.useMemo(()=>o?s8:r?a8:o8,[o,r]);return l.jsx(z,{variant:"background",className:"px-sm h-headerHeight sticky inset-x-0 top-0 z-10 flex w-full items-center md:mb-0",children:l.jsxs("div",{className:"gap-x-sm pl-xs flex w-full items-center justify-between md:hidden",children:[l.jsxs("div",{className:"gap-x-sm flex items-center",children:[l.jsx(q9,{className:"-ml-sm"}),l.jsx(at,{href:"/",onClick:n,children:l.jsx(Wa,{variant:"text",size:"small"})})]}),!i&&l.jsx(rc,{isSamsungBrowser:!0,isFirefoxDefaultSearch:!0,children:l.jsx("div",{className:"animate-in fade-in duration-300",children:l.jsx(ye,{size:"small",pill:!0,variant:"primary",icon:c,text:e(o?{defaultMessage:"Chat in WhatsApp",id:"jXqSBQcpKC"}:{defaultMessage:"Open in App",id:"fo3x6hDxdZ"}),onClick:o?a:s})})})]})})}),K9=A.memo(e=>{const{children:t,inRenderingPlace:n}=e,s=Ys().erp;return n&&n===s||!n&&s!==void 0?null:l.jsx(l.Fragment,{children:t})});K9.displayName="HideInEntropy";const ett=/^\/b\//;function zme(e){return e&&ett.test(e)}function ttt(e){return e?new URL(window.location.href).pathname.endsWith(`/search/${e}`):!1}function ntt(e){return e?.startsWith("/collections")||e?.startsWith("/spaces")}function rtt(){return tn()?"/b/home":"/"}const Gme=f.createContext(null),stt=({children:e,scrollContainerRef:t})=>l.jsx(Gme.Provider,{value:{scrollContainerRef:t},children:e}),Sc=()=>{const e=f.useContext(Gme);if(!e)throw new Error("useScrollContainerRef must be used within a ScrollContainerRefProvider");return e},Rp=()=>{const{locale:e}=X();return zoe(e)==="rtl"},att=({children:e,ref:t})=>l.jsx(Yet,{children:l.jsx(z,{variant:"offset",children:l.jsx("div",{className:"isolate flex h-dvh",ref:t,children:e})})}),ott=({children:e})=>{const{isMobileStyle:t}=Ce({evaluateOnInit:!0});return t?l.jsx(Qet,{children:e}):l.jsx(l.Fragment,{children:e})},itt=({children:e,fillHeight:t=!0,hasSidebar:n,ref:r})=>{const{isSidebarPinned:s}=hn(),{isMobileStyle:a}=Ce({evaluateOnInit:!0}),o=Pt(),i=n&&!zme(o),c=s&&!a&&i,u=Pi(),d=Rp(),m=f.useMemo(()=>d?{paddingRight:c?F2:0}:{paddingLeft:c?F2:0},[d,c]);return l.jsxs(_e.div,{initial:m,animate:m,transition:{duration:.2,ease:Jn},className:"erp-tab:p-0 md:gap-xs erp-tab:gap-0 lg:py-sm lg:pe-sm isolate flex h-auto max-h-screen min-w-0 grow flex-col",ref:r,children:[l.jsx(K9,{inRenderingPlace:"sidecar",children:l.jsx($me,{})}),l.jsxs(z,{variant:"background",className:"@container/main erp-tab:rounded-none erp-tab:shadow-none relative isolate min-h-0 flex-1 overflow-clip bg-clip-border shadow-sm lg:rounded-lg",children:[l.jsx("div",{className:B("max-w-screen md:max-w-auto mx-auto flex w-full flex-col",{"h-full":t}),children:e}),l.jsx(z,{className:B("rounded-inherit pointer-events-none absolute inset-0 z-20 hidden md:dark:block",i&&"md:erp-tab:!border-y-0 md:erp-tab:!border-r-0",!u&&"md:dark:border")})]})]})},n1=({children:e,childrenWidth:t,containerClassName:n=""})=>{const r=Kr(t).with("small",()=>"max-w-screen-sm px-md md:px-lg").with("default",()=>"max-w-screen-md px-md md:px-lg").with("static",()=>"max-w-screen-lg px-md py-lg md:px-xl").with("large",()=>"max-w-threadWidth px-md md:px-lg").with("none",()=>"max-w-none").otherwise(()=>"max-w-screen-md px-md md:px-lg"),s=f.useRef(null);return l.jsx(stt,{scrollContainerRef:s,children:l.jsx("div",{ref:s,className:"scrollable-container scrollbar-subtle flex flex-1 basis-0 overflow-auto [scrollbar-gutter:stable]",children:l.jsx("div",{className:B("mx-auto size-full",r,n),children:e})})})},hVt=({children:e,mobileHeader:t=!0})=>{const{isMobileStyle:n}=Ce();return l.jsxs(l.Fragment,{children:[l.jsx("div",{children:t&&n&&l.jsx(Jet,{})}),e]})};function Jq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function vm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Jq(Object(n),!0).forEach(function(r){qme(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jq(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function g_(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?g_=function(t){return typeof t}:g_=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g_(e)}function qme(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ltt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function ctt(e,t){if(e==null)return{};var n=ltt(e,t),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)r=a[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function U2(e,t){return utt(e)||dtt(e,t)||ftt(e,t)||mtt()}function utt(e){if(Array.isArray(e))return e}function dtt(e,t){var n=e&&(typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"]);if(n!=null){var r=[],s=!0,a=!1,o,i;try{for(n=n.call(e);!(s=(o=n.next()).done)&&(r.push(o.value),!(t&&r.length===t));s=!0);}catch(c){a=!0,i=c}finally{try{!s&&n.return!=null&&n.return()}finally{if(a)throw i}}return r}}function ftt(e,t){if(e){if(typeof e=="string")return eK(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eK(e,t)}}function eK(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mtt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Pa=function(t,n,r){var s=!!r,a=A.useRef(r);A.useEffect(function(){a.current=r},[r]),A.useEffect(function(){if(!s||!t)return function(){};var o=function(){a.current&&a.current.apply(a,arguments)};return t.on(n,o),function(){t.off(n,o)}},[s,n,t,a])},Fv=function(t){var n=A.useRef(t);return A.useEffect(function(){n.current=t},[t]),n.current},Zd=function(t){return t!==null&&g_(t)==="object"},htt=function(t){return Zd(t)&&typeof t.then=="function"},ptt=function(t){return Zd(t)&&typeof t.elements=="function"&&typeof t.createToken=="function"&&typeof t.createPaymentMethod=="function"&&typeof t.confirmCardPayment=="function"},tK="[object Object]",FP=function e(t,n){if(!Zd(t)||!Zd(n))return t===n;var r=Array.isArray(t),s=Array.isArray(n);if(r!==s)return!1;var a=Object.prototype.toString.call(t)===tK,o=Object.prototype.toString.call(n)===tK;if(a!==o)return!1;if(!a&&!r)return t===n;var i=Object.keys(t),c=Object.keys(n);if(i.length!==c.length)return!1;for(var u={},d=0;d<i.length;d+=1)u[i[d]]=!0;for(var m=0;m<c.length;m+=1)u[c[m]]=!0;var h=Object.keys(u);if(h.length!==i.length)return!1;var p=t,g=n,y=function(x){return e(p[x],g[x])};return h.every(y)},Kme=function(t,n,r){return Zd(t)?Object.keys(t).reduce(function(s,a){var o=!Zd(n)||!FP(t[a],n[a]);return r.includes(a)?(o&&console.warn("Unsupported prop change: options.".concat(a," is not a mutable property.")),s):o?vm(vm({},s||{}),{},qme({},a,t[a])):s},null):null},Yme="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",nK=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Yme;if(t===null||ptt(t))return t;throw new Error(n)},Qme=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Yme;if(htt(t))return{tag:"async",stripePromise:Promise.resolve(t).then(function(s){return nK(s,n)})};var r=nK(t,n);return r===null?{tag:"empty"}:{tag:"sync",stripe:r}},Xme=function(t){!t||!t._registerWrapper||!t.registerAppInfo||(t._registerWrapper({name:"react-stripe-js",version:"3.1.0"}),t.registerAppInfo({name:"react-stripe-js",version:"3.1.0",url:"https://stripe.com/docs/stripe-js/react"}))},UC=A.createContext(null);UC.displayName="ElementsContext";var Zme=function(t,n){if(!t)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(n," in an <Elements> provider."));return t},gtt=function(t){var n=t.stripe,r=t.options,s=t.children,a=A.useMemo(function(){return Qme(n)},[n]),o=A.useState(function(){return{stripe:a.tag==="sync"?a.stripe:null,elements:a.tag==="sync"?a.stripe.elements(r):null}}),i=U2(o,2),c=i[0],u=i[1];A.useEffect(function(){var h=!0,p=function(y){u(function(v){return v.stripe?v:{stripe:y,elements:y.elements(r)}})};return a.tag==="async"&&!c.stripe?a.stripePromise.then(function(g){g&&h&&p(g)}):a.tag==="sync"&&!c.stripe&&p(a.stripe),function(){h=!1}},[a,c,r]);var d=Fv(n);A.useEffect(function(){d!==null&&d!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[d,n]);var m=Fv(r);return A.useEffect(function(){if(c.elements){var h=Kme(r,m,["clientSecret","fonts"]);h&&c.elements.update(h)}},[r,m,c.elements]),A.useEffect(function(){Xme(c.stripe)},[c.stripe]),A.createElement(UC.Provider,{value:c},s)};gtt.propTypes={stripe:we.any,options:we.object};var ytt=function(t){var n=A.useContext(UC);return Zme(n,t)},pVt=function(){var t=ytt("calls useElements()"),n=t.elements;return n};we.func.isRequired;var vtt=["on","session"],BC=A.createContext(null);BC.displayName="CheckoutSdkContext";var Jme=function(t,n){if(!t)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(n," in an <CheckoutProvider> provider."));return t},Y9=A.createContext(null);Y9.displayName="CheckoutContext";var xtt=function(t,n){if(!t)return null;t.on,t.session;var r=ctt(t,vtt);return n?vm(vm({},r),n):vm(vm({},r),t.session())},btt="Invalid prop `stripe` supplied to `CheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",_tt=function(t){var n=t.stripe,r=t.options,s=t.children,a=A.useMemo(function(){return Qme(n,btt)},[n]),o=A.useState(null),i=U2(o,2),c=i[0],u=i[1],d=A.useState(function(){return{stripe:a.tag==="sync"?a.stripe:null,checkoutSdk:null}}),m=U2(d,2),h=m[0],p=m[1],g=function(w,S){p(function(C){return C.stripe&&C.checkoutSdk?C:{stripe:w,checkoutSdk:S}})},y=A.useRef(!1);A.useEffect(function(){var _=!0;return a.tag==="async"&&!h.stripe?a.stripePromise.then(function(w){w&&_&&!y.current&&(y.current=!0,w.initCheckout(r).then(function(S){S&&(g(w,S),S.on("change",u))}))}):a.tag==="sync"&&a.stripe&&!y.current&&(y.current=!0,a.stripe.initCheckout(r).then(function(w){w&&(g(a.stripe,w),w.on("change",u))})),function(){_=!1}},[a,h,r,u]);var v=Fv(n);A.useEffect(function(){v!==null&&v!==n&&console.warn("Unsupported prop change on CheckoutProvider: You cannot change the `stripe` prop after setting it.")},[v,n]);var x=Fv(r);A.useEffect(function(){var _,w;if(h.checkoutSdk){r.clientSecret&&!Zd(x)&&!FP(r.clientSecret,x.clientSecret)&&console.warn("Unsupported prop change: options.clientSecret is not a mutable property.");var S=x==null||(_=x.elementsOptions)===null||_===void 0?void 0:_.appearance,C=r==null||(w=r.elementsOptions)===null||w===void 0?void 0:w.appearance;C&&!FP(C,S)&&h.checkoutSdk.changeAppearance(C)}},[r,x,h.checkoutSdk]),A.useEffect(function(){Xme(h.stripe)},[h.stripe]);var b=A.useMemo(function(){return xtt(h.checkoutSdk,c)},[h.checkoutSdk,c]);return h.checkoutSdk?A.createElement(BC.Provider,{value:h},A.createElement(Y9.Provider,{value:b},s)):null};_tt.propTypes={stripe:we.any,options:we.shape({clientSecret:we.string.isRequired,elementsOptions:we.object}).isRequired};var wtt=function(t){var n=A.useContext(BC);return Jme(n,t)},UP=function(t){var n=A.useContext(BC),r=A.useContext(UC);if(n&&r)throw new Error("You cannot wrap the part of your app that ".concat(t," in both <CheckoutProvider> and <Elements> providers."));return n?Jme(n,t):Zme(r,t)},gVt=function(){wtt("calls useCheckout()");var t=A.useContext(Y9);if(!t)throw new Error("Could not find Checkout Context; You need to wrap the part of your app that calls useCheckout() in an <CheckoutProvider> provider.");return t},Stt=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},kr=function(t,n){var r="".concat(Stt(t),"Element"),s=function(c){var u=c.id,d=c.className,m=c.options,h=m===void 0?{}:m,p=c.onBlur,g=c.onFocus,y=c.onReady,v=c.onChange,x=c.onEscape,b=c.onClick,_=c.onLoadError,w=c.onLoaderStart,S=c.onNetworksChange,C=c.onConfirm,E=c.onCancel,M=c.onShippingAddressChange,T=c.onShippingRateChange,I=UP("mounts <".concat(r,">")),j="elements"in I?I.elements:null,N="checkoutSdk"in I?I.checkoutSdk:null,P=A.useState(null),R=U2(P,2),k=R[0],O=R[1],L=A.useRef(null),F=A.useRef(null);Pa(k,"blur",p),Pa(k,"focus",g),Pa(k,"escape",x),Pa(k,"click",b),Pa(k,"loaderror",_),Pa(k,"loaderstart",w),Pa(k,"networkschange",S),Pa(k,"confirm",C),Pa(k,"cancel",E),Pa(k,"shippingaddresschange",M),Pa(k,"shippingratechange",T),Pa(k,"change",v);var U;y&&(t==="expressCheckout"?U=y:U=function(){y(k)}),Pa(k,"ready",U),A.useLayoutEffect(function(){if(L.current===null&&F.current!==null&&(j||N)){var W=null;N?W=N.createElement(t,h):j&&(W=j.create(t,h)),L.current=W,O(W),W&&W.mount(F.current)}},[j,N,h]);var V=Fv(h);return A.useEffect(function(){if(L.current){var W=Kme(h,V,["paymentRequest"]);W&&"update"in L.current&&L.current.update(W)}},[h,V]),A.useLayoutEffect(function(){return function(){if(L.current&&typeof L.current.destroy=="function")try{L.current.destroy(),L.current=null}catch{}}},[]),A.createElement("div",{id:u,className:d,ref:F})},a=function(c){UP("mounts <".concat(r,">"));var u=c.id,d=c.className;return A.createElement("div",{id:u,className:d})},o=n?a:s;return o.propTypes={id:we.string,className:we.string,onChange:we.func,onBlur:we.func,onFocus:we.func,onReady:we.func,onEscape:we.func,onClick:we.func,onLoadError:we.func,onLoaderStart:we.func,onNetworksChange:we.func,onConfirm:we.func,onCancel:we.func,onShippingAddressChange:we.func,onShippingRateChange:we.func,options:we.object},o.displayName=r,o.__elementType=t,o},Nr=typeof window>"u",Ctt=A.createContext(null);Ctt.displayName="EmbeddedCheckoutProviderContext";var yVt=function(){var t=UP("calls useStripe()"),n=t.stripe;return n};kr("auBankAccount",Nr);kr("card",Nr);kr("cardNumber",Nr);kr("cardExpiry",Nr);kr("cardCvc",Nr);kr("fpxBank",Nr);kr("iban",Nr);kr("idealBank",Nr);kr("p24Bank",Nr);kr("epsBank",Nr);var vVt=kr("payment",Nr),xVt=kr("expressCheckout",Nr);kr("currencySelector",Nr);kr("paymentRequestButton",Nr);var bVt=kr("linkAuthentication",Nr),_Vt=kr("address",Nr);kr("shippingAddress",Nr);kr("paymentMethodMessaging",Nr);kr("affirmMessage",Nr);kr("afterpayClearpayMessage",Nr);var ehe="https://js.stripe.com/v3",Ett=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/;var Mtt=function(){for(var t=document.querySelectorAll('script[src^="'.concat(ehe,'"]')),n=0;n<t.length;n++){var r=t[n];if(Ett.test(r.src))return r}return null},rK=function(t){var n="",r=document.createElement("script");r.src="".concat(ehe).concat(n);var s=document.head||document.body;if(!s)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return s.appendChild(r),r},Ttt=function(t,n){!t||!t._registerWrapper||t._registerWrapper({name:"stripe-js",version:"5.5.0",startTime:n})},Dg=null,eb=null,tb=null,ktt=function(t){return function(){t(new Error("Failed to load Stripe.js"))}},Ntt=function(t,n){return function(){window.Stripe?t(window.Stripe):n(new Error("Stripe.js not available"))}},Att=function(t){return Dg!==null?Dg:(Dg=new Promise(function(n,r){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe){n(window.Stripe);return}try{var s=Mtt();if(!(s&&t)){if(!s)s=rK(t);else if(s&&tb!==null&&eb!==null){var a;s.removeEventListener("load",tb),s.removeEventListener("error",eb),(a=s.parentNode)===null||a===void 0||a.removeChild(s),s=rK(t)}}tb=Ntt(n,r),eb=ktt(r),s.addEventListener("load",tb),s.addEventListener("error",eb)}catch(o){r(o);return}}),Dg.catch(function(n){return Dg=null,Promise.reject(n)}))},Ptt=function(t,n,r){if(t===null)return null;var s=t.apply(void 0,n);return Ttt(s,r),s},Fg,the=!1,nhe=function(){return Fg||(Fg=Att(null).catch(function(t){return Fg=null,Promise.reject(t)}),Fg)};Promise.resolve().then(function(){return nhe()}).catch(function(e){the||console.warn(e)});var wVt=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];the=!0;var s=Date.now();return nhe().then(function(a){return Ptt(a,n,s)})};const Rtt=(e,t)=>{const{value:n,loading:r}=Ut({flag:"comet-pro-country-allowlist",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},SVt=l.jsx(he,{defaultMessage:"Start for free, no credit card needed.",id:"uzjbT1FGfk"}),CVt=l.jsx(he,{defaultMessage:"Upgrade productivity and learning with additional access.",id:"PnQLpmbknU"}),EVt=l.jsx(he,{defaultMessage:"Unlock the full capabilities of Perplexity at a discount after verifying educational status.",id:"8fdSFzTbg5"}),MVt=l.jsx(he,{defaultMessage:"Unlock Perplexity's full capabilities with early access to new products.",id:"XvAk63xTH/"}),TVt=l.jsx(he,{defaultMessage:"Unlock the full capabilities of Perplexity for your team and enjoy new perks as they are added.",id:"fyHXg6ONTT"}),kVt=[l.jsx(he,{defaultMessage:"Limited file uploads and image generation",id:"Yajq3Us4wf"},"ei4z2Aep9t"),l.jsx(he,{defaultMessage:"Limited access to Perplexity Research",id:"rxiI86annI"},"Q4n6qAgIjm"),l.jsx(he,{defaultMessage:"Limited access to advanced AI models",id:"Um2NQaGAN2"},"k+gSVpF51l"),l.jsx(he,{defaultMessage:"Access to voice mode",id:"yzxI9mX7Ne"},"yzxI9mX7Ne")],Itt=l.jsx(he,{defaultMessage:"Access to Comet, the agentic browser",id:"qcYjBb5TR5"},"qcYjBb5TR5"),B2=[l.jsx(he,{defaultMessage:"10x as many citations in answers",id:"D0fULpN8/D"},"ei4z2Aep9t"),l.jsx(he,{defaultMessage:"Access to Perplexity Labs",id:"umi6FCpljx"},"LicOGayBYr"),l.jsx(he,{defaultMessage:"Unlimited file and photo uploads",id:"9mQ544QaNG"},"9mQ544QaNG"),l.jsx(he,{defaultMessage:"Extended access to Perplexity Research",id:"N+s4bfYMOJ"},"+tC8PdouYw"),l.jsx(he,{defaultMessage:"Extended access to image generation",id:"YLNO5T8j3R"},"YLNO5T8j3R"),l.jsx(he,{defaultMessage:"Limited access to video generation",id:"cuh0Xv/sI7"},"cuh0Xv/sI7"),l.jsx(he,{defaultMessage:"One subscription for all the latest AI models including GPT-5 and Claude Sonnet 4",id:"PjThV/+cRD"},"PjThV/+cRD")],jtt=[B2[0],Itt,...B2.slice(1)],NVt=()=>{const{variation:e}=Rtt(!1);return f.useMemo(()=>e?jtt:B2,[e])},AVt=B2,rhe=[l.jsx(he,{defaultMessage:"Unlock free Pro",id:"ce/kjT07p9"},"unlock-free-pro"),l.jsx(he,{defaultMessage:"Access to Comet, the agentic browser",id:"qcYjBb5TR5"},"access-comet"),l.jsx(he,{defaultMessage:"Access to Study Mode for interactive flashcards and quizzes",id:"wvFgbv8SQM"},"study-mode"),l.jsx(he,{defaultMessage:"10x as many citations in answers",id:"D0fULpN8/D"},"ei4z2Aep9t"),l.jsx(he,{defaultMessage:"Access to Perplexity Labs",id:"umi6FCpljx"},"LicOGayBYr"),l.jsx(he,{defaultMessage:"Unlimited file and photo uploads",id:"9mQ544QaNG"},"9mQ544QaNG"),l.jsx(he,{defaultMessage:"Extended access to Perplexity Research",id:"N+s4bfYMOJ"},"+tC8PdouYw"),l.jsx(he,{defaultMessage:"One subscription for all the latest AI models including GPT-5 and Claude Sonnet 4",id:"PjThV/+cRD"},"PjThV/+cRD"),l.jsx(he,{defaultMessage:"{credits} in API credits",id:"RDoR9eeHom",values:{credits:l.jsx(z6,{value:5,style:"currency",currency:"USD"})}},"RDoR9eeHom")],PVt=()=>rhe,RVt=rhe,IVt=[l.jsx(he,{defaultMessage:"Everything in Pro",id:"EQO1QOs7ln"},"EQO1QOs7ln"),l.jsx(he,{defaultMessage:"Early access to Comet, the agentic browser",id:"itbmh6iTsp"},"ju0j9rjkOw"),l.jsx(he,{defaultMessage:"Unlimited access to Perplexity Labs",id:"Vc+NmvcKpa"},"8jDdpmfeqS"),l.jsx(he,{defaultMessage:"Unlimited access to Perplexity Research",id:"+tC8PdouYw"},"8jDdpmfeqS"),l.jsx(he,{defaultMessage:"Use advanced AI models like OpenAI o3-pro and Anthropic Claude Opus 4.1",id:"RrdqLnZKqo"},"RrdqLnZKqo"),l.jsx(he,{defaultMessage:"Enhanced access to video generation",id:"VSNs3zFEjy"},"VSNs3zFEjy"),l.jsx(he,{defaultMessage:"Priority support",id:"3sSrKzxPrc"},"3sSrKzxPrc")],jVt=[l.jsx(he,{defaultMessage:"Unlimited Pro searches",id:"isnJxc1XxM"},"UnlimitedProSearches"),l.jsx(he,{defaultMessage:"Unlimited uploads for files and images",id:"y5R/L7qsi/"},"UnlimitedUploads"),l.jsx(he,{defaultMessage:"Unlimited collaborators in Spaces",id:"EZFr73mN/d"},"UnlimitedCollaborators"),l.jsx(he,{defaultMessage:"Connect Google Drive, Sharepoint, Dropbox, OneDrive, and Box",id:"ALW0u9e/Ps"},"ConnectCloudServices"),l.jsx(he,{defaultMessage:"Powered by the latest top AI models",id:"ZSiV9iYVeG"},"LatestAIModels"),l.jsx(he,{defaultMessage:"Dedicated enterprise support",id:"6ojq3KOETz"},"DedicatedSupport"),l.jsx(he,{defaultMessage:"Integrate with your identity provider",id:"NEWodUzDlf"},"IdentityProvider"),l.jsx(he,{defaultMessage:"User permissioning",id:"oEuCJfg2fr"},"UserPermissioning"),l.jsx(he,{defaultMessage:"SOC 2 Type II security compliance",id:"j84mT5pXG7"},"SOC2TypeII")],sK="USD",Ott=({lineItems:e})=>{const{$t:t,formatNumber:n}=X(),r=f.useMemo(()=>{const s=e;return[{title:J({defaultMessage:"Payment method",id:"BVTni9A2ca"}),value:s.payment_method,separator:!0},{title:J({defaultMessage:"Perplexity Max Subscription",id:"zmPIe7d+w+"}),value:s.new_product_price?rm(s.new_product_price,n):""},{title:J({defaultMessage:"Adjustment",id:"LaLTJRqloA"}),value:s.adjustment_price?rm(s.adjustment_price,n):"",separator:!0},{title:J({defaultMessage:"Subtotal",id:"L8seEcJFZ7"}),value:rm(s.subtotal_price,n)},{title:J({defaultMessage:"Taxes",id:"r+dgivP2Od"}),value:rm(s.tax_price,n),separator:!0},{title:J({defaultMessage:"Total due today",id:"MxAykvkF+r"}),value:rm(s.total_due_today_price,n),color:"default",size:"small"}]},[e,n]);return l.jsx("ul",{className:"flex flex-col",children:r.map(s=>l.jsxs("li",{className:`flex items-center justify-between ${s.separator?"border-subtlest py-sm mb-sm border-b":"pb-sm"}`,children:[l.jsx(D,{variant:"tinyRegular",color:"light",children:t(s.title)}),l.jsx(D,{variant:s.size??"tinyRegular",color:s.color??"light",children:s.value})]},s.title.id))})},Ltt=({variant:e="border",extraCSS:t,subscriptionSource:n})=>{const{$t:r}=X(),s=n==="softbank",a=[{type:"default",text:r({defaultMessage:"SoftBank",id:"mz906WB9pc"}),href:"https://stn.mb.softbank.jp/G4H51",onClick:o=>{o.preventDefault(),window.open("https://stn.mb.softbank.jp/G4H51","_blank")}},{type:"default",text:r({defaultMessage:"Y!mobile",id:"waO5BNtbEl"}),href:"https://stn.mb.softbank.jp/h6C4p",onClick:o=>{o.preventDefault(),window.open("https://stn.mb.softbank.jp/h6C4p","_blank")}},{type:"default",text:r({defaultMessage:"LINEMO",id:"5EeaeTgd/I"}),href:"https://stn.mb.softbank.jp/22m5K",onClick:o=>{o.preventDefault(),window.open("https://stn.mb.softbank.jp/22m5K","_blank")}}];return l.jsx("div",{className:"flex items-center gap-2",children:s?l.jsx(en,{items:a,isMobileStyle:!1,placement:"bottom-start",children:l.jsx(ye,{text:r({defaultMessage:"Manage carrier billing",id:"qt9JnrA7Lf"}),size:"small",icon:Zr,variant:e,extraCSS:t})}):l.jsx(ye,{text:r({defaultMessage:"Set up carrier billing",id:"KvLeD+r7rf"}),size:"small",variant:e,extraCSS:t,trailingComponent:l.jsx(be,{icon:ql,size:"xs"}),onClick:o=>{o.preventDefault(),window.open("https://stn.mb.softbank.jp/b6O6d","_blank")}})})},Dtt=({reason:e})=>{const t=async()=>dqe({reason:e}),{data:n,isLoading:r}=Ke({queryKey:["get_user_previous_subscription"],queryFn:t});return f.useMemo(()=>({previousSubscriptionStatus:n?.previous_subscription_status??"none",previousSubscriptionSource:n?.previous_subscription_source??"none",isLoading:r}),[n?.previous_subscription_source,n?.previous_subscription_status,r])},Ftt="https://billing.stripe.com/p/login/test_7sIdSS7ioeNSdpe9AA",Utt="https://billing.stripe.com/p/login/6oEeXaewnb3z1facMM",Btt="https://perplexity.sng.link/A6awk/pxdx?_ios_dl=home&_android_dl=singular-perplexity%3A%2F%2Fhome&_smtype=3";function Vtt(e){switch(e){case"ios":return"https://www.apple.com/app-store/";case"android":return"https://play.google.com/store";default:Qt(e)}}const she=({text:e,hasPreviousSub:t=!1,origin:n,variant:r="common",extraCSS:s})=>{const a="sub-modal-button",{$t:o,locale:i}=X(),c=At(),{hasAccessToProFeatures:u,subscriptionSource:d}=Nt(),{revenuecatStatus:m,stripeStatus:h}=js({reason:a}),{previousSubscriptionSource:p}=Dtt({reason:a}),{isProduction:g,isBeta:y}=pc(),v=Ot(),{openModal:x}=_t(),b=f.useCallback(async()=>{if(d==="incentive"){x("incentiveProModal",{origin:n});return}const S=d==="ios"||d==="android",C=p==="ios"||p==="android";if(S||C){C&&p!==d?c.push(Vtt(p)):c.push(Btt);return}if(d==="braintree"){n===Be.UPGRADE_MODAL?c.push("/max/payment"):x("paypalSubscriptionModal",{origin:n});return}const M=await VO({locale:i,reason:"sub-modal-button"});M?c.push(M):c.push(g||y?Utt:Ftt)},[d,p,c,g,y,i,x,n]),_=u||h==="past_due"||t===!0,w=f.useMemo(()=>d==="ios"?o({defaultMessage:"Manage in App Store",id:"3iCRcP8mV0"}):d==="android"?o({defaultMessage:"Manage in Google Play",id:"tiFovnryYO"}):d==="braintree"?n===Be.UPGRADE_MODAL?o({defaultMessage:"Continue to payment",id:"+g+0OKqjZc"}):o({defaultMessage:"Manage subscription",id:"Oj9Phcvy9M"}):t?o({defaultMessage:"Manage plan",id:"88XpVMnmFe"}):m!=="none"||["ios","android"].includes(p)?o({defaultMessage:"Mobile subscription",id:"EttF2eTvlk"}):o(d==="softbank"?{defaultMessage:"SoftBank, Y!mobile, and LINEMO Customers",id:"i1WJntbsih"}:{defaultMessage:"Manage",id:"0AzlrbMWV9"}),[d,t,m,p,o,n]);return l.jsx("div",{children:_?d==="softbank"?l.jsx(Ltt,{variant:r,extraCSS:s,subscriptionSource:d}):l.jsx(ye,{extraCSS:s,text:w,size:"small",onClick:b,variant:r,trailingComponent:l.jsx(be,{icon:ql,size:"xs"})}):l.jsx(ye,{text:e??o({defaultMessage:"Learn more",id:"TdTXXf940t"}),size:"small",onClick:()=>{v?x("pricingModal",{origin:n}):x("loginModal",{origin:Be.TRY_PRO,pitchMessage:{title:o({defaultMessage:"Sign in to unlock {pro}",id:"HsM7RilrD6"},{pro:"Pro"})}})},icon:ql,variant:r})})};function $tt({subscriptionSource:e,isMissingPaymentMethod:t,paymentFailed:n,upgradeError:r}){return e==="android"?"android":e==="ios"?"ios":t?"missingPaymentMethod":n?"paymentFailed":r?"genericPaymentError":"upgradeToContinue"}function Wtt(e){switch(e){case"unsupported":return J({defaultMessage:"Max subscriptions are not supported by carrier billing.",id:"Ux4ivT++jB"});case"missingPaymentMethod":return J({defaultMessage:"Please add a payment method to upgrade to Max.",id:"W6HVT1BPC8"});case"paymentFailed":return J({defaultMessage:"Payment failed. Please update payment to continue.",id:"b0rdlbJ3AI"});case"android":return J({defaultMessage:"You subscribed on the Google Play Store. Upgrade your subscription via settings on the Android app.",id:"97MQ1Swe7/"});case"ios":return J({defaultMessage:"You subscribed on the App Store. Upgrade your subscription via settings on the iOS app.",id:"JGkQSWrZEy"});case"upgradeToContinue":return J({defaultMessage:"You will be charged now and immediately get access to Max.",id:"9x1isMahOJ"});case"genericPaymentError":return J({defaultMessage:"Something went wrong. Please continue to Stripe and complete your payment.",id:"xdKfV2F++4"});default:Qt(e)}}const Htt="https://billing.stripe.com/p/login/test_7sIdSS7ioeNSdpe9AA",ztt="https://billing.stripe.com/p/login/6oEeXaewnb3z1facMM",Gtt=()=>{const e=At(),{isProduction:t,isBeta:n}=pc(),r=f.useCallback(async({locale:s,reason:a})=>{const o=await VO({locale:s,reason:a});o?e.push(o):e.push(t||n?ztt:Htt)},[e,t,n]);return f.useMemo(()=>({navigateToCustomerPortal:r}),[r])},aK=e=>{if(e){if(e instanceof Me&&"details"in e){const t=e.details;if(t?.errorDetail&&typeof t.errorDetail=="object"&&"error_code"in t.errorDetail)return t.errorDetail.error_code}return e.message}},oK=6,qtt=()=>l.jsx("ul",{className:"flex flex-col",children:Array.from({length:oK}).map((e,t)=>{const n=t%2===0;return l.jsx("li",{className:B({"border-subtlest py-sm mb-sm border-b":n,"pb-sm":!n}),children:l.jsx(Ln,{children:l.jsx(z,{variant:"offset",className:B("h-4 w-full rounded",{"py-0.5":t===oK-1})})})},t)})}),Ktt=({isOpen:e,onClose:t})=>{const n=X(),s=Ot()?.user?.subscription_source,a=s==="stripe",{data:o,isLoading:i,status:c,error:u}=zie({reason:"upgrade-modal",enabled:a}),{data:d,isLoading:m}=PA({currency:sK,reason:"upgrade-modal",subscriptionTier:"max"}),{data:h,isLoading:p}=PA({currency:sK,reason:"upgrade-modal",subscriptionTier:"pro"}),{formatNumber:g,locale:y}=X(),{update:v}=za.useSession(),{currentOpenModals:x}=_t(),{trackEvent:b}=Te(),{navigateToCustomerPortal:_}=Gtt(),w=f.useMemo(()=>d?.prices&&d.prices.find(U=>U.tier==="monthly")||null,[d]),S=f.useMemo(()=>h?.prices&&h.prices.find(U=>U.tier==="monthly")||null,[h]),C=f.useMemo(()=>c==="error"?aK(u):null,[c,u]),E=f.useCallback(async()=>{await f9({reason:"upgrade-to-max-modal"}),await v(),t(),b("subscription upgrade success"),x.length>0&&t(),Dv({upgrade_max:"success"})},[t,x,v,b]),M=qie({reason:"upgrade-modal"},{onSuccess:E}),T=C==="missing_payment_method",I=C==="stripe_upgrade_payment_error";f.useEffect(()=>{e&&b("subscription upgrade modal rendered")},[e,b]);const j=$tt({subscriptionSource:s,isMissingPaymentMethod:T,paymentFailed:I,upgradeError:aK(M?.error)}),N=f.useCallback(async()=>{await _({locale:y,reason:"upgrade-modal-add-payment"})},[_,y]),P=!!o?.payment_method,R=T||I||!!M.error,k=f.useMemo(()=>!a||M.isPending||!P||i||!!M.error,[a,M.isPending,P,i,M.error]),O=f.useCallback(async()=>{M.isPending||await M.mutateAsync()},[M]),L=f.useMemo(()=>T?l.jsx(he,{defaultMessage:"Add payment method",id:"+EIsonKmCI"}):M.error?l.jsx(he,{defaultMessage:"Continue to Stripe",id:"W2hJP+kQGf"}):l.jsx(he,{defaultMessage:"Update payment method",id:"iIM9E+ynde"}),[T,M.error]);return l.jsx(rn,{isOpen:e,onClose:t,renderCloseButton:!1,headerClassname:"hidden",modalClassname:"!w-[416px] !min-w-[416px] !max-w-[416px] !p-0",modalContentClassname:"!p-0",noPadding:!0,children:l.jsxs(z,{className:"p-ml",children:[l.jsx(D,{variant:"baseSemi",children:l.jsx(he,{defaultMessage:"Confirm changes",id:"AnPtOvcf8f"})}),l.jsx(L2,{planName:{id:"R/eOkjWqNU",defaultMessage:"Pro"},price:c==="error"||!a?S:o?.old_product_price,formatNumber:g,billingInterval:c==="error"||!a?"monthly":o?.old_product_interval}),l.jsx(z,{children:l.jsxs(D,{variant:"tinyRegular",color:"light",className:"flex items-center justify-center gap-1",children:[l.jsx("div",{className:"border-subtlest flex-1 border-t"}),l.jsx(he,{defaultMessage:"Upgrade",id:"0h/lPMeYkq"}),l.jsx("div",{className:"border-subtlest flex-1 border-t"})]})}),l.jsx(L2,{planName:{id:"kkjl2vQekD",defaultMessage:"Max"},price:T||!a?w:o?.new_product_price,formatNumber:g,billingInterval:T||!a?"monthly":o?.new_product_interval,isHighlighted:!0,className:"mb-ml"}),i?l.jsx(qtt,{}):o&&l.jsx(Ott,{lineItems:o}),l.jsxs(z,{variant:"offset",className:"px-md py-sm mt-ml gap-sm flex flex-col rounded-md",children:[l.jsx(D,{variant:"small",color:"light",children:l.jsx(he,{...Wtt(j)})}),!a&&l.jsx(she,{origin:Be.UPGRADE_MODAL,variant:"primary",extraCSS:"w-full"}),R&&l.jsx(ye,{size:"small",fullWidth:!0,variant:"primary",text:L,onClick:N})]}),l.jsxs(z,{className:"gap-sm mt-ml flex justify-end",children:[l.jsx(ke,{text:n.formatMessage({defaultMessage:"Cancel",id:"47FYwba+bI"}),onClick:t}),l.jsx(ye,{variant:"primary",text:n.formatMessage({defaultMessage:"Confirm",id:"N2IrpMDHDB"}),isLoading:M.isPending,disabled:k,onClick:O})]})]})})},{Provider:Jd,useSelector:Ytt,useTrackedState:Qtt}=bp("AskInputProvider",()=>yo((e,t)=>({activeMenu:null,fileUploadUpsellTooltipOpen:!1,suggestions:ce,blankStateSuggestions:{[ae.SEARCH]:null,[ae.RESEARCH]:null,[ae.STUDIO]:null,[ae.STUDY]:null},showSuggestDropdown:!1,actions:{onActiveMenuChange:n=>{e({activeMenu:n})},setFileUploadUpsellTooltipOpen:n=>{e({fileUploadUpsellTooltipOpen:n})},setSuggestions:n=>{e({suggestions:n})},setBlankStateSuggestions:(n,r)=>{const s=t().blankStateSuggestions;e({blankStateSuggestions:{...s,[r]:n}})},setShowSuggestDropdown:n=>{e({showSuggestDropdown:n})}},inputRef:f.createRef()}))),qo=()=>Ytt(e=>e.actions),Xs=Qtt;var Xtt={};const Lr=A.memo(()=>l.jsx("div",{className:"bg-backdrop/70 fixed inset-0 z-[999] flex items-center justify-center backdrop-blur-sm",children:l.jsx(Ns,{})}));Lr.displayName="ModalLoader";const ahe=A.memo(()=>l.jsx("p",{children:"An error has occurred"}));ahe.displayName="ErrorFallback";const Ztt=ge(async()=>{const{LocationPermissionModal:e}=await oe(async()=>{const{LocationPermissionModal:t}=await Promise.resolve().then(()=>gjt);return{LocationPermissionModal:t}},void 0);return{default:e}},{loading:()=>l.jsx(Lr,{})}),Jtt=ge(async()=>{const{FileUploadModal:e}=await oe(async()=>{const{FileUploadModal:t}=await import("./FileUploadModal-CzfpPMFa.js");return{FileUploadModal:t}},__vite__mapDeps([7,1,2,3,8,9,4,5,10,11,12]));return{default:e}},{loading:()=>l.jsx(Lr,{})}),iK=ge(async()=>{const{CollectionCreateEditModal:e}=await oe(async()=>{const{CollectionCreateEditModal:t}=await import("./CollectionCreateEditModal-JxJlX7q5.js");return{CollectionCreateEditModal:t}},__vite__mapDeps([13,1,2,3,4,14,5]));return{default:e}},{loading:()=>l.jsx(Lr,{})}),ent=ge(async()=>{const{CollectionSelectModal:e}=await oe(async()=>{const{CollectionSelectModal:t}=await import("./CollectionSelectModal-DKbCF2sc.js");return{CollectionSelectModal:t}},__vite__mapDeps([15,1,2,3,16,17,14,5,4]));return{default:e}},{loading:()=>l.jsx(Lr,{})}),tnt=ge(async()=>{const{OnboardingModal:e}=await oe(async()=>{const{OnboardingModal:t}=await import("./OnboardingModal-DPLN00a7.js").then(n=>n.a);return{OnboardingModal:t}},__vite__mapDeps([18,1,2,3,5,4,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34]));return{default:e}},{loading:()=>l.jsx(Lr,{})}),nnt=ge(async()=>{const{PurchaseConfirmationToast:e}=await oe(async()=>{const{PurchaseConfirmationToast:t}=await import("./PurchaseConfirmationToast-0iQdRYSr.js");return{PurchaseConfirmationToast:t}},__vite__mapDeps([35,1,2,3,5,36,37,4]));return{default:e}},{loading:()=>l.jsx(Lr,{})}),rnt=ge(async()=>{const{ThreadLossAversionModal:e}=await oe(async()=>{const{ThreadLossAversionModal:t}=await Promise.resolve().then(()=>Gnt);return{ThreadLossAversionModal:t}},void 0);return{default:e}},{loading:()=>l.jsx(Lr,{})}),snt=ge(async()=>{const{CompanyDataPrivacyModal:e}=await oe(async()=>{const{CompanyDataPrivacyModal:t}=await import("./CompanyDataPrivacyModal-C7hBDpfC.js");return{CompanyDataPrivacyModal:t}},__vite__mapDeps([38,1,2,3,5,4]));return{default:e}},{loading:()=>l.jsx(Lr,{})}),ant=ge(async()=>{const{SpaceVideoModal:e}=await oe(async()=>{const{SpaceVideoModal:t}=await import("./SpaceVideoModal-BudCOj4o.js");return{SpaceVideoModal:t}},__vite__mapDeps([39,1,2,3,5,4]));return{default:e}},{loading:()=>l.jsx(Lr,{})}),ont=ge(async()=>{const{PricingTableModal:e}=await oe(async()=>{const{PricingTableModal:t}=await import("./PricingTableModal-Dt7aJb_m.js");return{PricingTableModal:t}},__vite__mapDeps([40,1,2,41,3,24,25,5,4,31,32]));return{default:e}}),int=ge(async()=>{const{MapModal:e}=await oe(async()=>{const{MapModal:t}=await import("./MapModal-DtUbKSZP.js");return{MapModal:t}},__vite__mapDeps([42,1,2,43,44,3,4,45,5]));return{default:e}}),lnt=ge(()=>oe(()=>import("./InputPaymentModal-Vgf3dtlb.js"),__vite__mapDeps([46,1,2,5,47,3,4]))),cnt=ge(()=>oe(()=>import("./ShoppingPaymentModal-CKuHfPNE.js").then(e=>e.b),__vite__mapDeps([48,1,2,3,49,4,50,51,47,52,53,54,55,5,36])),{loading:()=>l.jsx(Lr,{})}),unt=ge(async()=>{const{ShoppingOnboardingModal:e}=await oe(async()=>{const{ShoppingOnboardingModal:t}=await import("./ShoppingOnboardingModal-Sf1r6QjO.js");return{ShoppingOnboardingModal:t}},__vite__mapDeps([56,1,2,3,54,4,48,49,50,51,47,52,53,55,5,36]));return{default:e}},{loading:()=>l.jsx(Lr,{})}),dnt=ge(async()=>{const{PurchaseDetailsModal:e}=await oe(async()=>{const{PurchaseDetailsModal:t}=await import("./PurchaseDetailsModal-CEOeSWiJ.js");return{PurchaseDetailsModal:t}},__vite__mapDeps([57,1,2,3,54,4,58,5]));return{default:e}},{loading:()=>l.jsx(Lr,{})}),fnt=ge(async()=>{const{ReservationDetailsModal:e}=await oe(async()=>{const{ReservationDetailsModal:t}=await import("./ReservationDetailsModal-BBq_A-2s.js");return{ReservationDetailsModal:t}},__vite__mapDeps([59,1,2,3,60,5,4]));return{default:e}},{loading:()=>l.jsx(Lr,{})}),mnt=ge(async()=>{const{SpaceSettingsModal:e}=await oe(async()=>{const{SpaceSettingsModal:t}=await import("./SpaceSettingsModal-co77TpHg.js");return{SpaceSettingsModal:t}},__vite__mapDeps([61,1,2,3,5,4]));return{default:e}},{loading:()=>l.jsx(Lr,{})}),hnt=ge(async()=>{const{UsernameModal:e}=await oe(async()=>{const{UsernameModal:t}=await import("./UsernameModal-CLZ6a77a.js");return{UsernameModal:t}},__vite__mapDeps([62,1,2,3,5,4]));return{default:e}}),pnt=ge(async()=>{const{FullNameModal:e}=await oe(async()=>{const{FullNameModal:t}=await import("./FullNameModal-BBzf8LVO.js");return{FullNameModal:t}},__vite__mapDeps([63,1,2,3,5,4]));return{default:e}}),gnt=ge(async()=>{const{KeyboardShortcutEditorModal:e}=await oe(async()=>{const{KeyboardShortcutEditorModal:t}=await import("./KeyboardShortcutEditorModal-B4xNzfNS.js");return{KeyboardShortcutEditorModal:t}},__vite__mapDeps([64,1,2,3,5,4]));return{default:e}},{loading:()=>l.jsx(Lr,{})}),ynt=ge(async()=>{const{VoiceToVoiceModal:e}=await oe(async()=>{const{VoiceToVoiceModal:t}=await import("./VoiceToVoiceModal-q9H0eJTi.js");return{VoiceToVoiceModal:t}},__vite__mapDeps([65,1,2,66,3,5,4]));return{default:e}},{loading:()=>l.jsx(T9,{})}),vnt=ge(async()=>{const{SearchStepsAssetsModal:e}=await oe(async()=>{const{SearchStepsAssetsModal:t}=await import("./SearchStepsAssetsModal-DACc-yXB.js");return{SearchStepsAssetsModal:t}},__vite__mapDeps([67,1,2,3,68,69,20,4,19,21,70,5]));return{default:e}}),xnt=ge(async()=>{const{MemoryListModal:e}=await oe(async()=>{const{MemoryListModal:t}=await import("./MemoryListModal-CuHsLYhS.js");return{MemoryListModal:t}},__vite__mapDeps([71,1,2,3,4,5]));return{default:e}}),bnt=ge(async()=>{const{HotelRoomDetailsModal:e}=await oe(async()=>{const{HotelRoomDetailsModal:t}=await import("./HotelRoomDetailsModal-CKPxHwaO.js");return{HotelRoomDetailsModal:t}},__vite__mapDeps([72,1,2,3,73,74,4,5]));return{default:e}},{loading:()=>l.jsx(Lr,{})}),_nt=ge(async()=>{const{PaymentModal:e}=await oe(async()=>{const{PaymentModal:t}=await import("./PaymentModal-BVrZhUo7.js");return{PaymentModal:t}},__vite__mapDeps([75,1,2,3,4,5,25,51,47]));return{default:e}},{loading:()=>l.jsx(Lr,{})}),wnt=ge(async()=>{const{FreeTrialModal:e}=await oe(async()=>{const{FreeTrialModal:t}=await import("./FreeTrialModal-B6MPUPvh.js");return{FreeTrialModal:t}},__vite__mapDeps([41,1,2,3,24,25,5,4]));return{default:e}}),Snt=ge(async()=>{const{ProReferralModal:e}=await oe(async()=>{const{ProReferralModal:t}=await import("./ProReferralModal-BS13jA3o.js");return{ProReferralModal:t}},__vite__mapDeps([76,1,2,3,77,4,5]));return{default:e}}),Cnt=ge(async()=>{const{MeetingDefaultsModal:e}=await oe(async()=>{const{MeetingDefaultsModal:t}=await import("./MeetingDefaultsModal-DrR2tnxO.js");return{MeetingDefaultsModal:t}},__vite__mapDeps([78,1,2,3,4,5]));return{default:e}}),Ent=ge(async()=>{const{AvailabilityModal:e}=await oe(async()=>{const{AvailabilityModal:t}=await import("./AvailabilityModal-BokBkVvm.js");return{AvailabilityModal:t}},__vite__mapDeps([79,1,2,3,80,4,5]));return{default:e}}),Mnt=ge(async()=>{const{ProMessageModal:e}=await oe(async()=>{const{ProMessageModal:t}=await import("./ProMessageModal-CIF217yP.js");return{ProMessageModal:t}},__vite__mapDeps([81,1,2,4,5,3]));return{default:e}}),Tnt=ge(async()=>{const{MemorySearchHistoryIntroModal:e}=await oe(async()=>{const{MemorySearchHistoryIntroModal:t}=await import("./MemorySearchHistoryIntroModal-CZfsqrqG.js");return{MemorySearchHistoryIntroModal:t}},__vite__mapDeps([82,1,2,3,5,4]));return{default:e}}),knt=ge(async()=>oe(()=>import("./SubSuccessModal-BCi4NaWw.js"),__vite__mapDeps([83,1,2,3,5,4]))),Nnt=ge(async()=>oe(()=>import("./ReferralErrorModal-ODkgoCGn.js"),__vite__mapDeps([84,1,2,3,5,4]))),Ant=ge(async()=>oe(()=>import("./ReferralSuccessModal-cHuVP5iL.js"),__vite__mapDeps([85,1,2,3,5,4]))),Pnt=ge(async()=>oe(()=>import("./IncentiveProModal-CdD12WXl.js"),__vite__mapDeps([86,1,2,3,5,4]))),Rnt=ge(async()=>{const{StudentReferralsModal:e}=await oe(async()=>{const{StudentReferralsModal:t}=await import("./StudentReferralsModal-D3jLX_k5.js");return{StudentReferralsModal:t}},__vite__mapDeps([87,1,2,33,3,34,4,5]));return{default:e}}),Int=ge(async()=>{const{SheerIDModal:e}=await oe(async()=>{const{SheerIDModal:t}=await import("./SheerIDModal-DeTV34Vw.js");return{SheerIDModal:t}},__vite__mapDeps([32,1,2,3,5,4]));return{default:e}}),jnt=ge(async()=>oe(()=>import("./PaypalSubscriptionModal-BLmgl6VK.js"),__vite__mapDeps([88,1,2,3,5,4]))),Ont=ge(async()=>{const{RestaurantBookingModal:e}=await oe(async()=>{const{RestaurantBookingModal:t}=await import("./RestaurantBookingModal-BBImwqa2.js");return{RestaurantBookingModal:t}},__vite__mapDeps([89,1,2,3,5,4,77,29]));return{default:e}},{loading:()=>l.jsx(Lr,{})}),Lnt=ge(async()=>oe(()=>import("./SheerIdRedirectModal-DIo3aeBH.js"),__vite__mapDeps([90,1,2,3,5,4]))),Dnt=ge(async()=>{const{EnterprisePremiumSecureUpgradeModal:e}=await oe(async()=>{const{EnterprisePremiumSecureUpgradeModal:t}=await import("./EnterprisePremiumSecureUpgradeModal-BEk3pXV1.js");return{EnterprisePremiumSecureUpgradeModal:t}},__vite__mapDeps([91,1,2,3,92,5,4]));return{default:e}}),Fnt=ge(async()=>{const{ShortcutModal:e}=await oe(async()=>{const{ShortcutModal:t}=await import("./ShortcutModal-Cln035w4.js");return{ShortcutModal:t}},__vite__mapDeps([93,1,2,3,5,4]));return{default:e}}),Unt=ge(async()=>oe(()=>Promise.resolve().then(()=>x6t),void 0)),Bnt=ge(async()=>{const{AutomationModal:e}=await oe(async()=>{const{AutomationModal:t}=await Promise.resolve().then(()=>v9t);return{AutomationModal:t}},void 0);return{default:e}}),Vnt=ge(async()=>{const{FinanceAlertModal:e}=await oe(async()=>{const{FinanceAlertModal:t}=await import("./FinanceAddAlert-CIGu6tPU.js");return{FinanceAlertModal:t}},__vite__mapDeps([94,1,2,3,5,4]));return{default:e}}),$nt=ge(async()=>{const{PlatformOptionsModal:e}=await oe(async()=>{const{PlatformOptionsModal:t}=await import("./PlatformOptionsModal-Bf40GMFl.js");return{PlatformOptionsModal:t}},__vite__mapDeps([95,2,1,5,4,3]));return{default:e}}),Wnt=ge(async()=>{const{SharepointSiteModal:e}=await oe(async()=>{const{SharepointSiteModal:t}=await import("./SharepointSiteModal-bY1z90b-.js");return{SharepointSiteModal:t}},__vite__mapDeps([96,1,2,3,5,4]));return{default:e}}),Hnt=ge(async()=>{const{MCPServerModal:e}=await oe(async()=>{const{MCPServerModal:t}=await import("./MCPServerModal-Dg5-AHKV.js");return{MCPServerModal:t}},__vite__mapDeps([97,1,2,3,4,5]));return{default:e}});function znt(e){return e?{[e.modalName]:e.arg}:{}}const ohe=A.memo(({})=>{const{currentOpenModals:e}=_t(),[t,n]=f.useState(e.length);f.useEffect(()=>{setTimeout(()=>{n(e.length)},100)},[e.length]);const r=t!=e.length;return e.map((s,a)=>l.jsx(ihe,{modal:s,canOutsideClickClose:!r&&a+1==e.length},a))});ohe.displayName="Modals";const ihe=A.memo(({modal:e,canOutsideClickClose:t})=>{const n=f.useMemo(()=>({canOutsideClickClose:t}),[t]);return l.jsx(hce.Provider,{value:n,children:l.jsx(lhe,{modal:e})})});ihe.displayName="SingleModalWrapper";const lhe=A.memo(({modal:e})=>{const{closeModal:t}=_t(),{hasActiveSubscription:n}=Nt(),r=e.modalName,{pricingModal:s,loginModal:a,installModal:o,requestAccessModal:i,collectionSelectModal:c,collectionCreateOrEdit:u,collectionCreateForThread:d,spaceCreate:m,spaceCreateForThread:h,spaceSettings:p,companyDataPrivacyModal:g,citationListModal:y,checkSourcesModal:v,mapModal:x,inputPaymentModal:b,shoppingPaymentModal:_,purchaseConfirmationModal:w,shoppingOnboardingModal:S,shoppingOrderDetailsModal:C,lossAversionModal:E,spaceVideoModal:M,uploadFilesModal:T,spaceContextModal:I,locationPermissionModal:j,watchlistModal:N,reservationDetailsModal:P,deleteMemoryModal:R,hotelRoomDetailsModal:k,searchStepsAssetsModal:O,memoryListModal:L,proSubscriptionPaymentModal:F,proMessageModal:U,memorySearchHistoryModal:V,gmailFailedPermissionsModal:W,subSuccessModal:H,incentiveProModal:G,restaurantBookingModal:K,sheerIdRedirectModal:$,enterprisePremiumSecureUpgradeModal:q,taskShortcutModal:Z,financeAlertModal:se,scheduledTaskModal:Y,automationModal:Q,referralSuccessModal:re,sharepointSiteModal:te,avatarManagementModal:le,shoppingTryOnOnboardingModal:ie,paypalSubscriptionModal:pe,announcementImageModal:me,studentReferrals:de,sheerIdModal:ve,meetingDefaultsModal:Ae,availabilityModal:Se,mcpServerModal:De}=znt(e),{trackEvent:Ne}=Te();return l.jsxs(l.Fragment,{children:[r==="loginModal"&&a?.origin&&l.jsx(BKe,{pitchMessage:a?.pitchMessage,origin:a.origin,isOpen:r==="loginModal",experimentalImageDesign:a.experimentalImageDesign,sheetModalDesign:a.sheetModalDesign,closeModal:t,closeCallback:a?.closeCallback,overrideRedirectUrl:a?.overrideRedirectUrl,disallowedMethods:a?.disallowedMethods,loginButtonsStyle:a?.loginButtonsStyle}),!Xtt.NEXT_PUBLIC_IS_SIDECAR_BUILD&&l.jsx(rc,{isSamsungBrowser:!0,isFirefoxDefaultSearch:!0,isPartnershipCampaign:!0,children:r==="installModal"&&o&&l.jsx(FZe,{isOpen:r==="installModal",onClose:()=>{t(),o.closeCallback?.()},origin:o.origin,sheetModalVariant:o.sheetModalVariant})}),r==="pricingModal"&&s&&l.jsx(ont,{isOpen:r==="pricingModal",pitchMessage:s?.pitchMessage,closeModal:t,origin:s.origin,showFreeTier:s.showFreeTier}),r==="collectionSelectModal"&&c?.entryUUID&&l.jsx(ent,{isOpen:r==="collectionSelectModal",currentCollection:c.currentCollection,entryUUID:c.entryUUID,searchTerm:c.searchTerm,frontendContextUUID:c.frontendContextUUID,closeModal:t}),r==="collectionCreateOrEdit"&&l.jsx(iK,{isOpen:r==="collectionCreateOrEdit",existingCollection:u?.existingCollection,frontendContextUUID:u?.frontendContextUUID,closeModal:t,onCreate:u?.onCreate}),r==="spaceCreate"&&l.jsx(Oq,{isOpen:r==="spaceCreate",closeModal:t,existingCollection:m?.existingCollection,onCreate:m?.onCreate,content:m?.content}),r==="spaceCreateForThread"&&h?.entryUUID&&l.jsx(Oq,{isOpen:r==="spaceCreateForThread",closeModal:t,existingCollection:m?.existingCollection,frontendContextUUID:h?.frontendContextUUID,entryUUID:h?.entryUUID,onCreate:h?.onCreate}),r==="spaceSettings"&&l.jsx(mnt,{isOpen:r==="spaceSettings",existingSpace:p?.existingSpace,closeModal:t}),r==="spaceVideoModal"&&M&&l.jsx(ant,{isOpen:r==="spaceVideoModal",setIsOpen:t,type:M.type}),r==="uploadFilesModal"&&l.jsx(Jtt,{isOpen:r==="uploadFilesModal",closeModal:t,collectionSlug:T?.collectionSlug,showUpsell:T?.showUpsell,initialTab:T?.initialTab}),r==="spaceContextModal"&&l.jsx(nfe,{isOpen:r==="spaceContextModal",closeModal:t,collectionSlug:I?.collectionSlug}),r==="requestAccessModal"&&i?.uuidOrSlug&&l.jsx(vce,{isOpen:r==="requestAccessModal",onClose:t,uuidOrSlug:i.uuidOrSlug}),r==="mapModal"&&l.jsx(Zs,{fallback:ahe,children:l.jsx(int,{isOpen:r==="mapModal",closeModal:t,locations:x&&x.locations,header:x.header,entryUUID:x.entryUUID,searchByLocationOverride:x?.searchByLocationOverride})}),r==="collectionCreateForThread"&&d?.entryUUID&&l.jsx(iK,{isOpen:r==="collectionCreateForThread",existingCollection:u?.existingCollection,frontendContextUUID:d?.frontendContextUUID,closeModal:t,entryUUID:d?.entryUUID}),r==="inputPaymentModal"&&b&&l.jsx(lnt,{isOpen:r==="inputPaymentModal",closeModal:t,isUpdating:b.isUpdating}),r==="shoppingPaymentModal"&&_&&l.jsx(cnt,{isOpen:r==="shoppingPaymentModal",closeModal:t,product:_.product,onSuccess:_.onSuccess}),r==="companyDataPrivacyModal"&&l.jsx(snt,{organizationName:g.organizationName,isOpen:r==="companyDataPrivacyModal",closeModal:t,onContinue:g.onContinue}),r==="citationListModal"&&y.webResults&&l.jsx(qfe,{isOpen:r==="citationListModal",onClose:t,entry:y.entry,webResults:y.webResults,submit:y.submit}),r==="checkSourcesModal"&&v&&l.jsx(Lfe,{isOpen:r==="checkSourcesModal",onClose:t,entryUUID:v.entryUUID,frontendContextUUID:v.frontendContextUUID,contextUUID:v.contextUUID,webResults:v.webResults,extendedBeforeContext:v.extendedBeforeContext,beforeContext:v.beforeContext,selectedText:v.selectedText,afterContext:v.afterContext,state:v?.state}),r==="keyboardShortcutEditorModal"&&l.jsx(gnt,{isOpen:r==="keyboardShortcutEditorModal",closeModal:t}),r==="keyboardShortcutHelperModal"&&l.jsx(xGe,{isOpen:r==="keyboardShortcutHelperModal",closeModal:t}),r==="onboardingModal"&&l.jsx(tnt,{isOpen:r==="onboardingModal",closeModal:t}),r==="lossAversionModal"&&E&&l.jsx(rnt,{isOpen:r==="lossAversionModal",onClose:()=>{t(),E.callback?.()},origin:E.origin}),r==="shoppingOnboardingModal"&&S&&l.jsx(unt,{isOpen:r==="shoppingOnboardingModal",onClose:t,onContinue:S.onContinue}),r==="shoppingOrderDetailsModal"&&l.jsx(dnt,{isOpen:r==="shoppingOrderDetailsModal",onClose:t,item:C?.item,userIntercomHash:C?.userIntercomHash}),r==="purchaseConfirmationModal"&&w&&l.jsx(nnt,{isOpen:r==="purchaseConfirmationModal",onClose:t,order:w.order}),r==="watchlistModal"&&N&&l.jsx(xZe,{isOpen:r==="watchlistModal",onClose:t,watchlistType:N.watchlistType,origin:N.origin}),r==="locationPermissionModal"&&j&&l.jsx(Ztt,{isOpen:r==="locationPermissionModal",onClose:t,onPermissionGranted:j.onPermissionGranted??Rn,origin:j.origin}),r==="reservationDetailsModal"&&P&&l.jsx(fnt,{isOpen:r==="reservationDetailsModal",onClose:t,reservation:P.reservation,userIntercomHash:P.userIntercomHash}),r==="usernameModal"&&l.jsx(hnt,{isOpen:r==="usernameModal",onClose:t}),r==="userFullNameModal"&&l.jsx(pnt,{isOpen:r==="userFullNameModal",onClose:t}),r==="deleteMemoryModal"&&l.jsx(zQe,{isOpen:r==="deleteMemoryModal",onClose:t,memoryId:R?.memoryId}),r==="deleteAllMemoriesModal"&&l.jsx(HQe,{isOpen:r==="deleteAllMemoriesModal",onClose:t}),r==="voiceToVoiceModal"&&l.jsx(ynt,{isOpen:r==="voiceToVoiceModal",onClose:t}),r==="hotelRoomDetailsModal"&&k&&l.jsx(bnt,{isOpen:r==="hotelRoomDetailsModal",onClose:t,...k}),r==="searchStepsAssetsModal"&&O?.backendUUID&&l.jsx(vnt,{isOpen:r==="searchStepsAssetsModal",closeModal:t,...O},`${O.backendUUID}-${O.assetUUID||"default"}`),r==="memoryListModal"&&l.jsx(xnt,{isOpen:r==="memoryListModal",onClose:t,isMemoryEnabled:L?.isMemoryEnabled??!1}),r==="proSubscriptionPaymentModal"&&F&&l.jsx(_nt,{isOpen:r==="proSubscriptionPaymentModal",onClose:t,...F}),r==="proReferralModal"&&l.jsx(Snt,{isOpen:r==="proReferralModal",onClose:t}),r==="proMessageModal"&&U&&l.jsx(Mnt,{isOpen:r==="proMessageModal",onClose:t,...U}),r==="freeTrialModal"&&l.jsx(wnt,{isOpen:r==="freeTrialModal",onClose:t}),r==="memorySearchHistoryModal"&&l.jsx(Jfe,{isOpen:r==="memorySearchHistoryModal",onClose:t,snippet:V?.snippet??"",type:V?.type??"memory",url:V?.url??"",memoryKey:V?.memoryKey,entryUuid:V?.entryUuid,title:V?.title,timestamp:V?.timestamp}),r==="memorySearchHistoryIntroModal"&&l.jsx(Tnt,{isOpen:r==="memorySearchHistoryIntroModal",onClose:t}),r==="gmailFailedPermissionsModal"&&W&&l.jsx(WQe,{isOpen:r==="gmailFailedPermissionsModal",onContinue:W.onContinue??Rn,onClose:t}),r==="subSuccessModal"&&H&&l.jsx(knt,{isOpen:r==="subSuccessModal",onClose:t,flowType:H.flowType,upgradeMax:H.upgradeMax,subscriptionTier:H.subscriptionTier,confirmationRedirectsToHomepage:H.confirmationRedirectsToHomepage}),r==="referralErrorModal"&&l.jsx(Nnt,{isOpen:r==="referralErrorModal",onClose:t}),r==="referralSuccessModal"&&re&&l.jsx(Ant,{isOpen:r==="referralSuccessModal",onClose:t,monthsAwarded:re.monthsAwarded}),r==="incentiveProModal"&&l.jsx(Pnt,{isOpen:r==="incentiveProModal",onClose:t,...G}),r==="paypalSubscriptionModal"&&pe&&l.jsx(jnt,{isOpen:r==="paypalSubscriptionModal",onClose:t,origin:pe.origin}),r==="sheerIdRedirectModal"&&$&&l.jsx(Lnt,{isOpen:r==="sheerIdRedirectModal",onContinue:()=>{t(),bu($.sheerIdUrl,"sheerIdRedirectModal")},onCancel:t}),r==="upgradeModal"&&l.jsx(Ktt,{isOpen:r==="upgradeModal",onClose:t}),r==="downgradeModal"&&l.jsx(KZe,{isOpen:r==="downgradeModal",onClose:t}),r==="restaurantBookingModal"&&K&&l.jsx(Ont,{isOpen:r==="restaurantBookingModal",onClose:t,...K}),r==="bugReportModal"&&l.jsx(Dde,{isOpen:r==="bugReportModal",onClose:t}),r==="enterprisePremiumSecureUpgradeModal"&&l.jsx(Dnt,{isOpen:r==="enterprisePremiumSecureUpgradeModal",onClose:t,onUpgradeSuccess:q?.onUpgradeSuccess}),r==="taskShortcutModal"&&Z&&l.jsx(Fnt,{open:r==="taskShortcutModal",onClose:()=>{t(),Z.onClose?.()},onCreated:Z.onCreated,source:Z.source,shortcut:Z.shortcut}),r==="financeAlertModal"&&se&&l.jsx(Vnt,{isOpen:r==="financeAlertModal",onClose:()=>{t(),se.onClose?.()},symbol:se.symbol,task:se.task}),r==="scheduledTaskModal"&&Y&&l.jsx(Jd,{children:l.jsx(Unt,{open:r==="scheduledTaskModal",onClose:()=>{t(),Y.onClose?.()},onSuccess:Y.onSuccess,source:Y.source,initial:Y.initial,prefill:Y.prefill})}),r==="automationModal"&&Q&&l.jsx(Jd,{children:l.jsx(Bnt,{open:r==="automationModal",onClose:()=>{t(),Q.onClose?.()},source:Q.source,initialConfiguration:Q.initial?Hce({selectedTask:Q.initial}):Q.prefill?Wce(Q.prefill):Q.initialConfiguration||AL(n),onSave:Pe=>{Q.onSuccess?.(Pe),t(),Q.onClose?.()},errorMessage:Q.errorMessage,initialActiveCardKey:Q.initialActiveCardKey,trackEvent:Ne})}),r==="platformOptionsModal"&&l.jsx($nt,{isOpen:r==="platformOptionsModal",onClose:t}),r==="sharepointSiteModal"&&te&&l.jsx(Wnt,{isOpen:r==="sharepointSiteModal",onClose:t,onSelectSite:te.onSelectSite}),r==="avatarManagementModal"&&le&&l.jsx(EZe,{isOpen:r==="avatarManagementModal",onClose:t,config:le??{source:"settings"}}),r==="shoppingTryOnOnboardingModal"&&l.jsx(IYe,{isOpen:r==="shoppingTryOnOnboardingModal",onClose:ie?.onClose||t,onSuccessfulOnboarding:ie?.onSuccessfulOnboarding||(()=>{})}),r==="announcementImageModal"&&me&&l.jsx(VKe,{onClose:t,announcementImageModal:me}),r==="studentReferrals"&&l.jsx(Rnt,{isOpen:r==="studentReferrals",verificationId:de?.verificationId}),r==="sheerIdModal"&&l.jsx(Int,{isOpen:r==="sheerIdModal",onClose:t,onVerificationSuccess:ve?.onSuccess,type:ve?.type||"student",closeOnSuccess:!1}),r==="meetingDefaultsModal"&&l.jsx(Cnt,{currentDuration:Ae?.currentDuration,currentBuffer:Ae?.currentBuffer,onSave:Ae?.onSave}),r==="availabilityModal"&&l.jsx(Ent,{currentAvailability:Se?.currentAvailability,onSave:Se?.onSave}),r==="mcpServerModal"&&De&&l.jsx(Hnt,{isOpen:r==="mcpServerModal",onClose:t,server:De.server,onSave:De.onSave,onDelete:De.onDelete})]})});lhe.displayName="SingleModal";const che=A.memo(({...e})=>{const{$t:t}=X(),n=f.useMemo(()=>MC(window.location.href,mc,Be.LOSS_AVERSION_MODAL),[]),{trackEvent:r}=Te(),[s,a]=f.useState(!1);return f.useEffect(()=>{r("loss aversion modal opened",{origin:e.origin})},[r,e.origin]),l.jsx(rn,{title:t(s?{defaultMessage:"Sign up or log in",id:"Qv2KGSr1CQ"}:{defaultMessage:"Lose your answer?",id:"BxKmht5dD3"}),actionList:s?void 0:[{text:t({defaultMessage:"Sign up or log in",id:"Qv2KGSr1CQ"}),onClick:()=>{a(!0)},variant:"primary"}],...e,children:l.jsx("div",{className:"grid grid-cols-1 grid-rows-1",children:l.jsx(_c,{initial:!1,mode:"popLayout",transition:{type:"spring",duration:.2},children:s?l.jsx(tl,{transition:{ease:$a,duration:.1,delay:.1},children:l.jsxs(_e.div,{className:"relative col-start-1 row-start-1",children:[l.jsx(D,{className:"mb-md",textCenter:!0,children:l.jsx(he,{defaultMessage:"Log in to save this answer",id:"Ngtk6vEw7T"})}),l.jsx(Ov,{redirectUrl:n,showCloseButton:!1})]})},"login"):l.jsx(tl,{transition:{ease:$a,duration:.1},children:l.jsx(_e.div,{className:"col-start-1 row-start-1",children:l.jsx(D,{children:t({defaultMessage:"To save this answer, sign up or log in.",id:"9Ha7YBI+Yh"})})})},"initial")})})})});che.displayName="ThreadLossAversionModal";const Q9=()=>{const e=f.useCallback(r=>{AOe(r)},[]),t=yn(NA),n=f.useCallback(()=>Fd(NA),[]);return f.useMemo(()=>({lossAversionStatus:t,setLossAversionStatus:e,unsetLossAversion:n}),[t,e,n])},Ip=()=>{const{lossAversionStatus:e,setLossAversionStatus:t}=Q9(),n=Pt(),r=Je(),s=f.useMemo(()=>!r&&e==="allowed"&&n?.startsWith("/search"),[r,e,n]),{openModal:a}=_t(),o=f.useCallback(({args:i,openModalOverride:c})=>{c?c("lossAversionModal",i):a("lossAversionModal",i),t("cooldown")},[a,t]);return f.useMemo(()=>({shouldShowLossAversionModal:s,handleOpenLossAversion:o}),[s,o])},Gnt=Object.freeze(Object.defineProperty({__proto__:null,ThreadLossAversionModal:che,useLossAversion:Ip,useLossAversionStorage:Q9},Symbol.toStringTag,{value:"Module"})),uhe=f.createContext({currentOpenModals:[],currentOpenedModal:null,openModal:()=>{},openStackedModal:()=>{},updateModal:()=>{},closeModal:()=>{}}),qnt=({children:e})=>{const[t,n]=f.useState([]),r=f.useMemo(()=>t.at(-1)?.modalName??null,[t]),{trackEvent:s}=Te(),{isMacOS:a,isWindowsApp:o}=Wt(),{shouldShowLossAversionModal:i,handleOpenLossAversion:c}=Ip(),u=At(),d=f.useCallback((v,x)=>{n(()=>[{modalName:v,arg:x}])},[]),m=f.useCallback((v,x)=>{n(b=>[...b,{modalName:v,arg:x}])},[]),h=f.useCallback((v,x)=>{n(b=>{const _=b.findLastIndex(w=>w.modalName==v);if(_!=-1){const w=b.slice();return w[_]={modalName:v,arg:x},w}else return b})},[]),p=f.useCallback(()=>{n(v=>v.slice(0,v.length-1))},[]),g=f.useMemo(()=>({currentOpenModals:t,currentOpenedModal:r,openModal:d,openStackedModal:m,updateModal:h,closeModal:p}),[t,d,m,h,p,r]),y=f.useCallback(v=>{if(a?v.metaKey&&v.key==="k":v.ctrlKey&&v.key==="i")v.preventDefault(),i?c({args:{origin:Be.NEW_THREAD_SHORTCUT,callback:()=>{s("quick ask keyboard shortcut",{}),u.push("/",void 0,"Quick ask keyboard shortcut (loss aversion)")}},openModalOverride:d}):(s("quick ask keyboard shortcut",{}),u.push("/",void 0,"Quick ask keyboard shortcut"));else if(a?v.metaKey&&v.key==="/":v.ctrlKey&&v.key==="/")v.preventDefault(),d(o?"keyboardShortcutEditorModal":"keyboardShortcutHelperModal",null);else if(o&&v.ctrlKey&&v.key==="d"){v.preventDefault();const x=new CustomEvent("toggleDictation");document.dispatchEvent(x)}},[a,o,i,c,d,s,u]);return f.useEffect(()=>(document.addEventListener("keydown",y),()=>{document.removeEventListener("keydown",y)}),[y]),l.jsxs(uhe.Provider,{value:g,children:[e,l.jsx(ohe,{})]})},_t=()=>{const e=f.useContext(uhe);if(!e)throw new Error("useModalState must be used within ModalContext");return e};function dhe({}){const t=Pt(),n=H9(t),{isMobileUserAgent:r}=Ce();return!r&&!n&&!1}const td=e=>`milestone-progress-dismissed-${e}`,lK="milestone-success-modal-dismissed",Knt=({reason:e})=>{const[t,n]=f.useState(!1),r=gt(),{keysRequiringRerender:s,removeKeyRequiringRerender:a}=xf(),o=dhe({}),{trackEvent:i,trackEventOnce:c}=Te(),{locale:u,$t:d}=X(),{hasAccessToProFeatures:m}=Nt(),{update:h}=za.useSession(),{openModal:p}=_t(),{data:g}=Ke({queryKey:["milestone-progress"],queryFn:()=>Vie({locale:u,reason:e}),enabled:o});f.useEffect(()=>{if(g?.progress_display?.length&&g.progress_display.every(Boolean)&&!m){if(Ve.getItem(lK))return;p("proMessageModal",{origin:Be.MILESTONE_ACHIEVED,title:g?.promotion_display.success_modal,buttonText:d({defaultMessage:"Get Started",id:"9QXm1EW9qz"})}),Ve.setItem(lK,"true"),setTimeout(()=>{h()},1e3)}},[g?.progress_display,g?.promotion_display.success_modal,m,p,h,d]),f.useEffect(()=>{},[s,r,a,o]),f.useEffect(()=>{Ts.getItem(td("session"))||Ve.getItem(td("lifetime"))||g&&!g.is_eligible&&g.has_incentive},[g,o,c]),f.useEffect(()=>{const v=g?.progress_display.filter(x=>x).length;v&&v>1&&!g.has_incentive&&(Ts.removeItem(td("session")),Ve.removeItem(td("lifetime")))},[g]);const y=f.useCallback(()=>{if(!g)return;i("milestone progress widget dismissed",{progressCount:g?.progress_display.filter(Boolean).length,requiredCount:g?.progress_display.length,hasIncentive:g?.has_incentive}),n(!1),Ts.setItem(td("session"),"true");const v=g?.progress_display.filter(x=>x).length;v&&v<=1&&Ve.setItem(td("lifetime"),"true"),g?.has_incentive&&Ve.setItem(td("lifetime"),"true")},[g,i]);return f.useMemo(()=>({show:t,handleClose:y,data:g}),[g,y,t])},Ynt=A.memo(()=>{const e="floating-milestone-progress",t=X(),{show:n,handleClose:r,data:s}=Knt({reason:e}),{title:a,description:o}=f.useMemo(()=>s?s.has_incentive?{title:s.promotion_display.title_complete,description:s.promotion_display.description_complete}:s.progress_display.includes(!0)?{title:s.promotion_display.title_progress,description:s.promotion_display.description_progress}:{title:s.promotion_display.title_start,description:s.promotion_display.description_start}:{title:"",description:""},[s]);return!n||!s||!s?.is_eligible?null:l.jsxs(z,{variant:"offset",className:"p-sm animate-in fade-in border-subtlest fixed bottom-[20px] right-[20px] w-[216px] rounded-lg border duration-300 ease-out",children:[l.jsx("img",{src:"https://r2cdn.perplexity.ai/academic/student-referrals.jpg",alt:t.formatMessage({id:"Tj0vv4yWUn",defaultMessage:"Student Referral Banner"}),className:"bg-offsetPlus size-full rounded-lg object-cover",style:{aspectRatio:"600/350"}}),l.jsx("div",{className:"right-sm top-sm absolute",children:l.jsx(ke,{pill:!0,variant:"noBackground",size:"small",icon:Xt,extraCSS:"text-light md:hover:text-quiet ",onClick:r})}),l.jsxs("div",{className:"p-xs mt-sm",children:[l.jsx(D,{variant:"baseSemi",children:a}),l.jsx(D,{variant:"small",color:"light",className:"mt-xs",children:o}),l.jsx("div",{className:"mt-xs flex flex-row justify-between",children:s.progress_display.map((i,c)=>l.jsx("div",{className:"gap-xs py-xs flex flex-col items-center",children:i?l.jsx(D,{color:"super",children:l.jsx(be,{size:"lg",icon:W4e})}):l.jsxs(D,{className:"relative",children:[l.jsx(be,{size:"lg",className:"fill-offsetPlus",icon:H4e}),l.jsx(D,{variant:"tinyRegular",color:"light",className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:c+1})]})},c))})]})]})});Ynt.displayName="FloatingMilestoneProgress";const V2=e=>`https://plex.it/referrals/${e}`,OVt=({userEmail:e,reason:t})=>{const[n,r]=f.useState(!1),[s,a]=f.useState(null),{trackEvent:o}=Te(),i=f.useCallback(async()=>{if(s){const c=V2(s);await navigator.clipboard.writeText(c),o("referral link copied",{referralLink:c}),r(!0),setTimeout(()=>{r(!1)},2e3)}else try{const c=await AJe({email:e,reason:t});a(c.code);const u=V2(c.code);await navigator.clipboard.writeText(u),o("referral link copied",{referralLink:u}),r(!0),setTimeout(()=>{r(!1)},2e3)}catch(c){ee.error("Error fetching referral code:",c)}},[s,e,o,t]);return f.useMemo(()=>({isCopied:n,handleCopyLink:i,copyButtonProps:{text:n?"Copied":"Copy link",icon:n?Ea:N0,onClick:i}}),[n,i])},LVt="/static/images/referrals-landing-wide.jpeg",Qnt=(e,t)=>{const n=t?"Get rewards like hoodies, laptops, and more.":"";return e.formatMessage({defaultMessage:"Earn 1 month of Pro for each friend you refer. {prizeText}",id:"vWjWyq4Feg"},{prizeText:n})},Xnt=({reason:e})=>{const n=Ot()?.user?.email??"",{isStudent:r}=W9({email:n??"",reason:e}),{value:s,loading:a}=Yr({flag:"spring-2025-referrals-promo",defaultValue:!0});return{isSpringReferralPromoEnabled:!a&&s,isStudent:r}},Znt=()=>{const{value:e}=Yr({flag:"student-referral-prizes",defaultValue:!1});return e},fhe=({reason:e})=>{const t=hn(),n=ms(),r=Pt(),{isSpringReferralPromoEnabled:s,isStudent:a}=Xnt({reason:e});return!t.isStudentReferralBannerDismissed&&n&&r==="/"&&s&&a},Jnt=A.memo(({})=>{const e="floating-referral-invite",t=hn(),n=X(),[r,s]=f.useState(!1),{referralCode:a}=js({reason:e}),o=fhe({reason:e}),{trackEvent:i,trackEventOnce:c}=Te(),u=Znt();f.useEffect(()=>{c("referral widget shown",{})},[c]),f.useEffect(()=>{let h;return r&&(i("referral link copied",{referralLink:V2(a)}),h=setTimeout(()=>{s(!1)},2e3)),()=>{clearTimeout(h)}},[r,a,i]);const d=f.useCallback(()=>{t.actions.setIsStudentReferralBannerDismissed(!0),i("referral widget dismissed",{})},[t.actions,i]),m=f.useCallback(()=>{navigator.clipboard.writeText(V2(a)),s(!0)},[a]);return a?l.jsx(woe,{shouldShow:!!o,imageSrc:"https://r2cdn.perplexity.ai/academic/student-referrals.jpg",imageAlt:n.formatMessage({id:"Tj0vv4yWUn",defaultMessage:"Student Referral Banner"}),title:n.formatMessage({id:"N+fXKkoM0w",defaultMessage:"Get up to 24 months of Pro"}),description:Qnt(n,u),primaryAction:l.jsxs("div",{className:"gap-xs flex flex-row",children:[l.jsx(ye,{variant:"common",text:n.formatMessage({id:"TdTXXf940t",defaultMessage:"Learn more"}),href:"/referrals",size:"small"}),l.jsx(ye,{variant:"primaryGhost",icon:r?yre:N0,text:r?"Copied":"Copy your link",onClick:m,size:"small"})]}),onDismiss:d,iconXDismiss:!0}):null}),ert=A.memo(({closeCookieConsentPopup:e})=>{const{$t:t}=X(),{locale:n}=X(),r=f.useCallback(()=>{qt(lv,"true",{expires:365}),window.dispatchEvent(new CustomEvent("consentChange",{detail:{consent:"ALLOW"}})),e()},[e]),s=f.useCallback(()=>{qt(lv,"false",{expires:365}),e()},[e]);return l.jsx(dL,{modal:!1,open:!0,children:l.jsxs(fL,{children:[l.jsxs(uO,{children:[l.jsx(oC,{children:t({defaultMessage:"Cookie Policy",id:"cA0kQYQQMJ"})}),l.jsx(mL,{children:l.jsx(he,{defaultMessage:'We use cookies to enhance your experience. By clicking "Accept All Cookies" or selecting "Necessary Cookies", you agree to our privacy policy.',id:"VCSjJ9FhMu"})})]}),l.jsx(aC,{children:l.jsxs(z,{id:"cookie-consent",variant:"background",className:"bottom-sm inset-x-sm p-md fixed max-w-md rounded-lg border shadow-sm md:left-auto",children:[l.jsxs(D,{variant:"baseSemi",className:"gap-x-sm flex items-center",children:[l.jsx(be,{icon:z4e,size:"md"}),l.jsx("span",{children:t({defaultMessage:"Cookie Policy",id:"cA0kQYQQMJ"})})]}),l.jsx(D,{variant:"small",color:"light",className:"mb-4 text-sm",children:l.jsx(he,{defaultMessage:'We use cookies to enhance your experience. By clicking "Accept All Cookies" or selecting "Necessary Cookies", you agree to our <link>privacy policy</link>.',id:"ADl1M4/ost",values:{link:a=>l.jsx(at,{href:Ty[n]?.privacyPolicy||Ty.default.privacyPolicy,className:"underline hover:no-underline",target:"_blank",children:a})}})}),l.jsxs(z,{className:"gap-x-sm flex items-center",children:[l.jsx(ye,{size:"small",variant:"primary",onClick:s,text:t({defaultMessage:"Necessary Cookies",id:"Wzr9ADvGqD"})}),l.jsx(ye,{size:"small",onClick:r,text:t({defaultMessage:"Accept All Cookies",id:"JyT5uF/dGC"})})]})]})})]})})}),mhe=({userIntercomHash:e,appId:t,data:n,reason:r})=>{const s=!!oi(),a=Je(),o=Ot(),{isPro:i,isMax:c,subscriptionTier:u}=Nt(),{orgUser:d,isEnterprise:m}=pn({reason:r}),h=f.useMemo(()=>{const y=s?{comet:!0}:{};return{l2wyozh0:{api_base:"https://api-iam.intercom.io",app_id:"l2wyozh0",name:o?.user?.name,email:o?.user?.email,user_hash:e??void 0,is_signed_in:a,is_pro_user:i,is_max_user:c,is_enterprise_user:m,account_type:d?.role,payment_tier:o?.user?.payment_tier||"free",subscription_tier:u||"none",hide_default_launcher:!0,...n,...y},fl4pfvft:{api_base:"https://api-iam.intercom.io",app_id:"fl4pfvft",name:o?.user?.name,email:o?.user?.email,user_hash:e??void 0,is_signed_in:a,is_pro_user:i,is_max_user:c,is_enterprise_user:m,account_type:d?.role,payment_tier:o?.user?.payment_tier||"free",subscription_tier:u||"none",hide_default_launcher:!0,...n,...y},cajnwzjn:{api_base:"https://api-iam.intercom.io",app_id:"cajnwzjn",name:o?.user?.name,email:o?.user?.email,user_hash:e??void 0,is_signed_in:a,is_pro_user:i,is_max_user:c,is_enterprise_user:m,account_type:d?.role,payment_tier:o?.user?.payment_tier||"free",subscription_tier:u||"none",hide_default_launcher:!0,...n,...y}}},[o,e,n,s,i,c,m,d?.role,a,u]),p=f.useRef(void 0),g=f.useCallback(async()=>{p.current||(p.current=oe(async()=>{const{show:y,Intercom:v,shutdown:x,update:b}=await import("./index-5FFPV-FM.js").then(_=>_.i);return{show:y,Intercom:v,shutdown:x,update:b}},[]).then(({show:y,Intercom:v,shutdown:x,update:b})=>(v(h[t]),{show:y,update:b,shutdown:x}))),p.current.then(({show:y,update:v})=>{v(h[t]),y()})},[t,h]);return OC(()=>{p.current?.then(({shutdown:y})=>{y()})}),f.useMemo(()=>({show:g}),[g])};mhe.displayName="useIntercom";function hhe(){const{trackEvent:e}=Te(),{locale:t}=X(),[n,r]=f.useState(r_.includes(t)?t:mu),s=MOe();return s?r_.includes(s)?n!==s&&r(s):TOe():n!==t&&r_.includes(t)&&r(t),f.useMemo(()=>({locale:n,hasChosenLocale:!!s,saveLocale(a){r(a),EOe(a),e("set locale cookie",{locale:a})}}),[n,s,e])}const trt=e=>{};function nrt(e){const{$t:t}=X(),{onLanguageChange:n=trt,button:r}=e,s=At(),{locale:a,saveLocale:o,hasChosenLocale:i}=hhe(),{isMobileStyle:c}=Ce(),u=f.useCallback(async p=>{o(p),n(p),await EC(),s.refresh("Interface language select")},[o,n,s]),d=f.useMemo(()=>({text:t({defaultMessage:"Default",id:"lKv8exH0MR"}),value:"default",type:"default",onClick:()=>{e8e(),s.refresh("Interface language reset")}}),[t,s]),m=f.useMemo(()=>[d,...Zje.map(p=>({text:p.label,value:p.locale,type:"default",onClick:()=>{u(p.locale)}}))],[d,u]),h=f.useMemo(()=>i?m.find(p=>p.value===a)?.text:d.text,[m,a,i,d]);return l.jsx(en,{isMobileStyle:c,items:m,wrapperClassName:"inline-flex",children:r??l.jsx("div",{className:"w-full md:w-[200px]",children:l.jsx(ye,{size:"small",chevron:!0,chevronIcon:Zr,text:h,layout:"split",fullWidth:!0,variant:"border",testId:"interface-language-select"})})})}async function phe(){const e=await fetch("/api/version",{method:"GET",headers:{"Content-Type":"application/json"}}),{version:t}=await e.json();return t}const rrt=({hideOnNarrowScreens:e=!1,userIntercomHash:t})=>{const{$t:n}=X(),{show:r}=mhe({appId:"l2wyozh0",userIntercomHash:t,reason:"helper-contact-support"}),{isMobileStyle:s}=Ce(),{isWindowsApp:a}=Wt(),{openModal:o}=_t(),{locale:i}=X(),{trackEvent:c}=Te(),u=hr(),d=Bme(),m=oi(),h=h8(),{isEnterprise:p}=QL({reason:"helper"}),[g,y]=f.useState(),[v,x]=f.useState(!1);f.useEffect(()=>{h&&async function(){try{y(await phe()??"")}catch{}}()},[h]);const b=i in Ty?Ty[i]:Ty.default,_=f.useMemo(()=>h?[{type:"nested",text:"",label:"Internal (PPLX only)",isSubmenuOpen:v,onSubmenuOpen:()=>x(!0),onSubmenuClose:()=>x(!1),submenu:[{type:"default",text:"",label:g===void 0?"Loading current commit...":"Current commit: "+g,show:!0,href:g&&"https://github.com/ppl-ai/agi/commit/"+g,target:"_blank"},{type:"default",text:"",label:m?`Browser: ${m.browser_version}
Extension: ${m.extension_version}
Agent Extension: ${m.agent_extension_version}`:"Browser info is not defined",show:!!m}]}]:[],[h,g,v,m]),w=f.useMemo(()=>d?"https://www.perplexity.ai/comet/gettingstarted":p?"https://www.perplexity.ai/enterprise/resources":"https://www.perplexity.ai/hub/getting-started#what-is-perplexity",[p,d]),S=f.useMemo(()=>p?"https://www.perplexity.ai/help-center/en/collections/11312901-enterprise-pro":"https://www.perplexity.ai/hub/helpcenter",[p]),C=f.useCallback(()=>{u.showFeedbackForm()},[u]),E=f.useMemo(()=>[{icon:d?dl:vre,text:n({defaultMessage:"Get started",id:"/aBLH2Kytu"}),show:!0,href:w,target:"_blank",onClick(){c("help menu item clicked",{href:w,isCometHome:d})}},{icon:H_,text:n({defaultMessage:"FAQ",id:"W8nHSdskn0"}),show:d,href:"http://comet-help.perplexity.ai/en",target:"_blank",onClick(){c("help menu item clicked",{href:"http://comet-help.perplexity.ai/en",isCometHome:d})}},{icon:cB,text:n({defaultMessage:"Report an Issue",id:"C8l3hRgoLu"}),show:d,onClick:C},{icon:H_,text:n({defaultMessage:"Help center",id:"BYkLO/XERT"}),show:!d||p,href:S,target:"_blank",onClick(){c("help menu item clicked",{href:S,isCometHome:d})}},{icon:G4e,text:n({defaultMessage:"Changelog",id:"MQcAqlXZ5R"}),show:!d,href:"https://www.perplexity.ai/changelog",target:"_blank",onClick(){c("help menu item clicked",{href:"https://www.perplexity.ai/changelog",isCometHome:d})}},{icon:i8,text:n({defaultMessage:"Blog",id:"tv5FG3fVPd"}),show:!d,href:"/blog",target:"_blank",onClick(){c("help menu item clicked",{href:"/blog",isCometHome:d})}},{icon:Xb,text:n({defaultMessage:"Keyboard shortcuts",id:"vzYPVXl4by"}),show:!a,onClick(){o("keyboardShortcutHelperModal",null),c("help menu item clicked",{action:"shortcut modal",isCometHome:d})}},{icon:Xb,text:n({defaultMessage:"Keyboard shortcuts",id:"vzYPVXl4by"}),show:a,onClick(){o("keyboardShortcutEditorModal",null),c("help menu item clicked",{action:"shortcut modal",isCometHome:d})}},{icon:e8,text:n({defaultMessage:"{pplx} {pro}",id:"QDSn6QIReR"},{pplx:"Perplexity",pro:"Pro"}),show:!0,href:"/pro",target:"_blank",onClick(){c("help menu item clicked",{href:"/pro",isCometHome:d})}},{icon:cc,text:n({defaultMessage:"Enterprise",id:"CDLJ0Wjq0x"}),show:!0,href:"https://www.perplexity.ai/enterprise?utm_source=helper",target:"_blank",onClick(){c("help menu item clicked",{href:"https://www.perplexity.ai/enterprise?utm_source=helper",isCometHome:d})}},{icon:V_,text:n({defaultMessage:"Sonar API",id:"m21oy6OJo7"}),show:!0,href:"https://sonar.perplexity.ai/",target:"_blank",onClick(){c("help menu item clicked",{href:"https://sonar.perplexity.ai/",isCometHome:d})}},{icon:q4e,text:n({defaultMessage:"Contact Support",id:"YdQxfwJ5wQ"}),show:!0,onClick(){r()}},{type:"separator",show:!0},{text:"",label:n({defaultMessage:"Careers",id:"yJ1ORHjbX8"}),show:!0,href:"https://www.perplexity.ai/careers",target:"_blank",onClick(){c("help menu item clicked",{href:"https://www.perplexity.ai/careers",isCometHome:d})}},{text:"",label:n({defaultMessage:"Terms of service",id:"FqgDIVw4jF"}),show:!0,href:b.termsOfService,target:"_blank",onClick(){c("help menu item clicked",{href:b.termsOfService,isCometHome:d})}},{text:"",label:n({defaultMessage:"Privacy policy",id:"cPwv2cbzf2"}),show:!0,href:b.privacyPolicy,target:"_blank",onClick(){c("help menu item clicked",{href:b.privacyPolicy,isCometHome:d})}},..._],[d,n,w,C,p,S,a,b.termsOfService,b.privacyPolicy,_,c,o,r]),M=f.useCallback(()=>{o("keyboardShortcutEditorModal",null),c("help menu item clicked",{action:"shortcut modal"})},[o,c]),T=f.useCallback(()=>{h&&o("bugReportModal",null)},[o,h]),I=f.useMemo(()=>E.map(j=>({type:"default",...j})),[E]);return l.jsx("div",{className:B("bottom-md right-md m-sm fixed hidden",!e&&"md:block",e&&"lg:block"),children:l.jsxs("div",{className:"gap-sm flex items-center",children:[h&&l.jsx(ye,{toolTip:"Report a bug",ariaLabel:n({defaultMessage:"Internal: Report a bug",id:"mD23B8Qy5J"}),size:"small",pill:!0,variant:"rejecter",icon:cB,onClick:T}),l.jsx("div",{className:"group relative",children:l.jsx(nrt,{button:l.jsx(ye,{toolTip:n({defaultMessage:"Change language",id:"jOuyTp+O9P"}),icon:K4e,ariaLabel:n({defaultMessage:"Language",id:"y1Z3orIe9Z"}),size:"small",pill:!0,variant:"border",extraCSS:"shadow-subtle"})})}),a&&l.jsx("div",{className:"hidden lg:block",children:l.jsx(ye,{toolTip:n({defaultMessage:"Keyboard shortcuts",id:"vzYPVXl4by"}),ariaLabel:n({defaultMessage:"Keyboard shortcuts",id:"vzYPVXl4by"}),size:"small",pill:!0,variant:"border",extraCSS:"shadow-subtle",icon:Xb,onClick:M})}),l.jsx(en,{popoverProps:{childrenClassName:"block"},placement:"top-end",isMobileStyle:s,onOpen:()=>c("help menu opened",{}),items:I,children:l.jsx(ye,{toolTip:n({defaultMessage:"Learn more",id:"TdTXXf940t"}),ariaLabel:n({defaultMessage:"Help menu",id:"HzUkaMxHjy"}),variant:"border",extraCSS:"shadow-subtle ",size:"small",pill:!0,icon:Y4e})})]})})};var XT={},ZT={},cK;function srt(){return cK||(cK=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="mobile-screen-button",r=384,s=512,a=["mobile-alt"],o="f3cd",i="M64 448c0 8.8 7.2 16 16 16l224 0c8.8 0 16-7.2 16-16l0-80L64 368l0 80zm0-128l256 0 0-256c0-8.8-7.2-16-16-16L80 48c-8.8 0-16 7.2-16 16l0 256zM16 64C16 28.7 44.7 0 80 0L304 0c35.3 0 64 28.7 64 64l0 384c0 35.3-28.7 64-64 64L80 512c-35.3 0-64-28.7-64-64L16 64zM192 392a24 24 0 1 1 0 48 24 24 0 1 1 0-48z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faMobileScreenButton=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(ZT)),ZT}var uK;function art(){return uK||(uK=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=srt();e.definition={prefix:t.prefix,iconName:t.iconName,icon:[t.width,t.height,t.aliases,t.unicode,t.svgPathData]},e.faMobileAlt=e.definition,e.prefix=t.prefix,e.iconName=t.iconName,e.width=t.width,e.height=t.height,e.ligatures=t.aliases,e.unicode=t.unicode,e.svgPathData=t.svgPathData,e.aliases=t.aliases}(XT)),XT}var ort=art();const ghe=({extraCss:e="",variant:t="offset"})=>l.jsx(z,{variant:t,className:B("shimmer aspect-square w-[144px] rounded-lg",e)}),irt=()=>Ts.getItem("mobilePopupDismissed")!=="true",lrt=()=>Ts.setItem("mobilePopupDismissed","true"),crt=ge(()=>oe(()=>import("./AppDownloadQR-DGwMx9Hs.js"),__vite__mapDeps([98,1,2])),{loading:()=>l.jsx(ghe,{})}),urt=A.memo(({})=>{const{$t:e}=X(),[t,n]=f.useState(!1),r=Pt(),{trackEvent:s}=Te(),{keysRequiringRerender:a,removeKeyRequiringRerender:o}=xf(),i=H9(r);if(f.useEffect(()=>{a.includes("floating-mobile-download")&&n(irt()&&!i),o("floating-mobile-download")},[a,i,o]),f.useEffect(()=>{t&&s("floating mobile download shown",{})},[t,s]),!t)return null;const c=()=>{n(!1),lrt(),s("floating mobile download dismissed",{})};return l.jsx(z,{variant:"background",className:"bottom-md right-md p-md animate-in fade-in fixed z-30 hidden w-[350px] rounded-lg border shadow-sm duration-300 ease-out md:block",children:l.jsxs("div",{children:[l.jsx("div",{className:"absolute right-0 top-0",children:l.jsx(ke,{pill:!0,size:"small",icon:Xt,onClick:c})}),l.jsx("div",{className:"pb-md flex justify-center",children:l.jsx(D,{variant:"section-title",className:"text-center",color:"super",children:l.jsx(xt,{icon:ort.faMobileAlt,size:"2x"})})}),l.jsx(D,{variant:"section-title",className:"text-center",children:e({defaultMessage:"Open on the Perplexity mobile app",id:"QENIXgASKx"})}),l.jsx(D,{className:"text-center",children:e({defaultMessage:"Scan now to install",id:"niKvT5U+3I"})}),l.jsx("div",{className:"mt-sm flex items-center justify-center",children:l.jsx(z,{className:"p-xs rounded-md shadow-md",children:l.jsx(crt,{})})})]})})}),drt=ge(async()=>{const{SideStudyModeViewer:e}=await oe(async()=>{const{SideStudyModeViewer:t}=await import("./SideStudyModeViewer-D5y7LwY1.js");return{SideStudyModeViewer:t}},__vite__mapDeps([99,1,2,4,5,3]));return{default:e}}),yhe=f.createContext({openStudyMode:()=>{},closeStudyMode:()=>{},isStudyModeOpen:!1}),frt=()=>f.useContext(yhe),vhe=A.memo(({children:e})=>{const[t,n]=f.useState(!1),r=f.useCallback(()=>{n(!0)},[]),s=f.useCallback(()=>{n(!1)},[]),a=f.useMemo(()=>({openStudyMode:r,closeStudyMode:s,isStudyModeOpen:t}),[r,s,t]);return l.jsxs(yhe.Provider,{value:a,children:[e,l.jsx(st,{children:t&&l.jsx(drt,{})})]})});vhe.displayName="StudyModeStateProvider";function mrt({reason:e}){const{organization:t}=pn({reason:e}),n=t?.uuid??"",r=Pt(),{isStudyModeOpen:s}=frt(),{value:a}=Ut({flag:"helper-disabled",subjectType:"user_nextauth_id",defaultValue:!1,extraAttributes:{orgUuid:n}}),o=r?.startsWith("/apps/"),i=r?.startsWith("/b/zen"),c=r?.startsWith("/b/try-assistant"),u=r?.startsWith("/b/mission-control"),d=r?.startsWith("/spaces/");return a||o||i||c||s||d||u}const X9=A.memo(({upsellInformation:e,inFlight:t,position:n,onButtonClick:r,isLoading:s,textButtonIfSecondary:a=!1,hideUpsell:o})=>{const i=FC(e,t,{hideUpsell:o}),c=f.useCallback(()=>{r?.(),i()},[r,i]),u=f.useMemo(()=>{if(n==="router_steps")return"inverted";switch(e?.button_color){case Px.MAX_COLOR:return"maxGold";case Px.PRIMARY_COLOR:return"primary";case Px.INVERTED:return"inverted";default:return"common"}},[e?.button_color,n]),d=f.useCallback(m=>{let h;e?.icon_reference==="labs"?h=l.jsx(be,{icon:mr,size:"sm"}):e?.icon_reference==="comet_download"&&(h=l.jsx(gf,{size:16}));const p={size:m?"regular":"small",onClick:c,text:e?.button_text,leadingComponent:h,textClassName:m?"!text-sm":void 0,fullWidth:!0,isLoading:s};return a&&e?.button_color===Px.SECONDARY_COLOR?l.jsx(ke,{...p,variant:"super",noPadding:!0}):l.jsx(ye,{...p,variant:u})},[u,c,e?.button_color,e?.button_text,e?.icon_reference,a,s]);return e?.cta!==ia.PERMALINK&&e?.cta_information?.permalink?l.jsxs("div",{className:"gap-md flex flex-row",children:[l.jsx(ke,{text:"Learn more",fullWidth:!0,variant:"super",textClassName:"!text-sm",noPadding:!0,onClick:()=>window.open(e.cta_information?.permalink,"_blank")}),d(!0)]}):d(!1)});X9.displayName="UpsellButton";const hrt=()=>{const{data:e}=G9(),{trackEvent:t,trackEventOnce:n}=Te(),[r,s]=f.useState(!1);f.useEffect(()=>{e&&e.app_location==="SIDE_CARD"&&(s(!0),n("side upsell viewed",{upsellName:e.name,upsellType:e.upsell_type}))},[e,n]);const a=f.useCallback(()=>{e&&(t("side upsell dismissed",{upsellName:e.name,upsellType:e.upsell_type}),s(!1),LC(e.name))},[e,t]),o=f.useMemo(()=>e?l.jsx(X9,{upsellInformation:e,textButtonIfSecondary:!0}):null,[e]);return f.useMemo(()=>({show:r&&!!e,title:e?.title,description:e?.description,image:e?.image_asset,button:o,onDismiss:a}),[o,a,r,e])};function prt({useCase:e}){return Ke({queryKey:["userIntercomHash",e],queryFn:()=>{const t=new URLSearchParams;return t.set("useCase",e),fetch(`/api/intercom?${t.toString()}`).then(n=>n.json())}})}var dK={};const grt=()=>{const e="floating-components",t=Je(),n=dhe({});$n({enabled:!t});const r=hrt(),{showCookieConsentPopup:s,closeCookieConsentPopup:a}=Jre(),o=mrt({reason:e}),i=f.useRef(null),{inApp:c}=ep(),u=fhe({reason:e}),{currentOpenedModal:d}=_t(),m=Pt(),{data:h}=prt({useCase:"default"});if(c)return null;if(r.show&&r.title&&r.description&&r.button&&r.onDismiss)return l.jsx(woe,{shouldShow:r.show,imageSrc:r.image,imageAlt:"Side card upsell",title:r.title,description:r.description,primaryAction:r.button,onDismiss:r.onDismiss,iconXDismiss:!0});if(!s&&u)return l.jsx(Jnt,{});const p=h?.userIntercomHash??null,g=!d&&!t&&!s&&!dK.NEXT_PUBLIC_IS_SIDECAR_BUILD;return l.jsxs(l.Fragment,{children:[!o&&p&&l.jsx(rrt,{hideOnNarrowScreens:m?.includes("/search"),userIntercomHash:p}),g&&l.jsx("div",{ref:i,children:l.jsx(rc,{isWindowsApp:!0,isGovernment:!0,children:l.jsx(XJe,{portalTarget:i.current??void 0},"floating-signup")})}),t&&!dK.NEXT_PUBLIC_IS_SIDECAR_BUILD&&l.jsx(rc,{isWindowsApp:!0,children:l.jsx(urt,{})}),s&&l.jsx(ert,{closeCookieConsentPopup:a}),t&&n]})},yrt=["49a618ae-2fee-4bac-9150-81c466a49187"];let fK=!1;const vrt=performance.now();function xhe(e,t){if(fK||typeof document>"u")return;const r="4705c1a2-db1e-42f0-8a66-cd6208ae9e65",s="pub4ecf63e3fd1ad28de1a9027c01181601",a=e.version,o=e.env??"local",i=oi(),c=t?.email?.endsWith("@perplexity.ai"),u=o==="local",d=o==="testing"||u||i||c?100:2,m=u||c?100:2;if(!yrt.includes(t?.org_uuid??"")){G3e({ddApplicationId:r,ddClientToken:s,version:a,env:o,debug:u,sessionSampleRate:100,sessionReplaySampleRate:m}),q3e({ddClientToken:s,version:a,env:o,debug:u,sessionSampleRate:d});const p=typeof navigator<"u"&&"serviceWorker"in navigator&&!!navigator.serviceWorker.controller;if(aB({useServiceWorker:p}),oB({useServiceWorker:p}),i){const g={cometAgentExtensionVersion:i?.agent_extension_version,cometDeviceId:i.device_id,cometMainExtensionVersion:i.extension_version,cometVersion:i?.browser_version,erp:e.erp};aB(g),oB(g)}Il("web.frontend.module_exec_start",{startTime:performance.timeOrigin,duration:vrt})}fK=!0}function xrt(){const{data:e,status:t}=za.useSession();f.useLayoutEffect(()=>{t!=="loading"&&xhe(Ys(),e?.user)},[e?.user,t])}const VC="^/(finance|crypto|app/finance)/?([^/]+)?(?:/([^/]+))?/?$",bhe=e=>{if(!e)return{base:void 0,symbol:void 0,tab:void 0};const t=new RegExp(VC),n=e?.match(t);return{base:n?.[1]?.replace("app",""),symbol:n?.[2],tab:n?.[3]}},brt=["^\\/search(?:\\/(?<new>new))?(?:\\/(?<uuid>.+))?$","/account/api/files/:repositoryUuid","/account/api/members","/account/api/billing","/account/api/files","/account/api/limits","/account/api/group","/account/api/keys","/account/api","/account/org/user-access","/account/org/permissions","/account/org/connectors","/account/org/insights","/account/org/members","/account/org/details","/account/org/files","/account/org","/account/pro-perks/:name","/account/pro-perks","/account/tasks/:taskId","/account/tasks","/account/site-instructions","/account/reservations","/account/preferences","/account/personalize","/account/notifications","/account/purchases","/account/connectors","/account/shortcuts","/account/details","/account/files","/account","/sports/atp/tournaments/:seasonId","/sports/atp/events/:eventId","/sports/atp","/sports/wta/tournaments/:seasonId","/sports/wta/events/:eventId","/sports/wta","/sports/nba/players/:playerId","/sports/nba/events/:eventId","/sports/nba/teams/:teamId","/sports/nba","/sports/nfl/players/:playerId","/sports/nfl/events/:eventId","/sports/nfl/teams/:teamId","/sports/nfl","/sports/championsleague/events/:eventId","/sports/championsleague","/sports/f1/events/:eventId","/sports/f1","/sports/mlb/events/:eventId","/sports/mlb","/sports/ipl/events/:eventId","/sports/ipl","/sports/icc/events/:eventId","/sports/icc","/sports/pga/events/:eventId","/sports/pga","/sports/dpworldtour/events/:eventId","/sports/dpworldtour","/sports/wnba/events/:eventId","/sports/wnba","/sports/ncaam/events/:eventId","/sports/ncaam","/sports/ncaaw/events/:eventId","/sports/ncaaw","/sports/cricket/events/:eventId","/sports","/discover/:topic/:slug","/discover/:topic","/discover","/spaces/templates","/spaces/:slug","/spaces","/hotels/:slug","/page/:slug","/b/mission-control","/b/try-assistant","/b/speak","/b/home","/b/zen","/perplexify_me","/academic","/shopping","/library","/travel",VC,"/"],mK="AW-11209402154",_rt="AW-11209402154/Oz8uCISC_PYZEKrOh-Ep",_he=A.memo(()=>{const{hasConsent:e}=Jre(),n=!!Ht()?.get(mc),[r,s]=f.useState(!1);return f.useEffect(()=>{if(!r&&e){const a=o=>{if(o.timeRemaining()>0||o.didTimeout){const i=document.createElement("script");i.src=`https://www.googletagmanager.com/gtag/js?id=${mK}`,i.async=!0,document.head.appendChild(i),i.onload=()=>{window.dataLayer=window.dataLayer||[];function c(...u){window.dataLayer.push(arguments)}c("js",new Date),c("config",mK),n&&c("event","conversion",{send_to:_rt}),s(!0)}}else window.requestIdleCallback(a)};"requestIdleCallback"in window?window.requestIdleCallback(a,{timeout:5e3}):a({timeRemaining:()=>1/0,didTimeout:!0})}},[e,n,r]),null});_he.displayName="GoogleTagManager";const wrt=1e3*60,Srt=A.memo(()=>(f.useEffect(()=>{uo("phone_home");const e=setInterval(()=>uo("phone_home"),wrt);return()=>clearInterval(e)},[]),null)),Crt=ge(async()=>{const{SidePDFViewer:e}=await oe(async()=>{const{SidePDFViewer:t}=await import("./SidePDFViewer-D-dUv50E.js");return{SidePDFViewer:t}},__vite__mapDeps([100,1,2,3,5,4]));return{default:e}}),Ert=f.createContext({openFile:()=>{},closeViewer:()=>{},doViewerAction:()=>{},isViewerOpen:!1,setViewerDispatch:()=>{}}),whe=A.memo(({children:e})=>{const[t,n]=f.useState(),[r,s]=f.useState(),a=f.useRef(void 0),o=f.useCallback(h=>{n(h)},[n]),i=f.useCallback(()=>{n(void 0),s(void 0),a.current=void 0},[n,s]),c=f.useRef([]),u=f.useCallback(h=>{a.current?a.current(h):c.current.push(h)},[]),d=f.useCallback(h=>{s(()=>h),a.current=h,c.current.length>0&&h&&(c.current.forEach(p=>h(p)),c.current=[])},[s]),m=f.useMemo(()=>({openFile:o,closeViewer:i,doViewerAction:u,isViewerOpen:!!r,setViewerDispatch:d}),[o,i,u,r,d]);return l.jsxs(Ert.Provider,{value:m,children:[e,l.jsx(st,{children:t&&l.jsx(Crt,{file:t})})]})});whe.displayName="FileViewerStateProvider";const Z9=f.createContext({container:null,setContainer:()=>{}}),She=A.memo(({children:e})=>{const[t,n]=f.useState(null),r=f.useMemo(()=>({container:t,setContainer:n}),[t,n]);return l.jsx(Z9.Provider,{value:r,children:e})});She.displayName="SearchSideContainerProvider";const Mrt=A.memo(({children:e})=>{const{container:t}=f.useContext(Z9);return t?Ss.createPortal(e,t):(ee.warn("SearchSideContainerContext is not configured"),null)});Mrt.displayName="SearchSideContent";const Che=f.createContext(null),Trt=({children:e})=>{const t=f.useRef(null),n=f.useRef(!1),r=Pt(),{isWindowsApp:s}=Wt(),[a,o]=f.useState(!1),i=!!(s&&r?.includes(Cv)),c=f.useCallback(async()=>{const p=await CP({ref:t.current});o(p);const g=()=>o(!0),y=()=>o(!1);return oy("show",g,{ref:t.current}),oy("hide",y,{ref:t.current}),()=>{try{t.current&&(EP("show",{ref:t.current}),EP("hide",{ref:t.current}))}catch(v){ee.warn("Error removing window listeners during cleanup",v)}}},[t]),u=f.useCallback(async()=>{if(n.current)return ee.info("Already creating window, skipping"),!1;if(t.current)try{return await CP({ref:t.current}),ee.info("Existing window is still valid, skipping creation"),!0}catch{ee.warn("Existing window reference is invalid, will create new window"),t.current=null}try{ee.info("Starting panel window creation"),n.current=!0;const p=await fKe({width:720,height:350,transparent:!0,show:!1,frame:!1,alwaysOnTop:!0,type:"panel"});if(!p)throw new Error("Failed to create window - no window reference returned");const g=await gKe({ref:p});if(!g)throw new Error("Failed to get web contents");const y=await _Ke({webPreferences:{nodeIntegration:!0,contextIsolation:!1}});if(!y)throw new Error("Failed to create view");await mKe({ref:p,viewRef:y});const v=new URL(Cv,window.location.origin).toString();await wKe({ref:g},v),t.current=p;const x=await c();if(x){const b=t.current;oy("close",x,{ref:b})}return oy("close",()=>{},{ref:p,preventDefault:!0}),!0}catch(p){return ee.error("Error creating panel window: ",p),t.current=null,!1}finally{n.current=!1}},[c]),d=f.useCallback(async()=>{try{if(!t.current)return ee.info("No panel window to hide"),!1;try{return await pKe({ref:t.current}),!0}catch(p){return ee.warn("Error hiding panel, window may be invalid",p),t.current=null,!1}}catch(p){return ee.warn("Error in hidePanel: ",p),!1}},[]),m=f.useCallback(async()=>{try{if(t.current){if(a){ee.info("Panel window is already visible, skipping centering");return}}else if(!await u())return;const p=await xKe(),g=(await bKe(p)).bounds,[y,v]=await hKe({ref:t.current});await yKe({ref:t.current},Math.round(g.x+(g.width-y)/2),Math.round(g.y+g.height*.3)),await b9({ref:t.current}),await x9({ref:t.current})}catch(p){ee.warn("Error showing panel: ",p)}},[u,a]),h={isVisible:a,isWindowsAppPanelView:i,handleShowPanel:m,hidePanel:d,createPanelWindow:u};return l.jsx(Che.Provider,{value:h,children:e})},bf=()=>{const e=f.useContext(Che);if(!e)throw new Error("useWindowsAppPanel must be used within a WindowsAppPanelProvider");return e};var hK={};const krt="pplx.hasUpdated",Nrt=Math.random()*1e3*60*30,Art=0,Prt=1e3*60*30,Rrt=1e3*60,pK=1e3*60*60,gK=1e3*30,Ehe=A.memo(({version:e})=>{const n=Ot()?.user?.email?.endsWith("@perplexity.ai"),r=f.useRef(e),{openToast:s}=On(),{isWindowsAppPanelView:a}=bf(),{inApp:o}=ep(),{$t:i}=X(),c=tn(),[u,d]=D9(krt,!1),m=f.useRef(!1),h=rde(),p=f.useRef(Date.now());r.current=e;const g=n?Art:Nrt,y=n?Rrt:Prt,v=f.useCallback(async()=>{try{if(!m.current){const S=await phe();uo("idle_refresh_check_version",{isCometSidecarClient:!!hK.NEXT_PUBLIC_IS_SIDECAR_BUILD,currentVersion:r.current,latestVersion:S}),m.current=!!(r.current&&S&&r.current!==S)}if(document.hidden||h()||Date.now()-p.current<gK)return;m.current&&(!c&&d(!0),await EC(),uo("idle_refresh"),IS("Idle refresh"))}catch{ee.log("Error getting build version")}},[c,d,h]),x=f.useMemo(()=>ks(v,g,{maxWait:pK,leading:!1,trailing:!0}),[v,g]),b=f.useCallback(()=>{m.current?v():x()},[v,x]),_=f.useMemo(()=>ks(b,gK,{maxWait:pK,leading:!1,trailing:!0}),[b]),w=f.useCallback(()=>{p.current=Date.now(),_()},[_]);return f.useEffect(()=>{u&&!a&&!o&&(d(!1),s(i({defaultMessage:"Updated to latest version",id:"5SFf7ytcaw"}),"success",4))},[]),f.useEffect(()=>{const S=hK.NEXT_PUBLIC_IS_SIDECAR_BUILD?setInterval(b,y):null;return document.addEventListener("visibilitychange",w),window.addEventListener("focus",w),window.addEventListener("keydown",w),window.addEventListener("mousedown",w),()=>{S&&clearInterval(S),document.removeEventListener("visibilitychange",w),window.removeEventListener("focus",w),window.removeEventListener("keydown",w),window.removeEventListener("mousedown",w)}},[b,y,w]),null});Ehe.displayName="IdleRefresh";const Irt=e=>e?.includes("Chrome")??!1,Mhe=e=>(e?.includes("Mobile")&&!e?.includes("iPad"))??!1,jrt=e=>e?.includes("Android")??!1,Ort=e=>(e?.includes("iPhone")||e?.includes("iPad"))??!1,The=e=>(e?.includes("Macintosh")||e?.includes("iPad"))??!1,Lrt=e=>e?.includes("Mobile Safari")??!1,Drt=e=>e?.includes("Firefox")??!1,r1=e=>e?.includes("WindowsApp")??!1,Frt=e=>e?.includes("Windows")??!1,Urt=e=>e?.includes("FBAN")||e?.includes("FBAV")||e?.includes("Instagram"),Brt=e=>e?.includes("SamsungBrowser")??!1,khe=A.memo(function(){const t=Ot(),n=f.useMemo(()=>{if(t)return{id:t.user.id,name:t.user.name,email:t.user.email,isPro:!!t.user.subscription_status&&t.user.subscription_status!=="none"}},[t]);if(!n)return null;const r=r1(globalThis.navigator?.userAgent??"");return l.jsxs(l.Fragment,{children:[l.jsx(K3e,{session:n,isWindowsApp:r}),l.jsx(Y3e,{session:n,isWindowsApp:r})]})});khe.displayName="Instrumentation";async function Vrt(){const e=await fetch("https://pplx-next-static-public.perplexity.ai/version/min-version.json",{method:"GET",headers:{"Content-Type":"application/json"}}),{minVersion:t,jitter:n}=await e.json();return{minVersion:t,jitter:n}}var $rt={};const yK=30,Wrt=0,Hrt=1e3*60*60,JT=1e3*30,zrt="pplx.hasUpdated",Nhe=A.memo(({minVersion:e})=>{const n=Ot()?.user?.email?.endsWith("@perplexity.ai"),r=f.useRef(e),s=f.useRef(0),a=f.useRef(!1),{openToast:o}=On(),{isWindowsAppPanelView:i}=bf(),{inApp:c}=ep(),{$t:u}=X(),d=tn(),[m,h]=D9(zrt,!1),p=rde(),{isLocalhost:g}=pc(),y=f.useRef(Date.now()),v=f.useRef(null);r.current=e;const x=f.useCallback(async()=>{try{if(g)return;if(!a.current){const{minVersion:w,jitter:S}=await Vrt();if(uo("min_version_refresh_check_version",{isCometSidecarClient:!!$rt.NEXT_PUBLIC_IS_SIDECAR_BUILD,currentVersion:r.current,latestVersion:w}),s.current=n?Wrt:Math.max(S||yK,yK),!r.current&&w){r.current=w;return}a.current=!!(w&&r.current&&w>r.current)}if(document.hidden||p()||Date.now()-y.current<JT)return;a.current&&!v.current&&(v.current=setTimeout(async()=>{if(v.current=null,document.hidden||p()||Date.now()-y.current<JT){s.current=0;return}!d&&h(!0),await EC(),uo("min_version_refresh"),IS("Min version refresh")},Math.random()*s.current*1e3*60))}catch{ee.log("Error getting min version")}},[g,p,d,h,n]);f.useEffect(()=>{m&&!i&&!c&&(h(!1),o(u({defaultMessage:"Updated to latest version",id:"5SFf7ytcaw"}),"success",4))},[]);const b=f.useMemo(()=>ks(x,JT,{maxWait:Hrt,leading:!1,trailing:!0}),[x]),_=f.useCallback(()=>{y.current=Date.now(),b()},[b]);return f.useEffect(()=>(document.addEventListener("visibilitychange",_),window.addEventListener("focus",_),window.addEventListener("keydown",_),window.addEventListener("mousedown",_),()=>{document.removeEventListener("visibilitychange",_),window.removeEventListener("focus",_),window.removeEventListener("keydown",_),window.removeEventListener("mousedown",_)}),[_]),null});Nhe.displayName="MinVersionRefresh";var Grt={};const Ahe=A.memo(function(){return f.useEffect(()=>{if(Grt.NEXT_PUBLIC_SW_ENABLED_LOCAL){GG();return}const t=Ys();t.env&&t.env!=="local"?GG():AKe()},[]),null});Ahe.displayName="ServiceWorker";var qrt={};const gi=e=>{try{return JSON.parse(e)}catch{return{}}};function Krt({reason:e}){const t=tn(),n=hr(),r=f.useCallback(async(s,a)=>{if(ee.info("browserStep",s),s.browser_open_tab_content){const o=s.browser_open_tab_content,i=gi(o.extra_headers);ee.info("browserTool: browser_open_tab",{tool:o},{request_id:i[yr]}),await A9e({url:o.url,cometBrowser:n,stepUuid:s.uuid,extraHeaders:gi(o.extra_headers),reason:e})}else if(s.search_browser_content){const o=s.search_browser_content,i=gi(o.extra_headers);ee.info("browserTool: search_browser",{tool:o},{request_id:i[yr]}),await j9e(o,n,s.uuid,i,e)}else if(s.browser_close_tabs_content){const o=s.browser_close_tabs_content,i=o.payload,c=gi(o.extra_headers);ee.info("browserTool: browser_close_tabs",{tool:o},{request_id:c[yr]}),await I9e(i,n,s.uuid,c,e)}else if(s.browser_group_tabs_content){const o=s.browser_group_tabs_content,i=o.payloads,c=gi(o.extra_headers);ee.info("browserTool: browser_group_tabs",{tool:o},{request_id:c[yr]}),await R9e(i,n,s.uuid,c,e)}else if(s.entropy_request_content){const o=s.entropy_request_content,i=o.extra_headers;ee.info("browserTool: entropy_request",{tool:o},{request_id:gi(i)[yr]}),o.tasks.forEach(c=>n.submitTask({action:"startAgentFromPerplexity",extra_headers:i,base_url:o.base_url,entryId:a,...c,use_current_page:c.use_current_page&&!!qrt.NEXT_PUBLIC_IS_SIDECAR_BUILD,capture_screenshot:!c.use_current_page}))}else if(s.get_url_content_content){const o=s.get_url_content_content,i=gi(o.extra_headers);if(ee.info("browserTool: get_url_content",{tool:o},{request_id:i[yr]}),!t)return;const c={...o,key:s.uuid,request_id:i[yr],pages:[...o.pages||[]]},u=n.GetContent(c);await Gc(u,s.uuid,{request_id:i[yr]},e)}else if(s.browser_ungroup_content?.payload){const o=s.browser_ungroup_content,i=gi(o.extra_headers),c={groupIds:o.payload.group_ids,tabIds:o.payload.tab_ids},u=n.ungroupTabs(c,s.uuid,i[yr]).then(d=>{if(!d.is_success)throw d;return{group_ids:d.groupIds,tab_ids:d.tabIds}});await Gc(u,s.uuid,{request_id:i[yr]},e)}else if(s.browser_search_tab_groups_content){const o=s.browser_search_tab_groups_content,i=gi(o.extra_headers),c=n.searchTabGroups(o.payload,s.uuid,i[yr]).then(u=>{if(!u.is_success)throw u;return{results:u.results.map(d=>({...d,color:hle(d.color)}))}});await Gc(c,s.uuid,{request_id:i[yr]},e)}else if(s.browser_get_visible_tab_screenshot_content){const o=s.browser_get_visible_tab_screenshot_content,i=gi(o.extra_headers),c=n.GetVisibleTabScreenshot({key:s.uuid,request_id:i[yr],...o}).then(async u=>{const m=await(await fetch(u.data_url)).blob(),h=new File([m],"screenshot."+(o.format??"png"),{type:m.type}),p=await M9({file:h,forceImage:!0,reason:e,fileSource:"entropy"});if(!p||!p?.fields||!p.s3_bucket_url)throw new Error("Failed to create upload URL");const g=new FormData;Object.entries(p.fields).forEach(([x,b])=>{g.append(x,b)}),g.append("file",h);const y=await fetch(p.s3_bucket_url,{method:"POST",body:g});if(!y.ok)throw new Error(`Failed to upload screenshot: ${y.statusText}`);const v=await y.json();if(!v.secure_url)throw ee.error("[GetVisibleTabScreenshot] Upload did not return a secure URL",{response:v}),new Error("Upload did not return a secure URL");return{screenshot_url:v.secure_url}});await Gc(c,s.uuid,{request_id:i[yr]},e)}else ee.error("[useExecuteBrowserTool] Unknown browser tool step",{browserStep:s},{reason:e,backend_uuid:a})},[n,t,e]);return f.useMemo(()=>({executeBrowserTool:r}),[r])}const Phe=A.memo(function(){const{executeBrowserTool:t}=Krt({reason:"StreamMiddlewares"}),n=f.useCallback(s=>{if(!s||!s.browser_tool)return s;t(s.browser_tool,s.backend_uuid)},[t]),r=f.useMemo(()=>[n],[n]);return l.jsx(nde,{middlewares:r})});Phe.displayName="StreamMiddlewares";const $C=({reason:e})=>{const{connectors:t}=js({reason:e}),n=f.useMemo(()=>(t?.connectors??[]).reduce((r,s)=>(r[s.name]=s,r),{}),[t]);return f.useMemo(()=>({connectorsMap:n}),[n])},Rhe=({reason:e})=>{const{connectors:t}=js({reason:e}),{connectorsMap:n}=$C({reason:e}),r=f.useMemo(()=>(t?.connectors??[]).filter(a=>(a.name==="google_drive"||a.name==="onedrive"||a.name==="sharepoint"||a.name==="dropbox"||a.name==="box")&&n[a.name]&&!n[a.name].connected),[n,t]),s=f.useMemo(()=>(t?.connectors??[]).filter(a=>n[a.name]&&!n[a.name].connected),[n,t]);return f.useMemo(()=>({disabledFileConnectors:r,disabledConnectors:s}),[s,r])},J9=({reason:e})=>{const{connectors:t}=js({reason:e}),{connectorsMap:n}=$C({reason:e}),r=f.useMemo(()=>(t?.connectors??[]).filter(o=>q$.includes(o.name)&&n[o.name]&&n[o.name].connected),[n,t]),s=f.useMemo(()=>(t?.connectors??[]).filter(o=>!q$.includes(o.name)&&n[o.name]&&n[o.name].connected),[n,t]),a=f.useMemo(()=>(t?.connectors??[]).filter(o=>n[o.name]&&n[o.name].connected),[n,t]);return f.useMemo(()=>({enabledFileConnectors:r,enabledNonFileConnectors:s,enabledConnectors:a}),[a,r,s])},Yrt=({reason:e})=>{const t=J9({reason:e}),n=Rhe({reason:e});return f.useMemo(()=>{const r=iB([...t.enabledConnectors,...t.enabledFileConnectors,...t.enabledNonFileConnectors].map(a=>a.name)),s=iB([...n.disabledConnectors,...n.disabledFileConnectors].map(a=>a.name));return{enabled:r,disabled:s}},[t,n])},Qrt=({fileRepoInfo:e,reason:t})=>{const{$t:n}=X(),r=gt(),s=["list_file_directory",e.file_repository_type,e.owner_id],{openToast:a}=On(),i=Ot()?.user?.email??"",c=Mt({mutationFn:async u=>{if(!u.nextURL)throw new Error("File must have a url");const d=await ne.POST("/rest/file-repository/move-attachment-to-persistent-file-path",t,{body:{file_repository_info:e,file_url:u.nextURL},timeoutMs:nn.MEDIUM,retries:2}),m=d.data;if(m&&await i9({request:{file_repository_info:e,file_index_params:[{file_s3_url:m.file_url_params.s3_object_url,file_size:u.file.size,filename:u.file.name,file_uuid:m.file_url_params.file_uuid,replace_existing:!1}]},reason:t}),!d.response.ok||!d.data)throw new Error("Failed to save file persistently");return d.data},onSuccess:(u,d)=>{const m={name:d.file.name,file_s3_url:u.file_url_params.s3_object_url,file_uuid:u.file_url_params.file_uuid,file_title:d.file.name,file_description:null,uploadedBy:i,date:new Date().toLocaleString(),state:"COMPLETE",size:d.file.size,isOptimistic:!0};r.setQueriesData({queryKey:s},p=>{if(!p)return p;const g=p.completedFiles||[];return{...p,completedFiles:[...g,m]}});const h=DO(e.owner_id,d.file.name);r.invalidateQueries({queryKey:h}),a(n({defaultMessage:"Saved file",id:"2HZW5WnkV3"}),"success",3)},onError:(u,d)=>{a(n({defaultMessage:"Failed to upload file",id:"x2gE8tKhMn"}),"error",3),ee.error("Error saving file with name",d.file.name,u)},onSettled:async()=>{await r.invalidateQueries({queryKey:s})}});return f.useMemo(()=>({saveFile:c.mutate,isLoading:c.isPending}),[c.isPending,c.mutate])},e7=({fileRepoInfo:e,fileName:t,reason:n})=>{const r=Ot();return Ke({queryKey:DO(e.owner_id,t),refetchOnMount:!0,queryFn:async()=>((await wP({request:{fileRepositoryInfo:e,limit:ro,offset:0,searchTerm:t,fileStates:["COMPLETE"],email:r?.user?.email??""},reason:n}))?.files.length??0)>0,enabled:e.file_repository_type==="COLLECTION"&&!!e.owner_id&&t.length>0})},Ihe=({fileRepoInfo:e,fileExists:t,reason:n})=>{const{openToast:r}=On(),s=Ot(),a=f.useMemo(()=>s?.user?.email??"",[s]),o=gt(),{mutate:i}=zde({fileRepoInfo:e,setTotalFilesUploading:()=>1,replaceExisting:t,reason:n}),{mutateAsync:c}=$de({fileRepositoryType:e.file_repository_type,offset:0,searchTerm:"",ownerId:e.owner_id,reason:n}),u=f.useCallback(async(m,h)=>{try{if(!m||!h)return;const p=await Aue({thread_uuid:m,format:"md",filename:h,reason:n}),g=atob(p.file_content_64),y=new Array(g.length);for(let _=0;_<g.length;_++)y[_]=g.charCodeAt(_);const v=new Uint8Array(y),x=new Blob([v],{type:"application/md"}),b=new File([x],p.filename,{type:"application/md"});await i([b]),o.setQueryData(["file_exists",e.owner_id,h],!0),t||r("Successfully saved to space","success",3)}catch(p){r(`Failed to save to space: ${p}`,"error",3)}},[i,r,t,e,o,n]),d=f.useCallback(async m=>{try{const p=(await k2({fileRepositoryType:e.file_repository_type,limit:10,offset:0,searchTerm:"",email:a,ownerId:e.owner_id,reason:n}))?.completedFiles.find(g=>g.name.includes(m??""));if(!p?.file_uuid)return;await c([p.file_uuid]),o.setQueryData(["file_exists",e.owner_id,m],!1),r("File removed from space","success",3)}catch(h){r(`Failed to remove from space: ${h}`,"error",3)}},[c,r,o,e.owner_id,a,n,e.file_repository_type]);return f.useMemo(()=>({saveThreadToSpace:u,removeThreadFromSpace:d}),[d,u])},jhe=({windowsAppOnly:e=!0}={})=>{const[t,n]=f.useState(()=>globalThis.Notification?globalThis.Notification.permission:"denied"),{isWindowsApp:r}=Wt();f.useEffect(()=>{globalThis.Notification&&globalThis.Notification.permission!==t&&n(globalThis.Notification.permission)},[t]);const s=f.useCallback(async()=>{if(globalThis.Notification){if(t==="granted")return!0;if(t==="denied")return!1;const o=await globalThis.Notification.requestPermission();return n(o),o==="granted"}return!1},[t]),a=f.useCallback(async({title:o,body:i,icon:c="https://r2cdn.perplexity.ai/pplx-desktop-icon.png",onClick:u})=>{if(!(e&&!r||!await s())&&globalThis.Notification){const m=new globalThis.Notification(o,{body:i,icon:c});u&&(m.onclick=()=>{u(),window.focus()})}},[e,r,s]);return f.useMemo(()=>({sendNotification:a,requestPermission:s,permission:t,isWindowsApp:r}),[r,t,s,a])},y_="v1",v_="last_results",WC=e=>({backend_uuid:t,thread_url_slug:n})=>t===e||n===e,HC=()=>{const e=Ve.getItem(v_);let t={version:y_,results:ce};try{e&&(t=JSON.parse(e),t.version!==y_&&(Ve.removeItem(v_),t={version:y_,results:[]}))}catch{Ve.removeItem(v_)}return t.results},Uv=e=>Ve.setItem(v_,JSON.stringify({version:y_,results:e})),Ohe=e=>{const t=WC(e.backend_uuid),r=HC().slice(-49).filter(s=>!t(s));r.push(e),Uv(r)||Uv([e])},t7=lP,Lhe=t7*10,Xrt=Lhe*10+t7,Bv="all_results",Zrt=({slugOrUUID:e,enabled:t,reason:n})=>{const r=gt(),s=f.useCallback(async(a,o)=>{const i=await x7e({slugOrUUID:a,options:{withParentInfo:!0,supportedBlockUseCases:[...oie],limit:o?Lhe:t7,fromFirst:!0,cursor:o},numRetries:hc,reason:n});if(!i?.entries?.length||i.status!=="success")return[];const c=[Bv,a];r.setQueryData(c,d=>{const m=i.entries,h=new Set(d?.map(g=>g.backend_uuid)),p=m.filter(g=>!h?.has(g.backend_uuid));return[...d??[],...p]});const u=r.getQueryData(c)??[];return i.next_cursor&&u.length<Xrt&&s(a,i.next_cursor),u},[n,r]);return Ke({queryKey:[Bv,e],enabled:!!e&&t,retry:!1,queryFn:async({queryKey:a})=>await s(a[1])})},Jrt=()=>{const e=gt();return f.useCallback(t=>{if(!t.length)return;const n=t[0],r=n.thread_url_slug??n.backend_uuid;Ohe(n),e.setQueryData([Bv,r],t)},[e])},est=()=>{const e=gt();return f.useCallback(t=>{if(t){const n=WC(t),r=HC();if(r.find(n)){const s=r.filter(a=>!n(a));Uv(s)}e.removeQueries({queryKey:[Bv,t],exact:!0})}else Uv(ce),e.removeQueries({queryKey:[Bv]})},[e])};function tst({reason:e}){const{setIsCopilot:t,gpt4Limit:n,setGPT4Limit:r,pplxAlphaLimit:s,setPplxAlphaLimit:a,pplxBetaLimit:o,setPplxBetaLimit:i,setAskInputReasoningMode:c}=Sn(),{trackEvent:u}=Te(),d=f.useCallback(async()=>{try{const h=(await ne.GET("/rest/rate-limit/all",e)).data;if(!h)throw new Error("No data returned from rate limit check");const p=h.remaining_pro??0,g=h.remaining_research??0,y=h.remaining_labs??0;n>0&&h.remaining_pro!==null&&p<=0&&u("pro rate limit reached",{}),s>0&&h.remaining_research!==null&&g<=0&&u("pplx alpha rate limit reached",{}),o>0&&h.remaining_labs!==null&&y<=0&&u("pplx beta rate limit reached",{}),r(p),a(g),i(y),p<=0&&(c(!1),t(!1))}catch(m){ee.error("Failed to check rate limit",m)}},[n,r,s,a,o,i,c,t,u,e]);return f.useCallback(()=>{d()},[d])}const nst=async({query:e,language:t,queryClient:n,reason:r})=>{try{const o=(await(await Q3e({resource:"https://suggest.perplexity.ai/search/v2/navigate",method:"POST",options:{headers:{"content-type":"application/json","X-Client-Name":"agi_ui_navigate_v2","X-Client-Env":"production"}},body:JSON.stringify({query:e,user_identity:{lang:t}}),timeoutMs:1e3,reason:r})).json())?.hit;o&&n.setQueryData(["navigationResults",e],o)}catch(s){ee.error("Failed to fetch navigational search results:",s)}},rst=25,sst=()=>{const e=gt();return f.useCallback(({query:t,params:n,reason:r})=>{const s=t.length<=rst,a=n.mode==="copilot",o=!!n.last_backend_uuid,i=n.attachments,c=n.sources,u=n.model_preference==="pplx_study";s&&!a&&!o&&i.length===0&&c&&c.length>0&&!u&&nst({query:t,language:n.language,queryClient:e,reason:r})},[e])};function ast({lastResponse:e,backend_uuid:t,trackEvent:n,notificationText:r,sendNotification:s,cometAdapter:a}){if(!t)return ee.error(new Error("No backend_uuid found in response")),!1;if(!e)return ee.error(new Error("No last response found in query client")),!1;(xr(e.display_model)===ae.RESEARCH||xr(e.display_model)===ae.STUDIO)&&r&&s&&document.visibilityState!=="visible"&&s({title:r,body:e.query_str,onClick:()=>{window.focus()}}),e.blocks.filter(i=>i.intended_usage?.endsWith("_markdown")).forEach(i=>{i.markdown_block?.media_items&&n&&i.markdown_block?.media_items.forEach(c=>{n("inline image rendered",{image_url:c.image,entryUUID:t})})});const o=e.blocks.find(i=>i.intended_usage==="knowledge_cards")?.knowledge_card_block?.knowledge_cards?.[0];return o&&n&&n("knowledge card in results",{entryUUID:t,name:o.title,id:o.id,type:o.card_type}),a?.setTabProgress(!1),a?.showNotification(),!0}const n7="pplx.activeQuery";function Dhe(){const e=Ts.getItem(n7);if(!e)return{};try{return JSON.parse(e)}catch{return{}}}function ost(e){Ts.setItem(n7,JSON.stringify(e))}function ist(){Ts.removeItem(n7)}const{Provider:lst,useSelector:jp}=bp("QueryInputState",()=>yo(e=>({userInput:"",userInputJson:void 0,hasStartedTyping:!1,shouldTriggerFocus:!1,actions:{restoreInput:()=>{const t=Dhe();t.rawQuery&&e({userInput:t.rawQuery,userInputJson:t.rawQueryJson})},setUserInput:(t,n)=>{e({userInput:t,userInputJson:n}),ost({rawQuery:t,rawQueryJson:n})},setHasStartedTyping:t=>e({hasStartedTyping:t}),setStartTypingTime:t=>e({startTypingTime:t}),resetInput:()=>{e({userInput:"",userInputJson:void 0}),ist()},markInputAsSubmitted:()=>{e({userInput:"",userInputJson:void 0,startTypingTime:void 0})},setShouldTriggerFocus:t=>{e({shouldTriggerFocus:t})}}}))),Fhe=A.memo(()=>{const{setUserInput:e,resetInput:t}=s1(),n=Pt(),r=_p(n);return f.useLayoutEffect(()=>{const s=Dhe();s.rawQuery&&e(s.rawQuery,s.rawQueryJson)},[e]),f.useLayoutEffect(()=>{!r||r===n||r==="/"&&n?.startsWith("/search/new")||r.startsWith("/search/new")&&n?.startsWith("/search")||t()},[n,r,t]),null});Fhe.displayName="QueryInputSideEffects";const r7=()=>jp(e=>e.userInput),cst=()=>jp(e=>e.userInputJson),Uhe=()=>jp(e=>e.hasStartedTyping),ust=()=>jp(e=>e.startTypingTime),dst=()=>jp(e=>e.shouldTriggerFocus),s1=()=>jp(e=>e.actions);class Bhe extends T0{name="PplxStreamError"}const Vhe=A.memo(function(){const t="stream-side-effects",n=At(),r=tn(),s=Ot(),{trackEvent:a}=Te(),{$t:o}=X(),i=r1(globalThis.navigator?.userAgent),{sendNotification:c}=jhe({windowsAppOnly:!1}),u=Lme(),d=sst(),{addKeyRequiringRerender:m}=xf(),h=Ys(),p=hr(),g=fle(),{fileRepoInfo:y}=Au({reason:t}),{firstResult:{thread_url_slug:v}={}}=zt(),{data:x}=e7({fileRepoInfo:y,fileName:v??"",reason:t}),{saveThreadToSpace:b}=Ihe({fileRepoInfo:y,fileExists:x??!0,reason:t}),_=Jrt(),{resetInput:w,restoreInput:S}=s1(),C=r7(),E=f.useRef(C);E.current=C;const M=Yrt({reason:t}),T=gt(),I=tst({reason:t}),{updateLocalStatePostStream:j}=Ta();return f.useLayoutEffect(()=>Br.on("created",async({stream:N,query:P,params:R})=>{if(N.isReconnect||!P||!R)return;const k=oi(),O=i?Am:h.erp??void 0;G8e(N.id,{name:"perplexity_ask",queryStr:P,queryParams:R,isFollowup:hP(R)&&(R.query_source==="followup"||R.query_source==="followup-sidecar"),isPerplexityBrowser:r,frontendUUID:R.frontend_uuid??"",session:s,browserVersion:k?.browser_version,source:O,connectors:M,mentions:"mentions"in R?R.mentions:[]}),p?.setTabProgress(!0),g&&p.sendThreadStatusToMobile({status:"working",streamId:N.id.description})}),[r,i,s,M,h.erp,p,g]),f.useLayoutEffect(()=>Br.on("progress",({stream:N,message:P})=>{const{blocks:R,status:k}=P,O=R?.some(U=>!!U?.markdown_block?.chunks?.length),L=R?.some(U=>!!U?.web_result_block?.web_results?.length),F=R?.some(U=>!!U?.sources_mode_block?.rows?.length);if(O&&N.timer.addTimingOnce("web.frontend.first_llm_token_seen"),L&&N.timer.addTimingOnce("web.frontend.first_search_results_seen"),F&&N.timer.addTimingOnce("web.frontend.first_sources_seen"),P.telemetry_data){const{has_displayed_search_results:U,has_first_output_token:V,has_first_token:W,has_widget_data:H,country:G,is_followup:K,source:$,engine_mode:q,search_implementation_mode:Z,has_useful_renderable_content:se}=P.telemetry_data,Y={country:G,is_followup:K,source:$,engine_mode:q,search_implementation_mode:Z};U&&N.timer.addTimingOnce("web.frontend.first_search_results_latency_ms",Y),V&&N.timer.addTimingOnce("web.frontend.first_output_token_latency_ms",Y),W&&N.timer.addTimingOnce("web.frontend.first_token_latency_ms",Y),H&&N.timer.addTimingOnce("web.frontend.first_widget_data_latency_ms",Y),se&&N.timer.addTimingOnce("web.frontend.first_useful_renderable_content_latency_ms",Y)}D8e(N.id,{hasLLMToken:O,hasSearchResults:L,hasSources:F},s??void 0),k===dr.FAILED&&ee.error(new Bhe("STREAM_FAILED_CHUNK_ERROR"),{message:P})}),[s]),f.useLayoutEffect(()=>Br.on("progress",({stream:N,isFirstMessage:P})=>{P&&N.placeholderChunk&&N.placeholderChunk.query_source&&!E.current&&w()}),[w]),f.useLayoutEffect(()=>Br.on("completed",({stream:N})=>{const P=Ys(),R=i?Am:P.erp??void 0;Y$(N.id,{name:"SUCCESSFUL response",session:s,source:R})}),[s,i]),f.useLayoutEffect(()=>Br.on("completed",({stream:N,thread:P})=>{if(!N.threadId||!N.entryId)return;_(P);const R=P?.find(O=>O?.uuid===N.id.description||O?.backend_uuid===N.entryId);let k;xr(R?.display_model)===ae.RESEARCH?k=o({defaultMessage:"Your report is ready",id:"CEIDgftq5U"}):xr(R?.display_model)===ae.STUDIO&&(k=o({defaultMessage:"Your project is ready",id:"UXOU5ST+Nc"})),ast({lastResponse:R,backend_uuid:N.entryId,trackEvent:a,sendNotification:c,notificationText:k,cometAdapter:p})}),[o,a,c,_,p]),f.useLayoutEffect(()=>Br.on("completed",async({stream:N})=>{!v||!N.entryId||x&&await b(N.entryId,v)}),[x,b,v]),f.useLayoutEffect(()=>{const N=({stream:k})=>{const{id:O}=k,L=Ys(),F=i?Am:L.erp??void 0,W=new URL(window.location.href).pathname.replace("/search/new/","");Y$(O,{name:"FAILED response",session:s,source:F}),W===O.description&&(S(),n.replace(`/?error=${Pd.ThreadStreamError}`,"StreamSideEffects")),p?.setTabProgress(!1)},P=Br.on("error",N),R=Br.on("aborted",N);return()=>{P(),R()}},[s,i,S,n,p]),f.useLayoutEffect(()=>Br.on("created",({query:N,params:P,stream:{isReconnect:R,id:k}})=>{if(!(!N||!P||R||!hP(P))){if(r){u(N,{model_preference:P.model_preference,last_backend_uuid:"last_backend_uuid"in P?P.last_backend_uuid:void 0,sources:P.sources,override_no_search:P.override_no_search},k.description);return}d({query:N,params:P,reason:"streamEvents.on(created)"})}}),[u,d,r]),f.useEffect(()=>{const N=[Br.on("completed",({stream:P})=>{p.cleanupTasks(P.entryId),g&&p.sendThreadStatusToMobile({status:"ready",streamId:P.id.description})}),Br.on("aborted",({stream:P})=>{p.cleanupTasks(P.entryId),g&&p.sendThreadStatusToMobile({status:"ready",streamId:P.id.description})}),Br.on("error",({stream:P})=>{p.cleanupTasks(P.entryId),g&&p.sendThreadStatusToMobile({status:"error",streamId:P.id.description})})];return()=>{N.forEach(P=>P())}},[p,g]),f.useEffect(()=>Br.on("completed",async({message:N,thread:P})=>{if(!N||(j(N),N.collection_info?.slug&&T.invalidateQueries({queryKey:[Ol,{collection_slug:N.collection_info.slug.slice(-22)}]}),I(),ttt(N.thread_url_slug)))return;const R=!!N.parent_info,k=P.findIndex(O=>O.uuid===N.uuid)>0;(R||!k)&&(m("floating-signup"),T.invalidateQueries({queryKey:[Yd],refetchType:"all"}))}),[T,i,m,I,j]),null});Vhe.displayName="StreamSideEffects";const fst={pendingClarifications:[],addClarification:()=>{},clearClarifications:()=>{}},$he=f.createContext(fst),mst=({children:e})=>{const[t,n]=f.useState([]),r=f.useCallback(o=>{n(t.concat([o]))},[t]),s=f.useCallback(()=>{n([])},[]),a={pendingClarifications:t,clearClarifications:s,addClarification:r};return l.jsx($he.Provider,{value:a,children:e})},Whe=()=>{const e=f.useContext($he);if(!e)throw new Error("useDeepResearchState must be used within DeepResearchContext");return e};class ek{static cancelOneTap(t=!1){if(typeof window>"u"||!window)return!0;const n=window.location.pathname;return!![{match:"/",condition:()=>t},{match:"/welcome",condition:()=>t},{match:"/search/new"},{match:"/join/",startsWith:!0},{match:"/onboarding",startsWith:!0},{match:"/search/render",startsWith:!0},{match:"/auth/windows-app",startsWith:!0},{match:"/auth/sso",startsWith:!0},{match:"/auth/error",startsWith:!0}].some(({match:s,startsWith:a,condition:o})=>(a?n.startsWith(s):n===s)&&(!o||o()))}static getLoginSource(){if(!window)return Be.GOOGLE_ONETAP_UNKNOWN;const t=window.location.pathname;return t?t==="/"?Be.GOOGLE_ONETAP_HOME:t.startsWith("/search/")?Be.GOOGLE_ONETAP_THREAD:t.startsWith("/page/")?Be.GOOGLE_ONETAP_PAGE:t.startsWith("/discover")?Be.GOOGLE_ONETAP_DISCOVER:Be.GOOGLE_ONETAP_UNKNOWN:Be.GOOGLE_ONETAP_UNKNOWN}}const vK=500,hst=4,Hhe=f.createContext({promptSkipped:!1});function pst(e){const{children:t}=e,n=f.useRef(0),r=f.useRef(!1),[s,a]=f.useState(!1),o=Je(),i=Uhe(),{isMobileUserAgent:c}=Ce(),d=Ys().erp,m=f.useCallback(async h=>{if(!h||ek.cancelOneTap(i))return;const p=ek.getLoginSource(),g=typeof window<"u"?new URL(window.location.href):new URL("/","https://www.perplexity.ai"),y=new URLSearchParams({[mc]:p});g.search=y.toString();const v={credential:h.credential,callbackUrl:g.toString()};await iy("googleonetap",v)},[i]);return f.useEffect(()=>{if(typeof window>"u"||o||c||["new_tab","sidecar"].includes(d??""))return;function h(){if(!r.current&&(n.current+=1,!(n.current>hst))){if(!window.google?.accounts?.id){setTimeout(h,vK);return}r.current=!0,!ek.cancelOneTap(i)&&(window.google.accounts.id.initialize({client_id:"60244564555-30175ip7vg79fobh0rk1sur3pdutj9l1.apps.googleusercontent.com",callback:m,auto_select:!0,use_fedcm_for_prompt:!0}),tn()?a(!0):window.google.accounts.id.prompt(g=>{a(g.isSkippedMoment())}))}}const p=setTimeout(h,vK);return()=>{clearTimeout(p)}},[m,i,c,o,d]),l.jsx(Hhe.Provider,{value:{promptSkipped:s},children:t})}function gst(){return f.useContext(Hhe)}const{Provider:yst,useSelector:vst,useTrackedState:xst}=bp("LocalPropsProvider",()=>yo(e=>({tasksModeFocusStepUUID:void 0,actions:{setTasksModeFocusStepUUID:t=>{e({tasksModeFocusStepUUID:t})}}}))),DVt=()=>vst(e=>e.actions),FVt=xst,bst=({serverName:e,size:t="md",border:n=!1})=>l.jsxs("span",{className:B("p-sm flex flex-col items-center justify-center font-medium leading-none",t==="sm"&&"size-5 text-xs",t==="md"&&"size-11 text-sm",t==="lg"&&"size-14 text-sm",n&&"border-subtlest bg-offsetPlus dark:bg-base rounded-lg border"),children:[l.jsx("span",{children:e.slice(0,2).toUpperCase()}),l.jsx("span",{className:"font-mono text-[6px]",children:"MCP"})]}),_st=({reason:e})=>{const{connectors:t}=js({reason:e});return f.useMemo(()=>{const n=new Set(t?.connectors?.map(r=>r.name)??[]);return{hasLinearAlt:n.has("linear_alt"),hasNotionMcp:n.has("notion_mcp"),hasSlack:n.has("slack")}},[t])};var zhe=(e=>(e.MY_FILES="my-files",e.SOURCES="sources",e.MY_CONNECTORS="my-connectors",e.SPACES="spaces",e))(zhe||{});function wst({reason:e,feature:t}){const{isEnterprise:n}=pn({reason:e}),{hasAccessToProFeatures:r}=Nt(),{value:s}=Yr({flag:"connectors-space-access-for-pro",defaultValue:!1});return n?!0:r?t==="my-files"?!1:t==="spaces"?s:!0:!1}const En="/account",nd="/org",Ghe=()=>l.jsx("div",{className:"flex flex-1 items-center justify-end opacity-50",children:l.jsx(be,{icon:ql,size:"sm"})}),Yt={Account:{show:!0,icon:B6,href:`${En}/details`},ProPerks:{show:!0,icon:_re,href:`${En}/pro-perks`},Preferences:{show:!0,icon:z_,href:`${En}/preferences`},Personalize:{show:!0,icon:xre,href:`${En}/personalize`},Connectors:{show:!0,icon:bre,href:`${En}/connectors`},Imports:{show:!0,icon:l8,href:`${En}/files`},Products:{show:!0,icon:X4e,href:`${En}/purchases`},API:{show:!0,icon:Cre,href:`${En}/api`},Enterprise:{show:!0,icon:cc,href:"https://www.perplexity.ai/enterprise",trailingComponent:l.jsx(Ghe,{})},Reservations:{show:!0,icon:Z4e,href:`${En}/reservations`},Notifications:{show:!0,icon:Tu,href:`${En}/notifications`},Tasks:{show:!0,icon:lu,href:`${En}/tasks`},Shortcuts:{show:!0,icon:hS,href:`${En}/shortcuts`},SiteInstructions:{show:!0,icon:Q4e,href:`${En}/site-instructions`}},aa={Organization:{show:!0,icon:cc,href:`${En}${nd}/details`},Members:{show:!0,icon:eTe,href:`${En}${nd}/members`},"User access":{show:!0,icon:tTe,href:`${En}${nd}/user-access`},Permissions:{show:!0,icon:th,href:`${En}${nd}/permissions`},Insights:{show:!0,icon:Sre,href:`${En}${nd}/insights`},"Org Connectors":{show:!0,icon:bre,href:`${En}${nd}/connectors`},"Org Imports":{show:!0,icon:l8,href:`${En}${nd}/files`}},oa={APIGroup:{show:!0,icon:cc,href:`${En}/api/group`},APIMembers:{show:!0,icon:V6,href:`${En}/api/members`},APIBilling:{show:!0,icon:wre,href:`${En}/api/billing`},UsageMetrics:{show:!0,icon:Sre,trailingComponent:l.jsx(Ghe,{})},AccountLimits:{show:!0,icon:J4e,href:`${En}/api/limits`},APIKeys:{show:!0,icon:Xne,href:`${En}/api/keys`},APIFiles:{show:!0,icon:l8,href:`${En}/api/files`}},Sst=()=>`${En}/details`,Op=()=>En,Cst=e=>e?.length?e.filter(xp):void 0,qhe=({reason:e})=>{const t=X(),n=At(),{hasAccessToProFeatures:r}=Nt(),{isEnterprise:s,organization:a}=pn({reason:e}),o=wst({reason:e,feature:zhe.SOURCES}),i=tn(),{enabledConnectors:c,enabledNonFileConnectors:u,enabledFileConnectors:d}=J9({reason:e}),{sources:m}=Sn(),h=Op(),p=Ot(),{hasLinearAlt:g,hasNotionMcp:y,hasSlack:v}=_st({reason:e}),[x,b]=f.useState(!1),_=f.useCallback(()=>{b(!0)},[]),w=f.useCallback(()=>{b(!1)},[]),{value:S}=Yr({flag:"gcal-fe-toggle",defaultValue:!1,extraAttributes:{orgUuid:a?.uuid??""}}),{value:C}=Yr({flag:"enable-remote-mcp-tools",defaultValue:!1,extraAttributes:{orgUuid:a?.uuid??""}}),E=C&&r,M=S&&!i,{value:T}=Yr({flag:"outlook-fe-toggle",defaultValue:!1,extraAttributes:{orgUuid:a?.uuid??""}}),{value:I}=Yr({flag:"edgar-enabled",stableId:p?.user?.id??"KILL_SWITCH",defaultValue:!1,extraAttributes:{orgUuid:a?.uuid??""}}),j=f.useCallback(F=>{F.stopPropagation(),n.push(`${h}/files`)},[n,h]),N=f.useMemo(()=>l.jsx("div",{className:"mr-sm flex",children:l.jsx(bn,{tooltipText:t.formatMessage({defaultMessage:"Manage my files",id:"o8eQg7byBv"}),children:l.jsx(D,{color:"light",onClick:j,children:l.jsx(be,{icon:nTe,size:"sm"})})})}),[t,j]),P=_o(),R=f.useMemo(()=>Object.fromEntries(P.mcpStdioServers?.map(F=>{const U=F.dxt_name?P.installedDxts?.find(({name:W})=>W===F.dxt_name):null,V=U?.manifest.display_name??U?.manifest.name??F.name;return[`comet_mcp_${F.name}`,{icon:void 0,avatar:l.jsx(bst,{serverName:V,size:"sm"}),text:V,disabled:!F.tools_count,description:t.formatMessage({defaultMessage:"{count} tools available",id:"K/n6iC4Kkm"},{count:F.tools_count??"N/A"}),type:"toggle"}]})??[]),[P.mcpStdioServers,P.installedDxts,t]),k=f.useMemo(()=>{const F=d.map(V=>{const W=V.name,H=A2(W)??"";return l.jsx(Cn,{user:H,rounded:!1,showBackground:!1,size:"small"},W)});let U=null;return F.length>0&&(U=N2(F,{...F.length<=3&&{rightText:l.jsx(D,{color:"light",variant:"tinyRegular",children:t.formatMessage({defaultMessage:"Search my files",id:"EYmiG70whM"})})},maxVisuals:F.length,size:"sm"})),{web:{icon:A0,avatar:void 0,text:t.formatMessage({defaultMessage:"Web",id:"B6CB3748fZ"}),description:t.formatMessage({defaultMessage:"Search across the entire Internet",id:"L+Gw+J7uDs"}),type:"toggle"},scholar:{icon:G_,avatar:void 0,text:t.formatMessage({defaultMessage:"Academic",id:"mbxIJyT8C5"}),description:t.formatMessage({defaultMessage:"Search academic papers",id:"IVRQQmrqTD"}),type:"toggle"},...s?{}:{social:{icon:kre,avatar:void 0,text:t.formatMessage({defaultMessage:"Social",id:"qOLogguG/7"}),description:t.formatMessage({defaultMessage:"Discussions and opinions",id:"g9xPuArp4v"}),type:"toggle"}},...I?{edgar:{icon:Tre,avatar:void 0,text:sie,description:"Search SEC filings",type:"toggle"}}:{},...s?{org:{icon:Mre,avatar:void 0,text:t.formatMessage({defaultMessage:"Org files",id:"iWDsD738/m"}),description:t.formatMessage({defaultMessage:"Search files from your organization",id:"Ak5CW53mGi"}),type:"toggle"}}:{},...E&&g?{linear_alt:{icon:void 0,avatar:l.jsx(Cn,{user:PO,size:"small",rounded:!1,showBackground:!1,altText:fh}),text:fh,description:t.formatMessage({defaultMessage:"Search workspace issues",id:"7GhXgujkn6"}),type:"toggle"}}:{},...E&&y?{notion_mcp:{icon:void 0,avatar:l.jsx(Cn,{user:wv,size:"small",rounded:!1,showBackground:!1,altText:hu}),text:hu,description:t.formatMessage({defaultMessage:"Search workspace pages",id:"Dfr7kK7JJA"}),type:"toggle"}}:{},...E&&v?{slack:{icon:void 0,avatar:l.jsx(Cn,{user:RO,size:"small",rounded:!1,showBackground:!1,altText:Sv}),text:Sv,description:t.formatMessage({defaultMessage:"Search workspace messages",id:"wc4K5cTYcm"}),type:"toggle"}}:{},...o&&s?{my_files:{icon:Ere,avatar:void 0,text:t.formatMessage({defaultMessage:"My files",id:"bYbrKKlKgS"}),description:d.length===0?t.formatMessage({defaultMessage:"Search my files",id:"EYmiG70whM"}):"",bottomElement:U,rightElement:N,type:"toggle"}}:{},...R}},[d,t,s,I,E,g,y,v,o,N,R]),O=f.useMemo(()=>({...c?.some(U=>U.name==="crunchbase")?{crunchbase:{icon:void 0,avatar:l.jsx(Cn,{user:TO,rounded:!1,showBackground:!1,size:"small",altText:"Crunchbase"}),text:kO,type:"toggle"}}:{},...c?.some(U=>U.name==="factset")?{factset:{icon:void 0,avatar:l.jsx(Cn,{user:EO,rounded:!1,showBackground:!1,size:"small",altText:"FactSet"}),text:MO,type:"toggle"}}:{},...c?.some(U=>U.connection_type==="GOOGLE_DRIVE")&&o?{google_drive:{icon:void 0,avatar:l.jsx(Cn,{user:$c(Pn.GOOGLE_DRIVE)||"",rounded:!1,showBackground:!1,size:"small",altText:lh}),text:lh,type:"toggle"}}:{},...c?.some(U=>U.connection_type==="ONEDRIVE")&&o?{onedrive:{icon:void 0,avatar:l.jsx(Cn,{user:$c(Pn.ONEDRIVE)||"",rounded:!1,showBackground:!1,size:"small",altText:ch}),text:ch,type:"toggle"}}:{},...c?.some(U=>U.connection_type==="SHAREPOINT")&&o?{sharepoint:{icon:void 0,avatar:l.jsx(Cn,{user:$c(Pn.SHAREPOINT)||"",rounded:!1,showBackground:!1,size:"small",altText:uh}),text:uh,type:"toggle"}}:{},...c?.some(U=>U.connection_type==="WILEY")&&s?{wiley:{icon:void 0,avatar:l.jsx(Cn,{user:LS,rounded:!1,showBackground:!1,size:"small",altText:"Wiley"}),text:NO,type:"toggle"}}:{},...c?.some(U=>U.connection_type==="DROPBOX")&&o?{dropbox:{icon:void 0,avatar:l.jsx(Cn,{user:$c(Pn.DROPBOX)||"",rounded:!1,showBackground:!1,size:"small",altText:dh}),text:dh,type:"toggle"}}:{},...c?.some(U=>U.connection_type==="GCAL")&&M?{gcal:{icon:void 0,avatar:l.jsx(Cn,{user:$c(Pn.GCAL)||"",rounded:!1,showBackground:!1,size:"small",altText:_v}),text:_v,type:"toggle"}}:{},...c?.some(U=>U.connection_type==="OUTLOOK")&&T?{outlook:{icon:void 0,avatar:l.jsx(Cn,{user:$c(Pn.OUTLOOK)||"",rounded:!1,showBackground:!1,size:"small",altText:TA}),text:TA,type:"toggle"}}:{}}),[c,s,o,M,T]),L=f.useMemo(()=>{const F=u.filter($=>!($.connection_type==="OUTLOOK"&&!T||$.connection_type==="GCAL"&&!M)),U=[...new Set(F.map($=>$.name))],V=U.map($=>{const q=A2($)??"";return l.jsx(Cn,{user:q,rounded:!1,showBackground:!1,size:"small"},$)}),H=(m?.filter($=>F.some(q=>q.name===$))||[]).length>0;let G=null;F.length>0&&(G=N2(V,{rightText:l.jsx(D,{color:"light",variant:"tinyRegular",children:H?t.formatMessage({defaultMessage:"{ num } connected",id:"vKOo9VV7WK"},{num:U.length}):t.formatMessage({defaultMessage:"{ num } available",id:"eEfaubop4a"},{num:U.length})}),maxVisuals:V.length,size:"sm"}));const K=Object.entries(O).filter(([$])=>F.some(q=>q.name===$));return K.length===0?{type:"default",text:t.formatMessage({defaultMessage:"Add connectors",id:"2dXigF1Pil"}),icon:uB,onClick:()=>n.push(`${h}/connectors`),submenuItems:[]}:{type:"nested",isSubmenuOpen:x,onSubmenuOpen:_,onSubmenuClose:w,text:t.formatMessage({defaultMessage:"More connectors",id:"3l4CuVEyHY"}),icon:uB,menuWidth:"300px",bottomElement:G,submenuItems:[...K,{type:"separator"},{type:"default",text:t.formatMessage({defaultMessage:"Manage connectors",id:"cqx+RdJnHp"}),onClick:()=>n.push(`${h}/connectors`)}]}},[x,t,n,u,O,_,w,h,m,M,T]);return f.useMemo(()=>({RootSources:k,ConnectionSources:O,NestedConnectionSources:L}),[O,L,k])};var ko={},xK;function Est(){if(xK)return ko;xK=1;var e=ko&&ko.__awaiter||function(s,a,o,i){function c(u){return u instanceof o?u:new o(function(d){d(u)})}return new(o||(o=Promise))(function(u,d){function m(g){try{p(i.next(g))}catch(y){d(y)}}function h(g){try{p(i.throw(g))}catch(y){d(y)}}function p(g){g.done?u(g.value):c(g.value).then(m,h)}p((i=i.apply(s,a||[])).next())})};Object.defineProperty(ko,"__esModule",{value:!0}),ko.identify=ko.subscribe=ko.publish=void 0;const t=(s,a)=>{window.todesktop.ipc.publish(s,a)};ko.publish=t;const n=(s,a)=>window.todesktop.ipc.subscribe(s,a);ko.subscribe=n;const r=()=>e(void 0,void 0,void 0,function*(){return window.todesktop.ipc.identify()});return ko.identify=r,ko}var bK=Est();const zC=()=>{const{isWindowsApp:e}=Wt(),t=f.useRef({}),n=f.useRef({}),r=f.useCallback((a,o)=>{if(e)try{bK.publish(a,o)}catch{try{if(typeof BroadcastChannel<"u"){let c=t.current[a];c||(c=new BroadcastChannel(a),t.current[a]=c),c.postMessage(o)}else ee.warn("Neither IPC publish nor BroadcastChannel are available in this runtime")}catch(c){ee.warn("Error using BroadcastChannel: ",c)}}},[e]),s=f.useCallback((a,o)=>{if(e)try{return bK.subscribe(a,o)}catch{try{if(typeof BroadcastChannel<"u"){let c=t.current[a];c||(c=new BroadcastChannel(a),t.current[a]=c);let u=n.current[a];u||(u=new Set,n.current[a]=u);const d=m=>{o(m.data)};return u.add(o),c.addEventListener("message",d),()=>{c.removeEventListener("message",d),u.delete(o),u.size===0&&(c.close(),delete t.current[a],delete n.current[a])}}ee.warn("Neither IPC subscribe nor BroadcastChannel are available in this runtime");return}catch(c){ee.warn("Error using BroadcastChannel: ",c);return}}},[e]);return f.useMemo(()=>({safeWindowsIpcPublish:r,safeWindowsIpcSubscribe:s}),[r,s])};function GC({defaultSource:e,reason:t}){const{sources:n,setSources:r,setRecency:s}=Sn(),a=Ht(),{fileRepoInfo:o}=Au({reason:t}),{RootSources:i,ConnectionSources:c}=qhe({reason:t}),{isLoading:u}=pn({reason:t}),{isWindowsApp:d}=Wt(),{safeWindowsIpcPublish:m,safeWindowsIpcSubscribe:h}=zC(),p=o.file_repository_type==="COLLECTION",g=p?`space-${o.owner_id}`:"home",y=ul(),v=Array.isArray(y?.slug)?y.slug[0]:y?.slug,{collection:x,isLoading:b}=xc({collectionSlug:v,reason:t}),_=b?void 0:x?.enable_web_by_default,w=f.useRef(h);f.useEffect(()=>{w.current=h},[h]);const S=f.useRef(Math.random().toString(36).substring(7)),C=f.useCallback(T=>{let I=[];return n?.includes(T)?(I=n.filter(j=>j!==T),T==="web"&&(n.includes("crunchbase")&&(I=n.filter(j=>j!=="crunchbase"&&j!=="web")),s?.(null))):(I=[...n||[]],T==="crunchbase"&&!I.includes("web")&&I.push("web"),I.push(T)),p&&z3(I,g),r(I),d&&m(Bc,{type:Bc,sources:I,windowId:S.current}),I},[p,g,r,s,n,d,m]),E=f.useCallback(T=>{const I=[...T];I.includes("crunchbase")&&!I.includes("web")&&I.push("web"),p&&z3(I,g),r(I),d&&m(Bc,{type:Bc,sources:I,windowId:S.current})},[p,d,g,m,r]);f.useEffect(()=>{if(!d)return;const T=w.current(Bc,I=>{I.type===Bc&&I.windowId!==S.current&&r(I.sources)});return()=>{T?.()}},[d,r,n]);const M=f.useMemo(()=>{if(b)return new Set([]);if(p)return _?new Set(["web"]):new Set([]);if(e)return new Set([e]);const I=(a?.get("sources")??"web").split(",").map(j=>j.trim()).filter(xp);return new Set(I||["web"])},[p,b,_,a,e]);return f.useEffect(()=>{if(u)return;let T=p?DOe(g)||[...M]:[...M];if(p&&_&&!T.includes("web")?T.push("web"):p&&!_&&T.includes("web")&&(T=T.filter(j=>j!=="web")),JSON.stringify(n||[])!==JSON.stringify(T)){const j=T.filter(N=>N in i||N in c);p&&z3(j,g),r(j)}},[u,p,_]),f.useMemo(()=>({DEFAULT_SOURCES:M,isSpace:p,isSpaceEnableWebByDefault:_,updateSources:C,overwriteSources:E}),[M,p,_,E,C])}const Mst=({reason:e})=>{const{safeWindowsIpcPublish:t}=zC(),{actions:n}=hn(),{isWindowsApp:r}=Wt(),s=Je(),{isPro:a}=Nt(),{DEFAULT_SOURCES:o}=GC({reason:e}),i=f.useRef(n),c=f.useRef(t);f.useEffect(()=>{i.current=n,c.current=t},[n,t]);const u=f.useCallback(()=>{bu("/?voice-mode=true","Voice mode")},[]),d=f.useCallback(()=>{bu("/?v2v=true","V2V mode")},[]),m=f.useCallback(g=>{const y=g.searchParams,v=y.get("q"),x=y.get("incognito"),_=(y.get("sources")??"").split(",").map(C=>C.trim()).filter(xp),w=y.get("search_mode"),S=w?NUe[w]:void 0;x!==null&&i.current.setIsIncognito(x==="true"),_&&t(Bc,{type:Bc,sources:_}),S?.model&&S?.mode&&t(fm,{type:fm,model:S.model,searchMode:S.mode}),v&&c.current(aie,{query:v,promptSource:"user",querySource:"windows-app-shortcut",incognitoOverride:x,sourcesOverride:_??[]})},[t]),h=f.useCallback(g=>{const y=g.searchParams,v=y.get("type"),x=y.get("callback");if(!v||!x)return;const b=v.split(","),_=new URLSearchParams;b.forEach(S=>{switch(S){case"sources":_.set("sources",Array.from(o).join(","));break;case"search-modes":_.set("search-modes",Object.values(ae).join(","));break;case"sign-in":_.set("sign-in",s?"true":"false");break;case"subscription":_.set("subscription",a?"true":"false");break}});const w=`${x}?${_.toString()}`;window.open(w,"_blank")},[s,a,o]),p=f.useMemo(()=>new Map([["voice-mode",u],["v2v",d],["search",g=>m(g)],["request",g=>h(g)]]),[u,d,m,h]);f.useEffect(()=>{if(!r)return;const g=rKe("openProtocolURL",(v,x)=>{const b=new URL(x.url);for(const[_,w]of p)if(b.toString().includes(_)){x.preventDefault(),w(b);break}}),y=async()=>{await(await g)()};return()=>{y()}},[r,p])},BP="keyboard-shortcuts",Tst=(e,t)=>{const n={[os.NEW_THREAD]:{[Dn.MACOS]:[],[Dn.WINDOWS]:[]},[os.STOP_GENERATING]:{[Dn.MACOS]:[],[Dn.WINDOWS]:[]},[os.TOGGLE_INCOGNITO]:{[Dn.MACOS]:[],[Dn.WINDOWS]:[]},[os.SHOW_SHORTCUTS]:{[Dn.MACOS]:[],[Dn.WINDOWS]:[]},[os.FOCUS_ASK_INPUT]:{[Dn.MACOS]:[],[Dn.WINDOWS]:[]},[os.TOGGLE_DICTATION]:{[Dn.MACOS]:[],[Dn.WINDOWS]:[]},[os.TOGGLE_V2V]:{[Dn.MACOS]:[],[Dn.WINDOWS]:[]}},r=Fde(e,t);[os.NEW_THREAD,os.TOGGLE_V2V].forEach(s=>{const a=r.find(o=>o.type===s);a&&(n[s]={[Dn.MACOS]:a.macos,[Dn.WINDOWS]:a.windows})});try{const s=Ve.getItem(BP);if(s){const a=JSON.parse(s);[os.NEW_THREAD,os.TOGGLE_V2V].forEach(o=>{const i=a.find(c=>c.type===o);i&&(n[o]={[Dn.MACOS]:i.macos,[Dn.WINDOWS]:i.windows})})}}catch(s){ee.warn("Error reading keyboard shortcuts:",s)}return n},kst=(e,t)=>yo(n=>({globalShortcuts:Tst(e,t),setShortcut:(r,s,a)=>n(o=>{const i={...o.globalShortcuts,[r]:{...o.globalShortcuts[r],[s]:a}};try{const c=Ve.getItem(BP),d=(c?JSON.parse(c):[]).map(m=>m.type===r?{...m,[s]:a}:m);Ve.setItem(BP,JSON.stringify(d))}catch(c){ee.warn("Error saving keyboard shortcuts:",c)}return{globalShortcuts:i}})}));let tk=null;const VP=e=>{const{isWindowsApp:t}=Wt(),n=X();return tk||(tk=kst(n,t)),tk(e)},Nst=()=>{const{handleShowPanel:e}=bf(),t=VP(c=>c.setShortcut),{getMainWindowRef:n}=Ast(),r=VP(c=>c.globalShortcuts),s=f.useCallback(async()=>{const c=await n();if(!c)return;await b9({ref:c}),await x9({ref:c});const u=new CustomEvent("toggleVoiceToVoice");document.dispatchEvent(u)},[n]),a=f.useCallback(async(c,u)=>{try{const d=Array.isArray(c)?c.join("+"):c;let m;switch(u){case os.NEW_THREAD:m=e;break;case os.TOGGLE_V2V:m=s;break;default:return ee.warn(`No handler registered for shortcut type: ${u}`),!1}return d&&d.trim()!==""&&await MT(d),await dKe(d,m),!0}catch(d){return ee.warn("Error registering shortcut:",d),!1}},[e,s]),o=f.useCallback(async(c,u,d)=>{try{const m=c.join("+"),h=u.join("+");if(m===h)return;m&&m.trim()!==""&&await MT(m),await a(h,d)&&t(d,Dn.WINDOWS,u)}catch(m){ee.error("Error updating global shortcut:",m)}},[a,t]),i=f.useCallback(async c=>{const u=c.join("+");u&&u.trim()!==""&&await MT(u)},[]);return f.useMemo(()=>({shortcuts:r,registerShortcut:a,updateGlobalShortcut:o,unregisterShortcut:i}),[a,r,i,o])},Khe=f.createContext(null),Ast=()=>{const e=f.useContext(Khe);if(!e)throw new Error("useWindowsApp must be used within WindowsAppProvider");return e},Pst=()=>{const e=f.useRef(null);return{getMainWindowRef:f.useCallback(async()=>(e.current||(e.current=(async()=>{let n=await WG({id:"TJmK6yKBLiw389HLDdYy5"});return n||(n=await WG({id:"C195F2RyYDhfB93QW7vui"})),n})()),e.current),[])}},Rst=({children:e,getMainWindowRef:t})=>{const n="windows-app-provider-inner",{isWindowsApp:r}=Wt(),s=Pt(),a=r&&!s?.includes(Cv),{submitQuery:o}=Ta(),{isCopilot:i}=Sn(),{createPanelWindow:c,hidePanel:u}=bf(),d=Je(),m=f.useRef(o),h=f.useRef(i),{safeWindowsIpcSubscribe:p}=zC();f.useEffect(()=>{m.current=o},[o]),Mst({reason:n}),f.useEffect(()=>{h.current=i},[i]);const{shortcuts:g,registerShortcut:y,unregisterShortcut:v}=Nst();f.useEffect(()=>{a&&(c(),u())},[a,c,u]);const x=f.useCallback(async b=>{const _=async(E=500)=>{const M=new AbortController,T=setTimeout(()=>M.abort(),E);try{const I=new Promise(j=>{CP().then(N=>{if(N){clearTimeout(T),j(!0);return}oy("show",()=>{clearTimeout(T),j(!0)})})});return await Promise.race([I,new Promise(j=>{M.signal.addEventListener("abort",()=>j(!1))})])}catch(I){return ee.warn("Error ensuring window is ready",{error:I}),!1}finally{clearTimeout(T);try{EP("show")}catch(I){ee.warn("Error removing show listeners during cleanup",I)}}},w=await t();if(await b9({ref:w}),await x9({ref:w}),!await _())return;const S=b.query.trim();if(!S?.trim())return;const C=Sa();m.current({rawQuery:S,copilotOverride:h.current?!0:void 0,attachments:b.attachments,collection:null,newFrontendContextUUID:C,promptSource:b.promptSource??"user",querySource:b.querySource??"home",timeFromFirstType:b.timeFromFirstType,shouldRedirectToBackendUUID:!0})},[t]);return f.useEffect(()=>{if(!a)return;const b=p(aie,_=>{x(_)});return()=>{b?.()}},[a,x,p]),f.useEffect(()=>{if(!a)return;const b=[os.NEW_THREAD,...d?[os.TOGGLE_V2V]:[]];return b.forEach(_=>{const S=g[_][Dn.WINDOWS].map(NG);y(S,_)}),()=>{b.forEach(_=>{const S=g[_][Dn.WINDOWS].map(NG);v(S)})}},[y,a,g,d,v]),l.jsx(l.Fragment,{children:e})},Ist=({children:e})=>{const{getMainWindowRef:t}=Pst(),n=f.useMemo(()=>({getMainWindowRef:t}),[t]);return l.jsx(Khe.Provider,{value:n,children:l.jsx(Trt,{children:l.jsx(Rst,{getMainWindowRef:t,children:e})})})},Iu=e=>e?.includes("perplexity.ai"),jst=e=>e?.includes("localhost"),Ost=e=>Iu(e)&&e?.includes("preview"),Lst=e=>Iu(e)&&e?.includes("staging"),Dst=e=>Iu(e)&&(e?.includes("alpha")||e?.includes("beta")),Fst=e=>Iu(e)&&e?.includes("testing"),Ust=e=>Iu(e)&&e?.includes("askdev"),Bst=e=>Iu(e)&&e?.startsWith("dev"),Vst=e=>Iu(e)&&(e?.includes("klarna")||e?.includes("inhouse")||e?.includes("wolfram")||e?.includes("ftrouter")||e?.includes("ft")||e?.includes("brave")||e?.includes("claude2")||e?.includes("claude1-instant")||e?.includes("claude2-instant")||e?.includes("shopping")||e?.includes("turbo16k")||e?.includes("yelp")||e?.includes("mobile-flag-dev")),$st=e=>Iu(e)&&!Ost(e)&&!Fst(e)&&!Dst(e)&&!Ust(e)&&!Bst(e)&&!Vst(e);function Yhe(){return $st(window.location.hostname)?"beta":Lst(window.location.hostname)?"staging":jst(window.location.hostname)?"local":"testing"}class rd{static GC_TIME=1e3*60*5;static STALE_TIME=1/0;static retryDelay(t,n){return Math.min(t>1?2**t*1e3:1e3,30*1e3)}static retryQuery(t,n){return!1}static retryMutation(t,n){return!1}}function Wst(){return Vd?_K():(nk||(nk=_K()),nk)}function _K(){return new Ije({queryCache:new Roe({onError:e=>{const t=e instanceof O6?e:new O6("FETCHER_UNKNOWN_ERROR",{details:{cause:X3e(e)},cause:Z3e(e)?e:void 0});ee.error(t)}}),mutationCache:new joe({onError:e=>{ee.error("Mutation error",e)}}),defaultOptions:{queries:{staleTime:rd.STALE_TIME,gcTime:rd.GC_TIME,refetchOnReconnect:!0,refetchOnMount:!0,refetchOnWindowFocus:!0,retry:rd.retryQuery,retryDelay:rd.retryDelay,throwOnError:!1,networkMode:"online"},mutations:{gcTime:rd.GC_TIME,retry:rd.retryMutation,retryDelay:rd.retryDelay,throwOnError:!1,networkMode:"online"}}})}let nk;const ho={type:"spring",stiffness:700,damping:50},_u=A.memo(({keyProp:e=0,message:t,variant:n,description:r,ctaText:s,ctaOnClick:a,isVisible:o=!1,timeout:i,handleClick:c,handleClose:u,onTimeout:d=Rn,position:m="top",...h})=>{const[p,g]=f.useState(o);f.useEffect(()=>{g(o)},[o]),f.useEffect(()=>{let x;return o&&i&&(x=setTimeout(()=>{g(!1),d()},i*1e3)),()=>{clearTimeout(x)}},[p,i,o,d]);const y=f.useCallback(()=>{g(!1),u?.()},[u]),v=f.useCallback(()=>{a?.(),y()},[a,y]);return l.jsx(st,{children:p&&l.jsx(hp,{children:l.jsx(_e.div,{className:B(`right-toastHMargin erp-sidecar:top-[114px] fixed ${m==="top"?"top-toastVMargin":"bottom-toastVMargin"} z-30 flex items-center justify-center ${c?"cursor-pointer":""}`),initial:{opacity:0,x:6},animate:{opacity:1,x:0},exit:{opacity:0,x:6},transition:ho,...h,children:l.jsxs(z,{variant:"raised",className:B("gap-x-sm p-md shadow-overlay flex items-center rounded-lg",{"cursor-pointer":n==="refresh"}),onClick:c??Rn,children:[l.jsx(z,{variant:"offset",className:"p-sm dark:bg-offsetPlus rounded-md",children:l.jsx(D,{variant:"smallBold",color:n==="error"?"red":n==="warning"?"yellow":"super",children:l.jsx(be,{icon:n==="refresh"?Nre:n==="error"||n==="warning"?Are:Pre,size:"sm"})})}),l.jsxs(z,{className:"flex-1",children:[l.jsx(D,{variant:"small",color:"default",children:t}),r&&l.jsx(D,{variant:"tinyRegular",color:"light",children:r})]}),s&&a&&l.jsx(ke,{text:s,variant:"offset",onClick:v,size:"small",extraCSS:"ml-xl"}),i===void 0&&l.jsx(ke,{variant:"primary",size:"tiny",icon:Xt,onClick:y,extraCSS:"ml-sm",noPadding:!0})]})},e)})})});_u.displayName="Toast";const Qhe=A.memo(()=>{const{message:e,variant:t,description:n,ctaText:r,ctaOnClick:s,isVisible:a,timeout:o,handleClick:i,closeToast:c,position:u,keyProp:d}=On(),m=f.useCallback(()=>{t==="refresh"&&i===void 0?window.location.reload():i&&i()},[t,i]);return l.jsx(_u,{keyProp:d,isVisible:a,variant:t,message:e,description:n,ctaText:r,ctaOnClick:s,timeout:o,handleClick:m,onTimeout:c,position:u},d)});Qhe.displayName="Toasts";const Xhe=A.memo(({children:e})=>l.jsx(rje,{children:e}));Xhe.displayName="TooltipStateProvider";ge(async()=>{const{RenderToolbar:e}=await oe(async()=>{const{RenderToolbar:t}=await import("./RenderToolbar-CNswzSE5.js");return{RenderToolbar:t}},__vite__mapDeps([101,2,1]));return{default:e}},{prefetch:!1});ge(async()=>{const{ReactQueryDevtools:e}=await oe(async()=>{const{ReactQueryDevtools:t}=await import("./index-Ds5yF1gS.js");return{ReactQueryDevtools:t}},[]);return{default:e}},{prefetch:!1});const Hst=({children:e,hostname:t,version:n,minVersion:r,spaRoutes:s,strictSpa:a,shouldOpenNonSpaRouteInNewTab:o,base:i,idleRefresh:c,minVersionRefresh:u})=>{const d=Pt(),m=Wst(),{colorScheme:h}=hn();return xrt(),f.useEffect(()=>{!n&&["beta","staging"].includes(Yhe())&&ee.error("Version is not set")},[n]),l.jsx(J3e,{ssrPath:d??"/",ssrSearch:"",base:i,children:l.jsx(e4e,{spaRoutes:s,strictSpa:a,openNonSpaRouteInNewTab:o,children:l.jsx(VJe,{children:l.jsxs(lst,{children:[l.jsx(khe,{}),l.jsx(nZe,{children:l.jsxs(Uje,{client:m,children:[l.jsx(xle,{userPreferredColorScheme:h,children:l.jsx(kfe,{children:l.jsx(u7e,{hostname:t,children:l.jsx(_He,{children:l.jsx(OHe,{children:l.jsx(jXe,{shouldFetchSettings:!0,children:l.jsx(IZe,{children:l.jsx(Xhe,{children:l.jsx(yce,{children:l.jsx(uet,{shouldFetchSettings:!1,children:l.jsxs(Ist,{children:[l.jsx(yst,{children:l.jsx(qnt,{children:l.jsx(She,{children:l.jsx(whe,{children:l.jsx(vhe,{children:l.jsx(pst,{children:l.jsxs(mst,{children:[l.jsx(Srt,{}),c&&l.jsx(Ehe,{version:n}),u&&l.jsx(Nhe,{minVersion:r}),l.jsx(Vhe,{}),l.jsx(Phe,{}),typeof window<"u"&&l.jsx(Fhe,{}),l.jsx(Ahe,{}),e]})})})})})})}),l.jsx(Qhe,{})]})})})})})})})})})})}),!1,l.jsx(_he,{})]})})]})})})})},Zhe=A.memo(function({error:t}){f.useEffect(()=>{ee.error(t,{digest:t.digest,globalError:!0})},[t]);const n=f.useCallback(r=>{r.preventDefault(),bu("/sidecar","sidecar error")},[]);return l.jsx("div",{className:"bg-offset flex h-screen items-center justify-center",children:l.jsxs(z,{variant:"offset",className:"space-y-md p-lg rounded-md",children:[l.jsx("div",{className:"max-w-[400px]",children:l.jsx(D,{className:"text-center",variant:"section-title",children:t.digest?`Internal Error (${t.digest})`:"Internal Error"})}),l.jsx(D,{className:"text-center underline",variant:"section-title",color:"light",children:l.jsx(at,{href:"/sidecar",onClick:n,children:"Return home"})})]})})});Zhe.displayName="GlobalError";const Jhe=f.createContext(void 0),zst=ge(async()=>{const{DebugModeActivator:e}=await oe(async()=>{const{DebugModeActivator:t}=await import("./DebugModeActivator-BDBHmVh6.js");return{DebugModeActivator:t}},__vite__mapDeps([102,1,2,5]));return{default:e}}),epe=A.memo(({children:e})=>{const[t,n]=f.useState(!1),r=h8(),s=f.useMemo(()=>({debugEnabled:t}),[t]);return l.jsxs(Jhe.Provider,{value:s,children:[e,r&&l.jsx(zst,{setDebugEnabled:n,isDebugMode:t})]})});epe.displayName="DebugModeProvider";const Gst=(e,t)=>t?.includes("WindowsApp")?!0:e==="true",qst=e=>e==="light"||e==="dark";function Kst(e,{userAgent:t}={}){const n=e.colorScheme,r=qst(n)?n:null;let s=e[AA],a={};try{a=JSON.parse(e[Iie]??"{}")}catch{}const o=Object.values(ae).includes(s);(!s||!o)&&(s=ae.SEARCH);const i=e[pie];return{colorScheme:r,isCollapsed:Gst(e.isCollapsed,t),isSidebarPinned:e.isSidebarPinned==="true",sidebarHiddenHubs:JSON.parse(e.sidebarHiddenHubs??"[]"),isIncognitoLocal:e[GS]==="true",isDiscoverInterestBoxDismissed:i?i==="true":void 0,isEnterpriseAdDismissed:e[gie]=="true",isMaxAssistantMode:e[jie]=="true",isSplashPageDismissed:e[yie]=="true",isSuggestionsDisabled:e[vie]=="true",isHomepageWidgetsDisabled:e[xie]=="true",isSportsIosCtaDismissed:e[_ie]=="true",preferredSearchMode:s,preferredSearchModels:a,welcomeBackGateImpressions:Number(e[wie])||0,shareGateImpressions:Number(e[Sie])||0,isSidebarConnectorsAdDismissed:e[Cie]=="true",isStudentReferralBannerDismissed:e[Eie]=="true",isStudentSpaceUpsellDismissed:e[Mie]=="true",studentSpaceUpsellImpressions:Number(e[Tie])||0}}const Yst=60*60*24;function Qst({children:e,session:t}){return l.jsx(za.SessionProvider,{session:t,refetchInterval:Yst,children:e})}const tpe=f.memo(({children:e,userAgent:t})=>{const n=f.useMemo(()=>Xst(t),[t]);return l.jsx(Yoe.Provider,{value:n,children:e})});tpe.displayName="DeviceProvider";function Xst(e=""){return!e&&typeof navigator<"u"&&(e=navigator.userAgent),{isChrome:Irt(e),isMobile:Mhe(e),isAndroid:jrt(e),isIOS:Ort(e),isMacOS:The(e),isMobileSafari:Lrt(e),isFirefox:Drt(e),isWindowsApp:r1(e),isWindowsOS:Frt(e),isMetaBrowser:Urt(e),isSamsungBrowser:Brt(e),userAgent:e}}const Zst={},s7=A.memo(({locale:e,children:t,messages:n=Zst})=>{const r=f.useCallback(s=>{s.code!=="MISSING_TRANSLATION"&&ee.error(s)},[]);return l.jsx(Bke,{locale:e,defaultLocale:mu,messages:n,onError:r,children:t})});s7.displayName="TranslationsProvider";const Jst=Hne(Jje),npe=A.memo(({locale:e,children:t})=>{const{translations:n,matchedLocale:r}=f.use(Jst(e));return l.jsx(s7,{locale:r,messages:n,children:t})});npe.displayName="InnerClientTranslationsProvider";const eat={},rpe=A.memo(({children:e,shouldSetHtmlLang:t=!0})=>{const n=f.useMemo(()=>Jc(),[]),r=f.useMemo(()=>zoe(n),[n]);return t&&typeof document<"u"&&(document.documentElement.lang!==n&&(document.documentElement.lang=n),document.documentElement.dir!==r&&(document.documentElement.dir=r)),n===mu?l.jsx(s7,{locale:n,messages:eat,children:e}):l.jsx(f.Suspense,{fallback:null,children:l.jsx(npe,{locale:n,children:e})})});rpe.displayName="ClientTranslationsProvider";const spe=A.memo(({host:e,userAgent:t,children:n,session:r})=>{const s=f.useMemo(()=>Kst(t4e(),{userAgent:t}),[t]);return l.jsx(rpe,{children:l.jsx(Qst,{session:r,children:l.jsx(Rle,{hostname:e,children:l.jsx(tpe,{userAgent:t,children:l.jsx(Nqe,{initialLocalUserSettings:s,children:l.jsx(epe,{children:n})})})})})})});spe.displayName="RootProviders";const a7="pplx-next-auth-session";let nb=null;const tat=()=>{try{const e=Ve.getItem(a7);return e?JSON.parse(e):null}catch{return null}},wK=async e=>{e&&Ve.setItem(a7,JSON.stringify(e))},UVt=()=>{Ve.removeItem(a7)},nat=(e=!1)=>{nb??=za.getSession().then(n=>(wK(n),n)).catch(n=>{throw wK(null),n}).finally(()=>{nb=null});const t=tat();return t&&(e||new Date(t.expires)>new Date)?{cachedSession:t,sessionFetchPromise:nb}:{cachedSession:null,sessionFetchPromise:nb}};function rat(e,t){if(e?.pathname.startsWith("/sidecar"))return"sidecar";if(e?.pathname.startsWith("/mobile-sidecar"))return"mobile-sidecar";if(t)return"tab"}function sat(){const{cachedSession:e,sessionFetchPromise:t}=nat(!0),n=Pi(),r=document.querySelector("meta[name='version']")?.getAttribute("content")||"",s=+(document.querySelector("meta[name='min-version']")?.getAttribute("content")||0),a=new URL(window.location.href);return{cachedSession:e,sessionFetchPromise:t.catch(o=>(console.error("Error getting session",o),null)),config:{env:Yhe(),version:r,minVersion:s,erp:rat(a,n)}}}const ape=A.memo(function({children:t}){const n=Pt(),r=Ht(),[s,a]=f.useState(null),{colorScheme:o}=fs(),i=Ot(),c=f.useCallback(d=>d==="/search"&&r?.get("newFrontendContextUUID")||d.startsWith("/page/new")&&r?.get("newFrontendContextUUID")||d==="/search/new",[r]),u=f.useCallback(d=>{if((d?.split("?")[0]??"")===(s?.split("?")[0]??"")||c(d))return;const h=s;a(d),Uo({name:"pageview",data:{internalReferrer:h??void 0,colorScheme:o},session:i??void 0})},[o,c,s,i]);return f.useEffect(()=>{n&&u(n)},[u,n]),l.jsx(l.Fragment,{children:t})});ape.displayName="PageviewTemplate";const aat="https://r2cdn.perplexity.ai/comet/cmp_grocery_cart.mp4",oat="https://r2cdn.perplexity.ai/comet/cmp_reddit_ama.mp4",iat="https://r2cdn.perplexity.ai/comet/cmp_find_emails.mp4",lat="https://r2cdn.perplexity.ai/comet/cmp_find_creatine.mp4",cat="https://r2cdn.perplexity.ai/comet/cmp_bikes_shipping.mp4",uat="https://r2cdn.perplexity.ai/comet/cmp_summarize_webpage.mp4",dat="https://r2cdn.perplexity.ai/comet/cmp_walking_route.mp4",fat="https://r2cdn.perplexity.ai/comet/cmp_v2v_browsing.mp4",mat="https://r2cdn.perplexity.ai/comet/grocery_cart-min.png",hat="https://r2cdn.perplexity.ai/comet/reddit_ama-min.png",pat="https://r2cdn.perplexity.ai/comet/find_emails-min.png",gat="https://r2cdn.perplexity.ai/comet/find_creatine-min.png",yat="https://r2cdn.perplexity.ai/comet/bikes_shipping-min.png",vat="https://r2cdn.perplexity.ai/comet/summarize_webpage-min.png",xat="https://r2cdn.perplexity.ai/comet/tour_plan-min.png",bat="https://r2cdn.perplexity.ai/comet/v2v_browsing-min.png",_at="https://r2cdn.perplexity.ai/comet/cmp_grocery_cart_v2.mp4",wat="https://r2cdn.perplexity.ai/comet/cmp_reddit_ama_v3.mp4",Sat="https://r2cdn.perplexity.ai/comet/cmp_find_emails_v2.mp4",Cat="https://r2cdn.perplexity.ai/comet/cmp_find_creatine_v2.mp4",Eat="https://r2cdn.perplexity.ai/comet/cmp_bikes_shipping_v3.mp4",Mat="https://r2cdn.perplexity.ai/comet/cmp_summarize_webpage_v2.mp4",Tat="https://r2cdn.perplexity.ai/comet/cmp_walking_route_v2.mp4",kat="https://r2cdn.perplexity.ai/comet/cmp_v2v_browsing_v2.mp4",Nat=()=>{const{$t:e}=X();return f.useMemo(()=>[{videoSrc:iat,fullVideoSrc:Sat,previewSrc:pat,label:e({id:"U51r44Fr7z",defaultMessage:"Master Your Inbox and Calendar"})},{videoSrc:aat,fullVideoSrc:_at,previewSrc:mat,label:e({id:"7rWLu0GI8D",defaultMessage:"Delegate the Basics"})},{videoSrc:uat,fullVideoSrc:Mat,previewSrc:vat,label:e({id:"0MeQ1Iywio",defaultMessage:"Get the Gist in Seconds"})},{videoSrc:dat,fullVideoSrc:Tat,previewSrc:xat,label:e({id:"zX2SKiQpSn",defaultMessage:"Automate the Clicks"})},{videoSrc:fat,fullVideoSrc:kat,previewSrc:bat,label:e({id:"k3OgfsBfr6",defaultMessage:"Browse with Your Voice"})},{videoSrc:lat,fullVideoSrc:Cat,previewSrc:gat,label:e({id:"Fi5Bt5+lYj",defaultMessage:"Quickly Find Answers in Your History"})},{videoSrc:oat,fullVideoSrc:wat,previewSrc:hat,label:e({id:"HHOfPSzTkI",defaultMessage:"Get Insights in One Click"})},{videoSrc:cat,fullVideoSrc:Eat,previewSrc:yat,label:e({id:"ytn1Ld8ocW",defaultMessage:"Reference Any Tab for Precise Answers"})}],[e])};function Aat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return f.useMemo(()=>r=>{t.forEach(s=>s(r))},t)}const qC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Lp(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function o7(e){return"nodeType"in e}function ta(e){var t,n;return e?Lp(e)?e:o7(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function i7(e){const{Document:t}=ta(e);return e instanceof t}function a1(e){return Lp(e)?!1:e instanceof ta(e).HTMLElement}function ope(e){return e instanceof ta(e).SVGElement}function Dp(e){return e?Lp(e)?e.document:o7(e)?i7(e)?e:a1(e)||ope(e)?e.ownerDocument:document:document:document}const Ko=qC?f.useLayoutEffect:f.useEffect;function KC(e){const t=f.useRef(e);return Ko(()=>{t.current=e}),f.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function Pat(){const e=f.useRef(null),t=f.useCallback((r,s)=>{e.current=setInterval(r,s)},[]),n=f.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Vv(e,t){t===void 0&&(t=[e]);const n=f.useRef(e);return Ko(()=>{n.current!==e&&(n.current=e)},t),n}function o1(e,t){const n=f.useRef();return f.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function $2(e){const t=KC(e),n=f.useRef(null),r=f.useCallback(s=>{s!==n.current&&t?.(s,n.current),n.current=s},[]);return[n,r]}function W2(e){const t=f.useRef();return f.useEffect(()=>{t.current=e},[e]),t.current}let rk={};function i1(e,t){return f.useMemo(()=>{if(t)return t;const n=rk[e]==null?0:rk[e]+1;return rk[e]=n,e+"-"+n},[e,t])}function ipe(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((a,o)=>{const i=Object.entries(o);for(const[c,u]of i){const d=a[c];d!=null&&(a[c]=d+e*u)}return a},{...t})}}const Um=ipe(1),$v=ipe(-1);function Rat(e){return"clientX"in e&&"clientY"in e}function YC(e){if(!e)return!1;const{KeyboardEvent:t}=ta(e.target);return t&&e instanceof t}function Iat(e){if(!e)return!1;const{TouchEvent:t}=ta(e.target);return t&&e instanceof t}function H2(e){if(Iat(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Rat(e)?{x:e.clientX,y:e.clientY}:null}const ef=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[ef.Translate.toString(e),ef.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),SK="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function jat(e){return e.matches(SK)?e:e.querySelector(SK)}const Oat={display:"none"};function Lat(e){let{id:t,value:n}=e;return A.createElement("div",{id:t,style:Oat},n)}function Dat(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return A.createElement("div",{id:t,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function Fat(){const[e,t]=f.useState("");return{announce:f.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const lpe=f.createContext(null);function Uat(e){const t=f.useContext(lpe);f.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Bat(){const[e]=f.useState(()=>new Set),t=f.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[f.useCallback(r=>{let{type:s,event:a}=r;e.forEach(o=>{var i;return(i=o[s])==null?void 0:i.call(o,a)})},[e]),t]}const Vat={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},$at={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Wat(e){let{announcements:t=$at,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=Vat}=e;const{announce:a,announcement:o}=Fat(),i=i1("DndLiveRegion"),[c,u]=f.useState(!1);if(f.useEffect(()=>{u(!0)},[]),Uat(f.useMemo(()=>({onDragStart(m){let{active:h}=m;a(t.onDragStart({active:h}))},onDragMove(m){let{active:h,over:p}=m;t.onDragMove&&a(t.onDragMove({active:h,over:p}))},onDragOver(m){let{active:h,over:p}=m;a(t.onDragOver({active:h,over:p}))},onDragEnd(m){let{active:h,over:p}=m;a(t.onDragEnd({active:h,over:p}))},onDragCancel(m){let{active:h,over:p}=m;a(t.onDragCancel({active:h,over:p}))}}),[a,t])),!c)return null;const d=A.createElement(A.Fragment,null,A.createElement(Lat,{id:r,value:s.draggable}),A.createElement(Dat,{id:i,announcement:o}));return n?Ss.createPortal(d,n):d}var Pr;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Pr||(Pr={}));function z2(){}function Hat(e,t){return f.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function zat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return f.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const Yo=Object.freeze({x:0,y:0});function l7(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Gat(e,t){const n=H2(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function c7(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function qat(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function $P(e){let{left:t,top:n,height:r,width:s}=e;return[{x:t,y:n},{x:t+s,y:n},{x:t,y:n+r},{x:t+s,y:n+r}]}function cpe(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function CK(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const BVt=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=CK(t,t.left,t.top),a=[];for(const o of r){const{id:i}=o,c=n.get(i);if(c){const u=l7(CK(c),s);a.push({id:i,data:{droppableContainer:o,value:u}})}}return a.sort(c7)},Kat=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=$P(t),a=[];for(const o of r){const{id:i}=o,c=n.get(i);if(c){const u=$P(c),d=s.reduce((h,p,g)=>h+l7(u[g],p),0),m=Number((d/4).toFixed(4));a.push({id:i,data:{droppableContainer:o,value:m}})}}return a.sort(c7)};function Yat(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height),o=s-r,i=a-n;if(r<s&&n<a){const c=t.width*t.height,u=e.width*e.height,d=o*i,m=d/(c+u-d);return Number(m.toFixed(4))}return 0}const Qat=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=[];for(const a of r){const{id:o}=a,i=n.get(o);if(i){const c=Yat(i,t);c>0&&s.push({id:o,data:{droppableContainer:a,value:c}})}}return s.sort(qat)};function Xat(e,t){const{top:n,left:r,bottom:s,right:a}=t;return n<=e.y&&e.y<=s&&r<=e.x&&e.x<=a}const Zat=e=>{let{droppableContainers:t,droppableRects:n,pointerCoordinates:r}=e;if(!r)return[];const s=[];for(const a of t){const{id:o}=a,i=n.get(o);if(i&&Xat(r,i)){const u=$P(i).reduce((m,h)=>m+l7(r,h),0),d=Number((u/4).toFixed(4));s.push({id:o,data:{droppableContainer:a,value:d}})}}return s.sort(c7)};function Jat(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function upe(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Yo}function eot(e){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];return s.reduce((o,i)=>({...o,top:o.top+e*i.y,bottom:o.bottom+e*i.y,left:o.left+e*i.x,right:o.right+e*i.x}),{...n})}}const tot=eot(1);function dpe(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function not(e,t,n){const r=dpe(t);if(!r)return e;const{scaleX:s,scaleY:a,x:o,y:i}=r,c=e.left-o-(1-s)*parseFloat(n),u=e.top-i-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),d=s?e.width/s:e.width,m=a?e.height/a:e.height;return{width:d,height:m,top:u,right:c+d,bottom:u+m,left:c}}const rot={ignoreTransform:!1};function Fp(e,t){t===void 0&&(t=rot);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:d}=ta(e).getComputedStyle(e);u&&(n=not(n,u,d))}const{top:r,left:s,width:a,height:o,bottom:i,right:c}=n;return{top:r,left:s,width:a,height:o,bottom:i,right:c}}function EK(e){return Fp(e,{ignoreTransform:!0})}function sot(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function aot(e,t){return t===void 0&&(t=ta(e).getComputedStyle(e)),t.position==="fixed"}function oot(e,t){t===void 0&&(t=ta(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const a=t[s];return typeof a=="string"?n.test(a):!1})}function QC(e,t){const n=[];function r(s){if(t!=null&&n.length>=t||!s)return n;if(i7(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!a1(s)||ope(s)||n.includes(s))return n;const a=ta(e).getComputedStyle(s);return s!==e&&oot(s,a)&&n.push(s),aot(s,a)?n:r(s.parentNode)}return e?r(e):n}function fpe(e){const[t]=QC(e,1);return t??null}function sk(e){return!qC||!e?null:Lp(e)?e:o7(e)?i7(e)||e===Dp(e).scrollingElement?window:a1(e)?e:null:null}function mpe(e){return Lp(e)?e.scrollX:e.scrollLeft}function hpe(e){return Lp(e)?e.scrollY:e.scrollTop}function WP(e){return{x:mpe(e),y:hpe(e)}}var $r;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})($r||($r={}));function ppe(e){return!qC||!e?!1:e===document.scrollingElement}function gpe(e){const t={x:0,y:0},n=ppe(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},s=e.scrollTop<=t.y,a=e.scrollLeft<=t.x,o=e.scrollTop>=r.y,i=e.scrollLeft>=r.x;return{isTop:s,isLeft:a,isBottom:o,isRight:i,maxScroll:r,minScroll:t}}const iot={x:.2,y:.2};function lot(e,t,n,r,s){let{top:a,left:o,right:i,bottom:c}=n;r===void 0&&(r=10),s===void 0&&(s=iot);const{isTop:u,isBottom:d,isLeft:m,isRight:h}=gpe(e),p={x:0,y:0},g={x:0,y:0},y={height:t.height*s.y,width:t.width*s.x};return!u&&a<=t.top+y.height?(p.y=$r.Backward,g.y=r*Math.abs((t.top+y.height-a)/y.height)):!d&&c>=t.bottom-y.height&&(p.y=$r.Forward,g.y=r*Math.abs((t.bottom-y.height-c)/y.height)),!h&&i>=t.right-y.width?(p.x=$r.Forward,g.x=r*Math.abs((t.right-y.width-i)/y.width)):!m&&o<=t.left+y.width&&(p.x=$r.Backward,g.x=r*Math.abs((t.left+y.width-o)/y.width)),{direction:p,speed:g}}function cot(e){if(e===document.scrollingElement){const{innerWidth:a,innerHeight:o}=window;return{top:0,left:0,right:a,bottom:o,width:a,height:o}}const{top:t,left:n,right:r,bottom:s}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:s,width:e.clientWidth,height:e.clientHeight}}function ype(e){return e.reduce((t,n)=>Um(t,WP(n)),Yo)}function uot(e){return e.reduce((t,n)=>t+mpe(n),0)}function dot(e){return e.reduce((t,n)=>t+hpe(n),0)}function vpe(e,t){if(t===void 0&&(t=Fp),!e)return;const{top:n,left:r,bottom:s,right:a}=t(e);fpe(e)&&(s<=0||a<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const fot=[["x",["left","right"],uot],["y",["top","bottom"],dot]];class u7{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=QC(n),s=ype(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[a,o,i]of fot)for(const c of o)Object.defineProperty(this,c,{get:()=>{const u=i(r),d=s[a]-u;return this.rect[c]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Uy{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var s;(s=this.target)==null||s.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function mot(e){const{EventTarget:t}=ta(e);return e instanceof t?e:Dp(e)}function ak(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var to;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(to||(to={}));function MK(e){e.preventDefault()}function hot(e){e.stopPropagation()}var un;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(un||(un={}));const xpe={start:[un.Space,un.Enter],cancel:[un.Esc],end:[un.Space,un.Enter,un.Tab]},pot=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case un.Right:return{...n,x:n.x+25};case un.Left:return{...n,x:n.x-25};case un.Down:return{...n,y:n.y+25};case un.Up:return{...n,y:n.y-25}}};class bpe{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Uy(Dp(n)),this.windowListeners=new Uy(ta(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(to.Resize,this.handleCancel),this.windowListeners.add(to.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(to.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&vpe(r),n(Yo)}handleKeyDown(t){if(YC(t)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:a=xpe,coordinateGetter:o=pot,scrollBehavior:i="smooth"}=s,{code:c}=t;if(a.end.includes(c)){this.handleEnd(t);return}if(a.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:u}=r.current,d=u?{x:u.left,y:u.top}:Yo;this.referenceCoordinates||(this.referenceCoordinates=d);const m=o(t,{active:n,context:r.current,currentCoordinates:d});if(m){const h=$v(m,d),p={x:0,y:0},{scrollableAncestors:g}=r.current;for(const y of g){const v=t.code,{isTop:x,isRight:b,isLeft:_,isBottom:w,maxScroll:S,minScroll:C}=gpe(y),E=cot(y),M={x:Math.min(v===un.Right?E.right-E.width/2:E.right,Math.max(v===un.Right?E.left:E.left+E.width/2,m.x)),y:Math.min(v===un.Down?E.bottom-E.height/2:E.bottom,Math.max(v===un.Down?E.top:E.top+E.height/2,m.y))},T=v===un.Right&&!b||v===un.Left&&!_,I=v===un.Down&&!w||v===un.Up&&!x;if(T&&M.x!==m.x){const j=y.scrollLeft+h.x,N=v===un.Right&&j<=S.x||v===un.Left&&j>=C.x;if(N&&!h.y){y.scrollTo({left:j,behavior:i});return}N?p.x=y.scrollLeft-j:p.x=v===un.Right?y.scrollLeft-S.x:y.scrollLeft-C.x,p.x&&y.scrollBy({left:-p.x,behavior:i});break}else if(I&&M.y!==m.y){const j=y.scrollTop+h.y,N=v===un.Down&&j<=S.y||v===un.Up&&j>=C.y;if(N&&!h.x){y.scrollTo({top:j,behavior:i});return}N?p.y=y.scrollTop-j:p.y=v===un.Down?y.scrollTop-S.y:y.scrollTop-C.y,p.y&&y.scrollBy({top:-p.y,behavior:i});break}}this.handleMove(t,Um($v(m,this.referenceCoordinates),p))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}bpe.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=xpe,onActivation:s}=t,{active:a}=n;const{code:o}=e.nativeEvent;if(r.start.includes(o)){const i=a.activatorNode.current;return i&&e.target!==i?!1:(e.preventDefault(),s?.({event:e.nativeEvent}),!0)}return!1}}];function TK(e){return!!(e&&"distance"in e)}function kK(e){return!!(e&&"delay"in e)}class d7{constructor(t,n,r){var s;r===void 0&&(r=mot(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:a}=t,{target:o}=a;this.props=t,this.events=n,this.document=Dp(o),this.documentListeners=new Uy(this.document),this.listeners=new Uy(r),this.windowListeners=new Uy(ta(o)),this.initialCoordinates=(s=H2(a))!=null?s:Yo,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(to.Resize,this.handleCancel),this.windowListeners.add(to.DragStart,MK),this.windowListeners.add(to.VisibilityChange,this.handleCancel),this.windowListeners.add(to.ContextMenu,MK),this.documentListeners.add(to.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(kK(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(TK(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:s}=this.props;s(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(to.Click,hot,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(to.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:s,props:a}=this,{onMove:o,options:{activationConstraint:i}}=a;if(!s)return;const c=(n=H2(t))!=null?n:Yo,u=$v(s,c);if(!r&&i){if(TK(i)){if(i.tolerance!=null&&ak(u,i.tolerance))return this.handleCancel();if(ak(u,i.distance))return this.handleStart()}if(kK(i)&&ak(u,i.tolerance))return this.handleCancel();this.handlePending(i,u);return}t.cancelable&&t.preventDefault(),o(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===un.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const got={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class f7 extends d7{constructor(t){const{event:n}=t,r=Dp(n.target);super(t,got,r)}}f7.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r?.({event:n}),!0)}}];const yot={move:{name:"mousemove"},end:{name:"mouseup"}};var HP;(function(e){e[e.RightClick=2]="RightClick"})(HP||(HP={}));class vot extends d7{constructor(t){super(t,yot,Dp(t.event.target))}}vot.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===HP.RightClick?!1:(r?.({event:n}),!0)}}];const ok={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class xot extends d7{constructor(t){super(t,ok)}static setup(){return window.addEventListener(ok.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(ok.move.name,t)};function t(){}}}xot.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:s}=n;return s.length>1?!1:(r?.({event:n}),!0)}}];var By;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(By||(By={}));var G2;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(G2||(G2={}));function bot(e){let{acceleration:t,activator:n=By.Pointer,canScroll:r,draggingRect:s,enabled:a,interval:o=5,order:i=G2.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:d,delta:m,threshold:h}=e;const p=wot({delta:m,disabled:!a}),[g,y]=Pat(),v=f.useRef({x:0,y:0}),x=f.useRef({x:0,y:0}),b=f.useMemo(()=>{switch(n){case By.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case By.DraggableRect:return s}},[n,s,c]),_=f.useRef(null),w=f.useCallback(()=>{const C=_.current;if(!C)return;const E=v.current.x*x.current.x,M=v.current.y*x.current.y;C.scrollBy(E,M)},[]),S=f.useMemo(()=>i===G2.TreeOrder?[...u].reverse():u,[i,u]);f.useEffect(()=>{if(!a||!u.length||!b){y();return}for(const C of S){if(r?.(C)===!1)continue;const E=u.indexOf(C),M=d[E];if(!M)continue;const{direction:T,speed:I}=lot(C,M,b,t,h);for(const j of["x","y"])p[j][T[j]]||(I[j]=0,T[j]=0);if(I.x>0||I.y>0){y(),_.current=C,g(w,o),v.current=I,x.current=T;return}}v.current={x:0,y:0},x.current={x:0,y:0},y()},[t,w,r,y,a,o,JSON.stringify(b),JSON.stringify(p),g,u,S,d,JSON.stringify(h)])}const _ot={x:{[$r.Backward]:!1,[$r.Forward]:!1},y:{[$r.Backward]:!1,[$r.Forward]:!1}};function wot(e){let{delta:t,disabled:n}=e;const r=W2(t);return o1(s=>{if(n||!r||!s)return _ot;const a={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[$r.Backward]:s.x[$r.Backward]||a.x===-1,[$r.Forward]:s.x[$r.Forward]||a.x===1},y:{[$r.Backward]:s.y[$r.Backward]||a.y===-1,[$r.Forward]:s.y[$r.Forward]||a.y===1}}},[n,t,r])}function Sot(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return o1(s=>{var a;return t==null?null:(a=r??s)!=null?a:null},[r,t])}function Cot(e,t){return f.useMemo(()=>e.reduce((n,r)=>{const{sensor:s}=r,a=s.activators.map(o=>({eventName:o.eventName,handler:t(o.handler,r)}));return[...n,...a]},[]),[e,t])}var Wv;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Wv||(Wv={}));var zP;(function(e){e.Optimized="optimized"})(zP||(zP={}));const NK=new Map;function Eot(e,t){let{dragging:n,dependencies:r,config:s}=t;const[a,o]=f.useState(null),{frequency:i,measure:c,strategy:u}=s,d=f.useRef(e),m=v(),h=Vv(m),p=f.useCallback(function(x){x===void 0&&(x=[]),!h.current&&o(b=>b===null?x:b.concat(x.filter(_=>!b.includes(_))))},[h]),g=f.useRef(null),y=o1(x=>{if(m&&!n)return NK;if(!x||x===NK||d.current!==e||a!=null){const b=new Map;for(let _ of e){if(!_)continue;if(a&&a.length>0&&!a.includes(_.id)&&_.rect.current){b.set(_.id,_.rect.current);continue}const w=_.node.current,S=w?new u7(c(w),w):null;_.rect.current=S,S&&b.set(_.id,S)}return b}return x},[e,a,n,m,c]);return f.useEffect(()=>{d.current=e},[e]),f.useEffect(()=>{m||p()},[n,m]),f.useEffect(()=>{a&&a.length>0&&o(null)},[JSON.stringify(a)]),f.useEffect(()=>{m||typeof i!="number"||g.current!==null||(g.current=setTimeout(()=>{p(),g.current=null},i))},[i,m,p,...r]),{droppableRects:y,measureDroppableContainers:p,measuringScheduled:a!=null};function v(){switch(u){case Wv.Always:return!1;case Wv.BeforeDragging:return n;default:return!n}}}function m7(e,t){return o1(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Mot(e,t){return m7(e,t)}function Tot(e){let{callback:t,disabled:n}=e;const r=KC(t),s=f.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(r)},[r,n]);return f.useEffect(()=>()=>s?.disconnect(),[s]),s}function XC(e){let{callback:t,disabled:n}=e;const r=KC(t),s=f.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(r)},[n]);return f.useEffect(()=>()=>s?.disconnect(),[s]),s}function kot(e){return new u7(Fp(e),e)}function AK(e,t,n){t===void 0&&(t=kot);const[r,s]=f.useState(null);function a(){s(c=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=c??n)!=null?u:null}const d=t(e);return JSON.stringify(c)===JSON.stringify(d)?c:d})}const o=Tot({callback(c){if(e)for(const u of c){const{type:d,target:m}=u;if(d==="childList"&&m instanceof HTMLElement&&m.contains(e)){a();break}}}}),i=XC({callback:a});return Ko(()=>{a(),e?(i?.observe(e),o?.observe(document.body,{childList:!0,subtree:!0})):(i?.disconnect(),o?.disconnect())},[e]),r}function Not(e){const t=m7(e);return upe(e,t)}const PK=[];function Aot(e){const t=f.useRef(e),n=o1(r=>e?r&&r!==PK&&e&&t.current&&e.parentNode===t.current.parentNode?r:QC(e):PK,[e]);return f.useEffect(()=>{t.current=e},[e]),n}function Pot(e){const[t,n]=f.useState(null),r=f.useRef(e),s=f.useCallback(a=>{const o=sk(a.target);o&&n(i=>i?(i.set(o,WP(o)),new Map(i)):null)},[]);return f.useEffect(()=>{const a=r.current;if(e!==a){o(a);const i=e.map(c=>{const u=sk(c);return u?(u.addEventListener("scroll",s,{passive:!0}),[u,WP(u)]):null}).filter(c=>c!=null);n(i.length?new Map(i):null),r.current=e}return()=>{o(e),o(a)};function o(i){i.forEach(c=>{const u=sk(c);u?.removeEventListener("scroll",s)})}},[s,e]),f.useMemo(()=>e.length?t?Array.from(t.values()).reduce((a,o)=>Um(a,o),Yo):ype(e):Yo,[e,t])}function RK(e,t){t===void 0&&(t=[]);const n=f.useRef(null);return f.useEffect(()=>{n.current=null},t),f.useEffect(()=>{const r=e!==Yo;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?$v(e,n.current):Yo}function Rot(e){f.useEffect(()=>{if(!qC)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n?.()}},e.map(t=>{let{sensor:n}=t;return n}))}function Iot(e,t){return f.useMemo(()=>e.reduce((n,r)=>{let{eventName:s,handler:a}=r;return n[s]=o=>{a(o,t)},n},{}),[e,t])}function _pe(e){return f.useMemo(()=>e?sot(e):null,[e])}const IK=[];function jot(e,t){t===void 0&&(t=Fp);const[n]=e,r=_pe(n?ta(n):null),[s,a]=f.useState(IK);function o(){a(()=>e.length?e.map(c=>ppe(c)?r:new u7(t(c),c)):IK)}const i=XC({callback:o});return Ko(()=>{i?.disconnect(),o(),e.forEach(c=>i?.observe(c))},[e]),s}function wpe(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return a1(t)?t:e}function Oot(e){let{measure:t}=e;const[n,r]=f.useState(null),s=f.useCallback(u=>{for(const{target:d}of u)if(a1(d)){r(m=>{const h=t(d);return m?{...m,width:h.width,height:h.height}:h});break}},[t]),a=XC({callback:s}),o=f.useCallback(u=>{const d=wpe(u);a?.disconnect(),d&&a?.observe(d),r(d?t(d):null)},[t,a]),[i,c]=$2(o);return f.useMemo(()=>({nodeRef:i,rect:n,setRef:c}),[n,i,c])}const Lot=[{sensor:f7,options:{}},{sensor:bpe,options:{}}],Dot={current:{}},x_={draggable:{measure:EK},droppable:{measure:EK,strategy:Wv.WhileDragging,frequency:zP.Optimized},dragOverlay:{measure:Fp}};class Vy extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const Fot={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Vy,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:z2},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:x_,measureDroppableContainers:z2,windowRect:null,measuringScheduled:!1},Spe={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:z2,draggableNodes:new Map,over:null,measureDroppableContainers:z2},l1=f.createContext(Spe),Cpe=f.createContext(Fot);function Uot(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Vy}}}function Bot(e,t){switch(t.type){case Pr.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Pr.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Pr.DragEnd:case Pr.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Pr.RegisterDroppable:{const{element:n}=t,{id:r}=n,s=new Vy(e.droppable.containers);return s.set(r,n),{...e,droppable:{...e.droppable,containers:s}}}case Pr.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const o=new Vy(e.droppable.containers);return o.set(n,{...a,disabled:s}),{...e,droppable:{...e.droppable,containers:o}}}case Pr.UnregisterDroppable:{const{id:n,key:r}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const a=new Vy(e.droppable.containers);return a.delete(n),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function Vot(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:s}=f.useContext(l1),a=W2(r),o=W2(n?.id);return f.useEffect(()=>{if(!t&&!r&&a&&o!=null){if(!YC(a)||document.activeElement===a.target)return;const i=s.get(o);if(!i)return;const{activatorNode:c,node:u}=i;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const d of[c.current,u.current]){if(!d)continue;const m=jat(d);if(m){m.focus();break}}})}},[r,t,s,o,a]),null}function Epe(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((s,a)=>a({transform:s,...r}),n):n}function $ot(e){return f.useMemo(()=>({draggable:{...x_.draggable,...e?.draggable},droppable:{...x_.droppable,...e?.droppable},dragOverlay:{...x_.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function Wot(e){let{activeNode:t,measure:n,initialRect:r,config:s=!0}=e;const a=f.useRef(!1),{x:o,y:i}=typeof s=="boolean"?{x:s,y:s}:s;Ko(()=>{if(!o&&!i||!t){a.current=!1;return}if(a.current||!r)return;const u=t?.node.current;if(!u||u.isConnected===!1)return;const d=n(u),m=upe(d,r);if(o||(m.x=0),i||(m.y=0),a.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const h=fpe(u);h&&h.scrollBy({top:m.y,left:m.x})}},[t,o,i,r,n])}const ZC=f.createContext({...Yo,scaleX:1,scaleY:1});var Wc;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Wc||(Wc={}));const Hot=f.memo(function(t){var n,r,s,a;let{id:o,accessibility:i,autoScroll:c=!0,children:u,sensors:d=Lot,collisionDetection:m=Qat,measuring:h,modifiers:p,...g}=t;const y=f.useReducer(Bot,void 0,Uot),[v,x]=y,[b,_]=Bat(),[w,S]=f.useState(Wc.Uninitialized),C=w===Wc.Initialized,{draggable:{active:E,nodes:M,translate:T},droppable:{containers:I}}=v,j=E!=null?M.get(E):null,N=f.useRef({initial:null,translated:null}),P=f.useMemo(()=>{var sn;return E!=null?{id:E,data:(sn=j?.data)!=null?sn:Dot,rect:N}:null},[E,j]),R=f.useRef(null),[k,O]=f.useState(null),[L,F]=f.useState(null),U=Vv(g,Object.values(g)),V=i1("DndDescribedBy",o),W=f.useMemo(()=>I.getEnabled(),[I]),H=$ot(h),{droppableRects:G,measureDroppableContainers:K,measuringScheduled:$}=Eot(W,{dragging:C,dependencies:[T.x,T.y],config:H.droppable}),q=Sot(M,E),Z=f.useMemo(()=>L?H2(L):null,[L]),se=wr(),Y=Mot(q,H.draggable.measure);Wot({activeNode:E!=null?M.get(E):null,config:se.layoutShiftCompensation,initialRect:Y,measure:H.draggable.measure});const Q=AK(q,H.draggable.measure,Y),re=AK(q?q.parentElement:null),te=f.useRef({activatorEvent:null,active:null,activeNode:q,collisionRect:null,collisions:null,droppableRects:G,draggableNodes:M,draggingNode:null,draggingNodeRect:null,droppableContainers:I,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),le=I.getNodeFor((n=te.current.over)==null?void 0:n.id),ie=Oot({measure:H.dragOverlay.measure}),pe=(r=ie.nodeRef.current)!=null?r:q,me=C?(s=ie.rect)!=null?s:Q:null,de=!!(ie.nodeRef.current&&ie.rect),ve=Not(de?null:Q),Ae=_pe(pe?ta(pe):null),Se=Aot(C?le??q:null),De=jot(Se),Ne=Epe(p,{transform:{x:T.x-ve.x,y:T.y-ve.y,scaleX:1,scaleY:1},activatorEvent:L,active:P,activeNodeRect:Q,containerNodeRect:re,draggingNodeRect:me,over:te.current.over,overlayNodeRect:ie.rect,scrollableAncestors:Se,scrollableAncestorRects:De,windowRect:Ae}),Pe=Z?Um(Z,T):null,dt=Pot(Se),et=RK(dt),Et=RK(dt,[Q]),ue=Um(Ne,et),Ue=me?tot(me,Ne):null,Ct=P&&Ue?m({active:P,collisionRect:Ue,droppableRects:G,droppableContainers:W,pointerCoordinates:Pe}):null,Ye=cpe(Ct,"id"),[mt,We]=f.useState(null),Oe=de?Ne:Um(Ne,Et),Tt=Jat(Oe,(a=mt?.rect)!=null?a:null,Q),$e=f.useRef(null),ct=f.useCallback((sn,kt)=>{let{sensor:Kt,options:xe}=kt;if(R.current==null)return;const qe=M.get(R.current);if(!qe)return;const He=sn.nativeEvent,ze=new Kt({active:R.current,activeNode:qe,event:He,options:xe,context:te,onAbort(it){if(!M.get(it))return;const{onDragAbort:Vt}=U.current,cn={id:it};Vt?.(cn),b({type:"onDragAbort",event:cn})},onPending(it,Gt,Vt,cn){if(!M.get(it))return;const{onDragPending:Sr}=U.current,ns={id:it,constraint:Gt,initialCoordinates:Vt,offset:cn};Sr?.(ns),b({type:"onDragPending",event:ns})},onStart(it){const Gt=R.current;if(Gt==null)return;const Vt=M.get(Gt);if(!Vt)return;const{onDragStart:cn}=U.current,Qn={activatorEvent:He,active:{id:Gt,data:Vt.data,rect:N}};Ss.unstable_batchedUpdates(()=>{cn?.(Qn),S(Wc.Initializing),x({type:Pr.DragStart,initialCoordinates:it,active:Gt}),b({type:"onDragStart",event:Qn}),O($e.current),F(He)})},onMove(it){x({type:Pr.DragMove,coordinates:it})},onEnd:ot(Pr.DragEnd),onCancel:ot(Pr.DragCancel)});$e.current=ze;function ot(it){return async function(){const{active:Vt,collisions:cn,over:Qn,scrollAdjustedTranslate:Sr}=te.current;let ns=null;if(Vt&&Sr){const{cancelDrop:Os}=U.current;ns={activatorEvent:He,active:Vt,collisions:cn,delta:Sr,over:Qn},it===Pr.DragEnd&&typeof Os=="function"&&await Promise.resolve(Os(ns))&&(it=Pr.DragCancel)}R.current=null,Ss.unstable_batchedUpdates(()=>{x({type:it}),S(Wc.Uninitialized),We(null),O(null),F(null),$e.current=null;const Os=it===Pr.DragEnd?"onDragEnd":"onDragCancel";if(ns){const fi=U.current[Os];fi?.(ns),b({type:Os,event:ns})}})}}},[M]),yt=f.useCallback((sn,kt)=>(Kt,xe)=>{const qe=Kt.nativeEvent,He=M.get(xe);if(R.current!==null||!He||qe.dndKit||qe.defaultPrevented)return;const ze={active:He};sn(Kt,kt.options,ze)===!0&&(qe.dndKit={capturedBy:kt.sensor},R.current=xe,ct(Kt,kt))},[M,ct]),ht=Cot(d,yt);Rot(d),Ko(()=>{Q&&w===Wc.Initializing&&S(Wc.Initialized)},[Q,w]),f.useEffect(()=>{const{onDragMove:sn}=U.current,{active:kt,activatorEvent:Kt,collisions:xe,over:qe}=te.current;if(!kt||!Kt)return;const He={active:kt,activatorEvent:Kt,collisions:xe,delta:{x:ue.x,y:ue.y},over:qe};Ss.unstable_batchedUpdates(()=>{sn?.(He),b({type:"onDragMove",event:He})})},[ue.x,ue.y]),f.useEffect(()=>{const{active:sn,activatorEvent:kt,collisions:Kt,droppableContainers:xe,scrollAdjustedTranslate:qe}=te.current;if(!sn||R.current==null||!kt||!qe)return;const{onDragOver:He}=U.current,ze=xe.get(Ye),ot=ze&&ze.rect.current?{id:ze.id,rect:ze.rect.current,data:ze.data,disabled:ze.disabled}:null,it={active:sn,activatorEvent:kt,collisions:Kt,delta:{x:qe.x,y:qe.y},over:ot};Ss.unstable_batchedUpdates(()=>{We(ot),He?.(it),b({type:"onDragOver",event:it})})},[Ye]),Ko(()=>{te.current={activatorEvent:L,active:P,activeNode:q,collisionRect:Ue,collisions:Ct,droppableRects:G,draggableNodes:M,draggingNode:pe,draggingNodeRect:me,droppableContainers:I,over:mt,scrollableAncestors:Se,scrollAdjustedTranslate:ue},N.current={initial:me,translated:Ue}},[P,q,Ct,Ue,M,pe,me,G,I,mt,Se,ue]),bot({...se,delta:T,draggingRect:Ue,pointerCoordinates:Pe,scrollableAncestors:Se,scrollableAncestorRects:De});const ut=f.useMemo(()=>({active:P,activeNode:q,activeNodeRect:Q,activatorEvent:L,collisions:Ct,containerNodeRect:re,dragOverlay:ie,draggableNodes:M,droppableContainers:I,droppableRects:G,over:mt,measureDroppableContainers:K,scrollableAncestors:Se,scrollableAncestorRects:De,measuringConfiguration:H,measuringScheduled:$,windowRect:Ae}),[P,q,Q,L,Ct,re,ie,M,I,G,mt,K,Se,De,H,$,Ae]),fn=f.useMemo(()=>({activatorEvent:L,activators:ht,active:P,activeNodeRect:Q,ariaDescribedById:{draggable:V},dispatch:x,draggableNodes:M,over:mt,measureDroppableContainers:K}),[L,ht,P,Q,x,V,M,mt,K]);return A.createElement(lpe.Provider,{value:_},A.createElement(l1.Provider,{value:fn},A.createElement(Cpe.Provider,{value:ut},A.createElement(ZC.Provider,{value:Tt},u)),A.createElement(Vot,{disabled:i?.restoreFocus===!1})),A.createElement(Wat,{...i,hiddenTextDescribedById:V}));function wr(){const sn=k?.autoScrollEnabled===!1,kt=typeof c=="object"?c.enabled===!1:c===!1,Kt=C&&!sn&&!kt;return typeof c=="object"?{...c,enabled:Kt}:{enabled:Kt}}}),zot=f.createContext(null),jK="button",Got="Draggable";function qot(e){let{id:t,data:n,disabled:r=!1,attributes:s}=e;const a=i1(Got),{activators:o,activatorEvent:i,active:c,activeNodeRect:u,ariaDescribedById:d,draggableNodes:m,over:h}=f.useContext(l1),{role:p=jK,roleDescription:g="draggable",tabIndex:y=0}=s??{},v=c?.id===t,x=f.useContext(v?ZC:zot),[b,_]=$2(),[w,S]=$2(),C=Iot(o,t),E=Vv(n);Ko(()=>(m.set(t,{id:t,key:a,node:b,activatorNode:w,data:E}),()=>{const T=m.get(t);T&&T.key===a&&m.delete(t)}),[m,t]);const M=f.useMemo(()=>({role:p,tabIndex:y,"aria-disabled":r,"aria-pressed":v&&p===jK?!0:void 0,"aria-roledescription":g,"aria-describedby":d.draggable}),[r,p,y,v,g,d.draggable]);return{active:c,activatorEvent:i,activeNodeRect:u,attributes:M,isDragging:v,listeners:r?void 0:C,node:b,over:h,setNodeRef:_,setActivatorNodeRef:S,transform:x}}function Mpe(){return f.useContext(Cpe)}const Kot="Droppable",Yot={timeout:25};function Qot(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:s}=e;const a=i1(Kot),{active:o,dispatch:i,over:c,measureDroppableContainers:u}=f.useContext(l1),d=f.useRef({disabled:n}),m=f.useRef(!1),h=f.useRef(null),p=f.useRef(null),{disabled:g,updateMeasurementsFor:y,timeout:v}={...Yot,...s},x=Vv(y??r),b=f.useCallback(()=>{if(!m.current){m.current=!0;return}p.current!=null&&clearTimeout(p.current),p.current=setTimeout(()=>{u(Array.isArray(x.current)?x.current:[x.current]),p.current=null},v)},[v]),_=XC({callback:b,disabled:g||!o}),w=f.useCallback((M,T)=>{_&&(T&&(_.unobserve(T),m.current=!1),M&&_.observe(M))},[_]),[S,C]=$2(w),E=Vv(t);return f.useEffect(()=>{!_||!S.current||(_.disconnect(),m.current=!1,_.observe(S.current))},[S,_]),f.useEffect(()=>(i({type:Pr.RegisterDroppable,element:{id:r,key:a,disabled:n,node:S,rect:h,data:E}}),()=>i({type:Pr.UnregisterDroppable,key:a,id:r})),[r]),f.useEffect(()=>{n!==d.current.disabled&&(i({type:Pr.SetDroppableDisabled,id:r,key:a,disabled:n}),d.current.disabled=n)},[r,a,n,i]),{active:o,rect:h,isOver:c?.id===r,node:S,over:c,setNodeRef:C}}function Xot(e){let{animation:t,children:n}=e;const[r,s]=f.useState(null),[a,o]=f.useState(null),i=W2(n);return!n&&!r&&i&&s(i),Ko(()=>{if(!a)return;const c=r?.key,u=r?.props.id;if(c==null||u==null){s(null);return}Promise.resolve(t(u,a)).then(()=>{s(null)})},[t,r,a]),A.createElement(A.Fragment,null,n,r?f.cloneElement(r,{ref:o}):null)}const Zot={x:0,y:0,scaleX:1,scaleY:1};function Jot(e){let{children:t}=e;return A.createElement(l1.Provider,{value:Spe},A.createElement(ZC.Provider,{value:Zot},t))}const eit={position:"fixed",touchAction:"none"},tit=e=>YC(e)?"transform 250ms ease":void 0,nit=f.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:s,children:a,className:o,rect:i,style:c,transform:u,transition:d=tit}=e;if(!i)return null;const m=s?u:{...u,scaleX:1,scaleY:1},h={...eit,width:i.width,height:i.height,top:i.top,left:i.left,transform:ef.Transform.toString(m),transformOrigin:s&&r?Gat(r,i):void 0,transition:typeof d=="function"?d(r):d,...c};return A.createElement(n,{className:o,style:h,ref:t},a)}),rit=e=>t=>{let{active:n,dragOverlay:r}=t;const s={},{styles:a,className:o}=e;if(a!=null&&a.active)for(const[i,c]of Object.entries(a.active))c!==void 0&&(s[i]=n.node.style.getPropertyValue(i),n.node.style.setProperty(i,c));if(a!=null&&a.dragOverlay)for(const[i,c]of Object.entries(a.dragOverlay))c!==void 0&&r.node.style.setProperty(i,c);return o!=null&&o.active&&n.node.classList.add(o.active),o!=null&&o.dragOverlay&&r.node.classList.add(o.dragOverlay),function(){for(const[c,u]of Object.entries(s))n.node.style.setProperty(c,u);o!=null&&o.active&&n.node.classList.remove(o.active)}},sit=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:ef.Transform.toString(t)},{transform:ef.Transform.toString(n)}]},ait={duration:250,easing:"ease",keyframes:sit,sideEffects:rit({styles:{active:{opacity:"0"}}})};function oit(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=e;return KC((a,o)=>{if(t===null)return;const i=n.get(a);if(!i)return;const c=i.node.current;if(!c)return;const u=wpe(o);if(!u)return;const{transform:d}=ta(o).getComputedStyle(o),m=dpe(d);if(!m)return;const h=typeof t=="function"?t:iit(t);return vpe(c,s.draggable.measure),h({active:{id:a,data:i.data,node:c,rect:s.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:o,rect:s.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:s,transform:m})})}function iit(e){const{duration:t,easing:n,sideEffects:r,keyframes:s}={...ait,...e};return a=>{let{active:o,dragOverlay:i,transform:c,...u}=a;if(!t)return;const d={x:i.rect.left-o.rect.left,y:i.rect.top-o.rect.top},m={scaleX:c.scaleX!==1?o.rect.width*c.scaleX/i.rect.width:1,scaleY:c.scaleY!==1?o.rect.height*c.scaleY/i.rect.height:1},h={x:c.x-d.x,y:c.y-d.y,...m},p=s({...u,active:o,dragOverlay:i,transform:{initial:c,final:h}}),[g]=p,y=p[p.length-1];if(JSON.stringify(g)===JSON.stringify(y))return;const v=r?.({active:o,dragOverlay:i,...u}),x=i.node.animate(p,{duration:t,easing:n,fill:"forwards"});return new Promise(b=>{x.onfinish=()=>{v?.(),b()}})}}let OK=0;function lit(e){return f.useMemo(()=>{if(e!=null)return OK++,OK},[e])}const VVt=A.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:s,transition:a,modifiers:o,wrapperElement:i="div",className:c,zIndex:u=999}=e;const{activatorEvent:d,active:m,activeNodeRect:h,containerNodeRect:p,draggableNodes:g,droppableContainers:y,dragOverlay:v,over:x,measuringConfiguration:b,scrollableAncestors:_,scrollableAncestorRects:w,windowRect:S}=Mpe(),C=f.useContext(ZC),E=lit(m?.id),M=Epe(o,{activatorEvent:d,active:m,activeNodeRect:h,containerNodeRect:p,draggingNodeRect:v.rect,over:x,overlayNodeRect:v.rect,scrollableAncestors:_,scrollableAncestorRects:w,transform:C,windowRect:S}),T=m7(h),I=oit({config:r,draggableNodes:g,droppableContainers:y,measuringConfiguration:b}),j=T?v.setRef:void 0;return A.createElement(Jot,null,A.createElement(Xot,{animation:I},m&&E?A.createElement(nit,{key:E,id:m.id,ref:j,as:i,activatorEvent:d,adjustScale:t,className:c,transition:a,rect:T,style:{zIndex:u,...s},transform:M},n):null))});function h7(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function cit(e,t){return e.reduce((n,r,s)=>{const a=t.get(r);return a&&(n[s]=a),n},Array(e.length))}function rb(e){return e!==null&&e>=0}function uit(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function dit(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Tpe=e=>{let{rects:t,activeIndex:n,overIndex:r,index:s}=e;const a=h7(t,r,n),o=t[s],i=a[s];return!i||!o?null:{x:i.left-o.left,y:i.top-o.top,scaleX:i.width/o.width,scaleY:i.height/o.height}},sb={scaleX:1,scaleY:1},$Vt=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:s,rects:a,overIndex:o}=e;const i=(t=a[n])!=null?t:r;if(!i)return null;if(s===n){const u=a[o];return u?{x:0,y:n<o?u.top+u.height-(i.top+i.height):u.top-i.top,...sb}:null}const c=fit(a,s,n);return s>n&&s<=o?{x:0,y:-i.height-c,...sb}:s<n&&s>=o?{x:0,y:i.height+c,...sb}:{x:0,y:0,...sb}};function fit(e,t,n){const r=e[t],s=e[t-1],a=e[t+1];return r?n<t?s?r.top-(s.top+s.height):a?a.top-(r.top+r.height):0:a?a.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const kpe="Sortable",Npe=A.createContext({activeIndex:-1,containerId:kpe,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Tpe,disabled:{draggable:!1,droppable:!1}});function mit(e){let{children:t,id:n,items:r,strategy:s=Tpe,disabled:a=!1}=e;const{active:o,dragOverlay:i,droppableRects:c,over:u,measureDroppableContainers:d}=Mpe(),m=i1(kpe,n),h=i.rect!==null,p=f.useMemo(()=>r.map(C=>typeof C=="object"&&"id"in C?C.id:C),[r]),g=o!=null,y=o?p.indexOf(o.id):-1,v=u?p.indexOf(u.id):-1,x=f.useRef(p),b=!uit(p,x.current),_=v!==-1&&y===-1||b,w=dit(a);Ko(()=>{b&&g&&d(p)},[b,p,g,d]),f.useEffect(()=>{x.current=p},[p]);const S=f.useMemo(()=>({activeIndex:y,containerId:m,disabled:w,disableTransforms:_,items:p,overIndex:v,useDragOverlay:h,sortedRects:cit(p,c),strategy:s}),[y,m,w.draggable,w.droppable,_,p,v,c,h,s]);return A.createElement(Npe.Provider,{value:S},t)}const hit=e=>{let{id:t,items:n,activeIndex:r,overIndex:s}=e;return h7(n,r,s).indexOf(t)},pit=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:s,items:a,newIndex:o,previousItems:i,previousContainerId:c,transition:u}=e;return!u||!r||i!==a&&s===o?!1:n?!0:o!==s&&t===c},git={duration:200,easing:"ease"},Ape="transform",yit=ef.Transition.toString({property:Ape,duration:0,easing:"linear"}),vit={roleDescription:"sortable"};function xit(e){let{disabled:t,index:n,node:r,rect:s}=e;const[a,o]=f.useState(null),i=f.useRef(n);return Ko(()=>{if(!t&&n!==i.current&&r.current){const c=s.current;if(c){const u=Fp(r.current,{ignoreTransform:!0}),d={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(d.x||d.y)&&o(d)}}n!==i.current&&(i.current=n)},[t,n,r,s]),f.useEffect(()=>{a&&o(null)},[a]),a}function bit(e){let{animateLayoutChanges:t=pit,attributes:n,disabled:r,data:s,getNewIndex:a=hit,id:o,strategy:i,resizeObserverConfig:c,transition:u=git}=e;const{items:d,containerId:m,activeIndex:h,disabled:p,disableTransforms:g,sortedRects:y,overIndex:v,useDragOverlay:x,strategy:b}=f.useContext(Npe),_=_it(r,p),w=d.indexOf(o),S=f.useMemo(()=>({sortable:{containerId:m,index:w,items:d},...s}),[m,s,w,d]),C=f.useMemo(()=>d.slice(d.indexOf(o)),[d,o]),{rect:E,node:M,isOver:T,setNodeRef:I}=Qot({id:o,data:S,disabled:_.droppable,resizeObserverConfig:{updateMeasurementsFor:C,...c}}),{active:j,activatorEvent:N,activeNodeRect:P,attributes:R,setNodeRef:k,listeners:O,isDragging:L,over:F,setActivatorNodeRef:U,transform:V}=qot({id:o,data:S,attributes:{...vit,...n},disabled:_.draggable}),W=Aat(I,k),H=!!j,G=H&&!g&&rb(h)&&rb(v),K=!x&&L,$=K&&G?V:null,Z=G?$??(i??b)({rects:y,activeNodeRect:P,activeIndex:h,overIndex:v,index:w}):null,se=rb(h)&&rb(v)?a({id:o,items:d,activeIndex:h,overIndex:v}):w,Y=j?.id,Q=f.useRef({activeId:Y,items:d,newIndex:se,containerId:m}),re=d!==Q.current.items,te=t({active:j,containerId:m,isDragging:L,isSorting:H,id:o,index:w,items:d,newIndex:Q.current.newIndex,previousItems:Q.current.items,previousContainerId:Q.current.containerId,transition:u,wasDragging:Q.current.activeId!=null}),le=xit({disabled:!te,index:w,node:M,rect:E});return f.useEffect(()=>{H&&Q.current.newIndex!==se&&(Q.current.newIndex=se),m!==Q.current.containerId&&(Q.current.containerId=m),d!==Q.current.items&&(Q.current.items=d)},[H,se,m,d]),f.useEffect(()=>{if(Y===Q.current.activeId)return;if(Y!=null&&Q.current.activeId==null){Q.current.activeId=Y;return}const pe=setTimeout(()=>{Q.current.activeId=Y},50);return()=>clearTimeout(pe)},[Y]),{active:j,activeIndex:h,attributes:R,data:S,rect:E,index:w,newIndex:se,items:d,isOver:T,isSorting:H,isDragging:L,listeners:O,node:M,overIndex:v,over:F,setNodeRef:W,setActivatorNodeRef:U,setDroppableNodeRef:I,setDraggableNodeRef:k,transform:le??Z,transition:ie()};function ie(){if(le||re&&Q.current.newIndex===w)return yit;if(!(K&&!YC(N)||!u)&&(H||te))return ef.Transition.toString({...u,property:Ape})}}function _it(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e?.draggable)!=null?n:t.draggable,droppable:(r=e?.droppable)!=null?r:t.droppable}}function q2(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const wit=[un.Down,un.Right,un.Up,un.Left],WVt=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:s,droppableContainers:a,over:o,scrollableAncestors:i}}=t;if(wit.includes(e.code)){if(e.preventDefault(),!n||!r)return;const c=[];a.getEnabled().forEach(m=>{if(!m||m!=null&&m.disabled)return;const h=s.get(m.id);if(h)switch(e.code){case un.Down:r.top<h.top&&c.push(m);break;case un.Up:r.top>h.top&&c.push(m);break;case un.Left:r.left>h.left&&c.push(m);break;case un.Right:r.left<h.left&&c.push(m);break}});const u=Kat({collisionRect:r,droppableRects:s,droppableContainers:c});let d=cpe(u,"id");if(d===o?.id&&u.length>1&&(d=u[1].id),d!=null){const m=a.get(n.id),h=a.get(d),p=h?s.get(h.id):null,g=h?.node.current;if(g&&p&&m&&h){const v=QC(g).some((C,E)=>i[E]!==C),x=Ppe(m,h),b=Sit(m,h),_=v||!x?{x:0,y:0}:{x:b?r.width-p.width:0,y:b?r.height-p.height:0},w={x:p.left,y:p.top};return _.x&&_.y?w:$v(w,_)}}}};function Ppe(e,t){return!q2(e)||!q2(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function Sit(e,t){return!q2(e)||!q2(t)||!Ppe(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const Rpe=A.memo(({shouldShow:e,onClose:t,onSetDefault:n})=>{const{$t:r}=X();return l.jsx(z,{className:B("-mt-md col-span-full inline-flex flex-wrap items-center justify-center",{"opacity-100":e,"opacity-0":!e}),children:l.jsxs(z,{variant:"raised",className:"gap-sm pl-xs pr-sm py-xs shadow-subtle flex items-center rounded-full border",children:[l.jsxs("div",{className:"gap-xs group flex items-center",children:[l.jsx(ke,{icon:Xt,onClick:t,size:"small",pill:!0}),l.jsx(D,{variant:"small",color:"super",className:"whitespace-nowrap",children:r({defaultMessage:"{brand} works best as your default browser",id:"uTC0rExpLQ"},{brand:"Comet"})})]}),l.jsx(ye,{variant:"primaryGhost",size:"tiny",pill:!0,text:r({defaultMessage:"Set {brand} as default",id:"VssH9YxzlZ"},{brand:"Comet"}),onClick:n,icon:dl,extraCSS:"border-none"})]})})});Rpe.displayName="DefaultBrowserBanner";const ju=A.memo(({onClose:e,children:t})=>l.jsx(hp,{portalTarget:document.body,children:l.jsxs("div",{className:"fixed inset-0 flex size-full flex-col items-center justify-center",children:[l.jsx(_e.div,{onClick:e,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:ho,className:"bg-backdrop/70 absolute inset-0"}),l.jsx(_e.div,{initial:{y:6,opacity:0},animate:{y:0,opacity:1},exit:{y:6,opacity:0},transition:ho,className:"w-full max-w-[360px]",children:l.jsx(tr,{className:"shadow-overlay border-none",children:t})})]})}));ju.displayName="WidgetModal";const Cit=()=>{const{trackEvent:e}=Te(),t=At(),n="clicked spaces ad",r=f.useCallback(async a=>{a.preventDefault(),e(n,{source:"createSpaceSidebar"}),t.push("/spaces/templates")},[e,t]),s=f.useCallback(async()=>{e("space mentioned in query"),$Oe()},[e]);return f.useMemo(()=>({handleCreateSpaceSidebarAdClick:r,handleSubmitQueryWithMention:s}),[r,s])},Ipe=e=>{const t=[];if(!e)return{dslQuery:void 0,mentions:t};let n=0;const r=s=>{let a="";if(s.type==="text"&&"text"in s)a=s.text;else if(s.type==="linebreak")a=`
`;else{if((s.type==="link"||s.type==="autolink")&&"url"in s)return a=`[${"children"in s&&Array.isArray(s.children)&&s.children.map(r).reduce((i,c)=>(i+=c,i),"")||""}](${s.url})`,a;if(s.type==="mention"){const i=s.props;if(i.variant==="tab")return t.push({id:i.uuid,url:i.url??"",type:i.variant}),n++,a=`<attachment citation_id="${n}" />`,a;if(i.variant==="space")return t.push({id:i.uuid,url:"",type:i.variant}),a="",a;if(i.variant==="shortcut")return t.push({id:i.uuid,url:"",type:i.variant}),a=i.queryText??"",a}}return"children"in s&&Array.isArray(s.children)?s.children.map(r).reduce((o,i)=>(o+=i,o),a):a};return{dslQuery:r(e)||void 0,mentions:t}};function jpe({onSubmit:e,immediate:t=!0}){const n=r7(),r=cst(),s=Uhe(),a=ust(),{setUserInput:o,setHasStartedTyping:i,setStartTypingTime:c,markInputAsSubmitted:u}=s1(),d=f.useRef(!1);f.useEffect(()=>()=>{d.current&&(u(),d.current=!1)},[u,t]);const m=f.useCallback(p=>{ee.info("ask input submitted");const g=a?performance.now()-a:void 0,{dslQuery:y,mentions:v}=Ipe(p.json?.root);e?.({timeFromFirstType:g,...p,dslQuery:y,mentions:p.mentions??v}),t?u():d.current=!0},[t,u,e,a]),h=f.useCallback((p,g)=>{!s&&p&&i(!0),a||c(performance.now()),o(p,g)},[s,o,i,a,c]);return[n,r,f.useMemo(()=>({onChange:h,onSubmit:m,setUserInput:o}),[h,m,o])]}const K2=-1,Eit="sbs_analytics_",Mit=e=>{const t=e?.experiment_override;return t?JSON.stringify(t):""},Tit=(e,t)=>{const n=e.side_by_side_metadata;return{displayPosition:t,experimentRole:n?.experiment_role||`entry_${t}`,entryUUID:e.backend_uuid,experimentOverride:Mit(n)}},Ope=(e,t)=>`${Eit}${e}_${t}`,ik=(e,t)=>{try{const n=Ope(e,t);return Ve.getItem(n)==="true"}catch(n){return ee.error("Error checking localStorage for SBS event:",n),!1}},lk=(e,t)=>{try{const n=Ope(e,t);Ve.setItem(n,"true")}catch(n){ee.error("Error setting localStorage for SBS event:",n)}},kit=({results:e,session:t,trackEvent:n})=>{const r=f.useCallback(()=>{if(!e[0])return null;const c=e[0].side_by_side_metadata;if(!c?.sibling_uuid)return null;const u=c.experiment_override,d=u&&Object.keys(u)[0]||"";return{evaluationUUID:c.sibling_uuid,experimentVariationKey:d,evaluatorID:t?.user?.id||t?.user?.email||"anonymous"}},[e,t?.user?.id,t?.user?.email]),s=f.useCallback(c=>{try{const u=r();if(!u)return null;let d,m;if(c===K2)d=K2,m=void 0;else if(d=c,d>=0&&d<e.length)m=e[d].backend_uuid;else return ee.warn(`Invalid SBS selection index: ${c}, results length: ${e.length}`),null;return{eventType:"sbs judgment",timestampMs:Date.now(),eventData:{evaluationUUID:u.evaluationUUID,evaluatorID:u.evaluatorID,preferredPosition:d,entryUUID:m}}}catch(u){return ee.error("Failed to build SBS judgment payload:",u),null}},[r,e]),a=f.useCallback(c=>{try{const u=r();if(!u||ik(u.evaluationUUID,"sbs judgment"))return;const d=s(c);d&&(n("sbs judgment",d),lk(u.evaluationUUID,"sbs judgment"))}catch(u){ee.error("Failed to track SBS judgment:",u)}},[r,s,n]),o=f.useCallback(()=>{try{const c=r();if(!c||ik(c.evaluationUUID,"sbs banner"))return;const u={eventType:"sbs banner",timestampMs:Date.now(),eventData:{evaluationUUID:c.evaluationUUID,evaluatorID:c.evaluatorID,experimentVariationKey:c.experimentVariationKey,experimentRoles:e.map(d=>d.side_by_side_metadata?.experiment_role||`entry_${e.indexOf(d)}`)}};n("sbs banner",u),lk(c.evaluationUUID,"sbs banner")}catch(c){ee.error("Failed to track SBS banner exposure:",c)}},[r,e,n]),i=f.useCallback(()=>{try{const c=r();if(!c||ik(c.evaluationUUID,"sbs exposure"))return;const u={eventType:"sbs exposure",timestampMs:Date.now(),eventData:{evaluationUUID:c.evaluationUUID,evaluatorID:c.evaluatorID,experimentVariationKey:c.experimentVariationKey,entries:e.map(Tit)}};n("sbs exposure",u),lk(c.evaluationUUID,"sbs exposure")}catch(c){ee.error("Failed to track SBS exposure:",c)}},[r,e,n]);return f.useMemo(()=>({trackJudgment:a,trackBannerExposure:o,trackSBSExposure:i}),[a,o,i])},Lpe=({enabled:e,reason:t})=>{const{locale:n}=X(),r=n?{"accept-language":n}:{},s=async()=>lqe({headers:r,reason:t}),a=Je(),{data:o}=Ke({enabled:a?typeof e>"u"?!0:e:!1,queryKey:kA(),queryFn:s,networkMode:"always"});return o??Hde},Nit="side-by-side-experiments";function Ait(e,t={}){const{value:n,loading:r,error:s}=d7e({flag:Nit,defaultValue:{side_by_side_config:{}},subjectType:"context_uuid",extraAttributes:t},e);return f.useMemo(()=>({sideBySideOverrides:n,loading:r,error:s}),[n,r,s])}var Pit={};const Dpe="sbs_trigger_count",Y2="[control]",Rit=[],Iit={isEnabled:!1,sbsVariations:Rit,isLoading:!1,error:null,incrementTriggerCount:()=>{},triggerCount:0},jit="sbsMaxTriggerCntPerThread";function Oit(e,t,n,r,s,a,o,i){const{isPro:c,isMax:u,hasAccessToProFeatures:d}=e,{isEnterprise:m=!1}=t,h=c||u||m||d,p=c||u||d,g=s?.localeObj?.language||n?.language||null,y=r?.toLowerCase()||null,v=m?"ENTERPRISE":"INDIVIDUAL",x=typeof window<"u"&&window.navigator.userAgent.includes("Mobile");return{isPriority:h,isSubscribed:p,language:g,country:o,searchFocus:y,userCategory:v,isFollowUp:!!i,isMobile:x,appApiClient:"web",[jit]:a}}const Lit=e=>{const t=n=>n.side_by_side_metadata?.experiment_role?.startsWith(Y2)??!1;for(let n=0;n<e.length;n++){const r=e[n];if(t(r))return[r,...e.slice(0,n),...e.slice(n+1)]}return[...e]},Dit=e=>{try{if(!e||!e.side_by_side_config)return!1;const t=e.side_by_side_config;if(!t||typeof t!="object")return!1;const n=!!(t.experiment_flag&&typeof t.experiment_flag=="string"&&t.experiment_flag.length>0),r=!!(t.variations&&Array.isArray(t.variations)&&t.variations.length>0);return n||r}catch{return!1}},Fit=e=>{if(!e||!e.side_by_side_config)return[];const t=e.side_by_side_config;if(!t.experiment_flag||!t.variations||!Array.isArray(t.variations))return[];if(t.variations.length===0)return[];const n=[],r=Sa(),s=t.experiment_flag;let a=!1;return t.variations.forEach(o=>{if(!o||!o.identifier)return;const i=o.is_control===!0;i&&(a=!0);const c=i?`${Y2}${s}:${o.identifier}`:`${s}:${o.identifier}`,u={[s]:o.attributes_override??{}};n.push({sibling_uuid:r,experiment_role:c,experiment_override:u})}),!a&&n.length>0&&(n[0].experiment_role=`${Y2}${s}:${t.variations[0].identifier}`),n},LK=e=>{try{const t=Ts.getItem(`${Dpe}_${e}`);return t?parseInt(t,10):0}catch{return 0}},Uit=(e,t)=>{try{Ts.setItem(`${Dpe}_${e}`,t.toString())}catch{}};function Bit({frontendContextUUID:e,disableSideBySide:t=!1}){const n=Ka(),{sources:r}=Sn(),s=DWe(r||[]),a=Nt(),o=pn({reason:"sbs-experiment-attributes"}),i=Lpe({reason:"sbs-experiment-attributes"}),c=hhe(),u=fp(),d=tn()||!!Pit.NEXT_PUBLIC_IS_SIDECAR_BUILD||YO();t=t||n===ae.STUDIO||n===ae.RESEARCH||d||s.length>0;const[m,h]=f.useState(()=>e?LK(e):0),p=e?Oit(a,o,i,n,c,m,u,e):{},{sideBySideOverrides:g,loading:y,error:v}=Ait(e||"",p),x=v?String(v):null,b=Dit(g);f.useEffect(()=>{if(e){const w=LK(e);h(Math.max(0,w))}else h(0)},[e]),f.useEffect(()=>{b&&e&&m>0&&Uit(e,m)},[e,m,b]);const _=f.useCallback(()=>{b&&h(w=>Math.max(0,w+1))},[b]);return f.useMemo(()=>{if(t||!b||x)return Iit;const w=Fit(g);return{isEnabled:b,sbsVariations:w,isLoading:y,error:x,incrementTriggerCount:_,triggerCount:m}},[t,x,_,b,y,g,m])}const Fpe=e=>{if(!e.length)return[];const t=new Map;return e.forEach(n=>{if(n.side_by_side_metadata?.sibling_uuid&&n.side_by_side_metadata?.selection_status===Lo.UNSELECTED)return;const r=n.side_by_side_metadata?.sibling_uuid??n.backend_uuid;t.has(r)||t.set(r,[]),t.get(r).push(n)}),[...t.values()].map(n=>{const r=Lit(n);return r[0].side_by_side_metadata?.selection_status===Lo.TIE?[r[0]]:r})},Vit=async(e,t,n,r)=>{const s=(a,o)=>{r(i=>i.filter(c=>t.some(u=>u.backend_uuid===c.backend_uuid)?c.backend_uuid===a.backend_uuid:!0).map(c=>c.backend_uuid===a.backend_uuid?{...c,side_by_side_metadata:c.side_by_side_metadata?{...c.side_by_side_metadata,selection_status:o}:void 0}:c))};try{const a=t.map((c,u)=>{let d;return e===K2?d=Lo.TIE:d=u===e?Lo.SELECTED:Lo.UNSELECTED,S7e({entryUUID:c.backend_uuid,params:d,siblingUUID:n,reason:"user-sbs-selection"}).catch(m=>{throw ee.error(`Failed to update selection for entry ${c.backend_uuid}:`,m),m})});await Promise.all(a);let o,i;e===K2?(o=t.find(u=>u.side_by_side_metadata?.experiment_role?.startsWith(Y2))||t[0],i=Lo.TIE):(o=t[e],i=Lo.SELECTED),s(o,i)}catch(a){throw ee.error("Failed to update entry selection:",a),a}};function Upe({handleSubmitQuery:e,isHomepage:t,contextUuid:n,disableSideBySide:r=!1}){const{isEnabled:s,sbsVariations:a,incrementTriggerCount:o}=Bit({frontendContextUUID:n,disableSideBySide:r});return f.useCallback(c=>{s?(o(),a.forEach(u=>{const{experiment_override:d,sibling_uuid:m,experiment_role:h}=u,p={experiment_role:h,sibling_uuid:m,experiment_override:d,selection_status:Lo.SELECTION_STATUS_UNSPECIFIED},g={...c,...t?{newFrontendContextUUID:n}:{existingFrontendContextUUID:n},side_by_side_metadata:p};e(g)})):e(c)},[e,s,a,o,t,n])}const Vr={[ae.SEARCH]:vt({askInputPlaceholder:{defaultMessage:"Ask anything",id:"AUouhaZgFv"},name:{defaultMessage:"Search",id:"xmcVZ0BU63"},description:{defaultMessage:"Fast answers to everyday questions",id:"5Y9Hg4e+zB"}}),[ae.RESEARCH]:vt({askInputPlaceholder:{defaultMessage:"Research anything",id:"PITzDLgm5P"},name:{defaultMessage:"Research",id:"JEe7dVso7F"},description:{defaultMessage:"Deep research on any topic",id:"uH6f+eH2OS"}}),[ae.STUDIO]:vt({askInputPlaceholder:{defaultMessage:"Create anything",id:"pmtrj6Tjm9"},name:{defaultMessage:"Labs",id:"ylFNoY79wa"},description:{defaultMessage:"Create projects from scratch",id:"nH9rAkplC/"}}),[ae.STUDY]:vt({askInputPlaceholder:{defaultMessage:"Study anything",id:"UOEDdZ+cnD"},name:{defaultMessage:"Study",id:"UTFsoN8Z1P"},description:{defaultMessage:"Step-by-step learning",id:"UGHOn5vTUx"}})},Dc={[fe.DEFAULT]:vt({name:{defaultMessage:"Auto",id:"NXI/XLSYwc"},description:{defaultMessage:"Adapts to each query",id:"SsTMNu/s/A"}}),[fe.PRO]:vt({name:{defaultMessage:"Best",id:"PzlMqGwwkm"},description:{defaultMessage:"Automatically selects the most responsive model based on the query",id:"DuOz+H05Us"}}),[fe.PPLX_PRO_UPGRADED]:vt({name:{defaultMessage:"Pro",id:"R/eOkjWqNU"},description:{defaultMessage:"Automatically selects the most responsive model based on the query",id:"DuOz+H05Us"}}),[fe.SONAR]:vt({name:{defaultMessage:"Sonar",id:"sT9VX563o6"},description:{defaultMessage:"Perplexity's fast model",id:"pdbURewz6Q"}}),[fe.GPT_4o]:vt({name:{defaultMessage:"GPT-4o",id:"nebbHBgxX/"},description:{defaultMessage:"OpenAI's versatile model",id:"zdAw82CyOA"}}),[fe.GPT_4_1]:vt({name:{defaultMessage:"GPT-4.1",id:"+LPr/f6Fal"},description:{defaultMessage:"OpenAI's advanced model",id:"+uCLZVt7uh"}}),[fe.GPT_5]:vt({name:{defaultMessage:"GPT-5",id:"VfhmdGpVc7"},description:{defaultMessage:"OpenAI's latest model",id:"5VYr+wSh/Y"}}),[fe.GPT_5_THINKING]:vt({name:{defaultMessage:"GPT-5 Thinking",id:"/IA3KV+qFr"},description:{defaultMessage:"OpenAI's latest model with thinking",id:"r+tIMgEnyZ"}}),[fe.CLAUDE_2]:vt({name:{defaultMessage:"Claude Sonnet 4.0",id:"4UrgPEhdwq"},description:{defaultMessage:"Anthropic's advanced model",id:"b5CqfvLw4b"}}),[fe.GEMINI_2_FLASH]:vt({name:{defaultMessage:"Gemini 2.5 Pro 06-05",id:"abrSzRs2eu"},description:{defaultMessage:"Google's latest model",id:"XBL8FigIeX"}}),[fe.GROK]:vt({name:{defaultMessage:"Grok 3 Beta",id:"Ybq0GDRm0J"},description:{defaultMessage:"xAI's Grok 3 model",id:"gwIHPQy1c/"}}),[fe.PPLX_REASONING]:vt({name:{defaultMessage:"Reasoning",id:"Aw3qRf7hyO"},description:{defaultMessage:"Advanced problem solving",id:"4J0akc6m53"}}),[fe.CLAUDE_3_7_SONNET_THINKING]:vt({name:{defaultMessage:"Claude Sonnet 4.0 Thinking",id:"a3LiLxX42G"},description:{defaultMessage:"Anthropic's reasoning model",id:"vRfGVNHXG3"}}),[fe.CLAUDE_4_0_OPUS]:vt({name:{defaultMessage:"Claude Opus 4.0",id:"fwViXd5wrs"},description:{defaultMessage:"Anthropic's Opus reasoning model",id:"e0FjrIe1O/"}}),[fe.CLAUDE_4_0_OPUS_THINKING]:vt({name:{defaultMessage:"Claude Opus 4.0 Thinking",id:"hwrQNTIYLG"},description:{defaultMessage:"Anthropic's Opus reasoning model with thinking",id:"ipx+1wZCy6"}}),[fe.CLAUDE_4_1_OPUS_THINKING]:vt({name:{defaultMessage:"Claude Opus 4.1 Thinking",id:"Vd2LxNSW/4"},description:{defaultMessage:"Anthropic's Opus reasoning model with thinking",id:"ipx+1wZCy6"}}),[fe.GROK_4]:vt({name:{defaultMessage:"Grok 4",id:"+Y775fAOqr"},description:{defaultMessage:"xAI's latest, most powerful reasoning model",id:"pSXVZwl/+g"}}),[fe.O3]:vt({name:{defaultMessage:"o3",id:"BBaBURoUEg"},description:{defaultMessage:"OpenAI's reasoning model",id:"V9t5CKw8kf"}}),[fe.O3_PRO]:vt({name:{defaultMessage:"o3-pro",id:"lyV2e5kFYG"},description:{defaultMessage:"OpenAI's most powerful reasoning model",id:"1ntkiZj5rM"}}),[fe.O4_MINI]:vt({name:{defaultMessage:"o4-mini",id:"BwwjXFHgz7"},description:{defaultMessage:"OpenAI's latest reasoning model",id:"VKonAfIZbf"}}),[fe.ALPHA]:vt({name:{defaultMessage:"Best",id:"PzlMqGwwkm"},description:{defaultMessage:"Fast and thorough for routine research",id:"v/MuahlVJE"}}),[fe.O3_RESEARCH]:vt({name:{defaultMessage:"o3",id:"BBaBURoUEg"},description:{defaultMessage:"OpenAI's reasoning model",id:"V9t5CKw8kf"}}),[fe.O3_PRO_RESEARCH]:vt({name:{defaultMessage:"o3-pro",id:"lyV2e5kFYG"},description:{defaultMessage:"OpenAI's most powerful reasoning model",id:"1ntkiZj5rM"}}),[fe.CLAUDE40SONNET_RESEARCH]:vt({name:{defaultMessage:"Claude Sonnet 4.0",id:"4UrgPEhdwq"},description:{defaultMessage:"Anthropic's advanced model",id:"b5CqfvLw4b"}}),[fe.CLAUDE40SONNETTHINKING_RESEARCH]:vt({name:{defaultMessage:"Claude Sonnet 4.0 Thinking",id:"a3LiLxX42G"},description:{defaultMessage:"Anthropic's reasoning model",id:"vRfGVNHXG3"}}),[fe.CLAUDE40OPUS_RESEARCH]:vt({name:{defaultMessage:"Claude Opus 4.0",id:"fwViXd5wrs"},description:{defaultMessage:"Anthropic's most advanced model",id:"4l6C+Dcw8g"}}),[fe.CLAUDE40OPUSTHINKING_RESEARCH]:vt({name:{defaultMessage:"Claude Opus 4.0 Thinking",id:"hwrQNTIYLG"},description:{defaultMessage:"Anthropic's advanced reasoning model",id:"RwUx0WhdZb"}}),[fe.BETA]:vt({name:{defaultMessage:"Best",id:"PzlMqGwwkm"},description:{defaultMessage:"Multi-step tasks with advanced troubleshooting",id:"Sf0AeuilA5"}}),[fe.O3_LABS]:vt({name:{defaultMessage:"o3",id:"BBaBURoUEg"},description:{defaultMessage:"OpenAI's reasoning model",id:"V9t5CKw8kf"}}),[fe.O3_PRO_LABS]:vt({name:{defaultMessage:"o3-pro",id:"lyV2e5kFYG"},description:{defaultMessage:"OpenAI's most powerful reasoning model",id:"1ntkiZj5rM"}}),[fe.CLAUDE40SONNETTHINKING_LABS]:vt({name:{defaultMessage:"Claude Sonnet 4.0 Thinking",id:"a3LiLxX42G"},description:{defaultMessage:"Anthropic's reasoning model",id:"vRfGVNHXG3"}}),[fe.CLAUDE40OPUSTHINKING_LABS]:vt({name:{defaultMessage:"Claude Opus 4.0 Thinking",id:"hwrQNTIYLG"},description:{defaultMessage:"Anthropic's advanced reasoning model",id:"RwUx0WhdZb"}}),[fe.STUDY]:vt({name:{defaultMessage:"Study",id:"UTFsoN8Z1P"},description:{defaultMessage:"Fast model for routine research",id:"prWIV9FsWt"}}),[Us.O3_MINI]:vt({name:{defaultMessage:"o3-mini",id:"GdJwPgWWId"},description:{defaultMessage:"OpenAI's reasoning model",id:"V9t5CKw8kf"}}),[Us.GROK2]:vt({name:{defaultMessage:"Grok-2",id:"9X3jPx+0vk"},description:{defaultMessage:"xAI's latest model",id:"e2CghRZC7d"}}),[Us.GPT_4]:vt({name:{defaultMessage:"GPT-4",id:"6TGiMlP7f4"},description:{defaultMessage:"OpenAI's previous generation model",id:"U3OQoJ211e"}}),[Us.CLAUDE_3_OPUS]:vt({name:{defaultMessage:"Claude 3 Opus",id:"gLSCHWGsu1"},description:{defaultMessage:"Anthropic's previous generation model",id:"hAevdn8yGl"}}),[Us.CLAUDE_3_5_HAIKU]:vt({name:{defaultMessage:"Claude 3.5 Haiku",id:"zEJWYa05R2"},description:{defaultMessage:"Anthropic's smaller model",id:"pQia6E7J8i"}}),[Us.GEMINI]:vt({name:{defaultMessage:"Gemini",id:"XoqZkcqFZ/"},description:{defaultMessage:"Previous version of Google's Gemini model",id:"9C0LtRWLFh"}}),[Us.LLAMA_X_LARGE]:vt({name:{defaultMessage:"Llama X Large",id:"2zxgnSWUyX"},description:{defaultMessage:"Meta's large Llama model",id:"+95UnVOxgQ"}}),[Us.MISTRAL]:vt({name:{defaultMessage:"Mistral",id:"dUBSpMbbs4"},description:{defaultMessage:"Mistral AI model",id:"rYRyt8I2Zr"}}),[Us.COPILOT]:vt({name:{defaultMessage:"Copilot",id:"b3QbnXgawD"},description:{defaultMessage:"Legacy Pro Search",id:"pg83InaW1o"}}),[Us.CLAUDE_OMBRE_EAP]:vt({name:{defaultMessage:"Claude Ombre",id:"F12IlTx8R1"},description:{defaultMessage:"Anthropic's research preview",id:"LKt7UBXwdw"}}),[Us.CLAUDE_LACE_EAP]:vt({name:{defaultMessage:"Claude Lace",id:"8ydOdGYWef"},description:{defaultMessage:"Anthropic's opus research preview",id:"GHW8xWfe9i"}}),[Us.R1]:vt({name:{defaultMessage:"R1 1776",id:"e8N3MYqmIQ"},description:{defaultMessage:"Perplexity's unbiased reasoning model",id:"R5Tg1hC1um"}}),[Us.GAMMA]:vt({name:{defaultMessage:"Gamma",id:"Wb9IyuuCJO"},description:{defaultMessage:"Fast model for routine research",id:"prWIV9FsWt"}})},$it=3e3;function JC({collection:e,onSubmit:t,redirectToNewThread:n=!0,csrRedirect:r=!1}){const{$t:s}=X(),{isCopilot:a}=Sn(),{submitQuery:o}=Ta(),{actions:{clearCurrentStreamId:i,clearCurrentThreadId:c}}=zt(),u=At(),d=Ka(),{handleSubmitQueryWithMention:m}=Cit(),h=f.useMemo(()=>Sa(),[]),p=f.useCallback(async w=>{if(w.query.trim()==="")return;t?.(w),w.mentions&&w.mentions.some(C=>C.type==="space")&&m();const S=w.newFrontendContextUUID??Sa();n&&(c(),i(),o({rawQuery:w.query,dslQuery:w.dslQuery,mentions:w.mentions,copilotOverride:a?!0:void 0,attachments:w.attachments,collection:e||null,newFrontendContextUUID:S,promptSource:w.promptSource||"user",querySource:w.querySource,timeFromFirstType:w.timeFromFirstType,shouldRedirectToBackendUUID:!r,...w.side_by_side_metadata&&{side_by_side_metadata:w.side_by_side_metadata},onThreadSlugReceived:C=>{if(!r)return;const E=window.location.pathname;E.startsWith(`${u.base}/search/`)&&Zre(E.split("/").pop())&&u.replace(`/search/${C}`,"Home ask input")}}),r&&setTimeout(()=>{u.push(`/search/new/${S}`,void 0,"Home ask input")}))},[t,n,c,i,o,a,e,r,u,m]),g=Upe({handleSubmitQuery:p,isHomepage:!0,contextUuid:h}),y=f.useMemo(()=>ks(g,$it,{leading:!0}),[g]),[v,x,b]=jpe({onSubmit:y,immediate:!r}),_=s(Vr[d].askInputPlaceholder);return[v,x,f.useMemo(()=>({...b,placeholder:_}),[b,_])]}const Q2="comet-widgets",Sh="comet-widgets-content",p7="default-shortcut-task-id";function Wit(e,t){return e.find(n=>n.type===t)}function Hit(e){return typeof e=="object"&&e!==null&&"version"in e&&typeof e.version=="number"&&e.version===1&&"taskId"in e&&typeof e.taskId=="string"&&"name"in e&&typeof e.name=="string"&&"query"in e&&typeof e.query=="string"}function Bpe({context:e,widgetId:t,defaultQuery:n,defaultName:r}){if(e==="widget"){const s=Up("SHORTCUT",t);if(Hit(s))return s}return{version:1,taskId:p7,name:r??"",query:n??""}}function zit(){if(Ve.getItem(Sh))return;const t=Ve.getItem(Q2);if(t)try{const n=JSON.parse(t),r={},s=n.map(a=>{if(a.content){const{content:o,...i}=a;return r[a.id]=o,i}return{id:a.id,type:a.type}});Ve.setItem(Q2,JSON.stringify(s)),Ve.setItem(Sh,JSON.stringify(r))}catch{}}function Vpe(e){zit();const t=Ve.getItem(Q2);if(!t)return e;try{const n=JSON.parse(t);return!n||!Array.isArray(n)?e:n.every(s=>s.id&&s.type&&typeof s.type=="string")?n:(g7(e),e)}catch{return e}}function g7(e){Ve.setItem(Q2,JSON.stringify(e))}function Git(e){const n=Vpe([]).filter(r=>r.id!==e);g7(n)}function qit(e){const t=Ve.getItem(Sh);if(!t)return!1;try{return!!JSON.parse(t)[e]}catch{return!1}}function Up(e,t){const n=Ve.getItem(Sh);if(!n)return null;let r=null;try{r=JSON.parse(n)[t]}catch{return null}return typeof r!="object"||r===null?null:{version:1,...r}}function Bp(e,t,n){const r=Ve.getItem(Sh);let s={};if(r)try{s=JSON.parse(r)}catch{s={}}s[t]=n,Ve.setItem(Sh,JSON.stringify(s))}function Kit(e="widget",t,n){if(e==="widget"){const r=Up("ASSISTANT",t);if(r)return{version:1,query:r.query??n??""}}return{version:1,query:n??""}}function DK(e,t="widget",n){t==="widget"&&Bp("ASSISTANT",n,e)}const $pe=A.memo(({context:e="widget",defaultQuery:t,widgetId:n,showSettings:r,setShowSettings:s})=>{const a=Kit(e,n,t),{$t:o}=X(),[i,c]=f.useState(a.query||""),[u,d,{onSubmit:m}]=JC({csrRedirect:!0}),h=f.useRef(ks(S=>{DK({query:S.query,version:1},e,n)},1e3));f.useEffect(()=>{const S=h.current.flush;return()=>{S()}},[h]);const p=S=>{const C=S.target.value;c(C),h.current({query:C})},g=l.jsxs("div",{className:B("flex size-full flex-col p-3",{"p-3":e==="thumbnail"}),style:{zoom:e==="thumbnail"?.75:1},children:[l.jsx(D,{color:"super",children:l.jsx(be,{icon:dl,size:"lg"})}),l.jsx(D,{variant:"smallBold",color:"default",className:"mt-auto line-clamp-5 text-balance",children:i||""})]}),y=f.useCallback(()=>{m({query:i,querySource:"homepage_widget",promptSource:"homepage_widget"})},[m,i]),v=f.useCallback(()=>s?.(!1),[s]),x=f.useCallback(()=>{DK({query:i||"",version:1},e,n),s?.(!1)},[s,i,e,n]),b=f.useCallback(()=>c(o({defaultMessage:"what is my schedule for today",id:"5xGy4y8knY"})),[o]),_=f.useCallback(()=>c(o({defaultMessage:"group my tabs by topic",id:"uDBqWc5SFP"})),[o]),w=f.useCallback(()=>c(o({defaultMessage:"search for trending news",id:"E4T4sT/ZCb"})),[o]);return e==="thumbnail"?g:l.jsxs(l.Fragment,{children:[l.jsx(tr,{shadow:!0,className:"aspect-[1/1] w-full cursor-pointer select-none overflow-hidden !rounded-2xl",onClick:y,children:l.jsx(Ln,{hoverOnly:!0,className:"size-full",children:l.jsx(z,{variant:"raised",className:"hover:bg-offset dark:hover:bg-offsetPlus size-full transition duration-300",children:g})})}),l.jsx(st,{children:r&&l.jsx(ju,{onClose:v,children:l.jsxs("div",{className:"flex flex-col gap-3 px-5 py-4",children:[l.jsxs("div",{children:[l.jsx(D,{variant:"entry-title-300",children:o({defaultMessage:"Assistant query",id:"FyiOOCgH1j"})}),l.jsx(D,{variant:"small",color:"light",children:o({defaultMessage:"Save assistant queries that you use often.",id:"p2agK1deUX"})})]}),l.jsx("div",{children:l.jsxs("div",{className:"text-foreground relative whitespace-pre-wrap break-words px-3 py-2 text-sm after:content-['\\\\200B']",children:[l.jsx("span",{className:"invisible",children:i||""}),l.jsx("textarea",{className:"bg-base text-foreground border-subtler placeholder:text-quiet focus:ring-subtler absolute -inset-px size-full resize-none overflow-hidden rounded-md border px-3 py-2 text-sm outline-none focus:outline-none focus:ring-1",value:i||"",onChange:p})]})}),l.jsx("div",{children:l.jsxs(D,{variant:"tinyRegular",color:"light",children:[o({defaultMessage:"For example",id:"qbXH6UvD6V"}),":"," ",l.jsx(D,{as:"a",role:"button",variant:"tinyRegular",color:"super",onClick:b,children:o({defaultMessage:"what is my schedule for today",id:"5xGy4y8knY"})}),","," ",l.jsx(D,{as:"a",role:"button",variant:"tinyRegular",color:"super",onClick:_,children:o({defaultMessage:"group my tabs by topic",id:"uDBqWc5SFP"})}),","," ",l.jsx(D,{as:"a",role:"button",variant:"tinyRegular",color:"super",onClick:w,children:o({defaultMessage:"search for trending news",id:"E4T4sT/ZCb"})}),"."]})}),l.jsx("div",{className:"flex flex-row justify-end",children:l.jsx(ye,{variant:"primary",size:"small",onClick:x,text:o({defaultMessage:"Done",id:"JXdbo8Vnlw"})})})]})})})]})});var ab={exports:{}},FK;function Yit(){return FK||(FK=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(r){if(r===null||r===!0||r===!1)return NaN;var s=Number(r);return isNaN(s)?s:s<0?Math.ceil(s):Math.floor(s)}e.exports=t.default}(ab,ab.exports)),ab.exports}var ob={exports:{}},UK;function Qit(){return UK||(UK=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(r){var s=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return s.setUTCFullYear(r.getFullYear()),r.getTime()-s.getTime()}e.exports=t.default}(ob,ob.exports)),ob.exports}function Xit(e,t){var n=tlt(t);return n.formatToParts?Jit(n,e):elt(n,e)}var Zit={year:0,month:1,day:2,hour:3,minute:4,second:5};function Jit(e,t){try{for(var n=e.formatToParts(t),r=[],s=0;s<n.length;s++){var a=Zit[n[s].type];a>=0&&(r[a]=parseInt(n[s].value,10))}return r}catch(o){if(o instanceof RangeError)return[NaN];throw o}}function elt(e,t){var n=e.format(t),r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[r[3],r[1],r[2],r[4],r[5],r[6]]}var ck={};function tlt(e){if(!ck[e]){var t=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),n=t==="06/25/2014, 00:00:00"||t==="06/25/2014 00:00:00";ck[e]=n?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return ck[e]}function Wpe(e,t,n,r,s,a,o){var i=new Date(0);return i.setUTCFullYear(e,t,n),i.setUTCHours(r,s,a,o),i}var BK=36e5,nlt=6e4,uk={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function Hpe(e,t,n){var r,s;if(!e||(r=uk.timezoneZ.exec(e),r))return 0;var a;if(r=uk.timezoneHH.exec(e),r)return a=parseInt(r[1],10),VK(a)?-(a*BK):NaN;if(r=uk.timezoneHHMM.exec(e),r){a=parseInt(r[2],10);var o=parseInt(r[3],10);return VK(a,o)?(s=Math.abs(a)*BK+o*nlt,r[1]==="+"?-s:s):NaN}if(alt(e)){t=new Date(t||Date.now());var i=n?t:rlt(t),c=GP(i,e),u=n?c:slt(t,c,e);return-u}return NaN}function rlt(e){return Wpe(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function GP(e,t){var n=Xit(e,t),r=Wpe(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime(),s=e.getTime(),a=s%1e3;return s-=a>=0?a:1e3+a,r-s}function slt(e,t,n){var r=e.getTime(),s=r-t,a=GP(new Date(s),n);if(t===a)return t;s-=a-t;var o=GP(new Date(s),n);return a===o?a:Math.max(a,o)}function VK(e,t){return-23<=e&&e<=23&&(t==null||0<=t&&t<=59)}var $K={};function alt(e){if($K[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),$K[e]=!0,!0}catch{return!1}}var olt=Yit();const ilt=Ha(olt);var llt=Qit();const WK=Ha(llt);var clt=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,dk=36e5,HK=6e4,ult=2,Ws={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:clt};function dlt(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);var n={},r=n.additionalDigits==null?ult:ilt(n.additionalDigits);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var s=flt(e),a=mlt(s.date,r),o=a.year,i=a.restDateString,c=hlt(i,o);if(isNaN(c))return new Date(NaN);if(c){var u=c.getTime(),d=0,m;if(s.time&&(d=plt(s.time),isNaN(d)))return new Date(NaN);if(s.timeZone||n.timeZone){if(m=Hpe(s.timeZone||n.timeZone,new Date(u+d)),isNaN(m))return new Date(NaN)}else m=WK(new Date(u+d)),m=WK(new Date(u+d+m));return new Date(u+d+m)}else return new Date(NaN)}function flt(e){var t={},n=Ws.dateTimePattern.exec(e),r;if(n?(t.date=n[1],r=n[3]):(n=Ws.datePattern.exec(e),n?(t.date=n[1],r=n[2]):(t.date=null,r=e)),r){var s=Ws.timeZone.exec(r);s?(t.time=r.replace(s[1],""),t.timeZone=s[1].trim()):t.time=r}return t}function mlt(e,t){var n=Ws.YYY[t],r=Ws.YYYYY[t],s;if(s=Ws.YYYY.exec(e)||r.exec(e),s){var a=s[1];return{year:parseInt(a,10),restDateString:e.slice(a.length)}}if(s=Ws.YY.exec(e)||n.exec(e),s){var o=s[1];return{year:parseInt(o,10)*100,restDateString:e.slice(o.length)}}return{year:null}}function hlt(e,t){if(t===null)return null;var n,r,s,a;if(e.length===0)return r=new Date(0),r.setUTCFullYear(t),r;if(n=Ws.MM.exec(e),n)return r=new Date(0),s=parseInt(n[1],10)-1,GK(t,s)?(r.setUTCFullYear(t,s),r):new Date(NaN);if(n=Ws.DDD.exec(e),n){r=new Date(0);var o=parseInt(n[1],10);return vlt(t,o)?(r.setUTCFullYear(t,0,o),r):new Date(NaN)}if(n=Ws.MMDD.exec(e),n){r=new Date(0),s=parseInt(n[1],10)-1;var i=parseInt(n[2],10);return GK(t,s,i)?(r.setUTCFullYear(t,s,i),r):new Date(NaN)}if(n=Ws.Www.exec(e),n)return a=parseInt(n[1],10)-1,qK(t,a)?zK(t,a):new Date(NaN);if(n=Ws.WwwD.exec(e),n){a=parseInt(n[1],10)-1;var c=parseInt(n[2],10)-1;return qK(t,a,c)?zK(t,a,c):new Date(NaN)}return null}function plt(e){var t,n,r;if(t=Ws.HH.exec(e),t)return n=parseFloat(t[1].replace(",",".")),fk(n)?n%24*dk:NaN;if(t=Ws.HHMM.exec(e),t)return n=parseInt(t[1],10),r=parseFloat(t[2].replace(",",".")),fk(n,r)?n%24*dk+r*HK:NaN;if(t=Ws.HHMMSS.exec(e),t){n=parseInt(t[1],10),r=parseInt(t[2],10);var s=parseFloat(t[3].replace(",","."));return fk(n,r,s)?n%24*dk+r*HK+s*1e3:NaN}return null}function zK(e,t,n){t=t||0,n=n||0;var r=new Date(0);r.setUTCFullYear(e,0,4);var s=r.getUTCDay()||7,a=t*7+n+1-s;return r.setUTCDate(r.getUTCDate()+a),r}var glt=[31,28,31,30,31,30,31,31,30,31,30,31],ylt=[31,29,31,30,31,30,31,31,30,31,30,31];function zpe(e){return e%400===0||e%4===0&&e%100!==0}function GK(e,t,n){if(t<0||t>11)return!1;if(n!=null){if(n<1)return!1;var r=zpe(e);if(r&&n>ylt[t]||!r&&n>glt[t])return!1}return!0}function vlt(e,t){if(t<1)return!1;var n=zpe(e);return!(n&&t>366||!n&&t>365)}function qK(e,t,n){return!(t<0||t>52||n!=null&&(n<0||n>6))}function fk(e,t,n){return!(e!=null&&(e<0||e>=25)||t!=null&&(t<0||t>=60)||n!=null&&(n<0||n>=60))}function qP(e,t,n){var r=dlt(e,n),s=Hpe(t,r,!0),a=new Date(r.getTime()-s),o=new Date(0);return o.setFullYear(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()),o.setHours(a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()),o}const xlt=e=>({"x-loc-latitude":e.latitude.toString(),"x-loc-longitude":e.longitude.toString()}),blt=async e=>{let t;e&&(t=xlt(e));const{data:n,error:r}=await ne.GET("/rest/homepage-widgets/clock/current-location","clock-widget-current-location",{headers:t});if(r)throw new Me("API_CLIENTS_ERROR",{message:"Failed to fetch clock current location",cause:r});return n},Gpe="clock-current-location-cache",KP={geonameid:5391959,name:"San Francisco",latitude:37.77493,longitude:-122.41942,countrycode:"US",population:864816,timezone:"America/Los_Angeles",timezone_offset:-25200};function _lt(){try{const e=Ve.getItem(Gpe);if(e)return JSON.parse(e)}catch{}return null}function wlt(e){try{Ve.setItem(Gpe,JSON.stringify(e))}catch{}}function Slt(e="widget",t){if(e==="widget"){const n=Up("ANALOG_CLOCK",t);if(n)return n.version===1?{version:2,city:n.city,useCurrentLocation:!n.city}:n}return{version:2,city:KP,useCurrentLocation:!0}}function KK(e,t="widget",n){t==="widget"&&Bp("ANALOG_CLOCK",n,e)}const Clt=()=>{const{location:e}=Pp(),t=_lt();return Ke({queryKey:["clock-current-location",e?.latitude,e?.longitude],queryFn:async()=>{const n=await blt(e);return n&&wlt(n),n},staleTime:5*60*1e3,gcTime:10*60*1e3,retry:1,refetchOnWindowFocus:!1,refetchOnReconnect:!1,placeholderData:t})},Elt=(e,t="widget")=>{const n=Slt(t,e),[r,s]=f.useState(n),{data:a,isLoading:o}=Clt(),i=f.useMemo(()=>r.useCurrentLocation&&a?{name:a.name||"Your Location",timezone:a.timezone,country:a.country}:r.city||KP,[r.useCurrentLocation,a,r.city]),c=f.useCallback(d=>{const m={...r,...d};s(m),KK(m,t,e)},[r,t,e]),u=f.useCallback((d,m)=>{const h={...r,city:d,useCurrentLocation:d?!1:m??!0};s(h),KK(h,t,e)},[r,t,e]);return f.useMemo(()=>({selectedCity:i,settings:r,currentLocationData:a??null,isLoading:o,updateSettings:c,saveCity:u}),[i,r,a,o,c,u])},Mlt=async({query:e="",limit:t=10,reason:n})=>{try{const{error:r,data:s}=await ne.GET("/rest/homepage-widgets/cities-autosuggests",n,{params:{query:{query:e,limit:t}},timeoutMs:2e3});if(r)throw new Me("API_CLIENTS_ERROR",{message:"Failed to get cities autosuggestions",cause:r});return s.data??[]}catch(r){return ee.error(r),[]}},Tlt=({query:e="",limit:t=5,reason:n})=>Ke({queryKey:["cities",e,t],queryFn:()=>Mlt({query:e,limit:t,reason:n}),enabled:e?.trim().length>0,staleTime:5*60*1e3,gcTime:30*60*1e3}),klt=100,Nlt=()=>l.jsx("div",{className:"flex h-full flex-col items-center justify-center",children:l.jsx(ke,{icon:mr,size:"small",pill:!0})}),Alt=()=>l.jsx("div",{className:"w-sm"}),Plt=({onClear:e})=>l.jsx(ke,{icon:Xt,size:"tiny",pill:!0,onClick:e}),y7=A.memo(({widgetId:e,showCity:t=!1,showSettings:n,setShowSettings:r,context:s="widget"})=>{const{$t:a}=X(),{colorScheme:o}=fs(),i=o==="dark",c=f.useRef(!0),{isMobileUserAgent:u}=Ce(),d="clock-widget-settings",{selectedCity:m,settings:h,updateSettings:p,saveCity:g}=Elt(e,s),y=f.useRef(null),[v,x]=f.useState(m.name??""),[b,_]=f.useState(-1),[w,S]=f.useState(!1);f.useEffect(()=>{x(m.name??"")},[m.name]);const{data:C=[]}=Tlt({query:v,limit:klt,reason:d}),E=f.useMemo(()=>C.map(Q=>({query:Q.name,title:Q.name,description:`${Q.countrycode}  ${Q.timezone}`,identifier:Q.geonameid.toString()})),[C]),[M,T]=f.useState(new Date);f.useEffect(()=>{const Q=setInterval(()=>{T(new Date)},1e3);return()=>clearInterval(Q)},[]);const I=Q=>Q*6,j=Q=>Q*6,N=Q=>Q*30,P=qP(M,m.timezone),R=I(P.getSeconds()),k=j(P.getMinutes()),O=N(P.getHours()+P.getMinutes()/60),L=f.useCallback(()=>{S(!0)},[]),F=f.useCallback(()=>{S(!1)},[]),U=f.useCallback(Q=>{x(Q)},[]),V=()=>{x("")},W=f.useCallback(Q=>C.find(re=>re.geonameid.toString()===Q),[C]),H=f.useCallback(Q=>{if(!Q.identifier)return;const re=W(Q.identifier);re&&(p({city:re,useCurrentLocation:!1}),x(re.name),g(re,!1))},[W,p,g]),G=f.useCallback((Q,re)=>{H(Q)},[H]);f.useEffect(()=>{if(c.current){c.current=!1;return}},[m,s,e]);const K=l.jsxs("div",{className:B("relative size-full p-2",{"pb-7 pt-2":t}),children:[l.jsxs("div",{className:"relative mx-auto aspect-square max-h-full max-w-full",children:[s==="widget"&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"absolute right-[calc(25%+4px)] top-1/2 -translate-y-1/2 translate-x-1/2",children:l.jsx(D,{variant:"tinyMono",className:"scale-[70%]",children:l.jsx(Vke,{value:M,hour:"numeric",minute:"2-digit",timeZone:m.timezone})})}),l.jsx("div",{className:"absolute left-[calc(25%+4px)] top-1/2 -translate-x-1/2 -translate-y-1/2",children:l.jsx(D,{variant:"tinyMono",className:"scale-[70%] uppercase",children:l.jsx($ke,{value:M,weekday:"short",timeZone:m.timezone})})})]}),l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",viewBox:"0 0 142 142",fill:"none",children:[l.jsx("path",{fill:i?"#fff":"#000",d:"M71 130a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-1 0v-11a.5.5 0 0 1 .5-.5M40.817 122.278a.5.5 0 1 1 .867.5l-5.5 9.527a.5.5 0 0 1-.867-.5zM100.501 122.094a.5.5 0 0 1 .683.183l5.5 9.527a.5.5 0 0 1-.867.5l-5.5-9.527a.5.5 0 0 1 .184-.683M19.222 100.316a.5.5 0 0 1 .5.867l-9.527 5.5a.5.5 0 0 1-.5-.867zM122.096 100.499a.5.5 0 0 1 .683-.183l9.527 5.5a.501.501 0 0 1-.5.867l-9.527-5.5a.5.5 0 0 1-.183-.684M11.5 70.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1zM141.5 70.5a.5.5 0 0 1 0 1h-11a.5.5 0 0 1 0-1zM9.513 35.499a.5.5 0 0 1 .682-.183l9.527 5.5a.5.5 0 1 1-.5.867l-9.527-5.5a.5.5 0 0 1-.182-.684M131.806 35.316a.5.5 0 1 1 .5.867l-9.527 5.5a.5.5 0 0 1-.5-.867zM105.817 9.694a.5.5 0 0 1 .867.5l-5.5 9.527a.501.501 0 0 1-.867-.5zM35.501 9.51a.5.5 0 0 1 .683.183l5.5 9.527a.5.5 0 0 1-.867.5l-5.5-9.527a.5.5 0 0 1 .184-.682M71 0a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-1 0V.5A.5.5 0 0 1 71 0"}),l.jsx("path",{fill:i?"#444":"#CCC",d:"M63.997 137.633a.5.5 0 0 1 .445.549l-.314 2.984a.5.5 0 1 1-.994-.105l.313-2.983a.5.5 0 0 1 .55-.445M78.004 137.632a.5.5 0 0 1 .55.444l.313 2.984a.5.5 0 1 1-.994.105l-.314-2.984a.5.5 0 0 1 .445-.549M84.932 136.538a.5.5 0 0 1 .593.385l.623 2.934a.5.5 0 1 1-.977.208l-.624-2.934a.5.5 0 0 1 .385-.593M57.07 136.532a.5.5 0 0 1 .385.593l-.624 2.934a.5.5 0 1 1-.979-.208l.624-2.933a.5.5 0 0 1 .593-.386M91.706 134.722a.5.5 0 0 1 .63.321l.927 2.853a.5.5 0 0 1-.95.309l-.928-2.853a.5.5 0 0 1 .32-.63M49.666 135.04a.5.5 0 0 1 .951.309l-.928 2.853a.499.499 0 1 1-.95-.309zM98.25 132.208a.5.5 0 0 1 .661.254l1.221 2.74a.5.5 0 0 1-.914.407l-1.22-2.741a.5.5 0 0 1 .253-.66M43.089 132.46a.5.5 0 0 1 .913.407l-1.22 2.74a.5.5 0 0 1-.914-.406zM30.92 125.315a.5.5 0 0 1 .81.588l-1.763 2.427a.5.5 0 0 1-.81-.588zM110.383 125.203a.5.5 0 0 1 .698.11l1.764 2.428a.5.5 0 0 1-.81.587l-1.763-2.427a.5.5 0 0 1 .111-.698M115.835 120.79a.5.5 0 0 1 .706.037l2.007 2.229a.5.5 0 1 1-.743.669l-2.007-2.228a.5.5 0 0 1 .037-.707M25.464 120.825a.5.5 0 1 1 .743.669l-2.008 2.229a.5.5 0 0 1-.743-.668zM120.794 115.833a.5.5 0 0 1 .706-.037l2.229 2.007a.499.499 0 1 1-.669.743l-2.229-2.007a.5.5 0 0 1-.037-.706M20.504 115.793a.5.5 0 1 1 .669.743l-2.23 2.007a.5.5 0 0 1-.669-.743zM125.204 110.382a.5.5 0 0 1 .698-.111l2.428 1.764a.5.5 0 0 1-.588.809l-2.428-1.763a.5.5 0 0 1-.11-.699M16.098 110.27a.5.5 0 0 1 .587.809l-2.427 1.764a.5.5 0 1 1-.587-.809zM9.133 97.998a.5.5 0 0 1 .407.913l-2.741 1.221a.5.5 0 0 1-.407-.914zM132.209 98.25a.5.5 0 0 1 .66-.253l2.74 1.22a.5.5 0 0 1-.406.914l-2.741-1.22a.5.5 0 0 1-.253-.66M134.723 91.703a.5.5 0 0 1 .63-.321l2.854.927a.5.5 0 0 1-.31.95l-2.852-.926a.5.5 0 0 1-.322-.63M6.652 91.382a.5.5 0 0 1 .31.95l-2.854.928a.5.5 0 1 1-.308-.952zM137.133 84.545l2.934.623a.501.501 0 0 1-.208.978l-2.934-.624a.5.5 0 1 1 .208-.977M4.873 84.543a.5.5 0 1 1 .208.977l-2.935.624a.5.5 0 0 1-.208-.978zM141.167 77.872a.5.5 0 0 1-.105.995l-2.984-.313a.5.5 0 0 1 .104-.996zM3.818 77.558a.5.5 0 0 1 .105.995l-2.984.313a.5.5 0 0 1-.104-.994zM3.923 63.447a.5.5 0 0 1-.105.995l-2.983-.314a.5.5 0 1 1 .104-.994zM141.062 63.133a.5.5 0 0 1 .105.995l-2.985.313a.5.5 0 0 1-.104-.995zM2.148 55.852l2.935.624a.5.5 0 1 1-.208.979L1.94 56.83a.5.5 0 0 1 .208-.979M139.857 55.85a.5.5 0 0 1 .208.979l-2.934.624a.5.5 0 0 1-.208-.979zM3.477 49.058a.5.5 0 0 1 .631-.32l2.853.927a.5.5 0 1 1-.309.951L3.8 49.688a.5.5 0 0 1-.322-.63M137.898 48.737a.5.5 0 1 1 .309.951l-2.853.927a.5.5 0 0 1-.309-.951zM6.14 42.12a.5.5 0 0 1 .66-.253l2.74 1.22a.5.5 0 1 1-.406.914l-2.742-1.22a.5.5 0 0 1-.253-.66M135.202 41.868a.5.5 0 0 1 .407.914l-2.741 1.22a.5.5 0 1 1-.406-.913zM13.56 29.267a.5.5 0 0 1 .699-.11l2.426 1.764a.5.5 0 0 1-.587.808l-2.427-1.763a.5.5 0 0 1-.112-.699M127.742 29.156a.5.5 0 0 1 .588.809l-2.428 1.763a.5.5 0 0 1-.588-.81zM18.24 23.492a.5.5 0 0 1 .706-.037l2.23 2.008a.5.5 0 0 1-.67.743l-2.229-2.008a.5.5 0 0 1-.037-.706M123.057 23.452a.5.5 0 0 1 .67.743l-2.229 2.008a.5.5 0 0 1-.67-.743zM23.494 18.236a.5.5 0 0 1 .707.037l2.007 2.23a.5.5 0 1 1-.743.669l-2.007-2.23a.5.5 0 0 1 .036-.706M117.804 18.27a.5.5 0 0 1 .743.67l-2.007 2.229a.5.5 0 1 1-.743-.67zM112.035 13.67a.5.5 0 0 1 .809.589l-1.763 2.426a.5.5 0 0 1-.81-.587zM29.268 13.558a.5.5 0 0 1 .699.11l1.763 2.428a.5.5 0 0 1-.81.588l-1.762-2.427a.5.5 0 0 1 .11-.699M42.12 6.139a.5.5 0 0 1 .661.253l1.22 2.74a.5.5 0 0 1-.913.408l-1.22-2.741a.5.5 0 0 1 .253-.66M99.219 6.391a.5.5 0 1 1 .913.407l-1.22 2.74a.5.5 0 0 1-.914-.406zM49.061 3.476a.5.5 0 0 1 .631.32l.927 2.854a.5.5 0 0 1-.951.31l-.927-2.854a.5.5 0 0 1 .32-.63M92.31 3.795a.5.5 0 1 1 .951.308l-.927 2.854a.5.5 0 1 1-.951-.31zM56.24 1.554a.5.5 0 0 1 .593.384l.624 2.935a.5.5 0 0 1-.979.208l-.623-2.935a.5.5 0 0 1 .385-.592M85.762 1.548a.5.5 0 0 1 .384.593l-.624 2.934a.5.5 0 1 1-.977-.208l.623-2.934a.5.5 0 0 1 .593-.385M78.422.389a.5.5 0 0 1 .445.55l-.314 2.983a.5.5 0 0 1-.995-.105l.314-2.983a.5.5 0 0 1 .55-.445M63.579.388a.5.5 0 0 1 .55.445l.313 2.983a.5.5 0 0 1-.994.105L63.135.937a.5.5 0 0 1 .444-.55"})]}),l.jsx(_e.div,{initial:{rotate:k},animate:{rotate:[k,k+360]},transition:{duration:3600,repeat:1/0,repeatType:"loop",ease:"linear"},className:"absolute inset-0",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",viewBox:"0 0 142 142",fill:"none",children:l.jsx("path",{fill:i?"#fff":"#000",fillRule:"evenodd",d:"M71 2a2 2 0 0 1 2 2v60c0 .74-.403 1.383-1 1.73v2.444A2.998 2.998 0 0 1 71 74a3 3 0 0 1-1-5.826v-2.445c-.597-.346-1-.99-1-1.729V4a2 2 0 0 1 2-2m0 68a1 1 0 1 0 0 2 1 1 0 0 0 0-2",clipRule:"evenodd"})})}),l.jsx(_e.div,{initial:{rotate:O},animate:{rotate:[O,O+360]},transition:{duration:43200,repeat:1/0,repeatType:"loop",ease:"linear"},className:"absolute inset-0",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",viewBox:"0 0 142 142",fill:"none",children:l.jsx("path",{fill:i?"#fff":"#000",fillRule:"evenodd",d:"M71 24a2 2 0 0 1 2 2v38c0 .74-.403 1.383-1 1.73v2.444A2.998 2.998 0 0 1 71 74a3 3 0 0 1-1-5.826v-2.445c-.597-.346-1-.99-1-1.729V26a2 2 0 0 1 2-2m0 46a1 1 0 1 0 0 2 1 1 0 0 0 0-2",clipRule:"evenodd"})})}),l.jsx(_e.div,{initial:{rotate:R},animate:{rotate:[R,R+360]},transition:{duration:60,repeat:1/0,repeatType:"loop",ease:"linear"},className:"absolute inset-0",children:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",viewBox:"0 0 142 142",fill:"none",children:[l.jsx("path",{fill:"#FF7323",d:"M71 2a.75.75 0 0 1 .75.75v66.397a2 2 0 0 1 0 3.706v3.397a.75.75 0 0 1-1.5 0v-3.397a1.999 1.999 0 0 1 0-3.706V2.75A.75.75 0 0 1 71 2"}),l.jsx("circle",{cx:71,cy:71,r:1,fill:"#fff"})]})})]}),t&&l.jsx(D,{variant:"tiny",color:"default",className:"pointer-events-none flex h-7 select-none items-center justify-center",children:l.jsx("div",{className:"truncate px-2",children:m.name})})]}),$=B("h-10 rounded-md p-4 dark:[&:focus]:ring-0",{"rounded-t-md rounded-b-none":w&&E.length>0,"opacity-50":!!h.useCurrentLocation}),q=f.useMemo(()=>({LeftIconComponent:Alt,RightIconComponent:Nlt}),[]),Z=f.useCallback(()=>r?.(!1),[r]),se=f.useCallback(Q=>{p({useCurrentLocation:Q})},[p]),Y=f.useCallback(()=>{r?.(!1)},[r]);return s==="thumbnail"?K:l.jsxs(l.Fragment,{children:[l.jsx(tr,{shadow:!0,className:"active:!bg-offset dark:active:!bg-offsetPlus aspect-[1/1] w-full overflow-hidden !rounded-2xl",children:l.jsx(at,{draggable:!1,href:`/search/new?q=${a({defaultMessage:"what time is it in {location}",id:"NbMaPyS+lK"},{location:m.name})}`,className:"relative block size-full",children:K})}),l.jsx(st,{children:n&&l.jsx(ju,{onClose:Z,children:l.jsxs("div",{className:"flex flex-col gap-3 px-5 py-4",children:[l.jsx(D,{variant:"entry-title-300",children:a({defaultMessage:"Select city",id:"twZBdKGll7"})}),l.jsx(Tp,{isOpen:w&&E.length>0,suggestedQueries:E,focusedIndex:b,setFocusedIndex:_,handlePasteQuery:Rn,handleSubmit:G,value:v??"",components:q,dropdownClassName:"dark:border-none dark:ml-0 dark:mr-0 dark:w-full max-h-[250px] overflow-y-auto",dropdownType:"select",popoverClassName:"dark:!border-none",children:l.jsx(xo,{disable1pass:!0,disabled:h.useCurrentLocation,onFocus:L,onBlur:F,className:$,pill:!1,ref:y,isMobileUserAgent:u,placeholder:a({defaultMessage:"New York, London, Tokyo...",id:"iJ+co77mIp"}),value:v,onChange:U,ClearIcon:Plt,...v.length>0?{onClear:V}:{}})}),l.jsxs("label",{htmlFor:"use-current-location",className:"gap-sm flex w-fit flex-row items-center",children:[l.jsx(O9,{id:"use-current-location",checked:!!h.useCurrentLocation,toggleChecked:se}),l.jsx(D,{variant:"small",color:"light",children:a({defaultMessage:"Use current location",id:"Z2NE7X6xxg"})})]}),l.jsx("div",{className:"mt-sm flex flex-row justify-end",children:l.jsx(ye,{variant:"primary",size:"small",onClick:Y,text:a({defaultMessage:"Done",id:"JXdbo8Vnlw"})})})]})})})]})});y7.displayName="ClockWidget";const qpe=20,Rlt=async({options:e,reason:t})=>{const n=e?.offset??0,r=e?.limit??qpe,s=e?.topic??null,a=e?.nextToken??null,{data:o,error:i}=await ne.GET("/rest/discover/feed",t,{params:{query:{limit:r,offset:n,next_token:a,topic:s&&s!=="you"?[s]:void 0}},timeoutMs:je(),numRetries:1,reason:t});if(i)throw new Me("API_CLIENTS_ERROR",{cause:i});const c=o;if(c.status!=="success")throw new Me("API_CLIENTS_ERROR",{cause:c});const u=c?.items??[],d=c?.feed_uuid??null,m=c?.next_token??null;return d&&u.length>0&&u.forEach(h=>{h.feed_uuid=d}),{threads:u,nextToken:m}},Ilt=async e=>{try{const t=await er({headers:e,urlPath:`/rest/discover/topics?version=${ni}`,timeoutMs:1500,numRetries:1});if(!t.ok){const r=await t.text();throw new Error(`Bad discover response: ${r}`)}const n=await t.json();return{userSelectedTopics:n?.user_selected_topics??[],allTopics:n?.all_topics??[]}}catch(t){return ee.error("Failed to get discover topics.",t),{userSelectedTopics:[],allTopics:[]}}};function jlt(){return Ke({queryKey:mie(),queryFn:()=>Ilt(),placeholderData:W0,refetchOnReconnect:!0,refetchOnMount:!1})}const Olt=async({topics:e,reason:t})=>{const{data:n,error:r}=await ne.PUT("/rest/discover/topics",t,{body:{topics:e,return_feed:!0,return_feed_limit:qpe,return_feed_version:ni},timeoutMs:1500,numRetries:1});if(r)throw new Me("API_CLIENTS_ERROR",{cause:r});const s=n,a=s.feed_items??[],o=s.feed_uuid,i=s.next_token??null;return o&&a?.length>0&&a.forEach(c=>{c.feed_uuid=o}),{status:"success",feedItems:a,nextToken:i}},HVt=async({contextUUID:e,reason:t})=>{const n=await ne.PUT("/rest/discover/feed-items/{context_uuid}/feedback/like",t,{params:{path:{context_uuid:e}}});if(n.error)throw n.error},zVt=async({contextUUID:e,reason:t})=>{const n=await ne.DELETE("/rest/discover/feed-items/{context_uuid}/feedback/like",t,{params:{path:{context_uuid:e}}});if(n.error)throw n.error},GVt=async({contextUUID:e,reason:t})=>{const n=await ne.PUT("/rest/discover/feed-items/{context_uuid}/feedback/dislike",t,{params:{path:{context_uuid:e}}});if(n.error)throw n.error},qVt=async({contextUUID:e,reason:t})=>{const n=await ne.DELETE("/rest/discover/feed-items/{context_uuid}/feedback/dislike",t,{params:{path:{context_uuid:e}}});if(n.error)throw n.error},Llt=20,Dlt=({pageParam:e,topic:t,reason:n})=>{const r=(Math.max(e.pageNum,1)-1)*Llt;return Rlt({options:{offset:r,topic:t,nextToken:e.nextToken},reason:n})},Flt=({initialPage:e,topic:t,reason:n,refetchInterval:r})=>{const s=fc({queryKey:kl(t),queryFn:({pageParam:m})=>Dlt({pageParam:m,topic:t,reason:n}),refetchOnReconnect:"always",refetchOnMount:!1,initialPageParam:{pageNum:e},refetchInterval:r,getNextPageParam:(m,h,p)=>{if(!(m&&!m.threads?.[0]?.has_next_page))return{pageNum:p.pageNum+1,nextToken:m.nextToken}}}),a=s.data?.pages??[],o=(()=>{const m=new Set;return a.flatMap(h=>h.threads).filter(h=>m.has(h.uuid)?!1:(m.add(h.uuid),!0))})(),i=a[a.length-1]?.threads?.[0]?.has_next_page??!1,c=s.data?.pageParams?.length??1,u=i?c+1:null,d=f.useMemo(()=>({currentPage:c,hasNextPage:i,hasPreviousPage:c>1,getNextPage:()=>s.fetchNextPage(),getPreviousPage:()=>s.fetchPreviousPage()}),[i,c,s]);return f.useMemo(()=>({...s,nextPage:u,paginationInfo:d,threads:o}),[u,d,s,o])},Ult=0,Blt=({topic:e,reason:t,refetchInterval:n})=>{const{threads:r,paginationInfo:s,isLoading:a,isFetching:o,fetchStatus:i,nextPage:c}=Flt({initialPage:Ult,topic:e,reason:t,refetchInterval:n}),u=a||i==="fetching",d=!r?.length&&!a&&i==="idle",m=f.useCallback(()=>{!s.hasNextPage||o||s.getNextPage()},[o,s]);return f.useMemo(()=>({threads:r,paginationInfo:s,isLoading:a,fetchStatus:i,nextPage:c,showLoadingState:u,showEmptyState:d,fetchNextPage:m}),[r,s,a,i,c,u,d,m])},YP=A.memo(({variant:e,className:t,colorVariant:n,text:r,lines:s=1})=>{const o=f.useMemo(()=>({height:"50%"}),[.5]);return l.jsxs("div",{className:`relative grid items-center ${t}`,children:[l.jsx("div",{className:"col-start-1 row-start-1 flex size-full flex-col",children:Array.from({length:s}).map((i,c)=>l.jsx("div",{className:"flex h-full items-center",children:l.jsx(z,{className:B("rounded-full",{"w-full":c!==s-1||s===1,"w-1/2":c===s-1&&s>1}),variant:n??"offsetPlus",style:o})},c))}),l.jsx(D,{variant:e,color:"light",className:"pointer-events-none col-start-1 row-start-1 opacity-0",children:Array.from({length:s}).map((i,c)=>l.jsxs(A.Fragment,{children:[r??l.jsx(l.Fragment,{children:""}),c<s-1&&l.jsx("br",{})]},c))})]})});YP.displayName="TextBlockSkeleton";const v7=A.memo(({showSettings:e,setShowSettings:t,context:n="widget"})=>{const{$t:r}=X(),s=X(),[a,o]=f.useState(!1),{threads:i}=Blt({topic:"top",reason:"Discover widget",refetchInterval:n==="thumbnail"?void 0:1e3*60*5}),c=i[0]?.updated_datetime?.endsWith("Z")?i[0]?.updated_datetime:`${i[0]?.updated_datetime}Z`,u=i[0]?.featured_images?.[0]?.thumbnail;f.useEffect(()=>{o(!1)},[u]);const d=i[0]?l.jsx("div",{className:B("h-full w-full transform-gpu rounded-2xl"),children:l.jsxs("div",{className:"gap-sm flex h-full flex-1 flex-col justify-between p-2.5 pb-0",style:{zoom:n==="thumbnail"?.75:1},children:[u&&!a&&l.jsxs(l.Fragment,{children:[l.jsx("img",{src:u,alt:"Discover",className:"absolute inset-0 size-full object-cover",onError:()=>{o(!0)}},u),l.jsx("div",{className:"absolute inset-0 bg-black/50"}),l.jsx("div",{className:"absolute inset-0 bg-black",style:{maskImage:"linear-gradient(to bottom, transparent 50%, black)"}})]}),l.jsxs("div",{className:B("absolute inset-0 flex flex-col items-start justify-end gap-1 p-2",{"drop-shadow-md":!a}),children:[l.jsx(D,{variant:"micro",color:a?"default":"white",className:"opacity-60",children:AC(s,new Date(c))}),l.jsx(D,{variant:"smallBold",color:a?"default":"white",className:"w-full break-words",children:i[0].title})]})]})}):l.jsx("div",{className:"bg-offset size-full",children:l.jsxs("div",{className:"absolute inset-0 flex w-full flex-col items-start justify-end gap-1 p-2",children:[l.jsx(YP,{variant:"micro",colorVariant:"offsetPlus",className:"w-10 opacity-75 dark:opacity-60"}),l.jsx(YP,{variant:"smallBold",colorVariant:"offsetPlus",lines:3,className:"w-full"})]})}),m=f.useCallback(()=>t?.(!1),[t]);return n==="thumbnail"?d:l.jsxs(l.Fragment,{children:[l.jsx(tr,{shadow:!0,fullBleed:!0,className:"aspect-[1/1] w-full overflow-hidden !rounded-2xl",children:l.jsx(at,{href:`/page/${i[0]?.slug}`,className:"block",children:l.jsx("div",{className:"absolute inset-0 select-none",children:d})})}),l.jsx(st,{children:e&&l.jsx(ju,{onClose:m,children:l.jsx("div",{className:"flex flex-col gap-3 px-5 py-4",children:l.jsx(D,{variant:"entry-title-300",children:r({defaultMessage:"Discover settings",id:"Kf1JUdlcaI"})})})})})]})});v7.displayName="DiscoverWidget";const Vlt=()=>{const e=f.useRef(null),t=f.useRef(null),n=f.useCallback((o,i)=>{if(e.current=o,!o||(o.volume=.5,!i))return;const c=o.play();c!==void 0&&(t.current=c,c.catch(()=>{}).finally(()=>{t.current===c&&(t.current=null)}))},[]),r=f.useCallback(()=>{const o=e.current;if(!o)return;const i=o.play();i!==void 0&&(t.current=i,i.catch(()=>{}).finally(()=>{t.current===i&&(t.current=null)}))},[]),s=f.useCallback(()=>{const o=e.current;o&&(t.current?t.current.catch(()=>{}).finally(()=>{o.pause()}):o.pause())},[]),a=f.useCallback(o=>{o?r():s()},[r,s]);return{videoRef:e,setVideoRef:n,playVideo:r,pauseVideo:s,togglePlayback:a}},YK="assistant-promo-config-cached";function $lt(){const{value:e,loading:t}=vf({flag:"assistant-promo-deeplinks",subjectType:"user_nextauth_id",defaultValue:{}}),[n,r]=f.useState(()=>{const a=Ve.getItem(YK);return a?JSON.parse(a):{}});f.useEffect(()=>{const a=e;!t&&JSON.stringify(a)!==JSON.stringify(n)&&(r(a),Ve.setItem(YK,JSON.stringify(a)))},[e,n,t]);const s=!!(n.deeplinkQueries&&n.deeplinkQueries.length>0);return f.useMemo(()=>({config:n,isLoading:t,shouldShowExploreAssistant:s}),[n,t,s])}const QK="explore-assistant-should-show-cached",b_="explore-assistant-history-cache",Kpe=10*60*1e3,mk=e=>e!=="unknown"&&!!e,Wlt=()=>{try{const e=Ve.getItem(b_);if(!e)return null;const t=JSON.parse(e);return Date.now()-t.timestamp>Kpe?(Ve.removeItem(b_),null):new Set(t.domainsInHistory)}catch{return Ve.removeItem(b_),null}},XK=e=>{const t={timestamp:Date.now(),domainsInHistory:Array.from(e)};Ve.setItem(b_,JSON.stringify(t))},ZK={url:"https://www.nytimes.com/games/wordle/index.html",query:"Take control over browser and win Wordle for me"},Hlt=(e,t)=>!e||!t?`${ZK.url}#comet=${encodeURIComponent(ZK.query)}`:`${e}#comet=${encodeURIComponent(t)}`;function x7(){const{config:e,isLoading:t}=$lt(),n=hr(),[r,s]=f.useState(()=>{const p=Ve.getItem(QK);return p?JSON.parse(p):!1}),a=f.useMemo(()=>e.deeplinkQueries||[],[e]),o=f.useMemo(()=>{const p=new Set;return a.forEach(g=>{if(g.action==="HISTORY_PRESENCE"){const y=Hi(g.url);mk(y)&&p.add(y)}}),Array.from(p)},[a]),{data:i}=Ke({queryKey:["explore-assistant-history",o],queryFn:async()=>{if(!n||o.length===0)return new Set;const p=Wlt();if(p!==null)return p;try{const g=await n.getHistorySummary("explore-assistant-check",o,14,1),y=new Set;return g.history_results?.forEach(v=>{const x=Hi(v?.url||"");mk(x)&&o.includes(x)&&y.add(x)}),XK(y),y}catch{return new ky("PARSE_HISTORY_FAILED",{message:"Explore Assistant failed to parse history"}),XK(new Set),new Set}},staleTime:Kpe,enabled:!0,retry:!1,throwOnError:!1}),c=f.useMemo(()=>i||new Set,[i]),u=f.useMemo(()=>{if(a.length===0)return null;const p=[],g=a.filter(x=>x.action==="ALWAYS");p.push(...g);const y=a.filter(x=>{if(x.action!=="HISTORY_PRESENCE")return!1;const b=Hi(x.url);return mk(b)&&c.has(b)});if(p.push(...y),p.length===0)return null;const v=Math.floor(Math.random()*p.length);return p[v]||null},[a,c]),d=f.useMemo(()=>Hlt(u?.url,u?.query),[u]),m=a?.length>0;f.useEffect(()=>{m!==r&&(s(m),Ve.setItem(QK,JSON.stringify(m)))},[m,r]);const h=t?r:m;return f.useMemo(()=>({targetUrl:d,isLoading:t,shouldShowWidget:h}),[d,t,h])}const zlt="https://r2cdn.perplexity.ai/comet/explore-assistant-min.mp4",JK="https://r2cdn.perplexity.ai/comet/eplore-assistant-stop-min.png",Glt=({context:e="widget"})=>{const{targetUrl:t,shouldShowWidget:n}=x7(),{trackEvent:r}=Te(),{setVideoRef:s,togglePlayback:a}=Vlt(),o=f.useCallback(m=>{s(m,!1)},[s]),i=f.useCallback(()=>{if(!t)return;const m=Hi(t);r("explore assistant clicked",{domain:m})},[t,r]);if(f.useEffect(()=>{r("explore assistant shown")},[r]),!n||!t)return null;const c=()=>{e==="widget"&&a(!0)},u=()=>{e==="widget"&&a(!1)},d=l.jsx("div",{className:B("relative h-full w-full cursor-pointer select-none",{"active:!bg-offset dark:active:!bg-offsetPlusDark":e==="widget"}),onMouseEnter:c,onMouseLeave:u,children:l.jsxs("div",{className:"group relative size-full",children:[e==="widget"?l.jsx("video",{ref:o,src:zlt,poster:JK,className:"pointer-events-none absolute inset-0 size-full object-cover",autoPlay:!1,loop:!0,muted:!0,playsInline:!0}):l.jsx("img",{src:JK,alt:"Explore Assistant",className:"pointer-events-none absolute inset-0 size-full object-cover"}),l.jsx("div",{className:"pointer-events-none absolute bottom-0 h-[45px] w-full bg-gradient-to-b from-transparent to-[#02233E]"}),l.jsx("div",{className:"absolute inset-x-0 bottom-2 flex justify-center",children:l.jsx(D,{variant:"tinyMono",color:"white",className:"!text-2xs uppercase drop-shadow-lg",children:e==="widget"?"Try Assistant In Action":"Try Assistant"})})]})});return e==="thumbnail"?d:l.jsx(tr,{shadow:!0,className:"aspect-[1/1] w-full overflow-hidden !rounded-2xl",fullBleed:!0,children:l.jsx(at,{href:t,target:"_blank",rel:"noopener",className:"block size-full cursor-pointer",draggable:!1,onClick:i,children:d})})},Ype=A.memo(Glt),b7=fe.PRO,Qpe=e=>({id:e.task_id,title:e.task_name,prompt:e.prompt,searchModel:SL(e.model_preference)??b7,sources:jue(e.sources),preconfigured:e.preconfigured});function KVt(e=""){return{title:"",prompt:e,searchModel:b7,sources:["web"],preconfigured:!1}}const qlt=(e,t)=>{const{value:n,loading:r}=Ut({flag:"shortcut-widget",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},_f=je({productionMs:3e3}),Klt=je({productionMs:5e3}),eY={TASK_LIMIT_EXCEEDED:"TASK_LIMIT_EXCEEDED",SHORTCUT_NAME_ALREADY_EXISTS:"SHORTCUT_NAME_ALREADY_EXISTS"},eE=async({taskId:e,headers:t,reason:n})=>{const{data:r,error:s}=await ne.GET("/rest/tasks/{task_id}",n,{params:{path:{task_id:e}},timeoutMs:je(),numRetries:hc,headers:t});if(s)throw s;return r?.task?$ce(r.task):null};async function YVt({headers:e,reason:t,schedulerType:n}){const r="getUserAlerts";try{const a=(await ne.GET("/rest/tasks/",t,{params:{query:{scheduler_type:n}},timeoutMs:je(),numRetries:hc,headers:e})).data?.tasks.map($ce);return a?a.sort((o,i)=>i.createdAt.valueOf()-o.createdAt.valueOf()):[]}catch(s){return ee.log(`Error in ${r}:`,s),[]}}const Ylt=async({payload:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/tasks/",t,{body:e});if(r)throw r;return n},QP=async({taskId:e,payload:t,reason:n})=>{const{data:r,error:s}=await ne.PATCH("/rest/tasks/{task_id}",n,{params:{path:{task_id:e}},body:t});if(s)throw s;return r},Xpe=async({taskId:e,reason:t})=>ne.DELETE("/rest/tasks/{task_id}",t,{params:{path:{task_id:e}},timeoutMs:_f}),QVt=async({payload:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/tasks/suggest",t,{body:e,timeoutMs:1e4});if(r)throw r;return n},Qlt=async({payload:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/tasks/finance",t,{body:e});if(r)throw r;return n},Xlt=async({taskId:e,payload:t,reason:n})=>{const{data:r,error:s}=await ne.PATCH("/rest/tasks/finance/{task_id}",n,{params:{path:{task_id:e}},body:t});if(s)throw s;return r},XVt=async({ticker:e,reason:t})=>{const{data:n,error:r}=await ne.GET("/rest/tasks/finance/tickers/{ticker}",t,{params:{path:{ticker:e}},timeoutMs:je(),numRetries:hc});if(r)throw ee.error("Failed to get finance ticker",r),r;return n},ZVt=async({payload:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/tasks/shortcuts",t,{body:e,timeoutMs:_f});if(r)throw r;return n},JVt=async({payload:e,reason:t})=>{const{data:n,error:r}=await ne.POST("/rest/tasks/shortcuts/slug",t,{body:e,timeoutMs:Klt});if(r)throw r;return n},e$t=async({taskId:e,payload:t,reason:n})=>{const{data:r,error:s}=await ne.PATCH("/rest/tasks/shortcuts/{task_id}",n,{body:t,params:{path:{task_id:e}},timeoutMs:_f});if(s)throw s;return r},t$t=async({shortcutId:e,reason:t})=>{const{data:n,error:r}=await ne.DELETE("/rest/tasks/shortcuts/defaults/{shortcut_id}",t,{params:{path:{shortcut_id:e}},timeoutMs:_f});if(r)throw r;return n},n$t=async({shortcutId:e,reason:t})=>{const{data:n,error:r}=await ne.GET("/rest/tasks/shortcuts/copy/{shortcut_id}",t,{params:{path:{shortcut_id:e}},timeoutMs:_f});if(r)throw r;return n},Zlt=async({copyToken:e,reason:t,headers:n})=>{const{data:r,error:s}=await ne.GET("/rest/tasks/shortcuts/paste/{copy_token}",t,{params:{path:{copy_token:e}},headers:n,timeoutMs:_f});if(s)throw s;return r},Zpe=async({reason:e,headers:t})=>{const{data:n,error:r}=await ne.GET("/rest/tasks/shortcuts/mentions",e,{params:{query:{order_by:"created_at"}},timeoutMs:_f,numRetries:hc,headers:t});if(r)throw ee.error("Failed to get shortcut typeahead options",r),r;return n},_7=({reason:e,...t})=>Ke({queryKey:gOe(),queryFn:async()=>{const{tasks:n}=await Zpe({reason:e});return n},...t}),tY="shortcut-widgets-enabled-cache";function Jlt(){const{variation:e,loading:t}=qlt(!1),{value:n,loading:r}=Yr({flag:"shortcut-tasks",defaultValue:!0}),s=t||r,a=e&&n,[o,i]=f.useState(()=>{const c=Ve.getItem(tY);return c?JSON.parse(c):!1});return f.useEffect(()=>{s||a!==o&&(i(a),Ve.setItem(tY,JSON.stringify(a)))},[a,s,o]),o}function nY(e,t){Bp("SHORTCUT",t,e)}const Jpe=f.memo(({context:e,widgetId:t,defaultName:n,defaultQuery:r,showSettings:s,setShowSettings:a})=>{const[o,i,{onSubmit:c}]=JC({csrRedirect:!0}),[u,d]=f.useState(()=>Bpe({context:e,widgetId:t,defaultQuery:r,defaultName:n})),{data:m}=Ke({queryKey:FO(u.taskId),queryFn:()=>eE({taskId:u.taskId,reason:"ShortcutWidget"}),enabled:u.taskId!==p7});f.useEffect(()=>{m&&d(v=>{const x={...v,query:m.prompt,name:m.title};return nY(x,t),x})},[m,t]);const h=f.useCallback(()=>{c({query:u.query,querySource:"homepage_widget",promptSource:"homepage_widget"})},[c,u.query]),p=f.useCallback(()=>{a?.(!1)},[a]),g=f.useCallback(v=>{nY(v,t),d(v),a?.(!1)},[a,t]),y=l.jsxs("div",{className:"flex size-full flex-col p-3",style:{zoom:e==="thumbnail"?.75:1},children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(D,{color:"super",children:l.jsx(be,{icon:dl,size:"lg"})}),l.jsxs(D,{variant:"tinyRegular",color:"light",className:"line-clamp-2 break-words",children:["/",u.name]})]}),l.jsx(D,{variant:"smallBold",color:"default",className:"mt-auto line-clamp-5 text-balance break-words",children:u.query})]});return e==="thumbnail"?y:l.jsxs(l.Fragment,{children:[l.jsx(tr,{shadow:!0,className:"aspect-[1/1] w-full cursor-pointer select-none overflow-hidden !rounded-2xl",onClick:h,children:l.jsx(Ln,{hoverOnly:!0,className:"size-full",children:l.jsx(z,{variant:"raised",className:"hover:bg-offset dark:hover:bg-offsetPlus size-full transition duration-300",children:y})})}),s&&l.jsx(ect,{shortcut:u,onDone:g,onClose:p})]})}),ect=({shortcut:e,onDone:t,onClose:n})=>{const r="shortcut-widget-settings",{$t:s}=X(),a=Is(),{openModal:o}=_t(),[i,c]=f.useState(e.taskId),[u,d]=f.useState(null),{data:m}=_7({reason:r}),h=f.useCallback(v=>m?.find(x=>x.task_id===v),[m]),p=f.useMemo(()=>{const v=[];m&&m.forEach(b=>{if(!b.prompt.length)return;const _={type:"default",text:`/${b.task_name}`,tooltipText:b.prompt,rightElement:b.preconfigured?null:l.jsx(tct,{shortcut:b,focused:u===b.task_id}),onMouseEnter:()=>{d(b.task_id)},onClick:()=>{c(b.task_id)}};v.push(_)});const x={type:"default",text:s({defaultMessage:"+ Create a new shortcut",id:"91niw1hBV9"}),onMouseEnter:()=>{d("create")},onClick:()=>{o("taskShortcutModal",{source:"shortcut_widget",onCreated:b=>{c(b.id)}})}};return[...v,x]},[m,s,o,u]),g=f.useMemo(()=>{const v=h(i);return v?`/${v.task_name}`:s({defaultMessage:"Choose or create a shortcut",id:"mtB/vUwddZ"})},[h,i,s]),y=f.useCallback(()=>{const v=h(i);v&&t({...e,query:v.prompt,name:v.task_name,taskId:i})},[t,e,h,i]);return l.jsx(st,{children:l.jsx(ju,{onClose:n,children:l.jsxs("div",{className:"flex flex-col gap-3 px-5 py-4",children:[l.jsxs("div",{children:[l.jsx(D,{variant:"entry-title-300",children:s({defaultMessage:"Shortcuts",id:"7FAwwkYilD"})}),l.jsx(D,{variant:"small",color:"light",children:s({defaultMessage:"Add a shortcut to a query that you use often.",id:"ry+zfkzET+"})})]}),l.jsx(en,{items:p,isMobileStyle:a,children:l.jsx(ye,{size:"small",chevron:!0,chevronIcon:Zr,text:g,textClassName:"font-normal",layout:"split",fullWidth:!0,variant:"border",testId:"interface-language-select"})}),l.jsx("div",{className:"flex flex-row justify-end",children:l.jsx(ye,{variant:"primary",size:"small",onClick:y,text:s({defaultMessage:"Done",id:"JXdbo8Vnlw"})})})]})})})},tct=({shortcut:e,focused:t})=>{const{openModal:n}=_t(),r=f.useCallback(s=>{s.preventDefault(),s.stopPropagation(),n("taskShortcutModal",{source:"typeahead_edit",shortcut:Qpe(e)})},[n,e]);return l.jsx("div",{className:B("transition-opacity",t&&"opacity-100",!t&&"opacity-0"),children:l.jsx(ke,{icon:uc,size:"tiny",variant:"common",noPadding:!0,onClick:r})})},ege=e=>{switch(e){case"YELLOW":return"bg-[#fef3c7] dark:bg-[#422006]";case"BLUE":return"bg-[#dbeafe] dark:bg-[#172554]";case"RED":return"bg-[#fee2e2] dark:bg-[#450a0a]";case"GREEN":return"bg-[#d1fae5] dark:bg-[#052e16]";default:return"bg-[#fef3c7] dark:bg-[#422006]"}},nct=e=>{switch(e){case"YELLOW":return"placeholder-[#eab308] dark:placeholder-[#a16207]";case"BLUE":return"placeholder-[#3b82f6] dark:placeholder-[#1d4ed8]";case"RED":return"placeholder-[#ef4444] dark:placeholder-[#b91c1c]";case"GREEN":return"placeholder-[#22c55e] dark:placeholder-[#15803d]";default:return"placeholder-[#eab308] dark:placeholder-[#a16207]"}},rY=e=>{switch(e){case"YELLOW":return"text-[#a16207] dark:text-[#fef08a]";case"BLUE":return"text-[#1d4ed8] dark:text-[#bfdbfe]";case"RED":return"text-[#b91c1c] dark:text-[#fecaca]";case"GREEN":return"text-[#15803d] dark:text-[#bbf7d0]";default:return"text-[#a16207] dark:text-[#fef08a]"}};function rct(e="widget",t,n){if(e==="widget"){const r=Up("STICKY",t);if(r)return{text:r.text??n??"",color:r.color??"YELLOW"}}return{text:n??"",color:"YELLOW"}}function sct(e,t="widget",n){t==="widget"&&Bp("STICKY",n,{version:1,text:e.text,color:e.color})}const w7=A.memo(({context:e="widget",defaultText:t,widgetId:n,showSettings:r,setShowSettings:s})=>{const{$t:a}=X(),o=rct(e,n,t),[i,c]=f.useState(()=>o.text),[u,d]=f.useState(()=>o.color),m=f.useRef(iS(w=>{sct({...w},e,n)},200));f.useEffect(()=>{const w=m.current.flush;return()=>{w()}},[m]);const h=w=>{const S=w.target.value;c(S),m.current({text:S,color:u})},p=["YELLOW","BLUE","RED","GREEN"],g=a({defaultMessage:"Milk",id:"2ohof39xN+"}),y=a({defaultMessage:"Eggs",id:"rMvDs1YU+D"}),v=a({defaultMessage:"Bread",id:"0n2Uqvcq4W"}),x=l.jsxs("div",{className:"relative flex size-full cursor-pointer flex-col",style:{zoom:e==="thumbnail"?.75:1},children:[l.jsx("div",{className:B("absolute inset-0",ege(u))}),e==="widget"?l.jsx("textarea",{className:B("z-1 scrollbar-none absolute inset-0 resize-none bg-transparent p-4 font-sans text-sm focus:outline-none",nct(u),rY(u)),autoCorrect:"false",placeholder:a({defaultMessage:"New note...",id:"i+imRH5ndN"}),value:i,onChange:h,style:{maskImage:"linear-gradient(to top, rgba(0,0,0,0) 0%, rgba(0,0,0,1) 16px, rgba(0,0,0,1) calc(100% - 16px), rgba(0,0,0,0) 100%)"}}):l.jsx("div",{className:"absolute inset-0 p-4",children:l.jsxs(D,{variant:"baseSemi",className:rY(u),children:["- ",g,l.jsx("br",{}),"- ",y,l.jsx("br",{}),"- ",v,l.jsx("br",{})]})})]}),b=f.useCallback(()=>s?.(!1),[s]),_=f.useCallback(()=>s?.(!1),[s]);return e==="thumbnail"?x:l.jsxs(l.Fragment,{children:[l.jsx(tr,{shadow:!0,fullBleed:!0,className:"aspect-[1/1] w-full overflow-hidden !rounded-2xl",children:x}),l.jsx(st,{children:r&&l.jsx(ju,{onClose:_,children:l.jsxs("div",{className:"flex flex-col gap-3 px-5 py-4",children:[l.jsx(D,{variant:"entry-title-300",children:a({defaultMessage:"Sticky color",id:"d1DnFHvFSU"})}),l.jsx("div",{className:"gap-sm grid w-full grid-cols-4",children:p.map((w,S)=>l.jsx(tge,{value:w,color:u,text:i,setColor:d,debouncedSave:m},S))}),l.jsx("div",{className:"mt-sm flex flex-row justify-end",children:l.jsx(ye,{variant:"primary",size:"small",onClick:b,text:a({defaultMessage:"Done",id:"JXdbo8Vnlw"})})})]})})})]})});w7.displayName="Sticky";const act=({color:e,onClick:t,selected:n})=>l.jsxs(_e.div,{whileTap:{scale:.95},onClick:t,className:B("relative aspect-square size-full cursor-pointer rounded-full",ege(e)),children:[n&&l.jsx("div",{className:"border-inverse absolute inset-1 rounded-full border-4"}),l.jsx("div",{className:"rounded-inherit pointer-events-none absolute inset-0 z-[1] border border-[black]/5 dark:border-[white]/5"})]}),tge=A.memo(({value:e,color:t,text:n,setColor:r,debouncedSave:s})=>{const a=f.useCallback(()=>{r(e),s.current({text:n,color:e})},[s,r,n,e]);return l.jsx(act,{color:e,onClick:a,selected:e===t})});tge.displayName="StickyColorFactory";const tu=(e,t,n)=>{const r=document.createElement(e),[s,a]=Array.isArray(t)?[void 0,t]:[t,n];return s&&Object.assign(r,s),a?.forEach(o=>r.appendChild(o)),r},oct=(e,t)=>{var n;return t==="left"?e.offsetLeft:(((n=e.offsetParent instanceof HTMLElement?e.offsetParent:null)==null?void 0:n.offsetWidth)??0)-e.offsetWidth-e.offsetLeft},ict=e=>e.offsetWidth>0&&e.offsetHeight>0,lct=(e,t)=>{customElements.get(e)!==t&&customElements.define(e,t)};function cct(e,t,{reverse:n=!1}={}){const r=e.length;for(let s=n?r-1:0;n?s>=0:s<r;n?s--:s++)t(e[s],s)}function uct(e,t,n,r){const s=t.formatToParts(e);n&&s.unshift({type:"prefix",value:n}),r&&s.push({type:"suffix",value:r});const a=[],o=[],i=[],c=[],u={},d=y=>`${y}:${u[y]=(u[y]??-1)+1}`;let m="",h=!1,p=!1;for(const y of s){m+=y.value;const v=y.type==="minusSign"||y.type==="plusSign"?"sign":y.type;v==="integer"?(h=!0,o.push(...y.value.split("").map(x=>({type:v,value:parseInt(x)})))):v==="group"?o.push({type:v,value:y.value}):v==="decimal"?(p=!0,i.push({type:v,value:y.value,key:d(v)})):v==="fraction"?i.push(...y.value.split("").map(x=>({type:v,value:parseInt(x),key:d(v),pos:-1-u[v]}))):(h||p?c:a).push({type:v,value:y.value,key:d(v)})}const g=[];for(let y=o.length-1;y>=0;y--){const v=o[y];g.unshift(v.type==="integer"?{...v,key:d(v.type),pos:u[v.type]}:{...v,key:d(v.type)})}return{pre:a,integer:g,fraction:i,post:c,valueAsString:m,value:typeof e=="string"?parseFloat(e):e}}const dct=String.raw,fct=(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0})(),mct=typeof CSS<"u"&&CSS.supports&&CSS.supports("line-height","mod(1,1)"),sY=typeof matchMedia<"u"?matchMedia("(prefers-reduced-motion: reduce)"):null,X2="--_number-flow-d-opacity",S7="--_number-flow-d-width",Z2="--_number-flow-dx",C7="--_number-flow-d",hct=(()=>{try{return CSS.registerProperty({name:X2,syntax:"<number>",inherits:!1,initialValue:"0"}),CSS.registerProperty({name:Z2,syntax:"<length>",inherits:!0,initialValue:"0px"}),CSS.registerProperty({name:S7,syntax:"<number>",inherits:!1,initialValue:"0"}),CSS.registerProperty({name:C7,syntax:"<number>",inherits:!0,initialValue:"0"}),!0}catch{return!1}})(),pct="var(--number-flow-char-height, 1em)",Fc="var(--number-flow-mask-height, 0.25em)",aY=`calc(${Fc} / 2)`,XP="var(--number-flow-mask-width, 0.5em)",sd=`calc(${XP} / var(--scale-x))`,ib="#000 0, transparent 71%",oY=dct`:host{display:inline-block;direction:ltr;white-space:nowrap;isolation:isolate;line-height:${pct} !important}.number,.number__inner{display:inline-block;transform-origin:left top}:host([data-will-change]) :is(.number,.number__inner,.section,.digit,.digit__num,.symbol){will-change:transform}.number{--scale-x:calc(1 + var(${S7}) / var(--width));transform:translateX(var(${Z2})) scaleX(var(--scale-x));margin:0 calc(-1 * ${XP});position:relative;-webkit-mask-image:linear-gradient(to right,transparent 0,#000 ${sd},#000 calc(100% - ${sd}),transparent ),linear-gradient(to bottom,transparent 0,#000 ${Fc},#000 calc(100% - ${Fc}),transparent 100% ),radial-gradient(at bottom right,${ib}),radial-gradient(at bottom left,${ib}),radial-gradient(at top left,${ib}),radial-gradient(at top right,${ib});-webkit-mask-size:100% calc(100% - ${Fc} * 2),calc(100% - ${sd} * 2) 100%,${sd} ${Fc},${sd} ${Fc},${sd} ${Fc},${sd} ${Fc};-webkit-mask-position:center,center,top left,top right,bottom right,bottom left;-webkit-mask-repeat:no-repeat}.number__inner{padding:${aY} ${XP};transform:scaleX(calc(1 / var(--scale-x))) translateX(calc(-1 * var(${Z2})))}:host > :not(.number){z-index:5}.section,.symbol{display:inline-block;position:relative;isolation:isolate}.section::after{content:'\200b';display:inline-block}.section--justify-left{transform-origin:center left}.section--justify-right{transform-origin:center right}.section > [inert],.symbol > [inert]{margin:0 !important;position:absolute !important;z-index:-1}.digit{display:inline-block;position:relative;--c:var(--current) + var(${C7})}.digit__num,.number .section::after{padding:${aY} 0}.digit__num{display:inline-block;--offset-raw:mod(var(--length) + var(--n) - mod(var(--c),var(--length)),var(--length));--offset:calc( var(--offset-raw) - var(--length) * round(down,var(--offset-raw) / (var(--length) / 2),1) );--y:clamp(-100%,var(--offset) * 100%,100%);transform:translateY(var(--y))}.digit__num[inert]{position:absolute;top:0;left:50%;transform:translateX(-50%) translateY(var(--y))}.digit:not(.is-spinning) .digit__num[inert]{display:none}.symbol__value{display:inline-block;mix-blend-mode:plus-lighter;white-space:pre}.section--justify-left .symbol > [inert]{left:0}.section--justify-right .symbol > [inert]{right:0}.animate-presence{opacity:calc(1 + var(${X2}))}`,gct=HTMLElement,yct=mct&&fct&&hct;let lb,nge=class extends gct{constructor(){super(),this.created=!1,this.batched=!1;const{animated:t,...n}=this.constructor.defaultProps;this._animated=this.computedAnimated=t,Object.assign(this,n)}get animated(){return this._animated}set animated(t){var n;this.animated!==t&&(this._animated=t,(n=this.shadowRoot)==null||n.getAnimations().forEach(r=>r.finish()))}set data(t){var n;if(t==null)return;const{pre:r,integer:s,fraction:a,post:o,value:i}=t;if(this.created){const c=this._data;this._data=t,this.computedTrend=typeof this.trend=="function"?this.trend(c.value,i):this.trend,this.computedAnimated=yct&&this._animated&&(!this.respectMotionPreference||!(sY!=null&&sY.matches))&&ict(this),(n=this.plugins)==null||n.forEach(u=>{var d;return(d=u.onUpdate)==null?void 0:d.call(u,t,c,this)}),this.batched||this.willUpdate(),this._pre.update(r),this._num.update({integer:s,fraction:a}),this._post.update(o),this.batched||this.didUpdate()}else{this._data=t,this.attachShadow({mode:"open"});try{this._internals??(this._internals=this.attachInternals()),this._internals.role="img"}catch{}if(typeof CSSStyleSheet<"u"&&this.shadowRoot.adoptedStyleSheets)lb||(lb=new CSSStyleSheet,lb.replaceSync(oY)),this.shadowRoot.adoptedStyleSheets=[lb];else{const c=document.createElement("style");c.textContent=oY,this.shadowRoot.appendChild(c)}this._pre=new lY(this,r,{justify:"right",part:"left"}),this.shadowRoot.appendChild(this._pre.el),this._num=new vct(this,s,a),this.shadowRoot.appendChild(this._num.el),this._post=new lY(this,o,{justify:"left",part:"right"}),this.shadowRoot.appendChild(this._post.el),this.created=!0}try{this._internals.ariaLabel=t.valueAsString}catch{}}willUpdate(){this._pre.willUpdate(),this._num.willUpdate(),this._post.willUpdate()}didUpdate(){if(!this.computedAnimated)return;this._abortAnimationsFinish?this._abortAnimationsFinish.abort():this.dispatchEvent(new Event("animationsstart")),this._pre.didUpdate(),this._num.didUpdate(),this._post.didUpdate();const t=new AbortController;Promise.all(this.shadowRoot.getAnimations().map(n=>n.finished)).then(()=>{t.signal.aborted||(this.dispatchEvent(new Event("animationsfinish")),this._abortAnimationsFinish=void 0)}),this._abortAnimationsFinish=t}};nge.defaultProps={transformTiming:{duration:900,easing:"linear(0,.005,.019,.039,.066,.096,.129,.165,.202,.24,.278,.316,.354,.39,.426,.461,.494,.526,.557,.586,.614,.64,.665,.689,.711,.731,.751,.769,.786,.802,.817,.831,.844,.856,.867,.877,.887,.896,.904,.912,.919,.925,.931,.937,.942,.947,.951,.955,.959,.962,.965,.968,.971,.973,.976,.978,.98,.981,.983,.984,.986,.987,.988,.989,.99,.991,.992,.992,.993,.994,.994,.995,.995,.996,.996,.9963,.9967,.9969,.9972,.9975,.9977,.9979,.9981,.9982,.9984,.9985,.9987,.9988,.9989,1)"},spinTiming:void 0,opacityTiming:{duration:450,easing:"ease-out"},animated:!0,trend:(e,t)=>Math.sign(t-e),respectMotionPreference:!0,plugins:void 0,digits:void 0};let vct=class{constructor(t,n,r,{className:s,...a}={}){this.flow=t,this._integer=new iY(t,n,{justify:"right",part:"integer"}),this._fraction=new iY(t,r,{justify:"left",part:"fraction"}),this._inner=tu("span",{className:"number__inner"},[this._integer.el,this._fraction.el]),this.el=tu("span",{...a,part:"number",className:`number ${s??""}`},[this._inner])}willUpdate(){this._prevWidth=this.el.offsetWidth,this._prevLeft=this.el.getBoundingClientRect().left,this._integer.willUpdate(),this._fraction.willUpdate()}update({integer:t,fraction:n}){this._integer.update(t),this._fraction.update(n)}didUpdate(){const t=this.el.getBoundingClientRect();this._integer.didUpdate(),this._fraction.didUpdate();const n=this._prevLeft-t.left,r=this.el.offsetWidth,s=this._prevWidth-r;this.el.style.setProperty("--width",String(r)),this.el.animate({[Z2]:[`${n}px`,"0px"],[S7]:[s,0]},{...this.flow.transformTiming,composite:"accumulate"})}},rge=class{constructor(t,n,{justify:r,className:s,...a},o){this.flow=t,this.children=new Map,this.onCharRemove=c=>()=>{this.children.delete(c)},this.justify=r;const i=n.map(c=>this.addChar(c).el);this.el=tu("span",{...a,className:`section section--justify-${r} ${s??""}`},o?o(i):i)}addChar(t,{startDigitsAtZero:n=!1,...r}={}){const s=t.type==="integer"||t.type==="fraction"?new age(this,t.type,n?0:t.value,t.pos,{...r,onRemove:this.onCharRemove(t.key)}):new xct(this,t.type,t.value,{...r,onRemove:this.onCharRemove(t.key)});return this.children.set(t.key,s),s}unpop(t){t.el.removeAttribute("inert"),t.el.style.top="",t.el.style[this.justify]=""}pop(t){t.forEach(n=>{n.el.style.top=`${n.el.offsetTop}px`,n.el.style[this.justify]=`${oct(n.el,this.justify)}px`}),t.forEach(n=>{n.el.setAttribute("inert",""),n.present=!1})}addNewAndUpdateExisting(t){const n=new Map,r=new Map,s=this.justify==="left",a=s?"prepend":"append";if(cct(t,o=>{let i;this.children.has(o.key)?(i=this.children.get(o.key),r.set(o,i),this.unpop(i),i.present=!0):(i=this.addChar(o,{startDigitsAtZero:!0,animateIn:!0}),n.set(o,i)),this.el[a](i.el)},{reverse:s}),this.flow.computedAnimated){const o=this.el.getBoundingClientRect();n.forEach(i=>{i.willUpdate(o)})}n.forEach((o,i)=>{o.update(i.value)}),r.forEach((o,i)=>{o.update(i.value)})}willUpdate(){const t=this.el.getBoundingClientRect();this._prevOffset=t[this.justify],this.children.forEach(n=>n.willUpdate(t))}didUpdate(){const t=this.el.getBoundingClientRect();this.children.forEach(s=>s.didUpdate(t));const n=t[this.justify],r=this._prevOffset-n;r&&this.children.size&&this.el.animate({transform:[`translateX(${r}px)`,"none"]},{...this.flow.transformTiming,composite:"accumulate"})}},iY=class extends rge{update(t){const n=new Map;this.children.forEach((r,s)=>{t.find(a=>a.key===s)||n.set(s,r),this.unpop(r)}),this.addNewAndUpdateExisting(t),n.forEach(r=>{r instanceof age&&r.update(0)}),this.pop(n)}},lY=class extends rge{update(t){const n=new Map;this.children.forEach((r,s)=>{t.find(a=>a.key===s)||n.set(s,r)}),this.pop(n),this.addNewAndUpdateExisting(t)}},ZP=class{constructor(t,n,{onRemove:r,animateIn:s=!1}={}){this.flow=t,this.el=n,this._present=!0,this._remove=()=>{var a;this.el.remove(),(a=this._onRemove)==null||a.call(this)},this.el.classList.add("animate-presence"),this.flow.computedAnimated&&s&&this.el.animate({[X2]:[-.9999,0]},{...this.flow.opacityTiming,composite:"accumulate"}),this._onRemove=r}get present(){return this._present}set present(t){if(this._present!==t){if(this._present=t,t?this.el.removeAttribute("inert"):this.el.setAttribute("inert",""),!this.flow.computedAnimated){t||this._remove();return}this.el.style.setProperty("--_number-flow-d-opacity",t?"0":"-.999"),this.el.animate({[X2]:t?[-.9999,0]:[.999,0]},{...this.flow.opacityTiming,composite:"accumulate"}),t?this.flow.removeEventListener("animationsfinish",this._remove):this.flow.addEventListener("animationsfinish",this._remove,{once:!0})}}},sge=class extends ZP{constructor(t,n,r,s){super(t.flow,r,s),this.section=t,this.value=n,this.el=r}},age=class extends sge{constructor(t,n,r,s,a){var o,i;const c=(((i=(o=t.flow.digits)==null?void 0:o[s])==null?void 0:i.max)??9)+1,u=Array.from({length:c}).map((m,h)=>{const p=tu("span",{className:"digit__num"},[document.createTextNode(String(h))]);return h!==r&&p.setAttribute("inert",""),p.style.setProperty("--n",String(h)),p}),d=tu("span",{part:`digit ${n}-digit`,className:"digit"},u);d.style.setProperty("--current",String(r)),d.style.setProperty("--length",String(c)),super(t,r,d,a),this.pos=s,this._onAnimationsFinish=()=>{this.el.classList.remove("is-spinning")},this._numbers=u,this.length=c}willUpdate(t){const n=this.el.getBoundingClientRect();this._prevValue=this.value;const r=n[this.section.justify]-t[this.section.justify],s=n.width/2;this._prevCenter=this.section.justify==="left"?r+s:r-s}update(t){this.el.style.setProperty("--current",String(t)),this._numbers.forEach((n,r)=>r===t?n.removeAttribute("inert"):n.setAttribute("inert","")),this.value=t}didUpdate(t){const n=this.el.getBoundingClientRect(),r=n[this.section.justify]-t[this.section.justify],s=n.width/2,a=this.section.justify==="left"?r+s:r-s,o=this._prevCenter-a;o&&this.el.animate({transform:[`translateX(${o}px)`,"none"]},{...this.flow.transformTiming,composite:"accumulate"});const i=this.getDelta();i&&(this.el.classList.add("is-spinning"),this.el.animate({[C7]:[-i,0]},{...this.flow.spinTiming??this.flow.transformTiming,composite:"accumulate"}),this.flow.addEventListener("animationsfinish",this._onAnimationsFinish,{once:!0}))}getDelta(){var t;if(this.flow.plugins)for(const s of this.flow.plugins){const a=(t=s.getDelta)==null?void 0:t.call(s,this.value,this._prevValue,this);if(a!=null)return a}const n=this.value-this._prevValue,r=this.flow.computedTrend||Math.sign(n);return r<0&&this.value>this._prevValue?this.value-this.length-this._prevValue:r>0&&this.value<this._prevValue?this.length-this._prevValue+this.value:n}},xct=class extends sge{constructor(t,n,r,s){const a=tu("span",{className:"symbol__value",textContent:r});super(t,r,tu("span",{part:`symbol ${n}`,className:"symbol"},[a]),s),this.type=n,this._children=new Map,this._onChildRemove=o=>()=>{this._children.delete(o)},this._children.set(r,new ZP(this.flow,a,{onRemove:this._onChildRemove(r)}))}willUpdate(t){if(this.type==="decimal")return;const n=this.el.getBoundingClientRect();this._prevOffset=n[this.section.justify]-t[this.section.justify]}update(t){if(this.value!==t){const n=this._children.get(this.value);n&&(n.present=!1);const r=this._children.get(t);if(r)r.present=!0;else{const s=tu("span",{className:"symbol__value",textContent:t});this.el.appendChild(s),this._children.set(t,new ZP(this.flow,s,{animateIn:!0,onRemove:this._onChildRemove(t)}))}}this.value=t}didUpdate(t){if(this.type==="decimal")return;const n=this.el.getBoundingClientRect()[this.section.justify]-t[this.section.justify],r=this._prevOffset-n;r&&this.el.animate({transform:[`translateX(${r}px)`,"none"]},{...this.flow.transformTiming,composite:"accumulate"})}};const bct=parseInt(f.version.match(/^(\d+)\./)?.[1]),E7=bct>=19,_ct=["data","digits"];class M7 extends nge{attributeChangedCallback(t,n,r){this[t]=JSON.parse(r)}}M7.observedAttributes=E7?[]:_ct;lct("number-flow-react",M7);const wct={},cY=E7?e=>e:JSON.stringify;function uY(e){const{transformTiming:t,spinTiming:n,opacityTiming:r,animated:s,respectMotionPreference:a,trend:o,plugins:i,...c}=e;return[{transformTiming:t,spinTiming:n,opacityTiming:r,animated:s,respectMotionPreference:a,trend:o,plugins:i},c]}class Sct extends f.Component{updateProperties(t){if(!this.el)return;this.el.batched=!this.props.isolate;const[n]=uY(this.props);Object.entries(n).forEach(([r,s])=>{this.el[r]=s??M7.defaultProps[r]}),t?.onAnimationsStart&&this.el.removeEventListener("animationsstart",t.onAnimationsStart),this.props.onAnimationsStart&&this.el.addEventListener("animationsstart",this.props.onAnimationsStart),t?.onAnimationsFinish&&this.el.removeEventListener("animationsfinish",t.onAnimationsFinish),this.props.onAnimationsFinish&&this.el.addEventListener("animationsfinish",this.props.onAnimationsFinish)}componentDidMount(){this.updateProperties(),E7&&this.el&&(this.el.digits=this.props.digits,this.el.data=this.props.data)}getSnapshotBeforeUpdate(t){if(this.updateProperties(t),t.data!==this.props.data){if(this.props.group)return this.props.group.willUpdate(),()=>this.props.group?.didUpdate();if(!this.props.isolate)return this.el?.willUpdate(),()=>this.el?.didUpdate()}return null}componentDidUpdate(t,n,r){r?.()}handleRef(t){this.props.innerRef&&(this.props.innerRef.current=t),this.el=t}render(){const[t,{innerRef:n,className:r,data:s,willChange:a,isolate:o,group:i,digits:c,onAnimationsStart:u,onAnimationsFinish:d,...m}]=uY(this.props);return f.createElement("number-flow-react",{ref:this.handleRef,"data-will-change":a?"":void 0,class:r,...m,dangerouslySetInnerHTML:{__html:""},suppressHydrationWarning:!0,digits:cY(c),data:cY(s)})}constructor(t){super(t),this.handleRef=this.handleRef.bind(this)}}const nu=f.forwardRef(function({value:t,locales:n,format:r,prefix:s,suffix:a,...o},i){f.useImperativeHandle(i,()=>c.current,[]);const c=f.useRef(),u=f.useContext(Cct);u?.useRegister(c);const d=f.useMemo(()=>n?JSON.stringify(n):"",[n]),m=f.useMemo(()=>r?JSON.stringify(r):"",[r]),h=f.useMemo(()=>{const p=wct[`${d}:${m}`]??=new Intl.NumberFormat(n,r);return uct(t,p,s,a)},[t,d,m,s,a]);return f.createElement(Sct,{...o,group:u,data:h,innerRef:c})}),Cct=f.createContext(void 0),oge=A.memo(({symbol:e,src:t,srcDark:n,className:r})=>{n=n??t;const[s,a]=f.useState(!1),o=f.useRef(null),{colorScheme:i}=fs(),c=()=>{o.current&&o.current.naturalHeight>0&&a(!1)};f.useEffect(()=>{o.current&&(o.current.complete&&o.current.naturalHeight===0?a(!0):a(!1))},[o]),f.useEffect(()=>{a(!1)},[e]);const u=i==="dark"?n:t;return l.jsx("div",{className:B("size-lg p-xs flex shrink-0 items-center justify-center",r),children:s||!u?l.jsx(Ect,{symbol:e}):l.jsx("img",{ref:o,src:u,alt:e,className:"rounded-[4px] object-contain",onError:()=>{a(!0)},onLoad:c},e)})});oge.displayName="FinanceAssetLogo";const Ect=({symbol:e})=>{const t=f.useMemo(()=>e.replace(/[^a-zA-Z0-9]/g,"").slice(0,1).toUpperCase()||"#",[e]);return l.jsx(z,{variant:"offsetPlus",className:"flex size-full items-center justify-center rounded-full",children:l.jsx(D,{color:"light",children:l.jsx("span",{className:"font-mono opacity-70",children:t})})})},Mct=10,Tct=e=>{const{isSelected:t}=e;return l.jsx("div",{className:"flex h-full flex-col items-center justify-center",children:l.jsx(ke,{icon:t?Ea:mr,size:"small",pill:!0})})},kct=({onClear:e})=>l.jsx(ke,{icon:Xt,size:"tiny",pill:!0,onClick:e}),ige=A.memo(({onClose:e,onSelectStock:t,currentSymbol:n})=>{const{isMobileUserAgent:r}=Ce(),s="stock-settings-modal",{$t:a}=X(),o=gt(),i=f.useRef(null),[c,u]=f.useState(n),[d,m]=f.useState(ce),[h,p]=f.useState(-1),[g,y]=f.useState(!1),v=f.useCallback(()=>{e(),m(ce)},[e]),x=f.useCallback(async P=>{if(P.trim().length===0){m(ce);return}const k=Ys().erp;try{const L=(await o.fetchQuery({queryKey:["watchlist","FINANCE",P],queryFn:()=>nme({query:P,watchlistType:"FINANCE",limit:Mct,cometRenderPlace:k,reason:s}),staleTime:3600})).map(F=>({query:F.title,title:F.title,image:F.image_url??void 0,imageDark:F.image_url_dark??void 0,description:F.description,identifier:F.identifier,category:F.category??void 0,subscribed:F.subscribed}));m(L)}catch{m(ce)}},[o,s]),b=ks(x,250,{leading:!0,trailing:!0}),_=f.useCallback(P=>{b(P)},[b]),w=f.useCallback(()=>{y(!0),_(c)},[c,_]),S=f.useCallback(()=>{y(!1)},[]),C=f.useCallback(P=>{u(P),_(P)},[_]),E=()=>{u(""),m([])},M=f.useCallback(P=>{t(P.identifier??"AAPL"),m(ce),u(P.identifier??"AAPL")},[t]),T=f.useCallback((P,R)=>{M(P)},[M]),I=B("h-10 rounded-md p-4 dark:[&:focus]:ring-0",{"rounded-t-md rounded-b-none":g&&d.length>0}),j=f.useMemo(()=>({image:P,alt:R})=>l.jsx("div",{className:"mr-3 flex size-6 items-center justify-center overflow-hidden rounded",children:l.jsx(oge,{src:P??"",symbol:R??""})}),[]);f.useEffect(()=>{c||_("")},[c,_]);const N=f.useMemo(()=>({RightIconComponent:Tct,LeftIconComponent:j}),[j]);return l.jsx(ju,{onClose:v,children:l.jsxs("div",{className:"flex flex-col gap-3 px-5 py-4",children:[l.jsx(D,{variant:"entry-title-300",children:a({defaultMessage:"Select Stock",id:"0MrUZjeA/m"})}),l.jsx(Tp,{isOpen:g&&d.length>0,suggestedQueries:d,focusedIndex:h,setFocusedIndex:p,handlePasteQuery:Rn,handleSubmit:T,value:c,components:N,dropdownClassName:"dark:border-none dark:ml-0 dark:mr-0 dark:w-full max-h-[250px] overflow-y-auto",dropdownType:"select",popoverClassName:"dark:!border-none",children:l.jsx(xo,{onFocus:w,onBlur:S,className:I,pill:!1,ref:i,isMobileUserAgent:r,placeholder:a({defaultMessage:"Search stocks (e.g., AAPL, TSLA, MSFT)...",id:"TMRxNvCkDS"}),value:c,onChange:C,ClearIcon:kct,...c.length>0?{onClear:E}:{}})}),l.jsx("div",{className:"mt-sm flex flex-row justify-end",children:l.jsx(ye,{variant:"primary",size:"small",onClick:v,text:a({defaultMessage:"Done",id:"JXdbo8Vnlw"})})})]})})});ige.displayName="StockSettingsModal";var JP=Math.PI,eR=2*JP,dd=1e-6,Nct=eR-dd;function tR(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Ya(){return new tR}tR.prototype=Ya.prototype={constructor:tR,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,s,a){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+s)+","+(this._y1=+a)},arcTo:function(e,t,n,r,s){e=+e,t=+t,n=+n,r=+r,s=+s;var a=this._x1,o=this._y1,i=n-e,c=r-t,u=a-e,d=o-t,m=u*u+d*d;if(s<0)throw new Error("negative radius: "+s);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(m>dd)if(!(Math.abs(d*i-c*u)>dd)||!s)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var h=n-a,p=r-o,g=i*i+c*c,y=h*h+p*p,v=Math.sqrt(g),x=Math.sqrt(m),b=s*Math.tan((JP-Math.acos((g+m-y)/(2*v*x)))/2),_=b/x,w=b/v;Math.abs(_-1)>dd&&(this._+="L"+(e+_*u)+","+(t+_*d)),this._+="A"+s+","+s+",0,0,"+ +(d*h>u*p)+","+(this._x1=e+w*i)+","+(this._y1=t+w*c)}},arc:function(e,t,n,r,s,a){e=+e,t=+t,n=+n,a=!!a;var o=n*Math.cos(r),i=n*Math.sin(r),c=e+o,u=t+i,d=1^a,m=a?r-s:s-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+c+","+u:(Math.abs(this._x1-c)>dd||Math.abs(this._y1-u)>dd)&&(this._+="L"+c+","+u),n&&(m<0&&(m=m%eR+eR),m>Nct?this._+="A"+n+","+n+",0,1,"+d+","+(e-o)+","+(t-i)+"A"+n+","+n+",0,1,"+d+","+(this._x1=c)+","+(this._y1=u):m>dd&&(this._+="A"+n+","+n+",0,"+ +(m>=JP)+","+d+","+(this._x1=e+n*Math.cos(s))+","+(this._y1=t+n*Math.sin(s))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};function mn(e){return function(){return e}}var dY=Math.abs,hs=Math.atan2,ad=Math.cos,Act=Math.max,hk=Math.min,yi=Math.sin,xm=Math.sqrt,la=1e-12,Hv=Math.PI,J2=Hv/2,__=2*Hv;function Pct(e){return e>1?0:e<-1?Hv:Math.acos(e)}function fY(e){return e>=1?J2:e<=-1?-J2:Math.asin(e)}function Rct(e){return e.innerRadius}function Ict(e){return e.outerRadius}function jct(e){return e.startAngle}function Oct(e){return e.endAngle}function Lct(e){return e&&e.padAngle}function Dct(e,t,n,r,s,a,o,i){var c=n-e,u=r-t,d=o-s,m=i-a,h=m*c-d*u;if(!(h*h<la))return h=(d*(t-a)-m*(e-s))/h,[e+h*c,t+h*u]}function cb(e,t,n,r,s,a,o){var i=e-n,c=t-r,u=(o?a:-a)/xm(i*i+c*c),d=u*c,m=-u*i,h=e+d,p=t+m,g=n+d,y=r+m,v=(h+g)/2,x=(p+y)/2,b=g-h,_=y-p,w=b*b+_*_,S=s-a,C=h*y-g*p,E=(_<0?-1:1)*xm(Act(0,S*S*w-C*C)),M=(C*_-b*E)/w,T=(-C*b-_*E)/w,I=(C*_+b*E)/w,j=(-C*b+_*E)/w,N=M-v,P=T-x,R=I-v,k=j-x;return N*N+P*P>R*R+k*k&&(M=I,T=j),{cx:M,cy:T,x01:-d,y01:-m,x11:M*(s/S-1),y11:T*(s/S-1)}}function Fct(){var e=Rct,t=Ict,n=mn(0),r=null,s=jct,a=Oct,o=Lct,i=null;function c(){var u,d,m=+e.apply(this,arguments),h=+t.apply(this,arguments),p=s.apply(this,arguments)-J2,g=a.apply(this,arguments)-J2,y=dY(g-p),v=g>p;if(i||(i=u=Ya()),h<m&&(d=h,h=m,m=d),!(h>la))i.moveTo(0,0);else if(y>__-la)i.moveTo(h*ad(p),h*yi(p)),i.arc(0,0,h,p,g,!v),m>la&&(i.moveTo(m*ad(g),m*yi(g)),i.arc(0,0,m,g,p,v));else{var x=p,b=g,_=p,w=g,S=y,C=y,E=o.apply(this,arguments)/2,M=E>la&&(r?+r.apply(this,arguments):xm(m*m+h*h)),T=hk(dY(h-m)/2,+n.apply(this,arguments)),I=T,j=T,N,P;if(M>la){var R=fY(M/m*yi(E)),k=fY(M/h*yi(E));(S-=R*2)>la?(R*=v?1:-1,_+=R,w-=R):(S=0,_=w=(p+g)/2),(C-=k*2)>la?(k*=v?1:-1,x+=k,b-=k):(C=0,x=b=(p+g)/2)}var O=h*ad(x),L=h*yi(x),F=m*ad(w),U=m*yi(w);if(T>la){var V=h*ad(b),W=h*yi(b),H=m*ad(_),G=m*yi(_),K;if(y<Hv&&(K=Dct(O,L,H,G,V,W,F,U))){var $=O-K[0],q=L-K[1],Z=V-K[0],se=W-K[1],Y=1/yi(Pct(($*Z+q*se)/(xm($*$+q*q)*xm(Z*Z+se*se)))/2),Q=xm(K[0]*K[0]+K[1]*K[1]);I=hk(T,(m-Q)/(Y-1)),j=hk(T,(h-Q)/(Y+1))}}C>la?j>la?(N=cb(H,G,O,L,h,j,v),P=cb(V,W,F,U,h,j,v),i.moveTo(N.cx+N.x01,N.cy+N.y01),j<T?i.arc(N.cx,N.cy,j,hs(N.y01,N.x01),hs(P.y01,P.x01),!v):(i.arc(N.cx,N.cy,j,hs(N.y01,N.x01),hs(N.y11,N.x11),!v),i.arc(0,0,h,hs(N.cy+N.y11,N.cx+N.x11),hs(P.cy+P.y11,P.cx+P.x11),!v),i.arc(P.cx,P.cy,j,hs(P.y11,P.x11),hs(P.y01,P.x01),!v))):(i.moveTo(O,L),i.arc(0,0,h,x,b,!v)):i.moveTo(O,L),!(m>la)||!(S>la)?i.lineTo(F,U):I>la?(N=cb(F,U,V,W,m,-I,v),P=cb(O,L,H,G,m,-I,v),i.lineTo(N.cx+N.x01,N.cy+N.y01),I<T?i.arc(N.cx,N.cy,I,hs(N.y01,N.x01),hs(P.y01,P.x01),!v):(i.arc(N.cx,N.cy,I,hs(N.y01,N.x01),hs(N.y11,N.x11),!v),i.arc(0,0,m,hs(N.cy+N.y11,N.cx+N.x11),hs(P.cy+P.y11,P.cx+P.x11),v),i.arc(P.cx,P.cy,I,hs(P.y11,P.x11),hs(P.y01,P.x01),!v))):i.arc(0,0,m,w,_,v)}if(i.closePath(),u)return i=null,u+""||null}return c.centroid=function(){var u=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,d=(+s.apply(this,arguments)+ +a.apply(this,arguments))/2-Hv/2;return[ad(d)*u,yi(d)*u]},c.innerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:mn(+u),c):e},c.outerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:mn(+u),c):t},c.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:mn(+u),c):n},c.padRadius=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:mn(+u),c):r},c.startAngle=function(u){return arguments.length?(s=typeof u=="function"?u:mn(+u),c):s},c.endAngle=function(u){return arguments.length?(a=typeof u=="function"?u:mn(+u),c):a},c.padAngle=function(u){return arguments.length?(o=typeof u=="function"?u:mn(+u),c):o},c.context=function(u){return arguments.length?(i=u??null,c):i},c}function lge(e){this._context=e}lge.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function tf(e){return new lge(e)}function T7(e){return e[0]}function k7(e){return e[1]}function N7(){var e=T7,t=k7,n=mn(!0),r=null,s=tf,a=null;function o(i){var c,u=i.length,d,m=!1,h;for(r==null&&(a=s(h=Ya())),c=0;c<=u;++c)!(c<u&&n(d=i[c],c,i))===m&&((m=!m)?a.lineStart():a.lineEnd()),m&&a.point(+e(d,c,i),+t(d,c,i));if(h)return a=null,h+""||null}return o.x=function(i){return arguments.length?(e=typeof i=="function"?i:mn(+i),o):e},o.y=function(i){return arguments.length?(t=typeof i=="function"?i:mn(+i),o):t},o.defined=function(i){return arguments.length?(n=typeof i=="function"?i:mn(!!i),o):n},o.curve=function(i){return arguments.length?(s=i,r!=null&&(a=s(r)),o):s},o.context=function(i){return arguments.length?(i==null?r=a=null:a=s(r=i),o):r},o}function Uct(){var e=T7,t=null,n=mn(0),r=k7,s=mn(!0),a=null,o=tf,i=null;function c(d){var m,h,p,g=d.length,y,v=!1,x,b=new Array(g),_=new Array(g);for(a==null&&(i=o(x=Ya())),m=0;m<=g;++m){if(!(m<g&&s(y=d[m],m,d))===v)if(v=!v)h=m,i.areaStart(),i.lineStart();else{for(i.lineEnd(),i.lineStart(),p=m-1;p>=h;--p)i.point(b[p],_[p]);i.lineEnd(),i.areaEnd()}v&&(b[m]=+e(y,m,d),_[m]=+n(y,m,d),i.point(t?+t(y,m,d):b[m],r?+r(y,m,d):_[m]))}if(x)return i=null,x+""||null}function u(){return N7().defined(s).curve(o).context(a)}return c.x=function(d){return arguments.length?(e=typeof d=="function"?d:mn(+d),t=null,c):e},c.x0=function(d){return arguments.length?(e=typeof d=="function"?d:mn(+d),c):e},c.x1=function(d){return arguments.length?(t=d==null?null:typeof d=="function"?d:mn(+d),c):t},c.y=function(d){return arguments.length?(n=typeof d=="function"?d:mn(+d),r=null,c):n},c.y0=function(d){return arguments.length?(n=typeof d=="function"?d:mn(+d),c):n},c.y1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:mn(+d),c):r},c.lineX0=c.lineY0=function(){return u().x(e).y(n)},c.lineY1=function(){return u().x(e).y(r)},c.lineX1=function(){return u().x(t).y(n)},c.defined=function(d){return arguments.length?(s=typeof d=="function"?d:mn(!!d),c):s},c.curve=function(d){return arguments.length?(o=d,a!=null&&(i=o(a)),c):o},c.context=function(d){return arguments.length?(d==null?a=i=null:i=o(a=d),c):a},c}function Bct(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function Vct(e){return e}function $ct(){var e=Vct,t=Bct,n=null,r=mn(0),s=mn(__),a=mn(0);function o(i){var c,u=i.length,d,m,h=0,p=new Array(u),g=new Array(u),y=+r.apply(this,arguments),v=Math.min(__,Math.max(-__,s.apply(this,arguments)-y)),x,b=Math.min(Math.abs(v)/u,a.apply(this,arguments)),_=b*(v<0?-1:1),w;for(c=0;c<u;++c)(w=g[p[c]=c]=+e(i[c],c,i))>0&&(h+=w);for(t!=null?p.sort(function(S,C){return t(g[S],g[C])}):n!=null&&p.sort(function(S,C){return n(i[S],i[C])}),c=0,m=h?(v-u*_)/h:0;c<u;++c,y=x)d=p[c],w=g[d],x=y+(w>0?w*m:0)+_,g[d]={data:i[d],index:c,value:w,startAngle:y,endAngle:x,padAngle:b};return g}return o.value=function(i){return arguments.length?(e=typeof i=="function"?i:mn(+i),o):e},o.sortValues=function(i){return arguments.length?(t=i,n=null,o):t},o.sort=function(i){return arguments.length?(n=i,t=null,o):n},o.startAngle=function(i){return arguments.length?(r=typeof i=="function"?i:mn(+i),o):r},o.endAngle=function(i){return arguments.length?(s=typeof i=="function"?i:mn(+i),o):s},o.padAngle=function(i){return arguments.length?(a=typeof i=="function"?i:mn(+i),o):a},o}var Wct=uge(tf);function cge(e){this._curve=e}cge.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}};function uge(e){function t(n){return new cge(e(n))}return t._curve=e,t}function Hct(e){var t=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(n){return arguments.length?t(uge(n)):t()._curve},e}function zct(){return Hct(N7().curve(Wct))}function ub(e,t){return[(t=+t)*Math.cos(e-=Math.PI/2),t*Math.sin(e)]}var nR=Array.prototype.slice;function Gct(e){return e.source}function qct(e){return e.target}function A7(e){var t=Gct,n=qct,r=T7,s=k7,a=null;function o(){var i,c=nR.call(arguments),u=t.apply(this,c),d=n.apply(this,c);if(a||(a=i=Ya()),e(a,+r.apply(this,(c[0]=u,c)),+s.apply(this,c),+r.apply(this,(c[0]=d,c)),+s.apply(this,c)),i)return a=null,i+""||null}return o.source=function(i){return arguments.length?(t=i,o):t},o.target=function(i){return arguments.length?(n=i,o):n},o.x=function(i){return arguments.length?(r=typeof i=="function"?i:mn(+i),o):r},o.y=function(i){return arguments.length?(s=typeof i=="function"?i:mn(+i),o):s},o.context=function(i){return arguments.length?(a=i??null,o):a},o}function Kct(e,t,n,r,s){e.moveTo(t,n),e.bezierCurveTo(t=(t+r)/2,n,t,s,r,s)}function Yct(e,t,n,r,s){e.moveTo(t,n),e.bezierCurveTo(t,n=(n+s)/2,r,n,r,s)}function Qct(e,t,n,r,s){var a=ub(t,n),o=ub(t,n=(n+s)/2),i=ub(r,n),c=ub(r,s);e.moveTo(a[0],a[1]),e.bezierCurveTo(o[0],o[1],i[0],i[1],c[0],c[1])}function Xct(){return A7(Kct)}function Zct(){return A7(Yct)}function Jct(){var e=A7(Qct);return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e}function mY(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function dge(e){this._context=e}dge.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:mY(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:mY(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function eut(e){return new dge(e)}function hY(e){return e<0?-1:1}function pY(e,t,n){var r=e._x1-e._x0,s=t-e._x1,a=(e._y1-e._y0)/(r||s<0&&-0),o=(n-e._y1)/(s||r<0&&-0),i=(a*s+o*r)/(r+s);return(hY(a)+hY(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(i))||0}function gY(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function pk(e,t,n){var r=e._x0,s=e._y0,a=e._x1,o=e._y1,i=(a-r)/3;e._context.bezierCurveTo(r+i,s+i*t,a-i,o-i*n,a,o)}function ew(e){this._context=e}ew.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:pk(this,this._t0,gY(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,pk(this,gY(this,n=pY(this,e,t)),n);break;default:pk(this,this._t0,n=pY(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};Object.create(ew.prototype).point=function(e,t){ew.prototype.point.call(this,t,e)};function tut(e){return new ew(e)}function fge(e){this._context=e}fge.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=yY(e),s=yY(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],s[0][a],r[1][a],s[1][a],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function yY(e){var t,n=e.length-1,r,s=new Array(n),a=new Array(n),o=new Array(n);for(s[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)s[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[n-1]=2,a[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=s[t]/a[t-1],a[t]-=r,o[t]-=r*o[t-1];for(s[n-1]=o[n-1]/a[n-1],t=n-2;t>=0;--t)s[t]=(o[t]-s[t+1])/a[t];for(a[n-1]=(e[n]+s[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-s[t+1];return[s,a]}function nut(e){return new fge(e)}function Ch(e,t){if((o=e.length)>1)for(var n=1,r,s,a=e[t[0]],o,i=a.length;n<o;++n)for(s=a,a=e[t[n]],r=0;r<i;++r)a[r][1]+=a[r][0]=isNaN(s[r][1])?s[r][0]:s[r][1]}function Eh(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function rut(e,t){return e[t]}function P7(){var e=mn([]),t=Eh,n=Ch,r=rut;function s(a){var o=e.apply(this,arguments),i,c=a.length,u=o.length,d=new Array(u),m;for(i=0;i<u;++i){for(var h=o[i],p=d[i]=new Array(c),g=0,y;g<c;++g)p[g]=y=[0,+r(a[g],h,g,a)],y.data=a[g];p.key=h}for(i=0,m=t(d);i<u;++i)d[m[i]].index=i;return n(d,m),d}return s.keys=function(a){return arguments.length?(e=typeof a=="function"?a:mn(nR.call(a)),s):e},s.value=function(a){return arguments.length?(r=typeof a=="function"?a:mn(+a),s):r},s.order=function(a){return arguments.length?(t=a==null?Eh:typeof a=="function"?a:mn(nR.call(a)),s):t},s.offset=function(a){return arguments.length?(n=a??Ch,s):n},s}function sut(e,t){if((r=e.length)>0){for(var n,r,s=0,a=e[0].length,o;s<a;++s){for(o=n=0;n<r;++n)o+=e[n][s][1]||0;if(o)for(n=0;n<r;++n)e[n][s][1]/=o}Ch(e,t)}}function aut(e,t){if((c=e.length)>0)for(var n,r=0,s,a,o,i,c,u=e[t[0]].length;r<u;++r)for(o=i=0,n=0;n<c;++n)(a=(s=e[t[n]][r])[1]-s[0])>0?(s[0]=o,s[1]=o+=a):a<0?(s[1]=i,s[0]=i+=a):(s[0]=0,s[1]=a)}function out(e,t){if((s=e.length)>0){for(var n=0,r=e[t[0]],s,a=r.length;n<a;++n){for(var o=0,i=0;o<s;++o)i+=e[o][n][1]||0;r[n][1]+=r[n][0]=-i/2}Ch(e,t)}}function iut(e,t){if(!(!((o=e.length)>0)||!((a=(s=e[t[0]]).length)>0))){for(var n=0,r=1,s,a,o;r<a;++r){for(var i=0,c=0,u=0;i<o;++i){for(var d=e[t[i]],m=d[r][1]||0,h=d[r-1][1]||0,p=(m-h)/2,g=0;g<i;++g){var y=e[t[g]],v=y[r][1]||0,x=y[r-1][1]||0;p+=v-x}c+=m,u+=p*m}s[r-1][1]+=s[r-1][0]=n,c&&(n-=u/c)}s[r-1][1]+=s[r-1][0]=n,Ch(e,t)}}function lut(e){var t=e.map(cut);return Eh(e).sort(function(n,r){return t[n]-t[r]})}function cut(e){for(var t=-1,n=0,r=e.length,s,a=-1/0;++t<r;)(s=+e[t][1])>a&&(a=s,n=t);return n}function mge(e){var t=e.map(hge);return Eh(e).sort(function(n,r){return t[n]-t[r]})}function hge(e){for(var t=0,n=-1,r=e.length,s;++n<r;)(s=+e[n][1])&&(t+=s);return t}function uut(e){return mge(e).reverse()}function dut(e){var t=e.length,n,r,s=e.map(hge),a=lut(e),o=0,i=0,c=[],u=[];for(n=0;n<t;++n)r=a[n],o<i?(o+=s[r],c.push(r)):(i+=s[r],u.push(r));return u.reverse().concat(c)}function fut(e){return Eh(e).reverse()}var mut=["children","id","from","to","x1","y1","x2","y2","fromOffset","fromOpacity","toOffset","toOpacity","rotate","transform","vertical"];function rR(){return rR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rR.apply(this,arguments)}function hut(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function tE(e){var t=e.children,n=e.id,r=e.from,s=e.to,a=e.x1,o=e.y1,i=e.x2,c=e.y2,u=e.fromOffset,d=u===void 0?"0%":u,m=e.fromOpacity,h=m===void 0?1:m,p=e.toOffset,g=p===void 0?"100%":p,y=e.toOpacity,v=y===void 0?1:y,x=e.rotate,b=e.transform,_=e.vertical,w=_===void 0?!0:_,S=hut(e,mut),C=a,E=i,M=o,T=c;return w&&!C&&!E&&!M&&!T&&(C="0",E="0",M="0",T="1"),A.createElement("defs",null,A.createElement("linearGradient",rR({id:n,x1:C,y1:M,x2:E,y2:T,gradientTransform:x?"rotate("+x+")":b},S),!!t&&t,!t&&A.createElement("stop",{offset:d,stopColor:r,stopOpacity:h}),!t&&A.createElement("stop",{offset:g,stopColor:s,stopOpacity:v})))}tE.propTypes={id:we.string.isRequired,from:we.string,to:we.string,x1:we.oneOfType([we.string,we.number]),x2:we.oneOfType([we.string,we.number]),y1:we.oneOfType([we.string,we.number]),y2:we.oneOfType([we.string,we.number]),fromOffset:we.oneOfType([we.string,we.number]),fromOpacity:we.oneOfType([we.string,we.number]),toOffset:we.oneOfType([we.string,we.number]),toOpacity:we.oneOfType([we.string,we.number]),rotate:we.oneOfType([we.string,we.number]),transform:we.string,children:we.node,vertical:we.bool};function $y(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function put(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function nE(e){let t,n,r;e.length!==2?(t=$y,n=(i,c)=>$y(e(i),c),r=(i,c)=>e(i)-c):(t=e===$y||e===put?e:gut,n=e,r=e);function s(i,c,u=0,d=i.length){if(u<d){if(t(c,c)!==0)return d;do{const m=u+d>>>1;n(i[m],c)<0?u=m+1:d=m}while(u<d)}return u}function a(i,c,u=0,d=i.length){if(u<d){if(t(c,c)!==0)return d;do{const m=u+d>>>1;n(i[m],c)<=0?u=m+1:d=m}while(u<d)}return u}function o(i,c,u=0,d=i.length){const m=s(i,c,u,d-1);return m>u&&r(i[m-1],c)>-r(i[m],c)?m-1:m}return{left:s,center:o,right:a}}function gut(){return 0}function pge(e){return e===null?NaN:+e}const yut=nE($y),Vp=yut.right;nE(pge).center;function Ll(e,t){let n,r;if(t===void 0)for(const s of e)s!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)));else{let s=-1;for(let a of e)(a=t(a,++s,e))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class vY extends Map{constructor(t,n=but){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,s]of t)this.set(r,s)}get(t){return super.get(xY(this,t))}has(t){return super.has(xY(this,t))}set(t,n){return super.set(vut(this,t),n)}delete(t){return super.delete(xut(this,t))}}function xY({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function vut({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function xut({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function but(e){return e!==null&&typeof e=="object"?e.valueOf():e}var sR=Math.sqrt(50),aR=Math.sqrt(10),oR=Math.sqrt(2);function iR(e,t,n){var r,s=-1,a,o,i;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(a=e,e=t,t=a),(i=gge(e,t,n))===0||!isFinite(i))return[];if(i>0){let c=Math.round(e/i),u=Math.round(t/i);for(c*i<e&&++c,u*i>t&&--u,o=new Array(a=u-c+1);++s<a;)o[s]=(c+s)*i}else{i=-i;let c=Math.round(e*i),u=Math.round(t*i);for(c/i<e&&++c,u/i>t&&--u,o=new Array(a=u-c+1);++s<a;)o[s]=(c+s)/i}return r&&o.reverse(),o}function gge(e,t,n){var r=(t-e)/Math.max(0,n),s=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,s);return s>=0?(a>=sR?10:a>=aR?5:a>=oR?2:1)*Math.pow(10,s):-Math.pow(10,-s)/(a>=sR?10:a>=aR?5:a>=oR?2:1)}function lR(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),s=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/s;return a>=sR?s*=10:a>=aR?s*=5:a>=oR&&(s*=2),t<e?-s:s}function _ut(e,t,n=pge){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,s=(r-1)*t,a=Math.floor(s),o=+n(e[a],a,e),i=+n(e[a+1],a+1,e);return o+(i-o)*(s-a)}}function wut(e,t,n){e=+e,t=+t,n=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+n;for(var r=-1,s=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(s);++r<s;)a[r]=e+r*n;return a}function wo(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const bY=Symbol("implicit");function R7(){var e=new vY,t=[],n=[],r=bY;function s(a){let o=e.get(a);if(o===void 0){if(r!==bY)return r;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return s.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new vY;for(const o of a)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(a){return arguments.length?(n=Array.from(a),s):n.slice()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.copy=function(){return R7(t,n).unknown(r)},wo.apply(s,arguments),s}function I7(){var e=R7().unknown(void 0),t=e.domain,n=e.range,r=0,s=1,a,o,i=!1,c=0,u=0,d=.5;delete e.unknown;function m(){var h=t().length,p=s<r,g=p?s:r,y=p?r:s;a=(y-g)/Math.max(1,h-c+u*2),i&&(a=Math.floor(a)),g+=(y-g-a*(h-c))*d,o=a*(1-c),i&&(g=Math.round(g),o=Math.round(o));var v=wut(h).map(function(x){return g+a*x});return n(p?v.reverse():v)}return e.domain=function(h){return arguments.length?(t(h),m()):t()},e.range=function(h){return arguments.length?([r,s]=h,r=+r,s=+s,m()):[r,s]},e.rangeRound=function(h){return[r,s]=h,r=+r,s=+s,i=!0,m()},e.bandwidth=function(){return o},e.step=function(){return a},e.round=function(h){return arguments.length?(i=!!h,m()):i},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),m()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),m()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,m()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),m()):d},e.copy=function(){return I7(t(),[r,s]).round(i).paddingInner(c).paddingOuter(u).align(d)},wo.apply(m(),arguments)}function yge(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return yge(t())},e}function Sut(){return yge(I7.apply(null,arguments).paddingInner(1))}function $p(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function c1(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ou(){}var nf=.7,Mh=1/nf,Bm="\\s*([+-]?\\d+)\\s*",zv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",zi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Cut=/^#([0-9a-f]{3,8})$/,Eut=new RegExp(`^rgb\\(${Bm},${Bm},${Bm}\\)$`),Mut=new RegExp(`^rgb\\(${zi},${zi},${zi}\\)$`),Tut=new RegExp(`^rgba\\(${Bm},${Bm},${Bm},${zv}\\)$`),kut=new RegExp(`^rgba\\(${zi},${zi},${zi},${zv}\\)$`),Nut=new RegExp(`^hsl\\(${zv},${zi},${zi}\\)$`),Aut=new RegExp(`^hsla\\(${zv},${zi},${zi},${zv}\\)$`),_Y={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};$p(Ou,Gv,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:wY,formatHex:wY,formatHex8:Put,formatHsl:Rut,formatRgb:SY,toString:SY});function wY(){return this.rgb().formatHex()}function Put(){return this.rgb().formatHex8()}function Rut(){return vge(this).formatHsl()}function SY(){return this.rgb().formatRgb()}function Gv(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Cut.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?CY(t):n===3?new Qr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?db(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?db(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Eut.exec(e))?new Qr(t[1],t[2],t[3],1):(t=Mut.exec(e))?new Qr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Tut.exec(e))?db(t[1],t[2],t[3],t[4]):(t=kut.exec(e))?db(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Nut.exec(e))?TY(t[1],t[2]/100,t[3]/100,1):(t=Aut.exec(e))?TY(t[1],t[2]/100,t[3]/100,t[4]):_Y.hasOwnProperty(e)?CY(_Y[e]):e==="transparent"?new Qr(NaN,NaN,NaN,0):null}function CY(e){return new Qr(e>>16&255,e>>8&255,e&255,1)}function db(e,t,n,r){return r<=0&&(e=t=n=NaN),new Qr(e,t,n,r)}function j7(e){return e instanceof Ou||(e=Gv(e)),e?(e=e.rgb(),new Qr(e.r,e.g,e.b,e.opacity)):new Qr}function cR(e,t,n,r){return arguments.length===1?j7(e):new Qr(e,t,n,r??1)}function Qr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}$p(Qr,cR,c1(Ou,{brighter(e){return e=e==null?Mh:Math.pow(Mh,e),new Qr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?nf:Math.pow(nf,e),new Qr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Qr(Rd(this.r),Rd(this.g),Rd(this.b),tw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:EY,formatHex:EY,formatHex8:Iut,formatRgb:MY,toString:MY}));function EY(){return`#${Sd(this.r)}${Sd(this.g)}${Sd(this.b)}`}function Iut(){return`#${Sd(this.r)}${Sd(this.g)}${Sd(this.b)}${Sd((isNaN(this.opacity)?1:this.opacity)*255)}`}function MY(){const e=tw(this.opacity);return`${e===1?"rgb(":"rgba("}${Rd(this.r)}, ${Rd(this.g)}, ${Rd(this.b)}${e===1?")":`, ${e})`}`}function tw(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Rd(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Sd(e){return e=Rd(e),(e<16?"0":"")+e.toString(16)}function TY(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Do(e,t,n,r)}function vge(e){if(e instanceof Do)return new Do(e.h,e.s,e.l,e.opacity);if(e instanceof Ou||(e=Gv(e)),!e)return new Do;if(e instanceof Do)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,s=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,i=a-s,c=(a+s)/2;return i?(t===a?o=(n-r)/i+(n<r)*6:n===a?o=(r-t)/i+2:o=(t-n)/i+4,i/=c<.5?a+s:2-a-s,o*=60):i=c>0&&c<1?0:o,new Do(o,i,c,e.opacity)}function uR(e,t,n,r){return arguments.length===1?vge(e):new Do(e,t,n,r??1)}function Do(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}$p(Do,uR,c1(Ou,{brighter(e){return e=e==null?Mh:Math.pow(Mh,e),new Do(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?nf:Math.pow(nf,e),new Do(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,s=2*n-r;return new Qr(gk(e>=240?e-240:e+120,s,r),gk(e,s,r),gk(e<120?e+240:e-120,s,r),this.opacity)},clamp(){return new Do(kY(this.h),fb(this.s),fb(this.l),tw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=tw(this.opacity);return`${e===1?"hsl(":"hsla("}${kY(this.h)}, ${fb(this.s)*100}%, ${fb(this.l)*100}%${e===1?")":`, ${e})`}`}}));function kY(e){return e=(e||0)%360,e<0?e+360:e}function fb(e){return Math.max(0,Math.min(1,e||0))}function gk(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const xge=Math.PI/180,bge=180/Math.PI,nw=18,_ge=.96422,wge=1,Sge=.82521,Cge=4/29,Vm=6/29,Ege=3*Vm*Vm,jut=Vm*Vm*Vm;function Mge(e){if(e instanceof Gi)return new Gi(e.l,e.a,e.b,e.opacity);if(e instanceof Dl)return Tge(e);e instanceof Qr||(e=j7(e));var t=bk(e.r),n=bk(e.g),r=bk(e.b),s=yk((.2225045*t+.7168786*n+.0606169*r)/wge),a,o;return t===n&&n===r?a=o=s:(a=yk((.4360747*t+.3850649*n+.1430804*r)/_ge),o=yk((.0139322*t+.0971045*n+.7141733*r)/Sge)),new Gi(116*s-16,500*(a-s),200*(s-o),e.opacity)}function dR(e,t,n,r){return arguments.length===1?Mge(e):new Gi(e,t,n,r??1)}function Gi(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}$p(Gi,dR,c1(Ou,{brighter(e){return new Gi(this.l+nw*(e??1),this.a,this.b,this.opacity)},darker(e){return new Gi(this.l-nw*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=_ge*vk(t),e=wge*vk(e),n=Sge*vk(n),new Qr(xk(3.1338561*t-1.6168667*e-.4906146*n),xk(-.9787684*t+1.9161415*e+.033454*n),xk(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function yk(e){return e>jut?Math.pow(e,1/3):e/Ege+Cge}function vk(e){return e>Vm?e*e*e:Ege*(e-Cge)}function xk(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function bk(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Out(e){if(e instanceof Dl)return new Dl(e.h,e.c,e.l,e.opacity);if(e instanceof Gi||(e=Mge(e)),e.a===0&&e.b===0)return new Dl(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*bge;return new Dl(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function fR(e,t,n,r){return arguments.length===1?Out(e):new Dl(e,t,n,r??1)}function Dl(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function Tge(e){if(isNaN(e.h))return new Gi(e.l,0,0,e.opacity);var t=e.h*xge;return new Gi(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}$p(Dl,fR,c1(Ou,{brighter(e){return new Dl(this.h,this.c,this.l+nw*(e??1),this.opacity)},darker(e){return new Dl(this.h,this.c,this.l-nw*(e??1),this.opacity)},rgb(){return Tge(this).rgb()}}));var kge=-.14861,O7=1.78277,L7=-.29227,rE=-.90649,qv=1.97294,NY=qv*rE,AY=qv*O7,PY=O7*L7-rE*kge;function Lut(e){if(e instanceof Id)return new Id(e.h,e.s,e.l,e.opacity);e instanceof Qr||(e=j7(e));var t=e.r/255,n=e.g/255,r=e.b/255,s=(PY*r+NY*t-AY*n)/(PY+NY-AY),a=r-s,o=(qv*(n-s)-L7*a)/rE,i=Math.sqrt(o*o+a*a)/(qv*s*(1-s)),c=i?Math.atan2(o,a)*bge-120:NaN;return new Id(c<0?c+360:c,i,s,e.opacity)}function mR(e,t,n,r){return arguments.length===1?Lut(e):new Id(e,t,n,r??1)}function Id(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}$p(Id,mR,c1(Ou,{brighter(e){return e=e==null?Mh:Math.pow(Mh,e),new Id(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?nf:Math.pow(nf,e),new Id(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*xge,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),s=Math.sin(e);return new Qr(255*(t+n*(kge*r+O7*s)),255*(t+n*(L7*r+rE*s)),255*(t+n*(qv*r)),this.opacity)}}));const sE=e=>()=>e;function Nge(e,t){return function(n){return e+n*t}}function Dut(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function D7(e,t){var n=t-e;return n?Nge(e,n>180||n<-180?n-360*Math.round(n/360):n):sE(isNaN(e)?t:e)}function Fut(e){return(e=+e)==1?Xr:function(t,n){return n-t?Dut(t,n,e):sE(isNaN(t)?n:t)}}function Xr(e,t){var n=t-e;return n?Nge(e,n):sE(isNaN(e)?t:e)}const hR=function e(t){var n=Fut(t);function r(s,a){var o=n((s=cR(s)).r,(a=cR(a)).r),i=n(s.g,a.g),c=n(s.b,a.b),u=Xr(s.opacity,a.opacity);return function(d){return s.r=o(d),s.g=i(d),s.b=c(d),s.opacity=u(d),s+""}}return r.gamma=e,r}(1);function Uut(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),s;return function(a){for(s=0;s<n;++s)r[s]=e[s]*(1-a)+t[s]*a;return r}}function But(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Vut(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,s=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)s[o]=F7(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(i){for(o=0;o<r;++o)a[o]=s[o](i);return a}}function $ut(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function rw(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Wut(e,t){var n={},r={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?n[s]=F7(e[s],t[s]):r[s]=t[s];return function(a){for(s in n)r[s]=n[s](a);return r}}var pR=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_k=new RegExp(pR.source,"g");function Hut(e){return function(){return e}}function zut(e){return function(t){return e(t)+""}}function Gut(e,t){var n=pR.lastIndex=_k.lastIndex=0,r,s,a,o=-1,i=[],c=[];for(e=e+"",t=t+"";(r=pR.exec(e))&&(s=_k.exec(t));)(a=s.index)>n&&(a=t.slice(n,a),i[o]?i[o]+=a:i[++o]=a),(r=r[0])===(s=s[0])?i[o]?i[o]+=s:i[++o]=s:(i[++o]=null,c.push({i:o,x:rw(r,s)})),n=_k.lastIndex;return n<t.length&&(a=t.slice(n),i[o]?i[o]+=a:i[++o]=a),i.length<2?c[0]?zut(c[0].x):Hut(t):(t=c.length,function(u){for(var d=0,m;d<t;++d)i[(m=c[d]).i]=m.x(u);return i.join("")})}function F7(e,t){var n=typeof t,r;return t==null||n==="boolean"?sE(t):(n==="number"?rw:n==="string"?(r=Gv(t))?(t=r,hR):Gut:t instanceof Gv?hR:t instanceof Date?$ut:But(t)?Uut:Array.isArray(t)?Vut:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Wut:rw)(e,t)}function Age(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Pge(e){return function(t,n){var r=e((t=uR(t)).h,(n=uR(n)).h),s=Xr(t.s,n.s),a=Xr(t.l,n.l),o=Xr(t.opacity,n.opacity);return function(i){return t.h=r(i),t.s=s(i),t.l=a(i),t.opacity=o(i),t+""}}}const qut=Pge(D7);var Kut=Pge(Xr);function Yut(e,t){var n=Xr((e=dR(e)).l,(t=dR(t)).l),r=Xr(e.a,t.a),s=Xr(e.b,t.b),a=Xr(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=s(o),e.opacity=a(o),e+""}}function Rge(e){return function(t,n){var r=e((t=fR(t)).h,(n=fR(n)).h),s=Xr(t.c,n.c),a=Xr(t.l,n.l),o=Xr(t.opacity,n.opacity);return function(i){return t.h=r(i),t.c=s(i),t.l=a(i),t.opacity=o(i),t+""}}}const Qut=Rge(D7);var Xut=Rge(Xr);function Ige(e){return function t(n){n=+n;function r(s,a){var o=e((s=mR(s)).h,(a=mR(a)).h),i=Xr(s.s,a.s),c=Xr(s.l,a.l),u=Xr(s.opacity,a.opacity);return function(d){return s.h=o(d),s.s=i(d),s.l=c(Math.pow(d,n)),s.opacity=u(d),s+""}}return r.gamma=t,r}(1)}const Zut=Ige(D7);var Jut=Ige(Xr);function edt(e){return function(){return e}}function jge(e){return+e}var RY=[0,1];function Li(e){return e}function gR(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:edt(isNaN(t)?NaN:.5)}function tdt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function ndt(e,t,n){var r=e[0],s=e[1],a=t[0],o=t[1];return s<r?(r=gR(s,r),a=n(o,a)):(r=gR(r,s),a=n(a,o)),function(i){return a(r(i))}}function rdt(e,t,n){var r=Math.min(e.length,t.length)-1,s=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)s[o]=gR(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(i){var c=Vp(e,i,1,r)-1;return a[c](s[c](i))}}function u1(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function aE(){var e=RY,t=RY,n=F7,r,s,a,o=Li,i,c,u;function d(){var h=Math.min(e.length,t.length);return o!==Li&&(o=tdt(e[0],e[h-1])),i=h>2?rdt:ndt,c=u=null,m}function m(h){return h==null||isNaN(h=+h)?a:(c||(c=i(e.map(r),t,n)))(r(o(h)))}return m.invert=function(h){return o(s((u||(u=i(t,e.map(r),rw)))(h)))},m.domain=function(h){return arguments.length?(e=Array.from(h,jge),d()):e.slice()},m.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},m.rangeRound=function(h){return t=Array.from(h),n=Age,d()},m.clamp=function(h){return arguments.length?(o=h?!0:Li,d()):o!==Li},m.interpolate=function(h){return arguments.length?(n=h,d()):n},m.unknown=function(h){return arguments.length?(a=h,m):a},function(h,p){return r=h,s=p,d()}}function U7(){return aE()(Li,Li)}function sdt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function sw(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Th(e){return e=sw(Math.abs(e)),e?e[1]:NaN}function adt(e,t){return function(n,r){for(var s=n.length,a=[],o=0,i=e[0],c=0;s>0&&i>0&&(c+i+1>r&&(i=Math.max(1,r-c)),a.push(n.substring(s-=i,s+i)),!((c+=i+1)>r));)i=e[o=(o+1)%e.length];return a.reverse().join(t)}}function odt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var idt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Kv(e){if(!(t=idt.exec(e)))throw new Error("invalid format: "+e);var t;return new B7({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Kv.prototype=B7.prototype;function B7(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}B7.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ldt(e){e:for(var t=e.length,n=1,r=-1,s;n<t;++n)switch(e[n]){case".":r=s=n;break;case"0":r===0&&(r=n),s=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(s+1):e}var Oge;function cdt(e,t){var n=sw(e,t);if(!n)return e+"";var r=n[0],s=n[1],a=s-(Oge=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+sw(e,Math.max(0,t+a-1))[0]}function IY(e,t){var n=sw(e,t);if(!n)return e+"";var r=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+r:r.length>s+1?r.slice(0,s+1)+"."+r.slice(s+1):r+new Array(s-r.length+2).join("0")}const jY={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:sdt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>IY(e*100,t),r:IY,s:cdt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function OY(e){return e}var LY=Array.prototype.map,DY=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function udt(e){var t=e.grouping===void 0||e.thousands===void 0?OY:adt(LY.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?OY:odt(LY.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",i=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(m){m=Kv(m);var h=m.fill,p=m.align,g=m.sign,y=m.symbol,v=m.zero,x=m.width,b=m.comma,_=m.precision,w=m.trim,S=m.type;S==="n"?(b=!0,S="g"):jY[S]||(_===void 0&&(_=12),w=!0,S="g"),(v||h==="0"&&p==="=")&&(v=!0,h="0",p="=");var C=y==="$"?n:y==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",E=y==="$"?r:/[%p]/.test(S)?o:"",M=jY[S],T=/[defgprs%]/.test(S);_=_===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function I(j){var N=C,P=E,R,k,O;if(S==="c")P=M(j)+P,j="";else{j=+j;var L=j<0||1/j<0;if(j=isNaN(j)?c:M(Math.abs(j),_),w&&(j=ldt(j)),L&&+j==0&&g!=="+"&&(L=!1),N=(L?g==="("?g:i:g==="-"||g==="("?"":g)+N,P=(S==="s"?DY[8+Oge/3]:"")+P+(L&&g==="("?")":""),T){for(R=-1,k=j.length;++R<k;)if(O=j.charCodeAt(R),48>O||O>57){P=(O===46?s+j.slice(R+1):j.slice(R))+P,j=j.slice(0,R);break}}}b&&!v&&(j=t(j,1/0));var F=N.length+j.length+P.length,U=F<x?new Array(x-F+1).join(h):"";switch(b&&v&&(j=t(U+j,U.length?x-P.length:1/0),U=""),p){case"<":j=N+j+P+U;break;case"=":j=N+U+j+P;break;case"^":j=U.slice(0,F=U.length>>1)+N+j+P+U.slice(F);break;default:j=U+N+j+P;break}return a(j)}return I.toString=function(){return m+""},I}function d(m,h){var p=u((m=Kv(m),m.type="f",m)),g=Math.max(-8,Math.min(8,Math.floor(Th(h)/3)))*3,y=Math.pow(10,-g),v=DY[8+g/3];return function(x){return p(y*x)+v}}return{format:u,formatPrefix:d}}var mb,V7,Lge;ddt({thousands:",",grouping:[3],currency:["$",""]});function ddt(e){return mb=udt(e),V7=mb.format,Lge=mb.formatPrefix,mb}function fdt(e){return Math.max(0,-Th(Math.abs(e)))}function mdt(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Th(t)/3)))*3-Th(Math.abs(e)))}function hdt(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Th(t)-Th(e))+1}function pdt(e,t,n,r){var s=lR(e,t,n),a;switch(r=Kv(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=mdt(s,o))&&(r.precision=a),Lge(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=hdt(s,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=fdt(s))&&(r.precision=a-(r.type==="%")*2);break}}return V7(r)}function d1(e){var t=e.domain;return e.ticks=function(n){var r=t();return iR(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var s=t();return pdt(s[0],s[s.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),s=0,a=r.length-1,o=r[s],i=r[a],c,u,d=10;for(i<o&&(u=o,o=i,i=u,u=s,s=a,a=u);d-- >0;){if(u=gge(o,i,n),u===c)return r[s]=o,r[a]=i,t(r);if(u>0)o=Math.floor(o/u)*u,i=Math.ceil(i/u)*u;else if(u<0)o=Math.ceil(o*u)/u,i=Math.floor(i*u)/u;else break;c=u}return e},e}function Dge(){var e=U7();return e.copy=function(){return u1(e,Dge())},wo.apply(e,arguments),d1(e)}function Fge(e,t){e=e.slice();var n=0,r=e.length-1,s=e[n],a=e[r],o;return a<s&&(o=n,n=r,r=o,o=s,s=a,a=o),e[n]=t.floor(s),e[r]=t.ceil(a),e}function FY(e){return Math.log(e)}function UY(e){return Math.exp(e)}function gdt(e){return-Math.log(-e)}function ydt(e){return-Math.exp(-e)}function vdt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function xdt(e){return e===10?vdt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function bdt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function BY(e){return(t,n)=>-e(-t,n)}function _dt(e){const t=e(FY,UY),n=t.domain;let r=10,s,a;function o(){return s=bdt(r),a=xdt(r),n()[0]<0?(s=BY(s),a=BY(a),e(gdt,ydt)):e(FY,UY),t}return t.base=function(i){return arguments.length?(r=+i,o()):r},t.domain=function(i){return arguments.length?(n(i),o()):n()},t.ticks=i=>{const c=n();let u=c[0],d=c[c.length-1];const m=d<u;m&&([u,d]=[d,u]);let h=s(u),p=s(d),g,y;const v=i==null?10:+i;let x=[];if(!(r%1)&&p-h<v){if(h=Math.floor(h),p=Math.ceil(p),u>0){for(;h<=p;++h)for(g=1;g<r;++g)if(y=h<0?g/a(-h):g*a(h),!(y<u)){if(y>d)break;x.push(y)}}else for(;h<=p;++h)for(g=r-1;g>=1;--g)if(y=h>0?g/a(-h):g*a(h),!(y<u)){if(y>d)break;x.push(y)}x.length*2<v&&(x=iR(u,d,v))}else x=iR(h,p,Math.min(p-h,v)).map(a);return m?x.reverse():x},t.tickFormat=(i,c)=>{if(i==null&&(i=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=Kv(c)).precision==null&&(c.trim=!0),c=V7(c)),i===1/0)return c;const u=Math.max(1,r*i/t.ticks().length);return d=>{let m=d/a(Math.round(s(d)));return m*r<r-.5&&(m*=r),m<=u?c(d):""}},t.nice=()=>n(Fge(n(),{floor:i=>a(Math.floor(s(i))),ceil:i=>a(Math.ceil(s(i)))})),t}function Uge(){const e=_dt(aE()).domain([1,10]);return e.copy=()=>u1(e,Uge()).base(e.base()),wo.apply(e,arguments),e}function VY(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function $Y(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function wdt(e){var t=1,n=e(VY(t),$Y(t));return n.constant=function(r){return arguments.length?e(VY(t=+r),$Y(t)):t},d1(n)}function Bge(){var e=wdt(aE());return e.copy=function(){return u1(e,Bge()).constant(e.constant())},wo.apply(e,arguments)}function WY(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Sdt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Cdt(e){return e<0?-e*e:e*e}function Edt(e){var t=e(Li,Li),n=1;function r(){return n===1?e(Li,Li):n===.5?e(Sdt,Cdt):e(WY(n),WY(1/n))}return t.exponent=function(s){return arguments.length?(n=+s,r()):n},d1(t)}function $7(){var e=Edt(aE());return e.copy=function(){return u1(e,$7()).exponent(e.exponent())},wo.apply(e,arguments),e}function Mdt(){return $7.apply(null,arguments).exponent(.5)}function HY(e){return Math.sign(e)*e*e}function Tdt(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Vge(){var e=U7(),t=[0,1],n=!1,r;function s(a){var o=Tdt(e(a));return isNaN(o)?r:n?Math.round(o):o}return s.invert=function(a){return e.invert(HY(a))},s.domain=function(a){return arguments.length?(e.domain(a),s):e.domain()},s.range=function(a){return arguments.length?(e.range((t=Array.from(a,jge)).map(HY)),s):t.slice()},s.rangeRound=function(a){return s.range(a).round(!0)},s.round=function(a){return arguments.length?(n=!!a,s):n},s.clamp=function(a){return arguments.length?(e.clamp(a),s):e.clamp()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.copy=function(){return Vge(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},wo.apply(s,arguments),d1(s)}function $ge(){var e=[],t=[],n=[],r;function s(){var o=0,i=Math.max(1,t.length);for(n=new Array(i-1);++o<i;)n[o-1]=_ut(e,o/i);return a}function a(o){return o==null||isNaN(o=+o)?r:t[Vp(n,o)]}return a.invertExtent=function(o){var i=t.indexOf(o);return i<0?[NaN,NaN]:[i>0?n[i-1]:e[0],i<n.length?n[i]:e[e.length-1]]},a.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let i of o)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort($y),s()},a.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return $ge().domain(e).range(t).unknown(r)},wo.apply(a,arguments)}function Wge(){var e=0,t=1,n=1,r=[.5],s=[0,1],a;function o(c){return c!=null&&c<=c?s[Vp(r,c,0,n)]:a}function i(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*t-(c-n)*e)/(n+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,i()):[e,t]},o.range=function(c){return arguments.length?(n=(s=Array.from(c)).length-1,i()):s.slice()},o.invertExtent=function(c){var u=s.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},o.unknown=function(c){return arguments.length&&(a=c),o},o.thresholds=function(){return r.slice()},o.copy=function(){return Wge().domain([e,t]).range(s).unknown(a)},wo.apply(d1(o),arguments)}function Hge(){var e=[.5],t=[0,1],n,r=1;function s(a){return a!=null&&a<=a?t[Vp(e,a,0,r)]:n}return s.domain=function(a){return arguments.length?(e=Array.from(a),r=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(a){return arguments.length?(t=Array.from(a),r=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(a){var o=t.indexOf(a);return[e[o-1],e[o]]},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return Hge().domain(e).range(t).unknown(n)},wo.apply(s,arguments)}const wk=new Date,Sk=new Date;function Dr(e,t,n,r){function s(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return s.floor=a=>(e(a=new Date(+a)),a),s.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),s.round=a=>{const o=s(a),i=s.ceil(a);return a-o<i-a?o:i},s.offset=(a,o)=>(t(a=new Date(+a),o==null?1:Math.floor(o)),a),s.range=(a,o,i)=>{const c=[];if(a=s.ceil(a),i=i==null?1:Math.floor(i),!(a<o)||!(i>0))return c;let u;do c.push(u=new Date(+a)),t(a,i),e(a);while(u<a&&a<o);return c},s.filter=a=>Dr(o=>{if(o>=o)for(;e(o),!a(o);)o.setTime(o-1)},(o,i)=>{if(o>=o)if(i<0)for(;++i<=0;)for(;t(o,-1),!a(o););else for(;--i>=0;)for(;t(o,1),!a(o););}),n&&(s.count=(a,o)=>(wk.setTime(+a),Sk.setTime(+o),e(wk),e(Sk),Math.floor(n(wk,Sk))),s.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?s.filter(r?o=>r(o)%a===0:o=>s.count(0,o)%a===0):s)),s}const aw=Dr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);aw.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Dr(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):aw);aw.range;const Fl=1e3,io=Fl*60,Ul=io*60,sc=Ul*24,W7=sc*7,zY=sc*30,Ck=sc*365,Bl=Dr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Fl)},(e,t)=>(t-e)/Fl,e=>e.getUTCSeconds());Bl.range;const oE=Dr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Fl)},(e,t)=>{e.setTime(+e+t*io)},(e,t)=>(t-e)/io,e=>e.getMinutes());oE.range;const iE=Dr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*io)},(e,t)=>(t-e)/io,e=>e.getUTCMinutes());iE.range;const lE=Dr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Fl-e.getMinutes()*io)},(e,t)=>{e.setTime(+e+t*Ul)},(e,t)=>(t-e)/Ul,e=>e.getHours());lE.range;const cE=Dr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ul)},(e,t)=>(t-e)/Ul,e=>e.getUTCHours());cE.range;const Wp=Dr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*io)/sc,e=>e.getDate()-1);Wp.range;const f1=Dr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/sc,e=>e.getUTCDate()-1);f1.range;const zge=Dr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/sc,e=>Math.floor(e/sc));zge.range;function wf(e){return Dr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*io)/W7)}const m1=wf(0),ow=wf(1),kdt=wf(2),Ndt=wf(3),kh=wf(4),Adt=wf(5),Pdt=wf(6);m1.range;ow.range;kdt.range;Ndt.range;kh.range;Adt.range;Pdt.range;function Sf(e){return Dr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/W7)}const h1=Sf(0),iw=Sf(1),Rdt=Sf(2),Idt=Sf(3),Nh=Sf(4),jdt=Sf(5),Odt=Sf(6);h1.range;iw.range;Rdt.range;Idt.range;Nh.range;jdt.range;Odt.range;const p1=Dr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());p1.range;const uE=Dr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());uE.range;const Qo=Dr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Qo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Dr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Qo.range;const nl=Dr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());nl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Dr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});nl.range;function Gge(e,t,n,r,s,a){const o=[[Bl,1,Fl],[Bl,5,5*Fl],[Bl,15,15*Fl],[Bl,30,30*Fl],[a,1,io],[a,5,5*io],[a,15,15*io],[a,30,30*io],[s,1,Ul],[s,3,3*Ul],[s,6,6*Ul],[s,12,12*Ul],[r,1,sc],[r,2,2*sc],[n,1,W7],[t,1,zY],[t,3,3*zY],[e,1,Ck]];function i(u,d,m){const h=d<u;h&&([u,d]=[d,u]);const p=m&&typeof m.range=="function"?m:c(u,d,m),g=p?p.range(u,+d+1):[];return h?g.reverse():g}function c(u,d,m){const h=Math.abs(d-u)/m,p=nE(([,,v])=>v).right(o,h);if(p===o.length)return e.every(lR(u/Ck,d/Ck,m));if(p===0)return aw.every(Math.max(lR(u,d,m),1));const[g,y]=o[h/o[p-1][2]<o[p][2]/h?p-1:p];return g.every(y)}return[i,c]}const[Ldt,Ddt]=Gge(nl,uE,h1,zge,cE,iE),[Fdt,Udt]=Gge(Qo,p1,m1,Wp,lE,oE);function Ek(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Mk(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ug(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Bdt(e){var t=e.dateTime,n=e.date,r=e.time,s=e.periods,a=e.days,o=e.shortDays,i=e.months,c=e.shortMonths,u=Bg(s),d=Vg(s),m=Bg(a),h=Vg(a),p=Bg(o),g=Vg(o),y=Bg(i),v=Vg(i),x=Bg(c),b=Vg(c),_={a:L,A:F,b:U,B:V,c:null,d:XY,e:XY,f:cft,g:xft,G:_ft,H:oft,I:ift,j:lft,L:qge,m:uft,M:dft,p:W,q:H,Q:eQ,s:tQ,S:fft,u:mft,U:hft,V:pft,w:gft,W:yft,x:null,X:null,y:vft,Y:bft,Z:wft,"%":JY},w={a:G,A:K,b:$,B:q,c:null,d:ZY,e:ZY,f:Mft,g:Lft,G:Fft,H:Sft,I:Cft,j:Eft,L:Yge,m:Tft,M:kft,p:Z,q:se,Q:eQ,s:tQ,S:Nft,u:Aft,U:Pft,V:Rft,w:Ift,W:jft,x:null,X:null,y:Oft,Y:Dft,Z:Uft,"%":JY},S={a:I,A:j,b:N,B:P,c:R,d:YY,e:YY,f:nft,g:KY,G:qY,H:QY,I:QY,j:Zdt,L:tft,m:Xdt,M:Jdt,p:T,q:Qdt,Q:sft,s:aft,S:eft,u:zdt,U:Gdt,V:qdt,w:Hdt,W:Kdt,x:k,X:O,y:KY,Y:qY,Z:Ydt,"%":rft};_.x=C(n,_),_.X=C(r,_),_.c=C(t,_),w.x=C(n,w),w.X=C(r,w),w.c=C(t,w);function C(Y,Q){return function(re){var te=[],le=-1,ie=0,pe=Y.length,me,de,ve;for(re instanceof Date||(re=new Date(+re));++le<pe;)Y.charCodeAt(le)===37&&(te.push(Y.slice(ie,le)),(de=GY[me=Y.charAt(++le)])!=null?me=Y.charAt(++le):de=me==="e"?" ":"0",(ve=Q[me])&&(me=ve(re,de)),te.push(me),ie=le+1);return te.push(Y.slice(ie,le)),te.join("")}}function E(Y,Q){return function(re){var te=Ug(1900,void 0,1),le=M(te,Y,re+="",0),ie,pe;if(le!=re.length)return null;if("Q"in te)return new Date(te.Q);if("s"in te)return new Date(te.s*1e3+("L"in te?te.L:0));if(Q&&!("Z"in te)&&(te.Z=0),"p"in te&&(te.H=te.H%12+te.p*12),te.m===void 0&&(te.m="q"in te?te.q:0),"V"in te){if(te.V<1||te.V>53)return null;"w"in te||(te.w=1),"Z"in te?(ie=Mk(Ug(te.y,0,1)),pe=ie.getUTCDay(),ie=pe>4||pe===0?iw.ceil(ie):iw(ie),ie=f1.offset(ie,(te.V-1)*7),te.y=ie.getUTCFullYear(),te.m=ie.getUTCMonth(),te.d=ie.getUTCDate()+(te.w+6)%7):(ie=Ek(Ug(te.y,0,1)),pe=ie.getDay(),ie=pe>4||pe===0?ow.ceil(ie):ow(ie),ie=Wp.offset(ie,(te.V-1)*7),te.y=ie.getFullYear(),te.m=ie.getMonth(),te.d=ie.getDate()+(te.w+6)%7)}else("W"in te||"U"in te)&&("w"in te||(te.w="u"in te?te.u%7:"W"in te?1:0),pe="Z"in te?Mk(Ug(te.y,0,1)).getUTCDay():Ek(Ug(te.y,0,1)).getDay(),te.m=0,te.d="W"in te?(te.w+6)%7+te.W*7-(pe+5)%7:te.w+te.U*7-(pe+6)%7);return"Z"in te?(te.H+=te.Z/100|0,te.M+=te.Z%100,Mk(te)):Ek(te)}}function M(Y,Q,re,te){for(var le=0,ie=Q.length,pe=re.length,me,de;le<ie;){if(te>=pe)return-1;if(me=Q.charCodeAt(le++),me===37){if(me=Q.charAt(le++),de=S[me in GY?Q.charAt(le++):me],!de||(te=de(Y,re,te))<0)return-1}else if(me!=re.charCodeAt(te++))return-1}return te}function T(Y,Q,re){var te=u.exec(Q.slice(re));return te?(Y.p=d.get(te[0].toLowerCase()),re+te[0].length):-1}function I(Y,Q,re){var te=p.exec(Q.slice(re));return te?(Y.w=g.get(te[0].toLowerCase()),re+te[0].length):-1}function j(Y,Q,re){var te=m.exec(Q.slice(re));return te?(Y.w=h.get(te[0].toLowerCase()),re+te[0].length):-1}function N(Y,Q,re){var te=x.exec(Q.slice(re));return te?(Y.m=b.get(te[0].toLowerCase()),re+te[0].length):-1}function P(Y,Q,re){var te=y.exec(Q.slice(re));return te?(Y.m=v.get(te[0].toLowerCase()),re+te[0].length):-1}function R(Y,Q,re){return M(Y,t,Q,re)}function k(Y,Q,re){return M(Y,n,Q,re)}function O(Y,Q,re){return M(Y,r,Q,re)}function L(Y){return o[Y.getDay()]}function F(Y){return a[Y.getDay()]}function U(Y){return c[Y.getMonth()]}function V(Y){return i[Y.getMonth()]}function W(Y){return s[+(Y.getHours()>=12)]}function H(Y){return 1+~~(Y.getMonth()/3)}function G(Y){return o[Y.getUTCDay()]}function K(Y){return a[Y.getUTCDay()]}function $(Y){return c[Y.getUTCMonth()]}function q(Y){return i[Y.getUTCMonth()]}function Z(Y){return s[+(Y.getUTCHours()>=12)]}function se(Y){return 1+~~(Y.getUTCMonth()/3)}return{format:function(Y){var Q=C(Y+="",_);return Q.toString=function(){return Y},Q},parse:function(Y){var Q=E(Y+="",!1);return Q.toString=function(){return Y},Q},utcFormat:function(Y){var Q=C(Y+="",w);return Q.toString=function(){return Y},Q},utcParse:function(Y){var Q=E(Y+="",!0);return Q.toString=function(){return Y},Q}}}var GY={"-":"",_:" ",0:"0"},ts=/^\s*\d+/,Vdt=/^%/,$dt=/[\\^$*+?|[\]().{}]/g;function _n(e,t,n){var r=e<0?"-":"",s=(r?-e:e)+"",a=s.length;return r+(a<n?new Array(n-a+1).join(t)+s:s)}function Wdt(e){return e.replace($dt,"\\$&")}function Bg(e){return new RegExp("^(?:"+e.map(Wdt).join("|")+")","i")}function Vg(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Hdt(e,t,n){var r=ts.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function zdt(e,t,n){var r=ts.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Gdt(e,t,n){var r=ts.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function qdt(e,t,n){var r=ts.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Kdt(e,t,n){var r=ts.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function qY(e,t,n){var r=ts.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function KY(e,t,n){var r=ts.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Ydt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Qdt(e,t,n){var r=ts.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Xdt(e,t,n){var r=ts.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function YY(e,t,n){var r=ts.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Zdt(e,t,n){var r=ts.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function QY(e,t,n){var r=ts.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Jdt(e,t,n){var r=ts.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function eft(e,t,n){var r=ts.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function tft(e,t,n){var r=ts.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function nft(e,t,n){var r=ts.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function rft(e,t,n){var r=Vdt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function sft(e,t,n){var r=ts.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function aft(e,t,n){var r=ts.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function XY(e,t){return _n(e.getDate(),t,2)}function oft(e,t){return _n(e.getHours(),t,2)}function ift(e,t){return _n(e.getHours()%12||12,t,2)}function lft(e,t){return _n(1+Wp.count(Qo(e),e),t,3)}function qge(e,t){return _n(e.getMilliseconds(),t,3)}function cft(e,t){return qge(e,t)+"000"}function uft(e,t){return _n(e.getMonth()+1,t,2)}function dft(e,t){return _n(e.getMinutes(),t,2)}function fft(e,t){return _n(e.getSeconds(),t,2)}function mft(e){var t=e.getDay();return t===0?7:t}function hft(e,t){return _n(m1.count(Qo(e)-1,e),t,2)}function Kge(e){var t=e.getDay();return t>=4||t===0?kh(e):kh.ceil(e)}function pft(e,t){return e=Kge(e),_n(kh.count(Qo(e),e)+(Qo(e).getDay()===4),t,2)}function gft(e){return e.getDay()}function yft(e,t){return _n(ow.count(Qo(e)-1,e),t,2)}function vft(e,t){return _n(e.getFullYear()%100,t,2)}function xft(e,t){return e=Kge(e),_n(e.getFullYear()%100,t,2)}function bft(e,t){return _n(e.getFullYear()%1e4,t,4)}function _ft(e,t){var n=e.getDay();return e=n>=4||n===0?kh(e):kh.ceil(e),_n(e.getFullYear()%1e4,t,4)}function wft(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+_n(t/60|0,"0",2)+_n(t%60,"0",2)}function ZY(e,t){return _n(e.getUTCDate(),t,2)}function Sft(e,t){return _n(e.getUTCHours(),t,2)}function Cft(e,t){return _n(e.getUTCHours()%12||12,t,2)}function Eft(e,t){return _n(1+f1.count(nl(e),e),t,3)}function Yge(e,t){return _n(e.getUTCMilliseconds(),t,3)}function Mft(e,t){return Yge(e,t)+"000"}function Tft(e,t){return _n(e.getUTCMonth()+1,t,2)}function kft(e,t){return _n(e.getUTCMinutes(),t,2)}function Nft(e,t){return _n(e.getUTCSeconds(),t,2)}function Aft(e){var t=e.getUTCDay();return t===0?7:t}function Pft(e,t){return _n(h1.count(nl(e)-1,e),t,2)}function Qge(e){var t=e.getUTCDay();return t>=4||t===0?Nh(e):Nh.ceil(e)}function Rft(e,t){return e=Qge(e),_n(Nh.count(nl(e),e)+(nl(e).getUTCDay()===4),t,2)}function Ift(e){return e.getUTCDay()}function jft(e,t){return _n(iw.count(nl(e)-1,e),t,2)}function Oft(e,t){return _n(e.getUTCFullYear()%100,t,2)}function Lft(e,t){return e=Qge(e),_n(e.getUTCFullYear()%100,t,2)}function Dft(e,t){return _n(e.getUTCFullYear()%1e4,t,4)}function Fft(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Nh(e):Nh.ceil(e),_n(e.getUTCFullYear()%1e4,t,4)}function Uft(){return"+0000"}function JY(){return"%"}function eQ(e){return+e}function tQ(e){return Math.floor(+e/1e3)}var Wf,g1,Xge;Bft({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Bft(e){return Wf=Bdt(e),g1=Wf.format,Wf.parse,Xge=Wf.utcFormat,Wf.utcParse,Wf}function Vft(e){return new Date(e)}function $ft(e){return e instanceof Date?+e:+new Date(+e)}function H7(e,t,n,r,s,a,o,i,c,u){var d=U7(),m=d.invert,h=d.domain,p=u(".%L"),g=u(":%S"),y=u("%I:%M"),v=u("%I %p"),x=u("%a %d"),b=u("%b %d"),_=u("%B"),w=u("%Y");function S(C){return(c(C)<C?p:i(C)<C?g:o(C)<C?y:a(C)<C?v:r(C)<C?s(C)<C?x:b:n(C)<C?_:w)(C)}return d.invert=function(C){return new Date(m(C))},d.domain=function(C){return arguments.length?h(Array.from(C,$ft)):h().map(Vft)},d.ticks=function(C){var E=h();return e(E[0],E[E.length-1],C??10)},d.tickFormat=function(C,E){return E==null?S:u(E)},d.nice=function(C){var E=h();return(!C||typeof C.range!="function")&&(C=t(E[0],E[E.length-1],C??10)),C?h(Fge(E,C)):d},d.copy=function(){return u1(d,H7(e,t,n,r,s,a,o,i,c,u))},d}function Wft(){return wo.apply(H7(Fdt,Udt,Qo,p1,m1,Wp,lE,oE,Bl,g1).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Hft(){return wo.apply(H7(Ldt,Ddt,nl,uE,h1,f1,cE,iE,Bl,Xge).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function zft(e,t){t.domain&&("nice"in e||"quantiles"in e||"padding"in e,e.domain(t.domain))}function Gft(e,t){t.range&&("padding"in e,e.range(t.range))}function qft(e,t){"align"in e&&"align"in t&&typeof t.align<"u"&&e.align(t.align)}function Kft(e,t){"base"in e&&"base"in t&&typeof t.base<"u"&&e.base(t.base)}function Yft(e,t){"clamp"in e&&"clamp"in t&&typeof t.clamp<"u"&&e.clamp(t.clamp)}function Qft(e,t){"constant"in e&&"constant"in t&&typeof t.constant<"u"&&e.constant(t.constant)}function Xft(e,t){"exponent"in e&&"exponent"in t&&typeof t.exponent<"u"&&e.exponent(t.exponent)}var nQ={lab:Yut,hcl:Qut,"hcl-long":Xut,hsl:qut,"hsl-long":Kut,cubehelix:Zut,"cubehelix-long":Jut,rgb:hR};function Zft(e){switch(e){case"lab":case"hcl":case"hcl-long":case"hsl":case"hsl-long":case"cubehelix":case"cubehelix-long":case"rgb":return nQ[e]}var t=e.type,n=e.gamma,r=nQ[t];return typeof n>"u"?r:r.gamma(n)}function Jft(e,t){if("interpolate"in t&&"interpolate"in e&&typeof t.interpolate<"u"){var n=Zft(t.interpolate);e.interpolate(n)}}var emt=new Date(Date.UTC(2020,1,2,3,4,5)),tmt="%Y-%m-%d %H:%M";function Zge(e){var t=e.tickFormat(1,tmt)(emt);return t==="2020-02-02 03:04"}var rQ={day:Wp,hour:lE,minute:oE,month:p1,second:Bl,week:m1,year:Qo},sQ={day:f1,hour:cE,minute:iE,month:uE,second:Bl,week:h1,year:nl};function nmt(e,t){if("nice"in t&&typeof t.nice<"u"&&"nice"in e){var n=t.nice;if(typeof n=="boolean")n&&e.nice();else if(typeof n=="number")e.nice(n);else{var r=e,s=Zge(r);if(typeof n=="string")r.nice(s?sQ[n]:rQ[n]);else{var a=n.interval,o=n.step,i=(s?sQ[a]:rQ[a]).every(o);i!=null&&r.nice(i)}}}}function rmt(e,t){"padding"in e&&"padding"in t&&typeof t.padding<"u"&&e.padding(t.padding),"paddingInner"in e&&"paddingInner"in t&&typeof t.paddingInner<"u"&&e.paddingInner(t.paddingInner),"paddingOuter"in e&&"paddingOuter"in t&&typeof t.paddingOuter<"u"&&e.paddingOuter(t.paddingOuter)}function smt(e,t){if(t.reverse){var n=e.range().slice().reverse();"padding"in e,e.range(n)}}function amt(e,t){"round"in t&&typeof t.round<"u"&&(t.round&&"interpolate"in t&&typeof t.interpolate<"u"?console.warn("[visx/scale/applyRound] ignoring round: scale config contains round and interpolate. only applying interpolate. config:",t):"round"in e?e.round(t.round):"interpolate"in e&&t.round&&e.interpolate(Age))}function omt(e,t){"unknown"in e&&"unknown"in t&&typeof t.unknown<"u"&&e.unknown(t.unknown)}function imt(e,t){if("zero"in t&&t.zero===!0){var n=e.domain(),r=n[0],s=n[1],a=s<r,o=a?[s,r]:[r,s],i=o[0],c=o[1],u=[Math.min(0,i),Math.max(0,c)];e.domain(a?u.reverse():u)}}var Jge=["domain","nice","zero","interpolate","round","range","reverse","align","base","clamp","constant","exponent","padding","unknown"],lmt={domain:zft,nice:nmt,zero:imt,interpolate:Jft,round:amt,align:qft,base:Kft,clamp:Yft,constant:Qft,exponent:Xft,padding:rmt,range:Gft,reverse:smt,unknown:omt};function na(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=new Set(t),s=Jge.filter(function(a){return r.has(a)});return function(o,i){return typeof i<"u"&&s.forEach(function(c){lmt[c](o,i)}),o}}var cmt=na("domain","range","reverse","align","padding","round");function z7(e){return cmt(I7(),e)}var umt=na("domain","range","reverse","align","padding","round");function G7(e){return umt(Sut(),e)}var dmt=na("domain","range","reverse","clamp","interpolate","nice","round","zero");function Ah(e){return dmt(Dge(),e)}var fmt=na("domain","range","clamp","nice","round","unknown");function mmt(e){return fmt(Vge(),e)}var hmt=na("domain","range","reverse","clamp","interpolate","nice","round");function y1(e){return hmt(Wft(),e)}var pmt=na("domain","range","reverse","clamp","interpolate","nice","round");function eye(e){return pmt(Hft(),e)}var gmt=na("domain","range","reverse","base","clamp","interpolate","nice","round");function q7(e){return gmt(Uge(),e)}var ymt=na("domain","range","reverse","clamp","exponent","interpolate","nice","round","zero");function tye(e){return ymt($7(),e)}var vmt=na("domain","range","reverse","unknown");function K7(e){return vmt(R7(),e)}var xmt=na("domain","range","reverse","nice","zero");function nye(e){return xmt(Wge(),e)}var bmt=na("domain","range","reverse");function rye(e){return bmt($ge(),e)}var _mt=na("domain","range","reverse","clamp","constant","nice","zero","round");function sye(e){return _mt(Bge(),e)}var wmt=na("domain","range","reverse");function aye(e){return wmt(Hge(),e)}var Smt=na("domain","range","reverse","clamp","interpolate","nice","round","zero");function oye(e){return Smt(Mdt(),e)}function Cmt(e){if(typeof e<"u"&&"type"in e)switch(e.type){case"linear":return Ah(e);case"log":return q7(e);case"pow":return tye(e);case"sqrt":return oye(e);case"symlog":return sye(e);case"time":return y1(e);case"utc":return eye(e);case"quantile":return rye(e);case"quantize":return nye(e);case"threshold":return aye(e);case"ordinal":return K7(e);case"point":return G7(e);case"band":return z7(e)}return Ah(e)}var Emt=na.apply(void 0,Jge);function Mmt(e,t){return Emt(e.copy(),t)}function Tmt(e){return"paddingInner"in e?"band":"padding"in e?"point":"quantiles"in e?"quantile":"base"in e?"log":"exponent"in e?e.exponent()===.5?"sqrt":"pow":"constant"in e?"symlog":"clamp"in e?e.ticks()[0]instanceof Date?Zge(e)?"utc":"time":"linear":"nice"in e?"quantize":"invertExtent"in e?"threshold":"ordinal"}function dE(e){if((typeof e=="function"||typeof e=="object"&&e)&&"valueOf"in e){var t=e.valueOf();if(typeof t=="number")return t}return e}function Y7(e,t){var n=e;return"ticks"in n?n.ticks(t):n.domain().filter(function(r,s,a){return t==null||a.length<=t||s%Math.round((a.length-1)/t)===0})}function iye(e){return e?.toString()}var kmt=new Set(["linear","pow","quantize","sqrt","symlog"]);function Nmt(e){return kmt.has(e.type)}const Amt=Object.freeze(Object.defineProperty({__proto__:null,coerceNumber:dE,createScale:Cmt,getTicks:Y7,inferScaleType:Tmt,scaleBand:z7,scaleCanBeZeroed:Nmt,scaleLinear:Ah,scaleLog:q7,scaleOrdinal:K7,scalePoint:G7,scalePower:tye,scaleQuantile:rye,scaleQuantize:nye,scaleRadial:mmt,scaleSqrt:oye,scaleSymlog:sye,scaleThreshold:aye,scaleTime:y1,scaleUtc:eye,toString:iye,updateScale:Mmt},Symbol.toStringTag,{value:"Module"}));function Vn(e,t){e(t)}var lw={ascending:mge,descending:uut,insideout:dut,none:Eh,reverse:fut},Pmt=Object.keys(lw);function fE(e){return e&&lw[e]||lw.none}var cw={expand:sut,diverging:aut,none:Ch,silhouette:out,wiggle:iut},Rmt=Object.keys(cw);function mE(e){return e&&cw[e]||cw.none}function Q7(e){var t=e===void 0?{}:e,n=t.innerRadius,r=t.outerRadius,s=t.cornerRadius,a=t.startAngle,o=t.endAngle,i=t.padAngle,c=t.padRadius,u=Fct();return n!=null&&Vn(u.innerRadius,n),r!=null&&Vn(u.outerRadius,r),s!=null&&Vn(u.cornerRadius,s),a!=null&&Vn(u.startAngle,a),o!=null&&Vn(u.endAngle,o),i!=null&&Vn(u.padAngle,i),c!=null&&Vn(u.padRadius,c),u}function hE(e){var t=e===void 0?{}:e,n=t.x,r=t.x0,s=t.x1,a=t.y,o=t.y0,i=t.y1,c=t.defined,u=t.curve,d=Uct();return n&&Vn(d.x,n),r&&Vn(d.x0,r),s&&Vn(d.x1,s),a&&Vn(d.y,a),o&&Vn(d.y0,o),i&&Vn(d.y1,i),c&&d.defined(c),u&&d.curve(u),d}function Cf(e){var t=e===void 0?{}:e,n=t.x,r=t.y,s=t.defined,a=t.curve,o=N7();return n&&Vn(o.x,n),r&&Vn(o.y,r),s&&o.defined(s),a&&o.curve(a),o}function lye(e){var t=e===void 0?{}:e,n=t.startAngle,r=t.endAngle,s=t.padAngle,a=t.value,o=t.sort,i=t.sortValues,c=$ct();return(o===null||o!=null)&&c.sort(o),(i===null||i!=null)&&c.sortValues(i),a!=null&&c.value(a),s!=null&&Vn(c.padAngle,s),n!=null&&Vn(c.startAngle,n),r!=null&&Vn(c.endAngle,r),c}function cye(e){var t=e===void 0?{}:e,n=t.angle,r=t.radius,s=t.defined,a=t.curve,o=zct();return n&&Vn(o.angle,n),r&&Vn(o.radius,r),s&&o.defined(s),a&&o.curve(a),o}function uye(e){var t=e.keys,n=e.value,r=e.order,s=e.offset,a=P7();return t&&a.keys(t),n&&Vn(a.value,n),r&&a.order(fE(r)),s&&a.offset(mE(s)),a}var Imt=["className","data","innerRadius","outerRadius","cornerRadius","startAngle","endAngle","padAngle","padRadius","children","innerRef"];function yR(){return yR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yR.apply(this,arguments)}function jmt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Omt(e){var t=e.className,n=e.data,r=e.innerRadius,s=e.outerRadius,a=e.cornerRadius,o=e.startAngle,i=e.endAngle,c=e.padAngle,u=e.padRadius,d=e.children,m=e.innerRef,h=jmt(e,Imt),p=Q7({innerRadius:r,outerRadius:s,cornerRadius:a,startAngle:o,endAngle:i,padAngle:c,padRadius:u});return d?A.createElement(A.Fragment,null,d({path:p})):!n&&(o==null||i==null||r==null||s==null)?(console.warn("[@visx/shape/Arc]: expected data because one of startAngle, endAngle, innerRadius, outerRadius is undefined. Bailing."),null):A.createElement("path",yR({ref:m,className:B("visx-arc",t),d:p(n)||""},h))}var Lmt=["top","left","transform","className","children","innerRef"];function vR(){return vR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vR.apply(this,arguments)}function Dmt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Ca(e){var t=e.top,n=t===void 0?0:t,r=e.left,s=r===void 0?0:r,a=e.transform,o=e.className,i=e.children,c=e.innerRef,u=Dmt(e,Lmt);return A.createElement("g",vR({ref:c,className:B("visx-group",o),transform:a||"translate("+s+", "+n+")"},u),i)}Ca.propTypes={top:we.number,left:we.number,transform:we.string,className:we.string,children:we.node,innerRef:we.oneOfType([we.string,we.func,we.object])};const Fmt=Object.freeze(Object.defineProperty({__proto__:null,Group:Ca},Symbol.toStringTag,{value:"Module"}));var Umt=["className","top","left","data","centroid","innerRadius","outerRadius","cornerRadius","startAngle","endAngle","padAngle","padRadius","pieSort","pieSortValues","pieValue","children","fill"];function xR(){return xR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xR.apply(this,arguments)}function Bmt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Vmt(e){var t=e.className,n=e.top,r=e.left,s=e.data,a=s===void 0?[]:s,o=e.centroid,i=e.innerRadius,c=i===void 0?0:i,u=e.outerRadius,d=e.cornerRadius,m=e.startAngle,h=e.endAngle,p=e.padAngle,g=e.padRadius,y=e.pieSort,v=e.pieSortValues,x=e.pieValue,b=e.children,_=e.fill,w=_===void 0?"":_,S=Bmt(e,Umt),C=Q7({innerRadius:c,outerRadius:u,cornerRadius:d,padRadius:g}),E=lye({startAngle:m,endAngle:h,padAngle:p,value:x,sort:y,sortValues:v}),M=E(a);return b?A.createElement(A.Fragment,null,b({arcs:M,path:C,pie:E})):A.createElement(Ca,{className:"visx-pie-arcs-group",top:n,left:r},M.map(function(T,I){return A.createElement("g",{key:"pie-arc-"+I},A.createElement("path",xR({className:B("visx-pie-arc",t),d:C(T)||"",fill:w==null||typeof w=="string"?w:w(T)},S)),o?.(C.centroid(T),T))}))}var $mt=["from","to","fill","className","innerRef"];function bR(){return bR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bR.apply(this,arguments)}function Wmt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function pE(e){var t=e.from,n=t===void 0?{x:0,y:0}:t,r=e.to,s=r===void 0?{x:1,y:1}:r,a=e.fill,o=a===void 0?"transparent":a,i=e.className,c=e.innerRef,u=Wmt(e,$mt),d=n.x===s.x||n.y===s.y;return A.createElement("line",bR({ref:c,className:B("visx-line",i),x1:n.x,y1:n.y,x2:s.x,y2:s.y,fill:o,shapeRendering:d?"crispEdges":"auto"},u))}var Hmt=["children","data","x","y","fill","className","curve","innerRef","defined"];function _R(){return _R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_R.apply(this,arguments)}function zmt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function dye(e){var t=e.children,n=e.data,r=n===void 0?[]:n,s=e.x,a=e.y,o=e.fill,i=o===void 0?"transparent":o,c=e.className,u=e.curve,d=e.innerRef,m=e.defined,h=m===void 0?function(){return!0}:m,p=zmt(e,Hmt),g=Cf({x:s,y:a,defined:h,curve:u});return t?A.createElement(A.Fragment,null,t({path:g})):A.createElement("path",_R({ref:d,className:B("visx-linepath",c),d:g(r)||"",fill:i,strokeLinecap:"round"},p))}var Gmt=["className","angle","radius","defined","curve","data","innerRef","children","fill"];function wR(){return wR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wR.apply(this,arguments)}function qmt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Kmt(e){var t=e.className,n=e.angle,r=e.radius,s=e.defined,a=e.curve,o=e.data,i=o===void 0?[]:o,c=e.innerRef,u=e.children,d=e.fill,m=d===void 0?"transparent":d,h=qmt(e,Gmt),p=cye({angle:n,radius:r,defined:s,curve:a});return u?A.createElement(A.Fragment,null,u({path:p})):A.createElement("path",wR({ref:c,className:B("visx-line-radial",t),d:p(i)||"",fill:m},h))}var Ymt=["children","x","x0","x1","y","y0","y1","data","defined","className","curve","innerRef"];function SR(){return SR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SR.apply(this,arguments)}function Qmt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Xmt(e){var t=e.children,n=e.x,r=e.x0,s=e.x1,a=e.y,o=e.y0,i=e.y1,c=e.data,u=c===void 0?[]:c,d=e.defined,m=d===void 0?function(){return!0}:d,h=e.className,p=e.curve,g=e.innerRef,y=Qmt(e,Ymt),v=hE({x:n,x0:r,x1:s,y:a,y0:o,y1:i,defined:m,curve:p});return t?A.createElement(A.Fragment,null,t({path:v})):A.createElement("path",SR({ref:g,className:B("visx-area",h),d:v(u)||""},y))}var Zmt=["x","x0","x1","y","y1","y0","yScale","data","defined","className","curve","innerRef","children"];function CR(){return CR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},CR.apply(this,arguments)}function Jmt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Ph(e){var t=e.x,n=e.x0,r=e.x1,s=e.y,a=e.y1,o=e.y0,i=e.yScale,c=e.data,u=c===void 0?[]:c,d=e.defined,m=d===void 0?function(){return!0}:d,h=e.className,p=e.curve,g=e.innerRef,y=e.children,v=Jmt(e,Zmt),x=hE({x:t,x0:n,x1:r,defined:m,curve:p});return o==null?x.y0(i.range()[0]):Vn(x.y0,o),s&&!a&&Vn(x.y1,s),a&&!s&&Vn(x.y1,a),y?A.createElement(A.Fragment,null,y({path:x})):A.createElement("path",CR({ref:g,className:B("visx-area-closed",h),d:x(u)||""},v))}var eht=["className","top","left","keys","data","curve","defined","x","x0","x1","y0","y1","value","order","offset","color","children"];function ER(){return ER=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ER.apply(this,arguments)}function tht(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function fye(e){var t=e.className,n=e.top,r=e.left,s=e.keys,a=e.data,o=e.curve,i=e.defined,c=e.x,u=e.x0,d=e.x1,m=e.y0,h=e.y1,p=e.value,g=e.order,y=e.offset,v=e.color,x=e.children,b=tht(e,eht),_=uye({keys:s,value:p,order:g,offset:y}),w=hE({x:c,x0:u,x1:d,y0:m,y1:h,curve:o,defined:i}),S=_(a);return x?A.createElement(A.Fragment,null,x({stacks:S,path:w,stack:_})):A.createElement(Ca,{top:n,left:r},S.map(function(C,E){return A.createElement("path",ER({className:B("visx-stack",t),key:"stack-"+E+"-"+(C.key||""),d:w(C)||"",fill:v?.(C.key,E)},b))}))}var nht=["className","top","left","keys","data","curve","defined","x","x0","x1","y0","y1","value","order","offset","color","children"];function uw(){return uw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uw.apply(this,arguments)}function rht(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function sht(e){var t=e.className,n=e.top,r=e.left,s=e.keys,a=e.data,o=e.curve,i=e.defined,c=e.x,u=e.x0,d=e.x1,m=e.y0,h=e.y1,p=e.value,g=e.order,y=e.offset,v=e.color,x=e.children,b=rht(e,nht);return A.createElement(fye,uw({className:t,top:n,left:r,keys:s,data:a,curve:o,defined:i,x:c,x0:u,x1:d,y0:m,y1:h,value:p,order:g,offset:y,color:v},b),x||function(_){var w=_.stacks,S=_.path;return w.map(function(C,E){return A.createElement("path",uw({className:B("visx-area-stack",t),key:"area-stack-"+E+"-"+(C.key||""),d:S(C)||"",fill:v?.(C.key,E)},b))})})}var aht=["className","innerRef"];function MR(){return MR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},MR.apply(this,arguments)}function oht(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Hp(e){var t=e.className,n=e.innerRef,r=oht(e,aht);return A.createElement("rect",MR({ref:n,className:B("visx-bar",t)},r))}var iht=["children","className","innerRef","x","y","width","height","radius","all","top","bottom","left","right","topLeft","topRight","bottomLeft","bottomRight"];function TR(){return TR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},TR.apply(this,arguments)}function lht(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function cht(e){var t=e.all,n=e.bottom,r=e.bottomLeft,s=e.bottomRight,a=e.height,o=e.left,i=e.radius,c=e.right,u=e.top,d=e.topLeft,m=e.topRight,h=e.width,p=e.x,g=e.y;m=t||u||c||m,s=t||n||c||s,r=t||n||o||r,d=t||u||o||d,i=Math.max(1,Math.min(i,Math.min(h,a)/2));var y=2*i,v=("M"+(p+i)+","+g+" h"+(h-y)+`
 `+(m?"a"+i+","+i+" 0 0 1 "+i+","+i:"h"+i+"v"+i)+`
 v`+(a-y)+`
 `+(s?"a"+i+","+i+" 0 0 1 "+-i+","+i:"v"+i+"h"+-i)+`
 h`+(y-h)+`
 `+(r?"a"+i+","+i+" 0 0 1 "+-i+","+-i:"h"+-i+"v"+-i)+`
 v`+(y-a)+`
 `+(d?"a"+i+","+i+" 0 0 1 "+i+","+-i:"v"+-i+"h"+i)+`
z`).split(`
`).join("");return v}function uht(e){var t=e.children,n=e.className,r=e.innerRef,s=e.x,a=e.y,o=e.width,i=e.height,c=e.radius,u=e.all,d=u===void 0?!1:u,m=e.top,h=m===void 0?!1:m,p=e.bottom,g=p===void 0?!1:p,y=e.left,v=y===void 0?!1:y,x=e.right,b=x===void 0?!1:x,_=e.topLeft,w=_===void 0?!1:_,S=e.topRight,C=S===void 0?!1:S,E=e.bottomLeft,M=E===void 0?!1:E,T=e.bottomRight,I=T===void 0?!1:T,j=lht(e,iht),N=cht({x:s,y:a,width:o,height:i,radius:c,all:d,top:h,bottom:g,left:v,right:b,topLeft:w,topRight:C,bottomLeft:M,bottomRight:I});return t?A.createElement(A.Fragment,null,t({path:N})):A.createElement("path",TR({ref:r,className:B("visx-bar-rounded",n),d:N},j))}function gE(e){if("bandwidth"in e)return e.bandwidth();var t=e.range(),n=e.domain();return Math.abs(t[t.length-1]-t[0])/n.length}var dht=["data","className","top","left","x0","x0Scale","x1Scale","yScale","color","keys","height","children"];function kR(){return kR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kR.apply(this,arguments)}function fht(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function mht(e){var t=e.data,n=e.className,r=e.top,s=e.left,a=e.x0,o=e.x0Scale,i=e.x1Scale,c=e.yScale,u=e.color,d=e.keys,m=e.height,h=e.children,p=fht(e,dht),g=gE(i),y=t.map(function(v,x){return{index:x,x0:o(a(v)),bars:d.map(function(b,_){var w=v[b];return{index:_,key:b,value:w,width:g,x:i(b)||0,y:c(w)||0,color:u(b,_),height:m-(c(w)||0)}})}});return h?A.createElement(A.Fragment,null,h(y)):A.createElement(Ca,{className:B("visx-bar-group",n),top:r,left:s},y.map(function(v){return A.createElement(Ca,{key:"bar-group-"+v.index+"-"+v.x0,left:v.x0},v.bars.map(function(x){return A.createElement(Hp,kR({key:"bar-group-bar-"+v.index+"-"+x.index+"-"+x.value+"-"+x.key,x:x.x,y:x.y,width:x.width,height:x.height,fill:x.color},p))}))}))}var hht=["data","className","top","left","x","y0","y0Scale","y1Scale","xScale","color","keys","width","children"];function NR(){return NR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},NR.apply(this,arguments)}function pht(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function ght(e){var t=e.data,n=e.className,r=e.top,s=e.left,a=e.x,o=a===void 0?function(){return 0}:a,i=e.y0,c=e.y0Scale,u=e.y1Scale,d=e.xScale,m=e.color,h=e.keys;e.width;var p=e.children,g=pht(e,hht),y=gE(u),v=t.map(function(x,b){return{index:b,y0:c(i(x))||0,bars:h.map(function(_,w){var S=x[_];return{index:w,key:_,value:S,height:y,x:o(S)||0,y:u(_)||0,color:m(_,w),width:d(S)||0}})}});return p?A.createElement(A.Fragment,null,p(v)):A.createElement(Ca,{className:B("visx-bar-group-horizontal",n),top:r,left:s},v.map(function(x){return A.createElement(Ca,{key:"bar-group-"+x.index+"-"+x.y0,top:x.y0},x.bars.map(function(b){return A.createElement(Hp,NR({key:"bar-group-bar-"+x.index+"-"+b.index+"-"+b.value+"-"+b.key,x:b.x,y:b.y,width:b.width,height:b.height,fill:b.color},g))}))}))}function So(e){return typeof e?.x=="number"?e?.x:0}function Co(e){return typeof e?.y=="number"?e?.y:0}function Eo(e){return e?.source}function Mo(e){return e?.target}function mye(e){return e?.[0]}function hye(e){return e?.[1]}var yht=["data","className","top","left","x","y0","y1","xScale","yScale","color","keys","value","order","offset","children"];function AR(){return AR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},AR.apply(this,arguments)}function vht(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function xht(e){var t=e.data,n=e.className,r=e.top,s=e.left,a=e.x,o=e.y0,i=o===void 0?mye:o,c=e.y1,u=c===void 0?hye:c,d=e.xScale,m=e.yScale,h=e.color,p=e.keys,g=e.value,y=e.order,v=e.offset,x=e.children,b=vht(e,yht),_=P7();p&&_.keys(p),g&&Vn(_.value,g),y&&_.order(fE(y)),v&&_.offset(mE(v));var w=_(t),S=gE(d),C=w.map(function(E,M){var T=E.key;return{index:M,key:T,bars:E.map(function(I,j){var N=(m(i(I))||0)-(m(u(I))||0),P=m(u(I)),R="bandwidth"in d?d(a(I.data)):Math.max((d(a(I.data))||0)-S/2);return{bar:I,key:T,index:j,height:N,width:S,x:R||0,y:P||0,color:h(E.key,j)}})}});return x?A.createElement(A.Fragment,null,x(C)):A.createElement(Ca,{className:B("visx-bar-stack",n),top:r,left:s},C.map(function(E){return E.bars.map(function(M){return A.createElement(Hp,AR({key:"bar-stack-"+E.index+"-"+M.index,x:M.x,y:M.y,height:M.height,width:M.width,fill:M.color},b))})}))}var bht=["data","className","top","left","y","x0","x1","xScale","yScale","color","keys","value","order","offset","children"];function PR(){return PR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},PR.apply(this,arguments)}function _ht(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function wht(e){var t=e.data,n=e.className,r=e.top,s=e.left,a=e.y,o=e.x0,i=o===void 0?mye:o,c=e.x1,u=c===void 0?hye:c,d=e.xScale,m=e.yScale,h=e.color,p=e.keys,g=e.value,y=e.order,v=e.offset,x=e.children,b=_ht(e,bht),_=P7();p&&_.keys(p),g&&Vn(_.value,g),y&&_.order(fE(y)),v&&_.offset(mE(v));var w=_(t),S=gE(m),C=w.map(function(E,M){var T=E.key;return{index:M,key:T,bars:E.map(function(I,j){var N=(d(u(I))||0)-(d(i(I))||0),P=d(i(I)),R="bandwidth"in m?m(a(I.data)):Math.max((m(a(I.data))||0)-N/2);return{bar:I,key:T,index:j,height:S,width:N,x:P||0,y:R||0,color:h(E.key,j)}})}});return x?A.createElement(A.Fragment,null,x(C)):A.createElement(Ca,{className:B("visx-bar-stack-horizontal",n),top:r,left:s},C.map(function(E){return E.bars.map(function(M){return A.createElement(Hp,PR({key:"bar-stack-"+E.index+"-"+M.index,x:M.x,y:M.y,height:M.height,width:M.width,fill:M.color},b))})}))}var pye=function(t){return Math.PI/180*t},Sht=["className","children","data","innerRef","path","x","y","source","target"];function RR(){return RR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RR.apply(this,arguments)}function Cht(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function gye(e){var t=e.source,n=e.target,r=e.x,s=e.y;return function(a){var o=Xct();return o.x(r),o.y(s),o.source(t),o.target(n),o(a)}}function Eht(e){var t=e.className,n=e.children,r=e.data,s=e.innerRef,a=e.path,o=e.x,i=o===void 0?Co:o,c=e.y,u=c===void 0?So:c,d=e.source,m=d===void 0?Eo:d,h=e.target,p=h===void 0?Mo:h,g=Cht(e,Sht),y=a||gye({source:m,target:p,x:i,y:u});return n?A.createElement(A.Fragment,null,n({path:y})):A.createElement("path",RR({ref:s,className:B("visx-link visx-link-horizontal-diagonal",t),d:y(r)||""},g))}var Mht=["className","children","data","innerRef","path","x","y","source","target"];function IR(){return IR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},IR.apply(this,arguments)}function Tht(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function yye(e){var t=e.source,n=e.target,r=e.x,s=e.y;return function(a){var o=Zct();return o.x(r),o.y(s),o.source(t),o.target(n),o(a)}}function kht(e){var t=e.className,n=e.children,r=e.data,s=e.innerRef,a=e.path,o=e.x,i=o===void 0?So:o,c=e.y,u=c===void 0?Co:c,d=e.source,m=d===void 0?Eo:d,h=e.target,p=h===void 0?Mo:h,g=Tht(e,Mht),y=a||yye({source:m,target:p,x:i,y:u});return n?A.createElement(A.Fragment,null,n({path:y})):A.createElement("path",IR({ref:s,className:B("visx-link visx-link-vertical-diagonal",t),d:y(r)||""},g))}var Nht=["className","children","data","innerRef","path","angle","radius","source","target"];function jR(){return jR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jR.apply(this,arguments)}function Aht(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function vye(e){var t=e.source,n=e.target,r=e.angle,s=e.radius;return function(a){var o=Jct();return o.angle(r),o.radius(s),o.source(t),o.target(n),o(a)}}function Pht(e){var t=e.className,n=e.children,r=e.data,s=e.innerRef,a=e.path,o=e.angle,i=o===void 0?So:o,c=e.radius,u=c===void 0?Co:c,d=e.source,m=d===void 0?Eo:d,h=e.target,p=h===void 0?Mo:h,g=Aht(e,Nht),y=a||vye({source:m,target:p,angle:i,radius:u});return n?A.createElement(A.Fragment,null,n({path:y})):A.createElement("path",jR({ref:s,className:B("visx-link visx-link-radial-diagonal",t),d:y(r)||""},g))}var Rht=["className","children","data","innerRef","path","percent","x","y","source","target"];function OR(){return OR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},OR.apply(this,arguments)}function Iht(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function xye(e){var t=e.source,n=e.target,r=e.x,s=e.y,a=e.percent;return function(o){var i=t(o),c=n(o),u=r(i),d=s(i),m=r(c),h=s(c),p=m-u,g=h-d,y=a*(p+g),v=a*(g-p),x=Ya();return x.moveTo(u,d),x.bezierCurveTo(u+y,d+v,m+v,h-y,m,h),x.toString()}}function jht(e){var t=e.className,n=e.children,r=e.data,s=e.innerRef,a=e.path,o=e.percent,i=o===void 0?.2:o,c=e.x,u=c===void 0?Co:c,d=e.y,m=d===void 0?So:d,h=e.source,p=h===void 0?Eo:h,g=e.target,y=g===void 0?Mo:g,v=Iht(e,Rht),x=a||xye({source:p,target:y,x:u,y:m,percent:i});return n?A.createElement(A.Fragment,null,n({path:x})):A.createElement("path",OR({ref:s,className:B("visx-link visx-link-horizontal-curve",t),d:x(r)||""},v))}var Oht=["className","children","data","innerRef","path","percent","x","y","source","target"];function LR(){return LR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},LR.apply(this,arguments)}function Lht(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function bye(e){var t=e.source,n=e.target,r=e.x,s=e.y,a=e.percent;return function(o){var i=t(o),c=n(o),u=r(i),d=s(i),m=r(c),h=s(c),p=m-u,g=h-d,y=a*(p+g),v=a*(g-p),x=Ya();return x.moveTo(u,d),x.bezierCurveTo(u+y,d+v,m+v,h-y,m,h),x.toString()}}function Dht(e){var t=e.className,n=e.children,r=e.data,s=e.innerRef,a=e.path,o=e.percent,i=o===void 0?.2:o,c=e.x,u=c===void 0?So:c,d=e.y,m=d===void 0?Co:d,h=e.source,p=h===void 0?Eo:h,g=e.target,y=g===void 0?Mo:g,v=Lht(e,Oht),x=a||bye({source:p,target:y,x:u,y:m,percent:i});return n?A.createElement(A.Fragment,null,n({path:x})):A.createElement("path",LR({ref:s,className:B("visx-link visx-link-vertical-curve",t),d:x(r)||""},v))}var Fht=["className","children","data","innerRef","path","percent","x","y","source","target"];function DR(){return DR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DR.apply(this,arguments)}function Uht(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function _ye(e){var t=e.source,n=e.target,r=e.x,s=e.y,a=e.percent;return function(o){var i=t(o),c=n(o),u=r(i)-Math.PI/2,d=s(i),m=r(c)-Math.PI/2,h=s(c),p=Math.cos(u),g=Math.sin(u),y=Math.cos(m),v=Math.sin(m),x=d*p,b=d*g,_=h*y,w=h*v,S=_-x,C=w-b,E=a*(S+C),M=a*(C-S),T=Ya();return T.moveTo(x,b),T.bezierCurveTo(x+E,b+M,_+M,w-E,_,w),T.toString()}}function Bht(e){var t=e.className,n=e.children,r=e.data,s=e.innerRef,a=e.path,o=e.percent,i=o===void 0?.2:o,c=e.x,u=c===void 0?So:c,d=e.y,m=d===void 0?Co:d,h=e.source,p=h===void 0?Eo:h,g=e.target,y=g===void 0?Mo:g,v=Uht(e,Fht),x=a||_ye({source:p,target:y,x:u,y:m,percent:i});return n?A.createElement(A.Fragment,null,n({path:x})):A.createElement("path",DR({ref:s,className:B("visx-link visx-link-radial-curve",t),d:x(r)||""},v))}var Vht=["className","children","innerRef","data","path","x","y","source","target"];function FR(){return FR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},FR.apply(this,arguments)}function $ht(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function wye(e){var t=e.source,n=e.target,r=e.x,s=e.y;return function(a){var o=t(a),i=n(a),c=r(o),u=s(o),d=r(i),m=s(i),h=Ya();return h.moveTo(c,u),h.lineTo(d,m),h.toString()}}function Wht(e){var t=e.className,n=e.children,r=e.innerRef,s=e.data,a=e.path,o=e.x,i=o===void 0?Co:o,c=e.y,u=c===void 0?So:c,d=e.source,m=d===void 0?Eo:d,h=e.target,p=h===void 0?Mo:h,g=$ht(e,Vht),y=a||wye({source:m,target:p,x:i,y:u});return n?A.createElement(A.Fragment,null,n({path:y})):A.createElement("path",FR({ref:r,className:B("visx-link visx-link-horizontal-line",t),d:y(s)||""},g))}var Hht=["className","innerRef","data","path","x","y","source","target","children"];function UR(){return UR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},UR.apply(this,arguments)}function zht(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Sye(e){var t=e.source,n=e.target,r=e.x,s=e.y;return function(a){var o=t(a),i=n(a),c=r(o),u=s(o),d=r(i),m=s(i),h=Ya();return h.moveTo(c,u),h.lineTo(d,m),h.toString()}}function Ght(e){var t=e.className,n=e.innerRef,r=e.data,s=e.path,a=e.x,o=a===void 0?So:a,i=e.y,c=i===void 0?Co:i,u=e.source,d=u===void 0?Eo:u,m=e.target,h=m===void 0?Mo:m,p=e.children,g=zht(e,Hht),y=s||Sye({source:d,target:h,x:o,y:c});return p?A.createElement(A.Fragment,null,p({path:y})):A.createElement("path",UR({ref:n,className:B("visx-link visx-link-vertical-line",t),d:y(r)||""},g))}var qht=["className","innerRef","data","path","x","y","source","target","children"];function BR(){return BR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},BR.apply(this,arguments)}function Kht(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Cye(e){var t=e.source,n=e.target,r=e.x,s=e.y;return function(a){var o=t(a),i=n(a),c=r(o)-Math.PI/2,u=s(o),d=r(i)-Math.PI/2,m=s(i),h=Math.cos(c),p=Math.sin(c),g=Math.cos(d),y=Math.sin(d),v=Ya();return v.moveTo(u*h,u*p),v.lineTo(m*g,m*y),v.toString()}}function Yht(e){var t=e.className,n=e.innerRef,r=e.data,s=e.path,a=e.x,o=a===void 0?So:a,i=e.y,c=i===void 0?Co:i,u=e.source,d=u===void 0?Eo:u,m=e.target,h=m===void 0?Mo:m,p=e.children,g=Kht(e,qht),y=s||Cye({source:d,target:h,x:o,y:c});return p?A.createElement(A.Fragment,null,p({path:y})):A.createElement("path",BR({ref:n,className:B("visx-link visx-link-radial-line",t),d:y(r)||""},g))}var Qht=["className","innerRef","data","path","percent","x","y","source","target","children"];function VR(){return VR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},VR.apply(this,arguments)}function Xht(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Eye(e){var t=e.source,n=e.target,r=e.x,s=e.y,a=e.percent;return function(o){var i=t(o),c=n(o),u=r(i),d=s(i),m=r(c),h=s(c),p=Ya();return p.moveTo(u,d),p.lineTo(u+(m-u)*a,d),p.lineTo(u+(m-u)*a,h),p.lineTo(m,h),p.toString()}}function Zht(e){var t=e.className,n=e.innerRef,r=e.data,s=e.path,a=e.percent,o=a===void 0?.5:a,i=e.x,c=i===void 0?Co:i,u=e.y,d=u===void 0?So:u,m=e.source,h=m===void 0?Eo:m,p=e.target,g=p===void 0?Mo:p,y=e.children,v=Xht(e,Qht),x=s||Eye({source:h,target:g,x:c,y:d,percent:o});return y?A.createElement(A.Fragment,null,y({path:x})):A.createElement("path",VR({ref:n,className:B("visx-link visx-link-horizontal-step",t),d:x(r)||""},v))}var Jht=["className","innerRef","data","path","percent","x","y","source","target","children"];function $R(){return $R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$R.apply(this,arguments)}function ept(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Mye(e){var t=e.source,n=e.target,r=e.x,s=e.y,a=e.percent;return function(o){var i=t(o),c=n(o),u=r(i),d=s(i),m=r(c),h=s(c),p=Ya();return p.moveTo(u,d),p.lineTo(u,d+(h-d)*a),p.lineTo(m,d+(h-d)*a),p.lineTo(m,h),p.toString()}}function tpt(e){var t=e.className,n=e.innerRef,r=e.data,s=e.path,a=e.percent,o=a===void 0?.5:a,i=e.x,c=i===void 0?So:i,u=e.y,d=u===void 0?Co:u,m=e.source,h=m===void 0?Eo:m,p=e.target,g=p===void 0?Mo:p,y=e.children,v=ept(e,Jht),x=s||Mye({source:h,target:g,x:c,y:d,percent:o});return y?A.createElement(A.Fragment,null,y({path:x})):A.createElement("path",$R({ref:n,className:B("visx-link visx-link-vertical-step",t),d:x(r)||""},v))}var npt=["className","innerRef","data","path","x","y","source","target","children"];function WR(){return WR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},WR.apply(this,arguments)}function rpt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Tye(e){var t=e.source,n=e.target,r=e.x,s=e.y;return function(a){var o=t(a),i=n(a),c=r(o),u=s(o),d=r(i),m=s(i),h=c-Math.PI/2,p=u,g=d-Math.PI/2,y=m,v=Math.cos(h),x=Math.sin(h),b=Math.cos(g),_=Math.sin(g),w=Math.abs(g-h)>Math.PI?g<=h:g>h;return`
      M`+p*v+","+p*x+`
      A`+p+","+p+",0,0,"+(w?1:0)+","+p*b+","+p*_+`
      L`+y*b+","+y*_+`
    `}}function spt(e){var t=e.className,n=e.innerRef,r=e.data,s=e.path,a=e.x,o=a===void 0?So:a,i=e.y,c=i===void 0?Co:i,u=e.source,d=u===void 0?Eo:u,m=e.target,h=m===void 0?Mo:m,p=e.children,g=rpt(e,npt),y=s||Tye({source:d,target:h,x:o,y:c});return p?A.createElement(A.Fragment,null,p({path:y})):A.createElement("path",WR({ref:n,className:B("visx-link visx-link-radial-step",t),d:y(r)||""},g))}var apt=["sides","size","center","rotate","className","children","innerRef","points"];function HR(){return HR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},HR.apply(this,arguments)}function opt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}var kye={x:0,y:0},Nye=function(t){var n=t.sides,r=n===void 0?4:n,s=t.size,a=s===void 0?25:s,o=t.center,i=o===void 0?kye:o,c=t.rotate,u=c===void 0?0:c,d=t.side,m=360/r*d-u,h=pye(m);return{x:i.x+a*Math.cos(h),y:i.y+a*Math.sin(h)}},Aye=function(t){var n=t.sides,r=t.size,s=t.center,a=t.rotate;return new Array(n).fill(0).map(function(o,i){return Nye({sides:n,size:r,center:s,rotate:a,side:i})})};function ipt(e){var t=e.sides,n=t===void 0?4:t,r=e.size,s=r===void 0?25:r,a=e.center,o=a===void 0?kye:a,i=e.rotate,c=i===void 0?0:i,u=e.className,d=e.children,m=e.innerRef,h=e.points,p=opt(e,apt),g=h||Aye({sides:n,size:s,center:o,rotate:c}).map(function(y){var v=y.x,x=y.y;return[v,x]});return d?A.createElement(A.Fragment,null,d({points:g})):A.createElement("polygon",HR({ref:m,className:B("visx-polygon",u),points:g.join(" ")},p))}var lpt=["className","innerRef"];function zR(){return zR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zR.apply(this,arguments)}function cpt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function upt(e){var t=e.className,n=e.innerRef,r=cpt(e,lpt);return A.createElement("circle",zR({ref:n,className:B("visx-circle",t)},r))}var aQ="http://www.w3.org/2000/svg";function dpt(e){var t=document.getElementById(e);if(!t){var n=document.createElementNS(aQ,"svg");n.setAttribute("aria-hidden","true"),n.style.opacity="0",n.style.width="0",n.style.height="0",n.style.position="absolute",n.style.top="-100%",n.style.left="-100%",n.style.pointerEvents="none",t=document.createElementNS(aQ,"path"),t.setAttribute("id",e),n.appendChild(t),document.body.appendChild(n)}return t}var fpt="__visx_splitpath_svg_path_measurement_id",oQ=function(){return!0};function mpt(e){var t=e.path,n=e.pointsInSegments,r=e.segmentation,s=r===void 0?"x":r,a=e.sampleRate,o=a===void 0?1:a;try{var i=dpt(fpt);i.setAttribute("d",t);var c=i.getTotalLength(),u=n.length,d=n.map(function(){return[]});if(s==="x"||s==="y")for(var m=n.map(function(P){var R;return(R=P.find(function(k){return typeof k[s]=="number"}))==null?void 0:R[s]}),h=i.getPointAtLength(0),p=i.getPointAtLength(c),g=p[s]>h[s],y=g?m.map(function(P){return typeof P>"u"?oQ:function(R){return R>=P}}):m.map(function(P){return typeof P>"u"?oQ:function(R){return R<=P}}),v=0,x=0;x<=c;x+=o){for(var b=i.getPointAtLength(x),_=b[s];v<u-1&&y[v+1](_);)v+=1;d[v].push(b)}else{var w=n.map(function(P){return P.length}),S=w.reduce(function(P,R){return P+R},0),C=c/Math.max(1,S-1),E=w.slice(0,u-1);E.unshift(0);for(var M=2;M<u;M+=1)E[M]+=E[M-1];for(var T=0;T<u;T+=1)E[T]*=C;for(var I=0,j=0;j<=c;j+=o){for(var N=i.getPointAtLength(j);I<u-1&&j>=E[I+1];)I+=1;d[I].push(N)}}return d}catch{return[]}}function GR(){return GR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},GR.apply(this,arguments)}var hpt=function(t){return t.x||0},ppt=function(t){return t.y||0};function Pye(e){var t=e.children,n=e.className,r=e.curve,s=e.defined,a=e.segmentation,o=e.sampleRate,i=e.segments,c=e.x,u=e.y,d=e.styles,m=f.useMemo(function(){var g=typeof c=="number"||typeof c>"u"?function(){return c}:c,y=typeof u=="number"||typeof u>"u"?function(){return u}:u;return i.map(function(v){return v.map(function(x,b){return{x:g(x,b,v),y:y(x,b,v)}})})},[c,u,i]),h=f.useMemo(function(){var g=Cf({x:c,y:u,defined:s,curve:r});return g(i.flat())||""},[c,u,s,r,i]),p=f.useMemo(function(){return mpt({path:h,segmentation:a,pointsInSegments:m,sampleRate:o})},[h,a,m,o]);return A.createElement("g",null,p.map(function(g,y){return t?A.createElement(A.Fragment,{key:y},t({index:y,segment:g,styles:d[y]||d[y%d.length]})):A.createElement(dye,GR({key:y,className:n,data:g,x:hpt,y:ppt},d[y]||d[y%d.length]))}))}Pye.propTypes={segments:we.arrayOf(we.array).isRequired,styles:we.array.isRequired,children:we.func,className:we.string};const gpt=Object.freeze(Object.defineProperty({__proto__:null,Arc:Omt,Area:Xmt,AreaClosed:Ph,AreaStack:sht,Bar:Hp,BarGroup:mht,BarGroupHorizontal:ght,BarRounded:uht,BarStack:xht,BarStackHorizontal:wht,Circle:upt,Line:pE,LinePath:dye,LineRadial:Kmt,LinkHorizontal:Eht,LinkHorizontalCurve:jht,LinkHorizontalLine:Wht,LinkHorizontalStep:Zht,LinkRadial:Pht,LinkRadialCurve:Bht,LinkRadialLine:Yht,LinkRadialStep:spt,LinkVertical:kht,LinkVerticalCurve:Dht,LinkVerticalLine:Ght,LinkVerticalStep:tpt,Pie:Vmt,Polygon:ipt,STACK_OFFSETS:cw,STACK_OFFSET_NAMES:Rmt,STACK_ORDERS:lw,STACK_ORDER_NAMES:Pmt,SplitLinePath:Pye,Stack:fye,arc:Q7,area:hE,degreesToRadians:pye,getPoint:Nye,getPoints:Aye,line:Cf,pathHorizontalCurve:xye,pathHorizontalDiagonal:gye,pathHorizontalLine:wye,pathHorizontalStep:Eye,pathRadialCurve:_ye,pathRadialDiagonal:vye,pathRadialLine:Cye,pathRadialStep:Tye,pathVerticalCurve:bye,pathVerticalDiagonal:yye,pathVerticalLine:Sye,pathVerticalStep:Mye,pie:lye,radialLine:cye,stack:uye,stackOffset:mE,stackOrder:fE},Symbol.toStringTag,{value:"Module"})),iQ="pplx://www.pplx.com";function Rye({href:e,inApp:t,queryParams:n}){if(!t||e==null)return e;const r=new URL(e,iQ);return n?.forEach((s,a)=>{r.searchParams.get(a)||r.searchParams.set(a,s??"")}),r.pathname.startsWith("/app")||(r.pathname.startsWith("/")?r.pathname=`/app${r.pathname}`:r.pathname=`/app/${r.pathname}`),r.href.replace(iQ,"")}const yE=A.memo(({children:e,href:t,...n})=>{const{inApp:r}=ep(),s=Ht();return l.jsx(at,{...n,href:Rye({href:t,inApp:r,queryParams:s}),children:e})});yE.displayName="CanonicalLink";const ypt=A.memo(e=>e.href?l.jsx(yE,{...e}):e.children);ypt.displayName="CanonicalLinkMaybe";const vpt=(e,t)=>{const{value:n,loading:r}=Ut({flag:"finance-india",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},xpt="pplx.finance-country",vE={US:"US",IN:"IN"},Iye=e=>vE[e?.toUpperCase()],bpt=e=>Iye(e)??vE.US,jye=f.createContext({country:vE.US,setCountry:()=>{},enabled:!1}),_pt=()=>{const e=f.useContext(jye);if(!e)throw new Error("useFinanceCountry must be used within a FinanceCountryProvider");return e},wpt={US:J({defaultMessage:"US Markets",id:"7T1wl9MB1D"}),IN:J({defaultMessage:"India Markets",id:"ty1NgqpFg/"})},f$t=e=>wpt[e]??J({defaultMessage:"Markets",id:"sITCHuqY3F"}),m$t=e=>{switch(e){case"IN":return"Asia/Kolkata";case"US":default:return"America/New_York"}},h$t=({children:e})=>{const t=fp(),[n,r]=jC(xpt,null),s=Ot(),{variation:a}=vpt(!0,{userEmail:s?.user?.email??""}),o=Iye(n)??bpt(t);return l.jsx(jye.Provider,{value:{country:a?o:vE.US,setCountry:r,enabled:a},children:e})},gn=0,dn=1,ln="finance",p$t=(e,t)=>["finance/topMovers",e,t];async function g$t({marketType:e,country:t,headers:n}){const r=await ne.GET("/rest/finance/top-movers/{market_type}",ln,{params:{path:{market_type:e},query:{country:t}},headers:n,timeoutMs:gn,numRetries:dn});if(r.error)throw new Error("Failed to fetch top movers.",{cause:r.error});return r.data}const y$t=async({symbol:e,category:t,period:n})=>{const r=await ne.POST("/rest/finance/financials/{market_identifier}/analysis",ln,{params:{path:{market_identifier:e}},body:{category:t,period:n},timeoutMs:1e4,numRetries:dn});if(r.error)throw new Error(`Failed to fetch financial insights for ${e}`,{cause:r.error});return r.data},v$t=async({symbol:e,period:t,interval:n,headers:r})=>{const s=await ne.GET("/rest/finance/history/{market_identifier}",ln,{params:{query:{period:t??"1d",interval:n},path:{market_identifier:e}},headers:r,timeoutMs:gn,numRetries:dn});if(s.error)throw new Error(`Failed to fetch price history for ${e}`,{cause:s.error});return s.data},x$t=e=>["finance/coin50/history",e],b$t=async({period:e})=>{const t=await ne.GET("/rest/finance/history/COIN50USD",ln,{params:{query:{period:e??"1d"}},timeoutMs:gn,numRetries:dn});if(t.error)throw new Error("Failed to fetch price history for COIN50USD",{cause:t.error});return t.data},_$t=async({symbol:e,period:t,interval:n})=>{const r=await ne.GET("/rest/finance/history/{market_identifier}/csv",ln,{parseAs:"blob",params:{path:{market_identifier:e},query:{period:t??"1d",interval:n}}});if(r.error)throw new Error(`Failed to fetch price history for ${e}`,{cause:r.error});return r.data},Spt=({symbol:e,withHistory:t,historyAfterHours:n,historyPeriod:r,historyOffset:s})=>["finance/quote",e,t??null,n??null,r??null,s??null],Oye=async({symbol:e,withHistory:t=!1,historyAfterHours:n=!0,historyPeriod:r,historyOffset:s,headers:a})=>{const o=await ne.GET("/rest/finance/quote/{market_identifier}",ln,{params:{path:{market_identifier:e},query:{with_history:t,history_period:r,history_offset:s,history_after_hours:n}},headers:a,timeoutMs:gn,numRetries:dn});if(o.response.status===404)return null;if(o.error)throw new Error(`Failed to fetch quote for ${e}`,{cause:o.error});return o.data},w$t=e=>["finance/profile",e],S$t=async({symbol:e,headers:t})=>{const n=await ne.GET("/rest/finance/profile/{market_identifier}",ln,{params:{path:{market_identifier:e}},headers:t,timeoutMs:gn,numRetries:dn});if(n.response.status===404)return null;if(n.error)throw new Error(`Failed to fetch profile for ${e}`,{cause:n.error});return n.data},C$t=e=>["finance/profile/description",e],E$t=async({symbol:e,headers:t})=>{const n=await ne.GET("/rest/finance/profile/{market_identifier}/description",ln,{params:{path:{market_identifier:e}},headers:t,timeoutMs:gn,numRetries:dn});if(n.error)throw new Error(`Failed to fetch profile description for ${e}`,{cause:n.error});return n.data},M$t=(e,t,n="",r="",s)=>["finance/history",t,e,n,r,s],T$t=async(e,t)=>{const n=await ne.GET("/rest/finance/financials/{market_identifier}",ln,{params:{path:{market_identifier:e}},headers:t,timeoutMs:gn,numRetries:dn});if(n.error)throw new Error(`Failed to fetch financials for ${e}`,{cause:n.error});return n.data},k$t=e=>["finance/holders",e],N$t=async(e,t)=>{const n=await ne.GET("/rest/finance/holders/{market_identifier}",ln,{params:{path:{market_identifier:e}},headers:t,timeoutMs:gn,numRetries:dn});if(n.error)throw new Error(`Failed to fetch holders for ${e}`,{cause:n.error});return n.data};function A$t(e,t){return["finance/peers",e,t]}async function P$t({symbol:e,headers:t,index:n}){const r=await ne.GET("/rest/finance/peers/{market_identifier}",ln,{params:{path:{market_identifier:e},query:{with_index:n}},headers:t,timeoutMs:gn,numRetries:dn});if(r.error)throw new Error(`Failed to fetch peers for ${e}`,{cause:r.error});return r.data}async function R$t({symbol:e,headers:t}){const n=await ne.GET("/rest/finance/bulls-vs-bears-summary/{market_identifier}",ln,{params:{path:{market_identifier:e}},headers:t,timeoutMs:gn,numRetries:dn});if(n.error)throw new Error(`Failed to fetch bulls vs bears analysis for ${e}`,{cause:n.error});return n.data}async function I$t({symbol:e,headers:t}){const n=await ne.GET("/rest/finance/timeline/{market_identifier}",ln,{params:{path:{market_identifier:e}},headers:t,timeoutMs:0});if(n.error)throw new Error(`Failed to fetch timeline for ${e}`,{cause:n.error});return n.data}const j$t=(e,t)=>["finance/transcript",e,t];async function O$t({eventId:e,symbol:t,headers:n}){const r=await ne.GET("/rest/finance/earnings/{market_identifier}/transcript/{event_id}",ln,{headers:n,params:{path:{market_identifier:t,event_id:e}},timeoutMs:gn,numRetries:dn});if(r.response.status===404)return null;if(r.error)throw new Error(`Failed to fetch earnings transcript for ${t}`,{cause:r.error});return r.data}const L$t=(e,t)=>["finance/analysis",e,t];async function D$t({eventId:e,symbol:t,headers:n}){const r=await ne.GET("/rest/finance/earnings/{market_identifier}/analysis/{event_id}",ln,{params:{path:{market_identifier:t,event_id:e}},headers:n,timeoutMs:gn,numRetries:dn});if(r.error)throw new Error(`Failed to fetch earnings analysis for ${t}`,{cause:r.error});return r.data}const F$t=(e,t)=>["finance/documents",e,t];async function U$t({eventId:e,symbol:t,headers:n}){const r=await ne.GET("/rest/finance/earnings/{market_identifier}/documents/{event_id}",ln,{params:{path:{market_identifier:t,event_id:e}},headers:n,timeoutMs:gn,numRetries:dn});if(r.error)throw new Error(`Failed to fetch earnings documents for ${t}`,{cause:r.error});return r.data}const B$t=e=>["finance/documents",e];async function V$t({symbol:e,headers:t}){const n=await ne.GET("/rest/finance/documents/{market_identifier}",ln,{params:{path:{market_identifier:e}},headers:t,timeoutMs:gn,numRetries:dn});if(n.error)throw new Error(`Failed to fetch documents for ${e}`,{cause:n.error});return n.data}const $$t=async(e,t)=>{const n=await ne.GET("/rest/finance/documents/download/{document_id}",ln,{params:{path:{document_id:e}},headers:t,timeoutMs:gn,numRetries:dn});if(n.error)throw new Error(`Failed to fetch document download url for ${e}`,{cause:n.error});return{errorCode:n.data?.error_code??null,presignedUrl:n.data?.presigned_url??null}},W$t=e=>["finance/earnings",e];async function H$t({symbol:e,headers:t}){const n=await ne.GET("/rest/finance/earnings/{market_identifier}",ln,{params:{path:{market_identifier:e}},headers:t,timeoutMs:gn,numRetries:dn});if(n.response.status===404)return[];if(n.error)throw new Error(`Failed to fetch earnings for ${e}`,{cause:n.error});return n.data}async function z$t({marketType:e,headers:t,country:n}){const r=await ne.GET("/rest/finance/{market_type}",ln,{headers:t,params:{path:{market_type:e},query:{country:n}},timeoutMs:gn,numRetries:dn});if(r.error)throw new Error(`Failed to fetch finance page shared data for ${e}`,{cause:r.error});return r.data}const Cpt=(e,t,n)=>["finance/top-indices",e,t,n];async function Ept({groupId:e,headers:t,historyPeriod:n,country:r}){const s=await ne.GET("/rest/finance/top-indices/{group_id}",ln,{headers:t,params:{path:{group_id:e},query:{with_history:!0,history_period:n,country:r}},timeoutMs:gn,numRetries:dn});if(s.error)throw new Error("Failed to fetch top indices",{cause:s.error});return s.data}const G$t=(e,t)=>["finance/watchlist-quotes",e??"",t??""];async function q$t({headers:e,country:t}){const n=await ne.GET("/rest/finance/watchlist-quotes",ln,{headers:e,timeoutMs:gn,numRetries:dn,params:{query:{country:t}}});if(n.error)throw new Error("Failed to fetch watchlist quotes",{cause:n.error});return n.data}async function K$t(){const e=await ne.GET("/rest/finance/equity-sectors",ln,{timeoutMs:gn,numRetries:dn});if(e.error)throw new Error("Failed to fetch equity sectors",{cause:e.error});return e.data}async function Y$t(){const e=await ne.GET("/rest/finance/fixed-income",ln,{timeoutMs:gn,numRetries:dn});if(e.error)throw new Error("Failed to fetch fixed income",{cause:e.error});return e.data}async function Q$t({marketType:e,country:t}){const n=await ne.GET("/rest/finance/market-sentiment/{market_type}",ln,{params:{path:{market_type:e},query:{country:t}},timeoutMs:gn,numRetries:dn});if(n.error)throw new Error("Failed to fetch market sentiment",{cause:n.error});return n.data}async function X$t({marketType:e,headers:t,country:n}){const r=await ne.GET("/rest/finance/top-z-scores/{market_type}",ln,{params:{path:{market_type:e},query:{country:n}},headers:t,timeoutMs:gn,numRetries:dn});if(r.error)throw new Error("Failed to fetch top z scores",{cause:r.error});return r.data}async function Z$t({marketIdentifier:e,locale:t}){const n=await ne.GET("/rest/finance/significant-movement-summary/{market_identifier}",ln,{params:{path:{market_identifier:e}},headers:{"Accept-Language":t},timeoutMs:gn,numRetries:dn});if(n.error)throw new Error("Failed to fetch significant movement summary",{cause:n.error});return n.data}const J$t=e=>["finance/news",e];async function eWt({symbol:e,headers:t}){const n=await ne.GET("/rest/finance/news/{market_identifier}",ln,{params:{path:{market_identifier:e}},headers:t,timeoutMs:gn,numRetries:dn});if(n.error)throw new Error("Failed to fetch news",{cause:n.error});return n.data}async function tWt({marketType:e,country:t,headers:n}){const r=await ne.GET("/rest/finance/market-summary/{market_type}",ln,{params:{path:{market_type:e},query:{country:t}},headers:n,timeoutMs:gn,numRetries:dn});if(r.error)throw new Error("Failed to fetch market summary",{cause:r.error});return r.data}async function nWt({marketType:e,headers:t,country:n}){const r=await ne.GET("/rest/finance/general-news/{market_type}",ln,{params:{path:{market_type:e},query:{country:n}},headers:t,timeoutMs:gn,numRetries:dn});if(r.error)throw new Error("Failed to fetch general news",{cause:r.error});return r.data}const rWt=(e,t,n)=>["finance/crypto-leaderboard",e,t,n];async function sWt({sortBy:e="dollarVolume24h",orderBy:t="desc",provider:n="coinbase",headers:r}){const s=await ne.GET("/rest/finance/leaderboard/crypto",ln,{params:{query:{sort_by:e,order_by:t,provider:n}},timeoutMs:gn,numRetries:dn,headers:r});if(s.error)throw new Error("Failed to fetch crypto leaderboard",{cause:s.error});return s.data}const aWt=(e,t,n,r)=>["finance/earnings/schedule",e,t,n,r];async function oWt(e,t,n,r){const s=await ne.GET("/rest/finance/earnings/schedule",ln,{params:{query:{start_date:e,end_date:t,timezone:n,country:r}},timeoutMs:gn,numRetries:dn});if(s.error)throw new Error("Failed to fetch earnings schedule",{cause:s.error});return s.data}const iWt=(e,t,n)=>["finance/earnings",e,t,n];async function lWt(e,t,n){const r=await ne.GET("/rest/finance/earnings",ln,{params:{query:{date:e,timezone:t,country:n}},timeoutMs:gn,numRetries:dn});if(r.error)throw new Error("Failed to fetch earnings schedule",{cause:r.error});return r.data}async function cWt(){const{data:e,error:t}=await ne.GET("/rest/autosuggest/finance/list-autosuggest",ln,{params:{query:{query:""}},timeoutMs:gn,numRetries:dn});if(t)throw new Error("Failed to fetch trending companies",{cause:t});return e.results.filter(n=>n.category==="ticker")}const uWt=(e,t)=>["finance/screener",e,t];async function dWt({query:e,currency:t,headers:n}){const r=await ne.GET("/rest/finance/screener",ln,{params:{query:{query:e,currency:t||void 0}},headers:n,timeoutMs:gn,numRetries:dn});if(r.error)throw new Error("Failed to fetch screener data.",{cause:r.error});return r.data}const fWt=(e,t)=>["finance-autosuggest",e,t],Mpt=async({query:e,reason:t,country:n})=>{try{const{data:r,error:s}=await ne.GET("/rest/autosuggest/finance/list-autosuggest",t,{params:{query:{query:e,country:n}},timeoutMs:0});if(s)throw new Error("Failed to fetch finance suggestions.",{cause:s});return r.results??ce}catch(r){return ee.error(r),[]}},Tpt=(e,t,n)=>["finance/currency-exchange",e,t,n];async function kpt({sourceCurrency:e,targetCurrency:t,amount:n=1,headers:r}){const s=await ne.GET("/rest/finance/currency-exchange",ln,{params:{query:{source_currency:e,target_currency:t,amount:n}},headers:r,timeoutMs:gn,numRetries:dn});if(s.error)throw new Error(`Failed to convert ${e} to ${t}`,{cause:s.error});return s.data}const X7=A.memo(({value:e,format:t,suffix:n,animated:r=!0})=>{const{locale:s}=X();return r?l.jsx(nu,{value:e,format:t,suffix:n}):l.jsx("span",{children:Intl.NumberFormat(s,t).format(e)})});X7.displayName="FinanceNumberFlow";const Npt=e=>e===0?"":e>0?"+":"-",Apt=(e,t)=>e===0||!t?null:e>0?ql:rTe,Ppt=e=>e===0?"light":e>0?"positive":"negative",dw=A.memo(({change:e,variant:t="small",includeIcon:n=!1,className:r,animated:s=!0,background:a=!0,mono:o=!0,format:i={style:"percent",minimumFractionDigits:0,maximumFractionDigits:e/100>1?0:2}})=>{const c=Apt(e,n);return l.jsxs(D,{variant:t,color:Ppt(e),className:B("flex shrink-0 grow-0 items-center justify-center gap-[0.1em] rounded text-center font-mono",{"bg-positive/10":e>0&&a,"bg-negative/10":e<0&&a,"bg-offsetPlus":e===0&&a,"px-[0.6em] py-[0.15em]":a,"!pl-[0.3em]":a&&n&&e!==0},r),children:[c?l.jsx(be,{icon:c,className:B("inline-flex size-[1.2em]",{"!mt-px":o})}):l.jsx("span",{className:o?"font-mono":"",children:Npt(e)}),l.jsx("span",{className:o?"font-mono":"",children:l.jsx(X7,{value:Math.abs(e)/100,format:i,animated:s})})]})});dw.displayName="FinancePriceChange";var Z7=x1(),$t=e=>v1(e,Z7),J7=x1();$t.write=e=>v1(e,J7);var xE=x1();$t.onStart=e=>v1(e,xE);var eD=x1();$t.onFrame=e=>v1(e,eD);var tD=x1();$t.onFinish=e=>v1(e,tD);var $m=[];$t.setTimeout=(e,t)=>{const n=$t.now()+t,r=()=>{const a=$m.findIndex(o=>o.cancel==r);~a&&$m.splice(a,1),Qc-=~a?1:0},s={time:n,handler:e,cancel:r};return $m.splice(Lye(n),0,s),Qc+=1,Dye(),s};var Lye=e=>~(~$m.findIndex(t=>t.time>e)||~$m.length);$t.cancel=e=>{xE.delete(e),eD.delete(e),tD.delete(e),Z7.delete(e),J7.delete(e)};$t.sync=e=>{qR=!0,$t.batchedUpdates(e),qR=!1};$t.throttle=e=>{let t;function n(){try{e(...t)}finally{t=null}}function r(...s){t=s,$t.onStart(n)}return r.handler=e,r.cancel=()=>{xE.delete(n),t=null},r};var nD=typeof window<"u"?window.requestAnimationFrame:()=>{};$t.use=e=>nD=e;$t.now=typeof performance<"u"?()=>performance.now():Date.now;$t.batchedUpdates=e=>e();$t.catch=console.error;$t.frameLoop="always";$t.advance=()=>{$t.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):Uye()};var Yc=-1,Qc=0,qR=!1;function v1(e,t){qR?(t.delete(e),e(0)):(t.add(e),Dye())}function Dye(){Yc<0&&(Yc=0,$t.frameLoop!=="demand"&&nD(Fye))}function Rpt(){Yc=-1}function Fye(){~Yc&&(nD(Fye),$t.batchedUpdates(Uye))}function Uye(){const e=Yc;Yc=$t.now();const t=Lye(Yc);if(t&&(Bye($m.splice(0,t),n=>n.handler()),Qc-=t),!Qc){Rpt();return}xE.flush(),Z7.flush(e?Math.min(64,Yc-e):16.667),eD.flush(),J7.flush(),tD.flush()}function x1(){let e=new Set,t=e;return{add(n){Qc+=t==e&&!e.has(n)?1:0,e.add(n)},delete(n){return Qc-=t==e&&e.has(n)?1:0,e.delete(n)},flush(n){t.size&&(e=new Set,Qc-=t.size,Bye(t,r=>r(n)&&e.add(r)),Qc+=e.size,t=e)}}}function Bye(e,t){e.forEach(n=>{try{t(n)}catch(r){$t.catch(r)}})}var Ipt=Object.defineProperty,jpt=(e,t)=>{for(var n in t)Ipt(e,n,{get:t[n],enumerable:!0})},Xo={};jpt(Xo,{assign:()=>Lpt,colors:()=>ru,createStringInterpolator:()=>sD,skipAnimation:()=>$ye,to:()=>Vye,willAdvance:()=>aD});function KR(){}var Opt=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),Le={arr:Array.isArray,obj:e=>!!e&&e.constructor.name==="Object",fun:e=>typeof e=="function",str:e=>typeof e=="string",num:e=>typeof e=="number",und:e=>e===void 0};function Nl(e,t){if(Le.arr(e)){if(!Le.arr(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t}var Lt=(e,t)=>e.forEach(t);function rl(e,t,n){if(Le.arr(e)){for(let r=0;r<e.length;r++)t.call(n,e[r],`${r}`);return}for(const r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r)}var qs=e=>Le.und(e)?[]:Le.arr(e)?e:[e];function Wy(e,t){if(e.size){const n=Array.from(e);e.clear(),Lt(n,t)}}var cy=(e,...t)=>Wy(e,n=>n(...t)),rD=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),sD,Vye,ru=null,$ye=!1,aD=KR,Lpt=e=>{e.to&&(Vye=e.to),e.now&&($t.now=e.now),e.colors!==void 0&&(ru=e.colors),e.skipAnimation!=null&&($ye=e.skipAnimation),e.createStringInterpolator&&(sD=e.createStringInterpolator),e.requestAnimationFrame&&$t.use(e.requestAnimationFrame),e.batchedUpdates&&($t.batchedUpdates=e.batchedUpdates),e.willAdvance&&(aD=e.willAdvance),e.frameLoop&&($t.frameLoop=e.frameLoop)},Hy=new Set,ao=[],Tk=[],fw=0,bE={get idle(){return!Hy.size&&!ao.length},start(e){fw>e.priority?(Hy.add(e),$t.onStart(Dpt)):(Wye(e),$t(YR))},advance:YR,sort(e){if(fw)$t.onFrame(()=>bE.sort(e));else{const t=ao.indexOf(e);~t&&(ao.splice(t,1),Hye(e))}},clear(){ao=[],Hy.clear()}};function Dpt(){Hy.forEach(Wye),Hy.clear(),$t(YR)}function Wye(e){ao.includes(e)||Hye(e)}function Hye(e){ao.splice(Fpt(ao,t=>t.priority>e.priority),0,e)}function YR(e){const t=Tk;for(let n=0;n<ao.length;n++){const r=ao[n];fw=r.priority,r.idle||(aD(r),r.advance(e),r.idle||t.push(r))}return fw=0,Tk=ao,Tk.length=0,ao=t,ao.length>0}function Fpt(e,t){const n=e.findIndex(t);return n<0?e.length:n}var Upt={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Fo="[-+]?\\d*\\.?\\d+",mw=Fo+"%";function _E(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}var Bpt=new RegExp("rgb"+_E(Fo,Fo,Fo)),Vpt=new RegExp("rgba"+_E(Fo,Fo,Fo,Fo)),$pt=new RegExp("hsl"+_E(Fo,mw,mw)),Wpt=new RegExp("hsla"+_E(Fo,mw,mw,Fo)),Hpt=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,zpt=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Gpt=/^#([0-9a-fA-F]{6})$/,qpt=/^#([0-9a-fA-F]{8})$/;function Kpt(e){let t;return typeof e=="number"?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=Gpt.exec(e))?parseInt(t[1]+"ff",16)>>>0:ru&&ru[e]!==void 0?ru[e]:(t=Bpt.exec(e))?(Hf(t[1])<<24|Hf(t[2])<<16|Hf(t[3])<<8|255)>>>0:(t=Vpt.exec(e))?(Hf(t[1])<<24|Hf(t[2])<<16|Hf(t[3])<<8|uQ(t[4]))>>>0:(t=Hpt.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=qpt.exec(e))?parseInt(t[1],16)>>>0:(t=zpt.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=$pt.exec(e))?(lQ(cQ(t[1]),hb(t[2]),hb(t[3]))|255)>>>0:(t=Wpt.exec(e))?(lQ(cQ(t[1]),hb(t[2]),hb(t[3]))|uQ(t[4]))>>>0:null}function kk(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function lQ(e,t,n){const r=n<.5?n*(1+t):n+t-n*t,s=2*n-r,a=kk(s,r,e+1/3),o=kk(s,r,e),i=kk(s,r,e-1/3);return Math.round(a*255)<<24|Math.round(o*255)<<16|Math.round(i*255)<<8}function Hf(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function cQ(e){return(parseFloat(e)%360+360)%360/360}function uQ(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(t*255)}function hb(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function dQ(e){let t=Kpt(e);if(t===null)return e;t=t||0;const n=(t&4278190080)>>>24,r=(t&16711680)>>>16,s=(t&65280)>>>8,a=(t&255)/255;return`rgba(${n}, ${r}, ${s}, ${a})`}var Yv=(e,t,n)=>{if(Le.fun(e))return e;if(Le.arr(e))return Yv({range:e,output:t,extrapolate:n});if(Le.str(e.output[0]))return sD(e);const r=e,s=r.output,a=r.range||[0,1],o=r.extrapolateLeft||r.extrapolate||"extend",i=r.extrapolateRight||r.extrapolate||"extend",c=r.easing||(u=>u);return u=>{const d=Qpt(u,a);return Ypt(u,a[d],a[d+1],s[d],s[d+1],c,o,i,r.map)}};function Ypt(e,t,n,r,s,a,o,i,c){let u=c?c(e):e;if(u<t){if(o==="identity")return u;o==="clamp"&&(u=t)}if(u>n){if(i==="identity")return u;i==="clamp"&&(u=n)}return r===s?r:t===n?e<=t?r:s:(t===-1/0?u=-u:n===1/0?u=u-t:u=(u-t)/(n-t),u=a(u),r===-1/0?u=-u:s===1/0?u=u+r:u=u*(s-r)+r,u)}function Qpt(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}var Xpt={linear:e=>e},Qv=Symbol.for("FluidValue.get"),Rh=Symbol.for("FluidValue.observers"),so=e=>!!(e&&e[Qv]),da=e=>e&&e[Qv]?e[Qv]():e,fQ=e=>e[Rh]||null;function Zpt(e,t){e.eventObserved?e.eventObserved(t):e(t)}function Xv(e,t){const n=e[Rh];n&&n.forEach(r=>{Zpt(r,t)})}var zye=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");Jpt(this,e)}},Jpt=(e,t)=>Gye(e,Qv,t);function zp(e,t){if(e[Qv]){let n=e[Rh];n||Gye(e,Rh,n=new Set),n.has(t)||(n.add(t),e.observerAdded&&e.observerAdded(n.size,t))}return t}function Zv(e,t){const n=e[Rh];if(n&&n.has(t)){const r=n.size-1;r?n.delete(t):e[Rh]=null,e.observerRemoved&&e.observerRemoved(r,t)}}var Gye=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),w_=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,egt=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,mQ=new RegExp(`(${w_.source})(%|[a-z]+)`,"i"),tgt=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,wE=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,qye=e=>{const[t,n]=ngt(e);if(!t||rD())return e;const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(n&&n.startsWith("--")){const s=window.getComputedStyle(document.documentElement).getPropertyValue(n);return s||e}else{if(n&&wE.test(n))return qye(n);if(n)return n}return e},ngt=e=>{const t=wE.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]},Nk,rgt=(e,t,n,r,s)=>`rgba(${Math.round(t)}, ${Math.round(n)}, ${Math.round(r)}, ${s})`,Kye=e=>{Nk||(Nk=ru?new RegExp(`(${Object.keys(ru).join("|")})(?!\\w)`,"g"):/^\b$/);const t=e.output.map(a=>da(a).replace(wE,qye).replace(egt,dQ).replace(Nk,dQ)),n=t.map(a=>a.match(w_).map(Number)),s=n[0].map((a,o)=>n.map(i=>{if(!(o in i))throw Error('The arity of each "output" value must be equal');return i[o]})).map(a=>Yv({...e,output:a}));return a=>{const o=!mQ.test(t[0])&&t.find(c=>mQ.test(c))?.replace(w_,"");let i=0;return t[0].replace(w_,()=>`${s[i++](a)}${o||""}`).replace(tgt,rgt)}},oD="react-spring: ",Yye=e=>{const t=e;let n=!1;if(typeof t!="function")throw new TypeError(`${oD}once requires a function parameter`);return(...r)=>{n||(t(...r),n=!0)}},sgt=Yye(console.warn);function agt(){sgt(`${oD}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var ogt=Yye(console.warn);function igt(){ogt(`${oD}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function SE(e){return Le.str(e)&&(e[0]=="#"||/\d/.test(e)||!rD()&&wE.test(e)||e in(ru||{}))}var Cd=rD()?f.useEffect:f.useLayoutEffect,lgt=()=>{const e=f.useRef(!1);return Cd(()=>(e.current=!0,()=>{e.current=!1}),[]),e};function iD(){const e=f.useState()[1],t=lgt();return()=>{t.current&&e(Math.random())}}function cgt(e,t){const[n]=f.useState(()=>({inputs:t,result:e()})),r=f.useRef(),s=r.current;let a=s;return a?t&&a.inputs&&ugt(t,a.inputs)||(a={inputs:t,result:e()}):a=n,f.useEffect(()=>{r.current=a,s==n&&(n.inputs=n.result=void 0)},[a]),a.result}function ugt(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}var lD=e=>f.useEffect(e,dgt),dgt=[];function QR(e){const t=f.useRef();return f.useEffect(()=>{t.current=e}),t.current}var Jv=Symbol.for("Animated:node"),fgt=e=>!!e&&e[Jv]===e,wi=e=>e&&e[Jv],cD=(e,t)=>Opt(e,Jv,t),CE=e=>e&&e[Jv]&&e[Jv].getPayload(),Qye=class{constructor(){cD(this,this)}getPayload(){return this.payload||[]}},b1=class extends Qye{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,Le.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new b1(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return Le.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,Le.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},e0=class extends b1{constructor(e){super(0),this._string=null,this._toString=Yv({output:[e,e]})}static create(e){return new e0(e)}getValue(){const e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(Le.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=Yv({output:[this.getValue(),e]})),this._value=0,super.reset()}},hw={dependencies:null},EE=class extends Qye{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return rl(this.source,(n,r)=>{fgt(n)?t[r]=n.getValue(e):so(n)?t[r]=da(n):e||(t[r]=n)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&Lt(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return rl(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){hw.dependencies&&so(e)&&hw.dependencies.add(e);const t=CE(e);t&&Lt(t,n=>this.add(n))}},Xye=class extends EE{constructor(e){super(e)}static create(e){return new Xye(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((n,r)=>n.setValue(e[r])).some(Boolean):(super.setValue(e.map(mgt)),!0)}};function mgt(e){return(SE(e)?e0:b1).create(e)}function XR(e){const t=wi(e);return t?t.constructor:Le.arr(e)?Xye:SE(e)?e0:b1}var hQ=(e,t)=>{const n=!Le.fun(e)||e.prototype&&e.prototype.isReactComponent;return f.forwardRef((r,s)=>{const a=f.useRef(null),o=n&&f.useCallback(g=>{a.current=ggt(s,g)},[s]),[i,c]=pgt(r,t),u=iD(),d=()=>{const g=a.current;if(n&&!g)return;(g?t.applyAnimatedValues(g,i.getValue(!0)):!1)===!1&&u()},m=new hgt(d,c),h=f.useRef();Cd(()=>(h.current=m,Lt(c,g=>zp(g,m)),()=>{h.current&&(Lt(h.current.deps,g=>Zv(g,h.current)),$t.cancel(h.current.update))})),f.useEffect(d,[]),lD(()=>()=>{const g=h.current;Lt(g.deps,y=>Zv(y,g))});const p=t.getComponentProps(i.getValue());return f.createElement(e,{...p,ref:o})})},hgt=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){e.type=="change"&&$t.write(this.update)}};function pgt(e,t){const n=new Set;return hw.dependencies=n,e.style&&(e={...e,style:t.createAnimatedStyle(e.style)}),e=new EE(e),hw.dependencies=null,[e,n]}function ggt(e,t){return e&&(Le.fun(e)?e(t):e.current=t),t}var pQ=Symbol.for("AnimatedComponent"),ygt=(e,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:n=s=>new EE(s),getComponentProps:r=s=>s}={})=>{const s={applyAnimatedValues:t,createAnimatedStyle:n,getComponentProps:r},a=o=>{const i=gQ(o)||"Anonymous";return Le.str(o)?o=a[o]||(a[o]=hQ(o,s)):o=o[pQ]||(o[pQ]=hQ(o,s)),o.displayName=`Animated(${i})`,o};return rl(e,(o,i)=>{Le.arr(e)&&(i=gQ(o)),a[i]=a(o)}),{animated:a}},gQ=e=>Le.str(e)?e:e&&Le.str(e.displayName)?e.displayName:Le.fun(e)&&e.name||null;function fa(e,...t){return Le.fun(e)?e(...t):e}var zy=(e,t)=>e===!0||!!(t&&e&&(Le.fun(e)?e(t):qs(e).includes(t))),Zye=(e,t)=>Le.obj(e)?t&&e[t]:e,Jye=(e,t)=>e.default===!0?e[t]:e.default?e.default[t]:void 0,vgt=e=>e,ME=(e,t=vgt)=>{let n=xgt;e.default&&e.default!==!0&&(e=e.default,n=Object.keys(e));const r={};for(const s of n){const a=t(e[s],s);Le.und(a)||(r[s]=a)}return r},xgt=["config","onProps","onStart","onChange","onPause","onResume","onRest"],bgt={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function _gt(e){const t={};let n=0;if(rl(e,(r,s)=>{bgt[s]||(t[s]=r,n++)}),n)return t}function uD(e){const t=_gt(e);if(t){const n={to:t};return rl(e,(r,s)=>s in t||(n[s]=r)),n}return{...e}}function t0(e){return e=da(e),Le.arr(e)?e.map(t0):SE(e)?Xo.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function eve(e){for(const t in e)return!0;return!1}function ZR(e){return Le.fun(e)||Le.arr(e)&&Le.obj(e[0])}function JR(e,t){e.ref?.delete(e),t?.delete(e)}function tve(e,t){t&&e.ref!==t&&(e.ref?.delete(e),t.add(e),e.ref=t)}var wgt={default:{tension:170,friction:26}},eI={...wgt.default,mass:1,damping:1,easing:Xpt.linear,clamp:!1},Sgt=class{constructor(){this.velocity=0,Object.assign(this,eI)}};function Cgt(e,t,n){n&&(n={...n},yQ(n,t),t={...n,...t}),yQ(e,t),Object.assign(e,t);for(const o in eI)e[o]==null&&(e[o]=eI[o]);let{frequency:r,damping:s}=e;const{mass:a}=e;return Le.und(r)||(r<.01&&(r=.01),s<0&&(s=0),e.tension=Math.pow(2*Math.PI/r,2)*a,e.friction=4*Math.PI*s*a/r),e}function yQ(e,t){if(!Le.und(t.decay))e.duration=void 0;else{const n=!Le.und(t.tension)||!Le.und(t.friction);(n||!Le.und(t.frequency)||!Le.und(t.damping)||!Le.und(t.mass))&&(e.duration=void 0,e.decay=void 0),n&&(e.frequency=void 0)}}var vQ=[],Egt=class{constructor(){this.changed=!1,this.values=vQ,this.toValues=null,this.fromValues=vQ,this.config=new Sgt,this.immediate=!1}};function nve(e,{key:t,props:n,defaultProps:r,state:s,actions:a}){return new Promise((o,i)=>{let c,u,d=zy(n.cancel??r?.cancel,t);if(d)p();else{Le.und(n.pause)||(s.paused=zy(n.pause,t));let g=r?.pause;g!==!0&&(g=s.paused||zy(g,t)),c=fa(n.delay||0,t),g?(s.resumeQueue.add(h),a.pause()):(a.resume(),h())}function m(){s.resumeQueue.add(h),s.timeouts.delete(u),u.cancel(),c=u.time-$t.now()}function h(){c>0&&!Xo.skipAnimation?(s.delayed=!0,u=$t.setTimeout(p,c),s.pauseQueue.add(m),s.timeouts.add(u)):p()}function p(){s.delayed&&(s.delayed=!1),s.pauseQueue.delete(m),s.timeouts.delete(u),e<=(s.cancelId||0)&&(d=!0);try{a.start({...n,callId:e,cancel:d},o)}catch(g){i(g)}}})}var dD=(e,t)=>t.length==1?t[0]:t.some(n=>n.cancelled)?Wm(e.get()):t.every(n=>n.noop)?rve(e.get()):Oo(e.get(),t.every(n=>n.finished)),rve=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),Oo=(e,t,n=!1)=>({value:e,finished:t,cancelled:n}),Wm=e=>({value:e,cancelled:!0,finished:!1});function sve(e,t,n,r){const{callId:s,parentId:a,onRest:o}=t,{asyncTo:i,promise:c}=n;return!a&&e===i&&!t.reset?c:n.promise=(async()=>{n.asyncId=s,n.asyncTo=e;const u=ME(t,(v,x)=>x==="onRest"?void 0:v);let d,m;const h=new Promise((v,x)=>(d=v,m=x)),p=v=>{const x=s<=(n.cancelId||0)&&Wm(r)||s!==n.asyncId&&Oo(r,!1);if(x)throw v.result=x,m(v),v},g=(v,x)=>{const b=new xQ,_=new bQ;return(async()=>{if(Xo.skipAnimation)throw n0(n),_.result=Oo(r,!1),m(_),_;p(b);const w=Le.obj(v)?{...v}:{...x,to:v};w.parentId=s,rl(u,(C,E)=>{Le.und(w[E])&&(w[E]=C)});const S=await r.start(w);return p(b),n.paused&&await new Promise(C=>{n.resumeQueue.add(C)}),S})()};let y;if(Xo.skipAnimation)return n0(n),Oo(r,!1);try{let v;Le.arr(e)?v=(async x=>{for(const b of x)await g(b)})(e):v=Promise.resolve(e(g,r.stop.bind(r))),await Promise.all([v.then(d),h]),y=Oo(r.get(),!0,!1)}catch(v){if(v instanceof xQ)y=v.result;else if(v instanceof bQ)y=v.result;else throw v}finally{s==n.asyncId&&(n.asyncId=a,n.asyncTo=a?i:void 0,n.promise=a?c:void 0)}return Le.fun(o)&&$t.batchedUpdates(()=>{o(y,r,r.item)}),y})()}function n0(e,t){Wy(e.timeouts,n=>n.cancel()),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var xQ=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},bQ=class extends Error{constructor(){super("SkipAnimationSignal")}},tI=e=>e instanceof fD,Mgt=1,fD=class extends zye{constructor(){super(...arguments),this.id=Mgt++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=wi(this);return e&&e.getValue()}to(...e){return Xo.to(this,e)}interpolate(...e){return agt(),Xo.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){Xv(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||bE.sort(this),Xv(this,{type:"priority",parent:this,priority:e})}},rf=Symbol.for("SpringPhase"),ave=1,ove=2,ive=4,Ak=e=>(e[rf]&ave)>0,Ic=e=>(e[rf]&ove)>0,$g=e=>(e[rf]&ive)>0,_Q=(e,t)=>t?e[rf]|=ove|ave:e[rf]&=-3,wQ=(e,t)=>t?e[rf]|=ive:e[rf]&=-5,Tgt=class extends fD{constructor(e,t){if(super(),this.animation=new Egt,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!Le.und(e)||!Le.und(t)){const n=Le.obj(e)?{...e}:{...t,from:e};Le.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(Ic(this)||this._state.asyncTo)||$g(this)}get goal(){return da(this.animation.to)}get velocity(){const e=wi(this);return e instanceof b1?e.lastVelocity||0:e.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return Ak(this)}get isAnimating(){return Ic(this)}get isPaused(){return $g(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,n=!1;const r=this.animation;let{toValues:s}=r;const{config:a}=r,o=CE(r.to);!o&&so(r.to)&&(s=qs(da(r.to))),r.values.forEach((u,d)=>{if(u.done)return;const m=u.constructor==e0?1:o?o[d].lastPosition:s[d];let h=r.immediate,p=m;if(!h){if(p=u.lastPosition,a.tension<=0){u.done=!0;return}let g=u.elapsedTime+=e;const y=r.fromValues[d],v=u.v0!=null?u.v0:u.v0=Le.arr(a.velocity)?a.velocity[d]:a.velocity;let x;const b=a.precision||(y==m?.005:Math.min(1,Math.abs(m-y)*.001));if(Le.und(a.duration))if(a.decay){const _=a.decay===!0?.998:a.decay,w=Math.exp(-(1-_)*g);p=y+v/(1-_)*(1-w),h=Math.abs(u.lastPosition-p)<=b,x=v*w}else{x=u.lastVelocity==null?v:u.lastVelocity;const _=a.restVelocity||b/10,w=a.clamp?0:a.bounce,S=!Le.und(w),C=y==m?u.v0>0:y<m;let E,M=!1;const T=1,I=Math.ceil(e/T);for(let j=0;j<I&&(E=Math.abs(x)>_,!(!E&&(h=Math.abs(m-p)<=b,h)));++j){S&&(M=p==m||p>m==C,M&&(x=-x*w,p=m));const N=-a.tension*1e-6*(p-m),P=-a.friction*.001*x,R=(N+P)/a.mass;x=x+R*T,p=p+x*T}}else{let _=1;a.duration>0&&(this._memoizedDuration!==a.duration&&(this._memoizedDuration=a.duration,u.durationProgress>0&&(u.elapsedTime=a.duration*u.durationProgress,g=u.elapsedTime+=e)),_=(a.progress||0)+g/this._memoizedDuration,_=_>1?1:_<0?0:_,u.durationProgress=_),p=y+a.easing(_)*(m-y),x=(p-u.lastPosition)/e,h=_==1}u.lastVelocity=x,Number.isNaN(p)&&(console.warn("Got NaN while animating:",this),h=!0)}o&&!o[d].done&&(h=!1),h?u.done=!0:t=!1,u.setValue(p,a.round)&&(n=!0)});const i=wi(this),c=i.getValue();if(t){const u=da(r.to);(c!==u||n)&&!a.decay?(i.setValue(u),this._onChange(u)):n&&a.decay&&this._onChange(c),this._stop()}else n&&this._onChange(c)}set(e){return $t.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Ic(this)){const{to:e,config:t}=this.animation;$t.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let n;return Le.und(e)?(n=this.queue||[],this.queue=[]):n=[Le.obj(e)?e:{...t,to:e}],Promise.all(n.map(r=>this._update(r))).then(r=>dD(this,r))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),n0(this._state,e&&this._lastCallId),$t.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:n,from:r}=e;n=Le.obj(n)?n[t]:n,(n==null||ZR(n))&&(n=void 0),r=Le.obj(r)?r[t]:r,r==null&&(r=void 0);const s={to:n,from:r};return Ak(this)||(e.reverse&&([n,r]=[r,n]),r=da(r),Le.und(r)?wi(this)||this._set(n):this._set(r)),s}_update({...e},t){const{key:n,defaultProps:r}=this;e.default&&Object.assign(r,ME(e,(o,i)=>/^on/.test(i)?Zye(o,n):o)),CQ(this,e,"onProps"),Hg(this,"onProps",e,this);const s=this._prepareNode(e);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const a=this._state;return nve(++this._lastCallId,{key:n,props:e,defaultProps:r,state:a,actions:{pause:()=>{$g(this)||(wQ(this,!0),cy(a.pauseQueue),Hg(this,"onPause",Oo(this,Wg(this,this.animation.to)),this))},resume:()=>{$g(this)&&(wQ(this,!1),Ic(this)&&this._resume(),cy(a.resumeQueue),Hg(this,"onResume",Oo(this,Wg(this,this.animation.to)),this))},start:this._merge.bind(this,s)}}).then(o=>{if(e.loop&&o.finished&&!(t&&o.noop)){const i=lve(e);if(i)return this._update(i,!0)}return o})}_merge(e,t,n){if(t.cancel)return this.stop(!0),n(Wm(this));const r=!Le.und(e.to),s=!Le.und(e.from);if(r||s)if(t.callId>this._lastToId)this._lastToId=t.callId;else return n(Wm(this));const{key:a,defaultProps:o,animation:i}=this,{to:c,from:u}=i;let{to:d=c,from:m=u}=e;s&&!r&&(!t.default||Le.und(d))&&(d=m),t.reverse&&([d,m]=[m,d]);const h=!Nl(m,u);h&&(i.from=m),m=da(m);const p=!Nl(d,c);p&&this._focus(d);const g=ZR(t.to),{config:y}=i,{decay:v,velocity:x}=y;(r||s)&&(y.velocity=0),t.config&&!g&&Cgt(y,fa(t.config,a),t.config!==o.config?fa(o.config,a):void 0);let b=wi(this);if(!b||Le.und(d))return n(Oo(this,!0));const _=Le.und(t.reset)?s&&!t.default:!Le.und(m)&&zy(t.reset,a),w=_?m:this.get(),S=t0(d),C=Le.num(S)||Le.arr(S)||SE(S),E=!g&&(!C||zy(o.immediate||t.immediate,a));if(p){const j=XR(d);if(j!==b.constructor)if(E)b=this._set(S);else throw Error(`Cannot animate between ${b.constructor.name} and ${j.name}, as the "to" prop suggests`)}const M=b.constructor;let T=so(d),I=!1;if(!T){const j=_||!Ak(this)&&h;(p||j)&&(I=Nl(t0(w),S),T=!I),(!Nl(i.immediate,E)&&!E||!Nl(y.decay,v)||!Nl(y.velocity,x))&&(T=!0)}if(I&&Ic(this)&&(i.changed&&!_?T=!0:T||this._stop(c)),!g&&((T||so(c))&&(i.values=b.getPayload(),i.toValues=so(d)?null:M==e0?[1]:qs(S)),i.immediate!=E&&(i.immediate=E,!E&&!_&&this._set(c)),T)){const{onRest:j}=i;Lt(Ngt,P=>CQ(this,t,P));const N=Oo(this,Wg(this,c));cy(this._pendingCalls,N),this._pendingCalls.add(n),i.changed&&$t.batchedUpdates(()=>{i.changed=!_,j?.(N,this),_?fa(o.onRest,N):i.onStart?.(N,this)})}_&&this._set(w),g?n(sve(t.to,t,this._state,this)):T?this._start():Ic(this)&&!p?this._pendingCalls.add(n):n(rve(w))}_focus(e){const t=this.animation;e!==t.to&&(fQ(this)&&this._detach(),t.to=e,fQ(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;so(t)&&(zp(t,this),tI(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;so(e)&&Zv(e,this)}_set(e,t=!0){const n=da(e);if(!Le.und(n)){const r=wi(this);if(!r||!Nl(n,r.getValue())){const s=XR(n);!r||r.constructor!=s?cD(this,s.create(n)):r.setValue(n),r&&$t.batchedUpdates(()=>{this._onChange(n,t)})}}return wi(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,Hg(this,"onStart",Oo(this,Wg(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),fa(this.animation.onChange,e,this)),fa(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;wi(this).reset(da(e.to)),e.immediate||(e.fromValues=e.values.map(t=>t.lastPosition)),Ic(this)||(_Q(this,!0),$g(this)||this._resume())}_resume(){Xo.skipAnimation?this.finish():bE.start(this)}_stop(e,t){if(Ic(this)){_Q(this,!1);const n=this.animation;Lt(n.values,s=>{s.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Xv(this,{type:"idle",parent:this});const r=t?Wm(this.get()):Oo(this.get(),Wg(this,e??n.to));cy(this._pendingCalls,r),n.changed&&(n.changed=!1,Hg(this,"onRest",r,this))}}};function Wg(e,t){const n=t0(t),r=t0(e.get());return Nl(r,n)}function lve(e,t=e.loop,n=e.to){const r=fa(t);if(r){const s=r!==!0&&uD(r),a=(s||e).reverse,o=!s||s.reset;return r0({...e,loop:t,default:!1,pause:void 0,to:!a||ZR(n)?n:void 0,from:o?e.from:void 0,reset:o,...s})}}function r0(e){const{to:t,from:n}=e=uD(e),r=new Set;return Le.obj(t)&&SQ(t,r),Le.obj(n)&&SQ(n,r),e.keys=r.size?Array.from(r):null,e}function kgt(e){const t=r0(e);return Le.und(t.default)&&(t.default=ME(t)),t}function SQ(e,t){rl(e,(n,r)=>n!=null&&t.add(r))}var Ngt=["onStart","onRest","onChange","onPause","onResume"];function CQ(e,t,n){e.animation[n]=t[n]!==Jye(t,n)?Zye(t[n],e.key):void 0}function Hg(e,t,...n){e.animation[t]?.(...n),e.defaultProps[t]?.(...n)}var Agt=["onStart","onChange","onRest"],Pgt=1,cve=class{constructor(e,t){this.id=Pgt++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((t,n)=>e[n]=t.get()),e}set(e){for(const t in e){const n=e[t];Le.und(n)||this.springs[t].set(n)}}update(e){return e&&this.queue.push(r0(e)),this}start(e){let{queue:t}=this;return e?t=qs(e).map(r0):this.queue=[],this._flush?this._flush(this,t):(hve(this,t),nI(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const n=this.springs;Lt(qs(t),r=>n[r].stop(!!e))}else n0(this._state,this._lastAsyncId),this.each(n=>n.stop(!!e));return this}pause(e){if(Le.und(e))this.start({pause:!0});else{const t=this.springs;Lt(qs(e),n=>t[n].pause())}return this}resume(e){if(Le.und(e))this.start({pause:!1});else{const t=this.springs;Lt(qs(e),n=>t[n].resume())}return this}each(e){rl(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:n}=this._events,r=this._active.size>0,s=this._changed.size>0;(r&&!this._started||s&&!this._started)&&(this._started=!0,Wy(e,([i,c])=>{c.value=this.get(),i(c,this,this._item)}));const a=!r&&this._started,o=s||a&&n.size?this.get():null;s&&t.size&&Wy(t,([i,c])=>{c.value=o,i(c,this,this._item)}),a&&(this._started=!1,Wy(n,([i,c])=>{c.value=o,i(c,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;$t.onFrame(this._onFrame)}};function nI(e,t){return Promise.all(t.map(n=>uve(e,n))).then(n=>dD(e,n))}async function uve(e,t,n){const{keys:r,to:s,from:a,loop:o,onRest:i,onResolve:c}=t,u=Le.obj(t.default)&&t.default;o&&(t.loop=!1),s===!1&&(t.to=null),a===!1&&(t.from=null);const d=Le.arr(s)||Le.fun(s)?s:void 0;d?(t.to=void 0,t.onRest=void 0,u&&(u.onRest=void 0)):Lt(Agt,y=>{const v=t[y];if(Le.fun(v)){const x=e._events[y];t[y]=({finished:b,cancelled:_})=>{const w=x.get(v);w?(b||(w.finished=!1),_&&(w.cancelled=!0)):x.set(v,{value:null,finished:b||!1,cancelled:_||!1})},u&&(u[y]=t[y])}});const m=e._state;t.pause===!m.paused?(m.paused=t.pause,cy(t.pause?m.pauseQueue:m.resumeQueue)):m.paused&&(t.pause=!0);const h=(r||Object.keys(e.springs)).map(y=>e.springs[y].start(t)),p=t.cancel===!0||Jye(t,"cancel")===!0;(d||p&&m.asyncId)&&h.push(nve(++e._lastAsyncId,{props:t,state:m,actions:{pause:KR,resume:KR,start(y,v){p?(n0(m,e._lastAsyncId),v(Wm(e))):(y.onRest=i,v(sve(d,y,m,e)))}}})),m.paused&&await new Promise(y=>{m.resumeQueue.add(y)});const g=dD(e,await Promise.all(h));if(o&&g.finished&&!(n&&g.noop)){const y=lve(t,o,s);if(y)return hve(e,[y]),uve(e,y,!0)}return c&&$t.batchedUpdates(()=>c(g,e,e.item)),g}function rI(e,t){const n={...e.springs};return t&&Lt(qs(t),r=>{Le.und(r.keys)&&(r=r0(r)),Le.obj(r.to)||(r={...r,to:void 0}),mve(n,r,s=>fve(s))}),dve(e,n),n}function dve(e,t){rl(t,(n,r)=>{e.springs[r]||(e.springs[r]=n,zp(n,e))})}function fve(e,t){const n=new Tgt;return n.key=e,t&&zp(n,t),n}function mve(e,t,n){t.keys&&Lt(t.keys,r=>{(e[r]||(e[r]=n(r)))._prepareNode(t)})}function hve(e,t){Lt(t,n=>{mve(e.springs,n,r=>fve(r,e))})}var _1=({children:e,...t})=>{const n=f.useContext(pw),r=t.pause||!!n.pause,s=t.immediate||!!n.immediate;t=cgt(()=>({pause:r,immediate:s}),[r,s]);const{Provider:a}=pw;return f.createElement(a,{value:t},e)},pw=Rgt(_1,{});_1.Provider=pw.Provider;_1.Consumer=pw.Consumer;function Rgt(e,t){return Object.assign(e,f.createContext(t)),e.Provider._context=e,e.Consumer._context=e,e}var pve=()=>{const e=[],t=function(r){igt();const s=[];return Lt(e,(a,o)=>{if(Le.und(r))s.push(a.start());else{const i=n(r,a,o);i&&s.push(a.start(i))}}),s};t.current=e,t.add=function(r){e.includes(r)||e.push(r)},t.delete=function(r){const s=e.indexOf(r);~s&&e.splice(s,1)},t.pause=function(){return Lt(e,r=>r.pause(...arguments)),this},t.resume=function(){return Lt(e,r=>r.resume(...arguments)),this},t.set=function(r){Lt(e,(s,a)=>{const o=Le.fun(r)?r(a,s):r;o&&s.set(o)})},t.start=function(r){const s=[];return Lt(e,(a,o)=>{if(Le.und(r))s.push(a.start());else{const i=this._getProps(r,a,o);i&&s.push(a.start(i))}}),s},t.stop=function(){return Lt(e,r=>r.stop(...arguments)),this},t.update=function(r){return Lt(e,(s,a)=>s.update(this._getProps(r,s,a))),this};const n=function(r,s,a){return Le.fun(r)?r(a,s):r};return t._getProps=n,t};function Igt(e,t,n){const r=Le.fun(t)&&t;r&&!n&&(n=[]);const s=f.useMemo(()=>r||arguments.length==3?pve():void 0,[]),a=f.useRef(0),o=iD(),i=f.useMemo(()=>({ctrls:[],queue:[],flush(x,b){const _=rI(x,b);return a.current>0&&!i.queue.length&&!Object.keys(_).some(S=>!x.springs[S])?nI(x,b):new Promise(S=>{dve(x,_),i.queue.push(()=>{S(nI(x,b))}),o()})}}),[]),c=f.useRef([...i.ctrls]),u=[],d=QR(e)||0;f.useMemo(()=>{Lt(c.current.slice(e,d),x=>{JR(x,s),x.stop(!0)}),c.current.length=e,m(d,e)},[e]),f.useMemo(()=>{m(0,Math.min(d,e))},n);function m(x,b){for(let _=x;_<b;_++){const w=c.current[_]||(c.current[_]=new cve(null,i.flush)),S=r?r(_,w):t[_];S&&(u[_]=kgt(S))}}const h=c.current.map((x,b)=>rI(x,u[b])),p=f.useContext(_1),g=QR(p),y=p!==g&&eve(p);Cd(()=>{a.current++,i.ctrls=c.current;const{queue:x}=i;x.length&&(i.queue=[],Lt(x,b=>b())),Lt(c.current,(b,_)=>{s?.add(b),y&&b.start({default:p});const w=u[_];w&&(tve(b,w.ref),b.ref?b.queue.push(w):b.start(w))})}),lD(()=>()=>{Lt(i.ctrls,x=>x.stop(!0))});const v=h.map(x=>({...x}));return s?[v,s]:v}function jgt(e,t){const n=Le.fun(e),[[r],s]=Igt(1,n?e:[e],n?[]:t);return n||arguments.length==2?[r,s]:r}function gve(e,t,n){const r=Le.fun(t)&&t,{reset:s,sort:a,trail:o=0,expires:i=!0,exitBeforeEnter:c=!1,onDestroyed:u,ref:d,config:m}=r?r():t,h=f.useMemo(()=>r||arguments.length==3?pve():void 0,[]),p=qs(e),g=[],y=f.useRef(null),v=s?null:y.current;Cd(()=>{y.current=g}),lD(()=>(Lt(g,R=>{h?.add(R.ctrl),R.ctrl.ref=h}),()=>{Lt(y.current,R=>{R.expired&&clearTimeout(R.expirationId),JR(R.ctrl,h),R.ctrl.stop(!0)})}));const x=Lgt(p,r?r():t,v),b=s&&y.current||[];Cd(()=>Lt(b,({ctrl:R,item:k,key:O})=>{JR(R,h),fa(u,k,O)}));const _=[];if(v&&Lt(v,(R,k)=>{R.expired?(clearTimeout(R.expirationId),b.push(R)):(k=_[k]=x.indexOf(R.key),~k&&(g[k]=R))}),Lt(p,(R,k)=>{g[k]||(g[k]={key:x[k],item:R,phase:"mount",ctrl:new cve},g[k].ctrl.item=R)}),_.length){let R=-1;const{leave:k}=r?r():t;Lt(_,(O,L)=>{const F=v[L];~O?(R=g.indexOf(F),g[R]={...F,item:p[O]}):k&&g.splice(++R,0,F)})}Le.fun(a)&&g.sort((R,k)=>a(R.item,k.item));let w=-o;const S=iD(),C=ME(t),E=new Map,M=f.useRef(new Map),T=f.useRef(!1);Lt(g,(R,k)=>{const O=R.key,L=R.phase,F=r?r():t;let U,V;const W=fa(F.delay||0,O);if(L=="mount")U=F.enter,V="enter";else{const $=x.indexOf(O)<0;if(L!="leave")if($)U=F.leave,V="leave";else if(U=F.update)V="update";else return;else if(!$)U=F.enter,V="enter";else return}if(U=fa(U,R.item,k),U=Le.obj(U)?uD(U):{to:U},!U.config){const $=m||C.config;U.config=fa($,R.item,k,V)}w+=o;const H={...C,delay:W+w,ref:d,immediate:F.immediate,reset:!1,...U};if(V=="enter"&&Le.und(H.from)){const $=r?r():t,q=Le.und($.initial)||v?$.from:$.initial;H.from=fa(q,R.item,k)}const{onResolve:G}=H;H.onResolve=$=>{fa(G,$);const q=y.current,Z=q.find(se=>se.key===O);if(Z&&!($.cancelled&&Z.phase!="update")&&Z.ctrl.idle){const se=q.every(Y=>Y.ctrl.idle);if(Z.phase=="leave"){const Y=fa(i,Z.item);if(Y!==!1){const Q=Y===!0?0:Y;if(Z.expired=!0,!se&&Q>0){Q<=2147483647&&(Z.expirationId=setTimeout(S,Q));return}}}se&&q.some(Y=>Y.expired)&&(M.current.delete(Z),c&&(T.current=!0),S())}};const K=rI(R.ctrl,H);V==="leave"&&c?M.current.set(R,{phase:V,springs:K,payload:H}):E.set(R,{phase:V,springs:K,payload:H})});const I=f.useContext(_1),j=QR(I),N=I!==j&&eve(I);Cd(()=>{N&&Lt(g,R=>{R.ctrl.start({default:I})})},[I]),Lt(E,(R,k)=>{if(M.current.size){const O=g.findIndex(L=>L.key===k.key);g.splice(O,1)}}),Cd(()=>{Lt(M.current.size?M.current:E,({phase:R,payload:k},O)=>{const{ctrl:L}=O;O.phase=R,h?.add(L),N&&R=="enter"&&L.start({default:I}),k&&(tve(L,k.ref),(L.ref||h)&&!T.current?L.update(k):(L.start(k),T.current&&(T.current=!1)))})},s?void 0:n);const P=R=>f.createElement(f.Fragment,null,g.map((k,O)=>{const{springs:L}=E.get(k)||k.ctrl,F=R({...L},k.item,k,O);return F&&F.type?f.createElement(F.type,{...F.props,key:Le.str(k.key)||Le.num(k.key)?k.key:k.ctrl.id,ref:F.ref}):F}));return h?[P,h]:P}var Ogt=1;function Lgt(e,{key:t,keys:n=t},r){if(n===null){const s=new Set;return e.map(a=>{const o=r&&r.find(i=>i.item===a&&i.phase!=="leave"&&!s.has(i));return o?(s.add(o),o.key):Ogt++})}return Le.und(n)?e:Le.fun(n)?e.map(n):qs(n)}var yve=class extends fD{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=Yv(...t);const n=this._get(),r=XR(n);cD(this,r.create(n))}advance(e){const t=this._get(),n=this.get();Nl(t,n)||(wi(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&EQ(this._active)&&Pk(this)}_get(){const e=Le.arr(this.source)?this.source.map(da):qs(da(this.source));return this.calc(...e)}_start(){this.idle&&!EQ(this._active)&&(this.idle=!1,Lt(CE(this),e=>{e.done=!1}),Xo.skipAnimation?($t.batchedUpdates(()=>this.advance()),Pk(this)):bE.start(this))}_attach(){let e=1;Lt(qs(this.source),t=>{so(t)&&zp(t,this),tI(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){Lt(qs(this.source),e=>{so(e)&&Zv(e,this)}),this._active.clear(),Pk(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=qs(this.source).reduce((t,n)=>Math.max(t,(tI(n)?n.priority:0)+1),0))}};function Dgt(e){return e.idle!==!1}function EQ(e){return!e.size||Array.from(e).every(Dgt)}function Pk(e){e.idle||(e.idle=!0,Lt(CE(e),t=>{t.done=!0}),Xv(e,{type:"idle",parent:e}))}var Fgt=(e,...t)=>new yve(e,t);Xo.assign({createStringInterpolator:Kye,to:(e,t)=>new yve(e,t)});var vve=/^--/;function Ugt(e,t){return t==null||typeof t=="boolean"||t===""?"":typeof t=="number"&&t!==0&&!vve.test(e)&&!(Gy.hasOwnProperty(e)&&Gy[e])?t+"px":(""+t).trim()}var MQ={};function Bgt(e,t){if(!e.nodeType||!e.setAttribute)return!1;const n=e.nodeName==="filter"||e.parentNode&&e.parentNode.nodeName==="filter",{className:r,style:s,children:a,scrollTop:o,scrollLeft:i,viewBox:c,...u}=t,d=Object.values(u),m=Object.keys(u).map(h=>n||e.hasAttribute(h)?h:MQ[h]||(MQ[h]=h.replace(/([A-Z])/g,p=>"-"+p.toLowerCase())));a!==void 0&&(e.textContent=a);for(const h in s)if(s.hasOwnProperty(h)){const p=Ugt(h,s[h]);vve.test(h)?e.style.setProperty(h,p):e.style[h]=p}m.forEach((h,p)=>{e.setAttribute(h,d[p])}),r!==void 0&&(e.className=r),o!==void 0&&(e.scrollTop=o),i!==void 0&&(e.scrollLeft=i),c!==void 0&&e.setAttribute("viewBox",c)}var Gy={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Vgt=(e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1),$gt=["Webkit","Ms","Moz","O"];Gy=Object.keys(Gy).reduce((e,t)=>($gt.forEach(n=>e[Vgt(n,t)]=e[t]),e),Gy);var Wgt=/^(matrix|translate|scale|rotate|skew)/,Hgt=/^(translate)/,zgt=/^(rotate|skew)/,Rk=(e,t)=>Le.num(e)&&e!==0?e+t:e,S_=(e,t)=>Le.arr(e)?e.every(n=>S_(n,t)):Le.num(e)?e===t:parseFloat(e)===t,Ggt=class extends EE{constructor({x:e,y:t,z:n,...r}){const s=[],a=[];(e||t||n)&&(s.push([e||0,t||0,n||0]),a.push(o=>[`translate3d(${o.map(i=>Rk(i,"px")).join(",")})`,S_(o,0)])),rl(r,(o,i)=>{if(i==="transform")s.push([o||""]),a.push(c=>[c,c===""]);else if(Wgt.test(i)){if(delete r[i],Le.und(o))return;const c=Hgt.test(i)?"px":zgt.test(i)?"deg":"";s.push(qs(o)),a.push(i==="rotate3d"?([u,d,m,h])=>[`rotate3d(${u},${d},${m},${Rk(h,c)})`,S_(h,0)]:u=>[`${i}(${u.map(d=>Rk(d,c)).join(",")})`,S_(u,i.startsWith("scale")?1:0)])}}),s.length&&(r.transform=new qgt(s,a)),super(r)}},qgt=class extends zye{constructor(e,t){super(),this.inputs=e,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return Lt(this.inputs,(n,r)=>{const s=da(n[0]),[a,o]=this.transforms[r](Le.arr(s)?s:n.map(da));e+=" "+a,t=t&&o}),t?"none":e}observerAdded(e){e==1&&Lt(this.inputs,t=>Lt(t,n=>so(n)&&zp(n,this)))}observerRemoved(e){e==0&&Lt(this.inputs,t=>Lt(t,n=>so(n)&&Zv(n,this)))}eventObserved(e){e.type=="change"&&(this._value=null),Xv(this,e)}},Kgt=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];Xo.assign({batchedUpdates:Ss.unstable_batchedUpdates,createStringInterpolator:Kye,colors:Upt});var Ygt=ygt(Kgt,{applyAnimatedValues:Bgt,createAnimatedStyle:e=>new Ggt(e),getComponentProps:({scrollTop:e,scrollLeft:t,...n})=>n}),C_=Ygt.animated;function TQ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Qgt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TQ(Object(n),!0).forEach(function(r){Xgt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TQ(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qy(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?qy=function(t){return typeof t}:qy=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qy(e)}function Xgt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gw(){return gw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gw.apply(this,arguments)}function Zgt(e,t){if(e){if(typeof e=="string")return kQ(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kQ(e,t)}}function kQ(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xve(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Zgt(e))||t){n&&(e=n);var r=0,s=function(){};return{s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(c){throw c},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,i;return{s:function(){n=n.call(e)},n:function(){var c=n.next();return a=c.done,c},e:function(c){o=!0,i=c},f:function(){try{!a&&n.return!=null&&n.return()}finally{if(o)throw i}}}}function Jgt(e,t){var n=[],r=[];function s(a,o){if(a.length===1)n.push(a[0]),r.push(a[0]);else{for(var i=Array(a.length-1),c=0;c<i.length;c++)c===0&&n.push(a[0]),c===i.length-1&&r.push(a[c+1]),i[c]=[(1-o)*a[c][0]+o*a[c+1][0],(1-o)*a[c][1]+o*a[c+1][1]];s(i,o)}}return e.length&&s(e,t),{left:n,right:r.reverse()}}function eyt(e){var t={};return e.length===4&&(t.x2=e[2][0],t.y2=e[2][1]),e.length>=3&&(t.x1=e[1][0],t.y1=e[1][1]),t.x=e[e.length-1][0],t.y=e[e.length-1][1],e.length===4?t.type="C":e.length===3?t.type="Q":t.type="L",t}function tyt(e,t){t=t||2;for(var n=[],r=e,s=1/t,a=0;a<t-1;a++){var o=s/(1-s*a),i=Jgt(r,o);n.push(i.left),r=i.right}return n.push(r),n}function nyt(e,t,n){var r=[[e.x,e.y]];return t.x1!=null&&r.push([t.x1,t.y1]),t.x2!=null&&r.push([t.x2,t.y2]),r.push([t.x,t.y]),tyt(r,n).map(eyt)}var ryt=/[MLCSTQAHVZmlcstqahv]|-?[\d.e+-]+/g,Hm={M:["x","y"],L:["x","y"],H:["x"],V:["y"],C:["x1","y1","x2","y2","x","y"],S:["x2","y2","x","y"],Q:["x1","y1","x","y"],T:["x","y"],A:["rx","ry","xAxisRotation","largeArcFlag","sweepFlag","x","y"],Z:[]};Object.keys(Hm).forEach(function(e){Hm[e.toLowerCase()]=Hm[e]});function sI(e,t){for(var n=Array(e),r=0;r<e;r++)n[r]=t;return n}function syt(e){return"".concat(e.type).concat(Hm[e.type].map(function(t){return e[t]}).join(","))}function ayt(e,t){var n={x1:"x",y1:"y",x2:"x",y2:"y"},r=["xAxisRotation","largeArcFlag","sweepFlag"];if(e.type!==t.type&&t.type.toUpperCase()!=="M"){var s={};Object.keys(t).forEach(function(a){var o=t[a],i=e[a];i===void 0&&(r.includes(a)?i=o:(i===void 0&&n[a]&&(i=e[n[a]]),i===void 0&&(i=0))),s[a]=i}),s.type=t.type,e=s}return e}function oyt(e,t,n){var r=[];if(t.type==="L"||t.type==="Q"||t.type==="C")r=r.concat(nyt(e,t,n));else{var s=gw({},e);s.type==="M"&&(s.type="L"),r=r.concat(sI(n-1).map(function(){return s})),r.push(t)}return r}function NQ(e,t,n){var r=e.length-1,s=t.length-1,a=r/s,o=sI(s).reduce(function(c,u,d){var m=Math.floor(a*d);if(n&&m<e.length-1&&n(e[m],e[m+1])){var h=a*d%1<.5;c[m]&&(h?m>0?m-=1:m<e.length-1&&(m+=1):m<e.length-1?m+=1:m>0&&(m-=1))}return c[m]=(c[m]||0)+1,c},[]),i=o.reduce(function(c,u,d){if(d===e.length-1){var m=sI(u,gw({},e[e.length-1]));return m[0].type==="M"&&m.forEach(function(h){h.type="L"}),c.concat(m)}return c.concat(oyt(e[d],e[d+1],u))},[]);return i.unshift(e[0]),i}function AQ(e){for(var t=(e||"").match(ryt)||[],n=[],r,s,a=0;a<t.length;++a)if(r=Hm[t[a]],r){s={type:t[a]};for(var o=0;o<r.length;++o)s[r[o]]=+t[a+o+1];a+=r.length,n.push(s)}return n}function iyt(e,t,n){var r=e==null?[]:e.slice(),s=t==null?[]:t.slice(),a=qy(n)==="object"?n:{excludeSegment:n,snapEndsToInput:!0},o=a.excludeSegment,i=a.snapEndsToInput;if(!r.length&&!s.length)return function(){return[]};var c=(r.length===0||r[r.length-1].type==="Z")&&(s.length===0||s[s.length-1].type==="Z");r.length>0&&r[r.length-1].type==="Z"&&r.pop(),s.length>0&&s[s.length-1].type==="Z"&&s.pop(),r.length?s.length||s.push(r[0]):r.push(s[0]);var u=Math.abs(s.length-r.length);u!==0&&(s.length>r.length?r=NQ(r,s,o):s.length<r.length&&(s=NQ(s,r,o))),r=r.map(function(m,h){return ayt(m,s[h])});var d=r.map(function(m){return Qgt({},m)});return c&&(d.push({type:"Z"}),r.push({type:"Z"})),function(h){if(h===1&&i)return t??[];if(h===0)return r;for(var p=0;p<d.length;++p){var g=r[p],y=s[p],v=d[p],x=xve(Hm[v.type]),b;try{for(x.s();!(b=x.n()).done;){var _=b.value;v[_]=(1-h)*g[_]+h*y[_],(_==="largeArcFlag"||_==="sweepFlag")&&(v[_]=Math.round(v[_]))}}catch(w){x.e(w)}finally{x.f()}}return d}}function lyt(e,t,n){var r=AQ(e),s=AQ(t),a=qy(n)==="object"?n:{excludeSegment:n,snapEndsToInput:!0},o=a.excludeSegment,i=a.snapEndsToInput;if(!r.length&&!s.length)return function(){return""};var c=iyt(r,s,{excludeSegment:o,snapEndsToInput:i});return function(d){if(d===1&&i)return t??"";var m=c(d),h="",p=xve(m),g;try{for(p.s();!(g=p.n()).done;){var y=g.value;h+=syt(y)}}catch(v){p.e(v)}finally{p.f()}return h}}const wu=[.4,0,.2,1],mWt=tut,hWt="geometricPrecision",pWt="pointer-events-none overflow-visible font-sans",bve=200,gWt="relative isolate select-none touch-none touch-pan-down",yWt={duration:.2,delay:bve/1e3,ease:pa},vWt={opacity:0,transition:{duration:0,delay:0}},xWt=5,_ve={blue:"oklch(var(--positive-color))",red:"oklch(var(--negative-color))",gray:"oklch(var(--foreground-quieter-color))",black:"oklch(var(--foreground-color))",transparent:"#00000000"},bWt={fill:_ve.gray,fontSize:12,dy:"-5px",textAnchor:"start",fontFamily:"var(--font-family-sans)"},_Wt={fill:_ve.gray,fontSize:12,textAnchor:"start",dx:"6px",fontFamily:"var(--font-family-sans)"},bm={POSITIVE:"positive",NEGATIVE:"negative",NEUTRAL:"neutral",TRANSPARENT:"transparent"},aI={[bm.POSITIVE]:"blue",[bm.NEGATIVE]:"red",[bm.NEUTRAL]:"gray",[bm.TRANSPARENT]:"transparent"},wWt=e=>e.date,cyt=e=>new Date(e),uyt=e=>cyt(e.date),dyt=e=>{const t=e.match(/(\d{2}):(\d{2})/);return t?t[0]:void 0},SWt=(e,t)=>t?e.replace(/T\d{2}:\d{2}/,`T${t}`):e,CWt={lunch_break:{valence:bm.TRANSPARENT,backgroundColor:aI[bm.TRANSPARENT],backgroundOpacity:0,lineOpacity:0},pre_market:{backgroundOpacity:.5},after_hours:{backgroundOpacity:.5}},EWt={lunch_break:J({defaultMessage:"Lunch Break",id:"tHK2Aeii37"}),pre_market:J({defaultMessage:"Pre-Market",id:"8y93h1dAbn"}),after_hours:J({defaultMessage:"After-Hours",id:"19IROpkyrs"})},MWt=(e,t)=>{const n=dyt(t);if(n)return e?.find(r=>{const s=r.open,a=r.close;return s<=a?n>=s&&n<=a:n>=s||n<=a})},TWt=e=>({backgroundColor:aI[e],backgroundOpacity:1,lineColor:aI[e],lineOpacity:1,valence:e}),fyt={"1d":{0:0,15:5,30:10},"5d":null,"1m":null,"6m":null,"3m":null,ytd:null,"1y":null,"5y":{0:10},max:null};function myt(e){if(!Array.isArray(e)||e.length<22)return new Set;const r=[];let s=0,a=0;const o=[],i=u=>{o.push(u);const d=u-s;s+=d/o.length,a+=d*(u-s)},c=()=>{const u=o.shift(),d=u-s;s-=d/o.length,a-=d*(u-s)};for(let u=1;u<=20;u++){const d=Math.log(e[u].close/e[u-1].close);i(d)}for(let u=21;u<e.length;u++){const d=Math.log(e[u].close/e[u-1].close),m=o.length>1?a/o.length:0,h=Math.sqrt(m),p=h>0&&Number.isFinite(h),g=p?Math.abs((d-s)/h):0;p&&g>20&&r.push(u),c(),i(d)}return new Set(r.map(u=>e[u].date))}const hyt=(e,t=0)=>{if(t===0||!e?.length)return e;const n=[...e];let r=0;for(let s=0;s<e.length;s++){const a=e[s].close;if(r+=a,s>=t){const i=e[s-t].close;r-=i}const o=s<t?s+1:t;s===0||s===e.length-1||(n[s]={...e[s],close:r/o})}return n},pyt=(e,t)=>{const n=fyt[t];if(!n)return e;const r=Object.keys(n).reduce((s,a)=>Math.abs(e.length-+s)<Math.abs(e.length-+a)?+s:+a,0);return hyt(e,n[r]??0)},kWt=(e,t=!0)=>{const n=f.useRef(e),r=f.useRef(e),s=!t||!n.current||!r.current,[a,o]=jgt(()=>({t:0,immediate:s,easing:wu}));return f.useEffect(()=>{r.current!==e&&(n.current=r.current,r.current=e,t&&o.start({from:{t:0},to:{t:1},config:{duration:bve}}))},[e,t,o]),t?a.t.to(i=>n.current===r.current?e:lyt(n.current,r.current)(i)):e},gyt=e=>e?.includes?.("00:00:00"),NWt=(e,t,n)=>{if(!e)return null;const r=new Date(e),s=!gyt(e);return r.toLocaleString(t,{month:"short",day:"numeric",timeZone:n,minute:s?"2-digit":void 0,hour:s?"numeric":void 0,year:s?void 0:"numeric",timeZoneName:s?"short":void 0})},AWt=(e,t,n)=>new Intl.NumberFormat(n,{style:t?"currency":"decimal",currency:t??void 0,minimumFractionDigits:2,maximumFractionDigits:2}).format(e),yyt=nE(e=>uyt(e)).left,vyt=(e,t)=>{if("invert"in e)return e.invert(t);const n=e.step(),r=e.domain(),s=e.range()[0],a=Math.round((t-s)/n);return r[Math.max(0,Math.min(r.length-1,a))]};function PWt(e,t,n){const r=Math.max(0,e),s=yyt(n,vyt(t,r),0);return{d:n[s]??n[n.length-1],index:s,x:r}}const oI=A.memo(({countryCode:e,...t})=>l.jsx("img",{src:`https://r2cdn.perplexity.ai/images/country_flags/${e??"NEU"}.svg`,alt:e??"NEU",...t})),xyt={COMMODITY:"",FOREX:"FX",INDEX:"",CRYPTO:""},RWt=A.memo(({price:e,currency:t,sign:n,variant:r="small",animated:s=!0,className:a})=>{const o=f.useMemo(()=>({style:t?"currency":"decimal",currency:t||void 0,minimumFractionDigits:e<1e3?2:0,maximumFractionDigits:2,signDisplay:n?"exceptZero":void 0}),[t,e,n]);return l.jsx(D,{variant:r,color:"light",className:a,children:l.jsx(nu,{value:e,format:o,animated:s})})}),IWt=({name:e,variant:t="smallBold"})=>e?l.jsx(D,{variant:t,className:"min-w-0 truncate break-words",as:"span",children:e}):null,byt=({symbol:e,exchange:t,country:n,gap:r="xs"})=>{const s=f.useMemo(()=>e&&decodeURIComponent(e).split(".")[0],[e]),a=f.useMemo(()=>t&&(xyt[t]??t),[t]);if(!s)return null;if(!a)return s;const o=n||null;return l.jsxs(bc,{className:B({"gap-xs":r==="xs","gap-sm":r==="sm"}),children:[l.jsx(fr,{id:"symbol",children:s}),l.jsx(fr,{id:"exchange",children:a}),o&&l.jsx(fr,{id:"country",children:l.jsx("div",{className:"flex size-[1.3em] flex-shrink-0 items-center",children:l.jsx(oI,{countryCode:o,className:"shadow-sm"})})})]})},jWt=({symbol:e,children:t,className:n})=>{const{inApp:r}=ep(),s=Ht(),a=Rye({href:`/finance/${e}`,inApp:r,queryParams:s});return l.jsx(at,{href:a,className:B("py-sm px-md hover:bg-subtler border-borderMain/50 block border-b duration-150 last:border-b-0",n),children:t})},wve=e=>{const{trackEvent:t}=Te(),n=f.useCallback((r,s)=>{switch(e){case"discover":t("discover home widget clicked",{widgetType:r,destinationUrl:s});break;case"market":case"crypto":t("finance homepage widget clicked",{pageType:e,widgetType:r,destinationUrl:s});break}},[t,e]);return f.useMemo(()=>({onClick:n}),[n])},OWt=({enter:e,exit:t})=>{const{trackEvent:n}=Te(),r=f.useRef(performance.now()),s=f.useRef(!0);f.useEffect(()=>{n(e,{});const a=()=>{s.current&&n(t,{timeOnPageMs:Math.ceil(performance.now()-r.current)})},o=()=>{document.hidden?(a(),s.current=!1):(r.current=performance.now(),s.current=!0)};return document.addEventListener("visibilitychange",o),window.addEventListener("beforeunload",a),()=>{document.removeEventListener("visibilitychange",o),window.removeEventListener("beforeunload",a),a()}},[n,e,t])},_yt=(e,t,n)=>{const r=()=>{t.removeEventListener("scrollend",r),n?.()};n&&t.addEventListener("scrollend",r),t.scrollTo({top:e,behavior:"smooth"})},wyt=60;function iI(e){const t=e.scrollHeight,n=e.clientHeight,r=e.scrollTop;return Math.abs(t-n-r)<=1}const Syt=()=>{const{scrollContainerRef:e}=Sc(),t=f.useCallback(()=>{if(!e?.current)return;const n=e.current,r=n.querySelector("#coin50-section");if(!r)return;const s=r.getBoundingClientRect().top,a=n.scrollTop,o=s+a-wyt;_yt(o,n)},[e]);return f.useMemo(()=>({scrollToCoin50Section:t}),[t])},Sve="#1FB8CD",Cve="#B4413C",Cyt=[Sve,"#FFC185",Cve,"#ECEBD5","#5D878F","#DB4545","#D2BA4C","#964325"],Eve="#20808D",Mve="#A84B2F",Eyt=[Eve,Mve,"#1B474D","#BCE2E7","#944454","#FFC553","#848456","#6E522B"],Myt={tickColor:"#2F3031",axisColor:"#2F3031",textColor:"#aaaaaa",colorSchema:Cyt},Tyt={tickColor:"#D9D9D0",axisColor:"#D9D9D0",textColor:"#A0A0A0",colorSchema:Eyt},mD=(e="sm")=>{const[t,n]=f.useState(e);f.useEffect(()=>{const c=()=>{window.innerWidth>=1536?n("2xl"):window.innerWidth>=1280?n("xl"):window.innerWidth>=1024?n("lg"):window.innerWidth>=768?n("md"):window.innerWidth>=640&&n("sm")};return window.addEventListener("resize",c),c(),()=>window.removeEventListener("resize",c)},[]);const r=!0,s=["md","lg","xl","2xl"].includes(t),a=["lg","xl","2xl"].includes(t),o=["xl","2xl"].includes(t),i=["2xl"].includes(t);return f.useMemo(()=>({breakpoint:t,isSmallScreen:r,isMediumScreen:s,isLargeScreen:a,isXLargeScreen:o,is2XLargeScreen:i}),[t,i,a,s,r,o])},Ky=e=>new Date(e.date),Ik=e=>e.close,kyt={blue:Sve,red:Cve},Nyt={blue:Eve,red:Mve},hD=A.memo(({history:e,symbol:t,valence:n,width:r=150,height:s=25,strokeWidth:a=1.2,className:o})=>{const{colorScheme:i}=fs(),c=f.useMemo(()=>{const v=[...e],x=myt(v),b=v.filter(_=>!x.has(_.date));return pyt(b,"1d")},[e]),u=f.useMemo(()=>{const v=i==="dark"?kyt:Nyt;return n==="positive"?v.blue:v.red},[i,n]),d=f.useMemo(()=>y1({domain:Ll(c,Ky),range:[0,r]}),[c,r]),m=f.useMemo(()=>Ah({domain:Ll(c,Ik),range:[s,0]}),[c,s]),h=f.useMemo(()=>Cf().x(v=>d(Ky(v))??0).y(v=>m(Ik(v))??0).curve(eut),[d,m]),p=f.useMemo(()=>h(c),[h,c]),g=f.useCallback(v=>d(Ky(v))??0,[d]),y=f.useCallback(v=>m(Ik(v))??0,[m]);return l.jsxs("svg",{height:s,width:r,viewBox:`0 0 ${r} ${s}`,className:B("overflow-visible",o),children:[l.jsx("path",{d:p,stroke:u,strokeWidth:a,fill:"none",shapeRendering:"geometricPrecision"}),l.jsx(tE,{from:`${u}22`,to:`${u}00`,id:`ticker-line-${t}`}),l.jsx(Ph,{data:c,x:g,y,yScale:m,fill:`url(#ticker-line-${t})`})]})});hD.displayName="TickerLine";const Ayt=({ticker:e})=>{const{onClick:t}=wve("crypto"),{scrollToCoin50Section:n}=Syt(),r=()=>{t("top_indices","scroll"),n()};return l.jsx("div",{className:"min-w-0 shrink-0 cursor-pointer",onClick:r,children:l.jsx(TE,{symbol:e.symbol,currency:e.currency,name:e.name,price:e.price,change:e.change,history:e.history})})},Pyt=({ticker:e,marketType:t})=>{const{onClick:n}=wve(t),r=f.useCallback(()=>{n("top_indices",`/finance/${e.symbol}`)},[n,e.symbol]);return l.jsx(yE,{href:`/finance/${e.symbol}`,className:"min-w-0 shrink-0",onClick:r,children:l.jsx(TE,{currency:e.currency,symbol:e.symbol,exchange:e.exchange,name:e.name,price:e.price,change:e.change,history:e.history})})},Ryt=e=>{const{country:t}=_pt();return Ke({queryKey:Cpt(e,"1d",t),queryFn:()=>Ept({groupId:e,historyPeriod:"1d",country:t}),refetchInterval:1e3*30})},Iyt=A.memo(({groupId:e,className:t})=>{const{data:n,isLoading:r}=Ryt(e);return l.jsx(Tve,{groupId:e,data:n,isLoading:r,className:t})});Iyt.displayName="KeyTickersWithQuery";const Tve=A.memo(({groupId:e,className:t,data:n,isLoading:r})=>(DC("mini-graphs",{skip:!n}),l.jsxs("div",{className:t,children:[n?.map(s=>l.jsx(z,{children:s.symbol==="COIN50USD"?l.jsx(Ayt,{ticker:s}):l.jsx(Pyt,{ticker:s,marketType:e})},`markets-${s.symbol}`)),r&&[1,2,3,4].map(s=>l.jsx(kve,{},s))]})));Tve.displayName="KeyTickers";const TE=A.memo(({symbol:e,name:t,currency:n,price:r,change:s,history:a,exchange:o})=>{const i=s/(r-s)*100,c=t,{isXLargeScreen:u}=mD(),d=r>1e6?r/1e6:r,m=r>1e6?"M":"",h=f.useMemo(()=>a?.slice().sort((y,v)=>Ky(y).getTime()-Ky(v).getTime()),[a]),p=s<0?"negative":"positive",g=f.useMemo(()=>({style:n?"currency":"decimal",currency:n??void 0,trailingZeroDisplay:"stripIfInteger"}),[n]);return l.jsxs(tr,{className:"py-sm gap-xs hover:shadow-subtle flex select-none flex-col transition-all duration-200 hover:scale-[1.02]",children:[l.jsxs("div",{className:"px-sm min-w-0",children:[l.jsxs("div",{className:"gap-xs flex min-w-0 items-center justify-between",children:[l.jsx(D,{variant:"smallBold",className:"min-w-0 truncate",children:c}),l.jsx(dw,{className:"translate-x-xs",change:i,variant:"tiny",includeIcon:!0})]}),l.jsxs("div",{className:"gap-sm flex items-center justify-between",children:[l.jsx(D,{variant:"micro",color:"light",className:"whitespace-nowrap",children:l.jsx(byt,{symbol:e,exchange:o})}),l.jsx(dw,{className:"-translate-x-two mt-px",change:s*100,background:!1,variant:"micro",format:g})]})]}),h&&h.length>0&&l.jsx("div",{className:"my-sm flex w-full",children:l.jsx("div",{className:"px-sm flex flex-1",children:l.jsx(hD,{history:h,symbol:e,valence:p,className:"h-auto w-0 flex-1",strokeWidth:u?1.6:1})})}),l.jsx(D,{variant:"baseSemi",className:"px-sm -mb-xs -mt-xs",children:l.jsx(X7,{value:d,format:g,suffix:m})})]})});TE.displayName="KeyTicker";const kve=A.memo(()=>{const e=f.useMemo(()=>[{date:"2025-01-01",close:100},{date:"2025-01-02",close:100}],[]);return l.jsxs(Ln,{className:"pointer-events-none relative","aria-hidden":"true",children:[l.jsx("div",{className:"invisible",children:l.jsx(TE,{symbol:"XXX",name:"XXX",price:100,change:100,history:e})}),l.jsx("div",{className:"absolute inset-0",children:l.jsxs(tr,{className:"py-sm gap-xs flex h-full flex-col",children:[l.jsxs("div",{className:"px-sm",children:[l.jsxs("div",{className:"gap-sm flex items-center justify-between",children:[l.jsx(z,{variant:"offset",className:"shimmer dark:bg-offsetPlus h-4 w-3/5 max-w-24 rounded"}),l.jsx(z,{variant:"offset",className:"shimmer dark:bg-offsetPlus h-5 w-1/4 max-w-12 rounded-full"})]}),l.jsxs("div",{className:"gap-sm mt-xs flex items-center justify-between",children:[l.jsx(z,{variant:"offset",className:"shimmer dark:bg-offsetPlus h-3 w-1/4 max-w-10 rounded"}),l.jsx(z,{variant:"offset",className:"shimmer dark:bg-offsetPlus h-3 w-1/3 max-w-14 rounded"})]})]}),l.jsx("div",{className:"mx-sm my-xs flex-1",children:l.jsx(z,{variant:"offset",className:"shimmer dark:bg-offsetPlus size-full rounded"})}),l.jsx("div",{className:"px-sm",children:l.jsx(z,{variant:"offset",className:"shimmer dark:bg-offsetPlus h-5 w-2/5 max-w-20 rounded"})})]})})]})});kve.displayName="KeyTickerSkeleton";function jyt(e){const t=e+"CollectionProvider",[n,r]=Ga(t),[s,a]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:v,children:x}=y,b=A.useRef(null),_=A.useRef(new Map).current;return l.jsx(s,{scope:v,itemMap:_,collectionRef:b,children:x})};o.displayName=t;const i=e+"CollectionSlot",c=gv(i),u=A.forwardRef((y,v)=>{const{scope:x,children:b}=y,_=a(i,x),w=kn(v,_.collectionRef);return l.jsx(c,{ref:w,children:b})});u.displayName=i;const d=e+"CollectionItemSlot",m="data-radix-collection-item",h=gv(d),p=A.forwardRef((y,v)=>{const{scope:x,children:b,..._}=y,w=A.useRef(null),S=kn(v,w),C=a(d,x);return A.useEffect(()=>(C.itemMap.set(w,{ref:w,..._}),()=>void C.itemMap.delete(w))),l.jsx(h,{[m]:"",ref:S,children:b})});p.displayName=d;function g(y){const v=a(e+"CollectionConsumer",y);return A.useCallback(()=>{const b=v.collectionRef.current;if(!b)return[];const _=Array.from(b.querySelectorAll(`[${m}]`));return Array.from(v.itemMap.values()).sort((C,E)=>_.indexOf(C.ref.current)-_.indexOf(E.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:u,ItemSlot:p},g,r]}var jk="rovingFocusGroup.onEntryFocus",Oyt={bubbles:!1,cancelable:!0},w1="RovingFocusGroup",[lI,Nve,Lyt]=jyt(w1),[Dyt,kE]=Ga(w1,[Lyt]),[Fyt,Uyt]=Dyt(w1),Ave=f.forwardRef((e,t)=>l.jsx(lI.Provider,{scope:e.__scopeRovingFocusGroup,children:l.jsx(lI.Slot,{scope:e.__scopeRovingFocusGroup,children:l.jsx(Byt,{...e,ref:t})})}));Ave.displayName=w1;var Byt=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:i,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...m}=e,h=f.useRef(null),p=kn(t,h),g=_C(a),[y,v]=ti({prop:o,defaultProp:i??null,onChange:c,caller:w1}),[x,b]=f.useState(!1),_=ha(u),w=Nve(n),S=f.useRef(!1),[C,E]=f.useState(0);return f.useEffect(()=>{const M=h.current;if(M)return M.addEventListener(jk,_),()=>M.removeEventListener(jk,_)},[_]),l.jsx(Fyt,{scope:n,orientation:r,dir:g,loop:s,currentTabStopId:y,onItemFocus:f.useCallback(M=>v(M),[v]),onItemShiftTab:f.useCallback(()=>b(!0),[]),onFocusableItemAdd:f.useCallback(()=>E(M=>M+1),[]),onFocusableItemRemove:f.useCallback(()=>E(M=>M-1),[]),children:l.jsx(on.div,{tabIndex:x||C===0?-1:0,"data-orientation":r,...m,ref:p,style:{outline:"none",...e.style},onMouseDown:jt(e.onMouseDown,()=>{S.current=!0}),onFocus:jt(e.onFocus,M=>{const T=!S.current;if(M.target===M.currentTarget&&T&&!x){const I=new CustomEvent(jk,Oyt);if(M.currentTarget.dispatchEvent(I),!I.defaultPrevented){const j=w().filter(O=>O.focusable),N=j.find(O=>O.active),P=j.find(O=>O.id===y),k=[N,P,...j].filter(Boolean).map(O=>O.ref.current);Ive(k,d)}}S.current=!1}),onBlur:jt(e.onBlur,()=>b(!1))})})}),Pve="RovingFocusGroupItem",Rve=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:a,children:o,...i}=e,c=Mm(),u=a||c,d=Uyt(Pve,n),m=d.currentTabStopId===u,h=Nve(n),{onFocusableItemAdd:p,onFocusableItemRemove:g,currentTabStopId:y}=d;return f.useEffect(()=>{if(r)return p(),()=>g()},[r,p,g]),l.jsx(lI.ItemSlot,{scope:n,id:u,focusable:r,active:s,children:l.jsx(on.span,{tabIndex:m?0:-1,"data-orientation":d.orientation,...i,ref:t,onMouseDown:jt(e.onMouseDown,v=>{r?d.onItemFocus(u):v.preventDefault()}),onFocus:jt(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:jt(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){d.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const x=Wyt(v,d.orientation,d.dir);if(x!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let _=h().filter(w=>w.focusable).map(w=>w.ref.current);if(x==="last")_.reverse();else if(x==="prev"||x==="next"){x==="prev"&&_.reverse();const w=_.indexOf(v.currentTarget);_=d.loop?Hyt(_,w+1):_.slice(w+1)}setTimeout(()=>Ive(_))}}),children:typeof o=="function"?o({isCurrentTabStop:m,hasTabStop:y!=null}):o})})});Rve.displayName=Pve;var Vyt={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function $yt(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Wyt(e,t,n){const r=$yt(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Vyt[r]}function Ive(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function Hyt(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var jve=Ave,Ove=Rve,Lve="Toggle",Dve=f.forwardRef((e,t)=>{const{pressed:n,defaultPressed:r,onPressedChange:s,...a}=e,[o,i]=ti({prop:n,onChange:s,defaultProp:r??!1,caller:Lve});return l.jsx(on.button,{type:"button","aria-pressed":o,"data-state":o?"on":"off","data-disabled":e.disabled?"":void 0,...a,ref:t,onClick:jt(e.onClick,()=>{e.disabled||i(!o)})})});Dve.displayName=Lve;var Lu="ToggleGroup",[Fve,LWt]=Ga(Lu,[kE]),Uve=kE(),pD=A.forwardRef((e,t)=>{const{type:n,...r}=e;if(n==="single"){const s=r;return l.jsx(zyt,{...s,ref:t})}if(n==="multiple"){const s=r;return l.jsx(Gyt,{...s,ref:t})}throw new Error(`Missing prop \`type\` expected on \`${Lu}\``)});pD.displayName=Lu;var[Bve,Vve]=Fve(Lu),zyt=A.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},...a}=e,[o,i]=ti({prop:n,defaultProp:r??"",onChange:s,caller:Lu});return l.jsx(Bve,{scope:e.__scopeToggleGroup,type:"single",value:A.useMemo(()=>o?[o]:[],[o]),onItemActivate:i,onItemDeactivate:A.useCallback(()=>i(""),[i]),children:l.jsx($ve,{...a,ref:t})})}),Gyt=A.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},...a}=e,[o,i]=ti({prop:n,defaultProp:r??[],onChange:s,caller:Lu}),c=A.useCallback(d=>i((m=[])=>[...m,d]),[i]),u=A.useCallback(d=>i((m=[])=>m.filter(h=>h!==d)),[i]);return l.jsx(Bve,{scope:e.__scopeToggleGroup,type:"multiple",value:o,onItemActivate:c,onItemDeactivate:u,children:l.jsx($ve,{...a,ref:t})})});pD.displayName=Lu;var[qyt,Kyt]=Fve(Lu),$ve=A.forwardRef((e,t)=>{const{__scopeToggleGroup:n,disabled:r=!1,rovingFocus:s=!0,orientation:a,dir:o,loop:i=!0,...c}=e,u=Uve(n),d=_C(o),m={role:"group",dir:d,...c};return l.jsx(qyt,{scope:n,rovingFocus:s,disabled:r,children:s?l.jsx(jve,{asChild:!0,...u,orientation:a,dir:d,loop:i,children:l.jsx(on.div,{...m,ref:t})}):l.jsx(on.div,{...m,ref:t})})}),yw="ToggleGroupItem",Wve=A.forwardRef((e,t)=>{const n=Vve(yw,e.__scopeToggleGroup),r=Kyt(yw,e.__scopeToggleGroup),s=Uve(e.__scopeToggleGroup),a=n.value.includes(e.value),o=r.disabled||e.disabled,i={...e,pressed:a,disabled:o},c=A.useRef(null);return r.rovingFocus?l.jsx(Ove,{asChild:!0,...s,focusable:!o,active:a,ref:c,children:l.jsx(PQ,{...i,ref:t})}):l.jsx(PQ,{...i,ref:t})});Wve.displayName=yw;var PQ=A.forwardRef((e,t)=>{const{__scopeToggleGroup:n,value:r,...s}=e,a=Vve(yw,n),o={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},i=a.type==="single"?o:void 0;return l.jsx(Dve,{...i,...s,ref:t,onPressedChange:c=>{c?a.onItemActivate(r):a.onItemDeactivate(r)}})}),Yyt=pD,Qyt=Wve;const Xyt=({value:e,onChange:t,id:n,children:r,boxProps:s,className:a=""})=>{const o=i=>{i&&t(i)};return l.jsx(Hve.Provider,{value:{activeValue:e},children:l.jsx(dc,{id:n,children:l.jsx(Yyt,{onValueChange:o,type:"single",value:e,asChild:!0,children:l.jsx(_e.div,{layout:!0,layoutRoot:!0,children:l.jsx(z,{className:B("border-subtler flex rounded-lg border p-[2px]",a),...s,children:r})})})})})},Zyt=({value:e,icon:t,className:n="",children:r})=>{const s="relative text-quiet hover:text-foreground data-[state=on]:text-foreground flex h-[32px] min-w-[32px] p-sm items-center justify-center duration-150 active:scale-95",a=f.useContext(Hve);return l.jsx(Qyt,{asChild:!0,value:e,children:l.jsxs("button",{className:B(s,n),children:[l.jsxs("span",{className:"gap-xs relative z-[2] flex",children:[Array.isArray(t)?t.map((o,i)=>l.jsx(be,{icon:o,size:"sm"},i)):t?l.jsx(be,{icon:t,size:"sm"}):null,r]}),a.activeValue===e&&l.jsx(_e.div,{layout:!0,layoutId:"toggle",className:"absolute inset-0 z-[1]",transition:{duration:.15,ease:wu},children:l.jsx("div",{className:"absolute inset-0 rounded-md bg-current opacity-10"})})]})})},Hve=cl("ToggleGroupContext",{activeValue:""}),Jyt=Xyt,evt=Zyt,RQ={Root:Jyt,Item:evt},E_=["1d","5d","1m","6m","ytd","1y","5y","max"],DWt=E_.map(e=>({text:e.toUpperCase(),value:e})),FWt=f.memo(function({id:t,periods:n,period:r,setPeriod:s}){return l.jsx("div",{className:"gap-x-sm flex items-center rounded-lg backdrop-blur-sm",children:l.jsx(RQ.Root,{className:"shadow-subtle",value:r,id:`${t}-periods`,onChange:a=>{s(a)},children:n.map(a=>l.jsx(RQ.Item,{value:a.value,className:"bg-transparent",children:l.jsx(D,{variant:"tiny",color:r===a.value?"default":"light",className:"translate-y-px duration-150",children:a.text})},`${a.value}`))})})}),pb=new Set;async function tvt({period:e,symbols:t,headers:n,existingFailedPeriods:r=[],reason:s}){const a=E_.indexOf(e),o=[...r].filter(i=>!pb.has(i));for(let i=a;i<E_.length;i++){const c=E_[i];if(o.includes(c)&&!pb.has(c))continue;const u=await ne.GET("/rest/finance/prices/{period}/{market_identifiers}",s,{params:{path:{period:c,market_identifiers:t.join(",")}},headers:n,timeoutMs:gn,numRetries:dn});if(u.error){pb.has(c)||o.push(c),ee.error("Failed to fetch FMP prices",{url:`/rest/finance/prices/${c}/${t.join(",")}`,error:u.error,status:u.response.status,statusText:u.response.statusText});continue}return pb.add(c),{...u.data.data}}return null}const zve="stock-widget-quote-cache",Gve="stock-widget-prices-cache",M_="NVDA",nvt=60*1e3,rvt=5*60*1e3,svt=60*1e3,avt=30*1e3,ovt=5*60*1e3,ivt=60*1e3,lvt=150,IQ=50,cvt=24*60*60*1e3,uvt=.1,dvt=10,fvt=5;function mvt(e){try{const t=Ve.getItem(`${zve}-${e}`);if(t){const n=JSON.parse(t);if(Date.now()-n.timestamp<nvt)return n.data}}catch{}return null}function hvt(e,t){try{const n={symbol:e,data:t,timestamp:Date.now()};Ve.setItem(`${zve}-${e}`,JSON.stringify(n))}catch{}}function pvt(e,t){try{const n=Ve.getItem(`${Gve}-${e}-${t}`);if(n){const r=JSON.parse(n);if(Date.now()-r.timestamp<rvt)return r.data}}catch{}return null}function gvt(e,t,n){try{const r={symbol:e,period:t,data:n,timestamp:Date.now()};Ve.setItem(`${Gve}-${e}-${t}`,JSON.stringify(r))}catch{}}function yvt(e="widget",t="default"){if(e!=="widget")return{version:1,symbol:M_};const n=Up("STOCK",t);return n?{version:1,symbol:n.symbol??M_}:{version:1,symbol:M_}}function vvt(e,t="widget",n="default"){t==="widget"&&Bp("STOCK",n,{version:1,symbol:e.symbol})}const xvt=(e="default",t="widget")=>{const n=yvt(t,e),[r,s]=f.useState(n),a="stock-widget",{data:o}=rme({watchlistType:"FINANCE",reason:a}),i=r.symbol||o?.[0]?.identifier||M_,c=mvt(i),u=pvt(i,"1d"),{data:d,isLoading:m}=Ke({queryKey:["finance/quote",i],queryFn:async()=>{const E=await Oye({symbol:i,withHistory:!0,historyPeriod:"1d",historyOffset:0});return E&&hvt(i,E),E},refetchInterval:svt,staleTime:avt,refetchOnMount:!0,refetchOnWindowFocus:!0,refetchOnReconnect:!0,enabled:!0,placeholderData:c}),{data:h,isLoading:p}=Ke({queryKey:["finance/prices",i,"1d"],queryFn:async()=>{const E=await tvt({period:"1d",symbols:[i],reason:"stock-widget"});return E&&gvt(i,"1d",E),E},refetchInterval:ovt,staleTime:ivt,refetchOnMount:!0,refetchOnWindowFocus:!0,refetchOnReconnect:!0,enabled:!0,placeholderData:u}),g=d||c,y=h||u,v=!!(d&&h),x={symbol:i,price:"---.--",changesPercentage:"--%",change:"--$",exchange:"--",currency:"USD"},b={history:{prices:[{symbol:i,entries:Array.from({length:IQ},(E,M)=>({date:new Date(Date.now()-(IQ-1-M)*cvt).toISOString(),price:lvt+Math.sin(M*uvt)*dvt+Math.random()*fvt})),exchange:"--",currency:"USD"}]}},_=g||x,w=y||b,S=f.useMemo(()=>w?.history?.prices?w.history.prices.map(E=>({symbol:E.symbol,entries:E.entries.map(M=>({date:M.date,price:M.price})).sort((M,T)=>new Date(M.date).getTime()-new Date(T.date).getTime()),exchange:E.exchange||_?.exchange||"",currency:E.currency||_?.currency||"USD"})):[],[w,_]),C=f.useCallback(E=>{s(E),vvt(E,t,e)},[s,t,e]);return f.useMemo(()=>({symbol:i,quote:_,prices:S,isLoading:m||p,hasError:!1,hasRealData:v,stockSettings:r,updateStockSettings:C}),[i,_,S,m,p,v,r,C])},gD=A.memo(({widgetId:e,showSettings:t,setShowSettings:n,context:r="widget"})=>{const{$t:s}=X(),{symbol:a,quote:o,prices:i,isLoading:c,updateStockSettings:u}=xvt(e,r),d=f.useCallback(b=>{u({symbol:b,version:1})},[u]),m=f.useMemo(()=>({style:"currency",currency:o.currency??"USD",minimumFractionDigits:o.price<1e3?2:0,maximumFractionDigits:2}),[o]),h=i[0].entries,p=h[0].price,y=h[h.length-1].price>(o?.previousClose??p)?"positive":"negative",v=l.jsx("div",{className:B("h-full transform-gpu rounded-2xl"),children:l.jsxs("div",{className:"gap-xs flex h-full flex-1 flex-col justify-between p-2.5 pb-0 drop-shadow-sm",style:{zoom:r==="thumbnail"?.75:1},children:[l.jsxs("div",{className:"flex flex-col gap-px",children:[l.jsxs("div",{className:"gap-sm flex items-center justify-between",children:[l.jsx(D,{variant:"smallBold",className:"min-w-0 truncate",children:a}),o&&!c&&typeof o.changesPercentage=="number"&&l.jsx(dw,{change:o.changesPercentage,variant:"micro",includeIcon:!0,className:"-translate-y-0.5 translate-x-0.5 rounded-md"})]}),l.jsx(D,{variant:"tinyRegular",color:"light",className:"min-w-0 truncate whitespace-nowrap",children:c?s({defaultMessage:"Loading...",id:"gjBiyjshwX"}):o?.name||a})]}),i.length>0&&i[0]?.entries?.length>0&&o?.price&&typeof o.price=="number"&&l.jsx("div",{className:"pointer-events-none",children:l.jsx(hD,{history:h.map(b=>({date:b.date,close:b.price})),symbol:a,valence:y,width:140,height:60,strokeWidth:1.6,className:"h-auto w-full"})}),o?.price&&typeof o.price=="number"?l.jsx(D,{variant:"section-title",className:"-translate-x-two -translate-y-px",children:l.jsx("span",{className:"font-mono",children:l.jsx(nu,{value:o.price,format:m,animated:!0})})}):o?.price?l.jsx(D,{variant:"page-title",className:"-translate-x-two -translate-y-px",children:l.jsx("span",{className:"font-mono text-xl",children:o.price})}):null]})}),x=f.useCallback(()=>n?.(!1),[n]);return r==="thumbnail"?v:l.jsxs(l.Fragment,{children:[l.jsx(tr,{shadow:!0,className:"active:!bg-offset dark:active:!bg-offsetPlus aspect-[1/1] w-full overflow-hidden !rounded-2xl",children:l.jsx(at,{draggable:!1,href:`/finance/${a}`,className:"relative block size-full",children:l.jsx("div",{className:"absolute inset-0 select-none",children:v})})}),l.jsx(st,{children:t&&l.jsx(ige,{onClose:x,onSelectStock:d,currentSymbol:a})})]})});gD.displayName="StockWidget";const qve="pplx-top-sites-cache",bvt=()=>{try{const e=Ve.getItem(qve);return e?JSON.parse(e):[]}catch{return[]}},_vt=e=>{Ve.setItem(qve,JSON.stringify(e))},Kve=({maxUrls:e=15}={})=>{const t=hr(),n=bvt();return Ke({queryKey:["topMostUrls"],queryFn:async()=>{const s=(await P9e({cometBrowser:t,maxUrls:e}))?.reduce((o,i)=>{const u=new URL(i.url).hostname;return(!o[u]||o[u].visitCount<i.visitCount)&&(o[u]=i),o},{})??{},a=Object.values(s);return _vt(a),a},placeholderData:n,staleTime:5*60*1e3})},cI=A.memo(({hostname:e,title:t,context:n})=>{const r=["teal","maroon","purple","orange","blue"],s=e.split("").reduce((d,m)=>m.charCodeAt(0)+((d<<5)-d),0),a=Math.abs(s)%r.length,o=r[a],i=(t||e)[0].toUpperCase(),c={teal:"bg-[#21808D] dark:bg-[#32B8C6]",maroon:"bg-[#944454] dark:bg-[#FFB3C9]",purple:"bg-[#865D95] dark:bg-[#C48ED8]",orange:"bg-[#DB7100] dark:bg-[#FFAB44]",blue:"bg-[#19789E] dark:bg-[#54B4E3]"},u={teal:"text-[#B1EFF7] dark:text-[#082125]",maroon:"text-[#FFDFE9] dark:text-[#2D171B]",purple:"text-[#FFE4FF] dark:text-[#2E1836]",orange:"text-[#FFE6C8] dark:text-[#3B0F00]",blue:"text-[#CEF4FF] dark:text-[#071F2B]"};return l.jsx("span",{className:`pt-two flex select-none items-center justify-center rounded-full font-sans text-xs font-medium ${c[o]} ${u[o]} ${n==="thumbnail"?"size-4":"size-6"}`,children:i})});cI.displayName="FaviconFallback";const jQ=4,NE=A.memo(({context:e,disabled:t})=>{const[n,r]=f.useState({}),{data:s=[]}=Kve();if(e==="thumbnail")return l.jsx("div",{className:"gap-sm grid size-full grid-rows-3",children:s.length>=3?s.slice(0,3).map(o=>{const c=new URL(o.url).host;return l.jsx(uy,{width:"w-16",disabled:t,thumbnail:n[o.url]?l.jsx(cI,{hostname:c,title:o.title,context:"thumbnail"}):l.jsx("img",{src:Ev(o.url),alt:"Favicon",className:"size-full",onError:()=>{r(u=>({...u,[o.url]:!0}))}})},o.url)}):l.jsxs(l.Fragment,{children:[l.jsx(uy,{width:"w-16",disabled:t}),l.jsx(uy,{width:"w-12",disabled:t}),l.jsx(uy,{width:"w-14",disabled:t})]})});const a=Math.max(jQ-s.length,0);return l.jsxs("div",{className:B("flex w-full flex-wrap items-center justify-center gap-3",{"grid grid-cols-[repeat(auto-fill,minmax(160px,1fr))]":e==="sortable-widgets"}),children:[s.slice(0,jQ).map(o=>{const c=new URL(o.url).host,u=ffe(c);return l.jsx(bn,{tooltipText:o.title||o.url,tooltipLayout:"bottom",asChild:!0,children:l.jsx(at,{href:o.url,children:l.jsxs(tr,{shadow:!0,className:B("p-sm gap-sm flex w-full select-none items-center rounded-lg border"),bgHover:"offset",children:[n[o.url]?l.jsx(cI,{hostname:c,title:o.title}):l.jsx("img",{src:Ev(o.url),alt:"Favicon",className:"size-6 rounded-md",onError:()=>{r(d=>({...d,[o.url]:!0}))}}),l.jsx(D,{variant:"tiny",className:"line-clamp-1 text-left capitalize",color:"light",children:u.replace(/\./g," ")})]})})},o.url)}),new Array(a).fill("").map((o,i)=>l.jsx("div",{className:"h-[42px]"},i))]})});NE.displayName="TopMostUrls";const uy=A.memo(({width:e,thumbnail:t,disabled:n})=>l.jsxs(tr,{shadow:!0,fullBleed:!0,className:"gap-sm px-sm flex flex-row items-center !rounded-lg",children:[l.jsx("div",{className:B("empty:bg-offsetPlus size-4 overflow-hidden rounded-[4px]",{"opacity-50":n}),children:t}),l.jsx("div",{className:B("bg-offsetPlus h-1.5 rounded-full",e,{"opacity-50":n})})]}));uy.displayName="TopMostUrlsThumbnailItem";var Ok={},OQ;function wvt(){return OQ||(OQ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="sun",r=512,s=512,a=[9728],o="f185",i="M375.7 19.7c-1.5-8-6.9-14.7-14.4-17.8s-16.1-2.2-22.8 2.4L256 61.1 173.5 4.2c-6.7-4.6-15.3-5.5-22.8-2.4s-12.9 9.8-14.4 17.8l-18.1 98.5L19.7 136.3c-8 1.5-14.7 6.9-17.8 14.4s-2.2 16.1 2.4 22.8L61.1 256 4.2 338.5c-4.6 6.7-5.5 15.3-2.4 22.8s9.8 13 17.8 14.4l98.5 18.1 18.1 98.5c1.5 8 6.9 14.7 14.4 17.8s16.1 2.2 22.8-2.4L256 450.9l82.5 56.9c6.7 4.6 15.3 5.5 22.8 2.4s12.9-9.8 14.4-17.8l18.1-98.5 98.5-18.1c8-1.5 14.7-6.9 17.8-14.4s2.2-16.1-2.4-22.8L450.9 256l56.9-82.5c4.6-6.7 5.5-15.3 2.4-22.8s-9.8-12.9-17.8-14.4l-98.5-18.1L375.7 19.7zM269.6 110l65.6-45.2 14.4 78.3c1.8 9.8 9.5 17.5 19.3 19.3l78.3 14.4L402 242.4c-5.7 8.2-5.7 19 0 27.2l45.2 65.6-78.3 14.4c-9.8 1.8-17.5 9.5-19.3 19.3l-14.4 78.3L269.6 402c-8.2-5.7-19-5.7-27.2 0l-65.6 45.2-14.4-78.3c-1.8-9.8-9.5-17.5-19.3-19.3L64.8 335.2 110 269.6c5.7-8.2 5.7-19 0-27.2L64.8 176.8l78.3-14.4c9.8-1.8 17.5-9.5 19.3-19.3l14.4-78.3L242.4 110c8.2 5.7 19 5.7 27.2 0zM256 368a112 112 0 1 0 0-224 112 112 0 1 0 0 224zM192 256a64 64 0 1 1 128 0 64 64 0 1 1 -128 0z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faSun=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(Ok)),Ok}var S1=wvt(),Lk={},LQ;function Svt(){return LQ||(LQ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="cloud-bolt",r=512,s=512,a=[127785,"thunderstorm"],o="f76c",i="M184 48c-39.8 0-72 32.2-72 72c0 2.6 .1 5.2 .4 7.7c1.3 12-6.6 23.1-18.3 25.9C67.6 159.9 48 183.7 48 212c0 32.2 25.3 58.4 57.1 59.9c.3 0 .7 0 1 .1l1.9 0 95.2 0-60 48L108 320l-4 0c-1.2 0-2.4-.1-3.5-.3C44.3 315.9 0 269.1 0 212c0-44.1 26.4-81.9 64.2-98.7C67.7 50.1 120 0 184 0c33.9 0 64.5 14.1 86.3 36.6C285.1 28.6 302 24 320 24c46.9 0 86.5 31 99.5 73.7C472.1 106.9 512 152.8 512 208c0 61.9-50.1 112-112 112l-48 0-18.3 0 24-48 42.3 0c35.3 0 64-28.7 64-64s-28.6-64-64-64c0 0 0 0 0 0l-.3 0c-12.4 0-22.7-9.3-23.9-21.6C372.9 94.1 349 72 320 72c-14.7 0-28.1 5.7-38.1 15c-5.3 4.9-12.4 7.2-19.5 6.2s-13.4-5-17.2-11.1C232.5 61.6 209.8 48 184 48zM330.1 227.6c5.8 4.7 7.6 12.9 4.3 19.6L281.9 352l70.1 0c6.8 0 12.8 4.3 15.1 10.7s.2 13.5-5.1 17.8l-160 128c-5.9 4.7-14.2 4.7-20.1-.1s-7.6-12.9-4.3-19.6L230.1 384 160 384c-6.8 0-12.8-4.3-15.1-10.7s-.2-13.5 5.1-17.8l160-128c5.9-4.7 14.2-4.7 20.1 .1z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faCloudBolt=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(Lk)),Lk}var DQ=Svt(),Dk={},FQ;function Cvt(){return FQ||(FQ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="cloud-bolt-moon",r=576,s=512,a=["thunderstorm-moon"],o="f76d",i="M361.4 79.9c31.2 18.7 52.5 52.2 54.3 90.8c33.3 15.8 57.6 47.5 63 85.3c.8 0 1.6 0 2.4 0c34.9 0 66.7-13.8 89.9-36.1c5.1-4.9 6.4-12.5 3.2-18.7s-10.1-9.7-17-8.6c-4.9 .8-10 1.3-15.2 1.3c-49 0-88.4-39.3-88.4-87.4c0-32.6 18-61.1 44.9-76.1c6.1-3.4 9.3-10.5 7.8-17.4s-7.3-12-14.3-12.6c-3.6-.3-7.3-.5-10.9-.5C427.1 0 380.6 33 361.4 79.9zM128.1 160c0-26.5 21.5-48 48-48c22.8 0 41.9 15.9 46.8 37.2c2.1 8.9 9 15.9 18 18s18.3-1.2 24.1-8.3c7.4-9.1 18.6-14.9 31.1-14.9c20.3 0 37.2 15.2 39.7 34.8c.1 .6 .2 1.2 .3 1.7l0 1.1c0 .3 0 .6 0 .9c0 .5 0 1 0 1.5s0 1 0 1.5c0 .3 0 .6 0 .9l0 30.2c0 7 3 13.6 8.3 18.1s12.2 6.6 19.1 5.6c1.5-.2 3-.3 4.6-.3c17.7 0 32 14.3 32 32s-14.3 32-32 32c-.4 0-.9 0-1.3 0c-.3 0-.6 0-1 0l-72.1 0-8 16.1 18.3 0c20.3 0 38.4 12.8 45.2 31.9l16.1 0c.9 0 1.8 0 2.7 0c44.2 0 80-35.8 80-80c0-38.7-27.5-71-64-78.4l0-6.9c0-.9 0-1.8 0-2.7s0-1.8 0-2.7l0-5.3c0-2.9-.5-5.7-1.5-8.3C374.9 126.9 339.1 96 296.1 96c-14.7 0-28.5 3.6-40.6 9.9C238.1 80.6 209.1 64 176.1 64c-52.6 0-95.4 42.4-96 94.8l-.2 2.5C34.6 169 .1 208.5 .1 256c0 43.4 28.8 80 68.3 91.9c3.1-6.6 7.6-12.6 13.6-17.4l33.3-26.6-16.4 0c-.3 0-.6 0-.9 0c-.6 0-1.2 0-1.9 0c-26.5 0-48-21.5-48-48s21.5-48 48-48c1.4 0 2.7 .1 4 .2c13.2 1.1 24.8-8.7 25.9-21.9l2-23.8c.1-.8 .1-1.6 .1-2.5zm154 67.6c-5.8-4.7-14.2-4.7-20.1-.1l-160 128c-5.3 4.2-7.4 11.4-5.1 17.8s8.3 10.7 15.1 10.7l70.1 0L129.7 488.8c-3.4 6.7-1.6 14.9 4.3 19.6s14.2 4.7 20.1 .1l160-128c5.3-4.2 7.4-11.4 5.1-17.8s-8.3-10.7-15.1-10.7l-70.1 0 52.4-104.8c3.4-6.7 1.6-14.9-4.3-19.6z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faCloudBoltMoon=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(Dk)),Dk}var Evt=Cvt(),Fk={},UQ;function Mvt(){return UQ||(UQ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="cloud-bolt-sun",r=640,s=512,a=["thunderstorm-sun"],o="f76e",i="M294.2 1.2c5.1 2.1 8.7 6.7 9.6 12.1l10.4 62.4c-23.3 10.8-42.9 28.4-56 50.3c-14.6-9-31.8-14.1-50.2-14.1c-53 0-96 43-96 96c0 35.5 19.3 66.6 48 83.2c.8 31.8 13.2 60.7 33.1 82.7l-56 39.2c-4.5 3.1-10.3 3.8-15.4 1.6s-8.7-6.7-9.6-12.1L98.1 317.9 13.4 303.8c-5.4-.9-10-4.5-12.1-9.6s-1.5-10.9 1.6-15.4L52.5 208 2.9 137.2c-3.2-4.5-3.8-10.3-1.6-15.4s6.7-8.7 12.1-9.6L98.1 98.1l14.1-84.7c.9-5.4 4.5-10 9.6-12.1s10.9-1.5 15.4 1.6L208 52.5 278.8 2.9c4.5-3.2 10.3-3.8 15.4-1.6zM208 144c13.8 0 26.7 4.4 37.1 11.9c-1.2 4.1-2.2 8.3-3 12.6c-37.9 14.6-67.2 46.6-77.8 86.4C151.8 243.1 144 226.5 144 208c0-35.3 28.7-64 64-64zm112.1 48c0 .8 0 1.7-.1 2.5l-2 23.8c-1.1 13.2-12.7 23-25.9 21.9c-1.3-.1-2.6-.2-4-.2c-26.5 0-48 21.5-48 48c0 20.6 12.9 38.1 31.1 44.9c-12.6 11.7-17.9 29.3-14 46c-37.9-12.9-65.1-48.7-65.1-90.9c0-47.5 34.5-86.9 79.8-94.6l.2-2.5c.6-52.5 43.4-94.8 96-94.8c33 0 62 16.6 79.3 41.9c12.2-6.3 26-9.9 40.6-9.9c43 0 78.8 30.9 86.5 71.7c1 2.6 1.5 5.4 1.5 8.3l0 5.3c0 .9 0 1.8 0 2.7s0 1.8 0 2.7l0 6.9c36.5 7.4 64 39.7 64 78.4c0 44.2-35.8 80-80 80c-.9 0-1.8 0-2.7 0l-16.1 0c3.5-10.1 3.7-21.3 0-31.8c-2.1-6.1-5.4-11.6-9.6-16.2l26.1 0c.3 0 .6 0 1 0c.4 0 .9 0 1.3 0c17.7 0 32-14.3 32-32s-14.3-32-32-32c-1.6 0-3.1 .1-4.6 .3c-6.9 1-13.9-1.1-19.1-5.6s-8.3-11.2-8.3-18.1l0-30.2c0-.3 0-.6 0-.9c0-.5 0-1 0-1.5s0-1 0-1.5c0-.3 0-.6 0-.9l0-1.1c-.1-.6-.2-1.1-.3-1.7c-2.5-19.6-19.3-34.8-39.7-34.8c-12.6 0-23.8 5.8-31.1 14.9c-.6 .7-1.1 1.3-1.8 1.9c-6.1 1.1-12 3.5-17.4 7c-1.6 0-3.3-.2-4.9-.6c-8.9-2.1-15.9-9.1-18-18c-4.9-21.3-24-37.2-46.8-37.2c-26.5 0-48 21.5-48 48zm154 35.6c5.8 4.7 7.6 12.9 4.2 19.6L425.9 352l70.1 0c6.8 0 12.9 4.3 15.1 10.7s.2 13.5-5.1 17.8l-160 128c-5.9 4.7-14.2 4.7-20.1-.1s-7.6-12.9-4.3-19.6L374.1 384 304 384c-6.8 0-12.8-4.3-15.1-10.7s-.2-13.5 5.1-17.8l160-128c5.9-4.7 14.2-4.7 20.1 .1z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faCloudBoltSun=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(Fk)),Fk}var Tvt=Mvt(),Uk={},BQ;function kvt(){return BQ||(BQ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="cloud-drizzle",r=512,s=512,a=[],o="f738",i="M112 120c0-39.8 32.2-72 72-72c25.8 0 48.5 13.6 61.2 34c3.8 6.1 10.1 10.2 17.2 11.1s14.3-1.3 19.5-6.2c10-9.3 23.4-15 38.1-15c29 0 52.9 22.1 55.7 50.4c1.2 12.3 11.6 21.7 23.9 21.6l.3 0s0 0 0 0c35.3 0 64 28.7 64 64s-28.7 64-64 64l-292 0-1.9 0c-.3 0-.7-.1-1-.1C73.3 270.4 48 244.2 48 212c0-28.3 19.6-52.1 46.1-58.4c11.8-2.8 19.6-13.9 18.3-25.9c-.3-2.5-.4-5.1-.4-7.7zM184 0C120 0 67.7 50.1 64.2 113.3C26.4 130.1 0 167.9 0 212c0 57.1 44.3 103.9 100.5 107.7c1.2 .2 2.3 .3 3.5 .3l4 0 292 0c61.9 0 112-50.1 112-112c0-55.2-39.9-101.1-92.5-110.3C406.5 55 366.9 24 320 24c-18 0-34.9 4.6-49.7 12.6C248.5 14.1 217.9 0 184 0zM88 376c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 48c0 13.3 10.7 24 24 24s24-10.7 24-24l0-48zm96 64c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 48c0 13.3 10.7 24 24 24s24-10.7 24-24l0-48zm168-24c-13.3 0-24 10.7-24 24l0 48c0 13.3 10.7 24 24 24s24-10.7 24-24l0-48c0-13.3-10.7-24-24-24zm-72-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 48c0 13.3 10.7 24 24 24s24-10.7 24-24l0-48zm168-24c-13.3 0-24 10.7-24 24l0 48c0 13.3 10.7 24 24 24s24-10.7 24-24l0-48c0-13.3-10.7-24-24-24z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faCloudDrizzle=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(Uk)),Uk}var Nvt=kvt(),Bk={},VQ;function Avt(){return VQ||(VQ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="cloud-fog",r=640,s=512,a=[127787,"fog"],o="f74e",i="M176 120c0-39.8 32.2-72 72-72c25.8 0 48.5 13.6 61.2 34c3.8 6.1 10.1 10.2 17.2 11.1s14.3-1.3 19.5-6.2c10-9.3 23.4-15 38.1-15c29 0 52.9 22.1 55.7 50.4c1.2 12.3 11.6 21.7 23.9 21.6l.3 0s0 0 0 0c35.3 0 64 28.7 64 64s-28.7 64-64 64l-292 0-1.9 0c-.3 0-.7-.1-1-.1C137.3 270.4 112 244.2 112 212c0-28.3 19.6-52.1 46.1-58.4c11.8-2.8 19.6-13.9 18.3-25.9c-.3-2.5-.4-5.1-.4-7.7zM248 0C184 0 131.7 50.1 128.2 113.3C90.4 130.1 64 167.9 64 212c0 57.1 44.3 103.9 100.5 107.7c1.2 .2 2.3 .3 3.5 .3l4 0 292 0c61.9 0 112-50.1 112-112c0-55.2-39.9-101.1-92.5-110.3C470.5 55 430.9 24 384 24c-18 0-34.9 4.6-49.7 12.6C312.5 14.1 281.9 0 248 0zM0 392c0 13.3 10.7 24 24 24l528 0c13.3 0 24-10.7 24-24s-10.7-24-24-24L24 368c-13.3 0-24 10.7-24 24zm64 96c0 13.3 10.7 24 24 24l112 0c13.3 0 24-10.7 24-24s-10.7-24-24-24L88 464c-13.3 0-24 10.7-24 24zm208 0c0 13.3 10.7 24 24 24l320 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-320 0c-13.3 0-24 10.7-24 24z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faCloudFog=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(Bk)),Bk}var Pvt=Avt(),Vk={},$Q;function Rvt(){return $Q||($Q=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="cloud-hail",r=512,s=512,a=[],o="f739",i="M112 120c0-39.8 32.2-72 72-72c25.8 0 48.5 13.6 61.2 34c3.8 6.1 10.1 10.2 17.2 11.1s14.3-1.3 19.5-6.2c10-9.3 23.4-15 38.1-15c29 0 52.9 22.1 55.7 50.4c1.2 12.3 11.6 21.7 23.9 21.6l.3 0s0 0 0 0c35.3 0 64 28.7 64 64s-28.7 64-64 64l-292 0-1.9 0c-.3 0-.7-.1-1-.1C73.3 270.4 48 244.2 48 212c0-28.3 19.6-52.1 46.1-58.4c11.8-2.8 19.6-13.9 18.3-25.9c-.3-2.5-.4-5.1-.4-7.7zM184 0C120 0 67.7 50.1 64.2 113.3C26.4 130.1 0 167.9 0 212c0 57.1 44.3 103.9 100.5 107.7c1.2 .2 2.3 .3 3.5 .3l4 0 292 0c61.9 0 112-50.1 112-112c0-55.2-39.9-101.1-92.5-110.3C406.5 55 366.9 24 320 24c-18 0-34.9 4.6-49.7 12.6C248.5 14.1 217.9 0 184 0zM160 384a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm128 0a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm96 32a32 32 0 1 0 0-64 32 32 0 1 0 0 64zM96 480a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm96 32a32 32 0 1 0 0-64 32 32 0 1 0 0 64zm160-32a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faCloudHail=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(Vk)),Vk}var Ivt=Rvt(),$k={},WQ;function jvt(){return WQ||(WQ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="cloud-moon-rain",r=576,s=512,a=[],o="f73c",i="M353.7 107.6c35.4 17.6 60.2 53.3 62.1 95.1c23.2 11 42 29.7 53.1 52.7c4 .4 8.1 .6 12.3 .6c34.9 0 66.7-13.8 89.9-36.1c5.1-4.9 6.4-12.5 3.2-18.7s-10.1-9.7-17-8.6c-4.9 .8-10 1.3-15.2 1.3c-49 0-88.4-39.3-88.4-87.4c0-32.6 18-61.1 44.9-76.1c6.1-3.4 9.3-10.5 7.8-17.4s-7.3-12-14.3-12.6c-3.6-.3-7.3-.5-10.9-.5C417 0 363.5 46.5 353.7 107.6zM85.4 420.1c-11-7.4-25.9-4.4-33.3 6.7l-32 48c-7.4 11-4.4 25.9 6.7 33.3s25.9 4.4 33.3-6.7l32-48c7.4-11 4.4-25.9-6.7-33.3zm96 0c-11-7.4-25.9-4.4-33.3 6.7l-32 48c-7.4 11-4.4 25.9 6.7 33.3s25.9 4.4 33.3-6.7l32-48c7.4-11 4.4-25.9-6.7-33.3zm96 0c-11-7.4-25.9-4.4-33.3 6.7l-32 48c-7.4 11-4.4 25.9 6.7 33.3s25.9 4.4 33.3-6.7l32-48c7.4-11 4.4-25.9-6.7-33.3zm96 0c-11-7.4-25.9-4.4-33.3 6.7l-32 48c-7.4 11-4.4 25.9 6.7 33.3s25.9 4.4 33.3-6.7l32-48c7.4-11 4.4-25.9-6.7-33.3zM128.1 192c0-26.5 21.5-48 48-48c22.8 0 41.9 15.9 46.8 37.2c2.1 8.9 9 15.9 18 18s18.3-1.2 24.1-8.3c7.4-9.1 18.6-14.9 31.1-14.9c20.3 0 37.2 15.2 39.7 34.8c.1 .6 .2 1.2 .3 1.7l0 1.1c0 .3 0 .6 0 .9c0 .5 0 1 0 1.5s0 1 0 1.5c0 .3 0 .6 0 .9l0 30.2c0 7 3 13.6 8.3 18.1s12.2 6.6 19.1 5.6c1.5-.2 3-.3 4.6-.3c17.7 0 32 14.3 32 32s-14.3 32-32 32c-.4 0-.9 0-1.3 0c-.2 0-.4 0-.6 0c-.1 0-.2 0-.4 0l-266.9 0c-.3 0-.6 0-.9 0c-.6 0-1.2 0-1.9 0c-26.5 0-48-21.5-48-48s21.5-48 48-48c1.4 0 2.7 .1 4 .2c13.2 1.1 24.8-8.7 25.9-21.9l2-23.8c.1-.8 .1-1.6 .1-2.5zm48-96c-52.6 0-95.4 42.4-96 94.8l-.2 2.5C34.6 201 .1 240.5 .1 288c0 53 43 96 96 96c1.1 0 2.2 0 3.2-.1l266 0c.9 0 1.8 0 2.7 0c44.2 0 80-35.8 80-80c0-38.7-27.5-71-64-78.4l0-6.9c0-.9 0-1.8 0-2.7s0-1.8 0-2.7l0-5.3c0-2.9-.5-5.7-1.5-8.3c-7.7-40.8-43.4-71.7-86.5-71.7c-14.7 0-28.5 3.6-40.6 9.9C238.1 112.6 209.1 96 176.1 96z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faCloudMoonRain=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}($k)),$k}var Ovt=jvt(),Wk={},HQ;function Lvt(){return HQ||(HQ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="clouds",r=640,s=512,a=[],o="f744",i="M272 112c0 .7 0 1.4 0 2c-.3 10.3 6 19.7 15.6 23.2s20.5 .6 27-7.4c8.8-10.9 22.3-17.9 37.4-17.9c26.5 0 48 21.5 48 48c0 8.7-2.3 16.8-6.3 23.8c3.6 2.3 7.1 4.8 10.6 7.4c12.8-4.4 26.5-6.8 40.7-7.2c2-7.7 3-15.7 3-24c0-53-43-96-96-96c-14 0-27.2 3-39.2 8.4C296.8 30.1 255.9 0 208 0C151.6 0 104.9 41.7 97.1 96L96 96C43 96 0 139 0 192s43 96 96 96l65.9 0c2.7-17.1 8.3-33.3 16.2-48L96 240c-26.5 0-48-21.5-48-48s21.5-48 48-48c5.9 0 11.4 1 16.6 2.9c7.9 2.9 16.8 1.5 23.4-3.8s9.9-13.7 8.7-22c-.4-2.9-.6-6-.6-9.1c0-35.3 28.7-64 64-64s64 28.7 64 64zM240 312c0-39.8 32.2-72 72-72c25.8 0 48.5 13.6 61.2 34c3.8 6.1 10.1 10.2 17.2 11.1s14.3-1.3 19.5-6.2c10-9.3 23.4-15 38.1-15c29 0 52.9 22.1 55.7 50.4c1.2 12.3 11.6 21.7 23.9 21.6l.3 0s0 0 0 0c35.3 0 64 28.7 64 64s-28.7 64-64 64l-292 0-1.9 0c-.3 0-.7-.1-1-.1C201.3 462.4 176 436.2 176 404c0-28.3 19.6-52.1 46.1-58.4c11.8-2.8 19.6-13.9 18.3-25.9c-.3-2.5-.4-5.1-.4-7.7zm72-120c-64 0-116.3 50.1-119.8 113.3C154.4 322.1 128 359.9 128 404c0 57.1 44.3 103.9 100.5 107.7c1.2 .2 2.3 .3 3.5 .3l4 0 292 0c61.9 0 112-50.1 112-112c0-55.2-39.9-101.1-92.5-110.3C534.5 247 494.9 216 448 216c-18 0-34.9 4.6-49.7 12.6C376.5 206.1 345.9 192 312 192z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faClouds=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(Wk)),Wk}var Dvt=Lvt(),Hk={},zQ;function Fvt(){return zQ||(zQ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="cloud-showers",r=512,s=512,a=[],o="f73f",i="M112 120c0-39.8 32.2-72 72-72c25.8 0 48.5 13.6 61.2 34c3.8 6.1 10.1 10.2 17.2 11.1s14.3-1.3 19.5-6.2c10-9.3 23.4-15 38.1-15c29 0 52.9 22.1 55.7 50.4c1.2 12.3 11.6 21.7 23.9 21.6l.3 0s0 0 0 0c35.3 0 64 28.7 64 64s-28.7 64-64 64l-292 0-1.9 0c-.3 0-.7-.1-1-.1C73.3 270.4 48 244.2 48 212c0-28.3 19.6-52.1 46.1-58.4c11.8-2.8 19.6-13.9 18.3-25.9c-.3-2.5-.4-5.1-.4-7.7zM184 0C120 0 67.7 50.1 64.2 113.3C26.4 130.1 0 167.9 0 212c0 57.1 44.3 103.9 100.5 107.7c1.2 .2 2.3 .3 3.5 .3l4 0 292 0c61.9 0 112-50.1 112-112c0-55.2-39.9-101.1-92.5-110.3C406.5 55 366.9 24 320 24c-18 0-34.9 4.6-49.7 12.6C248.5 14.1 217.9 0 184 0zM112 352c-13.3 0-24 10.7-24 24l0 80c0 13.3 10.7 24 24 24s24-10.7 24-24l0-80c0-13.3-10.7-24-24-24zm192 0c-13.3 0-24 10.7-24 24l0 80c0 13.3 10.7 24 24 24s24-10.7 24-24l0-80c0-13.3-10.7-24-24-24zm-72 56c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 80c0 13.3 10.7 24 24 24s24-10.7 24-24l0-80zm168-24c-13.3 0-24 10.7-24 24l0 80c0 13.3 10.7 24 24 24s24-10.7 24-24l0-80c0-13.3-10.7-24-24-24z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faCloudShowers=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(Hk)),Hk}var Uvt=Fvt(),zk={},GQ;function Bvt(){return GQ||(GQ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="cloud-showers-heavy",r=512,s=512,a=[],o="f740",i="M112 120c0-39.8 32.2-72 72-72c25.8 0 48.5 13.6 61.2 34c3.8 6.1 10.1 10.2 17.2 11.1s14.3-1.3 19.5-6.2c10-9.3 23.4-15 38.1-15c29 0 52.9 22.1 55.7 50.4c1.2 12.3 11.6 21.7 23.9 21.6l.3 0s0 0 0 0c35.3 0 64 28.7 64 64s-28.7 64-64 64l-292 0-1.9 0c-.3 0-.7-.1-1-.1C73.3 270.4 48 244.2 48 212c0-28.3 19.6-52.1 46.1-58.4c11.8-2.8 19.6-13.9 18.3-25.9c-.3-2.5-.4-5.1-.4-7.7zM184 0C120 0 67.7 50.1 64.2 113.3C26.4 130.1 0 167.9 0 212c0 57.1 44.3 103.9 100.5 107.7c1.2 .2 2.3 .3 3.5 .3l4 0 292 0c61.9 0 112-50.1 112-112c0-55.2-39.9-101.1-92.5-110.3C406.5 55 366.9 24 320 24c-18 0-34.9 4.6-49.7 12.6C248.5 14.1 217.9 0 184 0zM81.5 353.9c-12.2-5.2-26.3 .4-31.5 12.6l-48 112c-5.2 12.2 .4 26.3 12.6 31.5s26.3-.4 31.5-12.6l48-112c5.2-12.2-.4-26.3-12.6-31.5zm120 0c-12.2-5.2-26.3 .4-31.5 12.6l-48 112c-5.2 12.2 .4 26.3 12.6 31.5s26.3-.4 31.5-12.6l48-112c5.2-12.2-.4-26.3-12.6-31.5zm244.6 31.5c5.2-12.2-.4-26.3-12.6-31.5s-26.3 .4-31.5 12.6l-48 112c-5.2 12.2 .4 26.3 12.6 31.5s26.3-.4 31.5-12.6l48-112zM313.5 353.9c-12.2-5.2-26.3 .4-31.5 12.6l-48 112c-5.2 12.2 .4 26.3 12.6 31.5s26.3-.4 31.5-12.6l48-112c5.2-12.2-.4-26.3-12.6-31.5z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faCloudShowersHeavy=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(zk)),zk}var Vvt=Bvt(),Gk={},qQ;function $vt(){return qQ||(qQ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="cloud-sleet",r=512,s=512,a=[],o="f741",i="M112 120c0-39.8 32.2-72 72-72c25.8 0 48.5 13.6 61.2 34c3.8 6.1 10.1 10.2 17.2 11.1s14.3-1.3 19.5-6.2c10-9.3 23.4-15 38.1-15c29 0 52.9 22.1 55.7 50.4c1.2 12.3 11.6 21.7 23.9 21.6l.3 0s0 0 0 0c35.3 0 64 28.7 64 64s-28.7 64-64 64l-292 0-1.9 0c-.3 0-.7-.1-1-.1C73.3 270.4 48 244.2 48 212c0-28.3 19.6-52.1 46.1-58.4c11.8-2.8 19.6-13.9 18.3-25.9c-.3-2.5-.4-5.1-.4-7.7zM184 0C120 0 67.7 50.1 64.2 113.3C26.4 130.1 0 167.9 0 212c0 57.1 44.3 103.9 100.5 107.7c1.2 .2 2.3 .3 3.5 .3l4 0 292 0c61.9 0 112-50.1 112-112c0-55.2-39.9-101.1-92.5-110.3C406.5 55 366.9 24 320 24c-18 0-34.9 4.6-49.7 12.6C248.5 14.1 217.9 0 184 0zM81.5 353.9c-12.2-5.2-26.3 .4-31.5 12.6l-48 112c-5.2 12.2 .4 26.3 12.6 31.5s26.3-.4 31.5-12.6l48-112c5.2-12.2-.4-26.3-12.6-31.5zm272 0c-12.2-5.2-26.3 .4-31.5 12.6l-48 112c-5.2 12.2 .4 26.3 12.6 31.5s26.3-.4 31.5-12.6l48-112c5.2-12.2-.4-26.3-12.6-31.5zM216 376c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 16-16 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l16 0 0 16c0 13.3 10.7 24 24 24s24-10.7 24-24l0-16 16 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-16 0 0-16zm256 0c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 16-16 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l16 0 0 16c0 13.3 10.7 24 24 24s24-10.7 24-24l0-16 16 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-16 0 0-16z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faCloudSleet=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(Gk)),Gk}var Wvt=$vt(),qk={},KQ;function Hvt(){return KQ||(KQ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="clouds-moon",r=640,s=512,a=[],o="f745",i="M352 160c0 11.5 1.2 22.7 3.5 33.4c53.7 8.2 96.5 49.8 106.4 103c14.2 5.5 27.2 13.4 38.5 23.2c3.7 .3 7.4 .4 11.2 .4c43.2 0 82.5-17.3 111.2-45.3c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-6.5 1.1-13.2 1.7-20 1.7c-64.3 0-116.5-52.3-116.5-116.9c0-43.7 23.9-81.8 59.3-101.9c6.1-3.5 9.2-10.5 7.7-17.3S532 1.2 525.1 .6c-4.5-.4-9-.6-13.5-.6C423.4 0 352 71.7 352 160zM335.8 272c26.5 0 48 21.5 48 48c0 .8 0 1.7 .1 2.5l2 23.8c1.1 13.2 12.7 23 25.9 21.9c1.3-.1 2.6-.2 4-.2c26.5 0 48 21.5 48 48s-21.5 48-48 48c-.6 0-1.3 0-1.9 0c-.3 0-.6 0-.9 0l-266.9 0c-.3 0-.6 0-1 0c-.4 0-.9 0-1.3 0c-17.7 0-32-14.3-32-32s14.3-32 32-32c1.6 0 3.1 .1 4.6 .3c6.9 1 13.9-1.1 19.1-5.6s8.3-11.2 8.3-18.1l0-30.2c0-.3 0-.6 0-.9c0-.5 0-1 0-1.5s0-1 0-1.5c0-.3 0-.6 0-.9l0-1.1c.1-.6 .2-1.1 .3-1.7c2.5-19.6 19.3-34.8 39.7-34.8c12.6 0 23.8 5.8 31.1 14.9c5.8 7.1 15.1 10.4 24.1 8.3s15.9-9.1 18-18c4.9-21.3 24-37.2 46.8-37.2zm96 46.8c-.6-52.5-43.4-94.8-96-94.8c-33 0-62 16.6-79.3 41.9c-12.2-6.3-26-9.9-40.6-9.9c-43 0-78.8 30.9-86.5 71.7c-1 2.6-1.5 5.4-1.5 8.3l0 5.3c0 .9 0 1.8 0 2.7s0 1.8 0 2.7l0 6.9c-36.5 7.4-64 39.7-64 78.4c0 44.2 35.8 80 80 80c.9 0 1.8 0 2.7 0l266 0c1.1 0 2.1 .1 3.2 .1c53 0 96-43 96-96c0-47.5-34.5-86.9-79.8-94.6l-.2-2.5zM320 192.1s0 0 0 0c0-35.3-28.6-64-64-64c-7.4 0-14.6 1.3-21.2 3.6c-11.5-30.1-40.6-51.6-74.8-51.6c-38.9 0-71.3 27.8-78.5 64.6c-3.1-.4-6.3-.6-9.5-.6c-39.8 0-72 32.2-72 72s32.2 72 72 72c0 0 0 0 0 0l34.8 0c9.4-19.9 24.6-36.6 43.4-48l-76.4 0c-.6 0-1.2 0-1.7 0c-13.2 0-24-10.7-24-24s10.7-24 24-24c1.1 0 2.2 .1 3.2 .2c25.1 3.3 48.5-13.5 53.4-38.4c2.9-14.7 15.9-25.8 31.4-25.8c13.6 0 25.3 8.5 29.9 20.6c9.2 24.3 36.2 36.9 60.8 28.2c1.6-.6 3.4-.9 5.3-.9c8.8 0 16 7.2 16 16l0 .9c-.1 6.6-1.6 12.9-4.1 18.6c15.5-9.7 33.2-16.3 52.1-18.7l0-.9z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faCloudsMoon=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(qk)),qk}var YQ=Hvt(),Kk={},QQ;function zvt(){return QQ||(QQ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="cloud-snow",r=512,s=512,a=[127784],o="f742",i="M112 120c0-39.8 32.2-72 72-72c25.8 0 48.5 13.6 61.2 34c3.8 6.1 10.1 10.2 17.2 11.1s14.3-1.3 19.5-6.2c10-9.3 23.4-15 38.1-15c29 0 52.9 22.1 55.7 50.4c1.2 12.3 11.6 21.7 23.9 21.6l.3 0s0 0 0 0c35.3 0 64 28.7 64 64s-28.7 64-64 64l-292 0-1.9 0c-.3 0-.7-.1-1-.1C73.3 270.4 48 244.2 48 212c0-28.3 19.6-52.1 46.1-58.4c11.8-2.8 19.6-13.9 18.3-25.9c-.3-2.5-.4-5.1-.4-7.7zM184 0C120 0 67.7 50.1 64.2 113.3C26.4 130.1 0 167.9 0 212c0 57.1 44.3 103.9 100.5 107.7c1.2 .2 2.3 .3 3.5 .3l4 0 292 0c61.9 0 112-50.1 112-112c0-55.2-39.9-101.1-92.5-110.3C406.5 55 366.9 24 320 24c-18 0-34.9 4.6-49.7 12.6C248.5 14.1 217.9 0 184 0zM64 352c-13.3 0-24 10.7-24 24l0 16-16 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l16 0 0 16c0 13.3 10.7 24 24 24s24-10.7 24-24l0-16 16 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-16 0 0-16c0-13.3-10.7-24-24-24zm192 32c-13.3 0-24 10.7-24 24l0 16-16 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l16 0 0 16c0 13.3 10.7 24 24 24s24-10.7 24-24l0-16 16 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-16 0 0-16c0-13.3-10.7-24-24-24zm216-8c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 16-16 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l16 0 0 16c0 13.3 10.7 24 24 24s24-10.7 24-24l0-16 16 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-16 0 0-16z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faCloudSnow=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(Kk)),Kk}var Gvt=zvt(),Yk={},XQ;function qvt(){return XQ||(XQ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="clouds-sun",r=640,s=512,a=[],o="f746",i="M294.2 1.2c5.1 2.1 8.7 6.7 9.6 12.1l14.1 84.7 30.7 5.1c-26.4 10.6-47 32.6-55.7 59.9C276.8 132.7 244.8 112 208 112c-53 0-96 43-96 96s43 96 96 96c8.1 0 15.9-1 23.4-2.9c-36.6 18.1-63.3 53.1-69.8 94.9l-24.4 17c-4.5 3.1-10.3 3.8-15.4 1.6s-8.7-6.7-9.6-12.1L98.1 317.9 13.4 303.8c-5.4-.9-10-4.5-12.1-9.6s-1.5-10.9 1.6-15.4L52.5 208 2.9 137.2c-3.2-4.5-3.8-10.3-1.6-15.4s6.7-8.7 12.1-9.6L98.1 98.1l14.1-84.7c.9-5.4 4.5-10 9.6-12.1s10.9-1.5 15.4 1.6L208 52.5 278.8 2.9c4.5-3.2 10.3-3.8 15.4-1.6zM144 208a64 64 0 1 1 128 0 64 64 0 1 1 -128 0zm409.8 32.1l12.4 0c.6 0 1.2 0 1.8 0c13.2 0 24-10.7 24-24s-10.7-24-24-24c-1.1 0-2.2 .1-3.2 .2c-25.1 3.3-48.5-13.5-53.4-38.4c-2.9-14.7-15.9-25.8-31.4-25.8c-13.6 0-25.3 8.5-29.9 20.6c-9.2 24.3-36.2 36.9-60.8 28.2c-1.6-.6-3.4-.9-5.3-.9c-8.8 0-15.9 7.1-16 15.9l-.1 0c-16.7 0-32.6 3.2-47.3 9c-.4-2.9-.6-5.9-.6-8.9c0-35.3 28.6-64 64-64c7.4 0 14.6 1.3 21.2 3.6c11.5-30.1 40.6-51.6 74.8-51.6c38.9 0 71.3 27.8 78.5 64.6c3.1-.4 6.3-.6 9.5-.6c39.8 0 72 32.2 72 72c0 30.4-18.8 56.3-45.4 66.9c-9.5-17.7-23.6-32.5-40.8-42.9zM320.1 320c0 .8 0 1.7-.1 2.5l-2 23.8c-1.1 13.2-12.7 23-25.9 21.9c-1.3-.1-2.6-.2-4-.2c-26.5 0-48 21.5-48 48s21.5 48 48 48c.6 0 1.3 0 1.9 0c.3 0 .6 0 .9 0l266.9 0c.3 0 .6 0 1 0c.4 0 .9 0 1.3 0c17.7 0 32-14.3 32-32s-14.3-32-32-32c-1.6 0-3.1 .1-4.6 .3c-6.9 1-13.9-1.1-19.1-5.6s-8.3-11.2-8.3-18.1l0-30.2c0-.3 0-.6 0-.9c0-.5 0-1 0-1.5s0-1 0-1.5c0-.3 0-.6 0-.9l0-1.1c-.1-.6-.2-1.1-.3-1.7c-2.5-19.6-19.3-34.8-39.7-34.8c-12.6 0-23.8 5.8-31.1 14.9c-5.8 7.1-15.1 10.4-24.1 8.3s-15.9-9.1-18-18c-4.9-21.3-24-37.2-46.8-37.2c-26.5 0-48 21.5-48 48zm48-96c33 0 62 16.6 79.3 41.9c12.2-6.3 26-9.9 40.6-9.9c43 0 78.8 30.9 86.5 71.7c1 2.6 1.5 5.4 1.5 8.3l0 5.3c0 .9 0 1.8 0 2.7s0 1.8 0 2.7l0 6.9c36.5 7.4 64 39.7 64 78.4c0 44.2-35.8 80-80 80c-.9 0-1.8 0-2.7 0l-266 0c-1.1 0-2.1 .1-3.2 .1c-53 0-96-43-96-96c0-47.5 34.5-86.9 79.8-94.6l.2-2.5c.6-52.5 43.4-94.8 96-94.8z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faCloudsSun=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(Yk)),Yk}var ZQ=qvt(),Qk={},JQ;function Kvt(){return JQ||(JQ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="cloud-sun-rain",r=640,s=512,a=[127782],o="f743",i="M294.2 1.2c5.1 2.1 8.7 6.7 9.6 12.1l10.4 62.4c-23.3 10.8-42.9 28.4-56 50.3c-14.6-9-31.8-14.1-50.2-14.1c-53 0-96 43-96 96c0 35.5 19.3 66.6 48 83.2c.8 31.8 13.2 60.7 33.1 82.7l-56 39.2c-4.5 3.1-10.3 3.8-15.4 1.6s-8.7-6.7-9.6-12.1L98.1 317.9 13.4 303.8c-5.4-.9-10-4.5-12.1-9.6s-1.5-10.9 1.6-15.4L52.5 208 2.9 137.2c-3.2-4.5-3.8-10.3-1.6-15.4s6.7-8.7 12.1-9.6L98.1 98.1l14.1-84.7c.9-5.4 4.5-10 9.6-12.1s10.9-1.5 15.4 1.6L208 52.5 278.8 2.9c4.5-3.2 10.3-3.8 15.4-1.6zM208 144c13.8 0 26.7 4.4 37.1 11.9c-1.2 4.1-2.2 8.3-3 12.6c-37.9 14.6-67.2 46.6-77.8 86.4C151.8 243.1 144 226.5 144 208c0-35.3 28.7-64 64-64zm69.4 276c11 7.4 14 22.3 6.7 33.3l-32 48c-7.4 11-22.3 14-33.3 6.7s-14-22.3-6.7-33.3l32-48c7.4-11 22.3-14 33.3-6.7zm96 0c11 7.4 14 22.3 6.7 33.3l-32 48c-7.4 11-22.3 14-33.3 6.7s-14-22.3-6.7-33.3l32-48c7.4-11 22.3-14 33.3-6.7zm96 0c11 7.4 14 22.3 6.7 33.3l-32 48c-7.4 11-22.3 14-33.3 6.7s-14-22.3-6.7-33.3l32-48c7.4-11 22.3-14 33.3-6.7zm96 0c11 7.4 14 22.3 6.7 33.3l-32 48c-7.4 11-22.3 14-33.3 6.7s-14-22.3-6.7-33.3l32-48c7.4-11 22.3-14 33.3-6.7zM320.1 192c0 .8 0 1.7-.1 2.5l-2 23.8c-1.1 13.2-12.7 23-25.9 21.9c-1.3-.1-2.6-.2-4-.2c-26.5 0-48 21.5-48 48s21.5 48 48 48c.6 0 1.3 0 1.9 0c.3 0 .6 0 .9 0l266.9 0c.3 0 .6 0 1 0c.4 0 .9 0 1.3 0c17.7 0 32-14.3 32-32s-14.3-32-32-32c-1.6 0-3.1 .1-4.6 .3c-6.9 1-13.9-1.1-19.1-5.6s-8.3-11.2-8.3-18.1l0-30.2c0-.3 0-.6 0-.9c0-.5 0-1 0-1.5s0-1 0-1.5c0-.3 0-.6 0-.9l0-1.1c-.1-.6-.2-1.1-.3-1.7c-2.5-19.6-19.3-34.8-39.7-34.8c-12.6 0-23.8 5.8-31.1 14.9c-5.8 7.1-15.1 10.4-24.1 8.3s-15.9-9.1-18-18c-4.9-21.3-24-37.2-46.8-37.2c-26.5 0-48 21.5-48 48zm48-96c33 0 62 16.6 79.3 41.9c12.2-6.3 26-9.9 40.6-9.9c43 0 78.8 30.9 86.5 71.7c1 2.6 1.5 5.4 1.5 8.3l0 5.3c0 .9 0 1.8 0 2.7s0 1.8 0 2.7l0 6.9c36.5 7.4 64 39.7 64 78.4c0 44.2-35.8 80-80 80c-.9 0-1.8 0-2.7 0l-266 0c-1.1 0-2.1 .1-3.2 .1c-53 0-96-43-96-96c0-47.5 34.5-86.9 79.8-94.6l.2-2.5c.6-52.5 43.4-94.8 96-94.8z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faCloudSunRain=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(Qk)),Qk}var Yvt=Kvt(),Xk={},eX;function Qvt(){return eX||(eX=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="snow-blowing",r=640,s=512,a=[],o="f761",i="M176 64c13.3 0 24 10.7 24 24l0 25.4 12.7-12.7c6.2-6.2 16.4-6.2 22.6 0s6.2 16.4 0 22.6L200 158.6l0 55.8 48.3-27.9 12.9-48.2c2.3-8.5 11.1-13.6 19.6-11.3s13.6 11.1 11.3 19.6l-4.6 17.3 22-12.7c11.5-6.6 26.2-2.7 32.8 8.8s2.7 26.2-8.8 32.8l-22 12.7 17.3 4.6c8.5 2.3 13.6 11.1 11.3 19.6s-11.1 13.6-19.6 11.3l-48.2-12.9L224 256l48.3 27.9L320.6 271c8.5-2.3 17.3 2.8 19.6 11.3s-2.8 17.3-11.3 19.6l-17.3 4.6 22 12.7c11.5 6.6 15.4 21.3 8.8 32.8s-21.3 15.4-32.8 8.8l-22-12.7 4.6 17.3c2.3 8.5-2.8 17.3-11.3 19.6s-17.3-2.8-19.6-11.3l-12.9-48.2L200 297.6l0 55.8 35.3 35.3c6.2 6.2 6.2 16.4 0 22.6s-16.4 6.2-22.6 0L200 398.6l0 25.4c0 13.3-10.7 24-24 24s-24-10.7-24-24l0-25.4-12.7 12.7c-6.2 6.2-16.4 6.2-22.6 0s-6.2-16.4 0-22.6L152 353.4l0-55.8-48.3 27.9L90.7 373.7c-2.3 8.5-11.1 13.6-19.6 11.3s-13.6-11.1-11.3-19.6l4.6-17.3-22 12.7C31 367.4 16.4 363.5 9.7 352s-2.7-26.2 8.8-32.8l22-12.7-17.3-4.6c-8.5-2.3-13.6-11.1-11.3-19.6s11.1-13.6 19.6-11.3l48.2 12.9L128 256 79.7 228.1 31.4 241c-8.5 2.3-17.3-2.8-19.6-11.3s2.8-17.3 11.3-19.6l17.3-4.6-22-12.7C7 186.2 3.1 171.5 9.7 160s21.3-15.4 32.8-8.8l22 12.7-4.6-17.3c-2.3-8.5 2.8-17.3 11.3-19.6s17.3 2.8 19.6 11.3l12.9 48.2L152 214.4l0-55.8-35.3-35.3c-6.2-6.2-6.2-16.4 0-22.6s16.4-6.2 22.6 0L152 113.4 152 88c0-13.3 10.7-24 24-24zM480 424c0-13.3 10.7-24 24-24l48 0c22.1 0 40-17.9 40-40s-17.9-40-40-40l-144 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l144 0c48.6 0 88 39.4 88 88s-39.4 88-88 88l-48 0c-13.3 0-24-10.7-24-24zM504 64l48 0c48.6 0 88 39.4 88 88s-39.4 88-88 88l-144 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l144 0c22.1 0 40-17.9 40-40s-17.9-40-40-40l-48 0c-13.3 0-24-10.7-24-24s10.7-24 24-24z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faSnowBlowing=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(Xk)),Xk}var Xvt=Qvt(),Zk={},tX;function Zvt(){return tX||(tX=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="snowflake",r=448,s=512,a=[10052,10054],o="f2dc",i="M224 0c13.3 0 24 10.7 24 24l0 46.1 23-23c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-57 57 0 76.5 66.2-38.2 20.9-77.8c3.4-12.8 16.6-20.4 29.4-17s20.4 16.6 17 29.4L373 142.2l37.1-21.4c11.5-6.6 26.2-2.7 32.8 8.8s2.7 26.2-8.8 32.8L397 183.8l31.5 8.4c12.8 3.4 20.4 16.6 17 29.4s-16.6 20.4-29.4 17l-77.8-20.9L272 256l66.2 38.2 77.8-20.9c12.8-3.4 26 4.2 29.4 17s-4.2 26-17 29.4L397 328.2l37.1 21.4c11.5 6.6 15.4 21.3 8.8 32.8s-21.3 15.4-32.8 8.8L373 369.8l8.4 31.5c3.4 12.8-4.2 26-17 29.4s-26-4.2-29.4-17l-20.9-77.8L248 297.6l0 76.5 57 57c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-23-23 0 46.1c0 13.3-10.7 24-24 24s-24-10.7-24-24l0-46.1-23 23c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l57-57 0-76.5-66.2 38.2-20.9 77.8c-3.4 12.8-16.6 20.4-29.4 17s-20.4-16.6-17-29.4L75 369.8 37.9 391.2c-11.5 6.6-26.2 2.7-32.8-8.8s-2.7-26.2 8.8-32.8L51 328.2l-31.5-8.4c-12.8-3.4-20.4-16.6-17-29.4s16.6-20.4 29.4-17l77.8 20.9L176 256l-66.2-38.2L31.9 238.6c-12.8 3.4-26-4.2-29.4-17s4.2-26 17-29.4L51 183.8 13.9 162.4c-11.5-6.6-15.4-21.3-8.8-32.8s21.3-15.4 32.8-8.8L75 142.2l-8.4-31.5c-3.4-12.8 4.2-26 17-29.4s26 4.2 29.4 17l20.9 77.8L200 214.4l0-76.5L143 81c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l23 23L200 24c0-13.3 10.7-24 24-24z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faSnowflake=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(Zk)),Zk}var Jvt=Zvt(),Jk={},nX;function e0t(){return nX||(nX=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="snowflake-droplets",r=640,s=512,a=[],o="e5c1",i="M320 0c13.3 0 24 10.7 24 24l0 46.1 23-23c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-57 57 0 76.5 66.2-38.2 20.9-77.8c3.4-12.8 16.6-20.4 29.4-17s20.4 16.6 17 29.4L469 142.2l37.1-21.4c11.5-6.6 26.2-2.7 32.8 8.8s2.7 26.2-8.8 32.8L493 183.8l31.5 8.4c12.8 3.4 20.4 16.6 17 29.4s-16.6 20.4-29.4 17l-77.8-20.9L368 256l66.2 38.2 77.8-20.9c12.8-3.4 26 4.2 29.4 17s-4.2 26-17 29.4L493 328.2l28 16.2-22 42.7L469 369.8l8.4 31.5c3.4 12.8-4.2 26-17 29.4s-26-4.2-29.4-17l-20.9-77.8L344 297.6l0 76.5 57 57c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-23-23 0 46.1c0 13.3-10.7 24-24 24s-24-10.7-24-24l0-46.1-23 23c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l57-57 0-76.5-66.2 38.2-20.9 77.8c-3.4 12.8-16.6 20.4-29.4 17s-20.4-16.6-17-29.4l8.4-31.5-30.1 17.4-22-42.7 28-16.2-31.5-8.4c-12.8-3.4-20.4-16.6-17-29.4s16.6-20.4 29.4-17l77.8 20.9L272 256l-66.2-38.2-77.8 20.9c-12.8 3.4-26-4.2-29.4-17s4.2-26 17-29.4l31.5-8.4-37.1-21.4c-11.5-6.6-15.4-21.3-8.8-32.8s21.3-15.4 32.8-8.8L171 142.2l-8.4-31.5c-3.4-12.8 4.2-26 17-29.4s26 4.2 29.4 17l20.9 77.8L296 214.4l0-76.5L239 81c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l23 23L296 24c0-13.3 10.7-24 24-24zM519.1 418.1l47.5-92.4c1.8-3.5 5.4-5.7 9.3-5.7s7.5 2.2 9.3 5.7l47.5 92.4c4.7 9.1 7.1 19.3 7.1 29.5c0 35.3-28.7 64.3-64 64.3s-64-29-64-64.3c0-10.2 2.4-20.4 7.1-29.5zM54.7 325.7c1.8-3.5 5.4-5.7 9.3-5.7s7.5 2.2 9.3 5.7l47.5 92.4c4.7 9.1 7.1 19.3 7.1 29.5C128 483 99.3 512 64 512s-64-29-64-64.3c0-10.2 2.4-20.4 7.1-29.5l47.5-92.4z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faSnowflakeDroplets=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(Jk)),Jk}var t0t=e0t(),e5={},rX;function n0t(){return rX||(rX=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="fas",n="moon-stars",r=512,s=512,a=[],o="f755",i="M284.8 99.2l11 38.6c1 3.6 4.4 6.2 8.2 6.2s7.1-2.5 8.2-6.2l11-38.6 38.6-11c3.6-1 6.2-4.4 6.2-8.2s-2.5-7.1-6.2-8.2l-38.6-11-11-38.6c-1-3.6-4.4-6.2-8.2-6.2s-7.1 2.5-8.2 6.2l-11 38.6-38.6 11c-3.6 1-6.2 4.4-6.2 8.2s2.5 7.1 6.2 8.2l38.6 11zm119 211.6c1.6 5.5 6.6 9.2 12.2 9.2s10.7-3.8 12.2-9.2l16.6-58 58-16.6c5.5-1.6 9.2-6.6 9.2-12.2s-3.8-10.7-9.2-12.2l-58-16.6-16.6-58c-1.6-5.5-6.6-9.2-12.2-9.2s-10.7 3.8-12.2 9.2l-16.6 58-58 16.6c-5.5 1.6-9.2 6.6-9.2 12.2s3.8 10.7 9.2 12.2l58 16.6 16.6 58zM191.8 128C85.8 128 0 214.1 0 320.2S85.8 512.4 191.8 512.4c52 0 99.1-20.7 133.6-54.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-8.1 1.4-16.5 2.2-25.1 2.2c-80.7 0-146.2-65.6-146.2-146.6c0-54.8 30-102.6 74.4-127.8c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-5.4-.5-10.8-.7-16.3-.7z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faMoonStars=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(e5)),e5}var r0t=n0t();const t5=f.memo(({width:e,height:t,variant:n})=>{const[r,s]=f.useState(!1),a=n==="hail"?20:n==="normal"?50:120,o=400,i=n==="hail"?1:20,c=n==="hail"?3:n==="normal"?30:80,u=100,d=n==="hail"?.8:.5,m=n==="hail"?.3:.1,h=D0();return f.useEffect(()=>{s(!0)},[]),!r||h?null:l.jsx("div",{className:"absolute inset-0",children:l.jsx(st,{children:Array.from({length:a}).map((p,g)=>{const y=Math.floor(Math.random()*(e-1)),v=Math.floor(Math.random()*(c-i+1))+i,x=Math.floor(Math.random()*(u+1)),b=Math.random()*(d-m)+m,_=Math.floor(Math.random()*o)+1,w=n==="hail"?v:1;return l.jsxs(_e.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:3},style:{left:y,top:0,height:t},className:"absolute",children:[l.jsx("div",{style:{width:w,height:v,animationDuration:o+x+"ms",animationDelay:-_+"ms",animationTimingFunction:"linear",opacity:b,maskImage:n!=="hail"?"linear-gradient(to bottom, transparent, black, transparent)":void 0},className:B("absolute rounded-full bg-white",{"rounded-full":n==="hail"},"animation-weather-rain")}),n!=="hail"&&l.jsx("div",{style:{animationDuration:o+x+"ms",animationDelay:-_+"ms",opacity:b},className:B("absolute -right-[2px] bottom-0 h-[1px] w-[4px] rounded-full bg-white","animation-weather-rain-splash")})]},g)})})})}),sX=f.memo(({width:e,height:t,variant:n})=>{const[r,s]=f.useState(!1),a=n==="normal"?50:80,o=n==="normal"?2e3:1e3,i=1,c=8,u=n==="normal"?1500:800,d=.5,m=.1,h=2,p=D0();return f.useEffect(()=>{s(!0)},[]),!r||p?null:l.jsxs("div",{className:"absolute inset-0",children:[l.jsx("div",{className:B("absolute bottom-0 left-0 right-0 translate-y-[80%] bg-white opacity-20 blur-sm",{"rounded-m blur-xs -left-xl -right-xl h-lg":n==="heavy"},{"h-md rounded-[50%]":n==="normal"})}),l.jsx(st,{children:Array.from({length:a}).map((g,y)=>{const v=Math.floor(Math.random()*(e-1)),x=Math.floor(Math.random()*(c-i+1))+i,b=Math.floor(Math.random()*(u+1)),_=Math.floor(Math.random()*h)+1,w=Math.random()*(d-m)+m,S=Math.floor(Math.random()*o)+1;return l.jsx(_e.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:3},style:{left:v,top:0,height:t},className:"absolute",children:l.jsx("div",{style:{animationDuration:o+b+"ms",animationTimingFunction:"linear",animationDelay:-S+"ms",opacity:w},className:B("absolute rounded-full bg-white","animation-weather-snow"),children:l.jsx("div",{style:{width:x,height:x,animationDuration:"inherit",maskImage:"radial-gradient(black 20%, transparent)"},className:B("absolute rounded-full bg-white",_===1&&"animation-weather-snow-wave")})})},y)})})]})}),s0t=f.memo(({width:e,height:t,context:n})=>{const[r,s]=f.useState(!1),a=70,o=2,i=1,c=2,u=500,d=1e3,m=.5,h=.2,p=D0();return f.useEffect(()=>{s(!0)},[]),!r||p?null:l.jsxs("div",{className:"absolute inset-0",children:[l.jsx(st,{children:Array.from({length:a}).map((g,y)=>{const v=Math.floor(Math.random()*(e-1)),x=Math.floor(Math.random()*(t-1)),b=Math.floor(Math.random()*(o-i+1))+i,_=Math.floor(Math.random()*c)+1,w=Math.floor(Math.random()*(u+1)),S=Math.floor(Math.random()*(d+1)),C=Math.random()*(m-h)+h;return l.jsx(_e.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:3},style:{left:v,top:x},className:"absolute",children:l.jsx("div",{style:{width:b,height:b,animationDuration:5e3+w+"ms",animationDelay:S+"ms",opacity:C},className:B("absolute rounded-full bg-white",{"animation-weather-star-twinkle":_===1})})},y)})}),l.jsx("div",{className:B("w-lg absolute left-0 h-[1px] bg-white","animation-weather-star-shoot",{"context-ntp":n==="ntp"})})]})}),AE=["clear-day","clear-night","partly-cloudy-day","partly-cloudy-night","cloudy-day","cloudy-night","patchy-rain-possible-day","patchy-rain-possible-night","possible-thunder-day","possible-thunder-night","overcast","fog","snow","sleet","patchy-freezing-drizzle","heavy-snow","blizzard","drizzle","hail","light-shower","heavy-rain","lightning-rain","lightning-snow"],vw=A.memo(({variant:e,context:t,className:n})=>{const r=f.useCallback(p=>{switch(p){case"clear-day":default:return["#FF813A","#FFC700","#1F84CD"];case"partly-cloudy-day":return["#8E8E8E","#D5D5D5","#1F84CD"];case"partly-cloudy-night":return["#8E8E8E","#6A6A6A","#0B1B39"];case"cloudy-day":case"overcast":case"patchy-rain-possible-day":case"patchy-freezing-drizzle":case"drizzle":case"light-shower":case"heavy-rain":case"blizzard":case"heavy-snow":case"sleet":case"snow":case"fog":case"possible-thunder-day":case"hail":case"lightning-rain":case"lightning-snow":return["#B8B8B8","#8791AB","#486289"];case"cloudy-night":case"possible-thunder-night":case"patchy-rain-possible-night":return["#222938","#3E475A","#1B2230"];case"clear-night":return["#44344A","#091937","#091937"]}},[]),s=f.useCallback(p=>{switch(p){default:return null;case"partly-cloudy-night":case"cloudy-night":case"possible-thunder-night":case"clear-night":return"stars";case"light-shower":case"sleet":case"drizzle":case"patchy-rain-possible-night":case"patchy-rain-possible-day":case"patchy-freezing-drizzle":case"lightning-rain":return"rain";case"hail":return"rain-hail";case"heavy-rain":return"rain-heavy";case"snow":return"snow";case"heavy-snow":case"blizzard":case"lightning-snow":return"snow-heavy"}},[]),a=r(e),[o,i,c]=a,[u,{width:d,height:m}]=tc(),h=s(e);return l.jsxs("div",{style:{backgroundColor:c},className:B("absolute inset-0 overflow-hidden rounded-md shadow-md",n),children:[l.jsx("div",{className:"-inset-xl absolute translate-y-1/4 rounded-[50%] opacity-75",style:{backgroundColor:i}}),l.jsx("div",{className:"-inset-xl absolute translate-y-[60%] rounded-[50%] opacity-75",style:{backgroundColor:o}}),l.jsx("div",{className:"rounded-inherit absolute inset-0 overflow-hidden",style:{backdropFilter:"blur(40px)",WebkitBackdropFilter:"blur(40px)"}}),l.jsx("div",{className:"absolute inset-0",ref:u,children:h==="stars"?l.jsx(s0t,{height:m,width:d,context:t}):h==="rain"?l.jsx(t5,{height:m,width:d,variant:"normal"}):h==="rain-heavy"?l.jsx(t5,{height:m,width:d,variant:"heavy"}):h==="snow"?l.jsx(sX,{height:m,width:d,variant:"normal"}):h==="snow-heavy"?l.jsx(sX,{height:m,width:d,variant:"heavy"}):h==="rain-hail"?l.jsx(t5,{height:m,width:d,variant:"hail"}):null}),l.jsx("div",{className:"absolute inset-0 rounded-md border border-transparent"})]})});vw.displayName="WeatherGradient";const s0={"clear-day":S1.faSun,"clear-night":r0t.faMoonStars,"partly-cloudy-day":ZQ.faCloudsSun,"partly-cloudy-night":YQ.faCloudsMoon,"cloudy-day":ZQ.faCloudsSun,"cloudy-night":YQ.faCloudsMoon,"patchy-rain-possible-day":Yvt.faCloudSunRain,"patchy-rain-possible-night":Ovt.faCloudMoonRain,"possible-thunder-day":Tvt.faCloudBoltSun,"possible-thunder-night":Evt.faCloudBoltMoon,overcast:Dvt.faClouds,fog:Pvt.faCloudFog,snow:Jvt.faSnowflake,sleet:Wvt.faCloudSleet,"patchy-freezing-drizzle":t0t.faSnowflakeDroplets,"heavy-snow":Gvt.faCloudSnow,blizzard:Xvt.faSnowBlowing,drizzle:Nvt.faCloudDrizzle,hail:Ivt.faCloudHail,"light-shower":Uvt.faCloudShowers,"heavy-rain":Vvt.faCloudShowersHeavy,"lightning-rain":DQ.faCloudBolt,"lightning-snow":DQ.faCloudBolt},Yve="weather-widget-cache";function a0t(){try{const e=Ve.getItem(Yve);if(e)return JSON.parse(e)}catch{}return null}function o0t(e){try{Ve.setItem(Yve,JSON.stringify(e))}catch{}}function aX(e="widget",t="default",n=!1){if(e!=="widget")return{version:1,prefersMetric:n};const r=Up("WEATHER",t);return r?{version:1,prefersMetric:r.prefersMetric??n}:{version:1,prefersMetric:n}}function i0t(e,t="widget",n="default"){t==="widget"&&Bp("WEATHER",n,{version:1,prefersMetric:e.prefersMetric})}const l0t=(e="default",t="widget")=>{const{locale:n}=X(),{location:r}=Pp(),s=r?.latitude??null,a=r?.longitude??null,o=a0t(),i=aX(t,e,o?.is_metric_preferred),[c,u]=f.useState(i),{data:d,isLoading:m}=Ke({queryKey:[F9,s,a].map(String),queryFn:async()=>{const T=await _me({location:r,locale:n,reason:"weather-comet-home-widget"});return T&&o0t(T),u(I=>{const j=aX(t,e,T?.is_metric_preferred);return{...I,prefersMetric:j.prefersMetric}}),T},refetchInterval:1e3*60*5,staleTime:1e3*60,refetchOnMount:!0,refetchOnWindowFocus:!0,refetchOnReconnect:!0,placeholderData:o}),h="patchy-rain-possible-day",p=c.prefersMetric?16:62,g="Rainy",y="San Francisco, CA",v=d||o,x=v&&v.current&&v.location,b=!!d,_=!!r,w=x?v.current.condition?.icon:h,S=x?c.prefersMetric?v.current.temp_c??p:v.current.temp_f??p:p,C=x?v.current.condition?.text??g:g,E=x?`${v.location.name}${v.location.is_usa&&v.location.region?`, ${v.location.region}`:v.location.country?`, ${v.location.country}`:""}`:y,M=f.useCallback(T=>{u(T),i0t(T,t,e)},[u,t,e]);return f.useMemo(()=>({icon:w,temperature:S,condition:C,locationName:E,isLoading:m,hasError:!1,hasRealData:b,hasLocation:_,weatherSettings:c,updateWeatherSettings:M}),[w,S,C,E,m,b,_,c,M])},Qve=A.memo(({widgetId:e="default",showSettings:t,setShowSettings:n,context:r="widget"})=>{const{$t:s}=X(),a=l0t(e,r),[o,i]=f.useState(!1),c=f.useCallback(()=>n?.(!1),[n]),{permissionStatus:u}=Pp(),{openModal:d}=_t();f.useEffect(()=>{u==="granted"&&i(!0)},[u]);const m=f.useCallback(()=>{d("locationPermissionModal",{onPermissionGranted:()=>{i(!0)},origin:"weather_widget"})},[d]);if(!a.hasRealData&&!a.hasLocation&&a.isLoading)return l.jsxs("div",{className:B("h-full transform-gpu rounded-2xl"),children:[l.jsx(vw,{variant:"clear-day",className:"rounded-2xl",context:"ntp"}),l.jsx("div",{className:"gap-sm flex h-full flex-1 flex-col items-center justify-center p-2.5 drop-shadow-sm",style:{zoom:r==="thumbnail"?.75:1},children:l.jsx(D,{variant:"tiny",color:"white",className:"opacity-75",children:s({defaultMessage:"Loading weather...",id:"kTpqlc9m9M"})})})]});const h=oS(AE,a.icon)?s0[a.icon]:S1.faSun,p=l.jsxs("div",{className:B("h-full transform-gpu overflow-hidden rounded-2xl"),children:[l.jsx(vw,{variant:a.icon,className:"!rounded-2xl",context:"ntp"}),l.jsxs("div",{className:"gap-sm flex h-full flex-1 flex-col justify-between p-2.5 pb-0 pt-1 drop-shadow-sm",style:{zoom:r==="thumbnail"?.75:1},children:[l.jsxs("div",{className:"flex flex-row items-start justify-between",children:[l.jsxs("div",{children:[l.jsx(D,{variant:"page-title",color:"white",children:l.jsxs("span",{className:"font-mono",children:[a.temperature,"",a.weatherSettings.prefersMetric?"C":"F"]})}),l.jsx(D,{variant:"tinyRegular",color:"white",className:"-mt-xs opacity-60",children:a.condition})]}),l.jsx(D,{variant:"page-title",color:"white",className:"mr-0.5 mt-2",children:l.jsx(xt,{icon:h,className:"text-3xl"})})]}),l.jsx(D,{variant:"tiny",color:"white",className:"mb-1.5 line-clamp-2 flex items-center",children:a.locationName})]})]});return r==="thumbnail"?p:l.jsxs(l.Fragment,{children:[l.jsx(tr,{shadow:!0,fullBleed:!0,className:"aspect-[1/1] w-full overflow-hidden !rounded-2xl",children:l.jsx(at,{href:`/search/new?q=${s({defaultMessage:"weather near {location}",id:"vi8HXN1mDE"},{location:a.locationName})}
          `,draggable:!1,className:"relative block size-full",children:l.jsx("div",{className:"absolute inset-0 select-none",children:p})})}),l.jsx(st,{children:t&&l.jsx(ju,{onClose:c,children:l.jsxs("div",{className:"flex flex-col gap-3 px-5 py-4",children:[l.jsx(D,{variant:"entry-title-300",children:s({defaultMessage:"Weather settings",id:"RMurwlcxbd"})}),l.jsx("div",{className:"flex flex-col gap-3",children:l.jsx("div",{className:"flex w-full flex-col",children:l.jsxs("div",{className:"border-subtlest flex w-full gap-2 rounded-lg border p-1",children:[l.jsxs("label",{className:B("flex w-full cursor-pointer items-center justify-center rounded-md py-2",{"bg-offset dark:bg-offsetPlus":a.weatherSettings.prefersMetric}),children:[l.jsx("input",{type:"radio",name:"tempUnit",checked:a.weatherSettings.prefersMetric,onChange:()=>{const g={version:1,prefersMetric:!0};a.updateWeatherSettings(g)},className:"hidden"}),l.jsx(D,{variant:"smallBold",color:a.weatherSettings.prefersMetric?"default":"light",children:s({defaultMessage:"Celsius",id:"y/PhoM9SbF"})})]}),l.jsxs("label",{className:B("flex w-full cursor-pointer items-center justify-center rounded-md py-2",{"bg-offset dark:bg-offsetPlus":!a.weatherSettings.prefersMetric}),children:[l.jsx("input",{type:"radio",name:"tempUnit",checked:!a.weatherSettings.prefersMetric,onChange:()=>{const g={version:1,prefersMetric:!1};a.updateWeatherSettings(g)},className:"hidden"}),l.jsx(D,{variant:"smallBold",color:a.weatherSettings.prefersMetric?"light":"default",children:s({defaultMessage:"Fahrenheit",id:"K2DDr1Ji/l"})})]})]})})}),l.jsx(z,{className:"border-t"}),l.jsxs("div",{className:"flex flex-row items-center justify-between",children:[l.jsxs("div",{className:"gap-xs flex flex-col",children:[l.jsx(D,{variant:"smallBold",children:s({defaultMessage:"Precise Location",id:"WP8KG0QkTf"})}),l.jsx(D,{variant:"small",className:"leading-tight",color:"light",children:s({defaultMessage:"Use your device location to get the most accurate weather information.",id:"Dsn2unk3pR"})})]}),l.jsx(c0t,{permissionStatus:u,children:l.jsx("div",{onClick:o?void 0:m,children:l.jsx(Go,{active:o,disabled:o})})})]}),l.jsx(z,{className:"border-t"}),l.jsx("div",{className:"mt-sm flex flex-row justify-end",children:l.jsx(ye,{variant:"primary",size:"small",onClick:c,text:s({defaultMessage:"Done",id:"JXdbo8Vnlw"})})})]})})})]})}),c0t=({children:e,permissionStatus:t})=>{const{$t:n}=X(),r=n({defaultMessage:"Currently using precise location. This can be disabled from Comet Settings.",id:"5Z0PWou5EU"});return t==="granted"?l.jsx(bn,{asChild:!0,tooltipText:r,delayDuration:0,arrowClassName:" ",bodyTextClassName:"text-center",children:e}):e},u0t="chrome://wormhole",oX="wormhole-widgets-enabled-cache";function d0t(){const{value:e,loading:t}=Yr({flag:"wormhole-widget",defaultValue:!1}),[n,r]=f.useState(()=>{const s=Ve.getItem(oX);return s?JSON.parse(s):!1});return f.useEffect(()=>{t||e!==n&&(r(e),Ve.setItem(oX,JSON.stringify(e)))},[e,t,n]),n}const Xve=A.memo(({context:e="widget"})=>{const t=hr(),n=f.useCallback(()=>{t.openTab({url:u0t,key:"openWormhole"})},[t]),r=l.jsx("div",{className:"group relative size-full",children:l.jsx("img",{src:"/static/images/wormhole/thumbnail.png",alt:"Wormhole",className:"pointer-events-none absolute inset-0 object-cover"})});return e==="thumbnail"?r:l.jsx(tr,{fullBleed:!0,shadow:!0,className:"active:!bg-offset dark:active:!bg-offsetPlus aspect-[1/1] w-full cursor-pointer overflow-hidden !rounded-2xl",onClick:n,children:r})}),yD=f.memo(({context:e="widget"})=>{const t=l.jsx("div",{className:B("relative h-full w-full cursor-pointer select-none",{"active:!bg-offset dark:active:!bg-offsetPlus":e==="widget"}),children:l.jsx("div",{className:"group relative size-full",children:l.jsx("img",{src:"/static/images/zen/thumbnail.png",alt:"Zen",className:"pointer-events-none absolute inset-0 object-cover"})})});return e==="thumbnail"?t:l.jsx(tr,{shadow:!0,className:"aspect-[1/1] w-full overflow-hidden !rounded-2xl",fullBleed:!0,children:l.jsx(at,{href:"/b/zen",className:"cursor-pointer",draggable:!1,children:t})})});yD.displayName="ZenWidget";const f0t=500,Zve=A.memo(function({id:t,editMode:n,onDelete:r,onShowSettings:s,widget:a}){const[o,i]=f.useState(!1),{isMobileStyle:c}=Ce(),{$t:u}=X(),[d,m]=f.useState(!1),[h,p]=f.useState(!1),[g,y]=f.useState(!1),v=f.useRef(null);f.useEffect(()=>{o&&(m(!1),y(!1))},[o]),f.useEffect(()=>()=>{v.current&&clearTimeout(v.current)},[]);const x=f.useCallback(()=>{v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{y(!0)},f0t)},[]),b=f.useCallback(()=>{v.current&&clearTimeout(v.current),d||y(!1)},[d]),_=f.useCallback(N=>{s(N),p(N)},[s]);f.useEffect(()=>{y(!1)},[h]);const{attributes:w,isDragging:S,listeners:C,setNodeRef:E}=bit({id:t,disabled:!n}),M=N=>{switch(N){case"ANALOG_CLOCK":return l.jsx(y7,{widgetId:t,context:"widget",showSettings:h,setShowSettings:_,showCity:!0});case"STICKY":return l.jsx(w7,{widgetId:t,showSettings:h,setShowSettings:_,context:"widget",defaultText:""});case"TOP_URLS":return l.jsx(NE,{context:"sortable-widgets"});case"WEATHER":return l.jsx(Qve,{widgetId:t,context:"widget",showSettings:h,setShowSettings:_});case"STOCK":return l.jsx(gD,{widgetId:t,context:"widget",showSettings:h,setShowSettings:_});case"DISCOVER":return l.jsx(v7,{context:"widget",showSettings:h,setShowSettings:_});case"ASSISTANT":return l.jsx($pe,{widgetId:t,context:"widget",defaultQuery:u({defaultMessage:"Find important unanswered emails",id:"D8O0cB/SKH"}),showSettings:h,setShowSettings:_});case"SHORTCUT":return l.jsx(Jpe,{widgetId:t,context:"widget",defaultName:u({defaultMessage:"quick-dinner",id:"7f3tHXsIWC"}),defaultQuery:u({defaultMessage:"Give me 3 ideas of one-pan meals I can make for dinner tonight",id:"sgqIZmDyDW"}),showSettings:h,setShowSettings:_});case"WORMHOLE":return l.jsx(Xve,{widgetId:t,context:"widget"});case"ZEN":return l.jsx(yD,{context:"widget"});case"EXPLORE_ASSISTANT":return l.jsx(Ype,{context:"widget"},`${t}-widget`);default:return null}},T=f.useMemo(()=>{const N={type:"default",text:u({defaultMessage:"Remove",id:"G/yZLul6P1"}),destructive:!0,onClick:r},P={type:"default",text:u({defaultMessage:"Settings",id:"D3idYvSLF9"}),onClick:()=>_(!h)};return[...a?.settings?[P]:[],...a?.cannotBeDeleted?[]:[N]]},[u,r,h,a?.cannotBeDeleted,a?.settings,_]),I=f.useCallback(()=>m(!0),[m]),j=f.useCallback(()=>{m(!1),y(!1)},[]);return a?l.jsxs(_e.div,{layout:!0,ref:E,className:B("relative isolate",`col-span-${a.width===4?"full":a.width}`,{"z-[100]":S||o}),drag:n,dragSnapToOrigin:!0,onMouseEnter:x,onMouseLeave:b,onDragStart:()=>{i(!0)},onDragTransitionEnd:()=>{i(!1)},exit:{opacity:0},transition:ho,children:[l.jsx(st,{children:(n||g)&&l.jsx(_e.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:ho,className:"absolute -left-2 -top-2 z-10",children:l.jsx(en,{isMobileStyle:c,items:T,placement:"bottom-start",onOpen:I,onClose:j,children:l.jsx(z,{as:"button",onClick:I,variant:"raised",className:"active:!bg-offset dark:active:!bg-offsetPlus shadow-overlay flex size-6 !cursor-pointer items-center justify-center rounded-full",children:l.jsx(be,{icon:cu,size:"sm"})})})})}),n&&l.jsx("div",{className:B("absolute inset-0 z-[9] cursor-grab",{"cursor-grabbing":S}),onMouseDown:()=>m(!1),...w,...C}),M(a.type)]}):null});Zve.displayName="WidgetItem";const Jve=A.memo(({widget:e,widgetData:t,editMode:n,handleDelete:r,onShowSettings:s})=>{const a=f.useCallback(()=>r(e.id),[r,e.id]);return t?e.shouldHide?l.jsx("div",{className:B("h-px",{"col-span-full":t.width===4,"col-span-1":t.width===1,"col-span-2":t.width===2,"col-span-3":t.width===3}),style:{opacity:0}},e.id):l.jsx(Zve,{id:e.id,editMode:n,onDelete:a,widget:t,onShowSettings:s},e.id):null});Jve.displayName="WidgetsFactory";const e0e=A.memo(({aspectRatio:e,onClick:t,widget:n,widgetIsAdded:r,hideIconOutline:s,manuallyDisabled:a=!1})=>{const o=n.singleton&&r||a,i=u=>{switch(u){case"ANALOG_CLOCK":return l.jsx(y7,{widgetId:n.type,context:"thumbnail"});case"STICKY":return l.jsx(w7,{widgetId:n.type,context:"thumbnail",defaultText:"My great sticky..."});case"WEATHER":return l.jsx(Qve,{widgetId:n.type,context:"thumbnail"});case"TOP_URLS":return l.jsx(NE,{context:"thumbnail",disabled:o});case"STOCK":return l.jsx(gD,{widgetId:n.type,context:"thumbnail"});case"DISCOVER":return l.jsx(v7,{context:"thumbnail"});case"ASSISTANT":return l.jsx($pe,{widgetId:n.type,context:"thumbnail",defaultQuery:"Find important unanswered emails"});case"SHORTCUT":return l.jsx(Jpe,{widgetId:n.type,context:"thumbnail",defaultName:"quick-dinner",defaultQuery:"Give me 3 ideas of one-pan meals I can make for dinner tonight"});case"WORMHOLE":return l.jsx(Xve,{widgetId:n.type,context:"thumbnail"});case"ZEN":return l.jsx(yD,{context:"thumbnail"});case"EXPLORE_ASSISTANT":return l.jsx(Ype,{context:"thumbnail"},`${n.type}-thumbnail`);default:return l.jsx("div",{})}},c=f.useMemo(()=>({aspectRatio:e}),[e]);return l.jsxs("div",{className:"gap-sm relative flex flex-col items-center justify-center",children:[!o&&l.jsx("div",{className:"absolute -top-2 left-1/2 z-10 translate-x-[-68px]",children:l.jsx(z,{as:"button",variant:"raised",onClick:o?void 0:t,className:"active:!bg-offset dark:active:!bg-offsetPlus shadow-overlay flex size-6 !cursor-pointer items-center justify-center rounded-full",children:l.jsx(be,{icon:mr,size:"sm"})})}),l.jsx(tr,{shadow:!0,fullBleed:!s,onClick:o?void 0:t,style:c,className:B("h-[120px] cursor-pointer overflow-hidden",{"pointer-events-none":o,"!overflow-visible !rounded-none border-none !bg-transparent shadow-none":s}),children:l.jsx("div",{className:"absolute inset-0",children:i(n.type)})}),l.jsx(D,{variant:"small",color:o?"ultraLight":"default",children:n.name})]})});e0e.displayName="WidgetsTrayItem";const m0t=25,t0e=A.memo(({widget:e,handleAdd:t,userWidgets:n,handleRequestWeatherPermission:r,topSitesData:s})=>{const a=f.useMemo(()=>e.type==="TOP_URLS"&&s.length===0||n.length>=m0t,[s.length,n.length,e.type]),o=f.useCallback(()=>{t(e),r()},[t,r,e]);if(!e||e.cannotBeDeleted)return null;const i=n.some(c=>c.type===e.type);return l.jsx(Zs,{fallback:null,children:l.jsx(e0e,{aspectRatio:1/1,widget:e,widgetIsAdded:i,hideIconOutline:e.type==="TOP_URLS",onClick:o,manuallyDisabled:a})})});t0e.displayName="WidgetsTrayFactory";const h0t=({widgets:e,userWidgets:t,handleRequestWeatherPermission:n,topSitesData:r,handleAdd:s})=>e.map((a,o)=>l.jsx(t0e,{widget:a,handleAdd:s,userWidgets:t,handleRequestWeatherPermission:n,topSitesData:r},o)),n0e=A.memo(({children:e,setEditMode:t,containerRef:n,maxWidgetsReached:r})=>{const{$t:s}=X(),a=f.useCallback(()=>t(!1),[t]);return l.jsx(hp,{portalTarget:n.current??document.body,children:l.jsx(_e.div,{initial:{y:"100%",x:"-50%"},animate:{y:0,x:"-50%"},exit:{y:"100%",x:"-50%"},transition:ho,className:"md:px-xl fixed bottom-0 left-1/2 z-[100] w-full pb-3",children:l.jsx("div",{className:"px-xl mx-auto max-w-[800px]",children:l.jsxs(z,{variant:"raised",className:"dark:!bg-base shadow-overlay size-full rounded-2xl pb-3",children:[l.jsx("div",{className:"scrollbar-none max-h-[250px] w-full overflow-scroll",children:e}),l.jsxs("div",{className:"pl-md border-subtlest sticky left-0 flex w-full flex-row items-center border-t pr-3 pt-3",children:[r&&l.jsx(D,{variant:"small",color:"ultraLight",children:s({defaultMessage:"You have reached the maximum number of widgets",id:"fRBSTWO49U"})}),l.jsx(ye,{variant:"primary",size:"small",extraCSS:"ml-auto",text:s({defaultMessage:"Done",id:"JXdbo8Vnlw"}),onClick:a})]})]})})})})});n0e.displayName="WidgetTray";const iX="widget-analytics-last-sent",p0t=6*60*60*1e3,g0t=e=>{const{trackEvent:t}=Te();f.useEffect(()=>{const n=Date.now(),r=Ve.getItem(iX),s=r?parseInt(r,10):0;if(n-s<p0t)return;const a={},o=[];e.forEach(i=>{a[i.type]=(a[i.type]||0)+1,qit(i.id)&&o.push(i.type)}),t("comet home widgets viewed",{enabledWidgets:a,widgetsWithSettings:o}),Ve.setItem(iX,n.toString())},[e,t])},lX="set-default-browser-promo-settings-cache",y0t=()=>{const{value:e}=JO({flag:"set-default-browser-banner-promo",defaultValue:{}}),[t,n]=f.useState(()=>{const r=Ve.getItem(lX);return r?JSON.parse(r):!1});return f.useEffect(()=>{e!==t&&(n(e),Ve.setItem(lX,JSON.stringify(e)))},[e,t]),t},gb="comet_default_browser_banner_data",v0t=4,x0t=24,b0t=60*60*1e3,_0t=({source:e})=>{const t=hr(),[n,r]=f.useState(null),[s,a]=f.useState(!1),o=y0t(),{trackEvent:i}=Te(),c=typeof o.promoCooldownPeriodHours<"u"&&typeof o.promoMaxCloseCount<"u",u=f.useCallback(p=>{if(p===0)return!1;const g=Date.now()-p,y=b0t*(o?.promoCooldownPeriodHours??x0t);return g<y},[o?.promoCooldownPeriodHours]);f.useEffect(()=>{(async()=>{try{const g=await t.getIsCometDefaultBrowser("check_default_browser");r(g)}catch{r(null)}})()},[t]),f.useEffect(()=>{(()=>{const g=Ve.getItem(gb);if(!g){a(!1);return}try{const y=JSON.parse(g);if(y.count>=(o?.promoMaxCloseCount??v0t)){a(!0);return}if(u(y.lastClosedTime)){a(!0);return}a(!1)}catch{Ve.removeItem(gb),a(!1)}})()},[o?.promoMaxCloseCount,u]);const d=f.useCallback(()=>{const p=Ve.getItem(gb);let g;try{g=p?JSON.parse(p):{count:0,lastClosedTime:0}}catch{g={count:0,lastClosedTime:0}}if(u(g.lastClosedTime)){a(!0);return}const y={count:g.count+1,lastClosedTime:Date.now()};i("default browser upsell closed",{closedCount:g.count,cometSurface:e}),Ve.setItem(gb,JSON.stringify(y)),a(!0)},[e,i,u]),m=f.useCallback(async()=>{try{await t.setCometAsDefaultBrowser("set_default_browser"),r(!0),i("default browser upsell selected",{cometSurface:e})}catch{}},[t,e,i]),h=c&&n===!1&&!s;return f.useMemo(()=>({shouldShowBanner:h,handleBannerClose:d,setDefaultBrowser:m}),[h,d,m])},r0e="default-widgets-cached",uI=e=>[{id:"default-analog-clock",type:"ANALOG_CLOCK"},{id:e?"default-explore-assistant":"default-assistant",type:e?"EXPLORE_ASSISTANT":"ASSISTANT"},{id:"default-stock",type:"STOCK"},{id:"default-weather",type:"WEATHER"},{id:"top-most-urls",type:"TOP_URLS"}],w0t=()=>{const e=Ve.getItem(r0e);if(e)try{return JSON.parse(e)}catch{return uI(!1)}return uI(!1)};function S0t(){const{shouldShowWidget:e,isLoading:t}=x7(),[n,r]=f.useState(w0t()),s=f.useMemo(()=>uI(e),[e]);f.useEffect(()=>{if(!t){const o=JSON.stringify(s),i=JSON.stringify(n);o!==i&&(r(s),Ve.setItem(r0e,o))}},[t,s,n]);const a=t?n:s;return f.useMemo(()=>({defaultWidgets:a,isLoading:t}),[a,t])}const C0t=()=>{const{$t:e}=X();return f.useMemo(()=>[{type:"TOP_URLS",name:e({defaultMessage:"Top Sites",id:"v/BAbysxv5"}),singleton:!0,width:4},{type:"ANALOG_CLOCK",name:e({defaultMessage:"Clock",id:"qCyPKfisKN"}),settings:!0,width:1},{type:"STICKY",name:e({defaultMessage:"Sticky",id:"kpXiKrXCK9"}),settings:!0,width:1},{type:"WEATHER",name:e({defaultMessage:"Weather",id:"O2sqh9Nj5X"}),settings:!0,singleton:!0,width:1},{type:"STOCK",name:e({defaultMessage:"Stock",id:"vuKrlWBaI3"}),settings:!0,width:1},{type:"DISCOVER",name:e({defaultMessage:"Discover",id:"cE4HfwyEyr"}),singleton:!0,width:1},{type:"ASSISTANT",name:e({defaultMessage:"Assistant",id:"wSAvhubuX6"}),settings:!0,width:1},{type:"SHORTCUT",name:e({defaultMessage:"Shortcut",id:"tceWOrncgz"}),settings:!0,width:1},{type:"WORMHOLE",name:e({defaultMessage:"Wormhole",id:"GrT4LLPa93"}),singleton:!0,width:1},{type:"ZEN",name:e({defaultMessage:"Zen",id:"wpzEtliq4X"}),singleton:!0,width:1},{type:"EXPLORE_ASSISTANT",name:e({defaultMessage:"Try Agent in Action",id:"7swKDXB5AP"}),singleton:!0,width:1}],[e])},cX=25,E0t=()=>null,s0e=A.memo(({editMode:e,setEditMode:t,containerRef:n,askInput:r})=>{const s="sortable-widgets",a="comet_home",{trackEventOnce:o}=Te(),{defaultWidgets:i}=S0t(),{shouldShowWidget:c}=x7(),[u,d]=f.useState(Vpe(i)),m=zat(Hat(f7)),h=f.useRef(!1);g0t(u);const{shouldShowBanner:p,handleBannerClose:g,setDefaultBrowser:y}=_0t({source:a}),{data:v=[]}=Kve(),x=C0t();f.useEffect(()=>{if(!h.current){h.current=!0;return}g7(u)},[u]),f.useEffect(()=>{p&&o("default browser upsell viewed",{cometSurface:a})},[o,p,a]);const b=f.useCallback(P=>{const{active:R,over:k}=P;k&&R.id!==k.id&&d(O=>{const L=O.findIndex(U=>U.id===R.id),F=O.findIndex(U=>U.id===k.id);return h7(O,L,F)})},[]),_=f.useCallback(P=>{u.length>=cX||d(R=>[...R,{id:ar(),type:P.type}])},[u]),w=f.useCallback(P=>{d(R=>R.filter(k=>k.id!==P))},[]),S=f.useCallback(()=>{navigator.geolocation.getCurrentPosition(ee.info)},[]),C=d0t(),E=Jlt(),{data:M}=_7({reason:s,enabled:E}),[T,I]=f.useState(!1);f.useEffect(()=>{if(!E||!M||T)return;const P=M?.map?.(L=>L.task_id)??ce,k=u.filter(L=>L.type==="SHORTCUT").map(L=>{const{taskId:F}=Bpe({context:"widget",widgetId:L.id});return{...L,taskId:F}}).filter(L=>!P.includes(L.taskId)).filter(L=>L.taskId!==p7).map(L=>L.id);if(k.length===0)return;k.forEach(L=>{Git(L)});const O=u.filter(L=>!k.includes(L.id));d(O)},[M,u,E,T]);const j=f.useMemo(()=>u.filter(P=>P.type==="EXPLORE_ASSISTANT"?c:P.type==="SHORTCUT"?E:P.type==="WORMHOLE"?C:!0).map(P=>({...P,shouldHide:P.type==="TOP_URLS"&&v.length===0})),[u,v,c,E,C]),N=f.useMemo(()=>x.filter(P=>P.type==="WORMHOLE"?C:P.type==="EXPLORE_ASSISTANT"?c:P.type==="SHORTCUT"?E:P.type==="ASSISTANT"?!E:!0),[x,C,c,E]);return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"p-lg flex min-h-full w-full items-center justify-center",children:l.jsxs("div",{style:{width:800},className:"grid grid-cols-[repeat(auto-fill,minmax(160px,1fr))] gap-3",children:[l.jsx(Rpe,{shouldShow:p,onClose:g,onSetDefault:y}),l.jsx(Hot,{sensors:m,collisionDetection:Zat,onDragOver:b,children:l.jsxs(mit,{items:j,strategy:E0t,children:[l.jsx(_e.div,{layout:!0,transition:ho,className:"-mb-md col-span-full",children:r}),l.jsx(st,{children:j.map(P=>l.jsx(Jve,{widget:P,editMode:e,handleDelete:w,widgetData:Wit(x,P.type),onShowSettings:I},P.id))})]})})]})}),l.jsx(st,{children:e&&l.jsx(n0e,{containerRef:n,setEditMode:t,maxWidgetsReached:u.length>=cX,children:l.jsx("div",{className:"w-full",children:l.jsx("div",{className:"grid w-full grid-cols-[repeat(auto-fill,minmax(120px,1fr))] flex-row gap-6 p-6",children:l.jsx(h0t,{widgets:N,handleAdd:_,userWidgets:u,handleRequestWeatherPermission:S,topSitesData:v})})})})})]})});s0e.displayName="HomeWidgets";const a0e=A.memo(e=>{const{$t:t}=X(),n=At(),r=f.useCallback(()=>{n.push("/browser/invite")},[n]);return l.jsx(ye,{...e,icon:r8,text:t({defaultMessage:"Invites",id:"Wy+IdbkBFc"}),onClick:r})});a0e.displayName="NTPInviteButton";function Ie(e,...t){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",e);for(const s of t)r.append("v",s);throw n.search=r.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const ui=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,M0t=ui&&"documentMode"in document?document.documentMode:null,Mi=ui&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),su=ui&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),xw=!(!ui||!("InputEvent"in window)||M0t)&&"getTargetRanges"in new window.InputEvent("input"),a0=ui&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),Ih=ui&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,T0t=ui&&/Android/.test(navigator.userAgent),o0e=ui&&/^(?=.*Chrome).*/i.test(navigator.userAgent),uX=ui&&T0t&&o0e,bw=ui&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!o0e;function _w(...e){const t=[];for(const n of e)if(n&&typeof n=="string")for(const[r]of n.matchAll(/\S+/g))t.push(r);return t}const k0t=1,N0t=3,A0t=9,P0t=11,sf=0,i0e=1,jh=2,R0t=0,I0t=1,j0t=2,ww=4,Sw=8,vD=128,O0t=1792|(112|(3|ww|Sw)|vD),xD=1,bD=2,_D=3,wD=4,SD=5,CD=6,PE=a0||Ih||bw?"":"",ac=`

`,L0t=su?"":PE,l0e="---",c0e="A-Za-z--------",D0t=new RegExp("^[^"+c0e+"]*["+l0e+"]"),F0t=new RegExp("^[^"+l0e+"]*["+c0e+"]"),af={bold:1,capitalize:1024,code:16,highlight:vD,italic:2,lowercase:256,strikethrough:ww,subscript:32,superscript:64,underline:Sw,uppercase:512},U0t={directionless:1,unmergeable:2},dX={center:bD,end:CD,justify:wD,left:xD,right:_D,start:SD},B0t={[bD]:"center",[CD]:"end",[wD]:"justify",[xD]:"left",[_D]:"right",[SD]:"start"},V0t={normal:0,segmented:2,token:1},$0t={[R0t]:"normal",[j0t]:"segmented",[I0t]:"token"},W0t="$";function u0e(e,t,n,r,s,a){let o=e.getFirstChild();for(;o!==null;){const i=o.__key;o.__parent===t&&(Ee(o)&&u0e(o,i,n,r,s,a),n.has(i)||a.delete(i),s.push(i)),o=o.getNextSibling()}}const H0t=100;let dI=!1,ED=0;function z0t(e){ED=e.timeStamp}function n5(e,t,n){const r=e.nodeName==="BR",s=t.__lexicalLineBreak;return s&&(e===s||r&&e.previousSibling===s)||r&&BE(e,n)!==void 0}function G0t(e,t,n){const r=al(go(n));let s=null,a=null;r!==null&&r.anchorNode===e&&(s=r.anchorOffset,a=r.focusOffset);const o=e.nodeValue;o!==null&&VD(t,o,s,a,!1)}function q0t(e,t,n){if(Re(e)){const r=e.anchor.getNode();if(r.is(n)&&e.format!==r.getFormat())return!1}return Cc(t)&&n.isAttached()}function K0t(e,t,n,r){for(let s=e;s&&!$1t(s);s=N1(s)){const a=BE(s,t);if(a!==void 0){const o=Gr(a,n);if(o)return Tn(o)||!Tr(s)?void 0:[s,o]}else if(s===r)return[r,l1e(n)]}}function d0e(e,t,n){dI=!0;const r=performance.now()-ED>H0t;try{Ia(e,()=>{const s=Ze()||function(h){return h.getEditorState().read(()=>{const p=Ze();return p!==null?p.clone():null})}(e),a=new Map,o=e.getRootElement(),i=e._editorState,c=e._blockCursorElement;let u=!1,d="";for(let h=0;h<t.length;h++){const p=t[h],g=p.type,y=p.target,v=K0t(y,e,i,o);if(!v)continue;const[x,b]=v;if(g==="characterData")r&&Qe(b)&&Cc(y)&&q0t(s,y,b)&&G0t(y,b,e);else if(g==="childList"){u=!0;const _=p.addedNodes;for(let C=0;C<_.length;C++){const E=_[C],M=o1e(E),T=E.parentNode;if(T!=null&&E!==c&&M===null&&!n5(E,T,e)){if(su){const I=(Tr(E)?E.innerText:null)||E.nodeValue;I&&(d+=I)}T.removeChild(E)}}const w=p.removedNodes,S=w.length;if(S>0){let C=0;for(let E=0;E<S;E++){const M=w[E];(n5(M,y,e)||c===M)&&(y.appendChild(M),C++)}S!==C&&a.set(x,b)}}}if(a.size>0)for(const[h,p]of a)p.reconcileObservedMutation(h,e);const m=n.takeRecords();if(m.length>0){for(let h=0;h<m.length;h++){const p=m[h],g=p.addedNodes,y=p.target;for(let v=0;v<g.length;v++){const x=g[v],b=x.parentNode;b==null||x.nodeName!=="BR"||n5(x,y,e)||b.removeChild(x)}}n.takeRecords()}s!==null&&(u&&Ps(s),su&&f1e(e)&&s.insertRawText(d))})}finally{dI=!1}}function f0e(e){const t=e._observer;t!==null&&d0e(e,t.takeRecords(),t)}function m0e(e){(function(t){ED===0&&go(t).addEventListener("textInput",z0t,!0)})(e),e._observer=new MutationObserver((t,n)=>{d0e(e,t,n)})}let Y0t=class h0e{constructor(t,n=new Map,r=void 0,s=new Map,a=void 0){this.node=t,this.sharedConfigMap=n,this.unknownState=r,this.knownState=s;const o=a!==void 0?a:function(i,c,u){let d=u.size;if(c)for(const m in c){const h=i.get(m);h&&u.has(h)||d++}return d}(n,r,s);this.size=o}getValue(t){const n=this.knownState.get(t);if(n!==void 0)return n;this.sharedConfigMap.set(t.key,t);let r=t.defaultValue;if(this.unknownState&&t.key in this.unknownState){const s=this.unknownState[t.key];s!==void 0&&(r=t.parse(s)),this.updateFromKnown(t,r)}return r}getInternalState(){return[this.unknownState,this.knownState]}toJSON(){const t={...this.unknownState};for(const[n,r]of this.knownState)n.isEqual(r,n.defaultValue)?delete t[n.key]:t[n.key]=n.unparse(r);return yb(t)?{[W0t]:t}:{}}getWritable(t){if(this.node===t)return this;const n=new Map(this.knownState),r=yb(s=this.unknownState)&&{...s};var s;if(r)for(const a of n.keys())delete r[a.key];return new h0e(t,this.sharedConfigMap,yb(r),n,this.size)}updateFromKnown(t,n){const r=t.key;this.sharedConfigMap.set(r,t);const{knownState:s,unknownState:a}=this;s.has(t)||a&&r in a||this.size++,s.set(t,n)}updateFromUnknown(t,n){const r=this.sharedConfigMap.get(t);r?this.updateFromKnown(r,r.parse(n)):(this.unknownState=this.unknownState||{},t in this.unknownState||this.size++,this.unknownState[t]=n)}updateFromJSON(t){const{knownState:n}=this;for(const r of n.keys())n.set(r,r.defaultValue);if(this.size=n.size,this.unknownState={},t)for(const[r,s]of Object.entries(t))this.updateFromUnknown(r,s);this.unknownState=yb(this.unknownState)}};function yb(e){if(e)for(const t in e)return e}function Q0t(e){const t=e.getWritable(),n=t.__state?t.__state.getWritable(t):new Y0t(t);return t.__state=n,n}function fX(e,t){const n=e.__mode,r=e.__format,s=e.__style,a=t.__mode,o=t.__format,i=t.__style,c=e.__state,u=t.__state;return(n===null||n===a)&&(r===null||r===o)&&(s===null||s===i)&&(e.__state===null||c===u||function(d,m){if(d===m)return!0;if(d&&m&&d.size!==m.size)return!1;const h=new Set,p=(y,v)=>{for(const[x,b]of y.knownState){if(h.has(x.key))continue;h.add(x.key);const _=v?v.getValue(x):x.defaultValue;if(_!==b&&!x.isEqual(_,b))return!0}return!1},g=(y,v)=>{const{unknownState:x}=y,b=v?v.unknownState:void 0;if(x){for(const[_,w]of Object.entries(x))if(!h.has(_)&&(h.add(_),w!==(b?b[_]:void 0)))return!0}return!1};return!(d&&p(d,m)||m&&p(m,d)||d&&g(d,m)||m&&g(m,d))}(c,u))}function mX(e,t){const n=e.mergeWithSibling(t),r=or()._normalizedNodes;return r.add(e.__key),r.add(t.__key),n}function hX(e){let t,n,r=e;if(r.__text!==""||!r.isSimpleText()||r.isUnmergeable()){for(;(t=r.getPreviousSibling())!==null&&Qe(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(t.__text!==""){if(fX(t,r)){r=mX(t,r);break}break}t.remove()}for(;(n=r.getNextSibling())!==null&&Qe(n)&&n.isSimpleText()&&!n.isUnmergeable();){if(n.__text!==""){if(fX(r,n)){r=mX(r,n);break}break}n.remove()}}else r.remove()}function o0(e){return pX(e.anchor),pX(e.focus),e}function pX(e){for(;e.type==="element";){const t=e.getNode(),n=e.offset;let r,s;if(n===t.getChildrenSize()?(r=t.getChildAtIndex(n-1),s=!0):(r=t.getChildAtIndex(n),s=!1),Qe(r)){e.set(r.__key,s?r.getTextContentSize():0,"text",!0);break}if(!Ee(r))break;e.set(r.__key,s?r.getChildrenSize():0,"element",!0)}}let Su,Qs,i0,RE,fI,mI,of,Bo,hI,l0,Ir="",Ks="",bi=null,_i="",Al="",p0e=!1,c0=!1,T_=null;function Cw(e,t){const n=of.get(e);if(t!==null){const r=yI(e);r.parentNode===t&&t.removeChild(r)}if(Bo.has(e)||Qs._keyToDOMMap.delete(e),Ee(n)){const r=Mw(n,of);pI(r,0,r.length-1,null)}n!==void 0&&$D(l0,i0,RE,n,"destroyed")}function pI(e,t,n,r){let s=t;for(;s<=n;++s){const a=e[s];a!==void 0&&Cw(a,r)}}function od(e,t){e.setProperty("text-align",t)}const X0t="40px";function g0e(e,t){const n=Su.theme.indent;if(typeof n=="string"){const s=e.classList.contains(n);t>0&&!s?e.classList.add(n):t<1&&s&&e.classList.remove(n)}const r=getComputedStyle(e).getPropertyValue("--lexical-indent-base-value")||X0t;e.style.setProperty("padding-inline-start",t===0?"":`calc(${t} * ${r})`)}function y0e(e,t){const n=e.style;t===0?od(n,""):t===xD?od(n,"left"):t===bD?od(n,"center"):t===_D?od(n,"right"):t===wD?od(n,"justify"):t===SD?od(n,"start"):t===CD&&od(n,"end")}function Ew(e,t){const n=Bo.get(e);n===void 0&&Ie(60);const r=n.createDOM(Su,Qs);if(function(s,a,o){const i=o._keyToDOMMap;(function(c,u,d){const m=`__lexicalKey_${u._key}`;c[m]=d})(a,o,s),i.set(s,a)}(e,r,Qs),Qe(n)?r.setAttribute("data-lexical-text","true"):Tn(n)&&r.setAttribute("data-lexical-decorator","true"),Ee(n)){const s=n.__indent,a=n.__size;if(s!==0&&g0e(r,s),a!==0){const i=a-1;(function(c,u,d,m){const h=Ks;Ks="",gI(c,d,0,u,d.getDOMSlot(m)),x0e(d,m),Ks=h})(Mw(n,Bo),i,n,r)}const o=n.__format;o!==0&&y0e(r,o),n.isInline()||v0e(null,n,r),VE(n)&&(Ir+=ac,Al+=ac)}else{const s=n.getTextContent();if(Tn(n)){const a=n.decorate(Qs,Su);a!==null&&b0e(e,a),r.contentEditable="false"}else Qe(n)&&(n.isDirectionless()||(Ks+=s));Ir+=s,Al+=s}return t!==null&&t.insertChild(r),$D(l0,i0,RE,n,"created"),r}function gI(e,t,n,r,s){const a=Ir;Ir="";let o=n;for(;o<=r;++o){Ew(e[o],s);const i=Bo.get(e[o]);i!==null&&Qe(i)&&(bi===null&&(bi=i.getFormat()),_i===""&&(_i=i.getStyle()))}VE(t)&&(Ir+=ac),s.element.__lexicalTextContent=Ir,Ir=a+Ir}function gX(e,t){if(e){const n=e.__last;if(n){const r=t.get(n);if(r)return Od(r)?"line-break":Tn(r)&&r.isInline()?"decorator":null}return"empty"}return null}function v0e(e,t,n){const r=gX(e,of),s=gX(t,Bo);r!==s&&t.getDOMSlot(n).setManagedLineBreak(s)}function x0e(e,t){const n=t.__lexicalDirTextContent||"",r=t.__lexicalDir||"";if(n!==Ks||r!==T_){const s=Ks==="",a=s?T_:function(o){return D0t.test(o)?"rtl":F0t.test(o)?"ltr":null}(Ks);if(a!==r){const o=t.classList,i=Su.theme;let c=r!==null?i[r]:void 0,u=a!==null?i[a]:void 0;if(c!==void 0){if(typeof c=="string"){const d=_w(c);c=i[r]=d}o.remove(...c)}if(a===null||s&&a==="ltr")t.removeAttribute("dir");else{if(u!==void 0){if(typeof u=="string"){const d=_w(u);u=i[a]=d}u!==void 0&&o.add(...u)}t.dir=a}c0||(e.getWritable().__dir=a)}T_=a,t.__lexicalDirTextContent=Ks,t.__lexicalDir=a}}function Z0t(e,t,n){const r=Ks;var s;Ks="",bi=null,_i="",function(a,o,i){const c=Ir,u=a.__size,d=o.__size;Ir="";const m=i.element;if(u===1&&d===1){const h=a.__first,p=o.__first;if(h===p)dy(h,m);else{const y=yI(h),v=Ew(p,null);try{m.replaceChild(v,y)}catch(x){if(typeof x=="object"&&x!=null){const b=`${x.toString()} Parent: ${m.tagName}, new child: {tag: ${v.tagName} key: ${p}}, old child: {tag: ${y.tagName}, key: ${h}}.`;throw new Error(b)}throw x}Cw(h,null)}const g=Bo.get(p);Qe(g)&&(bi===null&&(bi=g.getFormat()),_i===""&&(_i=g.getStyle()))}else{const h=Mw(a,of),p=Mw(o,Bo);if(h.length!==u&&Ie(227),p.length!==d&&Ie(228),u===0)d!==0&&gI(p,o,0,d-1,i);else if(d===0){if(u!==0){const g=i.after==null&&i.before==null&&i.element.__lexicalLineBreak==null;pI(h,0,u-1,g?null:m),g&&(m.textContent="")}}else(function(g,y,v,x,b,_){const w=x-1,S=b-1;let C,E,M=_.getFirstChild(),T=0,I=0;for(;T<=w&&I<=S;){const P=y[T],R=v[I];if(P===R)M=r5(dy(R,_.element)),T++,I++;else{C===void 0&&(C=new Set(y)),E===void 0&&(E=new Set(v));const O=E.has(P),L=C.has(R);if(O)if(L){const F=Vh(Qs,R);F===M?M=r5(dy(R,_.element)):(_.withBefore(M).insertChild(F),dy(R,_.element)),T++,I++}else Ew(R,_.withBefore(M)),I++;else M=r5(yI(P)),Cw(P,_.element),T++}const k=Bo.get(R);k!==null&&Qe(k)&&(bi===null&&(bi=k.getFormat()),_i===""&&(_i=k.getStyle()))}const j=T>w,N=I>S;if(j&&!N){const P=v[S+1],R=P===void 0?null:Qs.getElementByKey(P);gI(v,g,I,S,_.withBefore(R))}else N&&!j&&pI(y,T,w,_.element)})(o,h,p,u,d,i)}VE(o)&&(Ir+=ac),m.__lexicalTextContent=Ir,Ir=c+Ir}(e,t,t.getDOMSlot(n)),x0e(t,n),s=t,bi==null||bi===s.__textFormat||c0||s.setTextFormat(bi),function(a){_i===""||_i===a.__textStyle||c0||a.setTextStyle(_i)}(t),Ks=r}function Mw(e,t){const n=[];let r=e.__first;for(;r!==null;){const s=t.get(r);s===void 0&&Ie(101),n.push(r),r=s.__next}return n}function dy(e,t){const n=of.get(e);let r=Bo.get(e);n!==void 0&&r!==void 0||Ie(61);const s=p0e||mI.has(e)||fI.has(e),a=Vh(Qs,e);if(n===r&&!s){if(Ee(n)){const o=a.__lexicalTextContent;o!==void 0&&(Ir+=o,Al+=o);const i=a.__lexicalDirTextContent;i!==void 0&&(Ks+=i)}else{const o=n.getTextContent();Qe(n)&&!n.isDirectionless()&&(Ks+=o),Al+=o,Ir+=o}return a}if(n!==r&&s&&$D(l0,i0,RE,r,"updated"),r.updateDOM(n,a,Su)){const o=Ew(e,null);return t===null&&Ie(62),t.replaceChild(o,a),Cw(e,null),o}if(Ee(n)&&Ee(r)){const o=r.__indent;o!==n.__indent&&g0e(a,o);const i=r.__format;i!==n.__format&&y0e(a,i),s&&(Z0t(n,r,a),Ms(r)||r.isInline()||v0e(n,r,a)),VE(r)&&(Ir+=ac,Al+=ac)}else{const o=r.getTextContent();if(Tn(r)){const i=r.decorate(Qs,Su);i!==null&&b0e(e,i)}else Qe(r)&&!r.isDirectionless()&&(Ks+=o);Ir+=o,Al+=o}if(!c0&&Ms(r)&&r.__cachedText!==Al){const o=r.getWritable();o.__cachedText=Al,r=o}return a}function b0e(e,t){let n=Qs._pendingDecorators;const r=Qs._decorators;if(n===null){if(r[e]===t)return;n=i1e(Qs)}n[e]=t}function r5(e){let t=e.nextSibling;return t!==null&&t===Qs._blockCursorElement&&(t=t.nextSibling),t}function J0t(e,t,n,r,s,a){Ir="",Al="",Ks="",p0e=r===jh,T_=null,Qs=n,Su=n._config,i0=n._nodes,RE=Qs._listeners.mutation,fI=s,mI=a,of=e._nodeMap,Bo=t._nodeMap,c0=t._readOnly,hI=new Map(n._keyToDOMMap);const o=new Map;return l0=o,dy("root",null),Qs=void 0,i0=void 0,fI=void 0,mI=void 0,of=void 0,Bo=void 0,Su=void 0,hI=void 0,l0=void 0,o}function yI(e){const t=hI.get(e);return t===void 0&&Ie(75,e),t}function Bt(e){return{type:e}}const _0e=Bt("SELECTION_CHANGE_COMMAND"),e1t=Bt("SELECTION_INSERT_CLIPBOARD_NODES_COMMAND"),t1t=Bt("CLICK_COMMAND"),qi=Bt("DELETE_CHARACTER_COMMAND"),zm=Bt("INSERT_LINE_BREAK_COMMAND"),vI=Bt("INSERT_PARAGRAPH_COMMAND"),jd=Bt("CONTROLLED_TEXT_INSERTION_COMMAND"),IE=Bt("PASTE_COMMAND"),Tw=Bt("REMOVE_TEXT_COMMAND"),Oh=Bt("DELETE_WORD_COMMAND"),Lh=Bt("DELETE_LINE_COMMAND"),Ed=Bt("FORMAT_TEXT_COMMAND"),w0e=Bt("UNDO_COMMAND"),S0e=Bt("REDO_COMMAND"),n1t=Bt("KEYDOWN_COMMAND"),C0e=Bt("KEY_ARROW_RIGHT_COMMAND"),r1t=Bt("MOVE_TO_END"),E0e=Bt("KEY_ARROW_LEFT_COMMAND"),s1t=Bt("MOVE_TO_START"),M0e=Bt("KEY_ARROW_UP_COMMAND"),T0e=Bt("KEY_ARROW_DOWN_COMMAND"),Dh=Bt("KEY_ENTER_COMMAND"),a1t=Bt("KEY_SPACE_COMMAND"),MD=Bt("KEY_BACKSPACE_COMMAND"),k0e=Bt("KEY_ESCAPE_COMMAND"),TD=Bt("KEY_DELETE_COMMAND"),N0e=Bt("KEY_TAB_COMMAND"),o1t=Bt("OUTDENT_CONTENT_COMMAND"),A0e=Bt("DROP_COMMAND"),P0e=Bt("DRAGSTART_COMMAND"),i1t=Bt("DRAGOVER_COMMAND"),l1t=Bt("DRAGEND_COMMAND"),kD=Bt("COPY_COMMAND"),ND=Bt("CUT_COMMAND"),xI=Bt("SELECT_ALL_COMMAND"),UWt=Bt("CLEAR_EDITOR_COMMAND"),BWt=Bt("CLEAR_HISTORY_COMMAND"),VWt=Bt("CAN_REDO_COMMAND"),$Wt=Bt("CAN_UNDO_COMMAND"),c1t=Bt("FOCUS_COMMAND"),u1t=Bt("BLUR_COMMAND"),d1t=Bt("KEY_MODIFIER_COMMAND"),wl=Object.freeze({}),bI=30,_I=[["keydown",function(e,t){if(Yy=e.timeStamp,R0e=e.key,!t.isComposing()&&!tt(t,n1t,e)&&e.key!=null){if(s5&&HX(e))return Ia(t,()=>{vb(t,a5)}),s5=!1,void(a5="");if(function(n){return Nn(n,"ArrowRight",{shiftKey:"any"})}(e))tt(t,C0e,e);else if(function(n){return Nn(n,"ArrowRight",Tl)}(e))tt(t,r1t,e);else if(function(n){return Nn(n,"ArrowLeft",{shiftKey:"any"})}(e))tt(t,E0e,e);else if(function(n){return Nn(n,"ArrowLeft",Tl)}(e))tt(t,s1t,e);else if(function(n){return Nn(n,"ArrowUp",{altKey:"any",shiftKey:"any"})}(e))tt(t,M0e,e);else if(function(n){return Nn(n,"ArrowDown",{altKey:"any",shiftKey:"any"})}(e))tt(t,T0e,e);else if(function(n){return Nn(n,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any",shiftKey:!0})}(e))Qy=!0,tt(t,Dh,e);else if(function(n){return n.key===" "}(e))tt(t,a1t,e);else if(function(n){return Mi&&Nn(n,"o",{ctrlKey:!0})}(e))e.preventDefault(),Qy=!0,tt(t,zm,!0);else if(function(n){return Nn(n,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any"})}(e))Qy=!1,tt(t,Dh,e);else if(function(n){return Nn(n,"Backspace",{shiftKey:"any"})||Mi&&Nn(n,"h",{ctrlKey:!0})}(e))HX(e)?tt(t,MD,e):(e.preventDefault(),tt(t,qi,!0));else if(function(n){return n.key==="Escape"}(e))tt(t,k0e,e);else if(function(n){return Nn(n,"Delete",{})||Mi&&Nn(n,"d",{ctrlKey:!0})}(e))(function(n){return n.key==="Delete"})(e)?tt(t,TD,e):(e.preventDefault(),tt(t,qi,!1));else if(function(n){return Nn(n,"Backspace",WX)}(e))e.preventDefault(),tt(t,Oh,!0);else if(function(n){return Nn(n,"Delete",WX)}(e))e.preventDefault(),tt(t,Oh,!1);else if(function(n){return Mi&&Nn(n,"Backspace",{metaKey:!0})}(e))e.preventDefault(),tt(t,Lh,!0);else if(function(n){return Mi&&(Nn(n,"Delete",{metaKey:!0})||Nn(n,"k",{ctrlKey:!0}))}(e))e.preventDefault(),tt(t,Lh,!1);else if(function(n){return Nn(n,"b",Tl)}(e))e.preventDefault(),tt(t,Ed,"bold");else if(function(n){return Nn(n,"u",Tl)}(e))e.preventDefault(),tt(t,Ed,"underline");else if(function(n){return Nn(n,"i",Tl)}(e))e.preventDefault(),tt(t,Ed,"italic");else if(function(n){return Nn(n,"Tab",{shiftKey:"any"})}(e))tt(t,N0e,e);else if(function(n){return Nn(n,"z",Tl)}(e))e.preventDefault(),tt(t,w0e,void 0);else if(function(n){return Mi?Nn(n,"z",{metaKey:!0,shiftKey:!0}):Nn(n,"y",{ctrlKey:!0})||Nn(n,"z",{ctrlKey:!0,shiftKey:!0})}(e))e.preventDefault(),tt(t,S0e,void 0);else{const n=t._editorState._selection;n===null||Re(n)?!su&&zX(e)&&(e.preventDefault(),tt(t,xI,e)):function(r){return Nn(r,"c",Tl)}(e)?(e.preventDefault(),tt(t,kD,e)):function(r){return Nn(r,"x",Tl)}(e)?(e.preventDefault(),tt(t,ND,e)):zX(e)&&(e.preventDefault(),tt(t,xI,e))}(function(n){return n.ctrlKey||n.shiftKey||n.altKey||n.metaKey})(e)&&tt(t,d1t,e)}}],["pointerdown",function(e,t){const n=e.target,r=e.pointerType;Kp(n)&&r!=="touch"&&e.button===0&&Ia(t,()=>{BX(n)||(SI=!0)})}],["compositionstart",function(e,t){Ia(t,()=>{const n=Ze();if(Re(n)&&!t.isComposing()){const r=n.anchor,s=n.anchor.getNode();ls(r.key),(e.timeStamp<Yy+bI||r.type==="element"||!n.isCollapsed()||s.getFormat()!==n.format||Qe(s)&&s.getStyle()!==n.style)&&tt(t,jd,L0t)}})}],["compositionend",function(e,t){su?zg=!0:Ih||!a0&&!bw?Ia(t,()=>{vb(t,e.data)}):(s5=!0,a5=e.data)}],["input",function(e,t){e.stopPropagation(),Ia(t,()=>{if(Tr(e.target)&&BX(e.target))return;const n=Ze(),r=e.data,s=D0e(e);if(r!=null&&Re(n)&&O0e(n,s,r,e.timeStamp,!1)){zg&&(vb(t,r),zg=!1);const a=n.anchor.getNode(),o=al(go(t));if(o===null)return;const i=n.isBackward(),c=i?n.anchor.offset:n.focus.offset,u=i?n.focus.offset:n.anchor.offset;xw&&!n.isCollapsed()&&Qe(a)&&o.anchorNode!==null&&a.getTextContent().slice(0,c)+r+a.getTextContent().slice(c+u)===d1e(o.anchorNode)||tt(t,jd,r);const d=r.length;su&&d>1&&e.inputType==="insertCompositionText"&&!t.isComposing()&&(n.anchor.offset-=d),a0||Ih||bw||!t.isComposing()||(Yy=0,ls(null))}else BD(!1,t,r!==null?r:void 0),zg&&(vb(t,r||void 0),zg=!1);(function(){_s();const a=or();f0e(a)})()},{event:e}),sm=null}],["click",function(e,t){Ia(t,()=>{const n=Ze(),r=al(go(t)),s=T1();if(r){if(Re(n)){const a=n.anchor,o=a.getNode();if(a.type==="element"&&a.offset===0&&n.isCollapsed()&&!Ms(o)&&Kn().getChildrenSize()===1&&o.getTopLevelElementOrThrow().isEmpty()&&s!==null&&n.is(s))r.removeAllRanges(),n.dirty=!0;else if(e.detail===3&&!n.isCollapsed()&&o!==n.focus.getNode()){const i=function(c,u){let d=c;for(;d!==Kn()&&d!=null;){if(u(d))return d;d=d.getParent()}return null}(o,c=>Ee(c)&&!c.isInline());Ee(i)&&i.select(0)}}else if(e.pointerType==="touch"){const a=r.anchorNode;(Tr(a)||Cc(a))&&Ps(RD(s,r,t,e))}}tt(t,t1t,e)})}],["cut",wl],["copy",wl],["dragstart",wl],["dragover",wl],["dragend",wl],["paste",wl],["focus",wl],["blur",wl],["drop",wl]];xw&&_I.push(["beforeinput",(e,t)=>function(n,r){const s=n.inputType,a=D0e(n);s==="deleteCompositionText"||su&&f1e(r)||s!=="insertCompositionText"&&Ia(r,()=>{const o=Ze();if(s==="deleteContentBackward"){if(o===null){const p=T1();if(!Re(p))return;Ps(p.clone())}if(Re(o)){const p=o.anchor.key===o.focus.key;if(i=n.timeStamp,R0e==="MediaLast"&&i<Yy+bI&&r.isComposing()&&p){if(ls(null),Yy=0,setTimeout(()=>{Ia(r,()=>{ls(null)})},bI),Re(o)){const g=o.anchor.getNode();g.markDirty(),Qe(g)||Ie(142),L0e(o,g)}}else{ls(null),n.preventDefault();const g=o.anchor.getNode(),y=g.getTextContent(),v=g.canInsertTextAfter(),x=o.anchor.offset===0&&o.focus.offset===y.length;let b=uX&&p&&!x&&v;if(b&&o.isCollapsed()&&(b=!Tn(O1t(o.anchor,!0))),!b){tt(r,qi,!0);const _=Ze();uX&&Re(_)&&_.isCollapsed()&&(pd=_,setTimeout(()=>pd=null))}}return}}var i;if(!Re(o))return;const c=n.data;sm!==null&&BD(!1,r,sm),o.dirty&&sm===null||!o.isCollapsed()||Ms(o.anchor.getNode())||a===null||o.applyDOMRange(a),sm=null;const u=o.anchor,d=o.focus,m=u.getNode(),h=d.getNode();if(s!=="insertText"&&s!=="insertTranspose")switch(n.preventDefault(),s){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":tt(r,jd,n);break;case"insertFromComposition":ls(null),tt(r,jd,n);break;case"insertLineBreak":ls(null),tt(r,zm,!1);break;case"insertParagraph":ls(null),Qy&&!Ih?(Qy=!1,tt(r,zm,!1)):tt(r,vI,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":tt(r,IE,n);break;case"deleteByComposition":(function(p,g){return p!==g||Ee(p)||Ee(g)||!p.isToken()||!g.isToken()})(m,h)&&tt(r,Tw,n);break;case"deleteByDrag":case"deleteByCut":tt(r,Tw,n);break;case"deleteContent":tt(r,qi,!1);break;case"deleteWordBackward":tt(r,Oh,!0);break;case"deleteWordForward":tt(r,Oh,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":tt(r,Lh,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":tt(r,Lh,!1);break;case"formatStrikeThrough":tt(r,Ed,"strikethrough");break;case"formatBold":tt(r,Ed,"bold");break;case"formatItalic":tt(r,Ed,"italic");break;case"formatUnderline":tt(r,Ed,"underline");break;case"historyUndo":tt(r,w0e,void 0);break;case"historyRedo":tt(r,S0e,void 0)}else{if(c===`
`)n.preventDefault(),tt(r,zm,!1);else if(c===ac)n.preventDefault(),tt(r,vI,void 0);else if(c==null&&n.dataTransfer){const p=n.dataTransfer.getData("text/plain");n.preventDefault(),o.insertRawText(p)}else c!=null&&O0e(o,a,c,n.timeStamp,!0)?(n.preventDefault(),tt(r,jd,c)):sm=c;I0e=n.timeStamp}})}(e,t)]);let Yy=0,R0e=null,I0e=0,sm=null;const kw=new WeakMap;let wI=!1,SI=!1,Qy=!1,zg=!1,s5=!1,a5="",pd=null,j0e=[0,"",0,"root",0];function O0e(e,t,n,r,s){const a=e.anchor,o=e.focus,i=a.getNode(),c=or(),u=al(go(c)),d=u!==null?u.anchorNode:null,m=a.key,h=c.getElementByKey(m),p=n.length;return m!==o.key||!Qe(i)||(!s&&(!xw||I0e<r+50)||i.isDirty()&&p<2||c1e(n))&&a.offset!==o.offset&&!i.isComposing()||am(i)||i.isDirty()&&p>1||(s||!xw)&&h!==null&&!i.isComposing()&&d!==Uh(h)||u!==null&&t!==null&&(!t.collapsed||t.startContainer!==u.anchorNode||t.startOffset!==u.anchorOffset)||i.getFormat()!==e.format||i.getStyle()!==e.style||function(g,y){if(y.isSegmented())return!0;if(!g.isCollapsed())return!1;const v=g.anchor.offset,x=y.getParentOrThrow(),b=y.isToken();return v===0?!y.canInsertTextBefore()||!x.canInsertTextBefore()&&!y.isComposing()||b||function(_){const w=_.getPreviousSibling();return(Qe(w)||Ee(w)&&w.isInline())&&!w.canInsertTextAfter()}(y):v===y.getTextContentSize()&&(!y.canInsertTextAfter()||!x.canInsertTextAfter()&&!y.isComposing()||b)}(e,i)}function yX(e,t){return Cc(e)&&e.nodeValue!==null&&t!==0&&t!==e.nodeValue.length}function vX(e,t,n){const{anchorNode:r,anchorOffset:s,focusNode:a,focusOffset:o}=e;wI&&(wI=!1,yX(r,s)&&yX(a,o)&&!pd)||Ia(t,()=>{if(!n)return void Ps(null);if(!FE(t,r,a))return;let i=Ze();if(pd&&Re(i)&&i.isCollapsed()){const c=i.anchor,u=pd.anchor;(c.key===u.key&&c.offset===u.offset+1||c.offset===1&&u.getNode().is(c.getNode().getPreviousSibling()))&&(i=pd.clone(),Ps(i))}if(pd=null,Re(i)){const c=i.anchor,u=c.getNode();if(i.isCollapsed()){e.type==="Range"&&e.anchorNode===e.focusNode&&(i.dirty=!0);const d=go(t).event,m=d?d.timeStamp:performance.now(),[h,p,g,y,v]=j0e,x=Kn(),b=t.isComposing()===!1&&x.getTextContent()==="";if(m<v+200&&c.offset===g&&c.key===y)k_(i,h,p);else if(c.type==="text")Qe(u)||Ie(141),L0e(i,u);else if(c.type==="element"&&!b){Ee(u)||Ie(259);const _=c.getNode();_.isEmpty()?function(w,S){const C=S.getTextFormat(),E=S.getTextStyle();k_(w,C,E)}(i,_):k_(i,0,"")}}else{const d=c.key,m=i.focus.key,h=i.getNodes(),p=h.length,g=i.isBackward(),y=g?o:s,v=g?s:o,x=g?m:d,b=g?d:m;let _=O0t,w=!1;for(let S=0;S<p;S++){const C=h[S],E=C.getTextContentSize();if(Qe(C)&&E!==0&&!(S===0&&C.__key===x&&y===E||S===p-1&&C.__key===b&&v===0)&&(w=!0,_&=C.getFormat(),_===0))break}i.format=w?_:0}}tt(t,_0e,void 0)})}function k_(e,t,n){e.format===t&&e.style===n||(e.format=t,e.style=n,e.dirty=!0)}function L0e(e,t){k_(e,t.getFormat(),t.getStyle())}function D0e(e){if(!e.getTargetRanges)return null;const t=e.getTargetRanges();return t.length===0?null:t[0]}function vb(e,t){const n=e._compositionKey;if(ls(null),n!==null&&t!=null){if(t===""){const r=Gr(n),s=Uh(e.getElementByKey(n));return void(s!==null&&s.nodeValue!==null&&Qe(r)&&VD(r,s.nodeValue,null,null,!0))}if(t[t.length-1]===`
`){const r=Ze();if(Re(r)){const s=r.focus;return r.anchor.set(s.key,s.offset,s.type),void tt(e,Dh,null)}}}BD(!0,e,t)}function F0e(e){let t=e.__lexicalEventHandles;return t===void 0&&(t=[],e.__lexicalEventHandles=t),t}const Gm=new Map;function U0e(e){const t=U1t(e.target);if(t===null)return;const n=FD(t.anchorNode);if(n===null)return;SI&&(SI=!1,Ia(n,()=>{const c=T1(),u=t.anchorNode;(Tr(u)||Cc(u))&&Ps(RD(c,t,n,e))}));const r=UD(n),s=r[r.length-1],a=s._key,o=Gm.get(a),i=o||s;i!==n&&vX(t,i,!1),vX(t,n,!0),n!==s?Gm.set(a,n):o&&Gm.delete(a)}function xX(e){e._lexicalHandled=!0}function bX(e){return e._lexicalHandled===!0}function f1t(e){const t=e.ownerDocument,n=kw.get(t);if(n===void 0)return;const r=n-1;r>=0||Ie(164),kw.set(t,r),r===0&&t.removeEventListener("selectionchange",U0e);const s=UE(e);DD(s)?(function(o){if(o._parentEditor!==null){const i=UD(o),c=i[i.length-1]._key;Gm.get(c)===o&&Gm.delete(c)}else Gm.delete(o._key)}(s),e.__lexicalEditor=null):s&&Ie(198);const a=F0e(e);for(let o=0;o<a.length;o++)a[o]();e.__lexicalEventHandles=[]}function CI(e,t,n){_s();const r=e.__key,s=e.getParent();if(s===null)return;const a=function(i){const c=Ze();if(!Re(c)||!Ee(i))return c;const{anchor:u,focus:d}=c,m=u.getNode(),h=d.getNode();return kI(m,i)&&u.set(i.__key,0,"element"),kI(h,i)&&d.set(i.__key,0,"element"),c}(e);let o=!1;if(Re(a)&&t){const i=a.anchor,c=a.focus;i.key===r&&(Aw(i,e,s,e.getPreviousSibling(),e.getNextSibling()),o=!0),c.key===r&&(Aw(c,e,s,e.getPreviousSibling(),e.getNextSibling()),o=!0)}else au(a)&&t&&e.isSelected()&&e.selectPrevious();if(Re(a)&&t&&!o){const i=e.getIndexWithinParent();Ld(e),Nw(a,s,i,-1)}else Ld(e);n||Zo(s)||s.canBeEmpty()||!s.isEmpty()||CI(s,t),t&&a&&Ms(s)&&s.isEmpty()&&s.selectEnd()}class jE{static getType(){Ie(64,this.name)}static clone(t){Ie(65,this.name)}afterCloneFrom(t){this.__parent=t.__parent,this.__next=t.__next,this.__prev=t.__prev,this.__state=t.__state}constructor(t){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,Object.defineProperty(this,"__state",{configurable:!0,enumerable:!1,value:void 0,writable:!0}),R1t(this,t)}getType(){return this.__type}isInline(){Ie(137,this.constructor.name)}isAttached(){let t=this.__key;for(;t!==null;){if(t==="root")return!0;const n=Gr(t);if(n===null)break;t=n.__parent}return!1}isSelected(t){const n=t||Ze();if(n==null)return!1;const r=n.getNodes().some(s=>s.__key===this.__key);if(Qe(this))return r;if(Re(n)&&n.anchor.type==="element"&&n.focus.type==="element"){if(n.isCollapsed())return!1;const s=this.getParent();if(Tn(this)&&this.isInline()&&s){const a=n.isBackward()?n.focus:n.anchor;if(s.is(a.getNode())&&a.offset===s.getChildrenSize()&&this.is(s.getLastChild()))return!1}}return r}getKey(){return this.__key}getIndexWithinParent(){const t=this.getParent();if(t===null)return-1;let n=t.getFirstChild(),r=0;for(;n!==null;){if(this.is(n))return r;r++,n=n.getNextSibling()}return-1}getParent(){const t=this.getLatest().__parent;return t===null?null:Gr(t)}getParentOrThrow(){const t=this.getParent();return t===null&&Ie(66,this.__key),t}getTopLevelElement(){let t=this;for(;t!==null;){const n=t.getParent();if(Zo(n))return Ee(t)||t===this&&Tn(t)||Ie(194),t;t=n}return null}getTopLevelElementOrThrow(){const t=this.getTopLevelElement();return t===null&&Ie(67,this.__key),t}getParents(){const t=[];let n=this.getParent();for(;n!==null;)t.push(n),n=n.getParent();return t}getParentKeys(){const t=[];let n=this.getParent();for(;n!==null;)t.push(n.__key),n=n.getParent();return t}getPreviousSibling(){const t=this.getLatest().__prev;return t===null?null:Gr(t)}getPreviousSiblings(){const t=[],n=this.getParent();if(n===null)return t;let r=n.getFirstChild();for(;r!==null&&!r.is(this);)t.push(r),r=r.getNextSibling();return t}getNextSibling(){const t=this.getLatest().__next;return t===null?null:Gr(t)}getNextSiblings(){const t=[];let n=this.getNextSibling();for(;n!==null;)t.push(n),n=n.getNextSibling();return t}getCommonAncestor(t){const n=Ee(this)?this:this.getParent(),r=Ee(t)?t:t.getParent(),s=n&&r?P_(n,r):null;return s?s.commonAncestor:null}is(t){return t!=null&&this.__key===t.__key}isBefore(t){const n=P_(this,t);return n!==null&&(n.type==="descendant"||(n.type==="branch"?y1e(n)===-1:(n.type!=="same"&&n.type!=="ancestor"&&Ie(279),!1)))}isParentOf(t){const n=P_(this,t);return n!==null&&n.type==="ancestor"}getNodesBetween(t){const n=this.isBefore(t),r=[],s=new Set;let a=this;for(;a!==null;){const o=a.__key;if(s.has(o)||(s.add(o),r.push(a)),a===t)break;const i=Ee(a)?n?a.getFirstChild():a.getLastChild():null;if(i!==null){a=i;continue}const c=n?a.getNextSibling():a.getPreviousSibling();if(c!==null){a=c;continue}const u=a.getParentOrThrow();if(s.has(u.__key)||r.push(u),u===t)break;let d=null,m=u;do{if(m===null&&Ie(68),d=n?m.getNextSibling():m.getPreviousSibling(),m=m.getParent(),m===null)break;d!==null||s.has(m.__key)||r.push(m)}while(d===null);a=d}return n||r.reverse(),r}isDirty(){const t=or()._dirtyLeaves;return t!==null&&t.has(this.__key)}getLatest(){const t=Gr(this.__key);return t===null&&Ie(113),t}getWritable(){_s();const t=Fu(),n=or(),r=t._nodeMap,s=this.__key,a=this.getLatest(),o=n._cloneNotNeeded,i=Ze();if(i!==null&&i.setCachedNodes(null),o.has(s))return Rw(a),a;const c=h1e(a);return o.add(s),Rw(c),r.set(s,c),c}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(t,n){Ie(70)}updateDOM(t,n,r){Ie(71)}exportDOM(t){return{element:this.createDOM(t._config,t)}}exportJSON(){const t=this.__state?this.__state.toJSON():void 0;return{type:this.__type,version:1,...t}}static importJSON(t){Ie(18,this.name)}updateFromJSON(t){return function(n,r){const s=n.getWritable();return(r||s.__state)&&Q0t(n).updateFromJSON(r),s}(this,t.$)}static transform(){return null}remove(t){CI(this,!0,t)}replace(t,n){_s();let r=Ze();r!==null&&(r=r.clone()),d5(this,t);const s=this.getLatest(),a=this.__key,o=t.__key,i=t.getWritable(),c=this.getParentOrThrow().getWritable(),u=c.__size;Ld(i);const d=s.getPreviousSibling(),m=s.getNextSibling(),h=s.__prev,p=s.__next,g=s.__parent;if(CI(s,!1,!0),d===null?c.__first=o:d.getWritable().__next=o,i.__prev=h,m===null?c.__last=o:m.getWritable().__prev=o,i.__next=p,i.__parent=g,c.__size=u,n&&(Ee(this)&&Ee(i)||Ie(139),this.getChildren().forEach(y=>{i.append(y)})),Re(r)){Ps(r);const y=r.anchor,v=r.focus;y.key===a&&CX(y,i),v.key===a&&CX(v,i)}return Xc()===a&&ls(o),i}insertAfter(t,n=!0){_s(),d5(this,t);const r=this.getWritable(),s=t.getWritable(),a=s.getParent(),o=Ze();let i=!1,c=!1;if(a!==null){const p=t.getIndexWithinParent();if(Ld(s),Re(o)){const g=a.__key,y=o.anchor,v=o.focus;i=y.type==="element"&&y.key===g&&y.offset===p+1,c=v.type==="element"&&v.key===g&&v.offset===p+1}}const u=this.getNextSibling(),d=this.getParentOrThrow().getWritable(),m=s.__key,h=r.__next;if(u===null?d.__last=m:u.getWritable().__prev=m,d.__size++,r.__next=m,s.__next=h,s.__prev=r.__key,s.__parent=r.__parent,n&&Re(o)){const p=this.getIndexWithinParent();Nw(o,d,p+1);const g=d.__key;i&&o.anchor.set(g,p+2,"element"),c&&o.focus.set(g,p+2,"element")}return t}insertBefore(t,n=!0){_s(),d5(this,t);const r=this.getWritable(),s=t.getWritable(),a=s.__key;Ld(s);const o=this.getPreviousSibling(),i=this.getParentOrThrow().getWritable(),c=r.__prev,u=this.getIndexWithinParent();o===null?i.__first=a:o.getWritable().__next=a,i.__size++,r.__prev=a,s.__prev=c,s.__next=r.__key,s.__parent=r.__parent;const d=Ze();return n&&Re(d)&&Nw(d,this.getParentOrThrow(),u),t}isParentRequired(){return!1}createParentElementNode(){return br()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(t,n){_s();const r=this.getPreviousSibling(),s=this.getParentOrThrow();if(r===null)return s.select(0,0);if(Ee(r))return r.select();if(!Qe(r)){const a=r.getIndexWithinParent()+1;return s.select(a,a)}return r.select(t,n)}selectNext(t,n){_s();const r=this.getNextSibling(),s=this.getParentOrThrow();if(r===null)return s.select();if(Ee(r))return r.select(0,0);if(!Qe(r)){const a=r.getIndexWithinParent();return s.select(a,a)}return r.select(t,n)}markDirty(){this.getWritable()}reconcileObservedMutation(t,n){this.markDirty()}}class C1 extends jE{static getType(){return"linebreak"}static clone(t){return new C1(t.__key)}constructor(t){super(t)}getTextContent(){return`
`}createDOM(){return document.createElement("br")}updateDOM(){return!1}isInline(){return!0}static importDOM(){return{br:t=>function(n){const r=n.parentElement;if(r!==null&&Iw(r)){const s=r.firstChild;if(s===n||s.nextSibling===n&&xb(s)){const a=r.lastChild;if(a===n||a.previousSibling===n&&xb(a))return!0}}return!1}(t)||function(n){const r=n.parentElement;if(r!==null&&Iw(r)){const s=r.firstChild;if(s===n||s.nextSibling===n&&xb(s))return!1;const a=r.lastChild;if(a===n||a.previousSibling===n&&xb(a))return!0}return!1}(t)?null:{conversion:m1t,priority:0}}}static importJSON(t){return po().updateFromJSON(t)}}function m1t(e){return{node:po()}}function po(){return Qa(new C1)}function Od(e){return e instanceof C1}function xb(e){return Cc(e)&&/^( |\t|\r?\n)+$/.test(e.textContent||"")}function o5(e,t){return 16&t?"code":t&vD?"mark":32&t?"sub":64&t?"sup":null}function i5(e,t){return 1&t?"strong":2&t?"em":"span"}function B0e(e,t,n,r,s){const a=r.classList;let o=qm(s,"base");o!==void 0&&a.add(...o),o=qm(s,"underlineStrikethrough");let i=!1;const c=t&Sw&&t&ww;o!==void 0&&(n&Sw&&n&ww?(i=!0,c||a.add(...o)):c&&a.remove(...o));for(const u in af){const d=af[u];if(o=qm(s,u),o!==void 0)if(n&d){if(i&&(u==="underline"||u==="strikethrough")){t&d&&a.remove(...o);continue}t&d&&(!c||u!=="underline")&&u!=="strikethrough"||a.add(...o)}else t&d&&a.remove(...o)}}function V0e(e,t,n){const r=t.firstChild,s=n.isComposing(),a=e+(s?PE:"");if(r==null)t.textContent=a;else{const o=r.nodeValue;if(o!==a)if(s||su){const[i,c,u]=function(d,m){const h=d.length,p=m.length;let g=0,y=0;for(;g<h&&g<p&&d[g]===m[g];)g++;for(;y+g<h&&y+g<p&&d[h-y-1]===m[p-y-1];)y++;return[g,h-g-y,m.slice(g,p-y)]}(o,a);c!==0&&r.deleteData(i,c),r.insertData(i,u)}else r.nodeValue=a}}function _X(e,t,n,r,s,a){V0e(s,e,t);const o=a.theme.text;o!==void 0&&B0e(0,0,r,e,o)}function bb(e,t){const n=document.createElement(t);return n.appendChild(e),n}class Du extends jE{static getType(){return"text"}static clone(t){return new Du(t.__text,t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__text=t.__text,this.__format=t.__format,this.__style=t.__style,this.__mode=t.__mode,this.__detail=t.__detail}constructor(t="",n){super(n),this.__text=t,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){const t=this.getLatest();return $0t[t.__mode]}getStyle(){return this.getLatest().__style}isToken(){return this.getLatest().__mode===1}isComposing(){return this.__key===Xc()}isSegmented(){return this.getLatest().__mode===2}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(t){const n=af[t];return!!(this.getFormat()&n)}isSimpleText(){return this.__type==="text"&&this.__mode===0}getTextContent(){return this.getLatest().__text}getFormatFlags(t,n){return Pw(this.getLatest().__format,t,n)}canHaveFormat(){return!0}isInline(){return!0}createDOM(t,n){const r=this.__format,s=o5(0,r),a=i5(0,r),o=s===null?a:s,i=document.createElement(o);let c=i;this.hasFormat("code")&&i.setAttribute("spellcheck","false"),s!==null&&(c=document.createElement(a),i.appendChild(c)),_X(c,this,0,r,this.__text,t);const u=this.__style;return u!==""&&(i.style.cssText=u),i}updateDOM(t,n,r){const s=this.__text,a=t.__format,o=this.__format,i=o5(0,a),c=o5(0,o),u=i5(0,a),d=i5(0,o);if((i===null?u:i)!==(c===null?d:c))return!0;if(i===c&&u!==d){const y=n.firstChild;y==null&&Ie(48);const v=document.createElement(d);return _X(v,this,0,o,s,r),n.replaceChild(v,y),!1}let m=n;c!==null&&i!==null&&(m=n.firstChild,m==null&&Ie(49)),V0e(s,m,this);const h=r.theme.text;h!==void 0&&a!==o&&B0e(0,a,o,m,h);const p=t.__style,g=this.__style;return p!==g&&(n.style.cssText=g),!1}static importDOM(){return{"#text":()=>({conversion:y1t,priority:0}),b:()=>({conversion:p1t,priority:0}),code:()=>({conversion:Sl,priority:0}),em:()=>({conversion:Sl,priority:0}),i:()=>({conversion:Sl,priority:0}),mark:()=>({conversion:Sl,priority:0}),s:()=>({conversion:Sl,priority:0}),span:()=>({conversion:h1t,priority:0}),strong:()=>({conversion:Sl,priority:0}),sub:()=>({conversion:Sl,priority:0}),sup:()=>({conversion:Sl,priority:0}),u:()=>({conversion:Sl,priority:0})}}static importJSON(t){return rr().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setTextContent(t.text).setFormat(t.format).setDetail(t.detail).setMode(t.mode).setStyle(t.style)}exportDOM(t){let{element:n}=super.exportDOM(t);return Tr(n)||Ie(132),n.style.whiteSpace="pre-wrap",this.hasFormat("lowercase")?n.style.textTransform="lowercase":this.hasFormat("uppercase")?n.style.textTransform="uppercase":this.hasFormat("capitalize")&&(n.style.textTransform="capitalize"),this.hasFormat("bold")&&(n=bb(n,"b")),this.hasFormat("italic")&&(n=bb(n,"i")),this.hasFormat("strikethrough")&&(n=bb(n,"s")),this.hasFormat("underline")&&(n=bb(n,"u")),{element:n}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),...super.exportJSON()}}selectionTransform(t,n){}setFormat(t){const n=this.getWritable();return n.__format=typeof t=="string"?af[t]:t,n}setDetail(t){const n=this.getWritable();return n.__detail=typeof t=="string"?U0t[t]:t,n}setStyle(t){const n=this.getWritable();return n.__style=t,n}toggleFormat(t){const n=Pw(this.getFormat(),t,null);return this.setFormat(n)}toggleDirectionless(){const t=this.getWritable();return t.__detail^=1,t}toggleUnmergeable(){const t=this.getWritable();return t.__detail^=2,t}setMode(t){const n=V0t[t];if(this.__mode===n)return this;const r=this.getWritable();return r.__mode=n,r}setTextContent(t){if(this.__text===t)return this;const n=this.getWritable();return n.__text=t,n}select(t,n){_s();let r=t,s=n;const a=Ze(),o=this.getTextContent(),i=this.__key;if(typeof o=="string"){const c=o.length;r===void 0&&(r=c),s===void 0&&(s=c)}else r=0,s=0;if(!Re(a))return H0e(i,r,i,s,"text","text");{const c=Xc();c!==a.anchor.key&&c!==a.focus.key||ls(i),a.setTextNodeRange(this,r,this,s)}return a}selectStart(){return this.select(0,0)}selectEnd(){const t=this.getTextContentSize();return this.select(t,t)}spliceText(t,n,r,s){const a=this.getWritable(),o=a.__text,i=r.length;let c=t;c<0&&(c=i+c,c<0&&(c=0));const u=Ze();if(s&&Re(u)){const m=t+i;u.setTextNodeRange(a,m,a,m)}const d=o.slice(0,c)+r+o.slice(c+n);return a.__text=d,a}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...t){_s();const n=this.getLatest(),r=n.getTextContent();if(r==="")return[];const s=n.__key,a=Xc(),o=r.length;t.sort((M,T)=>M-T),t.push(o);const i=[],c=t.length;for(let M=0,T=0;M<o&&T<=c;T++){const I=t[T];I>M&&(i.push(r.slice(M,I)),M=I)}const u=i.length;if(u===1)return[n];const d=i[0],m=n.getParent();let h;const p=n.getFormat(),g=n.getStyle(),y=n.__detail;let v=!1,x=null,b=null;const _=Ze();if(Re(_)){const[M,T]=_.isBackward()?[_.focus,_.anchor]:[_.anchor,_.focus];M.type==="text"&&M.key===s&&(x=M),T.type==="text"&&T.key===s&&(b=T)}n.isSegmented()?(h=rr(d),h.__format=p,h.__style=g,h.__detail=y,v=!0):(h=n.getWritable(),h.__text=d);const w=[h];for(let M=1;M<u;M++){const T=rr(i[M]);T.__format=p,T.__style=g,T.__detail=y;const I=T.__key;a===s&&ls(I),w.push(T)}const S=x?x.offset:null,C=b?b.offset:null;let E=0;for(const M of w){if(!x&&!b)break;const T=E+M.getTextContentSize();if(x!==null&&S!==null&&S<=T&&S>=E&&(x.set(M.getKey(),S-E,"text"),S<T&&(x=null)),b!==null&&C!==null&&C<=T&&C>=E){b.set(M.getKey(),C-E,"text");break}E=T}if(m!==null){(function(I){const j=I.getPreviousSibling(),N=I.getNextSibling();j!==null&&Rw(j),N!==null&&Rw(N)})(this);const M=m.getWritable(),T=this.getIndexWithinParent();v?(M.splice(T,0,w),this.remove()):M.splice(T,1,w),Re(_)&&Nw(_,m,T,u-1)}return w}mergeWithSibling(t){const n=t===this.getPreviousSibling();n||t===this.getNextSibling()||Ie(50);const r=this.__key,s=t.__key,a=this.__text,o=a.length;Xc()===s&&ls(r);const i=Ze();if(Re(i)){const m=i.anchor,h=i.focus;m!==null&&m.key===s&&PX(m,n,r,t,o),h!==null&&h.key===s&&PX(h,n,r,t,o)}const c=t.__text,u=n?c+a:a+c;this.setTextContent(u);const d=this.getWritable();return t.remove(),d}isTextEntity(){return!1}}function h1t(e){return{forChild:AD(e.style),node:null}}function p1t(e){const t=e,n=t.style.fontWeight==="normal";return{forChild:AD(t.style,n?void 0:"bold"),node:null}}const wX=new WeakMap;function g1t(e){if(!Tr(e))return!1;if(e.nodeName==="PRE")return!0;const t=e.style.whiteSpace;return typeof t=="string"&&t.startsWith("pre")}function y1t(e){const t=e;e.parentElement===null&&Ie(129);let n=t.textContent||"";if(function(r){let s,a=r.parentNode;const o=[r];for(;a!==null&&(s=wX.get(a))===void 0&&!g1t(a);)o.push(a),a=a.parentNode;const i=s===void 0?a:s;for(let c=0;c<o.length;c++)wX.set(o[c],i);return i}(t)!==null){const r=n.split(/(\r?\n|\t)/),s=[],a=r.length;for(let o=0;o<a;o++){const i=r[o];i===`
`||i===`\r
`?s.push(po()):i==="	"?s.push(M1()):i!==""&&s.push(rr(i))}return{node:s}}if(n=n.replace(/\r/g,"").replace(/[ \t\n]+/g," "),n==="")return{node:null};if(n[0]===" "){let r=t,s=!0;for(;r!==null&&(r=SX(r,!1))!==null;){const a=r.textContent||"";if(a.length>0){/[ \t\n]$/.test(a)&&(n=n.slice(1)),s=!1;break}}s&&(n=n.slice(1))}if(n[n.length-1]===" "){let r=t,s=!0;for(;r!==null&&(r=SX(r,!0))!==null;)if((r.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){s=!1;break}s&&(n=n.slice(0,n.length-1))}return n===""?{node:null}:{node:rr(n)}}function SX(e,t){let n=e;for(;;){let r;for(;(r=t?n.nextSibling:n.previousSibling)===null;){const a=n.parentElement;if(a===null)return null;n=a}if(n=r,Tr(n)){const a=n.style.display;if(a===""&&!PI(n)||a!==""&&!a.startsWith("inline"))return null}let s=n;for(;(s=t?n.firstChild:n.lastChild)!==null;)n=s;if(Cc(n))return n;if(n.nodeName==="BR")return null}}const v1t={code:"code",em:"italic",i:"italic",mark:"highlight",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function Sl(e){const t=v1t[e.nodeName.toLowerCase()];return t===void 0?{node:null}:{forChild:AD(e.style,t),node:null}}function rr(e=""){return Qa(new Du(e))}function Qe(e){return e instanceof Du}function AD(e,t){const n=e.fontWeight,r=e.textDecoration.split(" "),s=n==="700"||n==="bold",a=r.includes("line-through"),o=e.fontStyle==="italic",i=r.includes("underline"),c=e.verticalAlign;return u=>(Qe(u)&&(s&&!u.hasFormat("bold")&&u.toggleFormat("bold"),a&&!u.hasFormat("strikethrough")&&u.toggleFormat("strikethrough"),o&&!u.hasFormat("italic")&&u.toggleFormat("italic"),i&&!u.hasFormat("underline")&&u.toggleFormat("underline"),c!=="sub"||u.hasFormat("subscript")||u.toggleFormat("subscript"),c!=="super"||u.hasFormat("superscript")||u.toggleFormat("superscript"),t&&!u.hasFormat(t)&&u.toggleFormat(t)),u)}class E1 extends Du{static getType(){return"tab"}static clone(t){return new E1(t.__key)}constructor(t){super("	",t),this.__detail=2}static importDOM(){return null}createDOM(t){const n=super.createDOM(t),r=qm(t.theme,"tab");return r!==void 0&&n.classList.add(...r),n}static importJSON(t){return M1().updateFromJSON(t)}setTextContent(t){return t!=="	"&&t!==""&&Ie(126),super.setTextContent(t)}setDetail(t){return t!==2&&Ie(127),this}setMode(t){return t!=="normal"&&Ie(128),this}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function M1(){return Qa(new E1)}function PD(e){return e instanceof E1}class x1t{constructor(t,n,r){this._selection=null,this.key=t,this.offset=n,this.type=r}is(t){return this.key===t.key&&this.offset===t.offset&&this.type===t.type}isBefore(t){return this.key===t.key?this.offset<t.offset:g1e(Di(Eu(this,"next")),Di(Eu(t,"next")))<0}getNode(){const t=Gr(this.key);return t===null&&Ie(20),t}set(t,n,r,s){const a=this._selection,o=this.key;s&&this.key===t&&this.offset===n&&this.type===r||(this.key=t,this.offset=n,this.type=r,k1()||(Xc()===o&&ls(t),a!==null&&(a.setCachedNodes(null),a.dirty=!0)))}}function sl(e,t,n){return new x1t(e,t,n)}function l5(e,t){let n=t.__key,r=e.offset,s="element";if(Qe(t)){s="text";const a=t.getTextContentSize();r>a&&(r=a)}else if(!Ee(t)){const a=t.getNextSibling();if(Qe(a))n=a.__key,r=0,s="text";else{const o=t.getParent();o&&(n=o.__key,r=t.getIndexWithinParent()+1)}}e.set(n,r,s)}function CX(e,t){if(Ee(t)){const n=t.getLastDescendant();Ee(n)||Qe(n)?l5(e,n):l5(e,t)}else l5(e,t)}class OE{constructor(t){this._cachedNodes=null,this._nodes=t,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){if(!au(t))return!1;const n=this._nodes,r=t._nodes;return n.size===r.size&&Array.from(n).every(s=>r.has(s))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(t){this.dirty=!0,this._nodes.add(t),this._cachedNodes=null}delete(t){this.dirty=!0,this._nodes.delete(t),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(t){return this._nodes.has(t)}clone(){return new OE(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(t){}insertText(){}insertNodes(t){const n=this.getNodes(),r=n.length,s=n[r-1];let a;if(Qe(s))a=s.select();else{const o=s.getIndexWithinParent()+1;a=s.getParentOrThrow().select(o,o)}a.insertNodes(t);for(let o=0;o<r;o++)n[o].remove()}getNodes(){const t=this._cachedNodes;if(t!==null)return t;const n=this._nodes,r=[];for(const s of n){const a=Gr(s);a!==null&&r.push(a)}return k1()||(this._cachedNodes=r),r}getTextContent(){const t=this.getNodes();let n="";for(let r=0;r<t.length;r++)n+=t[r].getTextContent();return n}deleteNodes(){const t=this.getNodes();if((Ze()||T1())===this&&t[0]){const n=ds(t[0],"next");X1t(df(n,n))}for(const n of t)n.remove()}}function Re(e){return e instanceof Ef}class Ef{constructor(t,n,r,s){this.anchor=t,this.focus=n,t._selection=this,n._selection=this,this._cachedNodes=null,this.format=r,this.style=s,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){return!!Re(t)&&this.anchor.is(t.anchor)&&this.focus.is(t.focus)&&this.format===t.format&&this.style===t.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){const t=this._cachedNodes;if(t!==null)return t;const n=function(r){const s=[],[a,o]=r.getTextSlices();a&&s.push(a.caret.origin);const i=new Set,c=new Set;for(const u of r)if(Ki(u)){const{origin:d}=u;s.length===0?i.add(d):(c.add(d),s.push(d))}else{const{origin:d}=u;Ee(d)&&c.has(d)||s.push(d)}if(o&&s.push(o.caret.origin),$h(r.focus)&&Ee(r.focus.origin)&&r.focus.getNodeAtCaret()===null)for(let u=Cu(r.focus.origin,"previous");Ki(u)&&i.has(u.origin)&&!u.origin.isEmpty()&&u.origin.is(s[s.length-1]);u=KD(u))i.delete(u.origin),s.pop();for(;s.length>1;){const u=s[s.length-1];if(!Ee(u)||c.has(u)||u.isEmpty()||i.has(u))break;s.pop()}if(s.length===0&&r.isCollapsed()){const u=Di(r.anchor),d=Di(r.anchor.getFlipped()),m=p=>Dd(p)?p.origin:p.getNodeAtCaret(),h=m(u)||m(d)||(r.anchor.getNodeAtCaret()?u.origin:d.origin);s.push(h)}return s}(x1e(XX(this),"next"));return k1()||(this._cachedNodes=n),n}setTextNodeRange(t,n,r,s){this.anchor.set(t.__key,n,"text"),this.focus.set(r.__key,s,"text")}getTextContent(){const t=this.getNodes();if(t.length===0)return"";const n=t[0],r=t[t.length-1],s=this.anchor,a=this.focus,o=s.isBefore(a),[i,c]=EI(this);let u="",d=!0;for(let m=0;m<t.length;m++){const h=t[m];if(Ee(h)&&!h.isInline())d||(u+=`
`),d=!h.isEmpty();else if(d=!1,Qe(h)){let p=h.getTextContent();h===n?h===r?s.type==="element"&&a.type==="element"&&a.offset!==s.offset||(p=i<c?p.slice(i,c):p.slice(c,i)):p=o?p.slice(i):p.slice(c):h===r&&(p=o?p.slice(0,c):p.slice(0,i)),u+=p}else!Tn(h)&&!Od(h)||h===r&&this.isCollapsed()||(u+=h.getTextContent())}return u}applyDOMRange(t){const n=or(),r=n.getEditorState()._selection,s=W0e(t.startContainer,t.startOffset,t.endContainer,t.endOffset,n,r);if(s===null)return;const[a,o]=s;this.anchor.set(a.key,a.offset,a.type,!0),this.focus.set(o.key,o.offset,o.type,!0),o0(this)}clone(){const t=this.anchor,n=this.focus;return new Ef(sl(t.key,t.offset,t.type),sl(n.key,n.offset,n.type),this.format,this.style)}toggleFormat(t){this.format=Pw(this.format,t,null),this.dirty=!0}setStyle(t){this.style=t,this.dirty=!0}hasFormat(t){const n=af[t];return!!(this.format&n)}insertRawText(t){const n=t.split(/(\r?\n|\t)/),r=[],s=n.length;for(let a=0;a<s;a++){const o=n[a];o===`
`||o===`\r
`?r.push(po()):o==="	"?r.push(M1()):r.push(rr(o))}this.insertNodes(r)}insertText(t){const n=this.anchor,r=this.focus,s=this.format,a=this.style;let o=n,i=r;!this.isCollapsed()&&r.isBefore(n)&&(o=r,i=n),o.type==="element"&&function(v,x,b,_){const w=v.getNode(),S=w.getChildAtIndex(v.offset),C=rr(),E=Ms(w)?br().append(C):C;C.setFormat(b),C.setStyle(_),S===null?w.append(E):S.insertBefore(E),v.is(x)&&x.set(C.__key,0,"text"),v.set(C.__key,0,"text")}(o,i,s,a),i.type==="element"&&d0(i,Di(Eu(i,"next")));const c=o.offset;let u=i.offset;const d=this.getNodes(),m=d.length;let h=d[0];Qe(h)||Ie(26);const p=h.getTextContent().length,g=h.getParentOrThrow();let y=d[m-1];if(m===1&&i.type==="element"&&(u=p,i.set(o.key,u,"text")),this.isCollapsed()&&c===p&&(h.isSegmented()||h.isToken()||!h.canInsertTextAfter()||!g.canInsertTextAfter()&&h.getNextSibling()===null)){let v=h.getNextSibling();if(Qe(v)&&v.canInsertTextBefore()&&!am(v)||(v=rr(),v.setFormat(s),v.setStyle(a),g.canInsertTextAfter()?h.insertAfter(v):g.insertAfter(v)),v.select(0,0),h=v,t!=="")return void this.insertText(t)}else if(this.isCollapsed()&&c===0&&(h.isSegmented()||h.isToken()||!h.canInsertTextBefore()||!g.canInsertTextBefore()&&h.getPreviousSibling()===null)){let v=h.getPreviousSibling();if(Qe(v)&&!am(v)||(v=rr(),v.setFormat(s),g.canInsertTextBefore()?h.insertBefore(v):g.insertBefore(v)),v.select(),h=v,t!=="")return void this.insertText(t)}else if(h.isSegmented()&&c!==p){const v=rr(h.getTextContent());v.setFormat(s),h.replace(v),h=v}else if(!this.isCollapsed()&&t!==""){const v=y.getParent();if(!g.canInsertTextBefore()||!g.canInsertTextAfter()||Ee(v)&&(!v.canInsertTextBefore()||!v.canInsertTextAfter()))return this.insertText(""),$0e(this.anchor,this.focus,null),void this.insertText(t)}if(m===1){if(h.isToken()){const _=rr(t);return _.select(),void h.replace(_)}const v=h.getFormat(),x=h.getStyle();if(c!==u||v===s&&x===a){if(PD(h)){const _=rr(t);return _.setFormat(s),_.setStyle(a),_.select(),void h.replace(_)}}else{if(h.getTextContent()!==""){const _=rr(t);if(_.setFormat(s),_.setStyle(a),_.select(),c===0)h.insertBefore(_,!1);else{const[w]=h.splitText(c);w.insertAfter(_,!1)}return void(_.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=t.length))}h.setFormat(s),h.setStyle(a)}const b=u-c;h=h.spliceText(c,b,t,!0),h.getTextContent()===""?h.remove():this.anchor.type==="text"&&(h.isComposing()?this.anchor.offset-=t.length:(this.format=v,this.style=x))}else{const v=new Set([...h.getParentKeys(),...y.getParentKeys()]),x=Ee(h)?h:h.getParentOrThrow();let b=Ee(y)?y:y.getParentOrThrow(),_=y;if(!x.is(b)&&b.isInline())do _=b,b=b.getParentOrThrow();while(b.isInline());if(i.type==="text"&&(u!==0||y.getTextContent()==="")||i.type==="element"&&y.getIndexWithinParent()<u)if(Qe(y)&&!y.isToken()&&u!==y.getTextContentSize()){if(y.isSegmented()){const M=rr(y.getTextContent());y.replace(M),y=M}Ms(i.getNode())||i.type!=="text"||(y=y.spliceText(0,u,"")),v.add(y.__key)}else{const M=y.getParentOrThrow();M.canBeEmpty()||M.getChildrenSize()!==1?y.remove():M.remove()}else v.add(y.__key);const w=b.getChildren(),S=new Set(d),C=x.is(b),E=x.isInline()&&h.getNextSibling()===null?x:h;for(let M=w.length-1;M>=0;M--){const T=w[M];if(T.is(h)||Ee(T)&&T.isParentOf(h))break;T.isAttached()&&(!S.has(T)||T.is(_)?C||E.insertAfter(T,!1):T.remove())}if(!C){let M=b,T=null;for(;M!==null;){const I=M.getChildren(),j=I.length;(j===0||I[j-1].is(T))&&(v.delete(M.__key),T=M),M=M.getParent()}}if(h.isToken())if(c===p)h.select();else{const M=rr(t);M.select(),h.replace(M)}else h=h.spliceText(c,p-c,t,!0),h.getTextContent()===""?h.remove():h.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=t.length);for(let M=1;M<m;M++){const T=d[M],I=T.__key;v.has(I)||T.remove()}}}removeText(){const t=Ze()===this;R_(this,Z1t(XX(this))),t&&Ze()!==this&&Ps(this)}formatText(t,n=null){if(this.isCollapsed())return this.toggleFormat(t),void ls(null);const r=this.getNodes(),s=[];for(const w of r)Qe(w)&&s.push(w);const a=w=>{r.forEach(S=>{if(Ee(S)){const C=S.getFormatFlags(t,w);S.setTextFormat(C)}})},o=s.length;if(o===0)return this.toggleFormat(t),ls(null),void a(n);const i=this.anchor,c=this.focus,u=this.isBackward(),d=u?c:i,m=u?i:c;let h=0,p=s[0],g=d.type==="element"?0:d.offset;if(d.type==="text"&&g===p.getTextContentSize()&&(h=1,p=s[1],g=0),p==null)return;const y=p.getFormatFlags(t,n);a(y);const v=o-1;let x=s[v];const b=m.type==="text"?m.offset:x.getTextContentSize();if(p.is(x)){if(g===b)return;if(am(p)||g===0&&b===p.getTextContentSize())p.setFormat(y);else{const w=p.splitText(g,b),S=g===0?w[0]:w[1];S.setFormat(y),d.type==="text"&&d.set(S.__key,0,"text"),m.type==="text"&&m.set(S.__key,b-g,"text")}return void(this.format=y)}g===0||am(p)||([,p]=p.splitText(g),g=0),p.setFormat(y);const _=x.getFormatFlags(t,y);b>0&&(b===x.getTextContentSize()||am(x)||([x]=x.splitText(b)),x.setFormat(_));for(let w=h+1;w<v;w++){const S=s[w],C=S.getFormatFlags(t,_);S.setFormat(C)}d.type==="text"&&d.set(p.__key,g,"text"),m.type==="text"&&m.set(x.__key,b,"text"),this.format=y|_}insertNodes(t){if(t.length===0)return;if(this.isCollapsed()||this.removeText(),this.anchor.key==="root"){this.insertParagraph();const g=Ze();return Re(g)||Ie(134),g.insertNodes(t)}const n=(this.isBackward()?this.focus:this.anchor).getNode(),r=m5(n,zc),s=t[t.length-1];if(Ee(r)&&"__language"in r){if("__language"in t[0])this.insertText(t[0].getTextContent());else{const g=c5(this);r.splice(g,0,t),s.selectEnd()}return}if(!t.some(g=>(Ee(g)||Tn(g))&&!g.isInline())){Ee(r)||Ie(211,n.constructor.name,n.getType());const g=c5(this);return r.splice(g,0,t),void s.selectEnd()}const a=function(g){const y=br();let v=null;for(let x=0;x<g.length;x++){const b=g[x],_=Od(b);if(_||Tn(b)&&b.isInline()||Ee(b)&&b.isInline()||Qe(b)||b.isParentRequired()){if(v===null&&(v=b.createParentElementNode(),y.append(v),_))continue;v!==null&&v.append(b)}else y.append(b),v=null}return y}(t),o=a.getLastDescendant(),i=a.getChildren(),c=!Ee(r)||!r.isEmpty()?this.insertParagraph():null,u=i[i.length-1];let d=i[0];var m;Ee(m=d)&&zc(m)&&!m.isEmpty()&&Ee(r)&&(!r.isEmpty()||r.canMergeWhenEmpty())&&(Ee(r)||Ie(211,n.constructor.name,n.getType()),r.append(...d.getChildren()),d=i[1]),d&&(r===null&&Ie(212,n.constructor.name,n.getType()),function(g,y,v){const x=y.getParentOrThrow().getLastChild();let b=y;const _=[y];for(;b!==x;)b.getNextSibling()||Ie(140),b=b.getNextSibling(),_.push(b);let w=g;for(const S of _)w=w.insertAfter(S)}(r,d));const h=m5(o,zc);c&&Ee(h)&&(c.canMergeWhenEmpty()||zc(u))&&(h.append(...c.getChildren()),c.remove()),Ee(r)&&r.isEmpty()&&r.remove(),o.selectEnd();const p=Ee(r)?r.getLastChild():null;Od(p)&&h!==r&&p.remove()}insertParagraph(){if(this.anchor.key==="root"){const o=br();return Kn().splice(this.anchor.offset,0,[o]),o.select(),o}const t=c5(this),n=m5(this.anchor.getNode(),zc);Ee(n)||Ie(213);const r=n.getChildAtIndex(t),s=r?[r,...r.getNextSiblings()]:[],a=n.insertNewAfter(this,!1);return a?(a.append(...s),a.selectStart(),a):null}insertLineBreak(t){const n=po();if(this.insertNodes([n]),t){const r=n.getParentOrThrow(),s=n.getIndexWithinParent();r.select(s,s)}}extract(){const t=this.getNodes(),n=t.length,r=n-1,s=this.anchor,a=this.focus;let o=t[0],i=t[r];const[c,u]=EI(this);if(n===0)return[];if(n===1){if(Qe(o)&&!this.isCollapsed()){const m=c>u?u:c,h=c>u?c:u,p=o.splitText(m,h),g=m===0?p[0]:p[1];return g!=null?[g]:[]}return[o]}const d=s.isBefore(a);if(Qe(o)){const m=d?c:u;m===o.getTextContentSize()?t.shift():m!==0&&([,o]=o.splitText(m),t[0]=o)}if(Qe(i)){const m=i.getTextContent().length,h=d?u:c;h===0?t.pop():h!==m&&([i]=i.splitText(h),t[r]=i)}return t}modify(t,n,r){if(RX(this,t,n,r))return;const s=t==="move",a=or(),o=al(go(a));if(!o)return;const i=a._blockCursorElement,c=a._rootElement,u=this.focus.getNode();if(c===null||i===null||!Ee(u)||u.isInline()||u.canBeEmpty()||NI(i,a,c),this.dirty){let d=Vh(a,this.anchor.key),m=Vh(a,this.focus.key);this.anchor.type==="text"&&(d=Uh(d)),this.focus.type==="text"&&(m=Uh(m)),d&&m&&q0e(o,d,this.anchor.offset,m,this.focus.offset)}if(function(d,m,h,p){d.modify(m,h,p)}(o,t,n?"backward":"forward",r),o.rangeCount>0){const d=o.getRangeAt(0),m=this.anchor.getNode(),h=Ms(m)?m:D1t(m);if(this.applyDOMRange(d),this.dirty=!0,!s){const p=this.getNodes(),g=[];let y=!1;for(let v=0;v<p.length;v++){const x=p[v];kI(x,h)?g.push(x):y=!0}if(y&&g.length>0)if(n){const v=g[0];Ee(v)?v.selectStart():v.getParentOrThrow().selectStart()}else{const v=g[g.length-1];Ee(v)?v.selectEnd():v.getParentOrThrow().selectEnd()}o.anchorNode===d.startContainer&&o.anchorOffset===d.startOffset||function(v){const x=v.focus,b=v.anchor,_=b.key,w=b.offset,S=b.type;b.set(x.key,x.offset,x.type,!0),x.set(_,w,S,!0)}(this)}}r==="lineboundary"&&RX(this,t,n,r,"decorators")}forwardDeletion(t,n,r){if(!r&&(t.type==="element"&&Ee(n)&&t.offset===n.getChildrenSize()||t.type==="text"&&t.offset===n.getTextContentSize())){const s=n.getParent(),a=n.getNextSibling()||(s===null?null:s.getNextSibling());if(Ee(a)&&a.isShadowRoot())return!0}return!1}deleteCharacter(t){const n=this.isCollapsed();if(this.isCollapsed()){const r=this.anchor;let s=r.getNode();if(this.forwardDeletion(r,s,t))return;const a=QD(Eu(r,t?"previous":"next"));if(a.getTextSlices().every(i=>i===null||i.distance===0)){let i={type:"initial"};for(const c of a.iterNodeCarets("shadowRoot"))if(Ki(c)){if(!c.origin.isInline()){if(c.origin.isShadowRoot()){if(i.type==="merge-block")break;if(Ee(a.anchor.origin)&&a.anchor.origin.isEmpty()){const u=Di(c);R_(this,df(u,u)),a.anchor.origin.remove()}return}i.type!=="merge-next-block"&&i.type!=="merge-block"||(i={block:i.block,caret:c,type:"merge-block"})}}else{if(i.type==="merge-block")break;if($h(c)){if(Ee(c.origin)){if(c.origin.isInline()){if(!c.origin.isParentOf(a.anchor.origin))break}else i={block:c.origin,type:"merge-next-block"};continue}if(Tn(c.origin)){if(!c.origin.isIsolated())if(i.type==="merge-next-block"&&(c.origin.isKeyboardSelectable()||!c.origin.isInline())&&Ee(a.anchor.origin)&&a.anchor.origin.isEmpty()){a.anchor.origin.remove();const u=G0e();u.add(c.origin.getKey()),Ps(u)}else c.origin.remove();return}break}}if(i.type==="merge-block"){const{caret:c,block:u}=i;return R_(this,df(!c.origin.isEmpty()&&u.isEmpty()?XD(ds(u,c.direction)):a.anchor,c)),this.removeText()}}const o=this.focus;if(this.modify("extend",t,"character"),this.isCollapsed()){if(t&&r.offset===0&&MX(this,r.getNode()))return}else{const i=o.type==="text"?o.getNode():null;if(s=r.type==="text"?r.getNode():null,i!==null&&i.isSegmented()){const c=o.offset,u=i.getTextContentSize();if(i.is(s)||t&&c!==u||!t&&c!==0)return void TX(i,t,c)}else if(s!==null&&s.isSegmented()){const c=r.offset,u=s.getTextContentSize();if(s.is(i)||t&&c!==0||!t&&c!==u)return void TX(s,t,c)}(function(c,u){const d=c.anchor,m=c.focus,h=d.getNode(),p=m.getNode();if(h===p&&d.type==="text"&&m.type==="text"){const g=d.offset,y=m.offset,v=g<y,x=v?g:y,b=v?y:g,_=b-1;x!==_&&function(w){return!(c1e(w)||b1t(w))}(h.getTextContent().slice(x,b))&&(u?m.set(m.key,_,m.type):d.set(d.key,_,d.type))}})(this,t)}}if(this.removeText(),t&&!n&&this.isCollapsed()&&this.anchor.type==="element"&&this.anchor.offset===0){const r=this.anchor.getNode();r.isEmpty()&&Ms(r.getParent())&&r.getPreviousSibling()===null&&MX(this,r)}}deleteLine(t){this.isCollapsed()&&this.modify("extend",t,"lineboundary"),this.isCollapsed()?this.deleteCharacter(t):this.removeText()}deleteWord(t){if(this.isCollapsed()){const n=this.anchor,r=n.getNode();if(this.forwardDeletion(n,r,t))return;this.modify("extend",t,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function au(e){return e instanceof OE}function EX(e){const t=e.offset;if(e.type==="text")return t;const n=e.getNode();return t===n.getChildrenSize()?n.getTextContent().length:0}function EI(e){const t=e.getStartEndPoints();if(t===null)return[0,0];const[n,r]=t;return n.type==="element"&&r.type==="element"&&n.key===r.key&&n.offset===r.offset?[0,0]:[EX(n),EX(r)]}function MX(e,t){for(let n=t;n;n=n.getParent()){if(Ee(n)){if(n.collapseAtStart(e))return!0;if(Zo(n))break}if(n.getPreviousSibling())break}return!1}const b1t=(()=>{try{const e=new RegExp("\\p{Emoji}","u"),t=e.test.bind(e);if(t("")&&t("#")&&t(""))return t}catch{}return()=>!1})();function TX(e,t,n){const r=e,s=r.getTextContent().split(/(?=\s)/g),a=s.length;let o=0,i=0;for(let u=0;u<a;u++){const d=u===a-1;if(i=o,o+=s[u].length,t&&o===n||o>n||d){s.splice(u,1),d&&(i=void 0);break}}const c=s.join("").trim();c===""?r.remove():(r.setTextContent(c),r.select(i,i))}function kX(e,t,n,r){let s,a=t;if(Tr(e)){let o=!1;const i=e.childNodes,c=i.length,u=r._blockCursorElement;a===c&&(o=!0,a=c-1);let d=i[a],m=!1;if(d===u)d=i[a+1],m=!0;else if(u!==null){const h=u.parentNode;e===h&&t>Array.prototype.indexOf.call(h.children,u)&&a--}if(s=_m(d),Qe(s))a=$X(s,o);else{let h=_m(e);if(h===null)return null;if(Ee(h)){const p=r.getElementByKey(h.getKey());p===null&&Ie(214),[h,a]=h.getDOMSlot(p).resolveChildIndex(h,p,e,t),Ee(h)||Ie(215),o&&a>=h.getChildrenSize()&&(a=Math.max(0,h.getChildrenSize()-1));let y=h.getChildAtIndex(a);if(Ee(y)&&function(v,x,b){const _=v.getParent();return b===null||_===null||!_.canBeEmpty()||_!==b.getNode()}(y,0,n)){const v=o?y.getLastDescendant():y.getFirstDescendant();v===null?h=y:(y=v,h=Ee(y)?y:y.getParentOrThrow()),a=0}Qe(y)?(s=y,h=null,a=$X(y,o)):y!==h&&o&&!m&&(Ee(h)||Ie(216),a=Math.min(h.getChildrenSize(),a+1))}else{const p=h.getIndexWithinParent();a=t===0&&Tn(h)&&_m(e)===h?p:p+1,h=h.getParentOrThrow()}if(Ee(h))return sl(h.__key,a,"element")}}else s=_m(e);return Qe(s)?sl(s.__key,a,"text"):null}function NX(e,t,n){const r=e.offset,s=e.getNode();if(r===0){const a=s.getPreviousSibling(),o=s.getParent();if(t){if((n||!t)&&a===null&&Ee(o)&&o.isInline()){const i=o.getPreviousSibling();Qe(i)&&e.set(i.__key,i.getTextContent().length,"text")}}else Ee(a)&&!n&&a.isInline()?e.set(a.__key,a.getChildrenSize(),"element"):Qe(a)&&e.set(a.__key,a.getTextContent().length,"text")}else if(r===s.getTextContent().length){const a=s.getNextSibling(),o=s.getParent();if(t&&Ee(a)&&a.isInline())e.set(a.__key,0,"element");else if((n||t)&&a===null&&Ee(o)&&o.isInline()&&!o.canInsertTextAfter()){const i=o.getNextSibling();Qe(i)&&e.set(i.__key,0,"text")}}}function $0e(e,t,n){if(e.type==="text"&&t.type==="text"){const r=e.isBefore(t),s=e.is(t);NX(e,r,s),NX(t,!r,s),s&&t.set(e.key,e.offset,e.type);const a=or();if(a.isComposing()&&a._compositionKey!==e.key&&Re(n)){const o=n.anchor,i=n.focus;e.set(o.key,o.offset,o.type,!0),t.set(i.key,i.offset,i.type,!0)}}}function W0e(e,t,n,r,s,a){if(e===null||n===null||!FE(s,e,n))return null;const o=kX(e,t,Re(a)?a.anchor:null,s);if(o===null)return null;const i=kX(n,r,Re(a)?a.focus:null,s);if(i===null)return null;if(o.type==="element"&&i.type==="element"){const c=_m(e),u=_m(n);if(Tn(c)&&Tn(u))return null}return $0e(o,i,a),[o,i]}function MI(e){return Ee(e)&&!e.isInline()}function H0e(e,t,n,r,s,a){const o=Fu(),i=new Ef(sl(e,t,s),sl(n,r,a),0,"");return i.dirty=!0,o._selection=i,i}function z0e(){const e=sl("root",0,"element"),t=sl("root",0,"element");return new Ef(e,t,0,"")}function G0e(){return new OE(new Set)}function RD(e,t,n,r){const s=n._window;if(s===null)return null;const a=r||s.event,o=a?a.type:void 0,i=o==="selectionchange",c=!dI&&(i||o==="beforeinput"||o==="compositionstart"||o==="compositionend"||o==="click"&&a&&a.detail===3||o==="drop"||o===void 0);let u,d,m,h;if(Re(e)&&!c)return e.clone();if(t===null)return null;if(u=t.anchorNode,d=t.focusNode,m=t.anchorOffset,h=t.focusOffset,i&&Re(e)&&!FE(n,u,d))return e.clone();const p=W0e(u,m,d,h,n,e);if(p===null)return null;const[g,y]=p;return new Ef(g,y,Re(e)?e.format:0,Re(e)?e.style:"")}function Ze(){return Fu()._selection}function T1(){return or()._editorState._selection}function Nw(e,t,n,r=1){const s=e.anchor,a=e.focus,o=s.getNode(),i=a.getNode();if(!t.is(o)&&!t.is(i))return;const c=t.__key;if(e.isCollapsed()){const u=s.offset;if(n<=u&&r>0||n<u&&r<0){const d=Math.max(0,u+r);s.set(c,d,"element"),a.set(c,d,"element"),AX(e)}}else{const u=e.isBackward(),d=u?a:s,m=d.getNode(),h=u?s:a,p=h.getNode();if(t.is(m)){const g=d.offset;(n<=g&&r>0||n<g&&r<0)&&d.set(c,Math.max(0,g+r),"element")}if(t.is(p)){const g=h.offset;(n<=g&&r>0||n<g&&r<0)&&h.set(c,Math.max(0,g+r),"element")}}AX(e)}function AX(e){const t=e.anchor,n=t.offset,r=e.focus,s=r.offset,a=t.getNode(),o=r.getNode();if(e.isCollapsed()){if(!Ee(a))return;const i=a.getChildrenSize(),c=n>=i,u=c?a.getChildAtIndex(i-1):a.getChildAtIndex(n);if(Qe(u)){let d=0;c&&(d=u.getTextContentSize()),t.set(u.__key,d,"text"),r.set(u.__key,d,"text")}}else{if(Ee(a)){const i=a.getChildrenSize(),c=n>=i,u=c?a.getChildAtIndex(i-1):a.getChildAtIndex(n);if(Qe(u)){let d=0;c&&(d=u.getTextContentSize()),t.set(u.__key,d,"text")}}if(Ee(o)){const i=o.getChildrenSize(),c=s>=i,u=c?o.getChildAtIndex(i-1):o.getChildAtIndex(s);if(Qe(u)){let d=0;c&&(d=u.getTextContentSize()),r.set(u.__key,d,"text")}}}}function Aw(e,t,n,r,s){let a=null,o=0,i=null;r!==null?(a=r.__key,Qe(r)?(o=r.getTextContentSize(),i="text"):Ee(r)&&(o=r.getChildrenSize(),i="element")):s!==null&&(a=s.__key,Qe(s)?i="text":Ee(s)&&(i="element")),a!==null&&i!==null?e.set(a,o,i):(o=t.getIndexWithinParent(),o===-1&&(o=n.getChildrenSize()),e.set(n.__key,o,"element"))}function PX(e,t,n,r,s){e.type==="text"?e.set(n,e.offset+(t?0:s),"text"):e.offset>r.getIndexWithinParent()&&e.set(e.key,e.offset-1,"element")}function q0e(e,t,n,r,s){try{e.setBaseAndExtent(t,n,r,s)}catch{}}function _1t(e,t,n,r,s,a,o){const i=r.anchorNode,c=r.focusNode,u=r.anchorOffset,d=r.focusOffset,m=document.activeElement;if(s.has(t1e)&&m!==a||m!==null&&a1e(m))return;if(!Re(t))return void(e!==null&&FE(n,i,c)&&r.removeAllRanges());const h=t.anchor,p=t.focus,g=h.key,y=p.key,v=Vh(n,g),x=Vh(n,y),b=h.offset,_=p.offset,w=t.format,S=t.style,C=t.isCollapsed();let E=v,M=x,T=!1;if(h.type==="text"){E=Uh(v);const k=h.getNode();T=k.getFormat()!==w||k.getStyle()!==S}else Re(e)&&e.anchor.type==="text"&&(T=!0);var I,j,N,P,R;if(p.type==="text"&&(M=Uh(x)),E!==null&&M!==null&&(C&&(e===null||T||Re(e)&&(e.format!==w||e.style!==S))&&(I=w,j=S,N=b,P=g,R=performance.now(),j0e=[I,j,N,P,R]),u!==b||d!==_||i!==E||c!==M||r.type==="Range"&&C||(m!==null&&a.contains(m)||a.focus({preventScroll:!0}),h.type==="element"))){if(q0e(r,E,b,M,_),!s.has(M1t)&&t.isCollapsed()&&a!==null&&a===document.activeElement){const k=Re(t)&&t.anchor.type==="element"?E.childNodes[b]||null:r.rangeCount>0?r.getRangeAt(0):null;if(k!==null){let O;if(k instanceof Text){const L=document.createRange();L.selectNode(k),O=L.getBoundingClientRect()}else O=k.getBoundingClientRect();(function(L,F,U){const V=m1e(U),W=WD(V);if(V===null||W===null)return;let{top:H,bottom:G}=F,K=0,$=0,q=U;for(;q!==null;){const Z=q===V.body;if(Z)K=0,$=go(L).innerHeight;else{const Y=q.getBoundingClientRect();K=Y.top,$=Y.bottom}let se=0;if(H<K?se=-(K-H):G>$&&(se=G-$),se!==0)if(Z)W.scrollBy(0,se);else{const Y=q.scrollTop;q.scrollTop+=se;const Q=q.scrollTop-Y;H-=Q,G-=Q}if(Z)break;q=N1(q)}})(n,O,a)}}wI=!0}}function c5(e){let t=e;e.isCollapsed()||t.removeText();const n=Ze();Re(n)&&(t=n),Re(t)||Ie(161);const r=t.anchor;let s=r.getNode(),a=r.offset;for(;!zc(s);){const o=s;if([s,a]=w1t(s,a),o.is(s))break}return a}function w1t(e,t){const n=e.getParent();if(!n){const s=br();return Kn().append(s),s.select(),[Kn(),0]}if(Qe(e)){const s=e.splitText(t);if(s.length===0)return[n,e.getIndexWithinParent()];const a=t===0?0:1;return[n,s[0].getIndexWithinParent()+a]}if(!Ee(e)||t===0)return[n,e.getIndexWithinParent()];const r=e.getChildAtIndex(t);if(r){const s=new Ef(sl(e.__key,t,"element"),sl(e.__key,t,"element"),0,""),a=e.insertNewAfter(s);a&&a.append(r,...r.getNextSiblings())}return[n,e.getIndexWithinParent()+1]}function RX(e,t,n,r,s="decorators-and-blocks"){if(t==="move"&&r==="character"&&!e.isCollapsed()){const[d,m]=n===e.isBackward()?[e.focus,e.anchor]:[e.anchor,e.focus];return m.set(d.key,d.offset,d.type),!0}const a=Eu(e.focus,n?"previous":"next"),o=r==="lineboundary",i=t==="move";let c=a,u=s==="decorators-and-blocks";if(!v1e(c)){for(const d of c){u=!1;const{origin:m}=d;if(!Tn(m)||m.isIsolated()||(c=d,!o||!m.isInline()))break}if(u)for(const d of QD(a).iterNodeCarets(t==="extend"?"shadowRoot":"root")){if(Ki(d))d.origin.isInline()||(c=d);else{if(Ee(d.origin))continue;Tn(d.origin)&&!d.origin.isInline()&&(c=d)}break}}if(c===a)return!1;if(i&&!o&&Tn(c.origin)&&c.origin.isKeyboardSelectable()){const d=G0e();return d.add(c.origin.getKey()),Ps(d),!0}return c=Di(c),i&&d0(e.anchor,c),d0(e.focus,c),u||!o}let Hr=null,zr=null,ba=!1,u5=!1,N_=0;const IX={characterData:!0,childList:!0,subtree:!0};function k1(){return ba||Hr!==null&&Hr._readOnly}function _s(){ba&&Ie(13)}function K0e(){N_>99&&Ie(14)}function Fu(){return Hr===null&&Ie(195,Y0e()),Hr}function or(){return zr===null&&Ie(196,Y0e()),zr}function Y0e(){let e=0;const t=new Set,n=DE.version;if(typeof window<"u")for(const s of document.querySelectorAll("[contenteditable]")){const a=UE(s);if(DD(a))e++;else if(a){let o=String(a.constructor.version||"<0.17.1");o===n&&(o+=" (separately built, likely a bundler configuration issue)"),t.add(o)}}let r=` Detected on the page: ${e} compatible editor(s) with version ${n}`;return t.size&&(r+=` and incompatible editors with versions ${Array.from(t).join(", ")}`),r}function S1t(){return zr}function jX(e,t,n){const r=t.__type,s=function(i,c){const u=i._nodes.get(c);return u===void 0&&Ie(30,c),u}(e,r);let a=n.get(r);a===void 0&&(a=Array.from(s.transforms),n.set(r,a));const o=a.length;for(let i=0;i<o&&(a[i](t),t.isAttached());i++);}function OX(e,t){return e!==void 0&&e.__key!==t&&e.isAttached()}function Q0e(e,t){if(!t)return;const n=e._updateTags;let r=t;Array.isArray(t)||(r=[t]);for(const s of r)n.add(s)}function C1t(e){return ID(e,or()._nodes)}function ID(e,t){const n=e.type,r=t.get(n);r===void 0&&Ie(17,n);const s=r.klass;e.type!==s.getType()&&Ie(18,s.name);const a=s.importJSON(e),o=e.children;if(Ee(a)&&Array.isArray(o))for(let i=0;i<o.length;i++){const c=ID(o[i],t);a.append(c)}return a}function LX(e,t,n){const r=Hr,s=ba,a=zr;Hr=t,ba=!0,zr=e;try{return n()}finally{Hr=r,ba=s,zr=a}}function Pl(e,t){const n=e._pendingEditorState,r=e._rootElement,s=e._headless||r===null;if(n===null)return;const a=e._editorState,o=a._selection,i=n._selection,c=e._dirtyType!==sf,u=Hr,d=ba,m=zr,h=e._updating,p=e._observer;let g=null;if(e._pendingEditorState=null,e._editorState=n,!s&&c&&p!==null){zr=e,Hr=n,ba=!1,e._updating=!0;try{const C=e._dirtyType,E=e._dirtyElements,M=e._dirtyLeaves;p.disconnect(),g=J0t(a,n,e,C,E,M)}catch(C){if(C instanceof Error&&e._onError(C),u5)throw C;return r1e(e,null,r,n),m0e(e),e._dirtyType=jh,u5=!0,Pl(e,a),void(u5=!1)}finally{p.observe(r,IX),e._updating=h,Hr=u,ba=d,zr=m}}n._readOnly||(n._readOnly=!0);const y=e._dirtyLeaves,v=e._dirtyElements,x=e._normalizedNodes,b=e._updateTags,_=e._deferred;c&&(e._dirtyType=sf,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements=new Map,e._normalizedNodes=new Set,e._updateTags=new Set),function(C,E){const M=C._decorators;let T=C._pendingDecorators||M;const I=E._nodeMap;let j;for(j in T)I.has(j)||(T===M&&(T=i1e(C)),delete T[j])}(e,n);const w=s?null:al(go(e));if(e._editable&&w!==null&&(c||i===null||i.dirty)&&r!==null&&!b.has(T1t)){zr=e,Hr=n;try{if(p!==null&&p.disconnect(),c||i===null||i.dirty){const C=e._blockCursorElement;C!==null&&NI(C,e,r),_1t(o,i,e,w,b,r)}(function(C,E,M){let T=C._blockCursorElement;if(Re(M)&&M.isCollapsed()&&M.anchor.type==="element"&&E.contains(document.activeElement)){const I=M.anchor,j=I.getNode(),N=I.offset;let P=!1,R=null;if(N===j.getChildrenSize())f5(j.getChildAtIndex(N-1))&&(P=!0);else{const k=j.getChildAtIndex(N);if(k!==null&&f5(k)){const O=k.getPreviousSibling();(O===null||f5(O))&&(P=!0,R=C.getElementByKey(k.__key))}}if(P){const k=C.getElementByKey(j.__key);return T===null&&(C._blockCursorElement=T=function(O){const L=O.theme,F=document.createElement("div");F.contentEditable="false",F.setAttribute("data-lexical-cursor","true");let U=L.blockCursor;if(U!==void 0){if(typeof U=="string"){const V=_w(U);U=L.blockCursor=V}U!==void 0&&F.classList.add(...U)}return F}(C._config)),E.style.caretColor="transparent",void(R===null?k.appendChild(T):k.insertBefore(T,R))}}T!==null&&NI(T,C,E)})(e,r,i)}finally{p!==null&&p.observe(r,IX),zr=m,Hr=u}}g!==null&&function(C,E,M,T,I){const j=Array.from(C._listeners.mutation),N=j.length;for(let P=0;P<N;P++){const[R,k]=j[P],O=E.get(k);O!==void 0&&R(O,{dirtyLeaves:T,prevEditorState:I,updateTags:M})}}(e,g,b,y,a),Re(i)||i===null||o!==null&&o.is(i)||e.dispatchCommand(_0e,void 0);const S=e._pendingDecorators;S!==null&&(e._decorators=S,e._pendingDecorators=null,Xy("decorator",e,!0,S)),function(C,E,M){const T=VX(E),I=VX(M);T!==I&&Xy("textcontent",C,!0,I)}(e,t||a,n),Xy("update",e,!0,{dirtyElements:v,dirtyLeaves:y,editorState:n,mutatedNodes:g,normalizedNodes:x,prevEditorState:t||a,tags:b}),function(C,E){if(C._deferred=[],E.length!==0){const M=C._updating;C._updating=!0;try{for(let T=0;T<E.length;T++)E[T]()}finally{C._updating=M}}}(e,_),function(C){const E=C._updates;if(E.length!==0){const M=E.shift();if(M){const[T,I]=M;jD(C,T,I)}}}(e)}function Xy(e,t,n,...r){const s=t._updating;t._updating=n;try{const a=Array.from(t._listeners[e]);for(let o=0;o<a.length;o++)a[o].apply(null,r)}finally{t._updating=s}}function DX(e,t){const n=e._updates;let r=t||!1;for(;n.length!==0;){const s=n.shift();if(s){const[a,o]=s;let i;if(o!==void 0){if(i=o.onUpdate,o.skipTransforms&&(r=!0),o.discrete){const c=e._pendingEditorState;c===null&&Ie(191),c._flushSync=!0}i&&e._deferred.push(i),Q0e(e,o.tag)}a()}}return r}function jD(e,t,n){const r=e._updateTags;let s,a=!1,o=!1;n!==void 0&&(s=n.onUpdate,Q0e(e,n.tag),a=n.skipTransforms||!1,o=n.discrete||!1),s&&e._deferred.push(s);const i=e._editorState;let c=e._pendingEditorState,u=!1;(c===null||c._readOnly)&&(c=e._pendingEditorState=Z0e(c||i),u=!0),c._flushSync=o;const d=Hr,m=ba,h=zr,p=e._updating;Hr=c,ba=!1,e._updating=!0,zr=e;const g=e._headless||e.getRootElement()===null;try{u&&(g?i._selection!==null&&(c._selection=i._selection.clone()):c._selection=function(b,_){const w=b.getEditorState()._selection,S=al(go(b));return Re(w)||w==null?RD(w,S,b,_):w.clone()}(e,n&&n.event||null));const v=e._compositionKey;t(),a=DX(e,a),function(b,_){const w=_.getEditorState()._selection,S=b._selection;if(Re(S)){const C=S.anchor,E=S.focus;let M;if(C.type==="text"&&(M=C.getNode(),M.selectionTransform(w,S)),E.type==="text"){const T=E.getNode();M!==T&&T.selectionTransform(w,S)}}}(c,e),e._dirtyType!==sf&&(a?function(b,_){const w=_._dirtyLeaves,S=b._nodeMap;for(const C of w){const E=S.get(C);Qe(E)&&E.isAttached()&&E.isSimpleText()&&!E.isUnmergeable()&&hX(E)}}(c,e):function(b,_){const w=_._dirtyLeaves,S=_._dirtyElements,C=b._nodeMap,E=Xc(),M=new Map;let T=w,I=T.size,j=S,N=j.size;for(;I>0||N>0;){if(I>0){_._dirtyLeaves=new Set;for(const P of T){const R=C.get(P);Qe(R)&&R.isAttached()&&R.isSimpleText()&&!R.isUnmergeable()&&hX(R),R!==void 0&&OX(R,E)&&jX(_,R,M),w.add(P)}if(T=_._dirtyLeaves,I=T.size,I>0){N_++;continue}}_._dirtyLeaves=new Set,_._dirtyElements=new Map,j.delete("root")&&j.set("root",!0);for(const P of j){const R=P[0],k=P[1];if(S.set(R,k),!k)continue;const O=C.get(R);O!==void 0&&OX(O,E)&&jX(_,O,M)}T=_._dirtyLeaves,I=T.size,j=_._dirtyElements,N=j.size,N_++}_._dirtyLeaves=w,_._dirtyElements=S}(c,e),DX(e),function(b,_,w,S){const C=b._nodeMap,E=_._nodeMap,M=[];for(const[T]of S){const I=E.get(T);I!==void 0&&(I.isAttached()||(Ee(I)&&u0e(I,T,C,E,M,S),C.has(T)||S.delete(T),M.push(T)))}for(const T of M)E.delete(T);for(const T of w){const I=E.get(T);I===void 0||I.isAttached()||(C.has(T)||w.delete(T),E.delete(T))}}(i,c,e._dirtyLeaves,e._dirtyElements)),v!==e._compositionKey&&(c._flushSync=!0);const x=c._selection;if(Re(x)){const b=c._nodeMap,_=x.anchor.key,w=x.focus.key;b.get(_)!==void 0&&b.get(w)!==void 0||Ie(19)}else au(x)&&x._nodes.size===0&&(c._selection=null)}catch(v){return v instanceof Error&&e._onError(v),e._pendingEditorState=i,e._dirtyType=jh,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),void Pl(e)}finally{Hr=d,ba=m,zr=h,e._updating=p,N_=0}e._dirtyType!==sf||e._deferred.length>0||function(v,x){const b=x.getEditorState()._selection,_=v._selection;if(_!==null){if(_.dirty||!_.is(b))return!0}else if(b!==null)return!0;return!1}(c,e)?c._flushSync?(c._flushSync=!1,Pl(e)):u&&A1t(()=>{Pl(e)}):(c._flushSync=!1,u&&(r.clear(),e._deferred=[],e._pendingEditorState=null))}function Ia(e,t,n){zr===e&&n===void 0?t():jD(e,t,n)}class Zy{constructor(t,n,r){this.element=t,this.before=n||null,this.after=r||null}withBefore(t){return new Zy(this.element,t,this.after)}withAfter(t){return new Zy(this.element,this.before,t)}withElement(t){return this.element===t?this:new Zy(t,this.before,this.after)}insertChild(t){const n=this.before||this.getManagedLineBreak();return n!==null&&n.parentElement!==this.element&&Ie(222),this.element.insertBefore(t,n),this}removeChild(t){return t.parentElement!==this.element&&Ie(223),this.element.removeChild(t),this}replaceChild(t,n){return n.parentElement!==this.element&&Ie(224),this.element.replaceChild(t,n),this}getFirstChild(){const t=this.after?this.after.nextSibling:this.element.firstChild;return t===this.before||t===this.getManagedLineBreak()?null:t}getManagedLineBreak(){return this.element.__lexicalLineBreak||null}setManagedLineBreak(t){if(t===null)this.removeManagedLineBreak();else{const n=t==="decorator"&&(Ih||a0);this.insertManagedLineBreak(n)}}removeManagedLineBreak(){const t=this.getManagedLineBreak();if(t){const n=this.element,r=t.nodeName==="IMG"?t.nextSibling:null;r&&n.removeChild(r),n.removeChild(t),n.__lexicalLineBreak=void 0}}insertManagedLineBreak(t){const n=this.getManagedLineBreak();if(n){if(t===(n.nodeName==="IMG"))return;this.removeManagedLineBreak()}const r=this.element,s=this.before,a=document.createElement("br");if(r.insertBefore(a,s),t){const o=document.createElement("img");o.setAttribute("data-lexical-linebreak","true"),o.style.cssText="display: inline !important; border: 0px !important; margin: 0px !important;",o.alt="",r.insertBefore(o,a),r.__lexicalLineBreak=o}else r.__lexicalLineBreak=a}getFirstChildOffset(){let t=0;for(let n=this.after;n!==null;n=n.previousSibling)t++;return t}resolveChildIndex(t,n,r,s){if(r===this.element){const c=this.getFirstChildOffset();return[t,Math.min(c+t.getChildrenSize(),Math.max(c,s))]}const a=FX(n,r);a.push(s);const o=FX(n,this.element);let i=t.getIndexWithinParent();for(let c=0;c<o.length;c++){const u=a[c],d=o[c];if(u===void 0||u<d)break;if(u>d){i+=1;break}}return[t.getParentOrThrow(),i]}}function FX(e,t){const n=[];let r=t;for(;r!==e&&r!==null;r=t.parentNode){let s=0;for(let a=r.previousSibling;a!==null;a=a.previousSibling)s++;n.push(s)}return r!==e&&Ie(225),n.reverse()}class pl extends jE{constructor(t){super(t),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__style="",this.__indent=0,this.__dir=null,this.__textFormat=0,this.__textStyle=""}afterCloneFrom(t){super.afterCloneFrom(t),this.__first=t.__first,this.__last=t.__last,this.__size=t.__size,this.__indent=t.__indent,this.__format=t.__format,this.__style=t.__style,this.__dir=t.__dir,this.__textFormat=t.__textFormat,this.__textStyle=t.__textStyle}getFormat(){return this.getLatest().__format}getFormatType(){const t=this.getFormat();return B0t[t]||""}getStyle(){return this.getLatest().__style}getIndent(){return this.getLatest().__indent}getChildren(){const t=[];let n=this.getFirstChild();for(;n!==null;)t.push(n),n=n.getNextSibling();return t}getChildrenKeys(){const t=[];let n=this.getFirstChild();for(;n!==null;)t.push(n.__key),n=n.getNextSibling();return t}getChildrenSize(){return this.getLatest().__size}isEmpty(){return this.getChildrenSize()===0}isDirty(){const t=or()._dirtyElements;return t!==null&&t.has(this.__key)}isLastChild(){const t=this.getLatest(),n=this.getParentOrThrow().getLastChild();return n!==null&&n.is(t)}getAllTextNodes(){const t=[];let n=this.getFirstChild();for(;n!==null;){if(Qe(n)&&t.push(n),Ee(n)){const r=n.getAllTextNodes();t.push(...r)}n=n.getNextSibling()}return t}getFirstDescendant(){let t=this.getFirstChild();for(;Ee(t);){const n=t.getFirstChild();if(n===null)break;t=n}return t}getLastDescendant(){let t=this.getLastChild();for(;Ee(t);){const n=t.getLastChild();if(n===null)break;t=n}return t}getDescendantByIndex(t){const n=this.getChildren(),r=n.length;if(t>=r){const a=n[r-1];return Ee(a)&&a.getLastDescendant()||a||null}const s=n[t];return Ee(s)&&s.getFirstDescendant()||s||null}getFirstChild(){const t=this.getLatest().__first;return t===null?null:Gr(t)}getFirstChildOrThrow(){const t=this.getFirstChild();return t===null&&Ie(45,this.__key),t}getLastChild(){const t=this.getLatest().__last;return t===null?null:Gr(t)}getLastChildOrThrow(){const t=this.getLastChild();return t===null&&Ie(96,this.__key),t}getChildAtIndex(t){const n=this.getChildrenSize();let r,s;if(t<n/2){for(r=this.getFirstChild(),s=0;r!==null&&s<=t;){if(s===t)return r;r=r.getNextSibling(),s++}return null}for(r=this.getLastChild(),s=n-1;r!==null&&s>=t;){if(s===t)return r;r=r.getPreviousSibling(),s--}return null}getTextContent(){let t="";const n=this.getChildren(),r=n.length;for(let s=0;s<r;s++){const a=n[s];t+=a.getTextContent(),Ee(a)&&s!==r-1&&!a.isInline()&&(t+=ac)}return t}getTextContentSize(){let t=0;const n=this.getChildren(),r=n.length;for(let s=0;s<r;s++){const a=n[s];t+=a.getTextContentSize(),Ee(a)&&s!==r-1&&!a.isInline()&&(t+=ac.length)}return t}getDirection(){return this.getLatest().__dir}getTextFormat(){return this.getLatest().__textFormat}hasFormat(t){if(t!==""){const n=dX[t];return!!(this.getFormat()&n)}return!1}hasTextFormat(t){const n=af[t];return!!(this.getTextFormat()&n)}getFormatFlags(t,n){return Pw(this.getLatest().__textFormat,t,n)}getTextStyle(){return this.getLatest().__textStyle}select(t,n){_s();const r=Ze();let s=t,a=n;const o=this.getChildrenSize();if(!this.canBeEmpty()){if(t===0&&n===0){const c=this.getFirstChild();if(Qe(c)||Ee(c))return c.select(0,0)}else if(!(t!==void 0&&t!==o||n!==void 0&&n!==o)){const c=this.getLastChild();if(Qe(c)||Ee(c))return c.select()}}s===void 0&&(s=o),a===void 0&&(a=o);const i=this.__key;return Re(r)?(r.anchor.set(i,s,"element"),r.focus.set(i,a,"element"),r.dirty=!0,r):H0e(i,s,i,a,"element","element")}selectStart(){const t=this.getFirstDescendant();return t?t.selectStart():this.select()}selectEnd(){const t=this.getLastDescendant();return t?t.selectEnd():this.select()}clear(){const t=this.getWritable();return this.getChildren().forEach(n=>n.remove()),t}append(...t){return this.splice(this.getChildrenSize(),0,t)}setDirection(t){const n=this.getWritable();return n.__dir=t,n}setFormat(t){return this.getWritable().__format=t!==""?dX[t]:0,this}setStyle(t){return this.getWritable().__style=t||"",this}setTextFormat(t){const n=this.getWritable();return n.__textFormat=t,n}setTextStyle(t){const n=this.getWritable();return n.__textStyle=t,n}setIndent(t){return this.getWritable().__indent=t,this}splice(t,n,r){const s=r.length,a=this.getChildrenSize(),o=this.getWritable();t+n<=a||Ie(226,String(t),String(n),String(a));const i=o.__key,c=[],u=[],d=this.getChildAtIndex(t+n);let m=null,h=a-n+s;if(t!==0)if(t===a)m=this.getLastChild();else{const g=this.getChildAtIndex(t);g!==null&&(m=g.getPreviousSibling())}if(n>0){let g=m===null?this.getFirstChild():m.getNextSibling();for(let y=0;y<n;y++){g===null&&Ie(100);const v=g.getNextSibling(),x=g.__key;Ld(g.getWritable()),u.push(x),g=v}}let p=m;for(let g=0;g<s;g++){const y=r[g];p!==null&&y.is(p)&&(m=p=p.getPreviousSibling());const v=y.getWritable();v.__parent===i&&h--,Ld(v);const x=y.__key;if(p===null)o.__first=x,v.__prev=null;else{const b=p.getWritable();b.__next=x,v.__prev=b.__key}y.__key===i&&Ie(76),v.__parent=i,c.push(x),p=y}if(t+n===a)p!==null&&(p.getWritable().__next=null,o.__last=p.__key);else if(d!==null){const g=d.getWritable();if(p!==null){const y=p.getWritable();g.__prev=p.__key,y.__next=d.__key}else g.__prev=null}if(o.__size=h,u.length){const g=Ze();if(Re(g)){const y=new Set(u),v=new Set(c),{anchor:x,focus:b}=g;UX(x,y,v)&&Aw(x,x.getNode(),this,m,d),UX(b,y,v)&&Aw(b,b.getNode(),this,m,d),h!==0||this.canBeEmpty()||Zo(this)||this.remove()}}return o}getDOMSlot(t){return new Zy(t)}exportDOM(t){const{element:n}=super.exportDOM(t);if(Tr(n)){const r=this.getIndent();r>0&&(n.style.paddingInlineStart=40*r+"px");const s=this.getDirection();s&&(n.dir=s)}return{element:n}}exportJSON(){const t={children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),...super.exportJSON()},n=this.getTextFormat(),r=this.getTextStyle();return n!==0&&(t.textFormat=n),r!==""&&(t.textStyle=r),t}updateFromJSON(t){return super.updateFromJSON(t).setFormat(t.format).setIndent(t.indent).setDirection(t.direction).setTextFormat(t.textFormat||0).setTextStyle(t.textStyle||"")}insertNewAfter(t,n){return null}canIndent(){return!0}collapseAtStart(t){return!1}excludeFromCopy(t){return!1}canReplaceWith(t){return!0}canInsertAfter(t){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(t){return!1}extractWithChild(t,n,r){return!1}canMergeWhenEmpty(){return!1}reconcileObservedMutation(t,n){const r=this.getDOMSlot(t);let s=r.getFirstChild();for(let a=this.getFirstChild();a;a=a.getNextSibling()){const o=n.getElementByKey(a.getKey());o!==null&&(s==null?(r.insertChild(o),s=o):s!==o&&r.replaceChild(o,s),s=s.nextSibling)}}}function Ee(e){return e instanceof pl}function UX(e,t,n){let r=e.getNode();for(;r;){const s=r.__key;if(t.has(s)&&!n.has(s))return!0;r=r.getParent()}return!1}class X0e extends jE{decorate(t,n){Ie(47)}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function Tn(e){return e instanceof X0e}class Gp extends pl{static getType(){return"root"}static clone(){return new Gp}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){Ie(51)}getTextContent(){const t=this.__cachedText;return!k1()&&or()._dirtyType!==sf||t===null?super.getTextContent():t}remove(){Ie(52)}replace(t){Ie(53)}insertBefore(t){Ie(54)}insertAfter(t){Ie(55)}updateDOM(t,n){return!1}splice(t,n,r){for(const s of r)Ee(s)||Tn(s)||Ie(282);return super.splice(t,n,r)}static importJSON(t){return Kn().updateFromJSON(t)}collapseAtStart(){return!0}}function Ms(e){return e instanceof Gp}function Z0e(e){return new LE(new Map(e._nodeMap))}function OD(){return new LE(new Map([["root",new Gp]]))}function J0e(e){const t=e.exportJSON(),n=e.constructor;if(t.type!==n.getType()&&Ie(130,n.name),Ee(e)){const r=t.children;Array.isArray(r)||Ie(59,n.name);const s=e.getChildren();for(let a=0;a<s.length;a++){const o=J0e(s[a]);r.push(o)}}return t}class LE{constructor(t,n){this._nodeMap=t,this._selection=n||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return this._nodeMap.size===1&&this._selection===null}read(t,n){return LX(n&&n.editor||null,this,t)}clone(t){const n=new LE(this._nodeMap,t===void 0?this._selection:t);return n._readOnly=!0,n}toJSON(){return LX(null,this,()=>({root:J0e(Kn())}))}}const E1t="historic",WWt="history-push",A_="history-merge",e1e="paste",t1e="collaboration",M1t="skip-scroll-into-view",T1t="skip-dom-selection";class LD extends pl{static getType(){return"artificial"}createDOM(t){return document.createElement("div")}}class qp extends pl{static getType(){return"paragraph"}static clone(t){return new qp(t.__key)}createDOM(t){const n=document.createElement("p"),r=qm(t.theme,"paragraph");return r!==void 0&&n.classList.add(...r),n}updateDOM(t,n,r){return!1}static importDOM(){return{p:t=>({conversion:k1t,priority:0})}}exportDOM(t){const{element:n}=super.exportDOM(t);if(Tr(n)){this.isEmpty()&&n.append(document.createElement("br"));const r=this.getFormatType();n.style.textAlign=r}return{element:n}}static importJSON(t){return br().updateFromJSON(t)}exportJSON(){return{...super.exportJSON(),textFormat:this.getTextFormat(),textStyle:this.getTextStyle()}}insertNewAfter(t,n){const r=br();r.setTextFormat(t.format),r.setTextStyle(t.style);const s=this.getDirection();return r.setDirection(s),r.setFormat(this.getFormatType()),r.setStyle(this.getStyle()),this.insertAfter(r,n),r}collapseAtStart(){const t=this.getChildren();if(t.length===0||Qe(t[0])&&t[0].getTextContent().trim()===""){if(this.getNextSibling()!==null)return this.selectNext(),this.remove(),!0;if(this.getPreviousSibling()!==null)return this.selectPrevious(),this.remove(),!0}return!1}}function k1t(e){const t=br();return e.style&&(t.setFormat(e.style.textAlign),zD(e,t)),{node:t}}function br(){return Qa(new qp)}function Fh(e){return e instanceof qp}const Ur=0,n1e=1,Cl=2;function r1e(e,t,n,r){const s=e._keyToDOMMap;s.clear(),e._editorState=OD(),e._pendingEditorState=r,e._compositionKey=null,e._dirtyType=sf,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),e._normalizedNodes=new Set,e._updateTags=new Set,e._updates=[],e._blockCursorElement=null;const a=e._observer;a!==null&&(a.disconnect(),e._observer=null),t!==null&&(t.textContent=""),n!==null&&(n.textContent="",s.set("root",n))}function s1e(e){const t=e||{},n=S1t(),r=t.theme||{},s=e===void 0?n:t.parentEditor||null,a=t.disableEvents||!1,o=OD(),i=t.namespace||(s!==null?s._config.namespace:u1e()),c=t.editorState,u=[Gp,Du,C1,E1,qp,LD,...t.nodes||[]],{onError:d,html:m}=t,h=t.editable===void 0||t.editable;let p;if(e===void 0&&n!==null)p=n._nodes;else{p=new Map;for(let y=0;y<u.length;y++){let v=u[y],x=null,b=null;if(typeof v!="function"){const C=v;v=C.replace,x=C.with,b=C.withKlass||null}const _=v.getType(),w=v.transform(),S=new Set;w!==null&&S.add(w),p.set(_,{exportDOM:m&&m.export?m.export.get(v):void 0,klass:v,replace:x,replaceWithKlass:b,transforms:S})}}const g=new DE(o,s,p,{disableEvents:a,namespace:i,theme:r},d||console.error,function(y,v){const x=new Map,b=new Set,_=w=>{Object.keys(w).forEach(S=>{let C=x.get(S);C===void 0&&(C=[],x.set(S,C)),C.push(w[S])})};return y.forEach(w=>{const S=w.klass.importDOM;if(S==null||b.has(S))return;b.add(S);const C=S.call(w.klass);C!==null&&_(C)}),v&&_(v),x}(p,m?m.import:void 0),h,e);return c!==void 0&&(g._pendingEditorState=c,g._dirtyType=jh),g}class DE{constructor(t,n,r,s,a,o,i,c){this._createEditorArgs=c,this._parentEditor=n,this._rootElement=null,this._editorState=t,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=s,this._nodes=r,this._decorators={},this._pendingDecorators=null,this._dirtyType=sf,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=u1e(),this._onError=a,this._htmlConversions=o,this._editable=i,this._headless=n!==null&&n._headless,this._window=null,this._blockCursorElement=null}isComposing(){return this._compositionKey!=null}registerUpdateListener(t){const n=this._listeners.update;return n.add(t),()=>{n.delete(t)}}registerEditableListener(t){const n=this._listeners.editable;return n.add(t),()=>{n.delete(t)}}registerDecoratorListener(t){const n=this._listeners.decorator;return n.add(t),()=>{n.delete(t)}}registerTextContentListener(t){const n=this._listeners.textcontent;return n.add(t),()=>{n.delete(t)}}registerRootListener(t){const n=this._listeners.root;return t(this._rootElement,null),n.add(t),()=>{t(null,this._rootElement),n.delete(t)}}registerCommand(t,n,r){r===void 0&&Ie(35);const s=this._commands;s.has(t)||s.set(t,[new Set,new Set,new Set,new Set,new Set]);const a=s.get(t);a===void 0&&Ie(36,String(t));const o=a[r];return o.add(n),()=>{o.delete(n),a.every(i=>i.size===0)&&s.delete(t)}}registerMutationListener(t,n,r){const s=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(t)).klass,a=this._listeners.mutation;a.set(n,s);const o=r&&r.skipInitialization;return o!==void 0&&o||this.initializeMutationListener(n,s),()=>{a.delete(n)}}getRegisteredNode(t){const n=this._nodes.get(t.getType());return n===void 0&&Ie(37,t.name),n}resolveRegisteredNodeAfterReplacements(t){for(;t.replaceWithKlass;)t=this.getRegisteredNode(t.replaceWithKlass);return t}initializeMutationListener(t,n){const r=this._editorState,s=KX(r).get(n.getType());if(!s)return;const a=new Map;for(const o of s.keys())a.set(o,"created");a.size>0&&t(a,{dirtyLeaves:new Set,prevEditorState:r,updateTags:new Set(["registerMutationListener"])})}registerNodeTransformToKlass(t,n){const r=this.getRegisteredNode(t);return r.transforms.add(n),r}registerNodeTransform(t,n){const r=this.registerNodeTransformToKlass(t,n),s=[r],a=r.replaceWithKlass;if(a!=null){const o=this.registerNodeTransformToKlass(a,n);s.push(o)}return function(o,i){const c=KX(o.getEditorState()),u=[];for(const d of i){const m=c.get(d);m&&u.push(m)}u.length!==0&&o.update(()=>{for(const d of u)for(const m of d.keys()){const h=Gr(m);h&&h.markDirty()}},o._pendingEditorState===null?{tag:A_}:void 0)}(this,s.map(o=>o.klass.getType())),()=>{s.forEach(o=>o.transforms.delete(n))}}hasNode(t){return this._nodes.has(t.getType())}hasNodes(t){return t.every(this.hasNode.bind(this))}dispatchCommand(t,n){return tt(this,t,n)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(t){const n=this._rootElement;if(t!==n){const r=qm(this._config.theme,"root"),s=this._pendingEditorState||this._editorState;if(this._rootElement=t,r1e(this,n,t,s),n!==null&&(this._config.disableEvents||f1t(n),r!=null&&n.classList.remove(...r)),t!==null){const a=WD(t),o=t.style;o.userSelect="text",o.whiteSpace="pre-wrap",o.wordBreak="break-word",t.setAttribute("data-lexical-editor","true"),this._window=a,this._dirtyType=jh,m0e(this),this._updateTags.add(A_),Pl(this),this._config.disableEvents||function(i,c){const u=i.ownerDocument,d=kw.get(u);(d===void 0||d<1)&&u.addEventListener("selectionchange",U0e),kw.set(u,(d||0)+1),i.__lexicalEditor=c;const m=F0e(i);for(let h=0;h<_I.length;h++){const[p,g]=_I[h],y=typeof g=="function"?v=>{bX(v)||(xX(v),(c.isEditable()||p==="click")&&g(v,c))}:v=>{if(bX(v))return;xX(v);const x=c.isEditable();switch(p){case"cut":return x&&tt(c,ND,v);case"copy":return tt(c,kD,v);case"paste":return x&&tt(c,IE,v);case"dragstart":return x&&tt(c,P0e,v);case"dragover":return x&&tt(c,i1t,v);case"dragend":return x&&tt(c,l1t,v);case"focus":return x&&tt(c,c1t,v);case"blur":return x&&tt(c,u1t,v);case"drop":return x&&tt(c,A0e,v)}};i.addEventListener(p,y),m.push(()=>{i.removeEventListener(p,y)})}}(t,this),r!=null&&t.classList.add(...r)}else this._window=null,this._updateTags.add(A_),Pl(this);Xy("root",this,!1,t,n)}}getElementByKey(t){return this._keyToDOMMap.get(t)||null}getEditorState(){return this._editorState}setEditorState(t,n){t.isEmpty()&&Ie(38);let r=t;r._readOnly&&(r=Z0e(t),r._selection=t._selection?t._selection.clone():null),f0e(this);const s=this._pendingEditorState,a=this._updateTags,o=n!==void 0?n.tag:null;s===null||s.isEmpty()||(o!=null&&a.add(o),Pl(this)),this._pendingEditorState=r,this._dirtyType=jh,this._dirtyElements.set("root",!1),this._compositionKey=null,o!=null&&a.add(o),this._updating||Pl(this)}parseEditorState(t,n){return function(r,s,a){const o=OD(),i=Hr,c=ba,u=zr,d=s._dirtyElements,m=s._dirtyLeaves,h=s._cloneNotNeeded,p=s._dirtyType;s._dirtyElements=new Map,s._dirtyLeaves=new Set,s._cloneNotNeeded=new Set,s._dirtyType=0,Hr=o,ba=!1,zr=s;try{const g=s._nodes;ID(r.root,g),a&&a(),o._readOnly=!0}catch(g){g instanceof Error&&s._onError(g)}finally{s._dirtyElements=d,s._dirtyLeaves=m,s._cloneNotNeeded=h,s._dirtyType=p,Hr=i,ba=c,zr=u}return o}(typeof t=="string"?JSON.parse(t):t,this,n)}read(t){return Pl(this),this.getEditorState().read(t,{editor:this})}update(t,n){(function(r,s,a){r._updating?r._updates.push([s,a]):jD(r,s,a)})(this,t,n)}focus(t,n={}){const r=this._rootElement;r!==null&&(r.setAttribute("autocapitalize","off"),Ia(this,()=>{const s=Ze(),a=Kn();s!==null?s.dirty||Ps(s.clone()):a.getChildrenSize()!==0&&(n.defaultSelection==="rootStart"?a.selectStart():a.selectEnd()),TI("focus"),L1t(()=>{r.removeAttribute("autocapitalize"),t&&t()})}),this._pendingEditorState===null&&r.removeAttribute("autocapitalize"))}blur(){const t=this._rootElement;t!==null&&t.blur();const n=al(this._window);n!==null&&n.removeAllRanges()}isEditable(){return this._editable}setEditable(t){this._editable!==t&&(this._editable=t,Xy("editable",this,!0,t))}toJSON(){return{editorState:this._editorState.toJSON()}}}DE.version="0.31.0+prod.esm";let N1t=1;const A1t=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)};function BX(e){return Tn(Bh(e))}function a1e(e){const t=document.activeElement;if(!Tr(t))return!1;const n=t.nodeName;return Tn(Bh(e))&&(n==="INPUT"||n==="TEXTAREA"||t.contentEditable==="true"&&UE(t)==null)}function FE(e,t,n){const r=e.getRootElement();try{return r!==null&&r.contains(t)&&r.contains(n)&&t!==null&&!a1e(t)&&FD(t)===e}catch{return!1}}function DD(e){return e instanceof DE}function FD(e){let t=e;for(;t!=null;){const n=UE(t);if(DD(n))return n;t=N1(t)}return null}function UE(e){return e?e.__lexicalEditor:null}function am(e){return e.isToken()||e.isSegmented()}function Cc(e){return Kp(e)&&e.nodeType===N0t}function P1t(e){return Kp(e)&&e.nodeType===A0t}function Uh(e){let t=e;for(;t!=null;){if(Cc(t))return t;t=t.firstChild}return null}function Pw(e,t,n){const r=af[t];if(n!==null&&(e&r)==(n&r))return e;let s=e^r;return t==="subscript"?s&=-65:t==="superscript"?s&=-33:t==="lowercase"?(s&=-513,s&=-1025):t==="uppercase"?(s&=-257,s&=-1025):t==="capitalize"&&(s&=-257,s&=-513),s}function R1t(e,t){if(t!=null)return void(e.__key=t);_s(),K0e();const n=or(),r=Fu(),s=""+N1t++;r._nodeMap.set(s,e),Ee(e)?n._dirtyElements.set(s,!0):n._dirtyLeaves.add(s),n._cloneNotNeeded.add(s),n._dirtyType=i0e,e.__key=s}function Ld(e){const t=e.getParent();if(t!==null){const n=e.getWritable(),r=t.getWritable(),s=e.getPreviousSibling(),a=e.getNextSibling(),o=a!==null?a.__key:null,i=s!==null?s.__key:null,c=s!==null?s.getWritable():null,u=a!==null?a.getWritable():null;s===null&&(r.__first=o),a===null&&(r.__last=i),c!==null&&(c.__next=o),u!==null&&(u.__prev=i),n.__prev=null,n.__next=null,n.__parent=null,r.__size--}}function Rw(e){K0e();const t=e.getLatest(),n=t.__parent,r=Fu(),s=or(),a=r._nodeMap,o=s._dirtyElements;n!==null&&function(c,u,d){let m=c;for(;m!==null;){if(d.has(m))return;const h=u.get(m);if(h===void 0)break;d.set(m,!1),m=h.__parent}}(n,a,o);const i=t.__key;s._dirtyType=i0e,Ee(e)?o.set(i,!0):s._dirtyLeaves.add(i)}function ls(e){_s();const t=or(),n=t._compositionKey;if(e!==n){if(t._compositionKey=e,n!==null){const r=Gr(n);r!==null&&r.getWritable()}if(e!==null){const r=Gr(e);r!==null&&r.getWritable()}}}function Xc(){return k1()?null:or()._compositionKey}function Gr(e,t){const n=(t||Fu())._nodeMap.get(e);return n===void 0?null:n}function o1e(e,t){const n=BE(e,or());return n!==void 0?Gr(n,t):null}function BE(e,t){return e[`__lexicalKey_${t._key}`]}function Bh(e,t){let n=e;for(;n!=null;){const r=o1e(n,t);if(r!==null)return r;n=N1(n)}return null}function i1e(e){const t=e._decorators,n=Object.assign({},t);return e._pendingDecorators=n,n}function VX(e){return e.read(()=>Kn().getTextContent())}function Kn(){return l1e(Fu())}function l1e(e){return e._nodeMap.get("root")}function Ps(e){_s();const t=Fu();e!==null&&(e.dirty=!0,e.setCachedNodes(null)),t._selection=e}function _m(e){const t=or(),n=function(r,s){let a=r;for(;a!=null;){const o=BE(a,s);if(o!==void 0)return o;a=N1(a)}return null}(e,t);return n===null?e===t.getRootElement()?Gr("root"):null:Gr(n)}function $X(e,t){return t?e.getTextContentSize():0}function c1e(e){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(e)}function UD(e){const t=[];let n=e;for(;n!==null;)t.push(n),n=n._parentEditor;return t}function u1e(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,5)}function d1e(e){return Cc(e)?e.nodeValue:null}function BD(e,t,n){const r=al(go(t));if(r===null)return;const s=r.anchorNode;let{anchorOffset:a,focusOffset:o}=r;if(s!==null){let i=d1e(s);const c=Bh(s);if(i!==null&&Qe(c)){if(i===PE&&n){const u=n.length;i=n,a=u,o=u}i!==null&&VD(c,i,a,o,e)}}}function VD(e,t,n,r,s){let a=e;if(a.isAttached()&&(s||!a.isDirty())){const o=a.isComposing();let i=t;(o||s)&&t[t.length-1]===PE&&(i=t.slice(0,-1));const c=a.getTextContent();if(s||i!==c){if(i===""){if(ls(null),a0||Ih||bw)a.remove();else{const y=or();setTimeout(()=>{y.update(()=>{a.isAttached()&&a.remove()})},20)}return}const u=a.getParent(),d=T1(),m=a.getTextContentSize(),h=Xc(),p=a.getKey();if(a.isToken()||h!==null&&p===h&&!o||Re(d)&&(u!==null&&!u.canInsertTextBefore()&&d.anchor.offset===0||d.anchor.key===e.__key&&d.anchor.offset===0&&!a.canInsertTextBefore()&&!o||d.focus.key===e.__key&&d.focus.offset===m&&!a.canInsertTextAfter()&&!o))return void a.markDirty();const g=Ze();if(!Re(g)||n===null||r===null)return void a.setTextContent(i);if(g.setTextNodeRange(a,n,a,r),a.isSegmented()){const y=rr(a.getTextContent());a.replace(y),a=y}a.setTextContent(i)}}}function _b(e,t,n){const r=t[n]||!1;return r==="any"||r===e[n]}function I1t(e,t){return _b(e,t,"altKey")&&_b(e,t,"ctrlKey")&&_b(e,t,"shiftKey")&&_b(e,t,"metaKey")}function Nn(e,t,n){return I1t(e,n)&&e.key.toLowerCase()===t.toLowerCase()}const Tl={ctrlKey:!Mi,metaKey:Mi},WX={altKey:Mi,ctrlKey:!Mi};function HX(e){return e.key==="Backspace"}function zX(e){return Nn(e,"a",Tl)}function j1t(e){const t=Kn();if(Re(e)){const n=e.anchor,r=e.focus,s=n.getNode().getTopLevelElementOrThrow().getParentOrThrow();return n.set(s.getKey(),0,"element"),r.set(s.getKey(),s.getChildrenSize(),"element"),o0(e),e}{const n=t.select(0,t.getChildrenSize());return Ps(o0(n)),n}}function qm(e,t){e.__lexicalClassNameCache===void 0&&(e.__lexicalClassNameCache={});const n=e.__lexicalClassNameCache,r=n[t];if(r!==void 0)return r;const s=e[t];if(typeof s=="string"){const a=_w(s);return n[t]=a,a}return s}function $D(e,t,n,r,s){if(n.size===0)return;const a=r.__type,o=r.__key,i=t.get(a);i===void 0&&Ie(33,a);const c=i.klass;let u=e.get(c);u===void 0&&(u=new Map,e.set(c,u));const d=u.get(o),m=d==="destroyed"&&s==="created";(d===void 0||m)&&u.set(o,m?"updated":s)}function GX(e,t,n){const r=e.getParent();let s=n,a=e;return r!==null&&(n===0&&(s=a.getIndexWithinParent(),a=r)),a.getChildAtIndex(s-1)}function O1t(e,t){const n=e.offset;if(e.type==="element")return GX(e.getNode(),t,n);{const r=e.getNode();if(n===0){const s=r.getPreviousSibling();return s===null?GX(r.getParentOrThrow(),t,r.getIndexWithinParent()+0):s}}return null}function f1e(e){const t=go(e).event,n=t&&t.inputType;return n==="insertFromPaste"||n==="insertFromPasteAsQuotation"}function tt(e,t,n){return function(r,s,a){const o=UD(r);for(let i=4;i>=0;i--)for(let c=0;c<o.length;c++){const u=o[c],d=u._commands.get(s);if(d!==void 0){const m=d[i];if(m!==void 0){const h=Array.from(m),p=h.length;let g=!1;if(Ia(u,()=>{for(let y=0;y<p;y++)if(h[y](a,r))return void(g=!0)}),g)return g}}}return!1}(e,t,n)}function VE(e){return!Ms(e)&&!e.isLastChild()&&!e.isInline()}function Vh(e,t){const n=e._keyToDOMMap.get(t);return n===void 0&&Ie(75,t),n}function N1(e){const t=e.assignedSlot||e.parentElement;return AI(t)?t.host:t}function m1e(e){return P1t(e)?e:Tr(e)?e.ownerDocument:null}function TI(e){_s(),or()._updateTags.add(e)}function L1t(e){_s(),or()._deferred.push(e)}function kI(e,t){let n=e.getParent();for(;n!==null;){if(n.is(t))return!0;n=n.getParent()}return!1}function WD(e){const t=m1e(e);return t?t.defaultView:null}function go(e){const t=e._window;return t===null&&Ie(78),t}function D1t(e){let t=e.getParentOrThrow();for(;t!==null;){if(Zo(t))return t;t=t.getParentOrThrow()}return t}function Zo(e){return Ms(e)||Ee(e)&&e.isShadowRoot()}function Qa(e){const t=or(),n=e.constructor.getType(),r=t._nodes.get(n);r===void 0&&Ie(200,e.constructor.name,n);const{replace:s,replaceWithKlass:a}=r;if(s!==null){const o=s(e),i=o.constructor;return a!==null?o instanceof a||Ie(201,a.name,a.getType(),i.name,i.getType(),e.constructor.name,n):o instanceof e.constructor&&i!==e.constructor||Ie(202,i.name,i.getType(),e.constructor.name,n),o.__key===e.__key&&Ie(203,e.constructor.name,n,i.name,i.getType()),o}return e}function d5(e,t){!Ms(e.getParent())||Ee(t)||Tn(t)||Ie(99)}function F1t(e){const t=Gr(e);return t===null&&Ie(63,e),t}function f5(e){return(Tn(e)||Ee(e)&&!e.canBeEmpty())&&!e.isInline()}function NI(e,t,n){n.style.removeProperty("caret-color"),t._blockCursorElement=null;const r=e.parentElement;r!==null&&r.removeChild(e)}function al(e){return ui?(e||window).getSelection():null}function U1t(e){const t=WD(e);return t?t.getSelection():null}function HD(e){return Tr(e)&&e.tagName==="A"}function Tr(e){return Kp(e)&&e.nodeType===k0t}function Kp(e){return typeof e=="object"&&e!==null&&"nodeType"in e&&typeof e.nodeType=="number"}function AI(e){return Kp(e)&&e.nodeType===P0t}function PI(e){const t=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|mark|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return e.nodeName.match(t)!==null}function Iw(e){const t=new RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return e.nodeName.match(t)!==null}function zc(e){if(Tn(e)&&!e.isInline())return!0;if(!Ee(e)||Zo(e))return!1;const t=e.getFirstChild(),n=t===null||Od(t)||Qe(t)||t.isInline();return!e.isInline()&&e.canBeEmpty()!==!1&&n}function m5(e,t){let n=e;for(;n!==null&&n.getParent()!==null&&!t(n);)n=n.getParentOrThrow();return t(n)?n:null}function B1t(){return or()}const qX=new WeakMap,V1t=new Map;function KX(e){if(!e._readOnly&&e.isEmpty())return V1t;e._readOnly||Ie(192);let t=qX.get(e);return t||(t=function(n){const r=new Map;for(const[s,a]of n._nodeMap){const o=a.__type;let i=r.get(o);i||(i=new Map,r.set(o,i)),i.set(s,a)}return r}(e),qX.set(e,t)),t}function h1e(e){const t=e.constructor.clone(e);return t.afterCloneFrom(e),t}function zD(e,t){const n=parseInt(e.style.paddingInlineStart,10)||0,r=Math.round(n/40);t.setIndent(r)}function $1t(e){return e.__lexicalUnmanaged===!0}const W1t={next:"previous",previous:"next"};class GD{constructor(t){this.origin=t}[Symbol.iterator](){return p1e({hasNext:$h,initial:this.getAdjacentCaret(),map:t=>t,step:t=>t.getAdjacentCaret()})}getAdjacentCaret(){return ds(this.getNodeAtCaret(),this.direction)}getSiblingCaret(){return ds(this.origin,this.direction)}remove(){const t=this.getNodeAtCaret();return t&&t.remove(),this}replaceOrInsert(t,n){const r=this.getNodeAtCaret();return t.is(this.origin)||t.is(r)||(r===null?this.insert(t):r.replace(t,n)),this}splice(t,n,r="next"){const s=r===this.direction?n:Array.from(n).reverse();let a=this;const o=this.getParentAtCaret(),i=new Map;for(let c=a.getAdjacentCaret();c!==null&&i.size<t;c=c.getAdjacentCaret()){const u=c.origin.getWritable();i.set(u.getKey(),u)}for(const c of s){if(i.size>0){const u=a.getNodeAtCaret();if(u){if(i.delete(u.getKey()),i.delete(c.getKey()),!(u.is(c)||a.origin.is(c))){const d=c.getParent();d&&d.is(o)&&c.remove(),u.replace(c)}}else u===null&&Ie(263,Array.from(i).join(" "))}else a.insert(c);a=ds(c,this.direction)}for(const c of i.values())c.remove();return this}}class u0 extends GD{type="child";getLatest(){const t=this.origin.getLatest();return t===this.origin?this:Cu(t,this.direction)}getParentCaret(t="root"){return ds(qD(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=Yp(this.direction);return ds(this.getNodeAtCaret(),t)||Cu(this.origin,t)}getParentAtCaret(){return this.origin}getChildCaret(){return this}isSameNodeCaret(t){return t instanceof u0&&this.direction===t.direction&&this.origin.is(t.origin)}isSamePointCaret(t){return this.isSameNodeCaret(t)}}const H1t={root:Ms,shadowRoot:Zo};function Yp(e){return W1t[e]}function qD(e,t="root"){return H1t[t](e)?null:e}class lf extends GD{type="sibling";getLatest(){const t=this.origin.getLatest();return t===this.origin?this:ds(t,this.direction)}getSiblingCaret(){return this}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return Ee(this.origin)?Cu(this.origin,this.direction):null}getParentCaret(t="root"){return ds(qD(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=Yp(this.direction);return ds(this.getNodeAtCaret(),t)||Cu(this.origin.getParentOrThrow(),t)}isSamePointCaret(t){return t instanceof lf&&this.direction===t.direction&&this.origin.is(t.origin)}isSameNodeCaret(t){return(t instanceof lf||t instanceof cf)&&this.direction===t.direction&&this.origin.is(t.origin)}}class cf extends GD{type="text";constructor(t,n){super(t),this.offset=n}getLatest(){const t=this.origin.getLatest();return t===this.origin?this:uf(t,this.direction,this.offset)}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return null}getParentCaret(t="root"){return ds(qD(this.getParentAtCaret(),t),this.direction)}getFlipped(){return uf(this.origin,Yp(this.direction),this.offset)}isSamePointCaret(t){return t instanceof cf&&this.direction===t.direction&&this.origin.is(t.origin)&&this.offset===t.offset}isSameNodeCaret(t){return(t instanceof lf||t instanceof cf)&&this.direction===t.direction&&this.origin.is(t.origin)}getSiblingCaret(){return ds(this.origin,this.direction)}}function Dd(e){return e instanceof cf}function $h(e){return e instanceof lf}function Ki(e){return e instanceof u0}const z1t={next:class extends cf{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends cf{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},G1t={next:class extends lf{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends lf{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},q1t={next:class extends u0{direction="next";getNodeAtCaret(){return this.origin.getFirstChild()}insert(e){return this.origin.splice(0,0,[e]),this}},previous:class extends u0{direction="previous";getNodeAtCaret(){return this.origin.getLastChild()}insert(e){return this.origin.splice(this.origin.getChildrenSize(),0,[e]),this}}};function ds(e,t){return e?new G1t[t](e):null}function uf(e,t,n){return e?new z1t[t](e,$E(e,n)):null}function $E(e,t){const n=e.getTextContentSize();let r=t==="next"?n:t==="previous"?0:t;return(r<0||r>n)&&(function(s,...a){const o=new URL("https://lexical.dev/docs/error"),i=new URLSearchParams;i.append("code",s);for(const c of a)i.append("v",c);o.search=i.toString(),console.warn(`Minified Lexical warning #${s}; visit ${o.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(284,String(t),String(n),e.getKey()),r=r<0?0:n),r}function YX(e,t){return new Y1t(e,t)}function Cu(e,t){return Ee(e)?new q1t[t](e):null}function K1t(e){return e&&e.getChildCaret()||e}function KD(e){return e&&K1t(e.getAdjacentCaret())}class YD{type="node-caret-range";constructor(t,n,r){this.anchor=t,this.focus=n,this.direction=r}getLatest(){const t=this.anchor.getLatest(),n=this.focus.getLatest();return t===this.anchor&&n===this.focus?this:new YD(t,n,this.direction)}isCollapsed(){return this.anchor.isSamePointCaret(this.focus)}getTextSlices(){const t=s=>{const a=this[s].getLatest();return Dd(a)?function(o,i){const{direction:c,origin:u}=o,d=$E(u,i==="focus"?Yp(c):c);return YX(o,d-o.offset)}(a,s):null},n=t("anchor"),r=t("focus");if(n&&r){const{caret:s}=n,{caret:a}=r;if(s.isSameNodeCaret(a))return[YX(s,a.offset-s.offset),null]}return[n,r]}iterNodeCarets(t="root"){const n=Dd(this.anchor)?this.anchor.getSiblingCaret():this.anchor.getLatest(),r=this.focus.getLatest(),s=Dd(r),a=o=>o.isSameNodeCaret(r)?null:KD(o)||o.getParentCaret(t);return p1e({hasNext:o=>o!==null&&!(s&&r.isSameNodeCaret(o)),initial:n.isSameNodeCaret(r)?null:a(n),map:o=>o,step:a})}[Symbol.iterator](){return this.iterNodeCarets("root")}}class Y1t{type="slice";constructor(t,n){this.caret=t,this.distance=n}getSliceIndices(){const{distance:t,caret:{offset:n}}=this,r=n+t;return r<n?[r,n]:[n,r]}getTextContent(){const[t,n]=this.getSliceIndices();return this.caret.origin.getTextContent().slice(t,n)}getTextContentSize(){return Math.abs(this.distance)}removeTextSlice(){const{caret:{origin:t,direction:n}}=this,[r,s]=this.getSliceIndices(),a=t.getTextContent();return uf(t.setTextContent(a.slice(0,r)+a.slice(s)),n,r)}}function QD(e){return df(e,ds(Kn(),e.direction))}function Q1t(e){return df(e,e)}function df(e,t){return e.direction!==t.direction&&Ie(265),new YD(e,t,e.direction)}function p1e(e){const{initial:t,hasNext:n,step:r,map:s}=e;let a=t;return{[Symbol.iterator](){return this},next(){if(!n(a))return{done:!0,value:void 0};const o={done:!1,value:s(a)};return a=r(a),o}}}function g1e(e,t){const n=P_(e.origin,t.origin);switch(n===null&&Ie(275,e.origin.getKey(),t.origin.getKey()),n.type){case"same":{const r=e.type==="text",s=t.type==="text";return r&&s?function(a,o){return Math.sign(a-o)}(e.offset,t.offset):e.type===t.type?0:r?-1:s?1:e.type==="child"?-1:1}case"ancestor":return e.type==="child"?-1:1;case"descendant":return t.type==="child"?1:-1;case"branch":return y1e(n)}}function y1e(e){const{a:t,b:n}=e,r=t.__key,s=n.__key;let a=t,o=n;for(;a&&o;a=a.getNextSibling(),o=o.getNextSibling()){if(a.__key===s)return-1;if(o.__key===r)return 1}return a===null?1:-1}function wb(e,t){return t.is(e)}function QX(e){return Ee(e)?[e.getLatest(),null]:[e.getParent(),e.getLatest()]}function P_(e,t){if(e.is(t))return{commonAncestor:e,type:"same"};const n=new Map;for(let[r,s]=QX(e);r;s=r,r=r.getParent())n.set(r,s);for(let[r,s]=QX(t);r;s=r,r=r.getParent()){const a=n.get(r);if(a!==void 0)return a===null?(wb(e,r)||Ie(276),{commonAncestor:r,type:"ancestor"}):s===null?(wb(t,r)||Ie(277),{commonAncestor:r,type:"descendant"}):((Ee(a)||wb(e,a))&&(Ee(s)||wb(t,s))&&r.is(a.getParent())&&r.is(s.getParent())||Ie(278),{a,b:s,commonAncestor:r,type:"branch"})}return null}function Eu(e,t){const{type:n,key:r,offset:s}=e,a=F1t(e.key);return n==="text"?(Qe(a)||Ie(266,a.getType(),r),uf(a,t,s)):(Ee(a)||Ie(267,a.getType(),r),J1t(a,e.offset,t))}function d0(e,t){const{origin:n,direction:r}=t,s=r==="next";Dd(t)?e.set(n.getKey(),t.offset,"text"):$h(t)?Qe(n)?e.set(n.getKey(),$E(n,r),"text"):e.set(n.getParentOrThrow().getKey(),n.getIndexWithinParent()+(s?1:0),"element"):(Ki(t)&&Ee(n)||Ie(268),e.set(n.getKey(),s?0:n.getChildrenSize(),"element"))}function X1t(e){const t=Ze(),n=Re(t)?t:z0e();return R_(n,e),Ps(n),n}function R_(e,t){d0(e.anchor,t.anchor),d0(e.focus,t.focus)}function XX(e){const{anchor:t,focus:n}=e,r=Eu(t,"next"),s=Eu(n,"next"),a=g1e(r,s)<=0?"next":"previous";return df(Wh(r,a),Wh(s,a))}function XD(e){const{direction:t,origin:n}=e,r=ds(n,Yp(t)).getNodeAtCaret();return r?ds(r,t):Cu(n.getParentOrThrow(),t)}function ZX(e,t="root"){const n=[e];for(let r=Ki(e)?e.getParentCaret(t):e.getSiblingCaret();r!==null;r=r.getParentCaret(t))n.push(XD(r));return n}function h5(e){return!!e&&e.origin.isAttached()}function Z1t(e,t="removeEmptySlices"){if(e.isCollapsed())return e;const n="root",r="next";let s=t;const a=x1e(e,r),o=ZX(a.anchor,n),i=ZX(a.focus.getFlipped(),n),c=new Set,u=[];for(const g of a.iterNodeCarets(n))if(Ki(g))c.add(g.origin.getKey());else if($h(g)){const{origin:y}=g;Ee(y)&&!c.has(y.getKey())||u.push(y)}for(const g of u)g.remove();for(const g of a.getTextSlices()){if(!g)continue;const{origin:y}=g.caret,v=y.getTextContentSize(),x=XD(ds(y,r)),b=y.getMode();if(Math.abs(g.distance)===v&&s==="removeEmptySlices"||b==="token"&&g.distance!==0)x.remove();else if(g.distance!==0){s="removeEmptySlices";let _=g.removeTextSlice();const w=g.caret.origin;if(b==="segmented"){const S=_.origin,C=rr(S.getTextContent()).setStyle(S.getStyle()).setFormat(S.getFormat());x.replaceOrInsert(C),_=uf(C,r,_.offset)}w.is(o[0].origin)&&(o[0]=_),w.is(i[0].origin)&&(i[0]=_.getFlipped())}}let d,m;for(const g of o)if(h5(g)){d=Di(g);break}for(const g of i)if(h5(g)){m=Di(g);break}const h=function(g,y,v){if(!g||!y)return null;const x=g.getParentAtCaret(),b=y.getParentAtCaret();if(!x||!b)return null;const _=x.getParents().reverse();_.push(x);const w=b.getParents().reverse();w.push(b);const S=Math.min(_.length,w.length);let C;for(C=0;C<S&&_[C]===w[C];C++);const E=(I,j)=>{let N;for(let P=C;P<I.length;P++){const R=I[P];if(Zo(R))return;!N&&j(R)&&(N=R)}return N},M=E(_,zc),T=M&&E(w,I=>v.has(I.getKey())&&zc(I));return M&&T?[M,T]:null}(d,m,c);if(h){const[g,y]=h;Cu(g,"previous").splice(0,y.getChildren()),y.remove()}const p=[d,m,...o,...i].find(h5);if(p)return Q1t(Wh(Di(p),e.direction));Ie(269,JSON.stringify(o.map(g=>g.origin.__key)))}function Di(e){const t=function(s){let a=s;for(;Ki(a);){const o=KD(a);if(!Ki(o))break;a=o}return a}(e.getLatest()),{direction:n}=t;if(Qe(t.origin))return Dd(t)?t:uf(t.origin,n,n);const r=t.getAdjacentCaret();return $h(r)&&Qe(r.origin)?uf(r.origin,n,Yp(n)):t}function v1e(e){return Dd(e)&&e.offset!==$E(e.origin,e.direction)}function Wh(e,t){return e.direction===t?e:e.getFlipped()}function x1e(e,t){return e.direction===t?e:df(Wh(e.focus,t),Wh(e.anchor,t))}function J1t(e,t,n){let r=Cu(e,"next");for(let s=0;s<t;s++){const a=r.getAdjacentCaret();if(a===null)break;r=a}return Wh(r,n)}const RI=new Map;function b1e(e){const t={};if(!e)return t;const n=e.split(";");for(const r of n)if(r!==""){const[s,a]=r.split(/:([^]+)/);s&&a&&(t[s.trim()]=a.trim())}return t}function JX(e){let t=RI.get(e);return t===void 0&&(t=b1e(e),RI.set(e,t)),t}function ext(e,t){const n=e.getStartEndPoints();if(t.isSelected(e)&&!t.isSegmented()&&!t.isToken()&&n!==null){const[r,s]=n,a=e.isBackward(),o=r.getNode(),i=s.getNode(),c=t.is(o),u=t.is(i);if(c||u){const[d,m]=EI(e),h=o.is(i),p=t.is(a?i:o),g=t.is(a?o:i);let y,v=0;return h?(v=d>m?m:d,y=d>m?d:m):p?(v=a?m:d,y=void 0):g&&(v=0,y=a?d:m),t.__text=t.__text.slice(v,y),t}}return t}function txt(e){const t=e.getStyle(),n=b1e(t);RI.set(t,n)}function _1e(e){const t=e.anchor.getNode(),n=Ms(t)?t:t.getParentOrThrow(),r=B1t().getElementByKey(n.getKey());if(r===null)return!1;const s=r.ownerDocument.defaultView;return s===null?!1:s.getComputedStyle(r).writingMode==="vertical-rl"}function eZ(e,t){const n=_1e(e)?!t:t,r=Eu(e.focus,n?"previous":"next");if(v1e(r))return!1;for(const s of QD(r)){if(Ki(s))return!s.origin.isInline();if(!Ee(s.origin)){if(Tn(s.origin))return!0;break}}return!1}function nxt(e,t,n,r){e.modify(t?"extend":"move",n,r)}function rxt(e){const t=e.anchor.getNode();return(Ms(t)?t:t.getParentOrThrow()).getDirection()==="rtl"}function tZ(e,t,n){const r=rxt(e);let s;s=_1e(e)||r?!n:n,nxt(e,t,s,"character")}function sxt(e,...t){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",e);for(const s of t)r.append("v",s);throw n.search=r.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const ZD=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,axt=ZD&&"documentMode"in document?document.documentMode:null;!(!ZD||!("InputEvent"in window)||axt)&&"getTargetRanges"in new window.InputEvent("input");const oxt=ZD&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;function w1e(...e){const t=[];for(const n of e)if(n&&typeof n=="string")for(const[r]of n.matchAll(/\S+/g))t.push(r);return t}function Hh(...e){return()=>{for(let t=e.length-1;t>=0;t--)e[t]();e.length=0}}const ixt=oxt;function oc(e,...t){const n=w1e(...t);n.length>0&&e.classList.add(...n)}function JD(e,...t){const n=w1e(...t);n.length>0&&e.classList.remove(...n)}function lxt(e){return e?e.getAdjacentCaret():null}function cxt(e){const t=Km(e,n=>Ee(n)&&!n.isInline());return Ee(t)||sxt(4,e.__key),t}const Km=(e,t)=>{let n=e;for(;n!==Kn()&&n!=null;){if(t(n))return n;n=n.getParent()}return null};function jw(e,t){return e!==null&&Object.getPrototypeOf(e).constructor.name===t.name}function uxt(e,t){const n=t.body?t.body.childNodes:[];let r=[];const s=[];for(let a=0;a<n.length;a++){const o=n[a];if(!C1e.has(o.nodeName)){const i=E1e(o,e,s,!1);i!==null&&(r=r.concat(i))}}return function(a){for(const o of a)o.getNextSibling()instanceof LD&&o.insertAfter(po());for(const o of a){const i=o.getChildren();for(const c of i)o.insertBefore(c);o.remove()}}(s),r}function dxt(e,t){if(typeof document>"u"||typeof window>"u"&&global.window===void 0)throw new Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");const n=document.createElement("div"),r=Kn().getChildren();for(let s=0;s<r.length;s++)S1e(e,r[s],n,t);return n.innerHTML}function S1e(e,t,n,r=null){let s=r===null||t.isSelected(r);const a=Ee(t)&&t.excludeFromCopy("html");let o=t;if(r!==null){let p=h1e(t);p=Qe(p)&&r!==null?ext(r,p):p,o=p}const i=Ee(o)?o.getChildren():[],c=e._nodes.get(o.getType());let u;u=c&&c.exportDOM!==void 0?c.exportDOM(e,o):o.exportDOM(e);const{element:d,after:m}=u;if(!d)return!1;const h=document.createDocumentFragment();for(let p=0;p<i.length;p++){const g=i[p],y=S1e(e,g,h,r);!s&&Ee(t)&&y&&t.extractWithChild(g,r,"html")&&(s=!0)}if(s&&!a){if((Tr(d)||AI(d))&&d.append(h),n.append(d),m){const p=m.call(o,d);p&&(AI(d)?d.replaceChildren(p):d.replaceWith(p))}}else n.append(h);return s}const C1e=new Set(["STYLE","SCRIPT"]);function E1e(e,t,n,r,s=new Map,a){let o=[];if(C1e.has(e.nodeName))return o;let i=null;const c=function(g,y){const{nodeName:v}=g,x=y._htmlConversions.get(v.toLowerCase());let b=null;if(x!==void 0)for(const _ of x){const w=_(g);w!==null&&(b===null||(b.priority||0)<=(w.priority||0))&&(b=w)}return b!==null?b.conversion:null}(e,t),u=c?c(e):null;let d=null;if(u!==null){d=u.after;const g=u.node;if(i=Array.isArray(g)?g[g.length-1]:g,i!==null){for(const[,y]of s)if(i=y(i,a),!i)break;i&&o.push(...Array.isArray(g)?g:[i])}u.forChild!=null&&s.set(e.nodeName,u.forChild)}const m=e.childNodes;let h=[];const p=(i==null||!Zo(i))&&(i!=null&&MI(i)||r);for(let g=0;g<m.length;g++)h.push(...E1e(m[g],t,n,p,new Map(s),i));return d!=null&&(h=d(h)),Iw(e)&&(h=fxt(e,h,p?()=>{const g=new LD;return n.push(g),g}:br)),i==null?h.length>0?o=o.concat(h):Iw(e)&&function(g){return g.nextSibling==null||g.previousSibling==null?!1:PI(g.nextSibling)&&PI(g.previousSibling)}(e)&&(o=o.concat(po())):Ee(i)&&i.append(...h),o}function fxt(e,t,n){const r=e.style.textAlign,s=[];let a=[];for(let o=0;o<t.length;o++){const i=t[o];if(MI(i))r&&!i.getFormat()&&i.setFormat(r),s.push(i);else if(a.push(i),o===t.length-1||o<t.length-1&&MI(t[o+1])){const c=n();c.setFormat(r),c.append(...a),s.push(c),a=[]}}return s}function mxt(e,...t){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",e);for(const s of t)r.append("v",s);throw n.search=r.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function hxt(e,t=Ze()){return t==null&&mxt(166),Re(t)&&t.isCollapsed()||t.getNodes().length===0?"":dxt(e,t)}function nZ(e,t){const n=e.getData("text/plain")||e.getData("text/uri-list");n!=null&&t.insertRawText(n)}function rZ(e,t,n){const r=e.getData("application/x-lexical-editor");if(r)try{const i=JSON.parse(r);if(i.namespace===n._config.namespace&&Array.isArray(i.nodes))return II(n,pxt(i.nodes),t)}catch{}const s=e.getData("text/html"),a=e.getData("text/plain");if(s&&a!==s)try{const i=new DOMParser().parseFromString(function(c){return window.trustedTypes&&window.trustedTypes.createPolicy?window.trustedTypes.createPolicy("lexical",{createHTML:u=>u}).createHTML(c):c}(s),"text/html");return II(n,uxt(n,i),t)}catch{}const o=a||e.getData("text/uri-list");if(o!=null)if(Re(t)){const i=o.split(/(\r?\n|\t)/);i[i.length-1]===""&&i.pop();for(let c=0;c<i.length;c++){const u=Ze();if(Re(u)){const d=i[c];d===`
`||d===`\r
`?u.insertParagraph():d==="	"?u.insertNodes([M1()]):u.insertText(d)}}}else t.insertRawText(o)}function II(e,t,n){e.dispatchCommand(e1t,{nodes:t,selection:n})||n.insertNodes(t)}function pxt(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n],s=C1t(r);Qe(s)&&txt(s),t.push(s)}return t}const gxt=new Set(["http:","https:","mailto:","sms:","tel:"]);let Qp=class M1e extends pl{static getType(){return"link"}static clone(t){return new M1e(t.__url,{rel:t.__rel,target:t.__target,title:t.__title},t.__key)}constructor(t="",n={},r){super(r);const{target:s=null,rel:a=null,title:o=null}=n;this.__url=t,this.__target=s,this.__rel=a,this.__title=o}createDOM(t){const n=document.createElement("a");return n.href=this.sanitizeUrl(this.__url),this.__target!==null&&(n.target=this.__target),this.__rel!==null&&(n.rel=this.__rel),this.__title!==null&&(n.title=this.__title),oc(n,t.theme.link),n}updateDOM(t,n,r){if(HD(n)){const s=this.__url,a=this.__target,o=this.__rel,i=this.__title;s!==t.__url&&(n.href=s),a!==t.__target&&(a?n.target=a:n.removeAttribute("target")),o!==t.__rel&&(o?n.rel=o:n.removeAttribute("rel")),i!==t.__title&&(i?n.title=i:n.removeAttribute("title"))}return!1}static importDOM(){return{a:t=>({conversion:yxt,priority:1})}}static importJSON(t){return zh().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setURL(t.url).setRel(t.rel||null).setTarget(t.target||null).setTitle(t.title||null)}sanitizeUrl(t){try{const n=new URL(t);if(!gxt.has(n.protocol))return"about:blank"}catch{return t}return t}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),url:this.getURL()}}getURL(){return this.getLatest().__url}setURL(t){const n=this.getWritable();return n.__url=t,n}getTarget(){return this.getLatest().__target}setTarget(t){const n=this.getWritable();return n.__target=t,n}getRel(){return this.getLatest().__rel}setRel(t){const n=this.getWritable();return n.__rel=t,n}getTitle(){return this.getLatest().__title}setTitle(t){const n=this.getWritable();return n.__title=t,n}insertNewAfter(t,n=!0){const r=zh(this.__url,{rel:this.__rel,target:this.__target,title:this.__title});return this.insertAfter(r,n),r}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(t,n,r){if(!Re(n))return!1;const s=n.anchor.getNode(),a=n.focus.getNode();return this.isParentOf(s)&&this.isParentOf(a)&&n.getTextContent().length>0}isEmailURI(){return this.__url.startsWith("mailto:")}isWebSiteURI(){return this.__url.startsWith("https://")||this.__url.startsWith("http://")}};function yxt(e){let t=null;if(HD(e)){const n=e.textContent;(n!==null&&n!==""||e.children.length>0)&&(t=zh(e.getAttribute("href")||"",{rel:e.getAttribute("rel"),target:e.getAttribute("target"),title:e.getAttribute("title")}))}return{node:t}}function zh(e="",t){return Qa(new Qp(e,t))}function Si(e){return e instanceof Qp}let eF=class T1e extends Qp{constructor(t="",n={},r){super(t,n,r),this.__isUnlinked=n.isUnlinked!==void 0&&n.isUnlinked!==null&&n.isUnlinked}static getType(){return"autolink"}static clone(t){return new T1e(t.__url,{isUnlinked:t.__isUnlinked,rel:t.__rel,target:t.__target,title:t.__title},t.__key)}getIsUnlinked(){return this.__isUnlinked}setIsUnlinked(t){const n=this.getWritable();return n.__isUnlinked=t,n}createDOM(t){return this.__isUnlinked?document.createElement("span"):super.createDOM(t)}updateDOM(t,n,r){return super.updateDOM(t,n,r)||t.__isUnlinked!==this.__isUnlinked}static importJSON(t){return sZ().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setIsUnlinked(t.isUnlinked||!1)}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),isUnlinked:this.__isUnlinked}}insertNewAfter(t,n=!0){const r=this.getParentOrThrow().insertNewAfter(t,n);if(Ee(r)){const s=sZ(this.__url,{isUnlinked:this.__isUnlinked,rel:this.__rel,target:this.__target,title:this.__title});return r.append(s),s}return null}};function sZ(e="",t){return Qa(new eF(e,t))}function Sb(e){return e instanceof eF}const HWt=Bt("TOGGLE_LINK_COMMAND");function aZ(e,t){if(e.type==="element"){const n=e.getNode();return Ee(n)||function(r,...s){const a=new URL("https://lexical.dev/docs/error"),o=new URLSearchParams;o.append("code",r);for(const i of s)o.append("v",i);throw a.search=o.toString(),Error(`Minified Lexical error #${r}; visit ${a.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(252),n.getChildren()[e.offset+t]||null}return null}function zWt(e,t={}){const{target:n,title:r}=t,s=t.rel===void 0?"noreferrer":t.rel,a=Ze();if(a===null||!Re(a)&&!au(a))return;if(au(a)){const u=a.getNodes();return u.length===0?void 0:void u.forEach(d=>{if(e===null){const m=Km(d,h=>!Sb(h)&&Si(h));m&&(m.insertBefore(d),m.getChildren().length===0&&m.remove())}else{const m=Km(d,h=>!Sb(h)&&Si(h));if(m)m.setURL(e),n!==void 0&&m.setTarget(n),s!==void 0&&m.setRel(s);else{const h=zh(e,{rel:s,target:n});d.insertBefore(h),h.append(d)}}})}const o=a.extract();if(e===null)return void o.forEach(u=>{const d=Km(u,m=>!Sb(m)&&Si(m));if(d){const m=d.getChildren();for(let h=0;h<m.length;h++)d.insertBefore(m[h]);d.remove()}});const i=new Set,c=u=>{i.has(u.getKey())||(i.add(u.getKey()),u.setURL(e),n!==void 0&&u.setTarget(n),s!==void 0&&u.setRel(s),r!==void 0&&u.setTitle(r))};if(o.length===1){const u=oZ(o[0],Si);if(u!==null)return c(u)}(function(u){const d=Ze();if(!Re(d))return u();const m=o0(d),h=m.isBackward(),p=aZ(m.anchor,h?-1:0),g=aZ(m.focus,h?0:-1);if(u(),p||g){const y=Ze();if(Re(y)){const v=y.clone();if(p){const x=p.getParent();x&&v.anchor.set(x.getKey(),p.getIndexWithinParent()+(h?1:0),"element")}if(g){const x=g.getParent();x&&v.focus.set(x.getKey(),g.getIndexWithinParent()+(h?0:1),"element")}Ps(o0(v))}}})(()=>{let u=null;for(const d of o){if(!d.isAttached())continue;const m=oZ(d,Si);if(m){c(m);continue}if(Ee(d)){if(!d.isInline())continue;if(Si(d)){if(!(Sb(d)||u!==null&&u.getParentOrThrow().isParentOf(d))){c(d),u=d;continue}for(const p of d.getChildren())d.insertBefore(p);d.remove();continue}}const h=d.getPreviousSibling();Si(h)&&h.is(u)?h.append(d):(u=zh(e,{rel:s,target:n,title:r}),d.insertAfter(u),u.append(d))}})}function oZ(e,t){let n=e;for(;n!==null&&n.getParent()!==null&&!t(n);)n=n.getParentOrThrow();return t(n)?n:null}function gd(e,...t){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",e);for(const s of t)r.append("v",s);throw n.search=r.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function vxt(e){let t=1,n=e.getParent();for(;n!=null;){if(is(n)){const r=n.getParent();if(Mn(r)){t++,n=r.getParent();continue}gd(40)}return t}return t}function Ni(e){return is(e)&&Mn(e.getFirstChild())}function iZ(e){return ol().append(e)}function k1e(e,t){e.splice(e.getChildrenSize(),0,t)}function tF(e,t){const n=e.getLastChild(),r=t.getFirstChild();n&&r&&Ni(n)&&Ni(r)&&(tF(n.getFirstChild(),r.getFirstChild()),r.remove());const s=t.getChildren();s.length>0&&e.append(...s),t.remove()}function xxt(e){const t=new Set;if(Ni(e)||t.has(e.getKey()))return;const n=e.getParent(),r=e.getNextSibling(),s=e.getPreviousSibling();if(Ni(r)&&Ni(s)){const a=s.getFirstChild();if(Mn(a)){a.append(e);const o=r.getFirstChild();Mn(o)&&(k1e(a,o.getChildren()),r.remove(),t.add(r.getKey()))}}else if(Ni(r)){const a=r.getFirstChild();if(Mn(a)){const o=a.getFirstChild();o!==null&&o.insertBefore(e)}}else if(Ni(s)){const a=s.getFirstChild();Mn(a)&&a.append(e)}else if(Mn(n)){const a=ol().setTextFormat(n.getTextFormat()).setTextStyle(n.getTextStyle()),o=Vo(n.getListType()).setTextFormat(n.getTextFormat()).setTextStyle(n.getTextStyle());a.append(o),o.append(e),s?s.insertAfter(a):r?r.insertBefore(a):n.append(a)}}function bxt(e){if(Ni(e))return;const t=e.getParent(),n=t?t.getParent():void 0;if(Mn(n?n.getParent():void 0)&&is(n)&&Mn(t)){const r=t?t.getFirstChild():void 0,s=t?t.getLastChild():void 0;if(e.is(r))n.insertBefore(e),t.isEmpty()&&n.remove();else if(e.is(s))n.insertAfter(e),t.isEmpty()&&n.remove();else{const a=t.getListType(),o=ol(),i=Vo(a);o.append(i),e.getPreviousSiblings().forEach(d=>i.append(d));const c=ol(),u=Vo(a);c.append(u),k1e(u,e.getNextSiblings()),n.insertBefore(o),n.insertAfter(c),n.replace(e)}}}function Ow(...e){const t=[];for(const n of e)if(n&&typeof n=="string")for(const[r]of n.matchAll(/\S+/g))t.push(r);return t}function lZ(e,t,n){const r=JX(t.__textStyle);for(const s in r)e.style.setProperty(`--listitem-marker-${s}`,r[s]);if(n)for(const s in JX(n.__textStyle))s in r||e.style.removeProperty(`--listitem-marker-${s}`)}let WE=class N1e extends pl{static getType(){return"listitem"}static clone(t){return new N1e(t.__value,t.__checked,t.__key)}constructor(t,n,r){super(r),this.__value=t===void 0?1:t,this.__checked=n}createDOM(t){const n=document.createElement("li"),r=this.getParent();Mn(r)&&r.getListType()==="check"&&uZ(n,this,null),n.value=this.__value,cZ(n,t.theme,this);const s=this.__style;return s&&(n.style.cssText=s),lZ(n,this,null),n}updateDOM(t,n,r){const s=this.getParent();Mn(s)&&s.getListType()==="check"&&uZ(n,this,t),n.value=this.__value,cZ(n,r.theme,this);const a=t.__style,o=this.__style;return a!==o&&(o===""?n.removeAttribute("style"):n.style.cssText=o),lZ(n,this,t),!1}static transform(){return t=>{if(is(t)||gd(144),t.__checked==null)return;const n=t.getParent();Mn(n)&&n.getListType()!=="check"&&t.getChecked()!=null&&t.setChecked(void 0)}}static importDOM(){return{li:()=>({conversion:_xt,priority:0})}}static importJSON(t){return ol().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setValue(t.value).setChecked(t.checked)}exportDOM(t){const n=this.createDOM(t._config);n.style.textAlign=this.getFormatType();const r=this.getDirection();return r&&(n.dir=r),{element:n}}exportJSON(){return{...super.exportJSON(),checked:this.getChecked(),value:this.getValue()}}append(...t){for(let n=0;n<t.length;n++){const r=t[n];if(Ee(r)&&this.canMergeWith(r)){const s=r.getChildren();this.append(...s),r.remove()}else super.append(r)}return this}replace(t,n){if(is(t))return super.replace(t);this.setIndent(0);const r=this.getParentOrThrow();if(!Mn(r))return t;if(r.__first===this.getKey())r.insertBefore(t);else if(r.__last===this.getKey())r.insertAfter(t);else{const s=Vo(r.getListType());let a=this.getNextSibling();for(;a;){const o=a;a=a.getNextSibling(),s.append(o)}r.insertAfter(t),t.insertAfter(s)}return n&&(Ee(t)||gd(139),this.getChildren().forEach(s=>{t.append(s)})),this.remove(),r.getChildrenSize()===0&&r.remove(),t}insertAfter(t,n=!0){const r=this.getParentOrThrow();if(Mn(r)||gd(39),is(t))return super.insertAfter(t,n);const s=this.getNextSiblings();if(r.insertAfter(t,n),s.length!==0){const a=Vo(r.getListType());s.forEach(o=>a.append(o)),t.insertAfter(a,n)}return t}remove(t){const n=this.getPreviousSibling(),r=this.getNextSibling();super.remove(t),n&&r&&Ni(n)&&Ni(r)&&(tF(n.getFirstChild(),r.getFirstChild()),r.remove())}insertNewAfter(t,n=!0){const r=ol().updateFromJSON(this.exportJSON()).setChecked(!this.getChecked()&&void 0);return this.insertAfter(r,n),r}collapseAtStart(t){const n=br();this.getChildren().forEach(o=>n.append(o));const r=this.getParentOrThrow(),s=r.getParentOrThrow(),a=is(s);if(r.getChildrenSize()===1)if(a)r.remove(),s.select();else{r.insertBefore(n),r.remove();const o=t.anchor,i=t.focus,c=n.getKey();o.type==="element"&&o.getNode().is(this)&&o.set(c,o.offset,"element"),i.type==="element"&&i.getNode().is(this)&&i.set(c,i.offset,"element")}else r.insertBefore(n),this.remove();return!0}getValue(){return this.getLatest().__value}setValue(t){const n=this.getWritable();return n.__value=t,n}getChecked(){const t=this.getLatest();let n;const r=this.getParent();return Mn(r)&&(n=r.getListType()),n==="check"?!!t.__checked:void 0}setChecked(t){const n=this.getWritable();return n.__checked=t,n}toggleChecked(){const t=this.getWritable();return t.setChecked(!t.__checked)}getIndent(){const t=this.getParent();if(t===null||!this.isAttached())return this.getLatest().__indent;let n=t.getParentOrThrow(),r=0;for(;is(n);)n=n.getParentOrThrow().getParentOrThrow(),r++;return r}setIndent(t){typeof t!="number"&&gd(117),(t=Math.floor(t))>=0||gd(199);let n=this.getIndent();for(;n!==t;)n<t?(xxt(this),n++):(bxt(this),n--);return this}canInsertAfter(t){return is(t)}canReplaceWith(t){return is(t)}canMergeWith(t){return is(t)||Fh(t)}extractWithChild(t,n){if(!Re(n))return!1;const r=n.anchor.getNode(),s=n.focus.getNode();return this.isParentOf(r)&&this.isParentOf(s)&&this.getTextContent().length===n.getTextContent().length}isParentRequired(){return!0}createParentElementNode(){return Vo("bullet")}canMergeWhenEmpty(){return!0}};function cZ(e,t,n){const r=[],s=[],a=t.list,o=a?a.listitem:void 0;let i;if(a&&a.nested&&(i=a.nested.listitem),o!==void 0&&r.push(...Ow(o)),a){const c=n.getParent(),u=Mn(c)&&c.getListType()==="check",d=n.getChecked();u&&!d||s.push(a.listitemUnchecked),u&&d||s.push(a.listitemChecked),u&&r.push(d?a.listitemChecked:a.listitemUnchecked)}if(i!==void 0){const c=Ow(i);n.getChildren().some(u=>Mn(u))?r.push(...c):s.push(...c)}s.length>0&&JD(e,...s),r.length>0&&oc(e,...r)}function uZ(e,t,n,r){Mn(t.getFirstChild())?(e.removeAttribute("role"),e.removeAttribute("tabIndex"),e.removeAttribute("aria-checked")):(e.setAttribute("role","checkbox"),e.setAttribute("tabIndex","-1"),n&&t.__checked===n.__checked||e.setAttribute("aria-checked",t.getChecked()?"true":"false"))}function _xt(e){if(e.classList.contains("task-list-item")){for(const n of e.children)if(n.tagName==="INPUT")return wxt(n)}const t=e.getAttribute("aria-checked");return{node:ol(t==="true"||t!=="false"&&void 0)}}function wxt(e){return e.getAttribute("type")!=="checkbox"?{node:null}:{node:ol(e.hasAttribute("checked"))}}function ol(e){return Qa(new WE(void 0,e))}function is(e){return e instanceof WE}let HE=class A1e extends pl{static getType(){return"list"}static clone(t){const n=t.__listType||mZ[t.__tag];return new A1e(n,t.__start,t.__key)}constructor(t="number",n=1,r){super(r);const s=mZ[t]||t;this.__listType=s,this.__tag=s==="number"?"ol":"ul",this.__start=n}getTag(){return this.__tag}setListType(t){const n=this.getWritable();return n.__listType=t,n.__tag=t==="number"?"ol":"ul",n}getListType(){return this.__listType}getStart(){return this.__start}setStart(t){const n=this.getWritable();return n.__start=t,n}createDOM(t,n){const r=this.__tag,s=document.createElement(r);return this.__start!==1&&s.setAttribute("start",String(this.__start)),s.__lexicalListType=this.__listType,dZ(s,t.theme,this),s}updateDOM(t,n,r){return t.__tag!==this.__tag||(dZ(n,r.theme,this),!1)}static transform(){return t=>{Mn(t)||gd(163),function(n){const r=n.getNextSibling();Mn(r)&&n.getListType()===r.getListType()&&tF(n,r)}(t),function(n){const r=n.getListType()!=="check";let s=n.getStart();for(const a of n.getChildren())is(a)&&(a.getValue()!==s&&a.setValue(s),r&&a.getLatest().__checked!=null&&a.setChecked(void 0),Mn(a.getFirstChild())||s++)}(t)}}static importDOM(){return{ol:()=>({conversion:fZ,priority:0}),ul:()=>({conversion:fZ,priority:0})}}static importJSON(t){return Vo().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setListType(t.listType).setStart(t.start)}exportDOM(t){const n=this.createDOM(t._config,t);return Tr(n)&&(this.__start!==1&&n.setAttribute("start",String(this.__start)),this.__listType==="check"&&n.setAttribute("__lexicalListType","check")),{element:n}}exportJSON(){return{...super.exportJSON(),listType:this.getListType(),start:this.getStart(),tag:this.getTag()}}canBeEmpty(){return!1}canIndent(){return!1}splice(t,n,r){let s=r;for(let a=0;a<r.length;a++){const o=r[a];is(o)||(s===r&&(s=[...r]),s[a]=ol().append(!Ee(o)||Mn(o)||o.isInline()?o:rr(o.getTextContent())))}return super.splice(t,n,s)}extractWithChild(t){return is(t)}};function dZ(e,t,n){const r=[],s=[],a=t.list;if(a!==void 0){const o=a[`${n.__tag}Depth`]||[],i=vxt(n)-1,c=i%o.length,u=o[c],d=a[n.__tag];let m;const h=a.nested,p=a.checklist;if(h!==void 0&&h.list&&(m=h.list),d!==void 0&&r.push(d),p!==void 0&&n.__listType==="check"&&r.push(p),u!==void 0){r.push(...Ow(u));for(let g=0;g<o.length;g++)g!==c&&s.push(n.__tag+g)}if(m!==void 0){const g=Ow(m);i>1?r.push(...g):s.push(...g)}}s.length>0&&JD(e,...s),r.length>0&&oc(e,...r)}function Sxt(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n];if(is(r)){t.push(r);const s=r.getChildren();s.length>1&&s.forEach(a=>{Mn(a)&&t.push(iZ(a))})}else t.push(iZ(r))}return t}function fZ(e){const t=e.nodeName.toLowerCase();let n=null;return t==="ol"?n=Vo("number",e.start):t==="ul"&&(n=function(r){if(r.getAttribute("__lexicallisttype")==="check"||r.classList.contains("contains-task-list"))return!0;for(const s of r.childNodes)if(Tr(s)&&s.hasAttribute("aria-checked"))return!0;return!1}(e)?Vo("check"):Vo("bullet")),{after:Sxt,node:n}}const mZ={ol:"number",ul:"bullet"};function Vo(e="number",t=1){return Qa(new HE(e,t))}function Mn(e){return e instanceof HE}const P1e=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,Cxt=P1e&&"documentMode"in document?document.documentMode:null;!(!P1e||!("InputEvent"in window)||Cxt)&&"getTargetRanges"in new window.InputEvent("input");class A1 extends pl{static getType(){return"quote"}static clone(t){return new A1(t.__key)}createDOM(t){const n=document.createElement("blockquote");return oc(n,t.theme.quote),n}updateDOM(t,n){return!1}static importDOM(){return{blockquote:t=>({conversion:Ext,priority:0})}}exportDOM(t){const{element:n}=super.exportDOM(t);if(Tr(n)){this.isEmpty()&&n.append(document.createElement("br"));const r=this.getFormatType();n.style.textAlign=r;const s=this.getDirection();s&&(n.dir=s)}return{element:n}}static importJSON(t){return nF().updateFromJSON(t)}insertNewAfter(t,n){const r=br(),s=this.getDirection();return r.setDirection(s),this.insertAfter(r,n),r}collapseAtStart(){const t=br();return this.getChildren().forEach(n=>t.append(n)),this.replace(t),!0}canMergeWhenEmpty(){return!0}}function nF(){return Qa(new A1)}function jI(e){return e instanceof A1}let rF=class R1e extends pl{static getType(){return"heading"}static clone(t){return new R1e(t.__tag,t.__key)}constructor(t,n){super(n),this.__tag=t}getTag(){return this.__tag}setTag(t){const n=this.getWritable();return this.__tag=t,n}createDOM(t){const n=this.__tag,r=document.createElement(n),s=t.theme.heading;if(s!==void 0){const a=s[n];oc(r,a)}return r}updateDOM(t,n,r){return t.__tag!==this.__tag}static importDOM(){return{h1:t=>({conversion:zf,priority:0}),h2:t=>({conversion:zf,priority:0}),h3:t=>({conversion:zf,priority:0}),h4:t=>({conversion:zf,priority:0}),h5:t=>({conversion:zf,priority:0}),h6:t=>({conversion:zf,priority:0}),p:t=>{const n=t.firstChild;return n!==null&&hZ(n)?{conversion:()=>({node:null}),priority:3}:null},span:t=>hZ(t)?{conversion:n=>({node:wm("h1")}),priority:3}:null}}exportDOM(t){const{element:n}=super.exportDOM(t);if(Tr(n)){this.isEmpty()&&n.append(document.createElement("br"));const r=this.getFormatType();n.style.textAlign=r;const s=this.getDirection();s&&(n.dir=s)}return{element:n}}static importJSON(t){return wm(t.tag).updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setTag(t.tag)}exportJSON(){return{...super.exportJSON(),tag:this.getTag()}}insertNewAfter(t,n=!0){const r=t?t.anchor.offset:0,s=this.getLastDescendant(),a=!s||t&&t.anchor.key===s.getKey()&&r===s.getTextContentSize()||!t?br():wm(this.getTag()),o=this.getDirection();if(a.setDirection(o),this.insertAfter(a,n),r===0&&!this.isEmpty()&&t){const i=br();i.select(),this.replace(i,!0)}return a}collapseAtStart(){const t=this.isEmpty()?br():wm(this.getTag());return this.getChildren().forEach(n=>t.append(n)),this.replace(t),!0}extractWithChild(){return!0}};function hZ(e){return e.nodeName.toLowerCase()==="span"&&e.style.fontSize==="26pt"}function zf(e){const t=e.nodeName.toLowerCase();let n=null;return t!=="h1"&&t!=="h2"&&t!=="h3"&&t!=="h4"&&t!=="h5"&&t!=="h6"||(n=wm(t),e.style!==null&&(zD(e,n),n.setFormat(e.style.textAlign))),{node:n}}function Ext(e){const t=nF();return e.style!==null&&(t.setFormat(e.style.textAlign),zD(e,t)),{node:t}}function wm(e="h1"){return Qa(new rF(e))}function Mxt(e){return e instanceof rF}var p5={exports:{}},pZ;function Txt(){return pZ||(pZ=1,function(e){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var n=function(r){var s=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,a=0,o={},i={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function b(_){return _ instanceof c?new c(_.type,b(_.content),_.alias):Array.isArray(_)?_.map(b):_.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(b){return Object.prototype.toString.call(b).slice(8,-1)},objId:function(b){return b.__id||Object.defineProperty(b,"__id",{value:++a}),b.__id},clone:function b(_,w){w=w||{};var S,C;switch(i.util.type(_)){case"Object":if(C=i.util.objId(_),w[C])return w[C];S={},w[C]=S;for(var E in _)_.hasOwnProperty(E)&&(S[E]=b(_[E],w));return S;case"Array":return C=i.util.objId(_),w[C]?w[C]:(S=[],w[C]=S,_.forEach(function(M,T){S[T]=b(M,w)}),S);default:return _}},getLanguage:function(b){for(;b;){var _=s.exec(b.className);if(_)return _[1].toLowerCase();b=b.parentElement}return"none"},setLanguage:function(b,_){b.className=b.className.replace(RegExp(s,"gi"),""),b.classList.add("language-"+_)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(S){var b=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(S.stack)||[])[1];if(b){var _=document.getElementsByTagName("script");for(var w in _)if(_[w].src==b)return _[w]}return null}},isActive:function(b,_,w){for(var S="no-"+_;b;){var C=b.classList;if(C.contains(_))return!0;if(C.contains(S))return!1;b=b.parentElement}return!!w}},languages:{plain:o,plaintext:o,text:o,txt:o,extend:function(b,_){var w=i.util.clone(i.languages[b]);for(var S in _)w[S]=_[S];return w},insertBefore:function(b,_,w,S){S=S||i.languages;var C=S[b],E={};for(var M in C)if(C.hasOwnProperty(M)){if(M==_)for(var T in w)w.hasOwnProperty(T)&&(E[T]=w[T]);w.hasOwnProperty(M)||(E[M]=C[M])}var I=S[b];return S[b]=E,i.languages.DFS(i.languages,function(j,N){N===I&&j!=b&&(this[j]=E)}),E},DFS:function b(_,w,S,C){C=C||{};var E=i.util.objId;for(var M in _)if(_.hasOwnProperty(M)){w.call(_,M,_[M],S||M);var T=_[M],I=i.util.type(T);I==="Object"&&!C[E(T)]?(C[E(T)]=!0,b(T,w,null,C)):I==="Array"&&!C[E(T)]&&(C[E(T)]=!0,b(T,w,M,C))}}},plugins:{},highlightAll:function(b,_){i.highlightAllUnder(document,b,_)},highlightAllUnder:function(b,_,w){var S={callback:w,container:b,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};i.hooks.run("before-highlightall",S),S.elements=Array.prototype.slice.apply(S.container.querySelectorAll(S.selector)),i.hooks.run("before-all-elements-highlight",S);for(var C=0,E;E=S.elements[C++];)i.highlightElement(E,_===!0,S.callback)},highlightElement:function(b,_,w){var S=i.util.getLanguage(b),C=i.languages[S];i.util.setLanguage(b,S);var E=b.parentElement;E&&E.nodeName.toLowerCase()==="pre"&&i.util.setLanguage(E,S);var M=b.textContent,T={element:b,language:S,grammar:C,code:M};function I(N){T.highlightedCode=N,i.hooks.run("before-insert",T),T.element.innerHTML=T.highlightedCode,i.hooks.run("after-highlight",T),i.hooks.run("complete",T),w&&w.call(T.element)}if(i.hooks.run("before-sanity-check",T),E=T.element.parentElement,E&&E.nodeName.toLowerCase()==="pre"&&!E.hasAttribute("tabindex")&&E.setAttribute("tabindex","0"),!T.code){i.hooks.run("complete",T),w&&w.call(T.element);return}if(i.hooks.run("before-highlight",T),!T.grammar){I(i.util.encode(T.code));return}if(_&&r.Worker){var j=new Worker(i.filename);j.onmessage=function(N){I(N.data)},j.postMessage(JSON.stringify({language:T.language,code:T.code,immediateClose:!0}))}else I(i.highlight(T.code,T.grammar,T.language))},highlight:function(b,_,w){var S={code:b,grammar:_,language:w};if(i.hooks.run("before-tokenize",S),!S.grammar)throw new Error('The language "'+S.language+'" has no grammar.');return S.tokens=i.tokenize(S.code,S.grammar),i.hooks.run("after-tokenize",S),c.stringify(i.util.encode(S.tokens),S.language)},tokenize:function(b,_){var w=_.rest;if(w){for(var S in w)_[S]=w[S];delete _.rest}var C=new m;return h(C,C.head,b),d(b,C,_,C.head,0),g(C)},hooks:{all:{},add:function(b,_){var w=i.hooks.all;w[b]=w[b]||[],w[b].push(_)},run:function(b,_){var w=i.hooks.all[b];if(!(!w||!w.length))for(var S=0,C;C=w[S++];)C(_)}},Token:c};r.Prism=i;function c(b,_,w,S){this.type=b,this.content=_,this.alias=w,this.length=(S||"").length|0}c.stringify=function b(_,w){if(typeof _=="string")return _;if(Array.isArray(_)){var S="";return _.forEach(function(I){S+=b(I,w)}),S}var C={type:_.type,content:b(_.content,w),tag:"span",classes:["token",_.type],attributes:{},language:w},E=_.alias;E&&(Array.isArray(E)?Array.prototype.push.apply(C.classes,E):C.classes.push(E)),i.hooks.run("wrap",C);var M="";for(var T in C.attributes)M+=" "+T+'="'+(C.attributes[T]||"").replace(/"/g,"&quot;")+'"';return"<"+C.tag+' class="'+C.classes.join(" ")+'"'+M+">"+C.content+"</"+C.tag+">"};function u(b,_,w,S){b.lastIndex=_;var C=b.exec(w);if(C&&S&&C[1]){var E=C[1].length;C.index+=E,C[0]=C[0].slice(E)}return C}function d(b,_,w,S,C,E){for(var M in w)if(!(!w.hasOwnProperty(M)||!w[M])){var T=w[M];T=Array.isArray(T)?T:[T];for(var I=0;I<T.length;++I){if(E&&E.cause==M+","+I)return;var j=T[I],N=j.inside,P=!!j.lookbehind,R=!!j.greedy,k=j.alias;if(R&&!j.pattern.global){var O=j.pattern.toString().match(/[imsuy]*$/)[0];j.pattern=RegExp(j.pattern.source,O+"g")}for(var L=j.pattern||j,F=S.next,U=C;F!==_.tail&&!(E&&U>=E.reach);U+=F.value.length,F=F.next){var V=F.value;if(_.length>b.length)return;if(!(V instanceof c)){var W=1,H;if(R){if(H=u(L,U,b,P),!H||H.index>=b.length)break;var q=H.index,G=H.index+H[0].length,K=U;for(K+=F.value.length;q>=K;)F=F.next,K+=F.value.length;if(K-=F.value.length,U=K,F.value instanceof c)continue;for(var $=F;$!==_.tail&&(K<G||typeof $.value=="string");$=$.next)W++,K+=$.value.length;W--,V=b.slice(U,K),H.index-=U}else if(H=u(L,0,V,P),!H)continue;var q=H.index,Z=H[0],se=V.slice(0,q),Y=V.slice(q+Z.length),Q=U+V.length;E&&Q>E.reach&&(E.reach=Q);var re=F.prev;se&&(re=h(_,re,se),U+=se.length),p(_,re,W);var te=new c(M,N?i.tokenize(Z,N):Z,k,Z);if(F=h(_,re,te),Y&&h(_,F,Y),W>1){var le={cause:M+","+I,reach:Q};d(b,_,w,F.prev,U,le),E&&le.reach>E.reach&&(E.reach=le.reach)}}}}}}function m(){var b={value:null,prev:null,next:null},_={value:null,prev:b,next:null};b.next=_,this.head=b,this.tail=_,this.length=0}function h(b,_,w){var S=_.next,C={value:w,prev:_,next:S};return _.next=C,S.prev=C,b.length++,C}function p(b,_,w){for(var S=_.next,C=0;C<w&&S!==b.tail;C++)S=S.next;_.next=S,S.prev=_,b.length-=C}function g(b){for(var _=[],w=b.head.next;w!==b.tail;)_.push(w.value),w=w.next;return _}if(!r.document)return r.addEventListener&&(i.disableWorkerMessageHandler||r.addEventListener("message",function(b){var _=JSON.parse(b.data),w=_.language,S=_.code,C=_.immediateClose;r.postMessage(i.highlight(S,i.languages[w],w)),C&&r.close()},!1)),i;var y=i.util.currentScript();y&&(i.filename=y.src,y.hasAttribute("data-manual")&&(i.manual=!0));function v(){i.manual||i.highlightAll()}if(!i.manual){var x=document.readyState;x==="loading"||x==="interactive"&&y&&y.defer?document.addEventListener("DOMContentLoaded",v):window.requestAnimationFrame?window.requestAnimationFrame(v):window.setTimeout(v,16)}return i}(t);e.exports&&(e.exports=n),typeof La<"u"&&(La.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(r){r.type==="entity"&&(r.attributes.title=r.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(s,a){var o={};o["language-"+a]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[a]},o.cdata=/^<!\[CDATA\[|\]\]>$/i;var i={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:o}};i["language-"+a]={pattern:/[\s\S]+/,inside:n.languages[a]};var c={};c[s]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return s}),"i"),lookbehind:!0,greedy:!0,inside:i},n.languages.insertBefore("markup","cdata",c)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(r,s){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+r+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[s,"language-"+s],inside:n.languages[s]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,function(r){var s=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+s.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+s.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+s.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+s.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:s,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css;var a=r.languages.markup;a&&(a.tag.addInlined("style","css"),a.tag.addAttribute("style","css"))}(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,function(){if(typeof n>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var r="Loading",s=function(y,v){return" Error "+y+" while fetching file: "+v},a=" Error: File does not exist or is empty",o={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},i="data-src-status",c="loading",u="loaded",d="failed",m="pre[data-src]:not(["+i+'="'+u+'"]):not(['+i+'="'+c+'"])';function h(y,v,x){var b=new XMLHttpRequest;b.open("GET",y,!0),b.onreadystatechange=function(){b.readyState==4&&(b.status<400&&b.responseText?v(b.responseText):b.status>=400?x(s(b.status,b.statusText)):x(a))},b.send(null)}function p(y){var v=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(y||"");if(v){var x=Number(v[1]),b=v[2],_=v[3];return b?_?[x,Number(_)]:[x,void 0]:[x,x]}}n.hooks.add("before-highlightall",function(y){y.selector+=", "+m}),n.hooks.add("before-sanity-check",function(y){var v=y.element;if(v.matches(m)){y.code="",v.setAttribute(i,c);var x=v.appendChild(document.createElement("CODE"));x.textContent=r;var b=v.getAttribute("data-src"),_=y.language;if(_==="none"){var w=(/\.(\w+)$/.exec(b)||[,"none"])[1];_=o[w]||w}n.util.setLanguage(x,_),n.util.setLanguage(v,_);var S=n.plugins.autoloader;S&&S.loadLanguages(_),h(b,function(C){v.setAttribute(i,u);var E=p(v.getAttribute("data-range"));if(E){var M=C.split(/\r\n?|\n/g),T=E[0],I=E[1]==null?M.length:E[1];T<0&&(T+=M.length),T=Math.max(0,Math.min(T-1,M.length)),I<0&&(I+=M.length),I=Math.max(0,Math.min(I,M.length)),C=M.slice(T,I).join(`
`),v.hasAttribute("data-start")||v.setAttribute("data-start",String(T+1))}x.textContent=C,n.highlightElement(x)},function(C){v.setAttribute(i,d),x.textContent=C})}}),n.plugins.fileHighlight={highlight:function(v){for(var x=(v||document).querySelectorAll(m),b=0,_;_=x[b++];)n.highlightElement(_)}};var g=!1;n.fileHighlight=function(){g||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),g=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}}()}(p5)),p5.exports}Txt();Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/};Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;Prism.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]};Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity;Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup;Prism.hooks.add("wrap",function(e){e.type==="entity"&&(e.attributes.title=e.content.replace(/&amp;/,"&"))});Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function(t,n){var r={};r["language-"+n]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[n]},r.cdata=/^<!\[CDATA\[|\]\]>$/i;var s={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:r}};s["language-"+n]={pattern:/[\s\S]+/,inside:Prism.languages[n]};var a={};a[t]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return t}),"i"),lookbehind:!0,greedy:!0,inside:s},Prism.languages.insertBefore("markup","cdata",a)}});Object.defineProperty(Prism.languages.markup.tag,"addAttribute",{value:function(e,t){Prism.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:Prism.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}});Prism.languages.html=Prism.languages.markup;Prism.languages.mathml=Prism.languages.markup;Prism.languages.svg=Prism.languages.markup;Prism.languages.xml=Prism.languages.extend("markup",{});Prism.languages.ssml=Prism.languages.xml;Prism.languages.atom=Prism.languages.xml;Prism.languages.rss=Prism.languages.xml;(function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function n(d){return d=d.replace(/<inner>/g,function(){return t}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+d+")")}var r=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,s=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return r}),a=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+s+a+"(?:"+s+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+s+a+")(?:"+s+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(r),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+s+")"+a+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+s+"$"),inside:{"table-header":{pattern:RegExp(r),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(d){["url","bold","italic","strike","code-snippet"].forEach(function(m){d!==m&&(e.languages.markdown[d].inside.content.inside[m]=e.languages.markdown[m])})}),e.hooks.add("after-tokenize",function(d){if(d.language!=="markdown"&&d.language!=="md")return;function m(h){if(!(!h||typeof h=="string"))for(var p=0,g=h.length;p<g;p++){var y=h[p];if(y.type!=="code"){m(y.content);continue}var v=y.content[1],x=y.content[3];if(v&&x&&v.type==="code-language"&&x.type==="code-block"&&typeof v.content=="string"){var b=v.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");b=(/[a-z][\w-]*/i.exec(b)||[""])[0].toLowerCase();var _="language-"+b;x.alias?typeof x.alias=="string"?x.alias=[x.alias,_]:x.alias.push(_):x.alias=[_]}}}m(d.tokens)}),e.hooks.add("wrap",function(d){if(d.type==="code-block"){for(var m="",h=0,p=d.classes.length;h<p;h++){var g=d.classes[h],y=/language-(.+)/.exec(g);if(y){m=y[1];break}}var v=e.languages[m];if(v)d.content=e.highlight(u(d.content),v,m);else if(m&&m!=="none"&&e.plugins.autoloader){var x="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);d.attributes.id=x,e.plugins.autoloader.loadLanguages(m,function(){var b=document.getElementById(x);b&&(b.innerHTML=e.highlight(b.textContent,e.languages[m],m))})}}});var o=RegExp(e.languages.markup.tag.pattern.source,"gi"),i={amp:"&",lt:"<",gt:">",quot:'"'},c=String.fromCodePoint||String.fromCharCode;function u(d){var m=d.replace(o,"");return m=m.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(h,p){if(p=p.toLowerCase(),p[0]==="#"){var g;return p[1]==="x"?g=parseInt(p.slice(2),16):g=Number(p.slice(1)),c(g)}else{var y=i[p];return y||h}}),m}e.languages.md=e.languages.markdown})(Prism);Prism.languages.c=Prism.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/});Prism.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}});Prism.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Prism.languages.c.string],char:Prism.languages.c.char,comment:Prism.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Prism.languages.c}}}});Prism.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/});delete Prism.languages.c.boolean;(function(e){var t=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+t.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+t.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:t,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css;var n=e.languages.markup;n&&(n.tag.addInlined("style","css"),n.tag.addAttribute("style","css"))})(Prism);Prism.languages.objectivec=Prism.languages.extend("c",{string:{pattern:/@?"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},keyword:/\b(?:asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|in|inline|int|long|register|return|self|short|signed|sizeof|static|struct|super|switch|typedef|typeof|union|unsigned|void|volatile|while)\b|(?:@interface|@end|@implementation|@protocol|@class|@public|@protected|@private|@property|@try|@catch|@finally|@throw|@synthesize|@dynamic|@selector)\b/,operator:/-[->]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|\|?|[~^%?*\/@]/});delete Prism.languages.objectivec["class-name"];Prism.languages.objc=Prism.languages.objectivec;Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};(function(e){var t=e.languages.powershell={comment:[{pattern:/(^|[^`])<#[\s\S]*?#>/,lookbehind:!0},{pattern:/(^|[^`])#.*/,lookbehind:!0}],string:[{pattern:/"(?:`[\s\S]|[^`"])*"/,greedy:!0,inside:null},{pattern:/'(?:[^']|'')*'/,greedy:!0}],namespace:/\[[a-z](?:\[(?:\[[^\]]*\]|[^\[\]])*\]|[^\[\]])*\]/i,boolean:/\$(?:false|true)\b/i,variable:/\$\w+\b/,function:[/\b(?:Add|Approve|Assert|Backup|Block|Checkpoint|Clear|Close|Compare|Complete|Compress|Confirm|Connect|Convert|ConvertFrom|ConvertTo|Copy|Debug|Deny|Disable|Disconnect|Dismount|Edit|Enable|Enter|Exit|Expand|Export|Find|ForEach|Format|Get|Grant|Group|Hide|Import|Initialize|Install|Invoke|Join|Limit|Lock|Measure|Merge|Move|New|Open|Optimize|Out|Ping|Pop|Protect|Publish|Push|Read|Receive|Redo|Register|Remove|Rename|Repair|Request|Reset|Resize|Resolve|Restart|Restore|Resume|Revoke|Save|Search|Select|Send|Set|Show|Skip|Sort|Split|Start|Step|Stop|Submit|Suspend|Switch|Sync|Tee|Test|Trace|Unblock|Undo|Uninstall|Unlock|Unprotect|Unpublish|Unregister|Update|Use|Wait|Watch|Where|Write)-[a-z]+\b/i,/\b(?:ac|cat|chdir|clc|cli|clp|clv|compare|copy|cp|cpi|cpp|cvpa|dbp|del|diff|dir|ebp|echo|epal|epcsv|epsn|erase|fc|fl|ft|fw|gal|gbp|gc|gci|gcs|gdr|gi|gl|gm|gp|gps|group|gsv|gu|gv|gwmi|iex|ii|ipal|ipcsv|ipsn|irm|iwmi|iwr|kill|lp|ls|measure|mi|mount|move|mp|mv|nal|ndr|ni|nv|ogv|popd|ps|pushd|pwd|rbp|rd|rdr|ren|ri|rm|rmdir|rni|rnp|rp|rv|rvpa|rwmi|sal|saps|sasv|sbp|sc|select|set|shcm|si|sl|sleep|sls|sort|sp|spps|spsv|start|sv|swmi|tee|trcm|type|write)\b/i],keyword:/\b(?:Begin|Break|Catch|Class|Continue|Data|Define|Do|DynamicParam|Else|ElseIf|End|Exit|Filter|Finally|For|ForEach|From|Function|If|InlineScript|Parallel|Param|Process|Return|Sequence|Switch|Throw|Trap|Try|Until|Using|Var|While|Workflow)\b/i,operator:{pattern:/(^|\W)(?:!|-(?:b?(?:and|x?or)|as|(?:Not)?(?:Contains|In|Like|Match)|eq|ge|gt|is(?:Not)?|Join|le|lt|ne|not|Replace|sh[lr])\b|-[-=]?|\+[+=]?|[*\/%]=?)/i,lookbehind:!0},punctuation:/[|{}[\];(),.]/};t.string[0].inside={function:{pattern:/(^|[^`])\$\((?:\$\([^\r\n()]*\)|(?!\$\()[^\r\n)])*\)/,lookbehind:!0,inside:t},boolean:t.boolean,variable:t.variable}})(Prism);var gZ={},yZ;function kxt(){return yZ||(yZ=1,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python),gZ}kxt();var vZ={},xZ;function Nxt(){return xZ||(xZ=1,function(e){for(var t=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,n=0;n<2;n++)t=t.replace(/<self>/g,function(){return t});t=t.replace(/<self>/g,function(){return/[^\s\S]/.source}),e.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+t),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},e.languages.rust["closure-params"].inside.rest=e.languages.rust,e.languages.rust.attribute.inside.string=e.languages.rust.string}(Prism)),vZ}Nxt();Prism.languages.swift={comment:{pattern:/(^|[^\\:])(?:\/\/.*|\/\*(?:[^/*]|\/(?!\*)|\*(?!\/)|\/\*(?:[^*]|\*(?!\/))*\*\/)*\*\/)/,lookbehind:!0,greedy:!0},"string-literal":[{pattern:RegExp(/(^|[^"#])/.source+"(?:"+/"(?:\\(?:\((?:[^()]|\([^()]*\))*\)|\r\n|[^(])|[^\\\r\n"])*"/.source+"|"+/"""(?:\\(?:\((?:[^()]|\([^()]*\))*\)|[^(])|[^\\"]|"(?!""))*"""/.source+")"+/(?!["#])/.source),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\\($/,alias:"punctuation"},punctuation:/\\(?=[\r\n])/,string:/[\s\S]+/}},{pattern:RegExp(/(^|[^"#])(#+)/.source+"(?:"+/"(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|\r\n|[^#])|[^\\\r\n])*?"/.source+"|"+/"""(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|[^#])|[^\\])*?"""/.source+")\\2"),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\#+\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\#+\($/,alias:"punctuation"},string:/[\s\S]+/}}],directive:{pattern:RegExp(/#/.source+"(?:"+(/(?:elseif|if)\b/.source+"(?:[ 	]*"+/(?:![ \t]*)?(?:\b\w+\b(?:[ \t]*\((?:[^()]|\([^()]*\))*\))?|\((?:[^()]|\([^()]*\))*\))(?:[ \t]*(?:&&|\|\|))?/.source+")+")+"|"+/(?:else|endif)\b/.source+")"),alias:"property",inside:{"directive-name":/^#\w+/,boolean:/\b(?:false|true)\b/,number:/\b\d+(?:\.\d+)*\b/,operator:/!|&&|\|\||[<>]=?/,punctuation:/[(),]/}},literal:{pattern:/#(?:colorLiteral|column|dsohandle|file(?:ID|Literal|Path)?|function|imageLiteral|line)\b/,alias:"constant"},"other-directive":{pattern:/#\w+\b/,alias:"property"},attribute:{pattern:/@\w+/,alias:"atrule"},"function-definition":{pattern:/(\bfunc\s+)\w+/,lookbehind:!0,alias:"function"},label:{pattern:/\b(break|continue)\s+\w+|\b[a-zA-Z_]\w*(?=\s*:\s*(?:for|repeat|while)\b)/,lookbehind:!0,alias:"important"},keyword:/\b(?:Any|Protocol|Self|Type|actor|as|assignment|associatedtype|associativity|async|await|break|case|catch|class|continue|convenience|default|defer|deinit|didSet|do|dynamic|else|enum|extension|fallthrough|fileprivate|final|for|func|get|guard|higherThan|if|import|in|indirect|infix|init|inout|internal|is|isolated|lazy|left|let|lowerThan|mutating|none|nonisolated|nonmutating|open|operator|optional|override|postfix|precedencegroup|prefix|private|protocol|public|repeat|required|rethrows|return|right|safe|self|set|some|static|struct|subscript|super|switch|throw|throws|try|typealias|unowned|unsafe|var|weak|where|while|willSet)\b/,boolean:/\b(?:false|true)\b/,nil:{pattern:/\bnil\b/,alias:"constant"},"short-argument":/\$\d+\b/,omit:{pattern:/\b_\b/,alias:"keyword"},number:/\b(?:[\d_]+(?:\.[\de_]+)?|0x[a-f0-9_]+(?:\.[a-f0-9p_]+)?|0b[01_]+|0o[0-7_]+)\b/i,"class-name":/\b[A-Z](?:[A-Z_\d]*[a-z]\w*)?\b/,function:/\b[a-z_]\w*(?=\s*\()/i,constant:/\b(?:[A-Z_]{2,}|k[A-Z][A-Za-z_]+)\b/,operator:/[-+*/%=!<>&|^~?]+|\.[.\-+*/%=!<>&|^~?]+/,punctuation:/[{}[\]();,.:\\]/};Prism.languages.swift["string-literal"].forEach(function(e){e.inside.interpolation.inside=Prism.languages.swift});var bZ={},_Z;function Axt(){return _Z||(_Z=1,function(e){e.languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),e.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete e.languages.typescript.parameter,delete e.languages.typescript["literal-property"];var t=e.languages.extend("typescript",{});delete t["class-name"],e.languages.typescript["class-name"].inside=t,e.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),e.languages.ts=e.languages.typescript}(Prism)),bZ}Axt();var wZ={},SZ;function Pxt(){return SZ||(SZ=1,function(e){var t=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,n=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,r={pattern:RegExp(/(^|[^\w.])/.source+n+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};e.languages.java=e.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[r,{pattern:RegExp(/(^|[^\w.])/.source+n+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:r.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+n+/[A-Z]\w*\b/.source),lookbehind:!0,inside:r.inside}],keyword:t,function:[e.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),e.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),e.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":r,keyword:t,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+n+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:r.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+n+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:r.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return t.source})),lookbehind:!0,inside:{punctuation:/\./}}})}(Prism)),wZ}Pxt();var CZ={},EZ;function Rxt(){return EZ||(EZ=1,function(e){var t=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,n=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return t.source});e.languages.cpp=e.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return t.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:t,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),e.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return n})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),e.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e.languages.cpp}}}}),e.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),e.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:e.languages.extend("cpp",{})}}),e.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},e.languages.cpp["base-clause"])}(Prism)),CZ}Rxt();const Ixt=globalThis.Prism||window.Prism,MZ=e=>{try{return!!e&&Ixt.languages.hasOwnProperty(e)}catch{return!1}};function I1e(e,t){for(const n of e.childNodes){if(Tr(n)&&n.tagName===t)return!0;I1e(n,t)}return!1}const fy="data-language",Cb="data-highlight-language";let sF=class j1e extends pl{static getType(){return"code"}static clone(t){return new j1e(t.__language,t.__key)}constructor(t,n){super(n),this.__language=t||void 0,this.__isSyntaxHighlightSupported=MZ(t)}createDOM(t){const n=document.createElement("code");oc(n,t.theme.code),n.setAttribute("spellcheck","false");const r=this.getLanguage();return r&&(n.setAttribute(fy,r),this.getIsSyntaxHighlightSupported()&&n.setAttribute(Cb,r)),n}updateDOM(t,n,r){const s=this.__language,a=t.__language;return s?s!==a&&(n.setAttribute(fy,s),this.__isSyntaxHighlightSupported&&n.setAttribute(Cb,s)):a&&(n.removeAttribute(fy),t.__isSyntaxHighlightSupported&&n.removeAttribute(Cb)),!1}exportDOM(t){const n=document.createElement("pre");oc(n,t._config.theme.code),n.setAttribute("spellcheck","false");const r=this.getLanguage();return r&&(n.setAttribute(fy,r),this.getIsSyntaxHighlightSupported()&&n.setAttribute(Cb,r)),{element:n}}static importDOM(){return{code:t=>t.textContent!=null&&(/\r?\n/.test(t.textContent)||I1e(t,"BR"))?{conversion:TZ,priority:1}:null,div:()=>({conversion:jxt,priority:1}),pre:()=>({conversion:TZ,priority:0}),table:t=>g5(t)?{conversion:Oxt,priority:3}:null,td:t=>{const n=t,r=n.closest("table");return n.classList.contains("js-file-line")||r&&g5(r)?{conversion:kZ,priority:3}:null},tr:t=>{const n=t.closest("table");return n&&g5(n)?{conversion:kZ,priority:3}:null}}}static importJSON(t){return Vl().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setLanguage(t.language)}exportJSON(){return{...super.exportJSON(),language:this.getLanguage()}}insertNewAfter(t,n=!0){const r=this.getChildren(),s=r.length;if(s>=2&&r[s-1].getTextContent()===`
`&&r[s-2].getTextContent()===`
`&&t.isCollapsed()&&t.anchor.key===this.__key&&t.anchor.offset===s){r[s-1].remove(),r[s-2].remove();const c=br();return this.insertAfter(c,n),c}const{anchor:a,focus:o}=t,i=(a.isBefore(o)?a:o).getNode();if(Qe(i)){let c=Dxt(i);const u=[];for(;;)if(PD(c))u.push(M1()),c=c.getNextSibling();else{if(!F1e(c))break;{let v=0;const x=c.getTextContent(),b=c.getTextContentSize();for(;v<b&&x[v]===" ";)v++;if(v!==0&&u.push(D1e(" ".repeat(v))),v!==b)break;c=c.getNextSibling()}}const d=i.splitText(a.offset)[0],m=a.offset===0?0:1,h=d.getIndexWithinParent()+m,p=i.getParentOrThrow(),g=[po(),...u];p.splice(h,0,g);const y=u[u.length-1];y?y.select():a.offset===0?d.selectPrevious():d.getNextSibling().selectNext(0,0)}if(aF(i)){const{offset:c}=t.anchor;i.splice(c,0,[po()]),i.select(c+1,c+1)}return null}canIndent(){return!1}collapseAtStart(){const t=br();return this.getChildren().forEach(n=>t.append(n)),this.replace(t),!0}setLanguage(t){const n=this.getWritable();return n.__language=t||void 0,n.__isSyntaxHighlightSupported=MZ(t),n}getLanguage(){return this.getLatest().__language}getIsSyntaxHighlightSupported(){return this.getLatest().__isSyntaxHighlightSupported}};function Vl(e){return Qa(new sF(e))}function aF(e){return e instanceof sF}function TZ(e){return{node:Vl(e.getAttribute(fy))}}function jxt(e){const t=e,n=NZ(t);return n||function(r){let s=r.parentElement;for(;s!==null;){if(NZ(s))return!0;s=s.parentElement}return!1}(t)?{node:n?Vl():null}:{node:null}}function Oxt(){return{node:Vl()}}function kZ(){return{node:null}}function NZ(e){return e.style.fontFamily.match("monospace")!==null}function g5(e){return e.classList.contains("js-file-line-container")}let O1e=class L1e extends Du{constructor(t="",n,r){super(t,r),this.__highlightType=n}static getType(){return"code-highlight"}static clone(t){return new L1e(t.__text,t.__highlightType||void 0,t.__key)}getHighlightType(){return this.getLatest().__highlightType}setHighlightType(t){const n=this.getWritable();return n.__highlightType=t||void 0,n}canHaveFormat(){return!1}createDOM(t){const n=super.createDOM(t),r=y5(t.theme,this.__highlightType);return oc(n,r),n}updateDOM(t,n,r){const s=super.updateDOM(t,n,r),a=y5(r.theme,t.__highlightType),o=y5(r.theme,this.__highlightType);return a!==o&&(a&&JD(n,a),o&&oc(n,o)),s}static importJSON(t){return D1e().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setHighlightType(t.highlightType)}exportJSON(){return{...super.exportJSON(),highlightType:this.getHighlightType()}}setFormat(t){return this}isParentRequired(){return!0}createParentElementNode(){return Vl()}};function y5(e,t){return t&&e&&e.codeHighlight&&e.codeHighlight[t]}function D1e(e="",t){return Qa(new O1e(e,t))}function F1e(e){return e instanceof O1e}function Lxt(e,t){let n=e;for(let r=ds(e,t);r&&(F1e(r.origin)||PD(r.origin));r=lxt(r))n=r.origin;return n}function Dxt(e){return Lxt(e,"previous")}function OI(e,t){const n={};for(const r of e){const s=t(r);s&&(n[s]?n[s].push(r):n[s]=[r])}return n}function U1e(e){const t=OI(e,n=>n.type);return{element:t.element||[],multilineElement:t["multiline-element"]||[],textFormat:t["text-format"]||[],textMatch:t["text-match"]||[]}}const Lw=/[!-/:-@[-`{-~\s]/,Fxt=/^\s{0,3}$/;function Uxt(e){if(!Fh(e))return!1;const t=e.getFirstChild();return t==null||e.getChildrenSize()===1&&Qe(t)&&Fxt.test(t.getTextContent())}function Bxt(e,t){const n=function(s,a){const o=s.match(a.openTagsRegExp);if(o==null)return null;for(const i of o){const c=i.replace(/^\s/,""),u=a.fullMatchRegExpByTag[c];if(u==null)continue;const d=s.match(u),m=a.transformersByTag[c];if(d!=null&&m!=null){if(m.intraword!==!1)return d;const{index:h=0}=d,p=s[h-1],g=s[h+d[0].length];if((!p||Lw.test(p))&&(!g||Lw.test(g)))return d}}return null}(e.getTextContent(),t);if(!n)return null;const r=n.index||0;return{endIndex:r+n[0].length,match:n,startIndex:r,transformer:t.transformersByTag[n[1]]}}function fd(e){return Qe(e)&&!e.hasFormat("code")}function md(e,t,n){let r=Bxt(e,t),s=function(o,i){const c=o;let u,d,m,h;for(const p of i){if(!p.replace||!p.importRegExp)continue;const g=c.getTextContent().match(p.importRegExp);if(!g)continue;const y=g.index||0,v=p.getEndIndex?p.getEndIndex(c,g):y+g[0].length;v!==!1&&(u===void 0||d===void 0||y<u&&v>d)&&(u=y,d=v,m=p,h=g)}return u===void 0||d===void 0||m===void 0||h===void 0?null:{endIndex:d,match:h,startIndex:u,transformer:m}}(e,n);if(r&&s&&(r.startIndex<=s.startIndex&&r.endIndex>=s.endIndex?s=null:r=null),r){const o=function(i,c,u,d,m){const h=i.getTextContent();let p,g,y;if(m[0]===h?p=i:c===0?[p,g]=i.splitText(u):[y,p,g]=i.splitText(c,u),p.setTextContent(m[2]),d)for(const v of d.format)p.hasFormat(v)||p.toggleFormat(v);return{nodeAfter:g,nodeBefore:y,transformedNode:p}}(e,r.startIndex,r.endIndex,r.transformer,r.match);fd(o.nodeAfter)&&md(o.nodeAfter,t,n),fd(o.nodeBefore)&&md(o.nodeBefore,t,n),fd(o.transformedNode)&&md(o.transformedNode,t,n)}else if(s){const o=function(i,c,u,d,m){let h,p,g;return c===0?[h,p]=i.splitText(u):[g,h,p]=i.splitText(c,u),d.replace?{nodeAfter:p,nodeBefore:g,transformedNode:d.replace(h,m)||void 0}:null}(e,s.startIndex,s.endIndex,s.transformer,s.match);if(!o)return;fd(o.nodeAfter)&&md(o.nodeAfter,t,n),fd(o.nodeBefore)&&md(o.nodeBefore,t,n),fd(o.transformedNode)&&md(o.transformedNode,t,n)}const a=e.getTextContent().replace(/\\([*_`~\\])/g,"$1").replace(/&#(\d+);/g,(o,i)=>String.fromCodePoint(i));e.setTextContent(a)}function Vxt(e,t=!1){const n=U1e(e),r=function(s){const a={},o={},i=[],c="(?<![\\\\])";for(const u of s){const{tag:d}=u;a[d]=u;const m=d.replace(/(\*|\^|\+)/g,"\\$1");i.push(m),d.length===1?o[d]=new RegExp(`(?<![\\\\${m}])(${m})((\\\\${m})?.*?[^${m}\\s](\\\\${m})?)((?<!\\\\)|(?<=\\\\\\\\))(${m})(?![\\\\${m}])`):o[d]=new RegExp(`(?<!\\\\)(${m})((\\\\${m})?.*?[^\\s](\\\\${m})?)((?<!\\\\)|(?<=\\\\\\\\))(${m})(?!\\\\)`)}return{fullMatchRegExpByTag:o,openTagsRegExp:new RegExp(`${c}(${i.join("|")})`,"g"),transformersByTag:a}}(n.textFormat);return(s,a)=>{const o=s.split(`
`),i=o.length,c=a||Kn();c.clear();for(let d=0;d<i;d++){const m=o[d],[h,p]=$xt(o,d,n.multilineElement,c);h?d=p:Wxt(m,c,n.element,r,n.textMatch,t)}const u=c.getChildren();for(const d of u)!t&&Uxt(d)&&c.getChildrenSize()>1&&d.remove();Ze()!==null&&c.selectStart()}}function $xt(e,t,n,r){for(const s of n){const{handleImportAfterStartMatch:a,regExpEnd:o,regExpStart:i,replace:c}=s,u=e[t].match(i);if(!u)continue;if(a){const g=a({lines:e,rootNode:r,startLineIndex:t,startMatch:u,transformer:s});if(g===null)continue;if(g)return g}const d=typeof o=="object"&&"regExp"in o?o.regExp:o,m=o&&typeof o=="object"&&"optional"in o?o.optional:!o;let h=t;const p=e.length;for(;h<p;){const g=d?e[h].match(d):null;if(!g&&(!m||m&&h<p-1)){h++;continue}if(g&&t===h&&g.index===u.index){h++;continue}const y=[];if(g&&t===h)y.push(e[t].slice(u[0].length,-g[0].length));else for(let v=t;v<=h;v++)if(v===t){const x=e[v].slice(u[0].length);y.push(x)}else if(v===h&&g){const x=e[v].slice(0,-g[0].length);y.push(x)}else y.push(e[v]);if(c(r,null,u,g,y,!0)!==!1)return[!0,h];break}}return[!1,t]}function Wxt(e,t,n,r,s,a){const o=rr(e),i=br();i.append(o),t.append(i);for(const{regExp:c,replace:u}of n){const d=e.match(c);if(d&&(o.setTextContent(e.slice(d[0].length)),u(i,[o],d,!0)!==!1))break}if(md(o,r,s),i.isAttached()&&e.length>0){const c=i.getPreviousSibling();if(!a&&(Fh(c)||jI(c)||Mn(c))){let u=c;if(Mn(c)){const d=c.getLastDescendant();u=d==null?null:Km(d,is)}u!=null&&u.getTextContentSize()>0&&(u.splice(u.getChildrenSize(),0,[po(),...i.getChildren()]),i.remove())}}}function Hxt(e,...t){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",e);for(const s of t)r.append("v",s);throw n.search=r.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function AZ(e,t,n){const r=n.length;for(let s=t;s>=r;s--){const a=s-r;if(B1e(e,a,n,0,r)&&e[a+r]!==" ")return a}return-1}function B1e(e,t,n,r,s){for(let a=0;a<s;a++)if(e[t+a]!==n[r+a])return!1;return!0}function GWt(e,t=Y1e){const n=U1e(t),r=OI(n.textFormat,({tag:o})=>o[o.length-1]),s=OI(n.textMatch,({trigger:o})=>o);for(const o of t){const i=o.type;if(i==="element"||i==="text-match"||i==="multiline-element"){const c=o.dependencies;for(const u of c)e.hasNode(u)||Hxt(173,u.getType())}}const a=(o,i,c)=>{(function(u,d,m,h){const p=u.getParent();if(!Zo(p)||u.getFirstChild()!==d)return!1;const g=d.getTextContent();if(g[m-1]!==" ")return!1;for(const{regExp:y,replace:v}of h){const x=g.match(y);if(x&&x[0].length===(x[0].endsWith(" ")?m:m-1)){const b=d.getNextSiblings(),[_,w]=d.splitText(m);if(_.remove(),v(u,w?[w,...b]:b,x,!1)!==!1)return!0}}return!1})(o,i,c,n.element)||function(u,d,m,h){const p=u.getParent();if(!Zo(p)||u.getFirstChild()!==d)return!1;const g=d.getTextContent();if(g[m-1]!==" ")return!1;for(const{regExpStart:y,replace:v,regExpEnd:x}of h){if(x&&!("optional"in x)||x&&"optional"in x&&!x.optional)continue;const b=g.match(y);if(b&&b[0].length===(b[0].endsWith(" ")?m:m-1)){const _=d.getNextSiblings(),[w,S]=d.splitText(m);if(w.remove(),v(u,S?[S,..._]:_,b,null,null,!1)!==!1)return!0}}return!1}(o,i,c,n.multilineElement)||function(u,d,m){let h=u.getTextContent();const p=m[h[d-1]];if(p==null)return!1;d<h.length&&(h=h.slice(0,d));for(const g of p){if(!g.replace||!g.regExp)continue;const y=h.match(g.regExp);if(y===null)continue;const v=y.index||0,x=v+y[0].length;let b;return v===0?[b]=u.splitText(x):[,b]=u.splitText(v,x),b.selectNext(0,0),g.replace(b,y),!0}return!1}(i,c,s)||function(u,d,m){const h=u.getTextContent(),p=d-1,g=h[p],y=m[g];if(!y)return!1;for(const v of y){const{tag:x}=v,b=x.length,_=p-b+1;if(b>1&&!B1e(h,_,x,0,b)||h[_-1]===" ")continue;const w=h[p+1];if(v.intraword===!1&&w&&!Lw.test(w))continue;const S=u;let C=S,E=AZ(h,_,x),M=C;for(;E<0&&(M=M.getPreviousSibling())&&!Od(M);)if(Qe(M)){if(M.hasFormat("code"))continue;const L=M.getTextContent();C=M,E=AZ(L,L.length,x)}if(E<0||C===S&&E+b===_)continue;const T=C.getTextContent();if(E>0&&T[E-1]===g)continue;const I=T[E-1];if(v.intraword===!1&&I&&!Lw.test(I))continue;const j=S.getTextContent(),N=j.slice(0,_)+j.slice(p+1);S.setTextContent(N);const P=C===S?N:T;C.setTextContent(P.slice(0,E)+P.slice(E+b));const R=Ze(),k=z0e();Ps(k);const O=p-b*(C===S?2:1)+1;k.anchor.set(C.__key,E,"text"),k.focus.set(S.__key,O,"text");for(const L of v.format)k.hasFormat(L)||k.formatText(L);k.anchor.set(k.focus.key,k.focus.offset,k.focus.type);for(const L of v.format)k.hasFormat(L)&&k.toggleFormat(L);return Re(R)&&(k.format=R.format),!0}}(i,c,r)};return e.registerUpdateListener(({tags:o,dirtyLeaves:i,editorState:c,prevEditorState:u})=>{if(o.has(t1e)||o.has(E1t)||e.isComposing())return;const d=c.read(Ze),m=u.read(Ze);if(!Re(m)||!Re(d)||!d.isCollapsed()||d.is(m))return;const h=d.anchor.key,p=d.anchor.offset,g=c._nodeMap.get(h);!Qe(g)||!i.has(h)||p!==1&&p>m.anchor.offset+1||e.update(()=>{if(!fd(g))return;const y=g.getParent();y===null||aF(y)||a(y,g,d.anchor.offset)})})}const V1e=/^(\s*)(\d{1,})\.\s/,$1e=/^(\s*)[-*+]\s/,zxt=/^(\s*)(?:-\s)?\s?(\[(\s|x)?\])\s/i,LI=/^(#{1,6})\s/,W1e=/^>\s/,H1e=/^[ \t]*```(\w+)?/,z1e=/[ \t]*```$/,Gxt=/^[ \t]*```[^`]+(?:(?:`{1,2}|`{4,})[^`]+)*```(?:[^`]|$)/,qxt=/^(?:\|)(.+)(?:\|)\s?$/,Kxt=/^(\| ?:?-*:? ?)+\|\s?$/,G1e=e=>(t,n,r)=>{const s=e(r);s.append(...n),t.replace(s),s.select(0,0)},q1e=e=>(t,n,r)=>{const s=t.getPreviousSibling(),a=t.getNextSibling(),o=ol(e==="check"?r[3]==="x":void 0);if(Mn(a)&&a.getListType()===e){const c=a.getFirstChild();c!==null?c.insertBefore(o):a.append(o),t.remove()}else if(Mn(s)&&s.getListType()===e)s.append(o),t.remove();else{const c=Vo(e,e==="number"?Number(r[2]):void 0);c.append(o),t.replace(c)}o.append(...n),o.select(0,0);const i=function(c){const u=c.match(/\t/g),d=c.match(/ /g);let m=0;return u&&(m+=u.length),d&&(m+=Math.floor(d.length/4)),m}(r[1]);i&&o.setIndent(i)},oF=(e,t,n)=>{const r=[],s=e.getChildren();let a=0;for(const o of s)if(is(o)){if(o.getChildrenSize()===1){const d=o.getFirstChild();if(Mn(d)){r.push(oF(d,t,n+1));continue}}const i=" ".repeat(4*n),c=e.getListType(),u=c==="number"?`${e.getStart()+a}. `:c==="check"?`- [${o.getChecked()?"x":" "}] `:"- ";r.push(i+u+t(o)),a++}return r.join(`
`)},Yxt={dependencies:[rF],export:(e,t)=>{if(!Mxt(e))return null;const n=Number(e.getTag().slice(1));return"#".repeat(n)+" "+t(e)},regExp:LI,replace:G1e(e=>{const t="h"+e[1].length;return wm(t)}),type:"element"},Qxt={dependencies:[A1],export:(e,t)=>{if(!jI(e))return null;const n=t(e).split(`
`),r=[];for(const s of n)r.push("> "+s);return r.join(`
`)},regExp:W1e,replace:(e,t,n,r)=>{if(r){const a=e.getPreviousSibling();if(jI(a))return a.splice(a.getChildrenSize(),0,[po(),...t]),a.select(0,0),void e.remove()}const s=nF();s.append(...t),e.replace(s),s.select(0,0)},type:"element"},Xxt={dependencies:[sF],export:e=>{if(!aF(e))return null;const t=e.getTextContent();return"```"+(e.getLanguage()||"")+(t?`
`+t:"")+"\n```"},regExpEnd:{optional:!0,regExp:z1e},regExpStart:H1e,replace:(e,t,n,r,s,a)=>{let o,i;if(!t&&s){if(s.length===1)r?(o=Vl(),i=n[1]+s[0]):(o=Vl(n[1]),i=s[0].startsWith(" ")?s[0].slice(1):s[0]);else{if(o=Vl(n[1]),s[0].trim().length===0)for(;s.length>0&&!s[0].length;)s.shift();else s[0]=s[0].startsWith(" ")?s[0].slice(1):s[0];for(;s.length>0&&!s[s.length-1].length;)s.pop();i=s.join(`
`)}const c=rr(i);o.append(c),e.append(o)}else t&&G1e(c=>Vl(c?c[1]:void 0))(e,t,n,a)},type:"multiline-element"},Zxt={dependencies:[HE,WE],export:(e,t)=>Mn(e)?oF(e,t,0):null,regExp:$1e,replace:q1e("bullet"),type:"element"},Jxt={dependencies:[HE,WE],export:(e,t)=>Mn(e)?oF(e,t,0):null,regExp:V1e,replace:q1e("number"),type:"element"},ebt={format:["code"],tag:"`",type:"text-format"},tbt={format:["highlight"],tag:"==",type:"text-format"},nbt={format:["bold","italic"],tag:"***",type:"text-format"},rbt={format:["bold","italic"],intraword:!1,tag:"___",type:"text-format"},sbt={format:["bold"],tag:"**",type:"text-format"},abt={format:["bold"],intraword:!1,tag:"__",type:"text-format"},obt={format:["strikethrough"],tag:"~~",type:"text-format"},ibt={format:["italic"],tag:"*",type:"text-format"},lbt={format:["italic"],intraword:!1,tag:"_",type:"text-format"},cbt={dependencies:[Qp],export:(e,t,n)=>{if(!Si(e))return null;const r=e.getTitle(),s=t(e);return r?`[${s}](${e.getURL()} "${r}")`:`[${s}](${e.getURL()})`},importRegExp:/(?:\[([^[]+)\])(?:\((?:([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?)\))/,regExp:/(?:\[([^[]+)\])(?:\((?:([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?)\))$/,replace:(e,t)=>{const[,n,r,s]=t,a=zh(r,{title:s}),o=rr(n);return o.setFormat(e.getFormat()),a.append(o),e.replace(a),o},trigger:")",type:"text-match"},ubt=[Yxt,Qxt,Zxt,Jxt],dbt=[Xxt],fbt=[ebt,nbt,rbt,sbt,abt,tbt,ibt,lbt,obt],K1e=[cbt],Y1e=[...ubt,...dbt,...fbt,...K1e];function DI(e,t=Y1e,n,r=!1,s=!1){const a=r?e:function(o,i=!1){const c=o.split(`
`);let u=!1;const d=[];for(let m=0;m<c.length;m++){const h=c[m],p=d[d.length-1];Gxt.test(h)?d.push(h):H1e.test(h)||z1e.test(h)?(u=!u,d.push(h)):u||h===""||p===""||!p||LI.test(p)||LI.test(h)||W1e.test(h)||V1e.test(h)||$1e.test(h)||zxt.test(h)||qxt.test(h)||Kxt.test(h)||!i?d.push(h):d[d.length-1]=p+h}return d.join(`
`)}(e,s);return Vxt(t,r)(a,n)}const Q1e=f.createContext(null);function mbt(e,t){return{getTheme:function(){return t??null}}}function ic(){const e=f.useContext(Q1e);return e==null&&function(t,...n){const r=new URL("https://lexical.dev/docs/error"),s=new URLSearchParams;s.append("code",t);for(const a of n)s.append("v",a);throw r.search=s.toString(),Error(`Minified Lexical error #${t}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(8),e}function hbt({newTab:e=!0,disabled:t=!1}){const[n]=ic();return f.useEffect(()=>{const r=a=>{const o=a.target;if(!Kp(o))return;const i=FD(o);if(i===null)return;let c=null,u=null;if(i.update(()=>{const h=Bh(o);if(h!==null){const p=Km(h,Ee);if(!t)if(Si(p))c=p.sanitizeUrl(p.getURL()),u=p.getTarget();else{const g=function(y,v){let x=y;for(;x!=null;){if(v(x))return x;x=x.parentNode}return null}(o,HD);g!==null&&(c=g.href,u=g.target)}}}),c===null||c==="")return;const d=n.getEditorState().read(Ze);if(Re(d)&&!d.isCollapsed())return void a.preventDefault();const m=a.type==="auxclick"&&a.button===1;window.open(c,e||m||a.metaKey||a.ctrlKey||u==="_blank"?"_blank":"_self"),a.preventDefault()},s=a=>{a.button===1&&r(a)};return n.registerRootListener((a,o)=>{o!==null&&(o.removeEventListener("click",r),o.removeEventListener("mouseup",s)),a!==null&&(a.addEventListener("click",r),a.addEventListener("mouseup",s))})},[n,e,t]),null}const X1e=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,pbt=X1e?f.useLayoutEffect:f.useEffect,Eb={tag:A_};function gbt({initialConfig:e,children:t}){const n=f.useMemo(()=>{const{theme:r,namespace:s,nodes:a,onError:o,editorState:i,html:c}=e,u=mbt(null,r),d=s1e({editable:e.editable,html:c,namespace:s,nodes:a,onError:m=>o(m,d),theme:r});return function(m,h){if(h!==null){if(h===void 0)m.update(()=>{const p=Kn();if(p.isEmpty()){const g=br();p.append(g);const y=X1e?document.activeElement:null;(Ze()!==null||y!==null&&y===m.getRootElement())&&g.select()}},Eb);else if(h!==null)switch(typeof h){case"string":{const p=m.parseEditorState(h);m.setEditorState(p,Eb);break}case"object":m.setEditorState(h,Eb);break;case"function":m.update(()=>{Kn().isEmpty()&&h(m)},Eb)}}}(d,i),[d,u]},[]);return pbt(()=>{const r=e.editable,[s]=n;s.setEditable(r===void 0||r)},[]),l.jsx(Q1e.Provider,{value:n,children:t})}function ybt(){return Kn().getTextContent()}function vbt(e,t=!0){if(e)return!1;let n=ybt();return t&&(n=n.trim()),n===""}function xbt(e){if(!vbt(e,!1))return!1;const t=Kn().getChildren(),n=t.length;if(n>1)return!1;for(let r=0;r<n;r++){const s=t[r];if(Tn(s))return!1;if(Ee(s)){if(!Fh(s)||s.__indent!==0)return!1;const a=s.getChildren(),o=a.length;for(let i=0;i<o;i++){const c=a[r];if(!Qe(c))return!1}}}return!0}function Z1e(e){return()=>xbt(e)}const J1e=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?f.useLayoutEffect:f.useEffect;function bbt({editor:e,ariaActiveDescendant:t,ariaAutoComplete:n,ariaControls:r,ariaDescribedBy:s,ariaErrorMessage:a,ariaExpanded:o,ariaInvalid:i,ariaLabel:c,ariaLabelledBy:u,ariaMultiline:d,ariaOwns:m,ariaRequired:h,autoCapitalize:p,className:g,id:y,role:v="textbox",spellCheck:x=!0,style:b,tabIndex:_,"data-testid":w,...S},C){const[E,M]=f.useState(e.isEditable()),T=f.useCallback(j=>{j&&j.ownerDocument&&j.ownerDocument.defaultView?e.setRootElement(j):e.setRootElement(null)},[e]),I=f.useMemo(()=>function(...j){return N=>{j.forEach(P=>{typeof P=="function"?P(N):P!=null&&(P.current=N)})}}(C,T),[T,C]);return J1e(()=>(M(e.isEditable()),e.registerEditableListener(j=>{M(j)})),[e]),l.jsx("div",{"aria-activedescendant":E?t:void 0,"aria-autocomplete":E?n:"none","aria-controls":E?r:void 0,"aria-describedby":s,...a!=null?{"aria-errormessage":a}:{},"aria-expanded":E&&v==="combobox"?!!o:void 0,...i!=null?{"aria-invalid":i}:{},"aria-label":c,"aria-labelledby":u,"aria-multiline":d,"aria-owns":E?m:void 0,"aria-readonly":!E||void 0,"aria-required":h,autoCapitalize:p,className:g,contentEditable:E,"data-testid":w,id:y,ref:I,role:E?v:void 0,spellCheck:x,style:b,tabIndex:_,...S})}const _bt=f.forwardRef(bbt);function PZ(e){return e.getEditorState().read(Z1e(e.isComposing()))}const wbt=f.forwardRef(Sbt);function Sbt(e,t){const{placeholder:n,...r}=e,[s]=ic();return l.jsxs(l.Fragment,{children:[l.jsx(_bt,{editor:s,...r,ref:t}),n!=null&&l.jsx(Cbt,{editor:s,content:n})]})}function Cbt({content:e,editor:t}){const n=function(o){const[i,c]=f.useState(()=>PZ(o));return J1e(()=>{function u(){const d=PZ(o);c(d)}return u(),Hh(o.registerUpdateListener(()=>{u()}),o.registerEditableListener(()=>{u()}))},[o]),i}(t),[r,s]=f.useState(t.isEditable());if(f.useLayoutEffect(()=>(s(t.isEditable()),t.registerEditableListener(o=>{s(o)})),[t]),!n)return null;let a=null;return typeof e=="function"?a=e(r):e!==null&&(a=e),a===null?null:l.jsx("div",{"aria-hidden":!0,children:a})}const Ebt=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?f.useLayoutEffect:f.useEffect;function Mbt(e){return{initialValueFn:()=>e.isEditable(),subscribe:t=>e.registerEditableListener(t)}}function Tbt(){return function(e){const[t]=ic(),n=f.useMemo(()=>e(t),[t,e]),[r,s]=f.useState(()=>n.initialValueFn()),a=f.useRef(r);return Ebt(()=>{const{initialValueFn:o,subscribe:i}=n,c=o();return a.current!==c&&(a.current=c,s(c)),i(u=>{a.current=u,s(u)})},[n,e]),r}(Mbt)}function kbt(e){const t=window.location.origin,n=r=>{if(r.origin!==t)return;const s=e.getRootElement();if(document.activeElement!==s)return;const a=r.data;if(typeof a=="string"){let o;try{o=JSON.parse(a)}catch{return}if(o&&o.protocol==="nuanria_messaging"&&o.type==="request"){const i=o.payload;if(i&&i.functionId==="makeChanges"){const c=i.args;if(c){const[u,d,m,h,p,g]=c;e.update(()=>{const y=Ze();if(Re(y)){const v=y.anchor;let x=v.getNode(),b=0,_=0;if(Qe(x)&&u>=0&&d>=0&&(b=u,_=u+d,y.setTextNodeRange(x,b,x,_)),b===_&&m===""||(y.insertRawText(m),x=v.getNode()),Qe(x)){b=h,_=h+p;const w=x.getTextContentSize();b=b>w?w:b,_=_>w?w:_,y.setTextNodeRange(x,b,x,_)}r.stopImmediatePropagation()}})}}}}};return window.addEventListener("message",n,!0),()=>{window.removeEventListener("message",n,!0)}}const Xp=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,Nbt=Xp&&"documentMode"in document?document.documentMode:null,Abt=!(!Xp||!("InputEvent"in window)||Nbt)&&"getTargetRanges"in new window.InputEvent("input"),Pbt=Xp&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),RZ=Xp&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Rbt=Xp&&/^(?=.*Chrome).*/i.test(navigator.userAgent),Ibt=Xp&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!Rbt;function IZ(e,t){t.update(()=>{if(e!==null){const n=jw(e,KeyboardEvent)?null:e.clipboardData,r=Ze();if(r!==null&&n!=null){e.preventDefault();const s=hxt(t);s!==null&&n.setData("text/html",s),n.setData("text/plain",r.getTextContent())}}})}function jbt(e){return Hh(e.registerCommand(qi,t=>{const n=Ze();return!!Re(n)&&(n.deleteCharacter(t),!0)},Ur),e.registerCommand(Oh,t=>{const n=Ze();return!!Re(n)&&(n.deleteWord(t),!0)},Ur),e.registerCommand(Lh,t=>{const n=Ze();return!!Re(n)&&(n.deleteLine(t),!0)},Ur),e.registerCommand(jd,t=>{const n=Ze();if(!Re(n))return!1;if(typeof t=="string")n.insertText(t);else{const r=t.dataTransfer;if(r!=null)nZ(r,n);else{const s=t.data;s&&n.insertText(s)}}return!0},Ur),e.registerCommand(Tw,()=>{const t=Ze();return!!Re(t)&&(t.removeText(),!0)},Ur),e.registerCommand(zm,t=>{const n=Ze();return!!Re(n)&&(n.insertLineBreak(t),!0)},Ur),e.registerCommand(vI,()=>{const t=Ze();return!!Re(t)&&(t.insertLineBreak(),!0)},Ur),e.registerCommand(E0e,t=>{const n=Ze();if(!Re(n))return!1;const r=t,s=r.shiftKey;return!!eZ(n,!0)&&(r.preventDefault(),tZ(n,s,!0),!0)},Ur),e.registerCommand(C0e,t=>{const n=Ze();if(!Re(n))return!1;const r=t,s=r.shiftKey;return!!eZ(n,!1)&&(r.preventDefault(),tZ(n,s,!1),!0)},Ur),e.registerCommand(MD,t=>{const n=Ze();return!!Re(n)&&(!RZ||navigator.language!=="ko-KR")&&(t.preventDefault(),e.dispatchCommand(qi,!0))},Ur),e.registerCommand(TD,t=>{const n=Ze();return!!Re(n)&&(t.preventDefault(),e.dispatchCommand(qi,!1))},Ur),e.registerCommand(Dh,t=>{const n=Ze();if(!Re(n))return!1;if(t!==null){if((RZ||Pbt||Ibt)&&Abt)return!1;t.preventDefault()}return e.dispatchCommand(zm,!1)},Ur),e.registerCommand(xI,()=>(j1t(),!0),Ur),e.registerCommand(kD,t=>{const n=Ze();return!!Re(n)&&(IZ(t,e),!0)},Ur),e.registerCommand(ND,t=>{const n=Ze();return!!Re(n)&&(function(r,s){IZ(r,s),s.update(()=>{const a=Ze();Re(a)&&a.removeText()})}(t,e),!0)},Ur),e.registerCommand(IE,t=>{const n=Ze();return!!Re(n)&&(function(r,s){r.preventDefault(),s.update(()=>{const a=Ze(),o=jw(r,ClipboardEvent)?r.clipboardData:null;o!=null&&Re(a)&&nZ(o,a)},{tag:e1e})}(t,e),!0)},Ur),e.registerCommand(A0e,t=>{const n=Ze();return!!Re(n)&&(t.preventDefault(),!0)},Ur),e.registerCommand(P0e,t=>{const n=Ze();return!!Re(n)&&(t.preventDefault(),!0)},Ur))}const FI=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?f.useLayoutEffect:f.useEffect;function jZ(e){return e.getEditorState().read(Z1e(e.isComposing()))}function Obt({contentEditable:e,placeholder:t=null,ErrorBoundary:n}){const[r]=ic(),s=function(a,o){const[i,c]=f.useState(()=>a.getDecorators());return FI(()=>a.registerDecoratorListener(u=>{Ss.flushSync(()=>{c(u)})}),[a]),f.useEffect(()=>{c(a.getDecorators())},[a]),f.useMemo(()=>{const u=[],d=Object.keys(i);for(let m=0;m<d.length;m++){const h=d[m],p=l.jsx(o,{onError:y=>a._onError(y),children:l.jsx(f.Suspense,{fallback:null,children:i[h]})}),g=a.getElementByKey(h);g!==null&&u.push(Ss.createPortal(p,g,h))}return u},[o,i,a])}(r,n);return function(a){FI(()=>Hh(jbt(a),kbt(a)),[a])}(r),l.jsxs(l.Fragment,{children:[e,l.jsx(Lbt,{content:t}),s]})}function Lbt({content:e}){const[t]=ic(),n=function(s){const[a,o]=f.useState(()=>jZ(s));return FI(()=>{function i(){const c=jZ(s);o(c)}return i(),Hh(s.registerUpdateListener(()=>{i()}),s.registerEditableListener(()=>{i()}))},[s]),a}(t),r=Tbt();return n?typeof e=="function"?e(r):e:null}const OZ="startTransition",UI=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,Dbt=UI?f.useLayoutEffect:f.useEffect;class Fbt{constructor(t){this.key=t,this.ref={current:null},this.setRefElement=this.setRefElement.bind(this)}setRefElement(t){this.ref={current:t}}}const LZ=e=>{const t=document.getElementById("typeahead-menu");if(!t)return;const n=t.getBoundingClientRect();n.top+n.height>window.innerHeight&&t.scrollIntoView({block:"center"}),n.top<0&&t.scrollIntoView({block:"center"}),e.scrollIntoView({block:"nearest"})};function DZ(e,t){const n=e.getBoundingClientRect(),r=t.getBoundingClientRect();return n.top>r.top&&n.top<r.bottom}function Ubt(e,t,n,r){const[s]=ic();f.useEffect(()=>{if(t!=null&&e!=null){const a=s.getRootElement(),o=a!=null?function(m,h){let p=getComputedStyle(m);const g=p.position==="absolute",y=/(auto|scroll)/;if(p.position==="fixed")return document.body;for(let v=m;v=v.parentElement;)if(p=getComputedStyle(v),(!g||p.position!=="static")&&y.test(p.overflow+p.overflowY+p.overflowX))return v;return document.body}(a):document.body;let i=!1,c=DZ(t,o);const u=function(){i||(window.requestAnimationFrame(function(){n(),i=!1}),i=!0);const m=DZ(t,o);m!==c&&(c=m,r?.(m))},d=new ResizeObserver(n);return window.addEventListener("resize",n),document.addEventListener("scroll",u,{capture:!0,passive:!0}),d.observe(t),()=>{d.unobserve(t),window.removeEventListener("resize",n),document.removeEventListener("scroll",u,!0)}}},[t,s,r,n,e])}const FZ=Bt("SCROLL_TYPEAHEAD_OPTION_INTO_VIEW_COMMAND");function Bbt({close:e,editor:t,anchorElementRef:n,resolution:r,options:s,menuRenderFn:a,onSelectOption:o,shouldSplitNodeWithQuery:i=!1,commandPriority:c=n1e,preselectFirstItem:u=!0}){const[d,m]=f.useState(null),h=r.match&&r.match.matchingString;f.useEffect(()=>{u&&m(0)},[h,u]);const p=f.useCallback(y=>{t.update(()=>{const v=r.match!=null&&i?function(x){const b=Ze();if(!Re(b)||!b.isCollapsed())return null;const _=b.anchor;if(_.type!=="text")return null;const w=_.getNode();if(!w.isSimpleText())return null;const S=_.offset,C=w.getTextContent().slice(0,S),E=x.replaceableString.length,M=S-function(I,j,N){let P=N;for(let R=P;R<=j.length;R++)I.slice(-R)===j.substring(0,R)&&(P=R);return P}(C,x.matchingString,E);if(M<0)return null;let T;return M===0?[T]=w.splitText(S):[,T]=w.splitText(M,S),T}(r.match):null;o(y,v,e,r.match?r.match.matchingString:"")})},[t,i,r.match,o,e]),g=f.useCallback(y=>{const v=t.getRootElement();v!==null&&(v.setAttribute("aria-activedescendant","typeahead-item-"+y),m(y))},[t]);return f.useEffect(()=>()=>{const y=t.getRootElement();y!==null&&y.removeAttribute("aria-activedescendant")},[t]),Dbt(()=>{s===null?m(null):d===null&&u&&g(0)},[s,d,g,u]),f.useEffect(()=>Hh(t.registerCommand(FZ,({option:y})=>!(!y.ref||y.ref.current==null)&&(LZ(y.ref.current),!0),c)),[t,g,c]),f.useEffect(()=>Hh(t.registerCommand(T0e,y=>{const v=y;if(s!==null&&s.length){const x=d===null?0:d!==s.length-1?d+1:0;g(x);const b=s[x];b.ref!=null&&b.ref.current&&t.dispatchCommand(FZ,{index:x,option:b}),v.preventDefault(),v.stopImmediatePropagation()}return!0},c),t.registerCommand(M0e,y=>{const v=y;if(s!==null&&s.length){const x=d===null?s.length-1:d!==0?d-1:s.length-1;g(x);const b=s[x];b.ref!=null&&b.ref.current&&LZ(b.ref.current),v.preventDefault(),v.stopImmediatePropagation()}return!0},c),t.registerCommand(k0e,y=>{const v=y;return v.preventDefault(),v.stopImmediatePropagation(),e(),!0},c),t.registerCommand(N0e,y=>{const v=y;return s!==null&&d!==null&&s[d]!=null&&(v.preventDefault(),v.stopImmediatePropagation(),p(s[d]),!0)},c),t.registerCommand(Dh,y=>s!==null&&d!==null&&s[d]!=null&&(y!==null&&(y.preventDefault(),y.stopImmediatePropagation()),p(s[d]),!0),c)),[p,e,t,s,d,g,c]),a(n,f.useMemo(()=>({options:s,selectOptionAndCleanUp:p,selectedIndex:d,setHighlightedIndex:m}),[p,d,s]),r.match?r.match.matchingString:"")}function UZ(e,t){t!=null&&(e.className=t),e.setAttribute("aria-label","Typeahead menu"),e.setAttribute("role","listbox"),e.style.display="block",e.style.position="absolute"}function Vbt({options:e,onQueryChange:t,onSelectOption:n,onOpen:r,onClose:s,menuRenderFn:a,triggerFn:o,anchorClassName:i,commandPriority:c=n1e,parent:u,preselectFirstItem:d=!0,ignoreEntityBoundary:m=!1}){const[h]=ic(),[p,g]=f.useState(null),y=function(b,_,w,S=UI?document.body:void 0,C=!0){const[E]=ic(),M=f.useRef(UI?document.createElement("div"):null),T=f.useCallback(()=>{if(M.current===null||S===void 0)return;M.current.style.top=M.current.style.bottom;const N=E.getRootElement(),P=M.current,R=P.firstChild;if(N!==null&&b!==null){const{left:k,top:O,width:L,height:F}=b.getRect(),U=M.current.offsetHeight;if(P.style.top=`${O+U+3+(C?window.pageYOffset:0)}px`,P.style.left=`${k+window.pageXOffset}px`,P.style.height=`${F}px`,P.style.width=`${L}px`,R!==null){R.style.top=`${O}`;const V=R.getBoundingClientRect(),W=V.height,H=V.width,G=N.getBoundingClientRect();k+H>G.right&&(P.style.left=`${G.right-H+window.pageXOffset}px`),(O+W>window.innerHeight||O+W>G.bottom)&&O-G.top>W+F&&(P.style.top=`${O-W-F+(C?window.pageYOffset:0)}px`)}P.isConnected||(UZ(P,w),S.append(P)),P.setAttribute("id","typeahead-menu"),M.current=P,N.setAttribute("aria-controls","typeahead-menu")}},[E,b,C,w,S]);f.useEffect(()=>{const N=E.getRootElement();return b!==null&&T(),()=>{N!==null&&N.removeAttribute("aria-controls");const P=M.current;P!==null&&P.isConnected&&(P.remove(),P.removeAttribute("id"))}},[E,T,b]);const I=f.useCallback(N=>{b!==null&&(N||_(null))},[b,_]);Ubt(b,M.current,T,I);const j=M.current;return j!=null&&(UZ(j,w),S?.append(j)),M}(p,g,i,u),v=f.useCallback(()=>{g(null),s!=null&&p!==null&&s()},[s,p]),x=f.useCallback(b=>{g(b),r!=null&&p===null&&r(b)},[r,p]);return f.useEffect(()=>{const b=h.registerUpdateListener(()=>{h.getEditorState().read(()=>{if(!h.isEditable())return void v();const _=h._window||window,w=_.document.createRange(),S=Ze(),C=function(T){let I=null;return T.getEditorState().read(()=>{const j=Ze();Re(j)&&(I=function(N){const P=N.anchor;if(P.type!=="text")return null;const R=P.getNode();if(!R.isSimpleText())return null;const k=P.offset;return R.getTextContent().slice(0,k)}(j))}),I}(h);if(!Re(S)||!S.isCollapsed()||C===null||w===null)return void v();const E=o(C,h);if(t(E?E.matchingString:null),E!==null&&(m||!function(T,I){return I===0&&T.getEditorState().read(()=>{const j=Ze();if(Re(j)){const N=j.anchor.getNode().getPreviousSibling();return Qe(N)&&N.isTextEntity()}return!1})}(h,E.leadOffset))&&function(I,j,N){const P=al(N);if(P===null||!P.isCollapsed)return!1;const R=P.anchorNode,k=I,O=P.anchorOffset;if(R==null||O==null)return!1;try{j.setStart(R,k),j.setEnd(R,O)}catch{return!1}return!0}(E.leadOffset,w,_)!==null)return M=()=>x({getRect:()=>w.getBoundingClientRect(),match:E}),void(OZ in A?A[OZ](M):M());var M;v()})});return()=>{b()}},[h,o,t,p,v,x,m]),f.useEffect(()=>h.registerEditableListener(b=>{b||v()}),[h,v]),p===null||h===null||y.current===null?null:l.jsx(Bbt,{close:v,resolution:p,editor:h,anchorElementRef:y,options:e,menuRenderFn:a,shouldSplitNodeWithQuery:!0,onSelectOption:n,commandPriority:c,preselectFirstItem:d})}const v5=245,x5=240,iF=100,lF=["@","/"].join(""),exe=`\\.,\\+\\*\\?\\$\\@\\|#{}\\(\\)\\^\\-\\[\\]\\\\/!%'"~=<>_:;`,txe="[^"+lF+exe+"\\s]",$bt="(?:\\.[ |$]| |["+exe+"]|)",nxe=new RegExp("(^|\\s|\\()(["+lF+"]((?:"+txe+$bt+"){0,"+iF+"}))$"),rxe=new RegExp("(^|\\s|\\()(["+lF+"]((?:"+txe+"){0,"+iF+"}))$"),Wbt=10,Hbt={shortcut:5},cF=250,BZ={tab:0,file:1,space:2,shortcuts:3};function zbt(e,t){let n=nxe.exec(e);if(n===null&&(n=rxe.exec(e)),n!==null){const r=n[1],s=n[3];if(s.length>=t)return{leadOffset:n.index+r.length,matchingString:s,replaceableString:n[2]}}return null}class Gbt extends Fbt{uuid;variant;label;url;src;emoji;queryText;action;convertToNode;isAlwaysVisible;rightElement;className;constructor(t,n,r,s,a,o,i,c,u,d,m,h,p){super(t),this.uuid=n,this.variant=r,this.label=s,this.url=a,this.src=o,this.emoji=i,this.queryText=c,this.action=u,this.convertToNode=d,this.isAlwaysVisible=m,this.rightElement=h,this.className=p}}const sxe=A.memo(A.forwardRef(({options:e,onOpen:t=Rn,onClose:n=Rn,onTrigger:r=Rn},s)=>{const{$t:a}=X(),[o]=ic(),[i,c]=f.useState(!1),[u,d]=f.useState(null),[m,h]=f.useState(null),[p,g]=f.useState(!1),y=f.useCallback(()=>g(!0),[]),v=f.useCallback(()=>g(!1),[]),x=f.useCallback(()=>{c(!0),t()},[t]),b=f.useCallback(()=>{c(!1),d(null),n()},[n]),_=f.useCallback(j=>{switch(j){case"tab":return a({defaultMessage:"Tabs",id:"M56d6aRPai"});case"file":return a({defaultMessage:"Files",id:"m4vqJl0/FT"});case"space":return a({defaultMessage:"Spaces",id:"ZMoczsYew9"});case"shortcut":return a({defaultMessage:"Shortcuts",id:"7FAwwkYilD"});default:return j.toLocaleUpperCase()}},[a]);f.useEffect(()=>o.registerRootListener((j,N)=>{j&&(j.addEventListener("focus",y),j.addEventListener("blur",v)),N&&(N.removeEventListener("focus",y),N.removeEventListener("blur",v))}),[o,v,y]);const w=f.useMemo(()=>{const j=m?.toLocaleLowerCase().trim();if(u==="/"&&m?.includes(" "))return[];const N=e.filter(O=>j?O.label.toLowerCase().includes(j)||O.url?.includes(j)||O.isAlwaysVisible:!0).sort((O,L)=>(BZ[O.variant]??Number.MAX_SAFE_INTEGER)-(BZ[L.variant]??Number.MAX_SAFE_INTEGER));let P="",R=0;const k=[];return N.forEach(O=>{O.variant!==P&&(P=O.variant,R=0);const L=Hbt[P]??Wbt;R>=L&&!O.isAlwaysVisible||(k.push(O),R+=1)}),k.map(O=>new Gbt(O.uuid,O.uuid,O.variant,O.label,O.url,O.src,O.emoji,O.queryText,O.action,O.convertToNode,O.isAlwaysVisible,O.rightElement,O.className))},[m,u,e]),S=f.useMemo(()=>w.some(j=>j.convertToNode===void 0||j.convertToNode),[w]),C=f.useCallback(j=>{h(j)},[]),E=f.useCallback(j=>{const N=zbt(j,0);return N?.replaceableString&&(d(N.replaceableString[0]),r(N.replaceableString[0])),N},[r]),M=f.useCallback((j,N,P,R)=>{let k="";const O=[];return j.forEach((L,F)=>{L.variant!==k&&(k=L.variant,O.push({type:"separator",show:!0,text:_(k)})),O.push({type:"default",text:L.label,className:L.className,focused:F===N,customTextNode:l.jsx(D,{variant:"small",children:l.jsx(uF,{text:L.label,src:L.src,emoji:L.emoji,mentionVariant:L.variant,truncate:L.rightElement?"small":"medium",variant:"extraSmall",iconClassName:"mx-1 relative top-[-1.25px] h-4 w-4",emojiClassName:"mx-1 pl-[2px] align-middle shrink-0"})}),tooltipText:wh(L.queryText??"",cF),onMouseMove:()=>{R(F)},onMouseDown:U=>{U.preventDefault(),R(F),P(L)},rightElement:L.rightElement?.({focused:F===N}),preserveRightElementSpace:!L.rightElement})}),O},[_]),T=f.useCallback((j,N,P)=>{if(j.action&&(setTimeout(()=>{j.action?.()},0),j.convertToNode===!1)){P();return}o.update(()=>{const R=dF({uuid:j.uuid,variant:j.variant,text:j.label,url:j.url,src:j.src,emoji:j.emoji,queryText:j.queryText});N&&N.replace(R);const k=rr(" ");R.insertAfter(k),k.selectEnd(),P()})},[o]),I=f.useCallback((j,{selectedIndex:N,selectOptionAndCleanUp:P,setHighlightedIndex:R})=>{const k=()=>{if(!j.current)return{isTop:!1,leftOffset:0};const F=j.current.getBoundingClientRect(),V=window.innerHeight-F.bottom<v5&&F.top>v5;let W=0;const H=F.left+x5;return H>window.innerWidth&&(W=window.innerWidth-H-16),F.left+W<16&&(W=16-F.left),{isTop:V,leftOffset:W}},{isTop:O,leftOffset:L}=k();return j.current&&w.length?Ss.createPortal(l.jsx(pL,{removeScrollBar:!1,enabled:!0,children:l.jsx(z,{variant:yO.background,className:"shadow-overlay p-xs scrollable-container scrollbar overflow-y-auto overflow-x-hidden rounded-xl [scrollbar-gutter:stable]",style:{width:x5,minWidth:x5,maxHeight:v5,...O&&{bottom:"48px",position:"absolute"},...L!==0&&{left:`${L}px`,position:"absolute"}},children:l.jsx(bh,{items:M(w,S?N??-1:-1,P,R),disableScrollArea:!0,disableHoverStyles:S})})}),j.current):null},[w,M,S]);return f.useImperativeHandle(s,()=>({canSubmit:()=>!i||!S}),[i,S]),p?l.jsx(Vbt,{onQueryChange:C,onSelectOption:T,triggerFn:E,preselectFirstItem:S,onOpen:x,onClose:b,options:w,menuRenderFn:I}):null}));sxe.displayName="MentionsPlugin";const qbt=Object.freeze(Object.defineProperty({__proto__:null,AtSignMentionsRegex:nxe,AtSignMentionsRegexAliasRegex:rxe,LENGTH_LIMIT:iF,TOOLTIP_MAX_NUM_CHARACTERS:cF,default:sxe},Symbol.toStringTag,{value:"Module"})),uF=A.memo(({className:e,textClassName:t,iconClassName:n,emojiClassName:r,text:s,src:a,color:o,truncate:i,variant:c,emoji:u,mentionVariant:d,tooltipText:m})=>{const h=f.useMemo(()=>{let p;try{p=u?String.fromCodePoint(parseInt(u,16)):null}catch{p=null}return d==="space"?p?l.jsx("span",{className:B("inline-block select-none",r),children:p}):l.jsx(be,{icon:ya,className:B("text-quiet inline-block shrink-0 rounded-sm",n)}):a?l.jsx("i",{className:B("inline-block shrink-0 select-none rounded-sm bg-cover bg-center bg-no-repeat",n),style:{backgroundImage:`url(${a})`,fontSize:"0.78rem"}}):null},[n,r,d,a,u]);return l.jsx(bn,{tooltipText:m,showTooltip:!!m,children:l.jsxs("span",{className:B("inline-flex min-w-0 items-center align-top",{"max-w-[168px]":i==="small","max-w-[208px]":i==="medium","max-w-[250px]":i==="large"},e),spellCheck:!1,children:[h,l.jsx(D,{className:B("inline-block min-w-0 truncate",t),color:o,as:"span",variant:c,children:s})]})})});uF.displayName="MentionNodeTextContent";const axe=A.memo(e=>l.jsx(uF,{...e,className:"px-sm border-subtlest bg-offset dark:bg-subtle rounded-md border-[0.2px]",textClassName:"leading-[1.3]",iconClassName:"mr-1 h-[0.88rem] w-[0.88rem]",emojiClassName:"mr-1 text-[0.80rem]",truncate:"large"}));axe.displayName="MentionNodeDecorator";function Kbt(e){const t=e.textContent,n=e.getAttribute("data-mention-uuid"),r=e.getAttribute("data-mention-variant"),s=e.getAttribute("data-mention-url")??void 0,a=e.getAttribute("data-mention-src")??void 0,o=e.getAttribute("data-mention-emoji")??void 0,i=e.getAttribute("data-mention-query-text")??void 0;return t!==null&&n!==null&&r!==null?{node:dF({uuid:n,variant:r,text:t,url:s,src:a,emoji:o,queryText:i})}:null}class zE extends X0e{__props;static getType(){return"mention"}static clone(t){return new zE(t.__props,t.__key)}static importJSON(t){return dF(t.props).updateFromJSON(t)}constructor(t,n){super(n),this.__props=t}exportJSON(){return{...super.exportJSON(),props:this.__props}}createDOM(){return document.createElement("span")}isIsolated(){return!0}updateDOM(){return!1}decorate(){return l.jsx(axe,{text:this.__props.text,src:this.__props.src,emoji:this.__props.emoji,mentionVariant:this.__props.variant,tooltipText:wh(this.__props.queryText??"",cF)})}getTextContent(){switch(this.__props.variant){case"space":return"";case"shortcut":return this.__props.queryText??"";case"tab":return this.__props.url?`[${this.__props.text||this.__props.url}](${this.__props.url})`:this.__props.text;default:return this.__props.text}}exportDOM(){const t=document.createElement("span");return t.setAttribute("data-mention-uuid",this.__props.uuid),t.setAttribute("data-mention-variant",this.__props.variant),t.setAttribute("data-mention-url",this.__props.url??""),t.setAttribute("data-mention-src",this.__props.src??""),t.setAttribute("data-mention-emoji",this.__props.emoji??""),t.textContent=this.__props.text,{element:t}}static importDOM(){return{span:t=>!t.hasAttribute("data-mention-uuid")||!t.hasAttribute("data-mention-variant")?null:{conversion:Kbt,priority:4}}}}function dF(e){return Qa(new zE(e))}const oxe=[zE,eF,Qp],I_=[...K1e],GE=e=>{if(!e)return"";const n=s1e({namespace:"text-value",nodes:oxe});return n.update(()=>{Kn().clear(),DI(e,I_)},{discrete:!0}),n.read(()=>Kn().getTextContent())},Gg=e=>{if(!e||!e.root)return"";const t=n=>{let r="";if(n.type==="text"&&"text"in n)r=n.text;else if(n.type==="linebreak")r=`
`;else{if((n.type==="link"||n.type==="autolink")&&"url"in n)return r=`[${"children"in n&&Array.isArray(n.children)&&n.children.map(t).reduce((a,o)=>(a+=o,a),"")||""}](${n.url})`,r;if(n.type==="mention"){const a=n.props;if(a.variant==="tab")return r=`[${a.text||a.url}](${a.url})`,r;if(a.variant==="space")return r="",r;if(a.variant==="shortcut")return r=a.queryText??"",r}}return"children"in n&&Array.isArray(n.children)?n.children.map(t).reduce((s,a)=>(s+=a,s),r):r};return t(e.root)},Mr={input:["overflow-auto","max-h-[45vh]","lg:max-h-[40vh]","sm:max-h-[25vh]","outline-none","font-sans","resize-none","caret-super","selection:bg-super/30","selection:text-foreground","dark:selection:bg-super/10","dark:selection:text-super","dark:bg-offset","dark:text-foreground","bg-raised","text-foreground","placeholder-quieter","placeholder:select-none","scrollbar-subtle"],wrapper:{base:["bg-raised","w-full","outline-none","focus:outline-none","focus:ring-subtler","flex","items-center","placeholder-quieter","border","focus:ring-1","rounded-2xl"],expanded:["col-start-1","col-end-4","pb-3"],compact:["flex-grow","flex-shrink","p-sm","order-1"],disabled:"opacity-50 pointer-events-none cursor-not-allowed",darkMode:"dark:bg-offset dark:text-foreground dark:placeholder-quieter placeholder:text-super",transition:"duration-75 transition-all"},container:{base:"overflow-hidden relative flex h-full w-full"},attribution:{left:{base:["bg-raised","dark:bg-offset","gap-sm","flex","rounded-l-lg"],expanded:"col-start-1 row-start-2 -ml-two",compact:"order-0 ml-px"},right:{base:["bg-raised","dark:bg-offset","flex","items-center","justify-self-end","rounded-full"],expanded:"col-start-3 row-start-2",compact:"order-2 mr-px"}},placeholder:{base:["absolute","inset-0","pointer-events-none","select-none","text-quieter"],compact:"p-sm"}},Ybt=({isActive:e,isHighlighted:t})=>t?"border-super dark:border-super/85":e?"border-subtle":"border-subtler",Qbt=({hasShadow:e,hasQuote:t})=>e&&!t?"shadow-sm dark:shadow-md shadow-super/10 dark:shadow-black/10":"",ixe=A.memo(({quote:e,onClear:t})=>e?l.jsx("div",{className:"py-sm bg-offsetPlus/50 dark:bg-base animate-slideDownAndFadeIn z-[49] mx-3 rounded-lg px-3",children:l.jsxs("div",{className:"gap-sm flex items-start",children:[l.jsx(D,{color:"light",className:"mt-px flex items-center pt-1",variant:"tinyRegular",children:l.jsx(be,{icon:sTe,size:"xs",className:"rotate-180"})}),l.jsx(D,{className:"py-xs line-clamp-3 flex-1 overflow-hidden text-ellipsis",variant:"tinyRegular",color:"light",children:e}),l.jsx("div",{className:"shrink-0",children:l.jsx(ke,{icon:Xt,onClick:t,size:"tiny",pill:!0,toolTip:"Clear quote"})})]})}):null);ixe.displayName="QuotePreview";const Xbt=ge(async()=>{const{ClearEditorPlugin:e}=await oe(async()=>{const{ClearEditorPlugin:t}=await import("./LexicalClearEditorPlugin.prod-NTagxKbT.js");return{ClearEditorPlugin:t}},__vite__mapDeps([103,1,2,5,4,3]));return{default:e}}),Zbt=ge(async()=>{const{HistoryPlugin:e}=await oe(async()=>{const{HistoryPlugin:t}=await import("./LexicalHistoryPlugin.prod-DrFichbb.js");return{HistoryPlugin:t}},__vite__mapDeps([104,1,2,5,4,3]));return{default:e}}),Jbt=ge(async()=>{const{OnChangePlugin:e}=await oe(async()=>{const{OnChangePlugin:t}=await import("./LexicalOnChangePlugin.prod-Cm3bsdKu.js");return{OnChangePlugin:t}},__vite__mapDeps([105,1,2,5,4,3]));return{default:e}}),e_t=ge(async()=>{const{EditorRefPlugin:e}=await oe(async()=>{const{EditorRefPlugin:t}=await import("./LexicalEditorRefPlugin.prod-CwI8Dc1a.js");return{EditorRefPlugin:t}},__vite__mapDeps([106,1,2,5,4,3]));return{default:e}}),t_t=ge(async()=>{const{default:e}=await oe(async()=>{const{default:t}=await Promise.resolve().then(()=>qbt);return{default:t}},void 0);return{default:e}}),n_t=ge(async()=>{const{default:e}=await oe(async()=>{const{default:t}=await import("./AutoLinkPlugin-CLWo344t.js");return{default:t}},__vite__mapDeps([107,1,2,5,4,3]));return{default:e}}),r_t=ge(async()=>{const{default:e}=await oe(async()=>{const{default:t}=await import("./LinkPlugin-DMpbDa5M.js");return{default:t}},__vite__mapDeps([108,1,2,5,4,3]));return{default:e}}),s_t=ge(async()=>{const{MarkdownShortcutPlugin:e}=await oe(async()=>{const{MarkdownShortcutPlugin:t}=await import("./LexicalMarkdownShortcutPlugin.prod-_y4IU9Fr.js");return{MarkdownShortcutPlugin:t}},__vite__mapDeps([109,1,2,5,4,3]));return{default:e}});function a_t(e,t){switch(t.type){case"SET_EXPANDED":return{...e,isExpanded:t.payload};case"SET_ACTIVE":return{...e,isActive:t.payload};case"SET_COMPOSING":return{...e,isComposing:t.payload};default:return e}}const P1=cl("ResizableInputContext",{state:{isExpanded:!0,isActive:!1,isComposing:!1},dispatch:()=>{}}),lxe=(e,t,n,r,s)=>{f.useEffect(()=>{const a=n?15:40;e&&e.length>a||e?.includes(`
`)?s(!0):r!==(t==="expanded")&&s(t==="expanded")},[e,t,n,r,s])},fF=A.memo(({initialLayout:e="expanded",wrapperClass:t,size:n,hasShadow:r,isHighlighted:s,quote:a,setQuote:o,attachmentsList:i,inputWarnings:c,children:u,inputRef:d,ref:m})=>{const[h,p]=f.useReducer(a_t,{isExpanded:e==="expanded",isActive:!1,isComposing:!1}),{isActive:g,isExpanded:y}=h,v=f.useMemo(()=>{const w=Ybt({isActive:g,isHighlighted:s}),S=Qbt({hasShadow:r,hasQuote:!!a});return B(...Mr.wrapper.base,Mr.wrapper.darkMode,Mr.wrapper.transition,t,w,S,{"px-0 pt-3 pb-3":n==="large"&&y,"py-sm px-0":n==="large"&&!y})},[g,t,r,a,n,y,s]),x=f.useCallback(()=>d?.current?.focus(),[d]),b=f.useCallback(w=>{const S=w.target,C=d?.current?.element();C&&S!==C&&!C.contains(S)&&w.preventDefault()},[d]),_=f.useCallback(()=>o?.(null),[o]);return l.jsx(P1.Provider,{value:{state:h,dispatch:p},children:l.jsx("div",{className:"relative rounded-2xl",ref:m,onClick:x,onMouseDownCapture:b,children:l.jsxs("div",{className:B(v,"gap-y-md grid items-center"),children:[(c||a||i)&&l.jsxs("div",{className:B({"pt-xs":!y},"gap-y-sm grid items-center"),children:[c,a&&l.jsx(ixe,{quote:a,onClear:_}),i]}),l.jsx("div",{className:B({"px-3":n==="large"&&!y,"px-3.5":n==="large"&&y,flex:!y,"grid-rows-1fr-auto grid grid-cols-3":y}),children:u})]})})})});fF.displayName="ResizeableInputWrapper";const o_t=A.forwardRef(({autoFocus:e=!1,placeholder:t="",disableInput:n=!1,value:r,initialLayout:s="expanded",minRows:a,maxRows:o,onChange:i,onClick:c,onBlur:u,onFocus:d,onKeyDown:m,onPaste:h,isMobileStyle:p,isMobileUserAgent:g,testId:y,id:v},x)=>{const{state:b,dispatch:_}=f.useContext(P1),{isActive:w,isComposing:S,isExpanded:C}=b,E=f.useRef(w);E.current=w;const M=_p(n),T=f.useRef(null),I=f.useMemo(()=>B(Mr.container.base,{[Mr.wrapper.expanded.join(" ")]:C,[Mr.wrapper.compact.join(" ")]:!C,[Mr.wrapper.disabled]:n}),[n,C]),j=f.useMemo(()=>B(...Mr.input,"w-full"),[]),N=f.useCallback(K=>{_({type:"SET_EXPANDED",payload:K})},[_]),P=f.useCallback(K=>{_({type:"SET_ACTIVE",payload:K})},[_]),R=f.useCallback(K=>{_({type:"SET_COMPOSING",payload:K})},[_]),k=f.useCallback(K=>{d?.(K.nativeEvent),P(!0)},[d,P]),O=f.useCallback(K=>{u?.(K.nativeEvent)!==!1&&P(!1)},[u,P]),L=f.useCallback(()=>{if(T.current){const K=T.current.value.length;T.current.focus(),T.current.setSelectionRange(K,K),T.current.scrollTop=T.current.scrollHeight}},[]),F=f.useCallback(K=>{c?.(K.nativeEvent)},[c]),U=f.useCallback(K=>{jv(K.nativeEvent,{isMobileUserAgent:g,isComposing:S,onKeyDown:m})},[m,S,g]),V=f.useCallback(()=>e9(R),[R]),W=f.useCallback(()=>t9(R),[R]),H=f.useCallback(K=>{h?.(K.nativeEvent)},[h]),G=f.useCallback(K=>{i?.(K.target.value)},[i]);return f.useImperativeHandle(x,()=>{const K=T.current;return K.focusAtEnd=L,K.isFocused=()=>E.current,K.append=$=>{T.current&&(T.current.value+=$)},K.scrollToEnd=()=>{T.current&&(T.current.scrollTop=T.current.scrollHeight)},K.trim=()=>{T.current&&(T.current.value=T.current.value.trim())},K.element=()=>T.current,K},[L]),f.useEffect(()=>{!g&&T.current&&e&&(L(),P(!0))},[g,T,e,P,L]),f.useEffect(()=>{M!==n&&!n&&!g&&e&&setTimeout(()=>{T.current?.focus()},200)}),lxe(r,s,p,C,N),l.jsx("div",{className:I,children:l.jsx(ude,{ref:T,placeholder:t,minRows:a,maxRows:o,value:r,onClick:F,onChange:G,onKeyDown:U,onBlur:O,onCompositionStart:V,onCompositionEnd:W,onFocus:k,onPaste:H,className:j,autoComplete:"off","data-test-id":y,rows:a,id:v,disabled:n,"data-1p-ignore":!0})})}),BI="external-update",VI="focus",i_t="blur",l_t=new Set([BI,VI,i_t]),c_t=A.forwardRef(({autoFocus:e=!1,placeholder:t="",disableInput:n=!1,value:r,initialLayout:s="expanded",json:a,minRows:o,onChange:i,onClick:c,onBlur:u,onFocus:d,onKeyDown:m,onPaste:h,isMobileStyle:p,isMobileUserAgent:g,testId:y,id:v,namespace:x="ResizableLexicalInput",mentionTypeaheadOptions:b=ce,onMentionMenuOpen:_,onMentionMenuClose:w,onTriggerTypeahead:S},C)=>{const E=f.useRef(null),[M,T]=f.useState(null),{state:I,dispatch:j}=f.useContext(P1),{isActive:N,isComposing:P,isExpanded:R}=I,k=f.useRef(P),O=f.useRef(N),L=f.useRef(""),F=f.useRef(null),U=f.useRef(e),V=f.useRef(null);k.current=P,O.current=N,U.current=e;const W=_p(n),H=f.useMemo(()=>B(Mr.container.base,{[Mr.wrapper.expanded.join(" ")]:R,[Mr.wrapper.compact.join(" ")]:!R}),[R]),G=f.useMemo(()=>B(...Mr.input,"size-full"),[]),K=f.useMemo(()=>B(...Mr.placeholder.base,{[Mr.placeholder.compact]:!R}),[R]),$=f.useCallback(ue=>j({type:"SET_EXPANDED",payload:ue}),[j]),q=f.useCallback(ue=>j({type:"SET_ACTIVE",payload:ue}),[j]),Z=f.useCallback(ue=>j({type:"SET_COMPOSING",payload:ue}),[j]),se=f.useCallback(ue=>{ee.error(ue)},[]),Y=f.useCallback(ue=>{d?.(ue),q(!0)},[d,q]),Q=f.useCallback(ue=>{u?.(ue)!==!1&&q(!1)},[u,q]),re=f.useCallback(ue=>{h?.(ue)},[h]),te=f.useCallback(ue=>{c?.(ue)},[c]),le=f.useCallback((ue,Ue,Ct)=>{const Ye=[...Ct];let mt;if(Ye.length>0&&Ye.every(We=>l_t.has(We)))if(Ye.includes(VI)){if(mt=Gg(ue.toJSON()),mt===L.current)return}else return;mt===void 0&&(mt=Gg(ue.toJSON())),L.current=mt??"",F.current=ue.toJSON(),i?.(L.current,F.current)},[i]),ie=f.useCallback(()=>Z(!0),[Z]),pe=f.useCallback(()=>Z(!1),[Z]),me=f.useCallback(ue=>{jv(ue,{isMobileUserAgent:g,isComposing:k.current,onKeyDown:m})},[m,g]),de=f.useCallback(()=>M?.update(()=>{TI(VI),Kn().selectEnd()}),[M]),ve=f.useCallback(ue=>M?.update(()=>{const Ue=Kn(),Ct=rr(ue),Ye=Ue.getLastChild();if(Fh(Ye))Ye.append(Ct);else throw new Error("Last child is not a paragraph node");Ue.selectEnd()}),[M]),Ae=f.useCallback(()=>M?.update(()=>{const ue=Kn(),Ue=ue.getLastChild();if(Fh(Ue)){const Ct=Ue.getLastChild();Qe(Ct)&&(Ct.getTextContent().trimEnd()===""?Ct.remove():Ct.setTextContent(Ct.getTextContent().trimEnd()));const Ye=Ue.getFirstChild();Qe(Ye)&&(Ye.getTextContent().trimStart()===""?Ye.remove():Ye.setTextContent(Ye.getTextContent().trimStart()))}else throw new Error("Last child is not a paragraph node");ue.selectEnd()}),[M]),Se=f.useCallback(()=>{_?.()},[_]),De=f.useCallback(()=>{w?.()},[w]),Ne=f.useCallback(ue=>{M||te(ue.nativeEvent)},[M,te]);f.useImperativeHandle(C,()=>({append:ve,trim:Ae,focusAtEnd:de,isFocused:()=>O.current,focus:()=>M?.focus(),blur:()=>M?.blur(),scrollIntoView:ue=>M?.getRootElement()?.scrollIntoView(ue),scrollToEnd:()=>M?.getRootElement()?.scrollIntoView({block:"end",behavior:"auto"}),element:()=>E?.current,get scrollHeight(){return M?.getRootElement()?.scrollHeight??0},get value(){return Gg(M?.getEditorState()?.toJSON())},set value(ue){throw new Error("setValue is not supported in Lexical")},get json(){return M?.getEditorState().toJSON()}}),[ve,de,Ae,M]),lxe(r,s,p,R,$),f.useEffect(()=>{!g&&M&&e&&(de(),q(!0))},[g,e,q,M,de]),f.useEffect(()=>{W!==n&&!n&&!g&&e&&setTimeout(()=>de(),200)}),f.useEffect(()=>M?.registerRootListener((ue,Ue)=>{ue&&(ue.addEventListener("focus",Y),ue.addEventListener("blur",Q),ue.addEventListener("compositionstart",ie),ue.addEventListener("compositionend",pe),ue.addEventListener("keydown",me),ue.addEventListener("paste",re),ue.addEventListener("click",te)),Ue&&(Ue.removeEventListener("focus",Y),Ue.removeEventListener("blur",Q),Ue.removeEventListener("compositionstart",ie),Ue.removeEventListener("compositionend",pe),Ue.removeEventListener("keydown",me),Ue.removeEventListener("paste",re),Ue.removeEventListener("click",te))}),[Q,te,pe,Y,me,re,ie,M]),f.useEffect(()=>{M&&(r&&a&&!ua(a,F.current)?Promise.resolve().then(()=>{M.setEditorState(M.parseEditorState(a),{tag:BI}),U.current&&de(),F.current=M.getEditorState().toJSON(),L.current=Gg(F.current)}):L.current!==r&&(M.update(()=>{TI(BI);const ue=Kn();ue.clear(),DI(r,I_),U.current&&ue.selectEnd()},{discrete:!0}),F.current=M.getEditorState().toJSON(),L.current=Gg(F.current)))},[r,a,M,de]),f.useEffect(()=>{const ue=M?.registerCommand(qi,$e=>{const ct=Ze(),yt=ct?.getNodes();return yt?.length===1&&Tn(yt[0])?(yt[0].remove(),!0):Re(ct)?(ct.deleteCharacter($e),!0):au(ct)?(ct.deleteNodes(),!0):!1},Cl),Ue=M?.registerCommand(Oh,$e=>{const ct=Ze();return Re(ct)?(ct.deleteWord($e),!0):!1},Cl),Ct=M?.registerCommand(Lh,$e=>{const ct=Ze();return Re(ct)?(ct.deleteLine($e),!0):!1},Cl),Ye=M?.registerCommand(Tw,()=>{const $e=Ze();return Re($e)?($e.removeText(),!0):!1},Cl),mt=M?.registerCommand(jd,$e=>{const ct=Ze();if(typeof $e=="string")ct!==null&&ct.insertText($e);else{if(ct===null)return!1;const yt=$e.dataTransfer;if(yt!==null)rZ(yt,ct,M);else if(Re(ct)){const ht=$e.data;return ht&&ct.insertText(ht),!0}}return!0},Cl),We=M?.registerCommand(IE,$e=>{if("clipboardData"in $e){const yt=$e.clipboardData?.getData("text/plain");if(yt&&yt.length>bd)return $e.preventDefault(),!0}const ct=Ze();return Re(ct)?($e.preventDefault(),M.update(()=>{const yt=Ze(),ht=jw($e,InputEvent)||jw($e,KeyboardEvent)?null:"clipboardData"in $e?$e.clipboardData:null;if(ht!==null&&yt!==null){const{types:ut}=ht;if(ut.includes("text/html")||ut.includes("application/x-lexical-editor")||ht.files.length>0)rZ(ht,yt,M);else{const fn=yt.clone(),wr=br();DI(ht.getData("text/plain"),I_,wr),Ps(fn),II(M,wr.getChildren(),fn)}}},{tag:e1e}),!0):!1},Cl),Oe=M?.registerCommand(MD,$e=>{const ct=Bh($e.target);if(Tn(ct))return!1;const yt=Ze();if(Re(yt)){const{anchor:ht}=yt,ut=ht.getNode();if(yt.isCollapsed()&&ht.offset===0&&!Ms(ut)&&cxt(ut).getIndent()>0)return $e.preventDefault(),M.dispatchCommand(o1t,void 0);if(ixt&&navigator.language==="ko-KR")return!1}else if(!au(yt))return!1;return $e.preventDefault(),M.dispatchCommand(qi,!0)},Cl),Tt=M?.registerCommand(TD,$e=>{const ct=Bh($e.target);if(Tn(ct))return!1;const yt=Ze();return Re(yt)||au(yt)?($e.preventDefault(),M.dispatchCommand(qi,!1)):!1},Cl);return M?.registerNodeTransform(Du,$e=>{$e.getFormat()!==0&&$e.setFormat(0)}),M?.registerNodeTransform(Gp,$e=>{if($e.getChildrenSize()>1){const ct=$e.getChildren(),yt=br();ct.forEach(ht=>{Ee(ht)&&(yt.getChildren().length&&yt.append(po()),ht.getChildren().forEach(ut=>{(Qe(ut)||Tn(ut)||Od(ut)||Si(ut))&&yt.append(ut)}))}),$e.clear().append(yt).selectEnd()}}),M?.registerNodeTransform(qp,$e=>{const ct=$e.getParent();ct instanceof Qp&&($e.getChildren().forEach(ht=>{ct.append(ht)}),$e.remove())}),()=>{ue?.(),Ue?.(),Ct?.(),Ye?.(),mt?.(),We?.(),Oe?.(),Tt?.()}},[M,re]),f.useEffect(()=>{const ue=M?.registerCommand(Dh,Ue=>!Ue||V.current&&!V.current.canSubmit()?!1:(jv(Ue,{isMobileUserAgent:g,isComposing:k.current,onKeyDown:m}),Ue.defaultPrevented),Cl);return()=>{ue?.()}},[M,De,g,m]),f.useEffect(()=>{!n&&M&&!M.isEditable()&&M.setEditable(!0)},[n,M]);const Pe=f.useMemo(()=>({namespace:x,onError:se,nodes:oxe,theme:{link:"text-super hover:underline",text:{strikethrough:"line-through"}},editable:!n}),[x,se,n]),dt=f.useMemo(()=>({minHeight:`${(o??1)*1.5}em`}),[o]),et=f.useMemo(()=>l.jsx("div",{className:K,children:t}),[t,K]),Et=f.useMemo(()=>l.jsx(wbt,{className:G,"aria-placeholder":t,placeholder:et,"data-test-id":y,id:v}),[v,t,et,G,y]);return f.useMemo(()=>l.jsx("div",{className:H,children:l.jsx("div",{className:"w-full",style:dt,ref:E,onClick:Ne,children:l.jsxs(gbt,{initialConfig:Pe,children:[l.jsx(Obt,{contentEditable:Et,ErrorBoundary:Zs}),l.jsx(Zbt,{}),l.jsx(Xbt,{}),l.jsx(Jbt,{onChange:le,ignoreSelectionChange:!0}),l.jsx(e_t,{editorRef:T}),l.jsx(t_t,{ref:V,onClose:De,onOpen:Se,options:b,onTrigger:S}),l.jsx(n_t,{}),l.jsx(r_t,{}),l.jsx(hbt,{}),l.jsx(s_t,{transformers:I_})]})})}),[H,dt,Ne,Pe,Et,le,De,Se,b,S])}),mF=A.forwardRef((e,t)=>{const n=e.useLexical?c_t:o_t;return l.jsx(n,{...e,ref:t})}),cxe=A.memo(({children:e})=>{const{state:t}=f.useContext(P1),{isExpanded:n}=t;return e!==null?l.jsx("div",{className:B(...Mr.attribution.left.base,{[Mr.attribution.left.expanded]:n,[Mr.attribution.left.compact]:!n}),children:e}):null});cxe.displayName="LeftAttribution";const uxe=A.memo(({isLoading:e,children:t})=>{const{state:n}=f.useContext(P1),{isExpanded:r}=n;return l.jsxs("div",{className:B(...Mr.attribution.right.base,{[Mr.attribution.right.expanded]:r,[Mr.attribution.right.compact]:!r}),children:[e?l.jsx(D,{color:"light",className:"mr-3",children:l.jsx(be,{icon:Rre,size:"xs",className:"animate-spin"})}):null,t]})});uxe.displayName="RightAttribution";const dxe=A.memo(({value:e,suggestDropdownProps:t,ResizeableInputWrapperProps:n,ResizeableInputProps:r,leftAttributionComponents:s,rightAttributionComponents:a})=>{const o=r.onChange,i=r.ref,c=f.useRef(null),u=f.useRef(e);u.current=e;const d=f.useRef(null),m=f.useCallback(h=>{c.current=h,i instanceof Function?i(h):i&&(i.current=h)},[i]);return f.useEffect(()=>{c.current?.value&&c.current?.value!==u.current&&o?.(c.current?.value)},[o]),DC("ask-input"),l.jsx(Tp,{...t,floatingStrategy:"absolute",shouldEnableStacking:!0,portalTarget:d.current??void 0,value:e,children:l.jsxs(fF,{...n,ref:d,children:[l.jsx(mF,{...r,ref:m}),s,a]})})});dxe.displayName="AskInputBase";const Uu=A.memo(({size:e,inverse:t})=>l.jsx(z,{variant:"background",className:B("w-lg text-foreground flex aspect-square shrink-0 items-center justify-center rounded-full border",{"!w-[24px]":e==="small","!w-[16px]":e==="tiny"},{"!bg-inverse !text-inverse border-0":t}),children:l.jsx("svg",{width:e==="tiny"?"12":e==="small"?"16":"24",height:"auto",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:l.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.1927 4.54688C11.4375 4.71875 11.651 4.86458 12 4.86458C12.3453 4.86458 12.5529 4.72184 12.7993 4.55235L12.8073 4.54688L12.8084 4.54609C13.152 4.31187 13.5635 4.03125 14.5 4.03125C16.0885 4.03125 17.2083 6.30729 17.9375 8.6875C20.401 9.14062 22 9.875 22 10.6979C22 11.4427 20.6979 12.1094 18.6354 12.5677C18.6562 12.776 18.6667 12.9844 18.6667 13.1979C18.6667 14.0833 18.4948 14.9271 18.1823 15.6979H18.1965C17.2165 18.1697 14.8115 19.9169 12 19.9169C9.18854 19.9169 6.78355 18.1697 5.80356 15.6979H5.81771C5.50521 14.9271 5.33333 14.0833 5.33333 13.1979C5.33333 12.9844 5.34375 12.776 5.36458 12.5677C3.30208 12.1094 2 11.4427 2 10.6979C2 9.875 3.59896 9.14062 6.0625 8.6875C6.79167 6.30729 7.91146 4.03125 9.5 4.03125C10.4365 4.03125 10.848 4.31187 11.1916 4.54609L11.1927 4.54688ZM14.2708 15.6979H14.9167C16.0677 15.6979 17 14.7656 17 13.6146V12.8646C15.5312 13.0781 13.8229 13.1979 12 13.1979C10.1771 13.1979 8.46875 13.0781 7 12.8646V13.6146C7 14.7656 7.93229 15.6979 9.08333 15.6979H9.73437C10.5885 15.6979 11.3542 15.1458 11.625 14.3333C11.7448 13.9687 12.2604 13.9687 12.3802 14.3333C12.651 15.1458 13.4115 15.6979 14.2708 15.6979Z",fill:"currentColor"})})}));Uu.displayName="IncognitoIcon";const R1=A.memo(({className:e,color:t})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:t||"currentColor",viewBox:"0 0 66 24",className:e,children:[l.jsx("path",{d:"M33.569 17.032a1.919 1.919 0 0 1-.799-1.593c0-1.277.935-1.982 2.857-2.157l4.956-.473v.134c0 .784-.127 1.492-.378 2.105a3.958 3.958 0 0 1-1.012 1.456c-.834.753-1.993 1.15-3.354 1.15-.94 0-1.724-.215-2.27-.622Z"}),l.jsx("path",{clipRule:"evenodd",fillRule:"evenodd",d:"M60.756 1.398c1.886.991 3.382 2.457 4.443 4.353 1.03 1.813 1.55 3.918 1.55 6.257 0 2.339-.521 4.444-1.55 6.257a10.934 10.934 0 0 1-2.475 3.027l-7.77-9.445 5.845-7.145V3.92h-3.135l-.076.096-4.626 5.837h-.009l-4.626-5.837-.075-.096h-3.136v.782l5.847 7.146-5.847 7.145v.782h3.136l.075-.095 4.626-5.837h.01l7.214 9.087-.017.01c-1.293.703-1.948 1.06-3.755 1.06H.25V1.862C.25.834 1.085 0 2.113 0h52.932c2.063 0 3.985.482 5.711 1.398ZM27.842 19.773V9.272c0-1.69-.55-3.073-1.59-4.002-.954-.851-2.28-1.301-3.834-1.301-1.375 0-2.54.306-3.463.91-.62.407-1.137.946-1.572 1.642a.1.1 0 0 1-.175-.008 4.35 4.35 0 0 0-1.35-1.605c-.864-.624-1.97-.94-3.285-.94-2.436 0-3.62.89-4.327 1.824-.059.077-.181.038-.181-.06V4.32H5.063v15.452h3.09V10.71c0-1.377.358-2.442 1.064-3.166.65-.665 1.597-1.017 2.74-1.017.967 0 1.712.26 2.215.772.488.499.736 1.221.736 2.148v10.326h3.09V10.71c0-1.377.358-2.442 1.063-3.165.65-.666 1.597-1.018 2.74-1.018.967 0 1.712.26 2.215.773.489.498.736 1.221.736 2.148v10.325h3.09Zm15.8 0 .001-10.003c0-1.821-.64-3.32-1.85-4.334-1.146-.96-2.862-1.468-4.72-1.468-1.856 0-3.49.467-4.723 1.35-1.213.87-2.003 2.096-2.254 3.557-.057.331-.04.736-.04.736h3.008l.027-.22c.122-.963.521-1.708 1.185-2.213.669-.51 1.587-.768 2.738-.768s2.038.27 2.636.8c.619.55.933 1.391.933 2.502v.682l-5.356.507c-3.577.344-5.547 1.997-5.547 4.656 0 1.375.564 2.531 1.63 3.346 1.023.781 2.436 1.194 4.088 1.194 1.43 0 2.66-.304 3.656-.903a5.177 5.177 0 0 0 1.408-1.237c.059-.075.179-.033.179.063v1.753h3.002Z"})]}));R1.displayName="MaxBadge";const hF=A.memo(({className:e})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 51 24",className:e,children:[l.jsx("path",{d:"M35.069 7.954c-1.723 1.74-1.706 6.368 0 8.121 1.597 1.799 5.273 1.817 6.855 0 .873-.922 1.315-2.417 1.315-4.075 0-1.66-.442-3.144-1.317-4.048-1.584-1.853-5.256-1.834-6.853.002Z"}),l.jsx("path",{fillRule:"evenodd",d:"m48.958 5.715-.009-.015a10.792 10.792 0 0 0-4.387-4.301l-.01-.006C42.81.47 40.861 0 38.761 0H1.905C.866 0 .002.84 0 1.88V24h3.818V4.359h3.245v1.284c0 .132.161.196.252.1 2.987-3.275 9.077-2.319 11.216 1.723.725 1.234 1.092 2.759 1.092 4.534.102 4.584-3.017 8.265-7.55 8.235-2.031 0-3.629-.79-4.757-1.978a.146.146 0 0 0-.253.1V24h31.7c2.1 0 4.045-.468 5.78-1.39l.011-.005a10.795 10.795 0 0 0 4.394-4.302l.009-.016C49.98 16.483 50.5 14.368 50.5 12s-.52-4.482-1.543-6.285ZM30.112 7.42a24.93 24.93 0 0 1-.86-.003c-1.338-.02-2.845-.041-3.676.819-.549.54-.827 1.468-.827 2.759v8.809h-3.243V4.359h3.243v1.284c0 .148.194.202.271.077.314-.506.65-.852 1.012-1.05.616-.353 1.462-.532 2.514-.532h1.566V7.42Zm8.399 12.814c-4.77.033-8.068-3.395-7.973-8.235 0-1.716.348-3.21 1.033-4.442 2.714-5.062 11.157-5.068 13.852-.002.704 1.234 1.06 2.729 1.06 4.444.08 4.807-3.207 8.268-7.972 8.235Z",clipRule:"evenodd"}),l.jsx("path",{d:"M16.378 12c0 1.657-.442 3.153-1.314 4.075-1.583 1.816-5.26 1.798-6.857 0-1.706-1.753-1.722-6.381 0-8.121 1.597-1.836 5.27-1.855 6.854-.003.875.904 1.317 2.39 1.317 4.049Z"})]}));hF.displayName="ProBadge";const my=A.memo(({isMax:e,className:t})=>e?l.jsx("div",{style:{"--mode-color":"oklch(var(--max-color))"},children:l.jsx(R1,{className:`text-max ${t||""}`})}):l.jsx("div",{style:{"--mode-color":"oklch(var(--super-color))"},children:l.jsx(hF,{className:`text-super ${t||""}`})}));my.displayName="SearchModeBadge";const u_t=(e,t)=>{const{value:n,loading:r}=Ut({flag:"study-mode-enabled",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])};function pF(){const{gpt4Limit:e,pplxAlphaLimit:t,pplxBetaLimit:n,specialCapabilities:r}=Sn(),s=Je(),{hasAccessToProFeatures:a,isMax:o}=Nt(),i=Mp(),c=!r.unlimitedProSearch&&e<=0&&!a,u=!r.unlimitedResearch&&(e<=0||t<=0),d=e<=0||n<=0,{variation:m}=u_t(!1),p=Ot()?.user?.email??"",{isStudent:g}=W9({email:p,reason:"study-mode-access"});return f.useCallback(y=>{const v=wa[y],x=v===ae.SEARCH&&![fe.DEFAULT,fe.PRO].includes(y);if(y===fe.DEFAULT)return!0;if(s)return xr(y)===ae.STUDY&&!(m&&g)?!1:o?!0:c||xr(y)===ae.RESEARCH&&u||xr(y)===ae.STUDIO&&d||i(v)?!1:!(!a&&x&&!r.unlimitedProSearch);{const b=r.unlimitedProSearch&&xr(y)===ae.SEARCH&&!i(v),_=r.unlimitedResearch&&xr(y)===ae.RESEARCH&&!i(v);return b||_}},[c,u,d,a,r.unlimitedProSearch,r.unlimitedResearch,s,i,o,m,g])}function I1(){const{$t:e}=X(),t=Je(),{openVisitorLoginUpsell:n}=$n({enabled:!t}),r=Mp(),s=pF(),{openModal:a}=_t(),{specialCapabilities:o}=Sn(),i=f.useCallback((u,d)=>{const m=wa[u];if(u===fe.DEFAULT&&!d)return!1;const h=s(u)===!1||d;if(t)if(h){const p={[ae.SEARCH]:e({defaultMessage:"Want more {copilot}?",id:"Kf+JzdHL3c"},{copilot:"Pro Search"}),[ae.RESEARCH]:e({defaultMessage:"Want more Research?",id:"4cKm89wwuR"}),[ae.STUDIO]:e({defaultMessage:"Try Perplexity Labs",id:"y2BN7EwBoA"}),[ae.STUDY]:e({defaultMessage:"Step-by-step learning",id:"UGHOn5vTUx"})},g={[ae.SEARCH]:e({defaultMessage:"With {pplx} {pro}, get as many as you want",id:"jRMiP6Ut4n"},{pplx:"Perplexity",pro:"Pro"}),[ae.RESEARCH]:r(m)?e({defaultMessage:"Upgrade to Max for unlimited access to Perplexity Research.",id:"WuvGBcnhvG"}):e({defaultMessage:"Extended access for subscribers",id:"ATGyCTI4+V"}),[ae.STUDIO]:r(m)?e({defaultMessage:"Upgrade to Max for unlimited access to Perplexity Labs.",id:"jmWIIwpGtp"}):e({defaultMessage:"Exclusive access for subscribers",id:"1LB4QwRSMw"}),[ae.STUDY]:e({defaultMessage:"Ask questions and learn",id:"8RzCMAs2/c"})},y=p[m??ae.SEARCH],v=g[m??ae.SEARCH],b={[ae.SEARCH]:Be.TRY_COPILOT,[ae.RESEARCH]:Be.TRY_RESEARCH,[ae.STUDIO]:Be.TRY_LABS}[m??ae.SEARCH]??Be.TRY_COPILOT;return a("pricingModal",{pitchMessage:{title:y,description:v},origin:b}),!0}else return!1;else{if(u===fe.PRO&&o.unlimitedProSearch)return!1;const p={[ae.SEARCH]:e({defaultMessage:"Sign in to access Pro Search",id:"AARKXJYL5U"}),[ae.RESEARCH]:e({defaultMessage:"Sign in to access Perplexity Research",id:"D/01NxLK/G"}),[ae.STUDIO]:e({defaultMessage:"Sign in to try Perplexity Labs",id:"xJYMyIruMK"}),[ae.STUDY]:e({defaultMessage:"Sign in to access Perplexity Study",id:"PiR4Uw7Ibg"})},g={[ae.SEARCH]:e({defaultMessage:"10x as many citations in answers",id:"D0fULpN8/D"}),[ae.RESEARCH]:e({defaultMessage:"Deep research and analysis on any topic",id:"vZzVhXmhZo"}),[ae.STUDIO]:e({defaultMessage:"Create projects from scratch, exclusive access for subscribers",id:"STPFx+8/sC"}),[ae.STUDY]:e({defaultMessage:"Step-by-step learning",id:"UGHOn5vTUx"})},y=p[m??ae.SEARCH],v=g[m??ae.SEARCH];return n({title:y,description:v,origin:Be.TRY_PRO}),!0}},[e,s,t,a,n,r,o.unlimitedProSearch]),c=f.useCallback(u=>s(u)?!1:(t?a("pricingModal",{pitchMessage:{title:e({defaultMessage:"Choose a model",id:"fXlc3idTcy"}),description:e({defaultMessage:"With Perplexity Pro, you get unlimited access to all the latest AI models in one subscription",id:"YHjeXkhaC/"})},origin:Be.MODEL_SELECTOR}):n({title:e({defaultMessage:"Sign in to choose a model",id:"BhbQUiYsTB"}),description:e({defaultMessage:"Access the latest AI models from Perplexity, OpenAI, Anthropic (Claude), Google Gemini and more",id:"DDVABeGeBG"}),origin:Be.MODEL_SELECTOR}),!0),[s,t,a,n,e]);return f.useMemo(()=>({gateSearchModeSelection:i,gateSearchModelSelection:c}),[i,c])}function fxe(){const e=Ka(),{actions:t}=hn(),{setConfiguredModel:n,setConfiguredSearchMode:r,gpt4Limit:s,specialCapabilities:a}=Sn(),{gateSearchModelSelection:o}=I1(),{hasAccessToProFeatures:i}=Nt(),c=f.useCallback(()=>!a.unlimitedProSearch&&(s<=0||!i)?fe.DEFAULT:fe.PRO,[s,i,a.unlimitedProSearch]);return f.useCallback((u=c(),d=e)=>{o(u)||(t.setPreferredSearchModel(d,u),n(u),r(d))},[e,o,c,n,r,t])}function qE(){const e=fxe(),{isWindowsApp:t}=Wt(),{safeWindowsIpcPublish:n,safeWindowsIpcSubscribe:r}=zC(),s=f.useRef(e);f.useEffect(()=>{s.current=e},[e]);const a=f.useRef(r);return f.useEffect(()=>{a.current=r},[r]),f.useEffect(()=>{if(!t)return;const i=a.current(fm,c=>{c.type===fm&&s.current(c.model,c.searchMode)});return()=>{i?.()}},[t]),f.useCallback((i,c)=>{n(fm,{type:fm,model:i,searchMode:c}),s.current(i,c)},[n])}function Rl(e){switch(e){case ae.SEARCH:return fe.PRO;case ae.RESEARCH:return fe.ALPHA;case ae.STUDIO:return fe.BETA;case ae.STUDY:return fe.STUDY;default:return fe.PRO}}const mxe=A.memo(e=>{const{isFollowUp:t,value:n,onChange:r,buttonSize:s="small",variant:a="primaryGhost"}=e,o=Mp(),{$t:i}=X(),c=qE(),u=Ka(),d=f.useMemo(()=>n!==void 0?wa[n]||ae.SEARCH:u,[n,u]),{isMax:m,hasAccessToProFeatures:h}=Nt(),p=Je(),{gpt4Limit:g,pplxAlphaLimit:y,pplxBetaLimit:v,specialCapabilities:x}=Sn(),{preferredSearchModels:b,actions:_}=hn(),w=Is(),S=pF(),{isMaxUpsellEnabled:C}=Pu(),[E,M]=f.useState(()=>{const k=b[ae.SEARCH];return x.unlimitedProSearch?!0:k===fe.DEFAULT?!1:p});E&&g===0&&!x.unlimitedProSearch&&M(!1);const{gateSearchModeSelection:T}=I1(),I=f.useCallback(()=>{T(fe.BETA,!0)},[T]),j=f.useCallback(k=>T(k?fe.PRO:fe.DEFAULT)?(M(!1),_.setPreferredSearchModel(ae.SEARCH,fe.DEFAULT),!1):(M(k),_.setPreferredSearchModel(ae.SEARCH,k?fe.PRO:fe.DEFAULT),k),[_,T]),N=f.useCallback(k=>{(k===ae.SEARCH||C)&&_.setPreferredSearchMode(k);let O;switch(k){case ae.SEARCH:{E?O=b[k]??Rl(k):O=fe.DEFAULT;break}case ae.RESEARCH:{C?O=b[k]??Rl(k):O=Rl(k);break}case ae.STUDIO:{C?O=b[k]??Rl(k):O=Rl(k);break}default:{O=fe.DEFAULT;break}}if(!S(O)){T(O);return}r?r(O):c(O,k)},[_,C,E,r,b,c,S,T]),P=f.useMemo(()=>{function k(V,W){return{active:d===V,description:i(Vr[V].description),icon:ph[V],onClick(){N(V)},text:i(Vr[V].name),type:"default",...W}}const O=V=>p&&V<=10&&!m,L=[];L.push(k(ae.SEARCH,{customDescriptionNode:h?void 0:l.jsxs(l.Fragment,{children:[l.jsx(D,{className:"whitespace-pre-wrap",variant:"tinyRegular",color:"light",children:l.jsx(he,{...Vr[ae.SEARCH].description})}),l.jsxs("div",{className:"gap-md flex flex-col",children:[l.jsx("hr",{className:"border-subtler bg-subtler -mr-5 mt-3"}),l.jsxs("div",{className:"gap-sm -mr-5 flex items-start justify-between",children:[l.jsxs("div",{className:"gap-xs flex flex-col",children:[l.jsxs("div",{className:"gap-sm flex items-center",children:[l.jsx("button",{onClick:()=>{T(x.unlimitedProSearch?fe.PRO:fe.SONAR)},type:"button",children:l.jsx(D,{className:"font-medium underline",color:"super",variant:"tiny",children:l.jsx(he,{defaultMessage:"Try Pro Search",id:"akAejIEhqZ"})})}),l.jsx(my,{isMax:m,className:"h-2.5"})]}),l.jsx(D,{className:"italic",color:"super",variant:"tinyRegular",children:l.jsx(he,{defaultMessage:"3x more sources and detailed answers",id:"6RtAsLZTHv"})}),p&&g<=10&&l.jsx(D,{className:"mt-1 font-light",color:"super",variant:"tinyRegular",children:l.jsx(he,{defaultMessage:"{limit, plural, one {# query remaining today} other {# queries remaining today}}",id:"ooxxk0PKGd",values:{limit:g}})})]}),l.jsx(hxe,{isProSearchEnabled:E,selectSearchModel:c,selectedSearchMode:d,setIsProSearchEnabled:j})]})]})]}),customTextNode:l.jsxs("div",{className:"gap-sm mt-px flex items-center",children:[l.jsx(D,{variant:"smallBold",children:l.jsx(he,{...Vr[ae.SEARCH].name})}),l.jsx(my,{isMax:m,className:"h-2.5"})]})}));const F=Math.min(g,y);L.push(k(ae.RESEARCH,{customTextNode:l.jsxs("div",{className:"gap-sm mt-px flex items-center",children:[l.jsx(D,{variant:"smallBold",children:l.jsx(he,{...Vr[ae.RESEARCH].name})}),l.jsx(my,{isMax:m||o(ae.RESEARCH),className:"h-2.5"})]}),customDescriptionNode:l.jsxs("div",{className:"gap-xs flex flex-col",children:[l.jsx(D,{className:"whitespace-pre-wrap",variant:"tinyRegular",color:"light",children:l.jsx(he,{...Vr[ae.RESEARCH].description})}),O(F)&&l.jsxs("div",{children:[l.jsx(D,{color:"super",variant:"tinyRegular",children:l.jsx(he,{defaultMessage:"{limit, plural, one {# query remaining today} other {# queries remaining today}}",id:"ooxxk0PKGd",values:{limit:F}})}),o(ae.RESEARCH)&&l.jsx(ye,{onClick:I,variant:"common",size:"small",fullWidth:!0,extraCSS:"mt-sm",text:i({defaultMessage:"Upgrade to Max",id:"z+PtTMgM3T"})})]})]})}));const U=Math.min(g,v);return L.push(k(ae.STUDIO,{customTextNode:l.jsxs("div",{className:"gap-sm mt-px flex items-center",children:[l.jsx(D,{variant:"smallBold",children:l.jsx(he,{...Vr[ae.STUDIO].name})}),l.jsx(my,{isMax:m||o(ae.STUDIO),className:"h-2.5"})]}),customDescriptionNode:l.jsxs("div",{className:"gap-xs flex flex-col",children:[l.jsx(D,{className:"whitespace-pre-wrap",variant:"tinyRegular",color:"light",children:l.jsx(he,{...Vr[ae.STUDIO].description})}),O(U)&&l.jsxs("div",{children:[l.jsx(D,{color:"max",variant:"tinyRegular",children:l.jsx(he,{defaultMessage:"{limit, plural, one {# query remaining this month} other {# queries remaining this month}}",id:"wlPH+sOjjI",values:{limit:U}})}),o(ae.STUDIO)&&l.jsx(ye,{onClick:I,variant:"common",size:"small",fullWidth:!0,extraCSS:"mt-sm",text:i({defaultMessage:"Upgrade to Max",id:"z+PtTMgM3T"})})]})]})})),L},[h,m,p,g,E,c,d,j,y,o,I,i,v,N,T,x.unlimitedProSearch]),R=f.useMemo(()=>l.jsx(be,{icon:Zr,size:"xs",className:B("-mx-xs -mb-two opacity-50",{"-ml-sm":t})}),[t]);return l.jsx(en,{isMobileStyle:w,items:P,placement:"bottom-start",children:l.jsx(ye,{icon:ph[d],size:s,text:t?l.jsx(l.Fragment,{children:""}):i(Vr[d].name),variant:a,trailingComponent:R})})});mxe.displayName="SearchModeDropdownMenu";const hxe=A.memo(({isProSearchEnabled:e,selectSearchModel:t,selectedSearchMode:n,setIsProSearchEnabled:r})=>{const s=f.useCallback(o=>{r(o)&&n===ae.SEARCH&&t(o?fe.PRO:fe.DEFAULT)},[t,n,r]),a=f.useMemo(()=>({onClick(o){o.stopPropagation()}}),[]);return l.jsx(Go,{active:e,onChange:s,size:"small",switchProps:a})});hxe.displayName="SwitchFactory";const VZ=10,pxe=A.memo(e=>{const{children:t,tooltipContent:n,triggeredSearchModeElement:r,isOpen:s,setIsOpen:a}=e,{showSuggestDropdown:o}=Xs(),[i,c]=f.useState(!1),u=s!==void 0?s:i,d=a||c,m=f.useRef(0),[h,p]=tc(),[g,y]=tc(),x=f.useCallback(()=>{const{left:E=0,width:M=0}=r?.getBoundingClientRect()??{};return p.width===0||E===0?0:E-p.left+M/2-VZ/2},[p,r])();let b=x!==0;x!==0&&x!==m.current&&(b=m.current!==0,m.current=x);const _=f.useCallback(E=>{E||(m.current=0),d(E)},[d]),w=f.useCallback(E=>{E.preventDefault()},[]),S=f.useCallback(()=>{d(!1)},[d]),C=f.useCallback(E=>{E.preventDefault()},[]);return l.jsx(fO,{delayDuration:o?1e3:400,skipDelayDuration:100,children:l.jsxs(yoe,{onOpenChange:_,open:u,children:[l.jsx(mO,{asChild:!0,className:"focus:outline-none",onBlur:S,onClick:w,onPointerDown:C,children:t}),l.jsx(pO,{children:l.jsx(gO,{className:B("group/tooltip-content data-[state=closed]:animate-slideDownAndFadeOut data-[state=delayed-open]:animate-slideUpAndFadeIn transition-outExpo duration-300"),"data-color-scheme":"dark",sideOffset:4,side:"bottom",ref:h,children:l.jsxs(_e.div,{className:B("bg-base shadow-overlay flex w-72 flex-col rounded-lg"),animate:{height:y.height||void 0},transition:{duration:.05,ease:wu},children:[l.jsxs(_e.div,{className:'absolute left-0 group-data-[side="bottom"]/tooltip-content:top-0 group-data-[side="top"]/tooltip-content:bottom-0',animate:{opacity:m.current?1:void 0,x:b?x:void 0},initial:{opacity:0},transition:{duration:.05,ease:wu},style:{x,width:VZ},children:[l.jsx(n2,{className:"fill-inverse"}),l.jsx(n2,{className:"fill-inverse -translate-y-px scale-[99%]"})]}),l.jsx("div",{className:B("relative overflow-hidden"),children:l.jsx("div",{className:"whitespace-normal",ref:g,children:n})})]})})})]})})});pxe.displayName="SearchModeTooltip";const gxe={[ae.SEARCH]:fe.DEFAULT,[ae.RESEARCH]:fe.ALPHA,[ae.STUDIO]:fe.BETA,[ae.STUDY]:fe.DEFAULT},KE=A.memo(e=>{const{children:t,className:n,searchMode:r,...s}=e,{gateSearchModeSelection:a}=I1();return l.jsx("button",{className:B("group",n),onClick:()=>{a(gxe[r],!0)},type:"button",...s,children:l.jsx(D,{className:"!text-[var(--mode-color)] underline decoration-transparent transition-[text-decoration-color] group-hover:decoration-[var(--mode-color)]",variant:"smallBold",children:t})})});KE.displayName="SearchModeTooltipUpgradeButton";const YE=A.memo(e=>{const{badgeNode:t,color:n,enabledText:r,isEnabled:s,upgradeButton:a,isMaxUpsell:o=!1}=e;return l.jsxs("div",{className:"gap-sm flex items-center",style:{"--mode-color":n==="super"?"oklch(var(--super-color))":"oklch(var(--max-color))"},children:[t,s?l.jsxs("div",{className:"gap-xs flex items-center",children:[l.jsx(D,{className:"!text-[var(--mode-color)]",variant:"smallBold",children:r}),!o&&l.jsx(Ea,{className:"text-[var(--mode-color)]",size:18})]}):l.jsx(l.Fragment,{children:a})]})});YE.displayName="SearchModeTooltipFooter";const yxe=A.memo(e=>{const{searchMode:t}=e,{$t:n}=X(),r=Je(),{hasAccessToProFeatures:s}=Nt(),{gateSearchModeSelection:a}=I1(),o=Mp(),{specialCapabilities:i}=Sn(),c=f.useCallback(()=>{a(gxe[t],!0)},[a,t]);return o(t)?l.jsx(ye,{onClick:c,variant:"maxGold",size:"small",fullWidth:!0,text:n({defaultMessage:"Upgrade to Max",id:"z+PtTMgM3T"})}):i.unlimitedProSearch||i.unlimitedResearch||r&&s?null:l.jsx(ye,{onClick:c,variant:"primary",size:"small",fullWidth:!0,testId:"upgrade-to-pro-button",text:r?l.jsx(he,{defaultMessage:"Upgrade to Pro",id:"5N04mo7WNC"}):l.jsx(he,{defaultMessage:"Sign in for access",id:"w6mjA9GP58"})})});yxe.displayName="SearchModeTooltipUpsellButton";const j1=A.memo(e=>{const{footerNode:t,includeNewBadge:n,searchMode:r}=e,{$t:s}=X();return l.jsxs("div",{className:"p-md flex flex-col gap-4",children:[l.jsxs("div",{className:"gap-xs flex flex-col",children:[l.jsxs("div",{className:"relative",children:[l.jsx(D,{className:"text-box-trim-both",variant:"smallExtraBold",children:s(Vr[r].name)}),n&&l.jsx(z,{className:"absolute -right-1 -top-1 rounded-md px-2 py-1",variant:"offsetPlus",children:l.jsx(D,{variant:"tiny",children:l.jsx(he,{defaultMessage:"New",id:"bW7B87wFFp"})})})]}),l.jsx(D,{variant:"small",className:"text-pretty",children:s(Vr[r].description)})]}),l.jsx("hr",{className:"border-subtler bg-subtler"}),l.jsx("div",{className:"gap-xs flex flex-col",children:t}),l.jsx(yxe,{searchMode:r})]})});j1.displayName="SearchModeTooltipContentContainer";const QE=A.memo(({isMaxUpsell:e=!1})=>{const{isMax:t,isPro:n}=Nt();return t||e?l.jsx(R1,{className:"text-max h-3"}):n?l.jsx(hF,{className:"text-super h-3"}):null});QE.displayName="SearchModeBadge";const gF=({isMax:e,isPro:t,isMaxUpsell:n=!1})=>e||n?"max":"super",vxe=A.memo(e=>{const{isToggleActive:t,onToggleChange:n}=e,r=Je(),{hasAccessToProFeatures:s,isMax:a,isPro:o}=Nt(),{gpt4Limit:i,specialCapabilities:c,isGovernmentRequestOrigin:u}=Sn(),d=!r&&!c.unlimitedProSearch?null:s||c.unlimitedProSearch?u?l.jsx(he,{defaultMessage:"Unlimited access for government",id:"0JftsQv9MC"}):l.jsx(he,{defaultMessage:"Unlimited access for subscribers",id:"EvvPQiWwUI"}):i>0&&i<=10?l.jsx(he,{defaultMessage:"{limit, plural, one {# query remaining today} other {# queries remaining today}}",id:"ooxxk0PKGd",values:{limit:i}}):null,m=f.useMemo(()=>l.jsx(QE,{}),[]),h=f.useMemo(()=>({onClick(v){v.stopPropagation()}}),[]),p=f.useMemo(()=>l.jsx(KE,{searchMode:ae.SEARCH,children:l.jsx(he,{defaultMessage:"Try Pro Search",id:"akAejIEhqZ"})}),[]),g=f.useMemo(()=>l.jsx(he,{defaultMessage:"Enabled",id:"V52jNnY+6M"}),[]),y=f.useMemo(()=>l.jsxs("div",{className:"gap-sm flex",children:[l.jsxs("div",{className:"gap-xs flex w-full flex-col",children:[l.jsx(YE,{badgeNode:m,color:gF({isMax:a,isPro:o}),enabledText:g,isEnabled:s||c.unlimitedProSearch,upgradeButton:p}),l.jsx(D,{color:"default",variant:"small",className:"text-pretty",children:l.jsx(he,{defaultMessage:"3x more sources with powerful models and increased limits",id:"I8TyldAHCx"})}),d&&l.jsx(D,{color:"default",variant:"small",className:"mt-xs opacity-60",children:d})]}),!s&&!c.unlimitedProSearch&&l.jsx("div",{children:l.jsx(Go,{active:t,onChange:n,switchProps:h})})]}),[m,g,s,a,o,t,n,d,h,p,c.unlimitedProSearch]);return l.jsx(j1,{footerNode:y,searchMode:ae.SEARCH})});vxe.displayName="ProSearchModeTooltip";const xxe=A.memo(()=>{const e=Je(),{hasAccessToProFeatures:t,isMax:n,isPro:r}=Nt(),{gpt4Limit:s,pplxAlphaLimit:a,specialCapabilities:o,isGovernmentRequestOrigin:i}=Sn(),c=Mp(),u=c(ae.RESEARCH),d=!e&&!o.unlimitedResearch||Math.min(s,a)<=0||c(ae.RESEARCH)?null:o.unlimitedResearch&&i?l.jsx(he,{defaultMessage:"Unlimited access for government",id:"0JftsQv9MC"}):n?l.jsx(he,{defaultMessage:"Unlimited access for subscribers",id:"EvvPQiWwUI"}):a>0&&a<=10?l.jsx(he,{defaultMessage:"{limit, plural, one {# query remaining today} other {# queries remaining today}}",id:"ooxxk0PKGd",values:{limit:a}}):l.jsx(he,{defaultMessage:"Extended access for subscribers",id:"ATGyCTI4+V"}),m=f.useMemo(()=>l.jsx(QE,{isMaxUpsell:u}),[u]),h=f.useMemo(()=>u?l.jsx(he,{defaultMessage:"Unlimited access with Max",id:"ARAQvr+fwO"}):l.jsx(he,{defaultMessage:"Enabled",id:"V52jNnY+6M"}),[u]),p=f.useMemo(()=>l.jsx(KE,{searchMode:ae.RESEARCH,children:e?u?l.jsx(he,{defaultMessage:"Unlimited access with Max",id:"ARAQvr+fwO"}):l.jsx(he,{defaultMessage:"Extended access for subscribers",id:"ATGyCTI4+V"}):l.jsx(he,{defaultMessage:"Get more queries with Pro",id:"BZEuCK3Abs"})}),[e,u]),g=f.useMemo(()=>l.jsxs("div",{className:"gap-xs flex flex-col",children:[l.jsx(YE,{badgeNode:m,color:gF({isMax:n,isPro:r,isMaxUpsell:u}),enabledText:h,isEnabled:t||o.unlimitedResearch,upgradeButton:p,isMaxUpsell:u}),l.jsx(D,{color:"default",variant:"small",className:"text-pretty",children:l.jsx(he,{defaultMessage:"In-depth reports with more sources, charts, and advanced reasoning",id:"9V0OqZ9HGl"})}),d&&l.jsx(D,{color:"default",variant:"small",className:"mt-xs opacity-60",children:d})]}),[m,h,t,n,r,u,d,p,o.unlimitedResearch]);return l.jsx(j1,{footerNode:g,searchMode:ae.RESEARCH})});xxe.displayName="ResearchModeTooltip";const bxe=A.memo(()=>{const e=Je(),{hasAccessToProFeatures:t,isMax:n,isPro:r}=Nt(),{gpt4Limit:s,pplxBetaLimit:a}=Sn(),o=Mp(),i=o(ae.STUDIO),c=(()=>{if(!e)return null;if(!t)return l.jsx(he,{defaultMessage:"Upgrade to get access",id:"eRbSgHbjUP"});const p=Math.min(s,a);return p<=0||o(ae.STUDIO)?null:n?l.jsx(he,{defaultMessage:"Unlimited access for subscribers",id:"EvvPQiWwUI"}):l.jsx(he,{defaultMessage:"{limit, plural, one {# query remaining this month} other {# queries remaining this month}}",id:"wlPH+sOjjI",values:{limit:p}})})(),u=f.useMemo(()=>l.jsx(QE,{isMaxUpsell:i}),[i]),d=f.useMemo(()=>i?l.jsx(he,{defaultMessage:"Unlimited access with Max",id:"ARAQvr+fwO"}):l.jsx(he,{defaultMessage:"Enabled",id:"V52jNnY+6M"}),[i]),m=f.useMemo(()=>l.jsx(KE,{searchMode:ae.STUDIO,children:e?i?l.jsx(he,{defaultMessage:"Unlimited access with Max",id:"ARAQvr+fwO"}):l.jsx(he,{defaultMessage:"Access for subscribers only",id:"Ez3b/pzas/"}):l.jsx(he,{defaultMessage:"Get more queries with Pro",id:"BZEuCK3Abs"})}),[e,i]),h=f.useMemo(()=>l.jsxs("div",{className:"gap-xs flex flex-col",children:[l.jsx(YE,{badgeNode:u,color:gF({isMax:n,isPro:r,isMaxUpsell:i}),enabledText:d,isEnabled:t,upgradeButton:m,isMaxUpsell:i}),l.jsx(D,{color:"default",variant:"small",className:"text-pretty",children:i?l.jsx(he,{defaultMessage:"Draft, design, deliver your ideas.",id:"I1aIhz4l3D"}):l.jsx(he,{defaultMessage:"Turn your ideas into completed docs, slides, dashboards, and more",id:"WRu1tcOhoj"})}),c&&l.jsx(D,{color:"default",variant:"small",className:"mt-xs opacity-60",children:c})]}),[u,d,t,n,r,i,c,m]);return l.jsx(j1,{footerNode:h,searchMode:ae.STUDIO,includeNewBadge:!0})});bxe.displayName="StudioModeTooltip";const _xe=A.memo(()=>{const e=A.useMemo(()=>l.jsx("div",{children:l.jsx(D,{color:"default",variant:"small",className:"text-pretty",children:l.jsx(he,{defaultMessage:"Interactive learning and study tools that guide you toward deeper understanding beyond quick answers. ",id:"ZRKKxSc+oV"})})}),[]);return l.jsx(j1,{footerNode:e,searchMode:ae.STUDY,includeNewBadge:!0})});_xe.displayName="StudyModeTooltip";var yF="Radio",[d_t,wxe]=Ga(yF),[f_t,m_t]=d_t(yF),Sxe=f.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:s=!1,required:a,disabled:o,value:i="on",onCheck:c,form:u,...d}=e,[m,h]=f.useState(null),p=kn(t,v=>h(v)),g=f.useRef(!1),y=m?u||!!m.closest("form"):!0;return l.jsxs(f_t,{scope:n,checked:s,disabled:o,children:[l.jsx(on.button,{type:"button",role:"radio","aria-checked":s,"data-state":Txe(s),"data-disabled":o?"":void 0,disabled:o,value:i,...d,ref:p,onClick:jt(e.onClick,v=>{s||c?.(),y&&(g.current=v.isPropagationStopped(),g.current||v.stopPropagation())})}),y&&l.jsx(Mxe,{control:m,bubbles:!g.current,name:r,value:i,checked:s,required:a,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});Sxe.displayName=yF;var Cxe="RadioIndicator",Exe=f.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...s}=e,a=m_t(Cxe,n);return l.jsx(Rs,{present:r||a.checked,children:l.jsx(on.span,{"data-state":Txe(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t})})});Exe.displayName=Cxe;var h_t="RadioBubbleInput",Mxe=f.forwardRef(({__scopeRadio:e,control:t,checked:n,bubbles:r=!0,...s},a)=>{const o=f.useRef(null),i=kn(o,a),c=n9(n),u=NS(t);return f.useEffect(()=>{const d=o.current;if(!d)return;const m=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(m,"checked").set;if(c!==n&&p){const g=new Event("click",{bubbles:r});p.call(d,n),d.dispatchEvent(g)}},[c,n,r]),l.jsx(on.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:i,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Mxe.displayName=h_t;function Txe(e){return e?"checked":"unchecked"}var p_t=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],XE="RadioGroup",[g_t,qWt]=Ga(XE,[kE,wxe]),kxe=kE(),Nxe=wxe(),[y_t,v_t]=g_t(XE),Axe=f.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:s,value:a,required:o=!1,disabled:i=!1,orientation:c,dir:u,loop:d=!0,onValueChange:m,...h}=e,p=kxe(n),g=_C(u),[y,v]=ti({prop:a,defaultProp:s??null,onChange:m,caller:XE});return l.jsx(y_t,{scope:n,name:r,required:o,disabled:i,value:y,onValueChange:v,children:l.jsx(jve,{asChild:!0,...p,orientation:c,dir:g,loop:d,children:l.jsx(on.div,{role:"radiogroup","aria-required":o,"aria-orientation":c,"data-disabled":i?"":void 0,dir:g,...h,ref:t})})})});Axe.displayName=XE;var Pxe="RadioGroupItem",Rxe=f.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...s}=e,a=v_t(Pxe,n),o=a.disabled||r,i=kxe(n),c=Nxe(n),u=f.useRef(null),d=kn(t,u),m=a.value===s.value,h=f.useRef(!1);return f.useEffect(()=>{const p=y=>{p_t.includes(y.key)&&(h.current=!0)},g=()=>h.current=!1;return document.addEventListener("keydown",p),document.addEventListener("keyup",g),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keyup",g)}},[]),l.jsx(Ove,{asChild:!0,...i,focusable:!o,active:m,children:l.jsx(Sxe,{disabled:o,required:a.required,checked:m,...c,...s,name:a.name,ref:d,onCheck:()=>a.onValueChange(s.value),onKeyDown:jt(p=>{p.key==="Enter"&&p.preventDefault()}),onFocus:jt(s.onFocus,()=>{h.current&&u.current?.click()})})})});Rxe.displayName=Pxe;var x_t="RadioGroupIndicator",Ixe=f.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,s=Nxe(n);return l.jsx(Exe,{...s,...r,ref:t})});Ixe.displayName=x_t;const vF=A.memo(e=>{const{className:t="",layoutKey:n="",options:r,value:s,backgroundClassName:a="",radioGroupIndicatorClassName:o="",variant:i="default",...c}=e,u=(()=>{switch(i){case"offsetPlus":return"";case"default":return"bg-white dark:bg-black dark:bg-gradient-to-b dark:from-super/20 dark:to-super/20";default:Qt(i)}})(),d=f.useMemo(()=>r.map(h=>{const p=h.value===s;return f.createElement(Rxe,{...h.elementProps,"aria-label":h.label,disabled:h.disabled??void 0,className:"segmented-control group/segmented-control relative focus:outline-none",key:h.value,value:h.value},p&&l.jsx(Ixe,{asChild:!0,className:B("pointer-events-none absolute inset-0 z-0 block",u,"border-super dark:border-super/30 border","rounded-lg","shadow-super/30 dark:shadow-super/5 shadow-[0_1px_3px_0]","dark:text-super","transition-colors duration-300","group-focus-visible/segmented-control:border-dashed",o),children:l.jsx(_e.div,{layoutId:`segmented-control-active-indicator-${n}`,transition:{duration:.1}})}),h.children)}),[r,s,u,o,n]),m=(()=>{switch(i){case"offsetPlus":return"bg-offsetPlus";case"default":return"bg-super/10 dark:bg-black/[0.18]";default:Qt(i)}})();return l.jsxs(Axe,{...c,className:B("group relative isolate flex h-fit",t),value:s,children:[l.jsx("div",{className:B("absolute inset-0",m,"dark:border dark:border-black/[0.04]","rounded-[10px]","transition-colors duration-300",a)}),l.jsx("div",{className:"p-two flex items-center",children:d})]})});vF.displayName="SegmentedControl";const xF=A.memo(e=>{const{className:t="",isActiveOption:n,icon:r,label:s,activeColor:a="text-super"}=e,o=B("transition-colors duration-300",{[a]:n,"text-quiet group-hover/segmented-control:text-foreground":!n});return l.jsxs("div",{className:B("relative z-10 flex h-8 min-w-9 items-center justify-center",{"py-xs gap-xs px-2.5":n||s},t),children:[r&&l.jsx(My,{buttonSize:"small",icon:r,iconClassName:B(o),showClicked:!1}),s&&l.jsx("div",{className:B("px-two font-sans text-sm leading-[1.125rem]",o),children:s})]})});xF.displayName="SegmentedControlOption";const jxe=A.memo(e=>{const{isFollowUp:t,layoutKey:n,value:r,onChange:s,className:a,variant:o}=e,i=Ka(),c=f.useMemo(()=>r!==void 0?wa[r]||ae.SEARCH:i,[r,i]),{$t:u}=X(),d=qE(),m=Pt(),{inputRef:h}=Xs(),p=Je(),{gpt4Limit:g,specialCapabilities:y}=Sn(),{preferredSearchModels:v,actions:x}=hn(),{isMaxUpsellEnabled:b}=Pu(),[_,w]=f.useState(ae.SEARCH),S=f.useRef(null),[C,E]=f.useState(!1),M=f.useRef(null);f.useEffect(()=>()=>{M.current&&clearTimeout(M.current)},[]);const{gateSearchModeSelection:T}=I1(),[I,j]=f.useState(()=>v[ae.SEARCH]===fe.DEFAULT?!1:p||y.unlimitedProSearch),N=f.useCallback(H=>T(H?fe.PRO:fe.DEFAULT)?(j(!1),x.setPreferredSearchModel(ae.SEARCH,fe.DEFAULT),!1):(j(H),x.setPreferredSearchModel(ae.SEARCH,H?fe.PRO:fe.DEFAULT),H),[x,T]),P=f.useCallback(H=>{switch(H){case ae.SEARCH:return I?v[H]??Rl(H):fe.DEFAULT;case ae.RESEARCH:return v[H]??Rl(H);case ae.STUDIO:return v[H]??Rl(H);case ae.STUDY:return fe.STUDY}},[I,v]),R=pF(),k=R(fe.STUDY),O=f.useCallback(H=>{(H===ae.SEARCH||b)&&x.setPreferredSearchMode(H);const G=P(H);R(G)?(s?s(G):d(G,H),h.current?.focus(),E(!1)):T(G)},[x,R,T,P,h,b,s,d,E]),L=f.useCallback(H=>{if(N(H),c===ae.SEARCH){const G=H?fe.PRO:fe.DEFAULT;s?s(G):d(G)}},[s,d,c,N]),F=f.useMemo(()=>{const H=k?lz:lz.filter(K=>K!==ae.STUDY);function G(K){const{searchMode:$}=K,q=P($),Z=H.length<3&&!t;return{children:l.jsx("div",{"data-testid":`search-mode-${$}`,children:l.jsx(xF,{label:Z?l.jsx(he,{...Vr[$].name}):void 0,icon:ph[$],isActiveOption:c===$})}),elementProps:{"aria-disabled":R(q)===!1?!0:void 0,onPointerEnter(se){M.current&&clearTimeout(M.current),S.current=se.currentTarget,w($),M.current=setTimeout(()=>{E(!0)},800)},onPointerLeave(){M.current&&(clearTimeout(M.current),M.current=null)},onClick(){M.current&&(clearTimeout(M.current),M.current=null),h.current?.focus(),E(!1)}},label:u(Vr[$].name),value:$}}return H.map(K=>G({searchMode:K}))},[P,t,u,c,R,h,k]);I&&g===0&&!y.unlimitedProSearch&&j(!1);let U;switch(_){case ae.SEARCH:{U=l.jsx(vxe,{isToggleActive:I,onToggleChange:L});break}case ae.RESEARCH:{U=l.jsx(xxe,{});break}case ae.STUDIO:{U=l.jsx(bxe,{});break}case ae.STUDY:{U=l.jsx(_xe,{});break}}const V=f.useMemo(()=>l.jsx(st,{initial:!1,mode:"popLayout",children:l.jsx(_e.div,{animate:{opacity:1},exit:{opacity:0},initial:{opacity:0},transition:{duration:.15},children:U},_)}),[U,_]),W=f.useCallback(H=>{H.target.tagName===document.activeElement?.tagName&&(S.current=H.target,w(c),E(!0))},[c]);return l.jsx(pxe,{tooltipContent:V,triggeredSearchModeElement:S.current,isOpen:C,setIsOpen:E,children:l.jsx(vF,{layoutKey:`segmented-search-mode-selector_${n??m}`,options:F,onFocus:W,onValueChange:O,value:c,className:a,variant:o})})});jxe.displayName="SegmentedSearchModeSelector";const Oxe="(pointer: coarse)";function $Z(){return typeof window>"u"?!1:window.matchMedia(Oxe).matches}function b_t(){const e=Is(),[t,n]=f.useState(()=>$Z()||e);return f.useLayoutEffect(()=>{if(typeof window>"u")return;const r=window.matchMedia(Oxe);function s(){n($Z())}return r.addEventListener("change",s),s(),function(){r.removeEventListener("change",s)}},[]),t}const bF=A.memo(({isFollowUp:e,layoutKey:t,value:n,onChange:r,className:s,buttonSize:a,variant:o="default"})=>{const i=b_t(),c=Is();if(i||c){const u=(()=>{switch(o){case"default":return"primaryGhost";case"offsetPlus":return"common"}})();return l.jsx(mxe,{isFollowUp:e,value:n,onChange:r,buttonSize:a,variant:u})}else return l.jsx(jxe,{isFollowUp:e,layoutKey:t,value:n,onChange:r,className:s,variant:o})});bF.displayName="SearchModeSelector";const __t=({showIncognitoHint:e,showSearchModeSelector:t=!0,isFollowUp:n,layoutKey:r})=>{const s="ask-input-left-attributions",{$t:a}=X(),{isMacOS:o}=Wt(),i=ea({reason:s});return l.jsx(cxe,{children:l.jsx(dc,{children:l.jsx("div",{className:B("gap-xs flex items-center"),children:l.jsxs(st,{initial:!1,mode:"popLayout",children:[i&&e&&l.jsx(_e.div,{className:"mr-xs flex shrink-0 items-center",initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},children:l.jsx(bn,{className:"max-w-[280px]",tooltipText:a({defaultMessage:"Create anonymous threads that don't appear in your library and expire after 24 hours.",id:"BBjMWPmxC0"}),keyboardShortcut:o?["",";"]:["ctrl",";"],asChild:!0,children:l.jsx("span",{children:l.jsx(Uu,{size:"small",inverse:!0})})})}),t&&l.jsx(bF,{isFollowUp:n,layoutKey:r})]})})})})},Lxe=A.memo(__t);Lxe.displayName="AskInputLeftAttribution";const _F=[".txt",".pdf",".docx",".pptx",".xlsx",".md",".csv"],wF=[".txt",".pdf",".jpg",".jpeg",".png",".docx",".pptx",".xlsx",".md",".csv"],SF=[".mp3",".wav",".aiff",".ogg",".flac",".mp4",".mpeg",".mov",".avi",".flv",".mpg",".webm",".wmv",".3gp"],WZ=27,w_t=2e4;let b5=!1,El=null;const S_t=()=>{const e=f.useRef(null),t=f.useRef(null);let n="";typeof window<"u"&&(window.location.hostname==="localhost"?n=`${window.location.protocol}//${window.location.hostname}:${window.location.port}/account/connectors`:n=`${window.location.protocol}//${window.location.hostname}/account/connectors`);const r=(c,u)=>u?c==="sharepoint"?u:u+"-my":null,s=f.useCallback(async(c,u)=>{u.success=!1;const d=r(c.connector,c.tenantName);u.tenant=d,El||(El=await(await oe(()=>import("./index-C3FxZ4wa.js"),__vite__mapDeps([110,2]))).PublicClientApplication.createPublicClientApplication({auth:{authority:d?"https://login.microsoftonline.com/common":"https://login.microsoftonline.com/consumers",clientId:c.clientId,redirectUri:n},cache:{cacheLocation:"sessionStorage",storeAuthStateInCookie:!0}}));const m=d?[`https://${d}.sharepoint.com/.default`]:["OneDrive.ReadWrite"];u.scopes=m;const h={scopes:m,login_hint:c.loginHint,prompt:"select_account"};let p=null,g=El.getActiveAccount();if(g||(g=El.getAllAccounts().find(v=>v.username===c.loginHint)??null),u.hasActiveAccount=!!g?.username,g)try{El.setActiveAccount(g),p=(await El.acquireTokenSilent(h)).accessToken}catch(y){u.silentAcquisitionError=y instanceof Error?y.toString():y}if(!p&&!b5)try{b5=!0;const y=await El.loginPopup(h);El.setActiveAccount(y.account),p=(await El.acquireTokenSilent(h)).accessToken}catch(y){u.interactiveAcquisitionError=y instanceof Error?y.toString():y}finally{b5=!1}else p||(u.interactiveAuthenticationSkipped=!0);if(p)return u.success=!0,u.accessTokenLength=p.length,p;throw Error("Access token not acquired")},[n]),a=f.useCallback(c=>{const u=r(c.connector,c.tenantName);let d=c.mode==="source"?_F:wF;d=c.isAudioVideoFilesEnabled?d.concat(SF):d;const m={sdk:"8.0",messaging:{origin:n,channelId:WZ},authentication:{},entry:c.connector==="sharepoint"?{sharePoint:{}}:{oneDrive:{}},typesAndSources:{mode:c.mode==="attachment"?"files":"all",filters:d,pivots:{recent:!1,oneDrive:!1,sharedLibraries:!1}},selection:{mode:"multiple"}},h=new URLSearchParams({filePicker:JSON.stringify(m)});return c.webUrl?`${c.webUrl}/_layouts/15/FilePicker.aspx?${h}`:u?`https://${u}.sharepoint.com/_layouts/15/FilePicker.aspx?${h}`:`https://onedrive.live.com/picker?${h}`},[n]),o=f.useCallback(async c=>{const u=b=>{window.removeEventListener("message",h),t.current?.removeEventListener("message",m),t.current?.close(),e.current?.close(),b?c.onError?.(b):c.onCancel?.()},d=async(b,_)=>await new Promise((w,S)=>{const C=setTimeout(()=>{S(new Error("Request timed out"))},w_t);s(b,_).then(E=>{clearTimeout(C),w(E)}).catch(E=>{clearTimeout(C),S(E)})}),m=async b=>{const _={};switch(b.data.type){case"command":t.current?.postMessage({type:"acknowledge",id:b.data.id});const w=b.data.data;switch(w.command){case"authenticate":try{const S=await d(c,_);t.current?.postMessage({type:"result",id:b.data.id,data:{result:"token",token:S}})}catch(S){_.errorStep="authenticateCommand",_.error=S instanceof Error?S.toString():S,u(S)}finally{c.log?.(c.connectionType??c.connector.toUpperCase(),_)}break;case"pick":t.current?.postMessage({type:"result",id:b.data.id,data:{result:"success"}}),c.onPicked?.(w.items),u();break;case"close":u();break;default:u();break}break}},h=async b=>{if(b.source&&b.source===e.current){const _=b.data;_.type==="initialize"&&_.channelId===WZ&&(t.current=b.ports[0],t.current.addEventListener("message",m),t.current.start(),t.current.postMessage({type:"activate"}))}};let p;const g={};try{p=await s(c,g)}catch(b){g.errorStep="initialization",g.error=b instanceof Error?b.toString():b,u(b);return}finally{c.log?.(c.connectionType??c.connector.toUpperCase(),g)}const y=document.getElementById("microsoft-file-picker");if(!y){u();return}if(e.current=y.contentWindow,!e?.current){u();return}const v=e.current.document.createElement("form");v.setAttribute("action",a(c)),v.setAttribute("method","POST"),e.current.document.body.append(v);const x=e.current.document.createElement("input");x.setAttribute("type","hidden"),x.setAttribute("name","access_token"),x.setAttribute("value",p),v.appendChild(x),e.current.document.body.appendChild(v),v.submit(),window.addEventListener("message",h)},[s,a]),i=f.useCallback((c,u)=>{let d;if(c.parentReference.sharepointIds?.siteId&&u==="sharepoint"){const h={item_id:c.id,drive_id:c.parentReference.driveId,site_id:c.parentReference.sharepointIds.siteId};d=JSON.stringify(h)}else d=c.id;const m=kC(c.name);return m?{id:d,name:c.name,sizeBytes:c.size,mimeType:AP[m]}:null},[]);return f.useMemo(()=>({openPicker:o,toPickerDocument:i}),[o,i])},$I="box-file-picker",C_t="0";let Mb=null,HZ=!1;const E_t=()=>Mb||(Mb=new Promise((e,t)=>{const n=document.createElement("link");n.rel="stylesheet",n.href="https://cdn01.boxcdn.net/platform/elements/17.1.0/en-US/picker.css";const r=document.createElement("script");r.src="https://cdn01.boxcdn.net/platform/elements/17.1.0/en-US/picker.js",r.onload=()=>{if(!HZ){const s=document.createElement("style");s.textContent=`
                .be .be-header input[type="search"] {
                    background: white;
                }

                .btn-content {
                    display: flex;
                    justify-content: center;
                    align-items: center;
                }
            `,document.head.appendChild(s),HZ=!0}e()},r.onerror=t,n.onload=()=>document.body.appendChild(r),document.head.appendChild(n)}),Mb),M_t=({apiKey:e,mode:t,isAudioVideoFilesEnabled:n,onPicked:r,onCancel:s,onError:a})=>{const o=f.useRef(null),i=f.useCallback(async(u="file")=>{try{if(await E_t(),!document.getElementById($I)){a?.("Attempted to open picker when container isn't ready");return}let m=t==="source"?_F:wF;m=n?m.concat(SF):m;const h=[...m,".gdocs",".gsheets",".gslides"];o.current&&(o.current.removeListener("choose",r),o.current.removeListener("cancel",s),o.current.hide(),o.current=null);let p;u==="folder"?p=new window.Box.FolderPicker:p=new window.Box.FilePicker,o.current=p,p.addListener("choose",r),p.addListener("cancel",s),p.show(C_t,e,{container:`#${$I}`,logoUrl:VS,extensions:h.join(","),canUpload:!1,canSetShareAccess:!1,canCreateNewFolder:!1,chooseButtonLabel:"Select",cancelButtonLabel:"Cancel"})}catch(d){a?.(d);return}},[e,a,t,s,r,n]),c=f.useCallback(()=>{o.current&&(o.current.removeListener("choose",r),o.current.removeListener("cancel",s),o.current.hide(),o.current=null)},[r,s]);return f.useMemo(()=>({openPicker:i,cleanupPicker:c}),[i,c])},Dxe=A.memo(({isOpen:e,onClose:t,cleanupPicker:n})=>(f.useEffect(()=>()=>{n()},[n]),l.jsx(rn,{variant:"wide",isOpen:e,onClose:t,renderCloseButton:!0,children:l.jsx("div",{id:$I,style:{height:"800px"}})})));Dxe.displayName="BoxFilePickerModal";const T_t=A.memo(({children:e,placement:t,isOpen:n,onOpen:r,onClose:s,connectorMenuItems:a,width:o="250px"})=>{const{isMobileStyle:i}=Ce(),c=f.useMemo(()=>({style:{width:o}}),[o]);return l.jsx(st,{initial:!1,mode:"popLayout",children:l.jsx(_e.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:wu},children:l.jsx(en,{placement:t,items:a,isMobileStyle:i,isOpen:n,onOpen:r,onClose:s,boxProps:c,children:e})},"attachment-selector")})});var _5={},zZ;function k_t(){return zZ||(zZ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="check",r=448,s=512,a=[10003,10004],o="f00c",i="M441 103c9.4 9.4 9.4 24.6 0 33.9L177 401c-9.4 9.4-24.6 9.4-33.9 0L7 265c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l119 119L407 103c9.4-9.4 24.6-9.4 33.9 0z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faCheck=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(_5)),_5}var ZE=k_t();const N_t=({skip:e,filters:t,reason:n})=>{const r=fc({enabled:!0,initialPageParam:null,queryKey:dOe(t),queryFn:({pageParam:a})=>fqe({filters:t,skipToken:a,reason:n}),getNextPageParam:a=>a&&a.sites.length?a.skipToken:void 0}),s=r.data?.pages.map(a=>a?.sites??[]).flat()??ce;return f.useMemo(()=>({...r,sites:s}),[r,s])},A_t=11,Fxe=A.memo(({onNext:e,onCancel:t})=>{const n="sharepoint-site-selector",r=f.useRef(null),{$t:s}=X(),a=s({defaultMessage:"Next",id:"9+DdtuCqLw"}),o=s({defaultMessage:"Cancel",id:"47FYwba+bI"}),[i,c]=f.useState(null),u=f.useCallback(T=>c(T.name!==i?.name?T:null),[i]),{isMobileUserAgent:d}=Ce(),[m,h]=f.useState(!1),[p,g]=f.useState(""),[y,v]=f.useState(p),x=f.useCallback(T=>{c(null),g(T)},[g]),{fetchNextPage:b,hasNextPage:_,isFetchingNextPage:w,sites:S,isLoading:C}=N_t({skip:!1,filters:{search_term:y},reason:n}),E=f.useMemo(()=>ks(()=>{_&&!w&&b()},500),[_,w,b]);y9(r,E,{threshold:.5}),f.useEffect(()=>{!C&&y===""&&h(S.length>A_t)},[C,y,S]),f.useEffect(()=>{const T=setTimeout(()=>v(p),250);return()=>clearTimeout(T)},[p]);const M=f.useCallback(()=>e(i?.webUrl??""),[e,i?.webUrl]);return l.jsxs(z,{variant:"transparent",className:"px-md grid gap-y-[24px] sm:w-full md:w-[515px]",children:[m&&l.jsx(xo,{type:"text",isMobileUserAgent:d,placeholder:s({defaultMessage:"Search sites",id:"Nxbc+cXNbW"}),value:p,className:"bg-offsetPlus rounded-md border-none",onChange:x}),l.jsxs(z,{className:"gap-y-sm scrollbar-none h-56 flex-col overflow-y-scroll",children:[C&&l.jsx(Wi,{className:"gap-y-sm grid",blockCount:5,size:"small",noLines:!0}),S.length>0&&S.map((T,I)=>l.jsx(P_t,{site:T,index:I,handleSelectSite:u,selectedSiteName:i?.name,sitesLength:S.length,lastSiteRef:r},I)),!C&&!w&&S.length===0&&l.jsx(D,{variant:"small",color:"light",textCenter:!0,children:s({defaultMessage:"No results",id:"jHJmjfxD4s"})}),w&&l.jsx(Wi,{blockCount:1,size:"small"})]}),l.jsxs(z,{className:"gap-x-md flex justify-end",children:[l.jsx(ye,{variant:"common",pill:!0,text:o,onClick:t}),l.jsx(ye,{variant:"primary",pill:!0,text:a,textClassName:"",disabled:i===null,onClick:M})]})]})});Fxe.displayName="SharepointSiteSelector";const P_t=A.memo(({site:e,index:t,handleSelectSite:n,selectedSiteName:r,sitesLength:s,lastSiteRef:a})=>{const o=f.useCallback(()=>n(e),[n,e]),i=f.useMemo(()=>l.jsx(xt,{color:"#20808D",icon:ZE.faCheck}),[]);return l.jsx(ke,{ref:t===s-1?a:null,variant:"common",layout:"split",text:e.name,onClick:o,trailingComponent:r===e.name?i:null,textClassName:"text-left w-5/6 font-display text-foreground text-md font-[500]",fullWidth:!0})}),Uxe=A.memo(({isOpen:e,options:t,onClose:n,onSelectSite:r})=>{const{$t:s}=X(),a=f.useMemo(()=>t?.connector==="sharepoint"&&!t.webUrl,[t?.connector,t?.webUrl]),o=f.useMemo(()=>{if(a)return l.jsx(D,{variant:"entry-title-200",className:"ml-md line-clamp-3 text-pretty",children:s({defaultMessage:"Select a site",id:"NLmDBthOaZ"})})},[s,a]);return l.jsxs(rn,{variant:a?"medium":"wide",isOpen:e,onClose:n,renderCloseButton:!a,titleContent:o,children:[a&&l.jsx(Fxe,{onNext:r,onCancel:n}),!a&&l.jsx("iframe",{id:"microsoft-file-picker",height:"800px"})]})});Uxe.displayName="MicrosoftFilePickerModal";const R_t=({mode:e})=>{const t=Pt(),n=ul(),{currentOpenedModal:r}=_t(),s=f.useMemo(()=>t?.startsWith("/collections")?r==="uploadFilesModal"?"space_sources":"space":t?.startsWith("/search")?"thread":t?.startsWith("/settings")?null:"ask",[t,r]),a=f.useMemo(()=>n===null?null:t?.startsWith("/collections")?n.slug?typeof n.slug=="string"?n.slug:n.slug[0]:null:t?.startsWith("/search")?t.split("/").pop()??null:t?.startsWith("/settings")?null:e??null,[t,n,e]),o=Op(),i=f.useMemo(()=>{const c=`${o}/connectors`,u=new URLSearchParams;if(s){const d=Array.isArray(a)?a[0]:a;u.append("referrer",s),d&&u.append("referrerId",d)}return c+"?"+u.toString()},[s,a,o]);return f.useMemo(()=>({referrer:s,referrerId:a,redirectPath:i}),[i,s,a])},Bxe=A.memo(({isOpen:e,fileType:t,size:n,tooltip:r,onOpen:s,onClose:a,onFilePickerOpen:o,onFilePickerClose:i,areFileAttachmentsAllowed:c,fileUploadErrorMessage:u,fileUploadWarningMessage:d,activeConnector:m=null,uploadedFiles:h=ce,handleStartUpload:p,handleFileInput:g,isBoxFilePickerOpen:y=!1,handleCloseBoxFilePicker:v,cleanupBoxFilePicker:x,microsoftFilePickerOptions:b=null,handleCloseMicrosoftFilePicker:_,handleSelectSharepointSite:w,isMicrosoftFilePickerOpen:S=!1,fileInputRef:C,isAudioVideoFilesEnabled:E=!1,setAttachmentErrorMessage:M})=>{const T="file-upload-button",{$t:I}=X(),j=f.useRef(!1),{fileUploadUpsellTooltipOpen:N}=Xs(),{setFileUploadUpsellTooltipOpen:P}=qo(),R=Is(),k=Je(),{uploadRateLimit:O}=Sn(),{hasActiveSubscription:L}=Nt(),F=O??(L?Zoe:Xoe),U=f.useCallback(Pe=>Pe.preventDefault(),[]),{trackEvent:V}=Te(),{referrer:W,referrerId:H}=R_t({mode:"file"}),{connectorsMap:G}=$C({reason:T}),{enabledFileConnectors:K}=J9({reason:T}),{disabledFileConnectors:$}=Rhe({reason:T}),q=f.useMemo(()=>G?.onedrive?.connected||G?.sharepoint?.connected,[G?.onedrive?.connected,G?.sharepoint?.connected]),Z=f.useCallback(()=>{switch(t){case"image":return I({defaultMessage:"images",id:"HVUWg4/ofn"});case"all":return I({defaultMessage:"files",id:"l17U7PEF+6"});default:return I({defaultMessage:"text or PDF files",id:"XFh9ob267W"})}},[I,t]),se=f.useCallback(()=>{switch(t){case"image":return f8e;case"all":return E?y8e:m8e;default:return E?p8e:d8e}},[t,E]),Y=f.useCallback(Pe=>{Pe?V("attempt connector file attachment",{connectorName:Pe}):V("opened file selector",{}),p?.(Pe)},[p,V]),{handleConnect:Q}=jme({reason:T}),[re,te]=f.useState(!1),le=f.useMemo(()=>{const Pe={type:"default",text:I({defaultMessage:"Local files",id:"xMmQ4F7z3A"}),size:"small",icon:aTe,onMouseDown:U,onClick:()=>Y("local")},dt=K.map(et=>{const Et=et.name;return{type:"default",text:$x(Et)??"",avatar:l.jsx("img",{src:A2(Et)??"",alt:$x(Et),width:20,height:20}),onMouseDown:U,onClick:()=>Y(Et),show:O8e.includes(et.name)}});return $.length>0&&!R&&dt.push({type:"nested",submenu:$.map(et=>({type:"default",size:"small",text:$x(et.name),avatar:l.jsx("img",{src:A2(et.name)??"",alt:$x(et.name),width:20,height:20}),rightElement:l.jsx("div",{className:"flex items-center justify-center",children:l.jsx(be,{icon:ql,size:"sm"})}),onClick:()=>Q({connectorName:et.name,customReferrer:W??void 0,customReferrerId:H??void 0})})),isSubmenuOpen:re,onSubmenuOpen:()=>te(!0),onSubmenuClose:()=>te(!1),text:I({defaultMessage:"Connect files",id:"geEGjFxpOA"}),icon:Kne,onMouseDown:U}),[Pe,...dt]},[I,K,$,U,Y,re,Q,W,H,R]),ie=f.useCallback(()=>{le.length<=1||h.length>0?Y(m??void 0):s?.()},[le,h,m,Y,s]),pe=f.useCallback(()=>{a?.()},[a]),me=f.useMemo(()=>{if(r)return r;let Pe=`${I({defaultMessage:"Attach",id:"Ye0Clmvfec"})} ${Z()}`;return k?c?F!=null&&F>0&&F<=100?Pe+=`. ${I({defaultMessage:"{remaining} left today",id:"V9HtlcGCOC"},{remaining:F})}`:yn(MA)&&(Pe=I({defaultMessage:"Files attached to threads are retained for 7 days",id:"hTclTOMwb7"})):Pe=I({defaultMessage:"File attachments are disabled by your organization",id:"HmmaBNCmcH"}):Pe+=`. ${I({defaultMessage:"Sign in to attach files",id:"Ei6nUBg77Q"})}`,Pe},[r,F,k,I,Z,c]);f.useEffect(()=>{const Pe=()=>{j.current&&(i?.(),j.current=!1)};return window.addEventListener("focus",Pe),()=>window.removeEventListener("focus",Pe)},[i]);const de=f.useCallback(()=>{P(!1)},[P]),ve=f.useCallback(()=>_?.(),[_]),Ae=f.useCallback(()=>v?.(),[v]),Se=f.useCallback(Pe=>w?.(Pe),[w]),De=f.useCallback(()=>x?.(),[x]),Ne=f.useCallback(()=>{M?.("")},[M]);return l.jsx("div",{className:"flex items-center",children:l.jsx(bn,{tooltipText:I({defaultMessage:"Attach files",id:"8d3exg7mte"}),open:N,offset:3,bodyClassName:"!bg-inverse",bodyTextClassName:"!text-subtler",arrowClassName:"!fill-foreground",closeOnClick:!0,onClickOutsideTooltip:de,asChild:!0,children:l.jsxs("div",{children:[l.jsx(T_t,{placement:"bottom-start",connectorMenuItems:le,isOpen:e,onOpen:ie,onClose:pe,children:l.jsx(ke,{size:n,icon:t8,disabled:!c,toolTip:me})}),l.jsx("input",{type:"file",multiple:!0,onClick:()=>{j.current=!0,o?.()},ref:C,onChange:Pe=>{j.current=!1,g?.(Pe.target.files?Array.from(Pe.target.files):ce)},accept:se(),style:{display:"none"}}),q&&l.jsx(Uxe,{options:b,isOpen:S,onClose:ve,onSelectSite:Se}),G?.box?.connected&&l.jsx(Dxe,{isOpen:y,onClose:Ae,cleanupPicker:De}),l.jsx(_u,{isVisible:!!u,variant:"error",message:u??"",handleClose:Ne}),l.jsx(_u,{isVisible:!!d&&!u,variant:"warning",message:d??"",timeout:4})]})})})});Bxe.displayName="FileUploadButton";var jr;(function(e){e[e.FOCUS=0]="FOCUS",e[e.SOURCES=1]="SOURCES",e[e.RECENCY=2]="RECENCY",e[e.PRO_MODEL_PREFERENCE=3]="PRO_MODEL_PREFERENCE",e[e.ATTACHMENTS=4]="ATTACHMENTS",e[e.SEARCH_MODEL_SELECTOR=5]="SEARCH_MODEL_SELECTOR"})(jr||(jr={}));const I_t="scrollbar-subtle min-h-0 flex-1 overflow-auto",Vxe=A.memo(({children:e,focusItems:t,placement:n,width:r="200px",isMobileStyle:s,isOpen:a=!1,onOpen:o,onClose:i,menuType:c=jr.FOCUS,isSpace:u=!1})=>{const{$t:d}=X(),{isMax:m}=Nt(),h=X(),p=f.useMemo(()=>{switch(c){case jr.RECENCY:return d({defaultMessage:"Choose recency",id:"qyxEklVz9W"});case jr.SOURCES:default:return d({defaultMessage:"Choose sources",id:"5HzLAl6K6z"})}},[c,d]),g=f.useCallback(_=>{_?.stopPropagation(),o?.()},[o]),y=f.useCallback(()=>{i?.()},[i]),v=f.useMemo(()=>l.jsx("div",{className:"gap-x-xs p-sm bg-offsetPlus flex items-center justify-center rounded-t-md text-center",children:l.jsx(D,{color:"light",variant:"tinyRegular",children:l.jsxs("div",{className:"gap-x-sm flex items-center",children:[l.jsx(be,{icon:ya,size:"xs"}),h.formatMessage({defaultMessage:"Search includes all context from this space.",id:"uhJN0zDnSy"})]})})}),[h]),x=f.useMemo(()=>({width:r}),[r]),b=f.useMemo(()=>l.jsxs(z,{className:B("flex flex-col",{"max-h-[37vh]":u,"max-h-[42vh]":!u,"max-super-override":m}),style:x,children:[u&&c===jr.SOURCES&&v,l.jsx("div",{className:B(I_t,{"p-xs":u&&c===jr.SOURCES}),children:l.jsx(bh,{items:t,disableScrollArea:!0})})]}),[v,t,u,c,x,m]);return s?l.jsxs(l.Fragment,{children:[l.jsx(rn,{title:p,titleTextVariant:"baseSemi",variant:"bottom-left-sheet",actionList:ce,isOpen:a,onClose:y,noPadding:!0,children:l.jsx(bh,{textColor:"light",items:t})}),l.jsx("span",{onClick:g,children:e})]}):l.jsx(ci,{isFileSearchEnabled:!0,isOpen:a,placement:n,onClose:y,onOpen:g,avoidSizeCollisions:!1,contentClassName:u&&c===jr.SOURCES?"!p-0":"",content:b,hasInteractiveContent:!0,children:e})}),$xe=A.memo(({isOpen:e,onOpen:t,onClose:n})=>{const r="recency-switcher",{$t:s}=X(),a=X(),{isMobileStyle:o}=Ce(),i=ul(),{trackEvent:c}=Te(),{sources:u,recency:d,setRecency:m}=Sn(),h=Array.isArray(i?.slug)?i.slug[0]:i?.slug,{collection:p}=xc({collectionSlug:h,reason:r}),g=p?.focused_web_config?.link_configs??ce,y=u&&u.includes("web"),v=u&&g.length>0,x=!y&&!v,_=u&&u.includes("crunchbase")?!0:x,w=f.useCallback(E=>{m(E),c("search recency click",{recency:E}),n()},[c,m,n]),S=f.useMemo(()=>[{value:null,label:s({defaultMessage:"All Time",id:"52UMW3b1Z0"})},{value:"DAY",label:s({defaultMessage:"Today",id:"zWgbGgjUUg"})},{value:"WEEK",label:s({defaultMessage:"Last Week",id:"P3YB9A5Yho"})},{value:"MONTH",label:s({defaultMessage:"Last Month",id:"cfMkrE1iIn"})},{value:"YEAR",label:s({defaultMessage:"Last Year",id:"7PhUtcTRXC"})}],[s]),C=f.useMemo(()=>S.map(E=>({type:"default",text:E.label,active:d===E.value,onClick:()=>w(E.value)})),[S,d,w]);return l.jsx(Vxe,{focusItems:C,placement:"bottom-start",width:"200px",isMobileStyle:o,isOpen:e,onOpen:t,onClose:n,menuType:jr.RECENCY,children:l.jsx(ke,{toolTip:a.formatMessage({defaultMessage:"Set recency for web search",id:"3/OG+oV8gT"}),size:"small",icon:Ire,disabled:_})})});$xe.displayName="RecencySwitcher";const j_t=J({defaultMessage:"Advanced models in Perplexity {searchMode}",id:"XgqOYZp+oF"}),O_t=J({defaultMessage:"Exclusive access for Max subscribers",id:"z2ijkWbdu6"});function Wxe({reason:e,selectedSearchMode:t,currentModel:n,onModelSelect:r,isRewrite:s}){const{$t:a}=X(),{organization:o}=pn({reason:e}),{openModal:i}=_t(),c=Is(),u=o?.settings?.disabled_model_preferences??ce,{isMax:d}=Nt(),{isMaxUpsellEnabled:m}=Pu(),{specialCapabilities:h}=Sn(),p=f.useRef(null),{value:g}=vf({flag:"model-outage-on-model-selector-ui",subjectType:"user_nextauth_id",defaultValue:{[fe.SONAR]:!1,[fe.CLAUDE_2]:!1,[fe.GPT_4_1]:!1,[fe.GEMINI_2_FLASH]:!1,[fe.GROK]:!1,[fe.O4_MINI]:!1,[fe.CLAUDE_3_7_SONNET_THINKING]:!1}}),y="left",v=0,x=f.useCallback(w=>{![fe.PRO,fe.ALPHA,fe.BETA].includes(w)&&n!==void 0&&t===ae.SEARCH&&(p.current=w),r(w)},[r,t,n]),{menuItems:b,selectOptions:_}=f.useMemo(()=>{const w=c?"description":"tooltipText";function S(I,j){const N=[],P=[];return I.filter(R=>!j?.includes(R.search_model)).forEach(R=>{if(u.includes(R.search_model))return;const k=!!(g&&g[R.search_model]);let O,L="super";R.subscription_tier===gs.MAX?(O=a({defaultMessage:"max",id:"+LmzMnWE+j"}),L="maxBorder"):R.has_new_tag&&(O=a({defaultMessage:"new",id:"qlTe+eC7Ec"}),L="superBorder");const F={active:n===R.search_model,[w]:a(Dc[R.search_model]?.description),tooltipLayout:y,tooltipDelayDuration:v,bottomElement:k&&l.jsx(D,{className:"whitespace-pre-wrap",variant:"tinyRegular",color:"red",children:a({defaultMessage:"Temporary degraded performance",id:"Kc/pdbXoxJ"})}),onClick(){if(m&&!d&&(t===ae.STUDIO||t===ae.RESEARCH||t===ae.SEARCH&&R.subscription_tier===gs.MAX&&!h.maxModelSelection)){i("pricingModal",{origin:s?Be.RETRY_BUTTON:Be.MODEL_SELECTOR,pitchMessage:{title:a(j_t,{searchMode:a(Vr[t].name)}),description:a(O_t)}});return}x(R.search_model)},size:"tiny",type:"default",text:a(Dc[R.search_model].name),badge:O,badgeVariant:L},U={value:R.search_model,label:a(Dc[R.search_model].name)},V=m&&!d&&R.subscription_tier===gs.MAX;N.push(F),V||P.push(U)}),{menuItems:N,selectOptions:P}}const C=[],E=[],M=L_t(),T=M.filter(I=>!u.includes(I.search_model))[0]?.search_model||fe.SONAR;if(t===ae.SEARCH){const I={selected:n===fe.PRO,[w]:a({defaultMessage:"Selects the best model for each query",id:"TFsbkdJ4zc"}),onClick(){if(n===fe.PRO){const P=p.current;x(P||T)}else x(fe.PRO)},size:"tiny",text:a(Dc[fe.PRO].name),type:"toggle",tooltipLayout:y,tooltipDelayDuration:v},j={value:fe.PRO,label:a(Dc[fe.PRO].name)};if(!s)C.push(I,{type:"separator",show:!0}),E.push(j);else{const P={active:n===fe.ALPHA,[w]:a({defaultMessage:"In-depth reports on complex topics",id:"j7wjX6Ljpq"}),onClick(){x(fe.ALPHA)},size:"tiny",text:a({defaultMessage:"Research",id:"JEe7dVso7F"}),type:"default",tooltipLayout:y,tooltipDelayDuration:v},R={value:fe.ALPHA,label:a(Dc[fe.ALPHA].name)};C.push(P),E.push(R);const k={active:n===fe.BETA,[w]:a({defaultMessage:"Create projects from scratch",id:"nH9rAkplC/"}),onClick(){x(fe.BETA)},size:"tiny",text:a({defaultMessage:"Labs",id:"ylFNoY79wa"}),type:"default",tooltipLayout:y,tooltipDelayDuration:v},O={value:fe.BETA,label:a(Dc[fe.BETA].name)};C.push(k,{type:"separator",show:!0}),E.push(O)}const N=S(M,!h.maxModelSelection&&!m?M.filter(P=>P.subscription_tier===gs.MAX).map(P=>P.search_model):void 0);C.push(...N.menuItems),E.push(...N.selectOptions)}return{menuItems:C,selectOptions:E}},[u,a,t,n,g,d,m,i,x,s,c,h.maxModelSelection]);return f.useMemo(()=>({menuItems:b,selectOptions:_}),[b,_])}const L_t=()=>[...Ace],D_t=({selectedModel:e,onModelChange:t}={})=>{const n="search-model-selector",{isMobileStyle:r}=Ce(),{$t:s}=X(),{onActiveMenuChange:a}=qo(),{activeMenu:o}=Xs(),i=Ka(),{configuredModel:c}=Sn(),u=qE(),d=e||c,{isMax:m}=Nt(),h=i===ae.SEARCH,p=[fe.DEFAULT,fe.PRO,fe.ALPHA,fe.BETA].includes(d),y=!!Ht()?.get("openSearchModeSelector");f.useEffect(()=>{y&&a(jr.SEARCH_MODEL_SELECTOR)},[y,a]);const v=f.useCallback(S=>{u(S,i)},[u,i]),{menuItems:x}=Wxe({reason:n,selectedSearchMode:i,currentModel:d,onModelSelect:t||v}),b=f.useCallback(()=>{a(jr.SEARCH_MODEL_SELECTOR)},[a]),_=f.useCallback(()=>{a(null)},[a]),w=f.useMemo(()=>({className:B("max-h-[40vh]",{"max-super-override":m})}),[m]);return l.jsx(st,{initial:!1,mode:"popLayout",children:h&&l.jsx(_e.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"linear"},children:l.jsx(en,{placement:"bottom-end",boxProps:w,items:x,isMobileStyle:r,isOpen:o===jr.SEARCH_MODEL_SELECTOR,onOpen:b,onClose:_,children:l.jsx(ke,{extraCSS:"max-w-24 sm:max-w-none",icon:jre,size:"small",textClassName:"text-[0.8125rem]",toolTip:s(p?{defaultMessage:"Choose a model",id:"fXlc3idTcy"}:Dc[d].name),variant:p?"common":"super"})})},"search-model-selector")})},Hxe=A.memo(D_t);Hxe.displayName="SearchModelSelector";const zxe=A.memo(()=>{const{isMaxAssistantMode:e,actions:t}=hn(),n=n4e(),[r,s]=f.useState(!n),a=f.useRef(null),o=f.useRef(null),i=f.useCallback(()=>{t.setIsMaxAssistantModeEnabled(!e)},[t,e]),c=f.useCallback(()=>{s(!r)},[r]);f.useEffect(()=>{r&&r4e()},[r]),f.useEffect(()=>{const d=m=>{r&&o.current&&!o.current.contains(m.target)&&a.current&&!a.current.contains(m.target)&&s(!1)};return r&&document.addEventListener("mousedown",d,!0),()=>{document.removeEventListener("mousedown",d,!0)}},[r]);const u=f.useMemo(()=>l.jsxs("div",{"data-color-scheme":"dark",ref:o,className:B("bg-base absolute bottom-full left-1/2 z-50 mb-1 -translate-x-1/2 px-4 py-3","shadow-overlay w-72 rounded-lg"),children:[l.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(D,{color:"default",variant:"baseSemi",children:l.jsx(he,{defaultMessage:"Enable Max Assistant",id:"148Ehuq5Qh"})}),l.jsx(R1,{className:"text-max h-3"})]}),l.jsx("div",{className:"flex items-center gap-6",children:l.jsx(Go,{active:e??!1,onChange:i,size:"default"})})]}),l.jsx(D,{color:"default",variant:"small",className:"text-pretty",children:l.jsx(he,{defaultMessage:"Thinks longer with deeper reasoning for complex workflows and questions.",id:"UOpEyLDsXA"})})]}),[e,i]);return l.jsxs("div",{className:"relative",ref:a,children:[l.jsx(ke,{size:Ft.small,variant:"common",icon:cu,onClick:c}),r&&u]})});zxe.displayName="SidecarMoreMenuButton";const Gxe=A.memo(({handleFileInput:e})=>{const{$t:t}=X(),{sidecarSourceTab:{url:n}}=_o(),r=hr();f.useEffect(()=>r.subscribeScreenshotCaptured(a=>{e?.([a],"local",wO)}),[r,e]);const s=f.useCallback(async()=>{r.captureSourceTabScreenshotV2({sourceTabUrl:n})},[r,n]);return l.jsx("div",{className:"flex items-center gap-2",children:l.jsx(ke,{onClick:s,size:Ft.small,variant:"common",toolTip:t({defaultMessage:"Screenshot",id:"9a+SKtXKhe"}),icon:oTe})})});Gxe.displayName="SidecarScreenshotButton";const F_t=A.memo(({children:e})=>l.jsx("div",{className:"flex size-5 items-center justify-center",children:e})),qxe=A.memo(e=>{const t="sources-switcher",{$t:n}=X(),{isOpen:r,onOpen:s,onClose:a,defaultSource:o,selectedSources:i,onSourcesChange:c,variant:u="icon",hiddenSources:d,buttonVariant:m="default"}=e,{isMobileStyle:h}=Ce(),{trackEvent:p}=Te(),{fileRepoInfo:g}=Au({reason:t}),y=g?.file_repository_type==="COLLECTION",{RootSources:v,ConnectionSources:x,NestedConnectionSources:b}=qhe({reason:t}),{updateSources:_}=GC({defaultSource:o,reason:t}),{sources:w}=Sn(),{isEnterprise:S}=pn({reason:t}),C=i??w,E=c??_,M=f.useCallback(L=>L.preventDefault(),[]),T=f.useCallback(L=>{p("search source click",{source:L}),E(L)},[p,E]),I=f.useCallback((L,F)=>{const U=C?.includes(L);return{type:F.type,text:F.text,description:F.description,size:"small",selected:U,icon:F.icon,avatar:F.avatar,link:F.link,onMouseDown:M,onClick:()=>T(L),onLinkClick:F.onLinkClick,bottomElement:F.bottomElement,rightElement:F.rightElement,testId:`source-toggle-${L}`}},[C,M,T]),j=f.useMemo(()=>{const L=Object.entries(v),F=L.filter(([V])=>!d?.includes(V));return(d?.length?L.filter(([V])=>!d.includes(V)):F).map(([V,W])=>I(V,W))},[v,I,d]),N=f.useMemo(()=>{const L=b.submenuItems.filter(F=>{if(Array.isArray(F)){const[U]=F;return!d?.includes(U)}return!0}).map(F=>{if(Array.isArray(F)){const[U,V]=F;return I(U,V)}return F});return{...b,submenu:L}},[b,I,d]),P=f.useMemo(()=>[...j,...h||!S?[]:[{type:"separator"},N]].filter(Boolean),[S,j,N,h]),R=f.useMemo(()=>{if(!C?.length)return l.jsx(be,{icon:nh,size:"sm"});const L=[];return C.forEach(F=>{let U;if(F in v?U=v[F]:F in x&&(U=x[F]),U){const V=U.avatar||l.jsx(F_t,{children:U.icon?l.jsx(be,{icon:U.icon,size:"sm"}):l.jsx(be,{icon:nh,size:"sm"})});L.push(V)}}),N2(L,{maxVisuals:1,size:"lg"})},[C,v,x]),k=f.useMemo(()=>{if(C?.length===1){const L=C[0];return L in v?v[L]?.text:L in x?x[L]?.text:L}return n({defaultMessage:"{count} sources",id:"l1+6PggBqU"},{count:C?.length||0})},[C,v,x,n]),O=(()=>{switch(m){case"offsetPlus":return"bg-offsetPlus";case"default":return"!bg-offset";default:Qt(m)}})();return l.jsx(Vxe,{focusItems:P,placement:"bottom-end",width:"300px",isMobileStyle:h,isOpen:r,onOpen:s,onClose:a,menuType:jr.SOURCES,isSpace:y,children:u==="button"?l.jsx(ye,{text:k,extraCSS:B("pl-4 pr-4 w-full !h-10 border-0 !outline-none !justify-start font-normal",O),textClassName:"text-left text-foreground text-sm font-normal",fullWidth:!0,layout:"split",chevron:!0,chevronIcon:Zr,onMouseDown:M,"data-testid":"sources-switcher-button"}):l.jsx(ke,{toolTip:n({defaultMessage:"Set sources for search",id:"yAyuRoLEjt"}),size:"small",onMouseDown:M,"data-testid":"sources-switcher-button",extraCSS:`px-[4px] ${C&&C.length>1?"!aspect-auto":""}`,leadingComponent:R})})}),Kxe=A.memo(({isTranscribing:e,isInitializing:t,startTranscription:n,stopTranscription:r,variant:s="primary"})=>{const{$t:a}=X(),[o,i]=f.useState(t),c=()=>{i(!0),n?.()},u=()=>{i(!1),r?.()};return f.useEffect(()=>{e&&i(!1)},[e]),l.jsx(l.Fragment,{children:s==="primary"?l.jsxs("div",{className:"relative ml-2",children:[e&&l.jsx("div",{className:"bg-super/20 absolute inset-[10%] animate-[ping_1.5s_cubic-bezier(0,0,0.2,1)_infinite] rounded-full"}),l.jsx(ye,{toolTip:a(e?{defaultMessage:"Stop Dictation",id:"RR4fO5+xkb"}:{defaultMessage:"Dictation",id:"0eNg7Kdki1"}),ariaLabel:"Dictation",isLoading:t||o,icon:e?$6:dB,variant:"primary",onClick:e?u:c,disabled:!1,size:Ft.small})]}):l.jsxs("div",{className:"relative",children:[e&&l.jsx("div",{className:"bg-super/20 absolute inset-[10%] animate-[ping_1.5s_cubic-bezier(0,0,0.2,1)_infinite] rounded-full"}),l.jsx(ke,{toolTip:a(e?{defaultMessage:"Stop Dictation",id:"RR4fO5+xkb"}:{defaultMessage:"Dictation",id:"0eNg7Kdki1"}),ariaLabel:"Dictation",isLoading:t||o,icon:e?$6:dB,variant:"common",onClick:e?u:c,disabled:!1,size:Ft.small})]})})});Kxe.displayName="DictationButton";const U_t={hidden(){return{opacity:0,scale:.2}},visible(){return{opacity:1,scale:1}}},Yxe=A.memo(({onStopButtonClick:e,variant:t="inverted"})=>{const{$t:n}=X();return l.jsx(_e.div,{animate:"visible",exit:"hidden",initial:"hidden",variants:U_t,children:l.jsx(ye,{testId:"stop-generating-response-button",toolTip:n({defaultMessage:"Stop generating response",id:"wXXKXUJh1s"}),variant:t,icon:$6,onClick:e,size:"small",extraCSS:"text-caution hover:!bg-caution hover:!text-white ml-2"})},"stop-button")});Yxe.displayName="StopButton";var B_t={};const Qxe=A.memo(()=>{const{openModal:e}=_t(),{$t:t}=X(),n=Je(),r=At(),s=f.useCallback(()=>{n?B_t.NEXT_PUBLIC_IS_SIDECAR_BUILD?r.push("/speak"):e("voiceToVoiceModal",null):e("loginModal",{origin:Be.VOICE_TO_VOICE_BUTTON,pitchMessage:{title:"Sign in to unlock voice mode"}})},[n,e,r]);return l.jsx("div",{className:"ml-2",children:l.jsx(ye,{onClick:s,size:Ft.small,icon:iTe,variant:"primary",disabled:!1,toolTip:t({defaultMessage:"Voice mode",id:"OnF9aqAuar"})})})});Qxe.displayName="VoiceToVoiceButton";const Xxe=(e,t)=>{const{value:n,loading:r}=Ut({flag:"max_assistant_tooltip_enabled",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])};function Zxe(){const{value:e}=Ut({flag:"enable-clarifying-questions",subjectType:"user_nextauth_id",defaultValue:!1});return e}const Jxe=A.memo(({toolTip:e,icon:t,isDisabled:n,value:r,querySource:s,size:a=Ft.small,handleSubmit:o,...i})=>l.jsx(ye,{...i,ariaLabel:"Submit",toolTip:e,icon:t,variant:"primary",size:a,onClick:n?void 0:()=>o({query:r,querySource:s}),disabled:n,extraCSS:"!duration-100"}));Jxe.displayName="SubmitButton";var Tb={};const w5=({className:e,...t})=>l.jsx("div",{className:e,children:l.jsx(Jxe,{...t,value:""})}),V_t=({value:e,json:t,submitWillFork:n,isFollowUp:r,isDisabled:s,querySource:a,errorMessage:o,handleSubmit:i,fileUploadRef:c,showFileUpload:u,fileUploadTooltip:d,showStopButton:m,showModelSelector:h,onStopButtonClick:p,onFilePickerOpen:g,onFilePickerClose:y,showSources:v,showRecency:x,disableActionButtons:b,startTranscription:_,stopTranscription:w,isTranscribing:S,isTranscriptionInitializing:C,isTranscriptionAvailable:E,fileUploadErrorMessage:M,fileUploadWarningMessage:T,activeConnector:I=null,uploadedFiles:j,handleStartUpload:N,handleFileInput:P,isBoxFilePickerOpen:R=!1,handleCloseBoxFilePicker:k,cleanupBoxFilePicker:O,microsoftFilePickerOptions:L=null,handleCloseMicrosoftFilePicker:F,handleSelectSharepointSite:U,isMicrosoftFilePickerOpen:V=!1,fileInputRef:W,hasQuery:H,isAudioVideoFilesEnabled:G=!1,setAttachmentErrorMessage:K,isCometHome:$,isMissionControl:q})=>{const Z="ask-input-right-attributions",{isMobileStyle:se,isMobileUserAgent:Y}=Ce(),{screenshotToolEnabled:Q}=_o(),{openModal:re}=_t(),{organization:te}=pn({reason:Z}),{$t:le}=X(),ie=Zxe(),{activeMenu:pe}=Xs(),{onActiveMenuChange:me}=qo(),{isWindowsApp:de}=Wt(),ve=Ht(),{fileRepoInfo:Ae}=Au({reason:Z}),{isMax:Se}=Nt(),De=Ae.file_repository_type==="COLLECTION",Ne=v&&!r,Pe=x&&De&&!r,dt=f.useRef(e),et=f.useRef(t);dt.current=e,et.current=t;const{variation:Et}=Xxe(!1),ue=f.useCallback(({querySource:ht})=>{i({query:dt.current,json:et.current,querySource:ht})},[i]),Ue=jHe(DHe),Ct=xr(Ue?.display_model)==ae.RESEARCH||xr(Ue?.display_model)==ae.STUDIO;f.useEffect(()=>{if(!de)return;const ht=new URLSearchParams(window.location.search);ht.get("voice-mode")?(Dv({"voice-mode":void 0}),_?.()):ht.get("v2v")&&(Dv({v2v:void 0}),re("voiceToVoiceModal",null))},[ve,de,_,re]),f.useEffect(()=>{const ht=()=>{E&&(S?w?.():_?.())},ut=()=>{re("voiceToVoiceModal",null)};return document.addEventListener("toggleVoiceToVoice",ut),document.addEventListener("toggleDictation",ht),()=>{document.removeEventListener("toggleDictation",ht),document.removeEventListener("toggleVoiceToVoice",ut)}},[S,E,_,w,re]);const Ye=!q&&!r&&!$&&(!Y&&!se||!!Tb.NEXT_PUBLIC_IS_SIDECAR_BUILD),mt=n?pS:Tb.NEXT_PUBLIC_IS_SIDECAR_BUILD||r||q?fre:lTe,We=m&&ie&&Ct,Oe=()=>{if(b)return l.jsx(w5,{className:"ml-2",isDisabled:!0,icon:mt,querySource:a??"home",handleSubmit:Rn});if(m){const fn=We?"common":"inverted";return l.jsx(Yxe,{onStopButtonClick:p,variant:fn})}const ht=a&&l.jsx(w5,{className:"ml-2",toolTip:o||(n?le({defaultMessage:"Start your own thread",id:"TAA16rUT4G"}):""),icon:mt,isDisabled:s,querySource:a,handleSubmit:ue,"data-testid":"submit-button"},"submit-button"),ut=[];if(Tb.NEXT_PUBLIC_IS_SIDECAR_BUILD&&Se&&Et&&ut.push(l.jsx(zxe,{},"sidecar-more-menu-button")),Tb.NEXT_PUBLIC_IS_SIDECAR_BUILD&&Q&&ut.push(l.jsx(Gxe,{handleFileInput:P},"sidecar-screenshot-button")),E&&ut.push(l.jsx(Kxe,{isTranscribing:S,isInitializing:C,stopTranscription:w,startTranscription:_,variant:S?"primary":"common"},"dictation-button")),Ye){const fn=(j?.length||H)&&a&&!S;fn?ut.push(ht):!S&&!fn&&ut.push(l.jsx(Qxe,{},"voice-to-voice-button"))}else S||ut.push(ht);return E||Ye?ut:ht},Tt=f.useCallback(()=>me(null),[me]),$e=f.useCallback(()=>me(jr.SOURCES),[me]),ct=f.useCallback(()=>me(jr.RECENCY),[me]),yt=f.useCallback(()=>me(jr.ATTACHMENTS),[me]);return l.jsxs(uxe,{children:[h&&l.jsx(Hxe,{}),Ne&&l.jsx(qxe,{isOpen:pe===jr.SOURCES,onOpen:$e,onClose:Tt}),Pe&&l.jsx($xe,{isOpen:pe===jr.RECENCY,onOpen:ct,onClose:Tt}),u&&l.jsx(Bxe,{isOpen:pe===jr.ATTACHMENTS,onOpen:yt,onClose:Tt,size:"small",forwardedRef:c,fileType:"all",tooltip:d,onFilePickerOpen:g,onFilePickerClose:y,areFileAttachmentsAllowed:te?.settings?.file_attachments_allowed!==!1,fileUploadErrorMessage:M??null,fileUploadWarningMessage:T??null,activeConnector:I,uploadedFiles:j??ce,handleStartUpload:N,handleFileInput:P,isBoxFilePickerOpen:R,handleCloseBoxFilePicker:k,cleanupBoxFilePicker:O,microsoftFilePickerOptions:L,handleCloseMicrosoftFilePicker:F,handleSelectSharepointSite:U,isMicrosoftFilePickerOpen:V,fileInputRef:W,isAudioVideoFilesEnabled:G,setAttachmentErrorMessage:K}),a&&l.jsxs(l.Fragment,{children:[Oe(),We&&l.jsx("div",{className:s?"pointer-events-none opacity-50":"",children:l.jsx(w5,{className:"ml-3",toolTip:o||le({defaultMessage:"Anything else to consider?",id:"DDAw7Ictpp"}),icon:mt,querySource:a,isDisabled:!1,handleSubmit:ue})})]})]})},ebe=A.memo(V_t);ebe.displayName="AskInputRightAttribution";const tbe=A.memo(({uploadedFiles:e,onRemoveFile:t,incompleteParsingEnabled:n,forwardRef:r})=>l.jsxs("div",{ref:r,className:"gap-x-sm scrollbar-none flex snap-x snap-mandatory overflow-x-auto",children:[l.jsx("div",{className:"w-xs shrink-0"}),e.map((s,a)=>l.jsx(nbe,{uploadedFile:s,onRemoveFile:t,incompleteParsingEnabled:n},a)),l.jsx("div",{className:"w-xs shrink-0"})]}));tbe.displayName="UploadedFilesList";const nbe=A.memo(({uploadedFile:e,onRemoveFile:t,incompleteParsingEnabled:n})=>{const r="uploaded-files-list",{trackEvent:s}=Te(),a=n?e.status==="uploading":e.status==="uploading"||e.status==="parsing",{$t:o}=X(),{fileRepoInfo:i}=Au({reason:r}),{saveFile:c,isLoading:u}=Qrt({fileRepoInfo:i,reason:r}),{data:d}=e7({fileRepoInfo:i,fileName:e.file.name,reason:r}),m=Object.values(Ao),h=kC(e.file.name),g=h&&!co(e.file.name)&&m.includes(h)&&XKe(e.nextURL),y=i.file_repository_type==="COLLECTION"&&!a&&g,v=f.useMemo(()=>o(d?{defaultMessage:"File exists in Space",id:"pD1m2AH9FU"}:{defaultMessage:"Save attachment to Space",id:"/Pbth8CiTs"}),[d,o]),x=f.useMemo(()=>vfe(e)?P0:sYe(e)?cTe:aYe(e)?Zne:oYe(e)?Ra:hf,[e]),b=f.useCallback(()=>{s("remove attachment clicked"),e.nextURL&&t?.(e.nextURL)},[s,e,t]),_=f.useCallback(()=>c(e),[c,e]);return l.jsxs("div",{className:B("scroll-mx-md px-sm py-xs border-subtlest bg-offset dark:bg-subtle gap-x-md flex h-[48px] w-fit snap-start items-center justify-between rounded-lg",{"opacity-70":a}),children:[l.jsxs("div",{className:"gap-x-md flex items-center",children:[e.thumbnailSource&&!a?l.jsx(es,{alt:e.file.name,src:e.thumbnailSource,containerClassName:"size-8 shrink-0",imageClassName:"w-full h-full object-cover object-center",rounded:"md",includeLightBoxModal:!1}):l.jsx("div",{className:"p-sm bg-offsetPlus dark:bg-offset rounded-lg","data-testid":a?"file-loading-icon":"file-type-icon",children:l.jsx(be,{icon:a?Rre:x,size:"sm",color:"#64645F",className:a?"animate-spin":void 0})}),l.jsxs("div",{className:"flex-col",children:[l.jsx(D,{variant:"tiny",color:"light",className:"text-nowrap",children:rYe(e.file.name,30)}),e.file.size>0&&l.jsx(D,{variant:"tinyRegular",color:"light",className:"text-nowrap",children:iYe(e.file.size)})]})]}),l.jsxs("div",{className:"gap-x-sm flex items-center",children:[y&&l.jsx(ke,{icon:uTe,size:"tiny",onClick:_,disabled:d||u,variant:"common",toolTip:v,isLoading:u,pill:!0,noPadding:!0}),e.nextURL&&l.jsx(ke,{icon:Xt,size:"tiny",testId:"remove-uploaded-file",onClick:b,variant:"common",pill:!0,noPadding:!0})]})]})});nbe.displayName="UploadedFilePreview";const $_t=(e,t)=>{const{value:n,loading:r}=Ut({flag:"clear-ask-input-suggestions-when-disabled",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])};function W_t({handleSubmit:e,inputQuery:t}){const{trackEvent:n}=Te(),r=f.useRef(t);r.current=t;const s=Ka();return f.useCallback((o,i)=>{const c=Sa();if(n("auto suggestion accepted",{mode:"dropdown-complete",query:r.current,completion:o.query,completion_uuid:o.query_uuid,completion_position:i,url:o.url,isNavigational:!!o.url,frontendContextUUID:c,searchMode:s}),o.url){window.open(o.url,"_self");return}e({query:o.submission_query??o.query,promptSource:"autosuggest",querySource:"autosuggest",newFrontendContextUUID:c})},[e,s,n])}function H_t({inputQuery:e}){const{trackEventBatch:t}=Te(),n=f.useRef(e);n.current=e;const r=Ka();return f.useCallback(a=>{if(n.current.length!==0)return;const o=a.map((i,c)=>({name:"auto suggestion blank state viewed",data:{mode:"dropdown-complete",query:n.current,completion:i.query,completion_uuid:i.query_uuid,completion_position:c,url:i.url,isNavigational:!!i.url,searchMode:r}}));t(o)},[r,t])}const z_t=(e,t)=>{const{value:n,loading:r}=Ut({flag:"sidecar-personalized-query-suggestions",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},CF="sidecar-personalized-queries-cache",WI=1e3*60*10,G_t="sidecar";function q_t(e){try{let n=new URL(e).hostname.toLowerCase();return n.startsWith("www.")&&(n=n.slice(4)),n}catch{return""}}function K_t(){try{const e=Ve.getItem(CF);if(e)return JSON.parse(e)}catch{}return null}function Y_t(e){Ve.setItem(CF,JSON.stringify(e))}async function Q_t(e,t,n){if(e!==null&&e.nonce!==null&&e.timestamp>n-WI&&e.domain_suggestions.length>0)return{nonce:e.nonce,domain_suggestions:e.domain_suggestions};const r=await ne.POST("/rest/browser/personalization/sidecar-recommended-queries",G_t,{body:{last_refresh_timestamp_ms:e?.timestamp??0,nonce:e?.nonce??"",history_items:t},timeoutMs:3e4});return r.error?(ee.error("Failed to fetch sidecar personalized queries:",r.error),{domain_suggestions:[],nonce:""}):r?.data?.domain_suggestions===null||!r?.data?.domain_suggestions?{domain_suggestions:[],nonce:e?.nonce??""}:r.data}function X_t(e,t){const n=e.find(r=>r.domain===t);return n?n.suggestions.map(r=>({query:r.query})):[]}const Z_t=14,J_t=1500,e2t=(e,t)=>{const n=Ot(),r=hr(!1),s=q_t(e),{variation:a,loading:o}=z_t(!1,{userEmail:n?.user?.email??""}),i=K_t(),{data:c}=Ke({queryKey:["sidecar-personalized-queries",t,a,o],queryFn:async()=>{if(!r||!e||!t)return[];if(!a)return o||Ve.removeItem(CF),[];const u=Date.now();if(i&&i.domain_suggestions.length>0&&u-i.timestamp<WI)return i.domain_suggestions;try{const m=((await r.SearchBrowser({queries:[],sources:["HISTORY"],key:"sidecar-personalized-suggestions-history",request_id:"sidecar-personalized-suggestions",start_time:Z_t*24*60*60*1e3,history_max_results:J_t,open_tabs_max_results:0,closed_tabs_max_results:0})).history_results??[]).map(g=>({url:g.url,title:g.title,last_accessed:g.last_accessed,visit_count:g.visit_count})),h=await Q_t(i,m,u),p={nonce:h.nonce,timestamp:u,domain_suggestions:h.domain_suggestions};return p.domain_suggestions.length>0&&Y_t(p),h.domain_suggestions}catch(d){return ee.error(d),i?.domain_suggestions??[]}},placeholderData:()=>t?i?.domain_suggestions??[]:[],refetchInterval:WI});return X_t(c??[],s)};function O1(){const{value:e}=Yr({flag:"shortcut-tasks",defaultValue:!0});return e&&Pi()}const t2t=async({sources:e,attachments:t,searchMode:n,sourceTabUrl:r,entropyRenderingPlace:s,reason:a})=>{try{const{error:o,data:i}=await ne.POST("/rest/autosuggest/list-autosuggest",a,{body:{query:"",sources:e,attachments:t,search_mode:n,source_tab_url:r,entropy_rendering_place:s}});if(o)throw new Me("API_CLIENTS_ERROR",{cause:o});return i.results??ce}catch(o){return ee.error(o),ce}},n2t=async({reason:e,onCreateShortcut:t})=>{try{const o=[...[...(await Zpe({reason:e}))?.tasks??[]].sort(()=>Math.random()-.5).slice(0,2).map(i=>({query:i.prompt,title:i.task_name,shouldShowTitle:!0,category:"shortcuts"}))];return t&&o.push({query:"",query_uuid:"create-shortcut-button",title:"Create a shortcut",description:"",category:"shortcuts",icon:"plus",shouldShowTitle:!0,actionHandler:t}),o}catch(n){return ee.error("Failed to fetch shortcuts suggestions",n),ce}},rbe=async({cometBrowser:e,type:t,locale:n})=>{const r=await e.getPersonalSuggestions({source:"ntp",type:t,locale:n},"get-personal-suggestions");return r.is_success?r.suggestions:[]},r2t=async(e,t)=>{const n=await rbe(e);return n.length<=t?n:qne(n).slice(0,t)},s2t=({cometBrowser:e,type:t,locale:n})=>{const{data:r=[]}=Ke({queryKey:["comet-personal-suggests-async",t,n],queryFn:async()=>qne(await rbe({cometBrowser:e,type:t,locale:n})),staleTime:3e5,gcTime:3e5});return r},S5=({sources:e,attachments:t,searchMode:n,focus:r,isCometHome:s,reason:a,enabled:o})=>{const{sidecarSourceTab:{url:i}}=_o(),u=Ys().erp,{isMobileUserAgent:d}=Ce(),m=hr(),h=O1(),{openModal:p}=_t(),g=e2t(i||"",u==="sidecar"),y=f.useCallback(()=>{p("taskShortcutModal",{source:"suggestions_dropdown"})},[p]),v=f.useMemo(()=>s&&n===ae.SEARCH?["comet-blank-state-suggest",n,h]:r==="finance"?["finance-blank-state-suggest"]:["blank-state-suggest",e,t,n,u==="sidecar"?i:""],[e,t,n,r,s,i,u,h]);return Ke({queryKey:v,enabled:o,queryFn:async()=>{if(s&&n===ae.SEARCH){const[_,w]=await Promise.all([r2t({cometBrowser:m,type:"input-blank-state"},Fm(d,h)),h?n2t({reason:a,onCreateShortcut:y}):Promise.resolve([])]);return[...(_??ce).map(S=>({...S,is_comet_assistant:!0})),...w]}if(r==="finance")return(await Mpt({query:"",reason:a,country:"US"})).map((S,C)=>({query:S.query||`suggestion-${C}`,title:S.title??void 0,image:S.image??void 0,description:S.description??void 0,category:S.category??void 0,query_uuid:S.query_uuid??void 0,url:S.url??void 0,metadata:S.metadata??void 0}));const[x,b]=await Promise.all([t2t({sources:e,attachments:t,searchMode:n,sourceTabUrl:u==="sidecar"?i:"",entropyRenderingPlace:u,reason:a}),u==="sidecar"?L9e({entropyBrowser:m,url:i}):Promise.resolve([])]);return[...g,...b,...x].slice(0,Fm(d))}})},a2t=e=>{const{setSuggestions:t,setBlankStateSuggestions:n}=qo(),{sidecarSourceTab:{url:r}}=_o(),a=Ys().erp,o=f.useRef(void 0),i=f.useRef(e.selectedSearchMode),{blankStateSuggestions:c}=Xs(),u=c[e.selectedSearchMode],d=r?Hi(r):void 0,m=e.suggestionsDisabled||a==="sidecar"&&d&&d===o.current;!m&&o.current!==d&&(o.current=d);const{data:h}=S5({...e,searchMode:ae.SEARCH,enabled:!m}),{data:p}=S5({...e,searchMode:ae.RESEARCH,enabled:!m}),{data:g}=S5({...e,searchMode:ae.STUDIO,enabled:!m});return f.useEffect(()=>{h&&n(h,ae.SEARCH),p&&n(p,ae.RESEARCH),g&&n(g,ae.STUDIO)},[h,p,g,n]),f.useEffect(()=>{(e.query?.length??0)>0||u&&((a==="sidecar"||i.current!==e.selectedSearchMode)&&t(u),i.current=e.selectedSearchMode)},[e.query,e.selectedSearchMode,u,t,a]),null};function o2t({userInputQuery:e,userInputJson:t,suggestionsDisabled:n,suggestions:r,focusedIndex:s,setFocusedIndex:a,onChange:o,handleSuggestionSubmission:i}){const c=f.useRef(e),u=f.useRef(t),d=f.useRef(r),m=f.useRef(s);c.current=e,u.current=t,d.current=r,m.current=s;const h=f.useCallback((y,v)=>{if(v>0){const x=(m.current+1)%v,b=d.current[x];if(b?.query){const _=b.query;o(_)}return y.preventDefault(),x}return null},[o]),p=f.useCallback(y=>{let v=m.current-1;if(v<0)v=-1,m.current===0&&(y.preventDefault(),o(c.current,u.current));else{y.preventDefault();const x=d.current[v];if(x?.query){const b=x.query;o(b)}}return v},[o]);return f.useCallback(y=>{if(n)return!1;if(oo.isArrowDown(y)){const v=h(y,d.current.length);if(v!==null)return a(v),!0}else if(oo.isArrowUp(y)){const v=p(y);if(v!==null)return a(v),!0}else if(oo.isEnterKeyWithoutShift(y)&&m.current>=0&&m.current<d.current.length)return i(d.current[m.current],m.current),!0;return!1},[i,n,h,p,a])}const i2t=()=>{const{base:e}=At(),t=Pt();return t===(e||"/")||t?.startsWith("/welcome")||t?.startsWith("/finance")};var GZ={};const l2t=e=>e==="travel"||e==="shopping"||e==="academic"||e==="sports",c2t=({autosuggestionsEnabled:e=!0,inputQuery:t,inputJson:n,isInputActive:r,onChange:s,handleSuggestionSubmission:a,handleSuggestionView:o,querySource:i,hasThreadContent:c,isMentionMenuOpened:u})=>{const{isWindowsAppPanelView:d}=bf(),[m,h]=f.useState(-1),[p,g]=f.useState(t),[y,v]=f.useState(),x=Pt(),{isSuggestionsDisabled:b}=hn(),_=i2t(),w=zme(x),S=ntt(x),{activeMenu:C,suggestions:E}=Xs(),{currentOpenedModal:M}=_t(),{setSuggestions:T,setShowSuggestDropdown:I}=qo(),j=f.useMemo(()=>b||!e||!_&&!w&&!d&&!S&&!l2t(i)&&!GZ.NEXT_PUBLIC_IS_SIDECAR_BUILD||i!=="finance"&&t.length>yXe&&!E.some(({query:P})=>P===t)||!!GZ.NEXT_PUBLIC_IS_SIDECAR_BUILD&&c,[b,e,_,w,S,d,i,t,c,E]),N=o2t({userInputQuery:p,userInputJson:y,suggestionsDisabled:j,suggestions:E,focusedIndex:m,setFocusedIndex:h,onChange:s,handleSuggestionSubmission:a});return f.useEffect(()=>{m===-1&&(g(t),v(n))},[t,m,g,v,n]),f.useEffect(()=>{j&&(T(ce),h(-1))},[j,T,h]),f.useEffect(()=>{const P=!j&&r&&!C&&!M&&E.length>0&&!u;I(P),P&&o(E)},[j,r,C,M,E,u,I,o]),f.useMemo(()=>({focusedIndex:m,setFocusedIndex:h,suggestionsDisabled:j,userInputQuery:p,handleSuggestDropdownNavigation:N}),[m,N,j,p])};class u2t{static isAnyInputElementFocused(){const t=document.activeElement;return!!(t&&(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.getAttribute("contenteditable")==="true"||t.getAttribute("role")==="textbox"))}}function d2t({value:e,json:t,isDisabled:n,handleSubmit:r,handleSuggestDropdownNavigation:s,querySource:a,focusInput:o,isInputActive:i}){const{isMobileUserAgent:c}=Ce(),u=f.useRef(e),d=f.useRef(t);u.current=e,d.current=t;const m=f.useCallback(v=>n&&oo.isEnterKeyWithoutShift(v)?(v.preventDefault(),!0):!1,[n]),h=f.useCallback(v=>v.isComposing?(v.preventDefault(),!0):!1,[]),p=f.useCallback(v=>{oo.isEnterKeyWithoutShift(v)&&!c&&(v.preventDefault(),r({query:u.current,json:d.current,querySource:a}))},[r,a,c]),g=f.useCallback(v=>{const x=oo.isCtrlOrCmdJ(v),b=oo.isOnlySlashKey(v);if(x||b){if(i||u2t.isAnyInputElementFocused())return;v.preventDefault(),o()}},[o,i]);return f.useEffect(()=>(document.addEventListener("keydown",g),()=>{document.removeEventListener("keydown",g)}),[g]),f.useCallback(v=>{m(v)||h(v)||s(v)||p(v)},[m,h,s,p])}function f2t({value:e,json:t,querySource:n,disableSubmission:r=!1,disableInput:s=!1,autofocus:a=!0,isUploadingFile:o=!1,onChange:i,onFocus:c,handleSubmit:u,handleUpdateAutosuggestions:d,autosuggestionsEnabled:m=!0,errorMessage:h,sources:p,attachments:g,selectedSearchMode:y,isInputActive:v,setIsInputActive:x,updateOnFocus:b=!1,inFlight:_=!1,resultsLength:w=0,quote:S,isMentionMenuOpened:C,isCometHome:E=!1,reason:M}){const{activeMenu:T,inputRef:I}=Xs(),j=dst(),{setShouldTriggerFocus:N}=s1(),{blankStateSuggestions:P}=Xs(),{setSuggestions:R}=qo(),{onActiveMenuChange:k}=qo(),{isAndroid:O}=Wt(),L=f.useMemo(()=>!!S||e.trim().length>0||!!g&&g.length>0,[S,e,g]),F=r||s||!!h||o||!L,U=f.useCallback(le=>{const{mentions:ie}=Ipe(t?.root);u({...le,mentions:ie.length>0?ie:void 0})},[t,u]),V=W_t({handleSubmit:U,inputQuery:e}),W=H_t({inputQuery:e}),{focusedIndex:H,setFocusedIndex:G,suggestionsDisabled:K,userInputQuery:$,handleSuggestDropdownNavigation:q}=c2t({autosuggestionsEnabled:m,inputQuery:e,inputJson:t,isInputActive:v&&m,onChange:i,handleSuggestionView:W,handleSuggestionSubmission:V,querySource:n,hasThreadContent:_||w>0,isMentionMenuOpened:C});a2t({sources:p,attachments:g,selectedSearchMode:y,suggestionsDisabled:K,focus:n==="finance"?"finance":void 0,query:e,isCometHome:E,reason:M});const Z=f.useCallback(()=>{I.current?.focus(),x(!0)},[I,x]),se=f.useCallback(le=>{c?.(le),x(!0),k(null),b&&d(I.current?.value??""),O&&setTimeout(()=>{I.current?.scrollIntoView({behavior:"smooth",block:"center"})},300)},[c,k,d,x,b,I,O]);f.useEffect(()=>{j&&a&&(Z(),N(!1))},[j,Z,N,a]);const Y=f.useCallback(()=>(x(!1),G(-1),!0),[G,x]),{variation:Q}=$_t(!1),re=f.useCallback((le,ie)=>{if(i(le,ie),K){Q&&R([]);return}le.trim().length===0&&P[y]?(R(P[y]),d(le)):wXe(le)&&d(le)},[i,K,d,P,R,y,Q]),te=d2t({value:e,json:t,isDisabled:F,handleSubmit:U,handleSuggestDropdownNavigation:q,querySource:n,focusInput:Z,isInputActive:v});return f.useEffect(()=>{T!==null?I.current?.blur():a&&Z()},[T,I,Z,a]),f.useMemo(()=>({isDisabled:F,focusedIndex:H,setFocusedIndex:G,userInputQuery:$,handleSuggestionSubmission:V,handleFocus:se,handleBlur:Y,handleChange:re,handleKeyDown:te,focusInput:Z,hasQuery:L}),[Z,H,Y,re,se,te,V,L,F,G,$])}const m2t=(e,t)=>{const{value:n,loading:r}=Ut({flag:"search-files-v2-enabled",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])};function h2t(){const{value:e}=ZO({flag:"enable-audio-video-uploads-attachments",subjectType:"user_nextauth_id",defaultValue:"False"});return f.useMemo(()=>({isAudioVideoFilesEnabled:e==="True"}),[e])}const EF=({reason:e})=>{const t=gt(),{mutateAsync:n}=Mt({mutationKey:_x(),mutationFn:async o=>(await $Ge({request:{url:o.url,thread_id:o.thread_id},reason:e})).file_url,onSuccess:(o,i,c)=>{t.setQueryData(_x(i.url),o),i.callback?.(o,!1)},onError:(o,i,c)=>{i.callback?.("",!1)},retry:!1}),r=f.useCallback(o=>{const i=t.getQueryData(_x(o));return typeof i=="string"?i:null},[t]),s=f.useCallback(async o=>{o.callback?.("",!0);const i=r(o.url);if(i)return o.callback?.(i,!1),i;const c=await n(o);return o.callback?.(c,!1),c},[r,n]),a=f.useCallback(async(o,i)=>{const c=URL.createObjectURL(i);t.setQueryData(_x(o),c)},[t]);return f.useMemo(()=>({getCachedImageDownloadUrl:r,getImageDownloadUrl:s,cacheImageDownloadUrl:a}),[a,r,s])};function p2t(){const{value:e}=Ut({flag:"async-file-attachments-v2",defaultValue:!1,subjectType:"user_nextauth_id"});return e}const g2t=1e4,Dw=["autosuggest"],y2t=()=>{const{isMobile:e}=Wt(),t=gt();return f.useCallback(n=>{const r=t.getQueryData(Dw),s=t.getQueryData([...Dw,n]);if(s?.length&&s.length===Fm(e))return s;if(r){const a=n.replace(/\s+/g,"").toLocaleLowerCase(),o=[];for(const d of r){if(e&&d.url)continue;const[m,h]=ume(a,d);if(m&&(o.push([h,d]),o.length===Fm(e)))break}const i=o.sort(([d],[m])=>d-m).map(([d,m])=>m),[c,u]=OP(i,e,n);if(s?.length){const d=[...s];for(const m of c)if(!d.find(h=>h.query===m.query)&&(d.push(m),d.length===Fm(e)))break;return OP(d,e,n)[1]}return u}return ce},[e,t])},v2t=()=>{const{suggestions:e}=Xs(),{setSuggestions:t}=qo(),n=f.useRef(e);n.current=e;const r=gt(),s=y2t(),a=f.useRef(!1),{isMobile:o}=Wt(),i=f.useRef(null),c=f.useRef(null),u=f.useRef([]),d=f.useRef({lastMessageID:0}),m=f.useCallback((y,v=!1)=>{const x=s(y);!v&&!x.length||(n.current.length!==x.length||u4e(n.current,x,"query").length!==x.length)&&(n.current=x,t(x))},[s,t]),h=f.useCallback(y=>{try{const v=new WebSocket("wss://suggest.perplexity.ai/suggest/ws");v.onopen=()=>{y?.()},v.onmessage=x=>{let b;try{if(b=JSON.parse(x.data),b.length!==4){ee.error("Invalid autosuggest message",b);return}}catch(j){ee.error("Error parsing autosuggest message",j);return}const[_,w,S,C]=b,E=parseInt(S),M=SXe(C),[T,I]=OP(M,o);if(r.setQueryData(Dw,(j=ce)=>T.length?Gne([...T,...j],"query").sort((N,P)=>N.query.localeCompare(P.query)):j),r.setQueryData([...Dw,_],I),E===d.current.lastMessageID&&a.current&&m(_,!0),d.current[E]){const j=performance.now()-d.current[E];u.current.push(j)}},i.current=v}catch(v){ee.error("Error connecting to autosuggest socket",v)}},[o,m,r]),p=f.useCallback(()=>{c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{i.current&&(i.current.close(),i.current=null)},g2t)},[]);f.useEffect(()=>(h(),p(),()=>{i.current&&i.current.close(),c.current&&clearTimeout(c.current)}),[h,p]);const g=f.useCallback((y,v=!0)=>{if(a.current=!!y,!a.current)return;m(y);const x=[WebSocket.OPEN,WebSocket.CONNECTING];if(!i.current||!x.includes(i.current.readyState)){v&&h(()=>{g(y,!1)});return}else p();const b=d.current.lastMessageID+1,_=b.toString();d.current.lastMessageID=b;try{const w=JSON.stringify({q:y,uuid:_,full_completion:!0});if(i.current.readyState===WebSocket.CONNECTING)return;i.current.send(w),d.current[b]=performance.now()}catch(w){ee.error("Error sending query for autosuggest",w)}},[h,p,m]);return f.useEffect(()=>{const y=setInterval(()=>{u.current.length!==0&&(z8e({latencies:u.current,isMobile:o}),u.current=[])},vXe);return()=>clearInterval(y)},[o]),f.useMemo(()=>({handleUpdateAutosuggestions:g}),[g])},x2t=({fileUploadRef:e,showFileUpload:t,attachments:n,setAttachments:r,handleChange:s,setIsUploadingFile:a,focusInput:o})=>{const{inputRef:i}=Xs(),c=z9(),[u,d]=f.useState(null),m=f.useCallback(x=>{const b=n===void 0?"paste.txt":`paste-${n.length+1}.txt`,_=new File([x],b,{type:"text/plain"}),w=new DataTransfer;w.items.add(_),d({content:x,fileName:b}),e.current?.uploadFiles(w.files)},[n,e]),h=f.useCallback(()=>{d(null)},[]),p=f.useCallback(x=>{const b=x.clipboardData;if(b&&b.items.length>0){const w=new DataTransfer;for(let S=0;S<b.items.length;S++){const C=b.items[S];if(C.kind==="file"){x.preventDefault();const E=C.getAsFile();E&&w.items.add(E)}if(C.type==="text/plain"){const E=x.clipboardData.getData("Text");E.length>bd&&(x.preventDefault(),m(E))}}e.current?.uploadFiles(w.files)}const _=!!x.currentTarget;requestAnimationFrame(()=>{i.current&&(i.current.trim(),s(i.current.value,i.current.json),_&&(i.current.focusAtEnd(),i.current.scrollToEnd()))})},[e,s,i,m]),g=f.useCallback(x=>{s(x),i.current?.focus()},[s,i]),y=f.useCallback(x=>{a(!1),x.length>0?(r(x),o()):r(void 0)},[a,r,o]),v=f.useCallback(async x=>{const b=new DataTransfer;for(let _=0;_<x.length;_++){const w=x[_];if(w.kind==="file"){const S=w.webkitGetAsEntry();if(!S)continue;if(Zde(S)){const C=w.getAsFile();C&&b.items.add(C)}else if(Jde(S)){const C=await Vqe(S);for(const E of C)b.items.add(E)}}if(w.type==="text/plain"&&w.getAsString(S=>{S.length>bd?m(S):i.current&&(i.current.append(S),s(i.current.value,i.current.json))}),b.items.length>c)break}e.current?.uploadFiles(b.files)},[e,i,s,c,m]);return f.useEffect(()=>{t||(r(void 0),d(null))},[t,r]),f.useMemo(()=>({handlePaste:p,handlePasteQuery:g,handleCompleteFileUpload:y,handleFileSelect:v,autoCreatedTextFile:u,dismissNotification:h,setAutoCreatedTextFile:d}),[y,v,p,g,u,h])};function b2t({reason:e}){const t=gt();return Mt({mutationFn:()=>FGe({reason:e}),onSuccess:()=>{t.invalidateQueries({queryKey:["get_user_settings"]})}})}function _2t({reason:e}){return Mt({mutationFn:async({connectionType:t,content:n})=>{await UGe({connectionType:t,content:n,reason:e})}})}const w2t=({reason:e,mode:t})=>{const n=X(),[r,s]=f.useState(!1),[a,o]=f.useState(null),{openToast:i}=On(),{openModal:c,closeModal:u}=_t(),{openPicker:d,toPickerDocument:m}=S_t(),{mutateAsync:h}=_2t({reason:e}),p=f.useCallback(b=>{b.connector==="sharepoint"&&t==="attachment"?c("sharepointSiteModal",{onSelectSite:_=>{u(),b&&(s(!0),o({...b,webUrl:_}),d({...b,webUrl:_}))}}):(s(!0),o(b),b.connector==="onedrive"&&d(b))},[u,t,c,d]),g=f.useCallback(()=>{s(!1),o(null)},[s,o]),y=f.useCallback(b=>{ee.error("A Microsoft file picker error occured:",b),g(),i(n.formatMessage({defaultMessage:"{formattedName} is not responding. Please try again later.",id:"oF/tZmXBik"},{formattedName:R8e}),"error",5)},[g,i,n]),v=f.useCallback((b,_)=>{h({connectionType:b,content:_})},[h]),x=f.useCallback(b=>{a&&(o({...a,webUrl:b}),d({...a,webUrl:b}))},[a,d]);return f.useMemo(()=>({onOpen:p,onClose:g,onError:y,onSelectSite:x,toPickerDocument:m,log:v,isOpen:r,options:a}),[r,v,g,y,p,x,a,m])};function S2t(){const{value:e}=Ut({flag:"resize-image-attachments",defaultValue:!1,subjectType:"user_nextauth_id"});return e}function C2t(){const{value:e}=vf({flag:"attachment-token-estimation-params",defaultValue:{max_total_tokens:5e5,type_bytes_per_token:{text:4,image:500},type_subtype_bytes_per_token:{"application/pdf":200,"application/msword":500,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":500,"application/vnd.openxmlformats-officedocument.presentationml.presentation":500},default_bytes_per_token:100},subjectType:"user_nextauth_id"});return e}const E2t=({clientId:e})=>{const[t,n]=f.useState(!1);f.useEffect(()=>{if(!e)return;const s=document.createElement("script");return s.src="https://www.dropbox.com/static/api/2/dropins.js",s.id="dropboxjs",s.setAttribute("data-app-key",e),s.onload=()=>n(!0),s.onerror=()=>n(!1),document.body.appendChild(s),()=>{const a=document.getElementById("dropboxjs");a&&document.body.removeChild(a)}},[e]);const r=f.useCallback(s=>{if(!t)return;let a=s.mode==="source"?_F:wF;a=s.isAudioVideoFilesEnabled?a.concat(SF):a,window.Dropbox.choose({success:s.onPicked,error:o=>s.onError?.(o),multiselect:!0,extensions:a,folderselect:s.mode==="source"})},[t]);return f.useMemo(()=>({isReady:t,openPicker:r}),[t,r])};function M2t(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.addEventListener&&e.addEventListener.apply(e,t)}function T2t(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)}var k2t=typeof window<"u";function HI(e){if(e){if(e.tagName==="BODY")return e;if(e.tagName==="IFRAME"){var t=e.contentDocument;return t?t.body:null}else if(!e.offsetParent)return null}else return null;return HI(e.offsetParent)}function qZ(e){var t=e||window.event;return t.touches.length>1?!0:(t.preventDefault&&t.preventDefault(),!1)}var KZ=k2t&&window.navigator&&window.navigator.platform&&/iP(ad|hone|od)/.test(window.navigator.platform),Gf=new Map,YZ=typeof document=="object"?document:void 0,kb=!1;const N2t=YZ?function(t,n){t===void 0&&(t=!0);var r=f.useRef(YZ.body);n=n||r;var s=function(o){var i=Gf.get(o);i?Gf.set(o,{counter:i.counter+1,initialOverflow:i.initialOverflow}):(Gf.set(o,{counter:1,initialOverflow:o.style.overflow}),KZ?kb||(M2t(document,"touchmove",qZ,{passive:!1}),kb=!0):o.style.overflow="hidden")},a=function(o){var i=Gf.get(o);i&&(i.counter===1?(Gf.delete(o),KZ?(o.ontouchmove=null,kb&&(T2t(document,"touchmove",qZ),kb=!1)):o.style.overflow=i.initialOverflow):Gf.set(o,{counter:i.counter-1,initialOverflow:i.initialOverflow}))};f.useEffect(function(){var o=HI(n.current);o&&(t?s(o):a(o))},[t,n.current]),f.useEffect(function(){var o=HI(n.current);if(o)return function(){a(o)}},[])}:function(t,n){},A2t=["https://www.googleapis.com/auth/userinfo.profile","https://www.googleapis.com/auth/userinfo.email","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.metadata.readonly"].join(" "),P2t=["application/vnd.google-apps.file","application/vnd.google-apps.folder","application/vnd.google-apps.document","application/vnd.google-apps.presentation","application/vnd.google-apps.spreadsheet","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","application/pdf","text/csv","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/markdown"],R2t=["text/plain","application/pdf","text/csv","text/markdown","image/png","image/jpeg","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.google-apps.document","application/vnd.google-apps.presentation","application/vnd.google-apps.spreadsheet"],I2t=["audio/mpeg","audio/wav","audio/aiff","audio/ogg","audio/flac","audio/mp3","video/mp4","video/mpeg","video/mov","video/avi","video/x-flv","video/mpg","video/webm","video/wmv","video/3gpp","video/quicktime"],j2t=({clientId:e,apiKey:t,loginHint:n,isAudioVideoFilesEnabled:r,onError:s})=>{const[a,o]=f.useState(!1),[i,c]=f.useState(!1);N2t(i);const u=f.useCallback(()=>{s?.()},[s]);f.useEffect(()=>{const h=document.createElement("script");h.src="https://apis.google.com/js/api.js",h.id="google-drive-picker-gapi-script",h.onload=()=>{const p=document.createElement("script");p.src="https://accounts.google.com/gsi/client",p.id="google-drive-picker-gis-script",p.onload=()=>{window.gapi.load("picker",{callback:()=>o(!0),onerror:()=>{o(!1),u()}})},p.onerror=()=>{o(!1),u()},document.body.appendChild(p)},h.onerror=()=>{o(!1),u()},document.body.appendChild(h)},[u]);const d=f.useCallback((h,p)=>{const g=window.google?.picker,y=v=>{v.action===g.Action.PICKED?p.onPicked&&p.onPicked(v.docs??ce):(v.action===g.Action.CANCEL||v.action===g.Action.ERROR)&&(v.action===g.Action.CANCEL&&p.onCancel&&p.onCancel(),c(!1))};if(a&&g)try{const v=new g.DocsView().setIncludeFolders(!0).setSelectFolderEnabled(!0).setMode(g.DocsViewMode.LIST),x=new g.ViewGroup(v);let b=p.mode==="source"?P2t:R2t;b=r?b.concat(I2t):b,new g.PickerBuilder().setSize(1051,650).addViewGroup(x).setSelectableMimeTypes(b.join(",")).enableFeature(g.Feature.MULTISELECT_ENABLED).setOAuthToken(h).setDeveloperKey(t).setCallback(y).build().setVisible(!0),c(!0)}catch{u()}},[a,t,u,r]),m=f.useCallback(h=>{window.google.accounts.oauth2.initTokenClient({client_id:e,login_hint:n,scope:A2t,prompt:"none",callback:g=>{if(g.error!==void 0)throw new Error(g.error);try{d(g.access_token,h)}catch(y){console.log(y)}}}).requestAccessToken()},[d,e,n]);return f.useMemo(()=>({openPicker:m,isReady:a}),[m,a])};function O2t(e){return e.every(t=>t instanceof File)}const L2t=({fileInputRef:e,isSignedIn:t,uploadRateLimit:n,maxFilesUpload:r,maxImageFilesUpload:s,attachmentTokenEstimationParams:a,forwardedRef:o,existingAttachments:i,showPrivacyWarning:c,connectorsMap:u,onFilePickerOpen:d,onStart:m,onComplete:h,openLoginModal:p,openPricingModal:g,openCompanyDataPrivacyModal:y,closeModal:v,openVisitorLoginUpsell:x,openMicrosoftPicker:b,closeMicrosoftPicker:_,errorMicrosoftPicker:w,toPickerDocument:S,setUploadRateLimit:C,isFollowUp:E,isClearAttachmentsEnabled:M=!1,forceImage:T,refreshBoxCredentials:I,logMicrosoft:j,asyncAttachmentsEnabled:N=!1,setUploadsReady:P,getImageUrl:R,isAudioVideoFilesEnabled:k=!1,reason:O,incompleteParsingEnabled:L=!1,isImageAttachmentResizingEnabled:F=!1,maxAttachmentFileSizeMB:U=u8e,specialCapabilities:V={unlimitedProSearch:!1,maxModelSelection:!1,unlimitedResearch:!1,fileUpload:!1}})=>{const{$t:W}=X(),[H,G]=f.useState(null),[K,$]=f.useState(null),[q,Z]=f.useState([]),[se,Y]=f.useState(q&&q.length>0?"success":"idle"),[Q,re]=f.useState(null),te=`${U}MB`,le=f.useCallback(async(xe,qe,He)=>{if(!co(xe))return null;const ze=He?{type:He}:void 0,ot=E9(xe)?xe:await R?.(xe)??xe;if(!ot)return new File([],qe,ze);try{const Gt=await(await fetch(ot)).blob();return new File([Gt],qe,ze)}catch{return new File([],qe,ze)}},[R]);f.useEffect(()=>{M?Z([]):(async()=>{const qe=await Promise.all((i??ce).map(async He=>{const ze=kP(He.split("/").pop()||"file"),ot=m_(He);let it=new File([],ze,{type:ot}),Gt;if(co(it)){const Vt=await le(He,ze,ot);it=Vt??it,Gt=Vt?URL.createObjectURL(Vt):void 0}return{id:ar(),file:it,nextURL:He,status:"success",thumbnailSource:Gt}}));Z(qe)})()},[M,i,le]),f.useEffect(()=>{if(!P)return;if(!N||!q.length){P(!0);return}const xe=He=>L?He.status==="parsing"||He.status==="success"||He.status==="failed":He.status==="success"||He.status==="failed",qe=q.every(xe);P(qe)},[q,N,P,L]),f.useImperativeHandle(o,()=>({uploadFiles:xe=>Et(Array.from(xe)),clearFiles:ie}));const ie=f.useCallback(()=>{Z([]),Y("idle"),h?.([]),e.current?.value&&(e.current.value=""),re(null)},[e,h]),pe=f.useCallback((xe,qe)=>{Z(He=>{let ze=He;return xe?ze=He.filter(ot=>ot.nextURL!==xe):qe&&(ze=He.filter(ot=>!ot.nextURL?.includes(qe))),ze.length===0&&Y("idle"),h?.(ze.filter(ot=>!!ot.nextURL).map(ot=>({url:ot.nextURL??"",file:ot.file,resizedFile:ot.resizedFile}))??[]),ze}),e.current?.value&&(e.current.value="")},[e,h]),me=f.useCallback(xe=>{$(null),G(xe??W(To[Ly.generic_upload_error])),q?.length&&Y("success")},[W,q?.length]),de=f.useCallback(()=>{if(!p)return;const xe=W({defaultMessage:"Sign in to upload files and photos",id:"gEOi1eLJ7C"}),qe=W({defaultMessage:"Analyze files and photos for free",id:"nu4bK5/Y5T"});x?x({title:xe,description:qe,origin:Be.FILE_UPLOAD,sheetModalVariant:E?"bottom-sheet-gradient":"full-sheet"}):p({origin:Be.FILE_UPLOAD,pitchMessage:{title:xe,description:qe}})},[W,E,p,x]),ve=f.useCallback(()=>{if(!g)return;const xe=W({defaultMessage:"Want more uploads?",id:"iInvIJ0Dv/"}),qe=W({defaultMessage:"Upgrade access for subscribers",id:"UwiL3wLZE3"});g({pitchMessage:{title:xe,description:qe},origin:Be.FILE_UPLOAD})},[W,g]),Ae=f.useCallback(async(xe,qe)=>{let He;N?He=await RYe({request:{file_uuids:[xe]},reason:O}):He={file_uuid:xe,success:!0,error_code:null};const ze=He.success?"success":"failed";ze==="failed"?(me(W(To[He.error_code??NP.parsing_error],{filename:qe})),Z(ot=>ot.filter(it=>it.file_uuid!==xe))):Z(ot=>[...(ot??[]).map(it=>it.file_uuid===xe?{...it,status:ze}:it)])},[me,N,W,O]),Se=f.useCallback(xe=>xe instanceof File&&U$.includes(xe.type)||!(xe instanceof File)&&xe.mimeType&&U$.includes(xe.mimeType)?W(To[Ly.unsupported_type]):xe instanceof File&&xe.size>U*F$||!(xe instanceof File)&&xe.sizeBytes&&xe.sizeBytes>U*F$?W(To[Ly.too_large],{max:te}):xe instanceof File&&xe.size<D$||!(xe instanceof File)&&xe.sizeBytes&&xe.sizeBytes<D$?W(To.too_small):xe.name?null:W(To.no_name),[W,te,U]),De=f.useCallback(async(xe,qe,He,ze,ot,it)=>{if(!xe.ok){me(),ee.warn(`[localAttachmentUpload] upload failed for ${it}, response=${xe}`);return}let Gt=null;try{const cn=await xe.json();if(cn?.moderation?.[0]?.status==="rejected"){me(W(To.failed_moderation)),ee.warn(`[localAttachmentUpload] upload failed moderation for ${it}, response=${xe}`);return}Gt=TP(cn?.eager?.[0]?.secure_url??cn?.secure_url)}catch{Gt=`${He}${ze}`.replace("${filename}",`${qe.name}`)}if(!Gt){me();return}const Vt=Dm(Gt)?"success":"parsing";Z(cn=>cn.map(Qn=>Qn.id===ot?{...Qn,nextURL:Gt,file_uuid:it,status:Vt}:Qn)),Y("success"),re("local"),it&&Vt=="parsing"&&await Ae(it,qe.name)},[me,W,Ae]),Ne=f.useCallback(async(xe,qe,He)=>{if(!xe?.success){me();return}if(xe.rate_limited){ve(),me(W(To.rate_limited));return}if(!xe.filename||!xe.url){me();return}const ze=xe.url&&Dm(xe.url)?TP(xe.url):kP(xe.url),ot=m_(ze);console.log(xe.url,xe.filename,ot);const it=await le(xe.url,xe.filename,ot),Gt=Dm(xe.url)?"success":"parsing";Z(Vt=>Vt.map(cn=>cn.id===He?{...cn,file:it??cn.file,nextURL:ze,file_uuid:xe.file_uuid??void 0,status:Gt,thumbnailSource:it?URL.createObjectURL(it):void 0}:cn)),Y("success"),re(qe),xe.file_uuid&&Gt=="parsing"&&await Ae(xe.file_uuid,xe.filename)},[le,me,ve,W,Ae]),Pe=f.useCallback(async(xe,qe)=>{if(xe?.rate_limited){ve(),me(W(To.rate_limited));return}if(!xe||!xe.fields||!xe.s3_bucket_url){me();return}vfe(qe)&&Z(ze=>ze.map(ot=>ot.id===qe.id?{...ot,thumbnailSource:URL.createObjectURL(qe.file)}:ot));const He=new FormData;Object.entries(xe.fields).forEach(([ze,ot])=>{He.append(ze,ot)}),He.append("file",qe.file);try{const ze=await fetch(xe.s3_bucket_url,{method:"POST",body:He});await De(ze,qe.file,xe.s3_bucket_url,xe.fields.key,qe.id,xe.file_uuid??void 0)}catch(ze){ee.warn(`[localAttachmentUpload] upload failed for ${xe.file_uuid} with error=${ze}`),me()}},[ve,me,W,De]),dt=f.useCallback(xe=>{const qe=xe.filter(ze=>ze.status==="success").reduce((ze,ot)=>{const it=ot.file.type,Gt=it.split("/")[0],Vt=a?.type_subtype_bytes_per_token?.[it],cn=a?.type_bytes_per_token?.[Gt],Qn=a?.default_bytes_per_token,Sr=Vt??cn??Qn,ns=ot.file.size,Os=Sr?ns/Sr:0;return ze+Os},0),He=a?.max_total_tokens;return He&&qe>He},[a]);f.useEffect(()=>{if(!q.length)return;q.every(qe=>qe.status==="success"||qe.status==="failed")&&dt(q)&&$(W({defaultMessage:"Performance may be degraded for larger files.",id:"xwKpaJzWgU"}))},[q,dt,W,H]);const et=f.useCallback((xe,qe,He)=>{if(O2t(xe)){let ze=0;Promise.all(xe.map(async ot=>{const it=Se(ot);if(it){me(it);return}let Gt=ot;if(co(ot))try{F&&(Gt=await tYe(ot))}catch{ee.warn(`Unable to resize image file: ${ot.name}`)}const Vt={id:ar(),file:Gt,status:"uploading"};Z(Qn=>[...Qn??[],Vt]);const cn=await M9({file:Gt,fileSource:He,forceImage:T,reason:O});Pe(cn,Vt),ze++})).then(()=>{n&&n>0&&C&&C(ze)})}else qe&&xe.forEach(ze=>{const ot=Se(ze);if(ot)me(ot);else{const it=m_(ze.name??""),Gt=new File([""],ze.name??"",{type:it}),Vt={id:ze.id,file:Gt,status:"uploading"};Z(cn=>[...cn??[],Vt]),PYe({remote_file_id:ze.id,connection_type:qe.toUpperCase(),reason:O}).then(cn=>{Ne(cn,qe,Vt.id)})}})},[n,C,Se,T,O,me,F,Pe,Ne]),Et=f.useCallback((xe,qe,He)=>{if(!(!xe||xe.length===0)){if(He!==wO){if(!t&&!V.fileUpload){de();return}if(n&&n<=0){ve();return}if(xe.length+(q?.length??0)>r){G(W(To.over_file_count,{maxNumFiles:r}));return}{let ze=(q??[]).filter(ot=>ot.file.type.indexOf("image")>=0).length;for(const ot of xe)("type"in ot&&ot.type.indexOf("image")>=0||ot?.mimeType?.includes("image"))&&(ze+=1);if(ze>s){G(W(To.over_image_count,{maxNumImages:s}));return}}}m?.(),Y("loading"),et(xe,qe,He)}},[t,n,q,r,et,m,de,ve,s,W,V.fileUpload]),{openPicker:ue,isReady:Ue}=j2t({clientId:u?.google_drive?.picker_credentials?.client_id??"",apiKey:u?.google_drive?.picker_credentials?.api_key??"",loginHint:u?.google_drive?.connection_display_name??"",isAudioVideoFilesEnabled:k}),[Ct,Ye]=f.useState(!1),[mt,We]=f.useState(""),Oe=f.useCallback(()=>Ye(!1),[]),Tt=f.useCallback(xe=>{const qe=xe.map(He=>({id:He.id,name:He.name,sizeBytes:He.size,mimeType:AP[He.extension]}));Et(qe,"box"),Oe()},[Et,Oe]),{openPicker:$e,cleanupPicker:ct}=M_t({apiKey:(mt||u?.box?.picker_credentials?.api_key)??"",mode:"attachment",isAudioVideoFilesEnabled:k,onPicked:Tt,onCancel:Oe}),yt=f.useCallback(async()=>{const xe=u?.box?.picker_credentials?.expires_at??"";if(xe&&I){const qe=new Date(xe);if(isNaN(qe.getTime())){Ye(!0);return}if(qe<new Date){const ze=await I();We(ze?.api_key??"")}}Ye(!0)},[u?.box?.picker_credentials?.expires_at,I]);f.useEffect(()=>{Ct&&$e()},[Ct,$e]);const ht=f.useCallback((xe,qe)=>{if(!S||qe!=="onedrive"&&qe!=="sharepoint")return;const He=xe.map(ze=>S(ze,qe)).filter(ze=>ze!==null);Et(He,qe),_?.()},[S,Et,_]),{openPicker:ut}=E2t({clientId:u?.dropbox?.picker_credentials?.client_id??""}),fn=f.useCallback(xe=>{const qe=xe.map(He=>{const ze=kC(He.name);return ze?{id:He.id,name:He.name,sizeBytes:He.bytes,mimeType:AP[ze]}:null}).filter(He=>He!==null);Et(qe,"dropbox")},[Et]),wr=f.useCallback(()=>me(W({defaultMessage:"Unable to retrieve files from connector.",id:"4seKuUP1Wo"})),[me,W]),sn=f.useCallback((xe,qe)=>{if(xe=="google_drive"&&Ue)ue({mode:"attachment",onPicked:He=>Et(He,xe)});else if(xe==="onedrive"||xe==="sharepoint"){const He=u?.[xe];b?.({connector:xe,clientId:He?.picker_credentials?.client_id??"",tenantName:He?.picker_credentials?.tenant_name??"",loginHint:He?.connection_display_name??"",webUrl:qe,mode:"attachment",isAudioVideoFilesEnabled:k,onPicked:ze=>ht(ze,xe),onError:w,onCancel:_,log:j})}else xe==="dropbox"?ut({mode:"attachment",isAudioVideoFilesEnabled:k,onPicked:fn,onError:wr}):xe=="box"&&yt()},[Ue,u,ue,Et,b,ht,_,w,ut,fn,wr,yt,j,k]),kt=f.useCallback(xe=>{y&&y(()=>{v?.(),!xe||xe==="local"?(e.current?.click(),d?.()):sn(xe)})},[e,v,y,sn,d]),Kt=f.useCallback(xe=>{if(!t&&!V.fileUpload){de();return}if(n&&n<=0){ve();return}if(c&&!yn(MA)){kt(xe),qt(MA,"true",{expires:30});return}!xe||xe==="local"?(e.current?.click(),d?.()):sn(xe)},[t,n,c,e,de,ve,kt,sn,d,V.fileUpload]);return f.useEffect(()=>{let xe=null;return K&&(xe=setTimeout(()=>{$(null)},c8e)),()=>{xe&&clearTimeout(xe)}},[K]),f.useEffect(()=>{q&&h?.(q.filter(xe=>!!xe.nextURL).map(xe=>({url:xe.nextURL??"",file:xe.file,resizedFile:xe.resizedFile})))},[q,h]),f.useMemo(()=>({errorMessage:H,warningMessage:K,uploadedFiles:q,uploadSource:Q,status:se,fileInputRef:e,handleClearFiles:ie,handleRemoveFile:pe,handleStartUpload:Kt,handleFileInput:Et,handleOpenLoginModal:de,handleOpenPricingModal:ve,isBoxOpen:Ct,onCloseBox:Oe,cleanupBoxPicker:ct,setErrorMessage:G}),[H,K,q,Q,se,e,ie,pe,Kt,Et,de,ve,Ct,Oe,ct])},D2t=({fileUploadRef:e,disablePrivacyWarning:t,isAudioVideoFilesEnabled:n,isClearAttachmentsEnabled:r,isFollowUp:s,existingAttachments:a,organization:o,lastResult:i,onStartFileUpload:c,onCompleteFileUpload:u,setUploadsReady:d,reason:m,incompleteParsingEnabled:h=!1,specialCapabilities:p})=>{const g=f.useRef(null),{openModal:y,closeModal:v}=_t(),x=z9(),b=C2t(),{value:_}=Ut({flag:"async-attachment-processing",defaultValue:!1,subjectType:"user_nextauth_id"}),w=S2t(),S=Je(),{openVisitorLoginUpsell:C}=$n({enabled:!S}),{hasDataRetentionWarning:E,connectorLimits:M}=js({reason:m}),{connectorsMap:T}=$C({reason:m}),{uploadRateLimit:I,setUploadRateLimit:j}=Sn(),{hasActiveSubscription:N,isMax:P}=Nt(),R=I??(N?Zoe:Xoe),k=f.useCallback(re=>y("loginModal",re),[y]),O=f.useCallback(re=>{P||y("pricingModal",re)},[y,P]),L=f.useCallback(re=>y("companyDataPrivacyModal",{organizationName:o?.display_name??"",onContinue:re}),[y,o]),{onOpen:F,onClose:U,onError:V,toPickerDocument:W,options:H,onSelectSite:G,isOpen:K,log:$}=w2t({reason:m,mode:"attachment"}),{mutateAsync:q}=b2t({reason:m}),{getCachedImageDownloadUrl:Z,getImageDownloadUrl:se}=EF({reason:m}),Y=f.useCallback(async re=>i?.backend_uuid?await se({url:re,thread_id:i.backend_uuid}):Z(re),[Z,se,i?.backend_uuid]),Q=L2t({fileInputRef:g,isSignedIn:S,uploadRateLimit:R,maxFilesUpload:x,maxImageFilesUpload:l8e,attachmentTokenEstimationParams:b,forwardedRef:e,showPrivacyWarning:E&&!t,existingAttachments:a,connectorsMap:T,onStart:c,onComplete:u,openLoginModal:k,openPricingModal:O,openCompanyDataPrivacyModal:L,closeModal:v,openVisitorLoginUpsell:C,openMicrosoftPicker:F,closeMicrosoftPicker:U,errorMicrosoftPicker:V,toPickerDocument:W,setUploadRateLimit:j,isFollowUp:s,isClearAttachmentsEnabled:r,refreshBoxCredentials:q,logMicrosoft:$,asyncAttachmentsEnabled:_,setUploadsReady:d,getImageUrl:Y,isAudioVideoFilesEnabled:n,reason:m,incompleteParsingEnabled:h,isImageAttachmentResizingEnabled:w,maxAttachmentFileSizeMB:M?.max_attachment_file_size_mb,specialCapabilities:p});return f.useMemo(()=>({...Q,fileInputRef:g,microsoftFilePickerOptions:H,handleSelectSharepointSite:G,isMicrosoftFilePickerOpen:K,onCloseMicrosoft:U}),[Q,G,K,H,U])};var F2t={};const U2t=({setInput:e})=>{const t=Ht();f.useEffect(()=>{if(!t||!F2t.NEXT_PUBLIC_IS_SIDECAR_BUILD)return;const n=t.get("p_q");n&&e(n)},[t,e])},KWt="web.frontend.realtime.voice",YWt="oai-realtime-v2v-tool-call",QWt=4096,B2t=.7;var V2t=(e=>(e.ControlBrowser="control_browser",e.CloseBrowserTabs="close_browser_tabs",e.GroupOpenBrowserTabs="group_open_browser_tabs",e.OpenNewBrowserTab="open_page",e.SearchBrowser="search_browser",e.UngroupOpenBrowserTabs="ungroup_open_browser_tabs",e))(V2t||{});function $2t(){return Intl.DateTimeFormat().resolvedOptions().timeZone}async function XWt({body:e,reason:t}){try{const n=await ne.POST("/rest/realtime/session",t,{timeoutMs:je({productionMs:1e4,clientSideMs:1e4}),numRetries:1,body:e,headers:{"content-type":"application/json"}});if(!n.response.ok){const s=n.response.statusText||"Unknown realtime session error";return{status:n.response.status,error:`Failed to get realtime session: ${s}`}}return{data:n.data,status:n.response.status,error:null}}catch(n){return ee.error("Failed to get realtime session",n),{data:null,status:500,error:`Failed to get realtime session: ${n.message||"Internal server error"}`}}}async function W2t({body:e,reason:t}){try{const n=await ne.POST("/rest/realtime/transcription-session",t,{timeoutMs:je({productionMs:5e3}),numRetries:1,body:e,headers:{"content-type":"application/json"}});return n.response.ok?{data:n.data,status:n.response.status,error:null}:{status:n.response.status,error:`Failed to get realtime transcription session: ${n.response.statusText}`}}catch(n){return ee.error("Failed to get realtime transcription session",n),{data:null,status:500,error:`Failed to get realtime transcription session: ${n}`}}}async function ZWt({body:e,reason:t}){try{const n=await ne.POST("/rest/realtime/execute-tools",t,{timeoutMs:je({productionMs:5e3}),numRetries:1,body:e,headers:{"content-type":"application/json"}});if(!n.response.ok){const s=await n.response.text();throw new Error(`Failed to execute tools: ${s}`)}return n.data}catch(n){ee.error("Failed to execute tools",n);return}}async function JWt({entry:e,analyticsParams:t,reason:n}){try{const r=await ne.POST("/rest/realtime/create-entry",n,{timeoutMs:je({productionMs:5e3}),numRetries:1,body:{...e,analytics_params:{...t,timezone:$2t(),visitor_id:yf()}},headers:{"content-type":"application/json"}});if(!r.response.ok){const a=await r.response.text();throw new Error(`Failed to create entry: ${a}`)}return r.data}catch(r){ee.error("Failed to create entry",r);return}}const H2t=({callbacks:e,config:t,reason:n})=>{const[r,s]=f.useState(!1),[a,o]=f.useState(""),[i,c]=f.useState(!1),[u,d]=f.useState(null),[m,h]=f.useState(()=>{const Y=Ve.getItem(B3);return Y?Y==="true":null}),{isWindowsApp:p}=Wt(),{trackEvent:g}=Te(),y=t.silenceThreshold??30,v=t.silenceDuration??5e3,x=f.useRef(null),b=f.useRef(null),_=f.useRef(""),w=f.useRef(null),S=f.useRef(!1),C=f.useRef(null),E=f.useRef(null),M=f.useRef(null),T=f.useRef(null),I=f.useRef(null),j=f.useRef(new Map),N=f.useRef(null),P=f.useRef(null),R=f.useRef(null),k=f.useRef([]),O=f.useRef(null),L=f.useCallback(async()=>{try{return(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(Q=>Q.stop()),h(!0),Ve.setItem(B3,"true"),!0}catch(Y){return d(`Microphone permission denied. ${Y}`),h(!1),Ve.setItem(B3,"false"),!1}},[]),F=f.useRef(!1),U=f.useCallback(()=>{w.current&&(w.current.getTracks().forEach(Y=>Y.stop()),w.current=null)},[]),V=f.useCallback(()=>{if(S.current=!1,M.current&&(clearTimeout(M.current),M.current=null),C.current&&(C.current.close(),C.current=null,E.current=null),x.current&&r&&x.current.stop(),O.current&&(clearInterval(O.current),O.current=null),R.current&&(R.current.port.onmessage=null,R.current.disconnect(),R.current=null),b.current&&b.current.stop(),U(),_.current="",o(""),j.current.clear(),s(!1),I.current&&(I.current.close(),I.current=null),T.current){const Y=Date.now()-T.current;g("stop transcription",{durationMs:Y})}T.current=null,e?.onStop?.()},[e,U,g,r]),W=f.useCallback(Y=>{if(!Y||!S.current)return;const Q=Y.frequencyBinCount,re=new Uint8Array(Q);Y.getByteFrequencyData(re),re.reduce((le,ie)=>le+ie)/Q<y?M.current||(M.current=setTimeout(()=>{S.current&&e?.onSilence?.()},v)):M.current&&(clearTimeout(M.current),M.current=null),S.current&&requestAnimationFrame(()=>W(Y))},[e,y,v]),H=f.useCallback(()=>Array.from(j.current.values()).map(Q=>Q.finalTranscript||Q.partialTranscript||"").join(" ").trim(),[j]),G=f.useCallback(Y=>{const{type:Q,item_id:re}=Y;if(!re)return;j.current.has(re)||j.current.set(re,{itemId:re,partialTranscript:"",finalTranscript:""});const te=j.current.get(re),le=P.current||"";switch(Q){case"conversation.item.input_audio_transcription.delta":{const{delta:ie}=Y;le==="whisper-1"?te.partialTranscript=ie:te.partialTranscript+=ie;break}case"conversation.item.input_audio_transcription.completed":{const{transcript:ie}=Y;typeof ie=="string"&&(te.finalTranscript=ie);break}case"input_audio_buffer.committed":{Y.previous_item_id&&(te.previousItemId=Y.previous_item_id);break}}j.current.set(re,te),o(H())},[H]),K=f.useCallback(async()=>{const Y=await W2t({body:{source:p?Am:Joe,timezone:_O,turn_detection_threshold:B2t,response_language:"en"},reason:n});if(!Y.data?.client_secret)throw ee.error("No ephemeral key from server"),new Error("Unable to start OAI session");N.current=Y.data.session_id,P.current=Y.data.model_name;const re=["realtime",`openai-insecure-api-key.${Y.data.client_secret}`,"openai-beta.realtime-v1"],te=new WebSocket("wss://api.openai.com/v1/realtime?intent=transcription",re);I.current=te,te.onopen=()=>ee.info("OpenAI WS connected (base64 PCM approach)"),te.onerror=le=>{ee.error("OAI WS error:",le),d("OpenAI WS error")},te.onclose=le=>{ee.info("OAI WS closed:",le.code)},te.onmessage=le=>{try{const ie=JSON.parse(le.data);G(ie)}catch(ie){ee.error("Invalid OAI WS message:",le.data,ie)}}},[G,p,n]),$=f.useCallback(Y=>{let Q=0;for(const le of Y)Q+=le.length;const re=new Int16Array(Q);let te=0;for(const le of Y)re.set(le,te),te+=le.length;return re},[]),q=f.useCallback(Y=>{const Q=Y.buffer;let re="";const te=new Uint8Array(Q);for(let le=0;le<te.byteLength;le++)re+=String.fromCharCode(te[le]);return btoa(re)},[]),Z=f.useCallback(async Y=>{const Q=new AudioContext;C.current=Q,await Q.audioWorklet.addModule("/audio-worklet.js");const re=new AudioWorkletNode(Q,"pcm-worklet-processor");R.current=re,re.port.onmessage=le=>{if(!S.current)return;const ie=le.data;k.current.push(ie)},O.current||(O.current=setInterval(()=>{if(!S.current||!I.current||I.current.readyState!==WebSocket.OPEN||k.current.length===0)return;const le=$(k.current);k.current=[];const ie=q(le),pe={event_id:`evt-${Date.now()}`,type:"input_audio_buffer.append",audio:ie};I.current.send(JSON.stringify(pe))},500));const te=Q.createMediaStreamSource(Y);te.connect(re),re.connect(Q.destination),E.current=Q.createAnalyser(),E.current.fftSize=256,te.connect(E.current),requestAnimationFrame(()=>W(E.current))},[W,$,q]),se=f.useCallback(async()=>{if(d(null),T.current=Date.now(),g("start transcription"),S.current=!0,(m===null||m===!1)&&(c(!0),!await L())){c(!1),d("Microphone permission is required for voice input"),e?.onStop?.(),S.current=!1;return}try{await K();const Y=await navigator.mediaDevices.getUserMedia({audio:!0}).catch(async Q=>{if(h(!1),!await L())throw Q;return navigator.mediaDevices.getUserMedia({audio:!0})});w.current=Y,await Z(Y),F.current&&b.current&&(_.current="",o(""),b.current.start(),b.current.onspeechend=()=>V()),s(!0),c(!1),e?.onStart?.()}catch(Y){d(`Failed to start recording. ${Y}`),S.current=!1}},[e,m,L,g,V,K,Z]);return f.useMemo(()=>({isTranscribing:r,isInitializing:i,transcription:a,error:u,startTranscription:se,stopTranscription:V}),[u,i,r,se,V,a])};function z2t(){const{value:e}=Ut({flag:"clear-attachment-on-submission",subjectType:"user_nextauth_id",defaultValue:!1});return e}const G2t=({entropyBrowser:e,isSidecar:t,focusInput:n})=>{f.useEffect(()=>{if(!e||!t)return;const r=()=>{document.visibilityState==="visible"&&n()},s=e.subscribeQuickActionButtonFired(()=>{n()});return document.addEventListener("visibilitychange",r),()=>{s(),window.removeEventListener("visibilitychange",r)}},[e,n,t])},sbe=A.memo(function(t){const{children:n,condition:r,Wrapper:s,...a}=t;return r?l.jsx(s,{...a,children:n}):n});sbe.displayName="ConditionalWrapper";var C5={},QZ;function q2t(){return QZ||(QZ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="box-open",r=640,s=512,a=[],o="f49e",i="M17.2 125.5c-9 17.9 .6 39.6 19.8 45.1l163.3 46.7c13.9 4 28.8-1.9 36.2-14.3L320 64 75.2 33.4c-6.7-.8-13.3 2.7-16.3 8.7L17.2 125.5zM320 64l83.4 139c7.4 12.4 22.3 18.3 36.2 14.3l163.3-46.7c19.3-5.5 28.8-27.2 19.8-45.1L581.1 42.1c-3-6.1-9.6-9.6-16.3-8.7L320 64zm-1.1 64l2.2 0s0 0 0 0l-2.2 0s0 0 0 0zM528 225.3l0 153.2-184 46L344 184c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 240.5-184-46 0-153.2L64 211.6l0 167c0 22 15 41.2 36.4 46.6l204.1 51c10.2 2.5 20.9 2.5 31 0l204.1-51c21.4-5.3 36.4-24.5 36.4-46.6l0-167-48 13.7z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faBoxOpen=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(C5)),C5}var K2t=q2t();let qg=0;function Y2t(e,t,n=!1){const[r,s]=f.useState(!1),[a,o]=f.useState(!1),i=f.useCallback(g=>{g.preventDefault()},[]),c=f.useCallback(g=>{g?.dataTransfer?.types.includes("Files")&&(g.preventDefault(),s(!0),qg++)},[]),u=f.useCallback(g=>{g.preventDefault(),qg=Math.max(0,qg-1),qg===0&&s(!1)},[]),d=f.useCallback(g=>{g.preventDefault(),s(!1),o(!1),qg=0,!t&&n&&g.dataTransfer?.items.length&&e(g.dataTransfer.items)},[t,e,n]),m=f.useCallback(g=>{g?.dataTransfer?.types.includes("Files")&&(g.preventDefault(),o(!0))},[]),h=f.useCallback(g=>{g.preventDefault(),o(!1)},[]),p=f.useCallback(g=>{g.preventDefault(),s(!1),o(!1),!t&&!n&&g?.dataTransfer?.items.length>0&&e(g.dataTransfer.items)},[t,e,n]);return f.useEffect(()=>(document.addEventListener("dragover",i),document.addEventListener("dragenter",c),document.addEventListener("dragleave",u),document.addEventListener("drop",d),()=>{document.removeEventListener("dragover",i),document.removeEventListener("dragenter",c),document.removeEventListener("dragleave",u),document.removeEventListener("drop",d)}),[i,c,u,d]),f.useMemo(()=>({isDraggingFile:r,isFileOver:a,rootProps:{onDragOver:m,onDragLeave:h,onDrop:p}}),[h,m,p,r,a])}const Q2t=A.memo(({onDrop:e,disabled:t=!1,children:n,dropZoneClassName:r,dropLabel:s,dropIcon:a=K2t.faBoxOpen,allowDropAnywhere:o=!1,...i})=>{const{$t:c}=X(),{isDraggingFile:u,isFileOver:d,rootProps:m}=Y2t(e,t,o),h=s??c(o?{defaultMessage:"Dropped files appear here.",id:"9WR4elgZix"}:{defaultMessage:"Drop your files here.",id:"llIM82nPs+"});return l.jsxs("div",{className:"relative",...m,...i,children:[u&&t?l.jsx(z,{className:B("border-subtler bg-subtler absolute inset-0 z-20 flex items-center justify-center rounded-2xl border-2 border-dashed",{"!border-caution":d},r?.(u,d)),children:l.jsxs(D,{color:"red",children:[l.jsx(xt,{icon:a,className:"mr-2"}),"Drop zone disabled"]})}):u?l.jsxs(l.Fragment,{children:[l.jsx(z,{variant:"background",className:"absolute inset-0 z-20 rounded-2xl opacity-80"}),l.jsx(z,{className:B("gap-x-sm animate-in fade-in border-subtler absolute inset-0 z-20 flex items-center justify-center rounded-2xl border-2 border-dashed transition-all duration-200",{"!border-super":d},r?.(u,d)),children:l.jsxs(D,{color:"super",children:[l.jsx(xt,{icon:a,className:"mr-2"}),h]})})]}):null,n]})});var E5={};const X2t=({value:e,json:t,querySource:n,placeholder:r,disableSubmission:s=!1,disableInput:a=!1,initialLayout:o="expanded",minRows:i=1,isFollowUp:c=!1,submitWillFork:u=!1,showSources:d=!1,showRecency:m=!1,showModelSelector:h=!0,showSearchModeSelector:p=!0,showFileUpload:g=!1,disableActionButtons:y=!1,showIncognitoHint:v,hasShadow:x=!1,autofocus:b=!0,disablePrivacyWarning:_=!1,fileUploadTooltip:w,className:S,headerComponent:C,initializeAttachmentsFromLastResult:E=!1,showStopButton:M=!1,forceHideSuggestions:T=!1,onChange:I,onFocus:j,onClick:N,onSubmit:P,onStopButtonClick:R=Rn,onFilePickerOpen:k,onFilePickerClose:O,autosuggestionsEnabled:L=!0,dropdownPlacement:F="bottom",dropdownClassName:U,disableModeSelector:V=!1,useLexical:W=!1,mentionTypeaheadOptions:H,isCometHome:G=!1,onTriggerTypeahead:K,layoutKey:$,isHighlighted:q,isMissionControl:Z})=>{const se=`ask-input-inner-${n}`,[Y,Q]=f.useState(!1),[re,te]=f.useState(!1),[le,ie]=f.useState(b),{suggestions:pe,blankStateSuggestions:me,showSuggestDropdown:de}=Xs(),{setSuggestions:ve}=qo(),{isMobileStyle:Ae,isMobileUserAgent:Se}=Ce(),{promptSkipped:De}=gst(),{inputRef:Ne}=Xs(),[Pe,dt]=f.useState(!0),et=f.useRef(null),{currentOpenedModal:Et}=_t(),ue=!!Et,Ue=Je(),{quote:Ct,setQuote:Ye}=Ta(),mt=z2t(),We=Ka(),{sources:Oe,specialCapabilities:Tt}=Sn(),{lastResult:$e,inFlight:ct,resultsLength:yt}=zt(),ht=hr(),ut=X(),fn=f.useRef(null),[wr,sn]=f.useState(!1),kt=f.useCallback(()=>sn(!0),[]),Kt=f.useCallback(()=>sn(!1),[]),{cacheImageDownloadUrl:xe}=EF({reason:se}),{variation:qe}=m2t(!1),He=E&&!qe?$e?.attachments:void 0,[ze,ot]=f.useState(void 0),it=f.useMemo(()=>ze?.map(nr=>nr.url),[ze]),{value:Gt,loading:Vt}=JO({flag:"windows-app-dictation-config",defaultValue:G$}),cn=f.useMemo(()=>Vt?G$:{eppoTranscriptionConfig:Gt,runImmediately:!0},[Gt,Vt]),Qn=f.useMemo(()=>{if(e.length>bd)return ut.formatMessage({defaultMessage:"Query is { numCharacters } characters too long",id:"yw04s2k4La"},{numCharacters:e.length-bd})},[e,ut]),Sr=f.useCallback(nr=>{Y||!Pe||(Q(!0),!nr.query&&it&&it.length>0&&(nr.query=it[0].match(/[^/]+$/)?.[0]??"File Attached"),Qn?Q(!1):(P?.({query:nr.query,json:nr.json,attachments:it,promptSource:nr.promptSource,querySource:nr.querySource,mentions:nr.mentions}),ze?.forEach(pi=>{pi.file&&pi.file.size>0&&co(pi.url)&&xe(pi.url,pi.resizedFile??pi.file)}),mt&&fn.current?.clearFiles(),setTimeout(()=>Q(!1),1e3)))},[Y,Qn,it,P,mt,xe,ze,Pe]);f.useEffect(()=>ht.subscribeForceSubmitQuery(nr=>{Sr(nr)}),[ht,Sr]);const{handleUpdateAutosuggestions:ns}=v2t(),{isDisabled:Os,focusedIndex:fi,setFocusedIndex:Tf,userInputQuery:ft,handleSuggestionSubmission:pr,handleFocus:yl,handleBlur:$u,handleChange:ra,handleKeyDown:Tc,focusInput:mi,hasQuery:VM}=f2t({value:e,json:t,querySource:n,disableSubmission:s,disableInput:a,autofocus:b,isUploadingFile:re,onChange:I,onFocus:j,handleSubmit:Sr,handleUpdateAutosuggestions:ns,autosuggestionsEnabled:L,errorMessage:Qn,sources:Oe,attachments:it,selectedSearchMode:We,setIsInputActive:ie,isInputActive:le,inFlight:ct,resultsLength:yt,quote:Ct,isMentionMenuOpened:wr,isCometHome:G,reason:se});U2t({setInput:ra}),G2t({entropyBrowser:ht,focusInput:mi,isSidecar:!!E5.NEXT_PUBLIC_IS_SIDECAR_BUILD}),f.useEffect(()=>{De&&Ne.current?.focus()},[Ne,De]),f.useEffect(()=>{Ct&&mi()},[Ct,mi]);const{openToast:Wu}=On(),sg=f.useMemo(()=>({onStart:()=>{mi()},onStop:()=>{mi()},onSilence:()=>{Wu("No audio detected. Make sure your microphone is connected and unmuted","error",4)}}),[mi,Wu]),{startTranscription:ag,stopTranscription:ox,error:sa,isTranscribing:Hu,isInitializing:kf,transcription:hi}=H2t({callbacks:sg,config:cn,reason:se});f.useEffect(()=>{sa&&Wu(`Audio Error: ${sa}`,"error",4)},[sa,Wu]),f.useEffect(()=>{if(hi&&Hu&&hi!==e){const nr=(()=>{const pi=Math.min(e.length,hi.length);for(let ug=pi;ug>0;ug--)if(e.slice(-ug)===hi.slice(0,ug))return hi.slice(ug);return e?` ${hi}`:hi})();Ne.current?.trim(),Ne.current?.append(nr),ra(Ne.current?.value??"",Ne.current?.json)}},[hi,ra,Hu,e,Ne]);const{isAudioVideoFilesEnabled:og}=h2t(),kc=p2t(),{organization:ix}=pn({reason:se}),ig=f.useCallback(()=>te(!0),[]),{handlePaste:lg,handlePasteQuery:$M,handleCompleteFileUpload:lx,handleFileSelect:Nf,autoCreatedTextFile:vl,dismissNotification:cx,setAutoCreatedTextFile:Af}=x2t({fileUploadRef:fn,showFileUpload:g,attachments:it,setAttachments:ot,handleChange:ra,setIsUploadingFile:te,focusInput:mi}),{fileInputRef:ux,errorMessage:dx,warningMessage:cg,uploadSource:ir,uploadedFiles:Ls,handleRemoveFile:Pf,handleStartUpload:zU,handleFileInput:GU,isBoxOpen:qU,onCloseBox:KU,cleanupBoxPicker:YU,microsoftFilePickerOptions:QU,isMicrosoftFilePickerOpen:XU,handleSelectSharepointSite:ZU,onCloseMicrosoft:JU,setErrorMessage:eB}=D2t({fileUploadRef:fn,disablePrivacyWarning:_,isAudioVideoFilesEnabled:og,isClearAttachmentsEnabled:mt,isFollowUp:c,existingAttachments:He,organization:ix,lastResult:$e,onStartFileUpload:ig,onCompleteFileUpload:lx,setUploadsReady:dt,reason:se,incompleteParsingEnabled:kc,specialCapabilities:Tt}),tB=f.useCallback(()=>{if(vl){if(Ne.current?.append(vl.content),ra(Ne.current?.value??"",Ne.current?.json),it){const nr=it.find(pi=>pi.includes(vl.fileName));nr&&Pf(nr)}Af(null)}},[vl,Ne,ra,it,Pf,Af]),nB=f.useRef(e);nB.current=e;const rB=f.useCallback(nr=>{ie(!0),nB.current.length===0&&me[We]&&ve(me[We]),N?.(nr)},[ie,ve,me,We,N]),sB=f.useCallback(nr=>{Ne.current=nr},[Ne]),T3e=f.useMemo(()=>({isOpen:(de&&!T)??!1,suggestedQueries:pe,focusedIndex:fi,setFocusedIndex:Tf,handlePasteQuery:$M,handleSubmit:pr,userInputQuery:ft,placement:F,dropdownClassName:U,allowNonSequentialMatch:pe!==me[We],isCometHome:G,scrollableShards:Ls.length>0?[et]:[]}),[me,U,F,fi,T,$M,pr,G,We,Tf,de,pe,Ls,et,ft]),k3e=f.useMemo(()=>({initialLayout:o,wrapperClass:B({"transition-none p-lg":de,"border-b-none rounded-b-none":de&&!T&&F==="bottom","border-t-none rounded-t-none rounded-b-[20px]":de&&!T&&F==="top","bg-base":Ct}),size:"large",hasShadow:x,isHighlighted:q,showStopButton:M,quote:Ct??void 0,inputWarnings:vl&&l.jsxs(z,{variant:"offset",className:"mx-sm mb-xs px-sm py-xs dark:bg-base flex items-center justify-between rounded-lg",children:[l.jsx("div",{className:"gap-x-sm flex items-center",children:l.jsxs(D,{variant:"tiny",color:"light",children:["Text is"," ",Math.max(1,Math.round((vl.content.length-bd)/bd*100)),"% over the limit and is attached as a file."," ",l.jsx(ke,{variant:"super",size:"tiny",onClick:tB,text:"Paste as text"})]})}),l.jsx(ke,{icon:Xt,size:"tiny",onClick:cx,variant:"common",pill:!0,noPadding:!0})]}),attachmentsList:Ls.length>0&&l.jsx(tbe,{uploadedFiles:Ls,onRemoveFile:Pf,incompleteParsingEnabled:kc,forwardRef:et}),setQuote:Ye,inputRef:Ne}),[vl,cx,F,T,Pf,x,o,Ne,kc,tB,Ct,Ye,M,de,Ls,q]),N3e=f.useMemo(()=>({ref:sB,id:"ask-input",value:e,json:t,initialLayout:o,minRows:i,placeholder:r,disableInput:a,autoFocus:b,onClick:rB,onChange:ra,onKeyDown:Tc,onBlur:$u,onFocus:yl,onPaste:lg,onMentionMenuOpen:kt,onMentionMenuClose:Kt,isMobileStyle:Ae,isMobileUserAgent:Se,useLexical:W,mentionTypeaheadOptions:W?H:void 0,onTriggerTypeahead:W?K:void 0}),[b,a,$u,ra,rB,yl,Tc,lg,o,Ae,Se,t,H,i,Kt,kt,K,r,sB,W,e]),A3e=f.useMemo(()=>l.jsx(ebe,{value:e,json:t,showSources:d,showRecency:m,submitWillFork:u,isFollowUp:c,isDisabled:Os||!Pe,querySource:n,errorMessage:Qn,handleSubmit:Sr,fileUploadRef:fn,showFileUpload:g&&!E5.NEXT_PUBLIC_IS_SIDECAR_BUILD,showModelSelector:h,disableActionButtons:y,fileUploadTooltip:w,disablePrivacyWarning:_,showStopButton:M,onStopButtonClick:R,onFilePickerOpen:k,onFilePickerClose:O,startTranscription:ag,stopTranscription:ox,isTranscribing:Hu,isTranscriptionInitializing:kf,isTranscriptionAvailable:!M,fileUploadErrorMessage:dx,fileUploadWarningMessage:cg,activeConnector:ir,uploadedFiles:Ls,handleStartUpload:zU,handleFileInput:GU,isBoxFilePickerOpen:qU,handleCloseBoxFilePicker:KU,cleanupBoxFilePicker:YU,microsoftFilePickerOptions:QU,handleCloseMicrosoftFilePicker:JU,handleSelectSharepointSite:ZU,isMicrosoftFilePickerOpen:XU,fileInputRef:ux,hasQuery:VM,isAudioVideoFilesEnabled:og,setAttachmentErrorMessage:eB,isCometHome:G,isMissionControl:Z}),[ir,YU,y,_,Qn,ux,dx,w,cg,KU,GU,ZU,zU,Sr,VM,og,qU,Os,c,kf,XU,Hu,t,QU,JU,O,k,R,n,eB,g,h,m,d,M,ag,ox,u,Ls,Pe,e,G,Z]),{isMax:P3e}=Nt();return l.jsx(sbe,{condition:Ue&&g&&!E5.NEXT_PUBLIC_IS_SIDECAR_BUILD,Wrapper:Q2t,onDrop:Nf,disabled:ue,allowDropAnywhere:!0,children:l.jsxs(z,{variant:"offset",className:B(S,"relative rounded-2xl",{"max-super-override":P3e}),children:[C,l.jsx(dxe,{value:e,suggestDropdownProps:T3e,ResizeableInputWrapperProps:k3e,ResizeableInputProps:N3e,leftAttributionComponents:V?null:l.jsx(K9,{inRenderingPlace:"sidecar",children:l.jsx(Lxe,{showIncognitoHint:v,showSearchModeSelector:p,isFollowUp:c,layoutKey:$})}),rightAttributionComponents:A3e})]})})},JE=A.memo(X2t);JE.displayName="AskInput";const Z2t=(e,t)=>{const{value:n,loading:r}=Ut({flag:"try-assistant-page-enabled",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},J2t=()=>{const{value:e}=Yr({flag:"comet-invite-system",defaultValue:!0});return e};function ewt(){const{value:e}=Ut({flag:"at-mention-spaces",subjectType:"user_nextauth_id",defaultValue:!0});return e}function twt({reason:e,collectionName:t,isLazy:n=!0,enabled:r=!0}){const{$t:s}=X(),[a,o]=f.useState(()=>!n),{isMobileStyle:i}=Ce(),c=Je(),u=ewt()&&r,{data:d,isStale:m,refetch:h}=Ke({queryKey:ny(),queryFn:()=>Aqe({reason:e}),enabled:u&&a,staleTime:10*60*1e3}),p=f.useCallback(()=>{a?m&&h():o(!0)},[a,m,h]),g=f.useMemo(()=>(d?.spaces??[]).map(x=>({uuid:x.uuid,variant:"space",label:x.title,emoji:x.emoji||void 0})),[d]),y=f.useMemo(()=>{const v=VOe();if(!(!u||i||!c||v))return t?s({defaultMessage:"Ask anything about { space } or @ mention a Space",id:"NpwyMmamjs"},{space:t}):s({defaultMessage:"Ask anything or @mention a Space",id:"5FEHAEZOKs"})},[s,t,u,i,c]);return f.useMemo(()=>({isAtMentionSpacesEnabled:u,mentionSpacesOptions:g,inputPlaceholder:y,onTrigger:p}),[y,u,g,p])}function nwt({reason:e,enabled:t=!0}){const{$t:n}=X(),[r,s]=f.useState(!1),{openModal:a}=_t(),o=Is(),i=Je(),c=O1()&&t,u=qE(),{overwriteSources:d}=GC({reason:e}),{data:m,isStale:h,refetch:p}=_7({reason:e,enabled:c&&r,staleTime:10*60*1e3}),g=f.useCallback(()=>{r?h&&p():s(!0)},[r,h,p]),y=f.useCallback(()=>{a("taskShortcutModal",{source:"typeahead_create"})},[a]),v=f.useMemo(()=>{if(!(!c||o||!i))return n({defaultMessage:"Ask anything. Type @ for mentions and / for shortcuts.",id:"KO0XLRzele"})},[n,o,c,i]),x=f.useCallback((_,w)=>{let S=ae.SEARCH;_===fe.ALPHA?S=ae.RESEARCH:_===fe.BETA&&(S=ae.STUDIO),u(_,S),d(w)},[u,d]),b=f.useMemo(()=>{const w=(m??[]).map(S=>({uuid:S.task_id,variant:"shortcut",label:`/${S.task_name}`,queryText:S.prompt,className:"group/shortcut-typeahead-option",action:()=>x(S.model_preference,S.sources),convertToNode:!0,rightElement:({focused:C})=>l.jsx(rwt,{shortcut:S,focused:C})}));return c&&w.push({uuid:"create-a-shortcut",variant:"shortcut",label:n({defaultMessage:"+ Create a shortcut",id:"P9a8R5IRCb"}),action:y,convertToNode:!1,isAlwaysVisible:!0}),w},[m,c,x,n,y]);return f.useMemo(()=>({isShortcutTasksEnabled:c,shortcutsTypeaheadOptions:b,inputPlaceholder:v,onTrigger:g}),[c,b,v,g])}function rwt({shortcut:e,focused:t}){const{openModal:n}=_t(),r=f.useCallback(s=>{s.preventDefault(),s.stopPropagation(),n("taskShortcutModal",{source:"typeahead_edit",shortcut:Qpe(e)})},[n,e]);return l.jsx("div",{className:B("h-5 transition-opacity",t&&"opacity-100",!t&&"opacity-0"),children:l.jsx(ke,{icon:uc,size:"tiny",variant:"common",noPadding:!0,onMouseDown:r})})}const swt=(e,t)=>{const[n,r]=f.useState(e),s=iS(r,t);return f.useEffect(()=>{s(e)},[e,s]),n};var awt={};const owt=5e3,iwt=3e3,lwt=(e,t=!0)=>{const{$t:n}=X(),r=tn(),s=t&&r,{sidecarSourceTab:{url:a}}=_o(),o=swt(a,iwt),i=f.useMemo(()=>awt.NEXT_PUBLIC_IS_SIDECAR_BUILD?["get_tabs_for_sidecar",o]:["get_tabs_for_ntp"],[o]),{data:c=ce}=Ke({queryKey:i,queryFn:async()=>(await e.fetchOpenedTabs()).map(m=>({uuid:String(m.tabId),variant:"tab",label:m.title,url:m.url,src:Ev(m.url)})),staleTime:owt,enabled:s}),u=f.useMemo(()=>s?n({defaultMessage:"Ask anything or @mention a tab",id:"37eMdtX5Pe"}):void 0,[n,s]);return f.useMemo(()=>({tabs:c,tabAttachmentsEnabled:s,inputPlaceholder:u}),[u,s,c])},MF=({reason:e,isLazy:t=!0,variants:n,collectionName:r})=>{const[s,a]=f.useState(""),o=hr(),i=n===void 0||n.includes("tab"),c=n===void 0||n.includes("space"),u=n===void 0||n.includes("shortcut"),{tabs:d,tabAttachmentsEnabled:m,inputPlaceholder:h}=lwt(o,i),{isAtMentionSpacesEnabled:p,mentionSpacesOptions:g,onTrigger:y,inputPlaceholder:v}=twt({reason:e,collectionName:r,isLazy:t,enabled:c}),{isShortcutTasksEnabled:x,shortcutsTypeaheadOptions:b,inputPlaceholder:_,onTrigger:w}=nwt({reason:e,enabled:u}),S=m||p||x,C=f.useMemo(()=>[...m&&s==="@"?d:[],...p&&s==="@"?g:[],...x&&s==="/"?b:[]],[m,s,d,p,g,x,b]),E=f.useCallback(T=>{a(T),T==="@"?y():T==="/"&&w()},[w,y]),M=f.useMemo(()=>{try{if(typeof document>"u")return""}catch{return}return _??h??v},[_,v,h]);return f.useMemo(()=>({useLexical:S,mentionTypeaheadOptions:C,inputPlaceholder:M,onTriggerTypeahead:E}),[S,C,M,E])};function cwt(){const{value:e}=vf({flag:"comet-ntp-welcome-suggestions",subjectType:"visitor_id",defaultValue:{groups:[]}});return e}const uwt=ge(async()=>{const{WelcomeOverlay:e}=await oe(async()=>{const{WelcomeOverlay:t}=await import("./WelcomeOverlay-ByCTuUGO.js");return{WelcomeOverlay:t}},__vite__mapDeps([111,1,2,3,4,5]));return{default:e}}),dwt=e=>e.reduce((t,n)=>n.condition==="ALWAYS"?[...t,...n.suggests.map(r=>({query:r,icon:n.icon,image:n.image}))]:t,[]),abe=A.memo(()=>{const e=f.useRef(null),{$t:t,locale:n}=X(),r=At(),{trackEvent:s}=Te(),[a,o]=f.useState(!1),[i,c]=f.useState(!0),[u,d]=f.useState(!1),m=f.useRef(null),h=hr(),p=f.useRef(null),{isMobileStyle:g}=Ce(),y=J2t(),v=Nat(),{variation:x}=Z2t(!1),b=Je(),{openVisitorLoginUpsell:_}=$n({enabled:!b});f.useEffect(()=>{const j=v[0];Ss.preload(j.videoSrc,{as:"video"}),Ss.preload(j.previewSrc,{as:"image"})},[v]);const w=s2t({cometBrowser:h,type:"welcome-modal",locale:n}),S=cwt(),C=f.useMemo(()=>dwt(S.groups),[S]),E=f.useCallback(()=>{if(b){if(x){try{h.openTab({url:`${window.location.origin}/b/try-assistant`,key:"tryAssistantButtonClick"})}catch{r.push("/b/try-assistant")}return}i||c(!0),o(!0),s("ntp education selected")}else _({title:t({defaultMessage:"Sign in below to unlock the full potential of Comet",id:"1SCRX9DriC"}),origin:Be.TRY_ASSISTANT,sheetModalVariant:"centered-sheet"})},[r,b,_,t,i,s,x,h]),M=f.useCallback(()=>{o(!1)},[]),T=()=>{navigator.geolocation.getCurrentPosition(ee.info)},I=f.useCallback(()=>{T(),d(!0)},[]);return l.jsxs("div",{ref:e,className:"mx-auto flex size-full flex-col",style:g?void 0:{marginLeft:ym*-.5+"px"},children:[l.jsx(_e.div,{initial:{paddingBottom:80},animate:{paddingBottom:u?320:80},exit:{paddingBottom:80},transition:ho,className:"px-md relative isolate mx-auto flex w-full max-w-[800px] grow flex-col items-center justify-center pb-[80px]",children:l.jsx(s0e,{containerRef:e,editMode:u,setEditMode:d,askInput:l.jsx(TF,{})})}),l.jsxs("div",{className:"gap-sm fixed bottom-0 left-1/2 mt-auto flex w-full max-w-[800px] -translate-x-1/2 justify-center py-6 pt-12",children:[l.jsx("div",{ref:m,children:l.jsx(ye,{pill:!0,size:"small",variant:"border",icon:dl,text:t({defaultMessage:"Try Assistant",id:"E4vPUv5Uqt"}),extraCSS:"!bg-base z-[2] relative",onClick:E})}),l.jsx(ye,{pill:!0,size:"small",variant:"border",icon:dTe,text:t({defaultMessage:"Edit widgets",id:"T1DvA9w3pt"}),extraCSS:"!bg-base z-[2] relative",onClick:I}),y&&l.jsx(a0e,{pill:!0,size:"small",variant:"border",extraCSS:"!bg-base z-[2] relative"}),l.jsx("div",{style:{maskImage:"linear-gradient(to bottom, rgba(0,0,0,0) 0%, rgba(0,0,0,1) 75%)"},className:"bg-base absolute inset-0"})]}),i&&!x&&Ss.createPortal(l.jsx(uwt,{isOpen:a,onClose:M,suggestions:w.length?w:C,suggestionsScrollContainerRef:p,buttonRef:m}),document.body)]})});abe.displayName="CometHomePage";const TF=A.memo(()=>l.jsx(Jd,{children:l.jsx(mwt,{})}));TF.displayName="Input";const fwt=A.memo(()=>l.jsxs(l.Fragment,{children:[l.jsx(TF,{}),l.jsx("div",{className:"pt-md h-2xl w-full",children:l.jsx(NE,{context:"sortable-widgets"})})]}));fwt.displayName="InputWrapper";const mwt=()=>{const e="comet-ask-input",{mentionTypeaheadOptions:t,inputPlaceholder:n,onTriggerTypeahead:r}=MF({reason:e,isLazy:!0}),[s,a,o]=JC({csrRedirect:!0});return l.jsx(z,{className:B("static flex w-full flex-col items-center justify-center md:mt-0","z-10"),children:l.jsx("div",{className:"mb-md w-full",children:l.jsx(JE,{...o,value:s,json:a,querySource:"home",autofocus:!0,minRows:2,hasShadow:!0,showFileUpload:!0,showIncognitoHint:!0,showSources:!0,dropdownPlacement:"bottom",useLexical:!0,mentionTypeaheadOptions:t,placeholder:n??o.placeholder,isCometHome:!0,onTriggerTypeahead:r})})})},hwt={palette:yTe,flask:gTe,tv:pTe,microchip_ai:jre,dollar_circle:hTe,medal:mre,plane:fS,paint_brush:mTe};function pwt({userSelectedTopics:e,topics:t}){const n=e.map(s=>s.id);return Object.fromEntries(t.map(s=>{const a={...s,userSelected:n.includes(s.id)};return[s.id,a]}))}const gwt=({allTopics:e})=>{const{$t:t}=X();return f.useMemo(()=>[{id:"you",slug:"you",name:t({defaultMessage:"For You",id:"5KhEnUXBTF"}),icon:fTe,description:t({defaultMessage:"Stories curated for you",id:"2sibbc2gbI"}),isAlwaysShown:!0},{id:"top",slug:"top",name:t({defaultMessage:"Top",id:"X/9XdXSCBu"}),icon:W6,isAlwaysShown:!0},...e.map(r=>({id:r.id,name:r.translated_name??r.name,icon:hwt[r.icon]??W6,slug:r.slug}))],[e,t])};function ywt(e){return e==="you"||e==="top"||e==="trending"?null:e}const obe=A.memo(e=>{const{$t:t}=X(),{isMobileStyle:n}=Ce();return l.jsx(rn,{...e,title:t({defaultMessage:"Make it yours",id:"RBKgNODPrT"}),variant:n?"bottom-left-sheet":void 0,children:l.jsx("div",{className:"mb-safeAreaInsetBottom md:-m-md md:-mb-10",children:l.jsx("div",{className:"-m-md md:m-0",children:l.jsx(ibe,{title:t({defaultMessage:"Select topics and interests to customize your Discover experience",id:"EmIFJDqmup"}),onSave:e.onSave,discoverTopicMap:e.discoverTopicMap,userSelectedTopics:e.userSelectedTopics})})})})});obe.displayName="InterestConfigurationSheet";const ibe=A.memo(({title:e,subtitle:t,onClose:n,onSave:r,discoverTopicMap:s,userSelectedTopics:a,variant:o})=>{const{$t:i}=X(),[c,u]=f.useState(a),d=Je(),{openVisitorLoginUpsell:m}=$n({enabled:!d}),{trackEvent:h}=Te();f.useEffect(()=>{h("discover topics picker opened",{})},[h]);const p=f.useCallback(()=>{m({title:i({defaultMessage:"Sign in to customize your Discover Feed",id:"tlclIdp++4"}),origin:Be.DISCOVER_TOPICS,sheetModalVariant:"bottom-sheet-gradient"})},[i,m]),g=x=>{if(h(c.includes(x)?"discover topic unselected":"discover topic selected",{topicUUID:ywt(x)}),!d){p();return}u(b=>b.includes(x)?b.filter(_=>_!==x):b.concat(x))},y=f.useCallback(()=>{if(h("discover topics picker saved",{}),!d){p();return}r(c)},[c,d,r,p,h]),v=f.useCallback(x=>{x.stopPropagation()},[]);return l.jsxs(z,{variant:"background",className:"p-md relative rounded-xl",onClick:v,children:[l.jsxs("div",{className:"relative z-[2]",children:[l.jsxs("div",{className:"mb-md flex items-start justify-between",children:[l.jsxs("div",{children:[e&&l.jsx(D,{variant:"baseSemi",children:e}),t&&l.jsx(D,{color:"light",variant:"small",children:t})]}),n&&l.jsx(ke,{icon:Xt,size:"tiny",pill:!0,onClick:n,extraCSS:"-mt-sm -mr-sm hover:!bg-inverse/5"})]}),l.jsx("div",{className:"gap-sm flex flex-wrap",children:Object.values(s).map(x=>x.isAlwaysShown?null:l.jsx(lbe,{topic:x.id,topicData:x,onClick:g,selected:c.includes(x.id)},x.id))}),l.jsx("div",{className:"mt-md bg-inverse h-px opacity-10"}),l.jsx("div",{className:"mt-md",children:l.jsx(ye,{text:i({defaultMessage:"Save Interests",id:"YbI1HM86Ih"}),variant:"primary",size:"small",extraCSS:"w-full",onClick:y})})]}),o==="offset"&&l.jsx("div",{className:"rounded-inherit absolute inset-0 z-[1] dark:bg-black",children:l.jsx("div",{className:"bg-super/10 dark:bg-super/25 dark:border-super/5 rounded-inherit absolute inset-0 z-[1] dark:border"})})]})});ibe.displayName="InterestConfigurationBox";const lbe=A.memo(({topic:e,topicData:t,selected:n,onClick:r})=>l.jsxs(_e.button,{className:B("px-sm py-xs inline-flex cursor-pointer items-center gap-1.5 rounded-md duration-150 active:scale-[0.95]",{"bg-super/15 dark:bg-white/5":!n},{"bg-super":n}),onClick:()=>r(e),children:[l.jsx(st,{mode:"popLayout",initial:!1,children:l.jsx(_e.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{duration:.2,type:"spring",bounce:.2},children:l.jsx(be,{icon:n?Pre:t.icon,size:"sm",className:B({"text-quiet":!n},{"text-inverse":n})})},n?`selected-${e}`:e)}),l.jsx(D,{variant:"small",className:B({"text-quiet":!n},{"text-inverse":n}),children:t.name})]}));lbe.displayName="InterestPill";const Fw=f.memo(()=>l.jsx(Ln,{speed:"slow",className:"flex flex-col gap-2",children:Array.from({length:4}).map((e,t)=>l.jsxs(z,{className:B("grid place-items-center",{"w-[90%]":t===0||t===1,"w-[70%]":t===2,"w-[60%]":t===3}),children:[l.jsx(D,{variant:"small",className:"opacity-0",style:{gridArea:"1/-1"},children:""}),l.jsx(z,{variant:"offsetPlus",className:"h-2 w-full rounded-full",style:{gridArea:"1/-1"}})]},t))}));Fw.displayName="SidebarListLoader";const f0=f.memo(({children:e})=>l.jsx("div",{className:"flex flex-col gap-[10px]",children:e}));f0.displayName="SidebarSubMenu";const m0=f.memo(()=>l.jsx("div",{className:"bg-subtle h-px"}));m0.displayName="SidebarDivider";const Gh=f.memo(({text:e,accessory:t,className:n,href:r,onClick:s,onMouseOver:a,testId:o})=>{const i=l.jsx(D,{variant:"tiny",color:"light",className:"group-hover:text-foreground",children:e}),c=r?l.jsxs(at,{href:r,className:"group relative block",onClick:s,onMouseOver:a,"data-testid":o||"library-button",draggable:!1,children:[l.jsx(z,{variant:"offsetPlus",className:"-inset-y-xs -inset-x-sm duration-quick absolute rounded-md opacity-0 group-hover:opacity-100"}),l.jsxs("span",{className:"relative flex items-center gap-0.5",children:[i,l.jsx(Jr,{className:"text-quiet group-hover:text-foreground -me-xs duration-quick size-4 opacity-0 group-hover/header:opacity-100 rtl:rotate-180"})]})]}):i;return l.jsxs("div",{className:B("group/header gap-xs flex h-6 items-center justify-between",n),children:[c,l.jsx(st,{initial:!1,children:t&&l.jsx(_e.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},className:"inline-flex",children:t})})]})});Gh.displayName="SidebarSubMenuHeader";const zI=f.memo(({href:e,text:t,onMouseOver:n,onClick:r})=>l.jsx(at,{href:e,className:"block",onMouseOver:n,onClick:r,children:l.jsx(D,{variant:"tinyRegular",color:"light",className:"duration-quick hover:opacity-60",children:t})}));zI.displayName="SidebarLink";const ws=f.memo(({href:e,text:t,icon:n,fadeOut:r,onClick:s,selected:a,deemphasized:o,menuItems:i,testId:c,sidebarOpen:u,accessory:d,loading:m})=>{const h=Rp(),[p,g]=f.useState(!1),y=l.jsxs(l.Fragment,{children:[l.jsx(z,{variant:"offsetPlus",className:B("-inset-y-xs -inset-x-sm duration-quick absolute rounded-md opacity-0 group-hover:opacity-100",{"opacity-100":a||p})}),l.jsxs(D,{className:"relative flex items-center gap-2",variant:"small",color:o?"light":void 0,children:[n&&(f.isValidElement(n)?n:l.jsx(be,{icon:n,className:"size-[18px]"})),l.jsx("span",{className:"w-full overflow-hidden whitespace-nowrap",style:{maskImage:r?h?"linear-gradient(to left, black 85%, transparent 97%)":"linear-gradient(to right, black 85%, transparent 97%)":void 0},children:t}),l.jsx(st,{initial:!1,children:d&&l.jsx(_e.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},className:"inline-flex",children:d})}),i&&u&&!m&&l.jsx("span",{style:{maskImage:h?"linear-gradient(to right, black 60%, transparent)":"linear-gradient(to left, black 60%, transparent)"},className:B("bg-offsetPlus ps-md -end-xs duration-quick absolute top-1/2 inline-flex -translate-y-1/2 translate-x-px opacity-0 group-hover:opacity-100",{"opacity-100":p}),children:l.jsx(en,{isMobileStyle:!1,items:i,placement:h?"left":"right",onOpen:()=>g(!0),onClose:()=>g(!1),children:l.jsx("div",{onClick:v=>{v.preventDefault()},className:"hover:bg-inverse/5 p-xs duration-quick rounded",children:l.jsx(be,{icon:cu,size:14,className:"text-quietest hover:text-quiet duration-quick"})})})}),m&&l.jsx("span",{style:{maskImage:h?"linear-gradient(to right, black 60%, transparent)":"linear-gradient(to left, black 60%, transparent)"},className:B("group-hover:bg-offsetPlus text-super ps-md -end-xs absolute top-1/2 -translate-x-0.5 -translate-y-1/2",{"bg-offsetPlus":a,"bg-offset":!a}),children:l.jsx("div",{className:"flex size-[14px] items-center justify-center",children:l.jsx(Ns,{size:12})})})]})]});return e?l.jsx(at,{href:e,className:"group relative block","data-testid":c,draggable:!1,children:l.jsx("div",{className:"group relative block",onClick:s,children:y})}):l.jsx("button",{onClick:s,className:"group relative block appearance-none text-left",type:"button","data-testid":c,children:y})}),vwt=({reason:e})=>{const t=gt();return Mt({mutationKey:["discover_update_topics",{}],mutationFn:r=>Olt({topics:r,reason:e}),onSuccess:()=>{t.invalidateQueries({queryKey:mie()}),t.invalidateQueries({queryKey:kl()})}})},XZ=e=>{const t=e?.split("/").slice(1);return t?t[1]:null},cbe=f.memo(({isConfiguring:e,setConfiguring:t,sidebarOpen:n})=>{const r="discover-sidebar",s=Je(),a=Pt(),{data:o,isLoading:i}=jlt(),c=Je(),u=gwt({allTopics:o?.allTopics??ce}),d=o?.userSelectedTopics??ce,m=pwt({userSelectedTopics:d,topics:u}),h=d.length>0?"selected":"default",p=f.useCallback(_=>_.id==="top"||_.id==="trending"?!0:_.id==="you"?s:h==="default"?!0:!!_.userSelected,[h,s]),g=f.useMemo(()=>{const _=[],w=[];return Object.values(m).map(S=>{const{name:C,icon:E,slug:M}=S;p(S)?_.push({text:C,icon:E,link:`/discover/${M}`,active:XZ(a)===M}):w.push({text:C,icon:E,link:`/discover/${M}`,active:XZ(a)===M})}),{activeItems:_,overflowItems:w}},[m,p,a]),y=d.map(_=>_.id),v=vwt({reason:r}),x=_=>{v.mutate(Array.from(_)),e&&t(!1)},{$t:b}=X();return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex flex-col gap-[12px]",children:[l.jsx(Gh,{text:b({defaultMessage:"Topics",id:"kc79d3WUbd"})}),i?l.jsx(Fw,{}):l.jsx(f0,{children:g.activeItems.map(_=>l.jsx(ws,{href:_.link??"",text:_.text,selected:_.active,icon:_.icon,sidebarOpen:n},_.text))}),g.overflowItems.length>0&&c&&l.jsxs(l.Fragment,{children:[l.jsx(Gh,{text:b({defaultMessage:"More",id:"I5NMJ8llIi"})}),l.jsx(f0,{children:g.overflowItems.map(_=>l.jsx(ws,{href:_.link??"",text:_.text,selected:_.active,icon:_.icon,sidebarOpen:n},_.text))})]})]}),l.jsx(obe,{isOpen:e,onClose:()=>t(!1),onSave:x,discoverTopicMap:m,userSelectedTopics:y})]})});cbe.displayName="DiscoverSidebar";const Kg=e=>{const t=e?.split("/").slice(1);return t?["finance"].includes(t[0])?"finance":["travel"].includes(t[0])?"travel":["shopping"].includes(t[0])?"shopping":["academic"].includes(t[0])?"academic":["sports"].includes(t[0])?"sports":null:null},xwt=()=>{const{$t:e}=X();return[{id:"SIDEBAR_FINANCE",name:e({defaultMessage:"Finance",id:"Fm3M+yFIbr"}),icon:R0},{id:"SIDEBAR_TRAVEL",name:e({defaultMessage:"Travel",id:"z1QN2qSnI/"}),icon:Ore},{id:"SIDEBAR_SHOPPING",name:e({defaultMessage:"Shopping",id:"my1MLnIMoS"}),icon:Lre},{id:"SIDEBAR_ACADEMIC",name:e({defaultMessage:"Academic",id:"mbxIJyT8C5"}),icon:Zj},{id:"SIDEBAR_SPORTS",name:e({defaultMessage:"Sports",id:"qEuXjx1B4z"}),icon:Dre}]},bwt="fetch_sidebar_hubs",GI=["SIDEBAR_FINANCE","SIDEBAR_SHOPPING","SIDEBAR_TRAVEL","SIDEBAR_ACADEMIC","SIDEBAR_SPORTS"],qI=e=>e!=="SIDEBAR_SPORTS",ZZ=(e,t)=>e==="SIDEBAR_SPORTS"?!0:qI(e)?t?.sidebar_hubs.includes(e)??!1:!1,KI=[bwt];async function _wt({reason:e}){try{return(await ne.GET("/rest/user/get_user_sidebar_hubs",e)).data||{sidebar_hubs:ce}}catch(t){return ee.error("Failed to get sidebar hubs.",t),{sidebar_hubs:ce}}}const ube=({reason:e})=>{const{data:t,refetch:n,isLoading:r}=Ke({queryKey:KI,queryFn:()=>_wt({reason:e})});return f.useMemo(()=>({data:t,isLoading:r,refetch:n}),[t,r,n])},wwt=({reason:e})=>{const{actions:t}=hn(),{data:n}=ube({reason:e});f.useEffect(()=>{if(!n)return;const r=GI.filter(s=>s==="SIDEBAR_SPORTS"?!1:!n.sidebar_hubs.includes(s));t.setSidebarHiddenHubs(r)},[n,t])},dbe=({reason:e})=>{const t=gt(),{actions:n,sidebarHiddenHubs:r}=hn(),s=f.useCallback(async o=>{try{return qI(o)&&(await ne.POST("/rest/user/subscribe_user_sidebar_hub/{hub_type}",e,{params:{path:{hub_type:o}}}),t.invalidateQueries({queryKey:KI})),n.setSidebarHiddenHubs(r.filter(i=>i!==o)),!0}catch{return!1}},[t,n,r,e]),a=f.useCallback(async o=>{try{return qI(o)&&(await ne.POST("/rest/user/unsubscribe_user_sidebar_hub/{hub_type}",e,{params:{path:{hub_type:o}}}),t.invalidateQueries({queryKey:KI})),n.setSidebarHiddenHubs([...r,o]),!0}catch{return!1}},[t,n,r,e]);return f.useMemo(()=>({subscribeToHub:s,unsubscribeFromHub:a}),[s,a])},Swt=({isOpen:e,onClose:t,availableHubs:n})=>{const r="home-sidebar-configure-overlay",s=xwt(),{data:a}=ube({reason:r}),{subscribeToHub:o,unsubscribeFromHub:i}=dbe({reason:r}),{$t:c}=X(),u=f.useMemo(()=>s.filter(d=>n.includes(d.id)),[n,s]);return l.jsxs(rn,{title:c({defaultMessage:"Customize Sidebar",id:"/4kt7TXcZf"}),isOpen:e,onClose:t,variant:"default",children:[l.jsx(D,{variant:"base",color:"light",className:"mb-sm",children:c({defaultMessage:"Select the items that appear in your sidebar.",id:"I+JwmwJnZQ"})}),l.jsx(z,{className:"mb-[-24px] flex flex-col divide-y",children:u.map(d=>l.jsx(Cwt,{hub:d,enabled:ZZ(d.id,a),onToggle:()=>{ZZ(d.id,a)?i(d.id):o(d.id)}},d.id))})]})},Cwt=({hub:e,enabled:t,onToggle:n})=>l.jsxs("div",{className:"flex h-12 items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(be,{icon:e.icon,size:"base"}),l.jsx(D,{variant:"baseSemi",children:e.name})]}),l.jsx(Go,{active:t,onChange:n})]}),fbe=A.memo(({item:{title:e,link:t},position:n})=>{const{trackEvent:r}=Te(),{setMobileSidebarOpen:s}=wc(),a=f.useCallback(()=>{s(!1),r("click recent collection",{title:e,link:t,position:n})},[t,n,s,e,r]);return l.jsx(at,{href:t,className:"group block cursor-pointer",onClick:a,children:l.jsx(z,{className:"p-xs rounded",bgHover:"offsetPlus",children:l.jsx(D,{variant:"tiny",className:"gap-x-xs flex items-center justify-between",color:"light",children:l.jsx("div",{className:"flex w-full items-center",children:l.jsx("span",{className:"w-full overflow-hidden whitespace-nowrap",style:{maskImage:"linear-gradient(to right, black 85%, transparent 97%)"},children:e})})})})})});fbe.displayName="CollectionHistoryItem";const mbe=({show:e,data:t,type:n,HistoryComponent:r,wrapperClassName:s,id:a})=>{const i=ea({reason:"recent-items"}),c=(u,d="")=>"link"in u?u.link+d:"uuid"in u?u.uuid+d:"slug"in u?u.slug+d:d;return!e||!t?.length?null:l.jsx("div",{className:"group/history",children:l.jsx(st,{initial:!1,mode:"wait",children:i?l.jsx(JZ,{className:"px-sm",direction:"in",children:l.jsx(z,{className:"mx-md mb-lg mt-sm p-md rounded-md border border-dashed",children:l.jsx(D,{color:"ultraLight",variant:"tiny",className:"gap-sm flex flex-col items-start text-left",children:l.jsx("span",{children:n==="thread"?l.jsx(he,{defaultMessage:"Library disabled while incognito",id:"OUt8F76OaH"}):l.jsx(he,{defaultMessage:"Spaces disabled while incognito",id:"kdu3grXdAD"})})})})},"empty"):l.jsx(JZ,{direction:"out",children:l.jsx(_e.div,{layout:!0,layoutRoot:!0,className:B("mb-md mt-xs space-y-xs border-subtlest pr-sm dark:border-subtle relative ml-[26px] border-l pl-[14px] duration-200",s),children:l.jsx(dc,{children:l.jsx(st,{initial:!1,mode:"popLayout",children:t.map((u,d)=>l.jsx(_e.div,{layout:"position",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:0},transition:{ease:Jn,duration:.3},children:l.jsx(r,{item:u,position:d})},c(u,a)))})})})},"history")})})},h0=f.memo(mbe);mbe.displayName="RecentItems";const JZ=f.memo(({children:e,className:t,direction:n})=>l.jsx(_e.div,{initial:{x:n==="in"?20:-20,opacity:0},animate:{x:0,opacity:1},exit:{x:n==="in"?20:-20,opacity:0,transition:{ease:Va(.7,0,.84,0),duration:.1}},transition:{x:{ease:Va(.16,1,.3,1),duration:.2},opacity:{ease:$a,duration:.15}},className:t,children:e})),hbe=A.memo(({item:{variant:e,title:t,link:n},position:r})=>{const{trackEvent:s}=Te(),{setMobileSidebarOpen:a}=wc(),{actualQuery:o}=nc(t),i=o||t,c=f.useCallback(()=>{a(!1),s("click recent thread",{title:t,link:n,variant:e,position:r})},[n,r,a,t,s,e]);return l.jsx(at,{href:n,className:"group block cursor-pointer",onClick:c,children:l.jsx(z,{className:"p-xs rounded",bgHover:"offsetPlus",children:l.jsx(D,{variant:"tiny",className:"gap-x-xs flex items-center justify-between",color:"light",children:l.jsxs("div",{className:"flex w-full items-center",children:[l.jsx("span",{className:"w-full overflow-hidden whitespace-nowrap",style:{maskImage:"linear-gradient(to right, black 85%, transparent 97%)"},children:i}),l.jsx(be,{icon:e==="article"?Fre:c8,size:"sm",className:"min-w-0 shrink basis-0 scale-90 opacity-0 duration-300 ease-out group-hover:block group-hover:shrink-0 group-hover:basis-auto group-hover:scale-100 group-hover:opacity-100"})]})})})})});hbe.displayName="ThreadHistoryItem";const j_="recentItems";async function Ewt({reason:e}){try{const t=await ne.GET("/rest/thread/list_recent",e),n=t.data;if(!t.response.ok)throw new Error("Failed to get recent threads.");return n??ce}catch(t){return ee.error("Failed to get recent threads.",t),ce}}const Mwt=({reason:e})=>{const t=ea({reason:e}),{inFlightLatest:n}=zt(),s=Ot()?.user?.email,{data:a,refetch:o,isLoading:i}=Ke({queryKey:[j_,s],queryFn:async()=>!s||t?ce:await Ewt({reason:e})});return f.useEffect(()=>{n||o({cancelRefetch:!1})},[n,o]),f.useMemo(()=>!s||t?{data:[],isLoading:!1}:{data:a??ce,isLoading:i},[a,s,t,i])};function pbe({activeStreams:e,streams:t,threads:n,entries:r}){return Array.from(e).reverse().map(s=>{const a=t[s];if(!a)return;const o=a.threadId;if(!o)return;const c=n.find(d=>d.id===o)?.entryIds?.[0];if(!c)return;const u=r[c];if(u)return{id:o,slug:u.thread_url_slug,title:u.thread_title??u.query_str??a.placeholderChunk?.query_str??"",rwToken:u.read_write_token,lastUpdated:u.updated_datetime,contextUUID:u.context_uuid,collectionInfo:u.collection_info,displayModel:u.display_model,entryUUID:u.uuid,socialInfo:u.social_info,focus:u.search_focus,mode:u.mode,source:u.source}}).filter(s=>s!=null)}function Twt(){const e=Ma(),{activeStreams:t,streams:n,threads:r,entries:s}=e.getState();return f.useMemo(()=>{const a=pbe({activeStreams:t,streams:n,threads:r,entries:s}),o=new Set;return a.filter(i=>!i.slug||o.has(i.slug)?!1:(o.add(i.slug),!0))},[t,n,r,s])}function gbe({reason:e}){const{data:t,isLoading:n}=Mwt({reason:e}),r=Twt();return f.useMemo(()=>({isLoading:n,data:[...r.filter(s=>!t.some(a=>a.link.split("/").pop()===s.slug)).filter(s=>!t.some(a=>a.uuid===s.id)).filter(s=>s.slug!==null).map(s=>({uuid:s.id,variant:"thread",link:`/search/${s.slug}`,title:s.title??"",isStreaming:!0,unread:!1})),...t]}),[t,r,n])}const ybe=A.memo(({variant:e="common",active:t,vertical:n,onClick:r,indicatorPos:s="bottom",extraCSS:a,showNewIndicator:o,styleProps:i,isNewRedesign:c=!1,disabled:u,innerRef:d,...m})=>{const h=B("absolute",{"right-0 h-full w-[3px] rounded-l-sm":s=="right","left-0 h-full w-[3px] rounded-l-sm":s=="left","bottom-0 left-0 right-0 h-[3px] rounded-t-sm":s=="bottom","top-0 left-0 right-0 h-[3px] rounded-b-sm":s=="top","bg-inverse":e==="primary","bg-inverse/70":e==="common"},i?.indicatorClass),p=B({"px-xs transition duration-300 relative ":n,"flex items-center":t&&n,"justify-center px-xs":!n,"!cursor-not-allowed":u,"my-0.5 [&_*]:!font-normal [&_*]:!text-foreground [&_a]:hover:bg-offset":c,"[&_a]:bg-offsetPlus [&_a]:text-foreground [&_a]:hover:bg-offsetPlus":c&&t,"opacity-70 cursor-not-allowed":u},t?i?.activeBgClass:i?.bgClass);return l.jsxs("div",{onClick:u?void 0:r,className:p,children:[o&&l.jsx("div",{className:"right-md top-sm text-super absolute z-10",children:""}),l.jsx(ke,{variant:u?"noHover":t?"primary":"common",...m,fullWidth:!0,extraCSS:B("py-md focus-visible:!bg-transparent before:absolute before:opacity-0 focus-visible:before:opacity-100 before:ring-super/50 before:ring-[1.5px] before:inset-y-0 before:inset-x-[-10px] before:rounded-md",{"cursor-not-allowed":u},a),noXPadding:!n,disabled:u,ref:d??void 0}),t&&!u&&l.jsx(_e.div,{layout:"position",layoutId:"tab-indicator",className:h,transition:{duration:.1,ease:"easeOut"}})]})});ybe.displayName="TabButton";const Zp=A.memo(({actionList:e,size:t=Ft.regular,variant:n="primary",fillSpace:r=!1,vertical:s=!1,layout:a="left",indicatorPos:o,iconOnly:i,allowScroll:c,tabClass:u,testId:d,layoutGroupId:m,styleProps:h,isNewRedesign:p=!1,activeTabRef:g})=>{const y=B({"w-full":r&&!c,"flex w-auto":c,"justify-center":a==="center","justify-end":a==="right"},h?.wrapperClass),v=B("items-center relative",{"justify-center":a==="center","flex-1":r,"w-full":r&&!c,"w-auto overflow-hidden flex":c},h?.innerClass),x=B("flex",{"w-full":r&&!c,"w-auto overflow-x-auto overflow-y-hidden flex-1 scrollbar-none":c},h?.scrollClass),b=B("items-center relative scrollbar-none",{"flex-1":r,"space-y-xs":s&&!p,"gap-x-md flex h-14":!s&&t!=="tiny","gap-x-sm flex h-10":!s&&t==="tiny","w-full":!s&&!c,"flex px-md w-auto overflow-x-auto":c},h?.scrollInnerClass),_=B("relative",{"h-full flex items-center":!s,"justify-center":r,"w-full":r&&!c,"flex-1 shrink-0":c},h?.itemClass);return l.jsx("div",{className:y,"data-test-id":d,children:l.jsx("div",{className:v,children:l.jsx("div",{className:x,children:l.jsx("div",{className:b,children:l.jsx(dc,{id:m,children:e.map(w=>w.show?l.jsxs(z,{className:_,children:[l.jsx(ybe,{testId:w.testId,ariaLabel:w.ariaLabel,vertical:s,text:i?void 0:w.text,size:t,variant:n,onClick:w.onClick,fullWidth:r,active:w.active,icon:w.icon,href:w.href,layout:a,tooltipLayout:o==="right"?"right":"top",toolTip:w.tooltip,indicatorPos:o,trailingComponent:w.trailingComponent,extraCSS:u,showNewIndicator:w.showNewIndicator,styleProps:h?.tabButton,isNewRedesign:p,disabled:w.disabled,innerRef:w.active?g:void 0}),!i&&w.badge&&l.jsx(D,{className:"bg-super pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 rounded-md px-1 py-0.5 text-white",variant:"tiny",children:w.badge}),w.children&&l.jsx(l.Fragment,{children:w.children})]},w.key??w.text):null)})})})})})});Zp.displayName="TabBar";const eM=A.memo(({vertical:e=!0,size:t,collapsed:n,actionList:r,...s})=>l.jsx(Zp,{layout:n?"center":"left",size:t,iconOnly:n,vertical:e,actionList:r??ce,indicatorPos:n?"right":"none",fillSpace:!0,...s}));eM.displayName="SiteTabs";const vbe=f.memo(({vertical:e=!0,size:t,collapsed:n,incognito:r,animationId:s})=>{const a="ask-site-tabs",{$t:o}=X(),i=Je(),{isMobileStyle:c}=Ce(),{trackEvent:u}=Te(),{allowArticleCreation:d}=js({reason:a}),m=Pt(),{openVisitorLoginUpsell:h}=$n({enabled:!i}),{shouldShowLossAversionModal:p,handleOpenLossAversion:g}=Ip(),{data:y}=Kde({reason:a}),{data:v}=gbe({reason:a}),{setMobileSidebarOpen:x}=wc(),b=f.useCallback(M=>{x(!1),p&&(M.preventDefault(),g({args:{origin:Be.DISCOVER_BUTTON}}))},[p,g,x]),_=f.useCallback(()=>{u("spaces click",{}),x(!1),i||h({title:o({defaultMessage:"Focus your Perplexity experience in Spaces",id:"spZP/TobF9"}),origin:Be.SPACES_PAGE})},[u,i,h,o,x]),w=f.useCallback(()=>{u("library click",{}),x(!1),i||h({title:o({defaultMessage:"Organize your search history by signing up",id:"PMTP+jTgx8"}),origin:Be.LIBRARY_PAGE})},[u,i,h,o,x]),S=f.useCallback(()=>{u("finance click",{}),x(!1)},[x,u]),C=f.useCallback(()=>{x(!1)},[x]),E=f.useMemo(()=>{const M=[{icon:Ure,text:o({defaultMessage:"Home",id:"ejEGdxSUGs"}),href:"/",show:!0,active:m==="/",ariaLabel:o({defaultMessage:"Home",id:"ejEGdxSUGs"}),testId:"home-tab",onClick:C,tooltip:n?o({defaultMessage:"Home",id:"ejEGdxSUGs"}):void 0},{icon:Bre,text:o({defaultMessage:"Discover",id:"cE4HfwyEyr"}),show:!0,active:m?.startsWith("/discover"),ariaLabel:o({defaultMessage:"Discover",id:"cE4HfwyEyr"}),testId:"discover-tab",href:p?void 0:"/discover",onClick:b,tooltip:n?o({defaultMessage:"Discover",id:"cE4HfwyEyr"}):void 0},{icon:ya,text:o({defaultMessage:"Spaces",id:"ZMoczsYew9"}),href:i?"/spaces":void 0,onClick:_,show:!0,active:m?.startsWith("/spaces"),ariaLabel:o({defaultMessage:"Spaces",id:"ZMoczsYew9"}),testId:"spaces-tab",tooltip:n?o({defaultMessage:"Spaces",id:"ZMoczsYew9"}):void 0,children:!n&&i&&l.jsx(h0,{show:!0,data:y,type:"collection",HistoryComponent:fbe})},{icon:vTe,text:o({defaultMessage:"Library",id:"StcK672jB9"}),href:i?"/library":void 0,onClick:w,show:!0,testId:"library-tab",trailingComponent:!r&&d&&!n?l.jsx(xbe,{}):void 0,active:m?.startsWith("/library"),ariaLabel:o({defaultMessage:"Library",id:"StcK672jB9"}),tooltip:n?o({defaultMessage:"Library",id:"StcK672jB9"}):void 0,children:!n&&i&&l.jsx(h0,{show:!0,data:v,type:"thread",HistoryComponent:hbe})},{icon:R0,text:o({defaultMessage:"Finance",id:"Fm3M+yFIbr"}),show:!0,active:m?.startsWith("/finance"),ariaLabel:o({defaultMessage:"Finance",id:"Fm3M+yFIbr"}),testId:"finance-tab",href:"/finance",onClick:S,tooltip:n?o({defaultMessage:"Finance",id:"Fm3M+yFIbr"}):void 0}];return n&&M.push({icon:ov,text:o({defaultMessage:"Sign in",id:"SQJto27U8S"}),onClick:()=>{u("login click",{}),h({origin:Be.LOGIN_BUTTON})},show:!i,active:m?.startsWith("/login"),testId:"sign-in-tab",ariaLabel:"Sign in",tooltip:n?o({defaultMessage:"Sign In",id:"Ub+AGcdPg6"}):void 0}),M},[m,n,o,i,r,d,b,S,_,w,u,h,y,v,p,C]);return l.jsx(eM,{isMobileStyle:c,size:t,vertical:e,collapsed:n,actionList:E,layoutGroupId:s})});vbe.displayName="AskSiteTabs";const xbe=f.memo(({defaultHidden:e=!0,buttonClassName:t})=>{const{$t:n}=X(),[r,s]=f.useState(!1),{openModal:a}=_t(),{trackEvent:o}=Te(),i=At(),c=Je(),u=v=>{v.preventDefault(),v.stopPropagation(),s(!r)},d=()=>{s(!1)},m=()=>{s(!0)},h=f.useCallback(v=>{v.stopPropagation(),c?i.push("/page/new"):a("loginModal",{pitchMessage:{title:n({defaultMessage:"Sign in to create a {page}",id:"MsQ6yWbdOY"},{page:"Page"})},origin:Be.ARTICLE_NEW}),v.preventDefault()},[i,c,n,a]),p=f.useCallback(v=>{v.preventDefault(),v.stopPropagation(),o("new thread click on threads page",{}),i.push("/",void 0,"New thread (library)")},[o,i]),g=f.useMemo(()=>[{type:"default",text:n({defaultMessage:"Thread",id:"6dmn4mbc3j"}),icon:c8,onClick:p,testId:"library-dropdown-new-thread"},{type:"default",text:n({defaultMessage:"Page",id:"wFmAFCPAci"}),icon:Fre,onClick:h,testId:"library-dropdown-new-page"}],[p,h,n]),y=Rp();return l.jsx("div",{className:"ltr:-mr-sm rtl:-ml-sm flex w-full flex-1 justify-end",children:l.jsx(en,{placement:y?"left":"right",items:g,isMobileStyle:!1,onClose:d,onOpen:m,isOpen:r,children:l.jsx(z,{onClick:u,"data-testid":"library-add-button",className:B("text-foreground flex h-[24px] w-[27px] items-center justify-center rounded-md duration-150 hover:bg-black/5 dark:hover:bg-white/5",{"opacity-0 group-hover/button:opacity-100":e,"!text-foreground !bg-black/5 !opacity-100 dark:!bg-white/5":r},t),children:l.jsx(xt,{icon:L9.faPlus,size:"xs"})})})})}),eJ=(e,t)=>t?t===e.link:!1,bbe=A.memo(({item:e,position:t,onDeleteClick:n,sidebarOpen:r})=>{const{trackEvent:s}=Te(),a=Pt(),{title:o,link:i,variant:c,isStreaming:u,unread:d}=e,m=c==="thread",{actualQuery:h}=nc(o),p=h||o,{$t:g}=X(),y=f.useCallback(()=>{s("click recent thread",{title:o,link:i,variant:c,position:t})},[i,t,o,s,c]),v=f.useMemo(()=>[{text:g({defaultMessage:"Delete {item}",id:"rdK9AWns19"},{item:m?"Thread":"Page"}),icon:Ud,onClick:x=>{x.stopPropagation(),n(e)},type:"default"}],[g,m,e,n]);return l.jsx(ws,{href:i,text:p,fadeOut:!0,onClick:y,sidebarOpen:r,selected:eJ(e,a),menuItems:v,testId:`thread-title-${p}`,loading:u,accessory:d&&!eJ(e,a)?l.jsx("div",{className:"bg-super size-1.5 rounded-full"}):null})});bbe.displayName="ThreadHistoryItemV2";const kwt=(e,t)=>{const{value:n,loading:r}=Ut({flag:"sports-landing-page",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},Nwt={about:ov,born:HM,age:HM,died:HM,parents:V6,siblings:V6,children:kTe,spouse:H6,spouses:H6,education:G_,educated_at:G_,net_worth:TTe,ratings:W6,directed_by:$re,starring:ov,watch_on:hre,treatment:MTe,symptoms:ETe,specialists:CTe};function Awt(e){return e&&Nwt[e]||null}const Pwt={EXTERNAL_LINK_TYPE_UNSPECIFIED:iv,PRIMARY:iv,WIKIPEDIA:STe,X:wTe,INSTAGRAM:_Te,TIKTOK:bTe,YOUTUBE:Vre,FACEBOOK:xTe,MAYOCLINIC:cc,IMDB:tre};function tJ(e){return Pwt[e]}const _be=f.createContext({menuItems:void 0}),Jp=()=>{const e=f.useContext(_be);if(!e)throw new Error("usePanel must be used within PanelContext");return e},Wn=({children:e,menuItems:t,variant:n,className:r})=>l.jsx(Zs,{fallback:null,children:l.jsx(_be.Provider,{value:{menuItems:t},children:n==="noChrome"?l.jsx(z,{className:r||"mb-md",children:e}):l.jsx(tr,{shadow:!0,className:`${r||"mb-md"} p-md`,children:e})})}),Rwt=({menuItems:e,buttonClass:t,placement:n})=>{const{isMobileStyle:r}=Ce();return e.length<=0?null:l.jsx(en,{items:e,isMobileStyle:r,placement:n,children:l.jsx(ke,{size:"tiny",pill:!0,icon:cu,extraCSS:t})})},Iwt=({title:e,href:t,subtitle:n,image_url:r,links:s,children:a,entryUUID:o,data:i})=>{const{trackEvent:c}=Te(),u=f.useCallback(d=>{c("knowledge card link clicked",{label:"social media",socialMediaType:d.type,value:d.url,entryUUID:o,type:i?.type??"",name:i?.title??"",id:i?.source_url??""})},[i?.source_url,i?.title,i?.type,o,c]);return l.jsx(z,{className:"gap-sm flex w-full justify-between",children:l.jsxs("div",{className:"gap-md flex grow items-start",children:[r?l.jsx("div",{className:"flex-none",children:l.jsx(es,{imageClassName:"size-[120px] object-cover object-top",rounded:"md",src:r,alt:e,includeLightBoxModal:!1})}):null,l.jsxs("div",{className:"flex h-full grow flex-col",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"gap-sm mb-two flex items-start",children:[l.jsx(D,{variant:"section-title",className:"flex-1",children:t?l.jsx(at,{href:t,target:"_blank",className:"hover:text-super flex-1 duration-150",children:e}):e}),a]}),n&&l.jsx(D,{variant:"small",className:"mb-sm mr-sm text-pretty",children:n})]}),s&&s.length>0&&l.jsx("div",{className:"gap-sm flex flex-wrap",children:s.map(d=>l.jsx(wbe,{link:d,solo:s.length===1,handleLinkClick:u},d.type))})]})]})})},wbe=A.memo(({link:e,solo:t,handleLinkClick:n})=>{const r=f.useCallback(()=>n(e),[n,e]);return t?l.jsx(ye,{icon:tJ(e.type),text:e.title,textClassName:"font-normal ml-2xs text-quiet ",size:"tiny",href:e.url,target:"_blank",onClick:r},e.url):l.jsx(ye,{icon:tJ(e.type),size:"tiny",href:e.url,target:"_blank",onClick:r},e.type)});wbe.displayName="ButtonFactory";const jwt=({name:e,title:t,value:n})=>{const r=Awt(e);return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"gap-sm flex min-w-[120px]",children:[r&&l.jsx(D,{variant:"smallBold",color:"light",className:"w-5",children:l.jsx(be,{icon:r,size:"sm"})}),l.jsx(D,{variant:"smallBold",color:"light",children:t})]}),l.jsx(D,{variant:"small",children:n})]})},Owt=({children:e})=>l.jsx(z,{className:"pt-sm px-md border-t",children:e});Wn.Title=Iwt;Wn.Item=jwt;Wn.Menu=Rwt;Wn.Footer=Owt;const Sbe=A.memo(({graphData:e})=>{const[t,n]=f.useState(!1),r=e.url,s=e.name,a=f.useCallback(()=>n(!1),[]);return l.jsxs("div",{className:"flex justify-center",children:[l.jsx("img",{src:r,alt:s,className:"max-h-[50vh] overflow-hidden rounded align-middle",onClick:()=>n(!0)}),l.jsx(Cbe,{isOpen:t,onClose:a,alt:s,src:r})]})});Sbe.displayName="StaticImageGraph";const Cbe=A.memo(({isOpen:e,onClose:t,alt:n,src:r})=>{const s=f.useCallback(()=>t(!1),[t]);return l.jsxs(rn,{onClose:s,isOpen:e,variant:"hide-chrome",disableAnimation:!1,children:[l.jsx("div",{className:"flex place-content-center",onClick:()=>t(!1),children:l.jsx("div",{className:"gap-xs p-md md:p-xl flex flex-col items-center justify-between",children:l.jsx("div",{className:"grow",children:l.jsx("img",{alt:n,src:r,className:"max-h-[50vh]"})})})}),l.jsx(ye,{onClick:s,icon:Xt,extraCSS:"!fixed top-md right-md shadow-sm",size:"small",pill:!0,ariaLabel:"Close"})]})});Cbe.displayName="ImageModal";const Ebe=A.memo(({graphData:e})=>l.jsxs(Wn,{className:"gap-md bg-offset p-md flex flex-col rounded-md text-center",children:[l.jsx(Wn.Title,{title:e.name,subtitle:""}),l.jsx(Sbe,{graphData:e})]}));Ebe.displayName="GraphPanel";var vi={},nJ;function Lwt(){if(nJ)return vi;nJ=1;var e=vi&&vi.__values||function(s){var a=typeof Symbol=="function"&&s[Symbol.iterator],o=0;return a?a.call(s):{next:function(){return s&&o>=s.length&&(s=void 0),{value:s&&s[o++],done:!s}}}},t=vi&&vi.__read||function(s,a){var o=typeof Symbol=="function"&&s[Symbol.iterator];if(!o)return s;var i=o.call(s),c,u=[],d;try{for(;(a===void 0||a-- >0)&&!(c=i.next()).done;)u.push(c.value)}catch(m){d={error:m}}finally{try{c&&!c.done&&(o=i.return)&&o.call(i)}finally{if(d)throw d.error}}return u};Object.defineProperty(vi,"__esModule",{value:!0}),vi.selectState=function(s){return s};function n(){var s,a,o;function i(c){var u=0,d;function m(p){var g,y;s||(s={state:p,version:1}),s.state!==p&&(s.state=p,s.version+=1);var v=s.version,x;if(d){if(v===d.stateVersion)return d.value;var b=!1;try{for(var _=e(d.dependencies.entries()),w=_.next();!w.done;w=_.next()){var S=t(w.value,2),C=S[0],E=S[1];if(C(p)!==E){b=!0,x=C;break}}}catch(j){g={error:j}}finally{try{w&&!w.done&&(y=_.return)&&y.call(_)}finally{if(g)throw g.error}}if(!b)return d.value}u+=1;var M=new Map,T=Object.assign(function(j){if(M.has(j))return M.get(j);var N=j(p);return M.set(j,N),N},{reason:x}),I=o?o(function(){return c(T)},h,p,x):c(T);if(M.size===0)throw new Error("[rereselect] Selector malfunction: The selection logic must select some data by calling `query(selector)` at least once.");return d={stateVersion:v,dependencies:M,value:I},I}var h=Object.assign(function(g){return a?a(function(){return m(g)},h,g):m(g)},{selectionLogic:c,recomputations:function(){return u},resetRecomputations:function(){return u=0},introspect:function(){return d}});return h}return{makeSelector:i,setInvocationWrapper:function(c){a=c},setComputationWrapper:function(c){o=c}}}vi.createSelectionContext=n;var r=n();return vi.makeSelector=r.makeSelector,vi}var St=Lwt();const Nb=.2,Mbe=A.memo(({icon:e,title:t,loading:n,intentTier:r})=>{const{isMobileStyle:s}=Ce(),a=r!==c2.HIGH||s;return l.jsxs(Ln,{active:n,className:"gap-sm flex w-full items-center",speed:"slow",children:[e&&l.jsx(D,{variant:a?"baseSemi":"section-title",className:a?void 0:"w-[24px]",children:l.jsx(xt,{fixedWidth:!0,icon:e,className:B("duration-200",{"text-quietest":n,"text-foreground":!n}),size:a?"sm":void 0})}),l.jsx(st,{mode:"popLayout",initial:!1,children:l.jsx(_e.div,{initial:{y:"-50%",opacity:0},animate:{y:0,opacity:1,transition:{y:{duration:.2,ease:$a,delay:Nb+.1},opacity:{duration:.2,ease:"linear",delay:Nb+.1}}},exit:{y:"50%",opacity:0,transition:{y:{duration:.2,ease:pse,delay:Nb},opacity:{duration:.2,ease:"linear",delay:Nb}}},className:"w-full",children:l.jsx(D,{variant:a?"baseSemi":"section-title",color:n?"ultraLight":void 0,children:t})},t)})]})});Mbe.displayName="EntityGroupTitle";const p0=f.memo(({src:e,onClick:t,showViewMore:n,onMouseEnter:r,onMouseLeave:s,className:a,imageClassName:o,albumSize:i})=>{const{$t:c}=X();return l.jsxs("div",{onClick:t,onMouseEnter:r,onMouseLeave:s,className:B("bg-offsetPlus group relative aspect-square h-full w-full cursor-pointer overflow-hidden rounded duration-150",a),children:[l.jsx("img",{src:e,alt:"",className:B("m-0 size-full object-contain duration-150 group-hover:scale-[1.02]",o),sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",loading:"lazy",decoding:"async"}),i&&l.jsx("div",{className:"absolute bottom-1.5 right-1.5 flex items-center justify-center rounded-full bg-black/40",children:l.jsxs(D,{variant:"tiny",color:"white",className:"gap-sm px-sm py-xs relative flex items-center",children:[i,l.jsx(be,{icon:NTe,size:"xs"})]})}),n&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 dark:bg-black/80",children:l.jsxs(D,{variant:"tiny",color:"white",className:"px-sm py-xs relative rounded-full",children:[l.jsx("span",{className:"rounded-inherit absolute inset-0 bg-black opacity-30 dark:bg-white dark:opacity-10"}),l.jsx("span",{className:"relative opacity-80 dark:opacity-60",children:c({defaultMessage:"View More",id:"QQSdHPJWXu"})})]})})]})}),Dwt=25,L1=A.memo(({rating:e,className:t,reviewCount:n,size:r="xs",textVariant:s="small",reviewTextVariant:a="small",reviewTextColor:o="light",variant:i,showCount:c=!0,minReviewCount:u=Dwt,showRatingLabel:d=!0,url:m,color:h="default"})=>{const p=Math.floor(e),g=e%1===0?0:1,y=5-p-g;if(e===0||!n||n<u)return null;const v=l.jsxs("div",{className:B("gap-xs flex items-center",t),children:[l.jsxs("div",{className:"flex items-center",children:[i==="truncated"?l.jsx(be,{icon:Cm,size:r,className:"text-super -translate-y-px"}):Array.from({length:p}).map((x,b)=>l.jsx(be,{icon:Cm,size:r,className:"text-super"},`rating-star-full-${b}`)),i!=="truncated"&&Array.from({length:g}).map((x,b)=>l.jsx(Tbe,{fraction:e%1,size:r},`rating-star-half-${b}`)),i!=="truncated"&&Array.from({length:y}).map((x,b)=>l.jsx("span",{className:"inline-flex opacity-20",children:l.jsx(be,{icon:Cm,size:r,className:"text-super"},b)},`rating-star-empty-${b}`))]}),d&&l.jsx(D,{variant:s,className:"group-hover/link:text-super relative font-medium leading-none",color:h,children:l.jsx(z6,{value:e,maximumFractionDigits:1})}),n&&n>0&&c&&l.jsxs(D,{variant:a,color:o,className:"group-hover/link:text-super relative leading-none",children:["(",l.jsx(z6,{value:n}),")"]})]});return m?l.jsx(at,{href:m,target:"_blank",className:"group/link",children:v}):v});L1.displayName="EntityItemRating";const Tbe=A.memo(({fraction:e,size:t})=>l.jsxs("div",{className:"isolate inline-grid grid-cols-1 grid-rows-1",children:[l.jsx("span",{className:"text-foreground relative col-start-1 row-start-1 inline-flex items-center opacity-30",children:l.jsx("span",{className:"inline-flex",children:l.jsx(be,{icon:Cm,size:t})})}),l.jsx("span",{className:"relative col-start-1 row-start-1 inline-flex items-center",children:l.jsx("span",{className:"text-super inline-flex overflow-hidden",style:{width:e*100+"%"},children:l.jsx(be,{icon:Cm,size:t,className:"shrink-0"})})})]}));Tbe.displayName="HalfStar";const eg=e=>{let t;if("meta_data"in e?t=e.meta_data:t=Kr(e).with({place_widget_block:Td.nonNullable},n=>({...n.place_widget_block,object:"PlaceWidget"})).with({shopping_widget_block:Td.nonNullable},n=>({...n.shopping_widget_block,progress:Oc.DONE,object:"ShopifyWidget"})).with({search_result_widget_block:Td.nonNullable},n=>{const r=n.search_result_widget_block.metadata||{},s=r.object;if(s==="WeatherWidget")return{...r,progress:Oc.DONE,object:"WeatherWidget"};if(s==="TimeWidget")return{...r,progress:Oc.DONE,object:"TimeWidget"};if(s==="CalculatorWidget")return{...r,progress:Oc.DONE,object:"CalculatorWidget"};if(s==="TaskWidget")return{...r,progress:Oc.DONE,object:"TaskWidget"};if(s==="TimerWidget")return{...r,progress:Oc.DONE,object:"TimerWidget"};if(s==="CurrencyExchangeWidget")return{...r,progress:Oc.DONE,object:"CurrencyExchangeWidget"}}).otherwise(()=>{}),!!t)return t},kbe=f.createContext({selectedWidgetId:void 0,scrollToWidget:()=>{},entityRefs:{}}),kF=()=>{const e=f.useContext(kbe);if(!e)throw new Error("useScrollToWidget must be used within ScrollToWidgetContext");return e},Nbe=A.memo(({children:e,entities:t})=>{const[n,r]=f.useState({}),[s,a]=f.useState(void 0),{scrollContainerRef:o}=Sc(),i=f.useRef(null);f.useEffect(()=>()=>{r({})},[]),f.useEffect(()=>{r(u=>{const d=u;let m=!1;return t?.map(h=>{const p=eg(h);if(!p)return;if(p.object==="ShopifyWidget"){const y=p.id;if(!n[y]){m=!0;const v=f.createRef();d[y]=v}}}),m?d:u})},[t,n]);const c=u=>{i.current&&clearTimeout(i.current);const d=n[u].current;if(d&&o?.current){const h=d.getBoundingClientRect().top+o.current?.scrollTop-200;o?.current?.scrollTo({top:h,behavior:"smooth"})}a(u),i.current=setTimeout(()=>{a(void 0)},2e3)};return l.jsx(kbe.Provider,{value:{selectedWidgetId:s,scrollToWidget:c,entityRefs:n},children:e})});Nbe.displayName="ScrollToWidgetProvider";const NF=A.memo(({className:e})=>l.jsx(D,{variant:"tiny",color:"super",className:B("flex shrink-0 items-center gap-[5px] !text-[11px]",e),children:"Buy now"}));NF.displayName="BuyWithProIndicator";const Abe=A.memo(({className:e,textVariant:t="tiny"})=>{const{$t:n}=X();return l.jsx(bn,{asChild:!0,tooltipLayout:"top",tooltipText:n({defaultMessage:"Shipping is free while shopping with Perplexity Pro",id:"UMkYrflCjt"}),children:l.jsx(D,{color:"light",variant:t,className:e,children:n({defaultMessage:"Free Delivery",id:"d7c64sMLc7"})})})});Abe.displayName="FreeShippingIndicator";const Pbe=(e,t)=>{const n=parseFloat(t.replace(/[^0-9.-]+/g,"")),r=parseFloat(e.replace(/[^0-9.-]+/g,"")),s=Math.trunc((n-r)/n*100);return s===0?null:`${s}%`},Fwt=(e,t)=>{let n;return e.thumbnails&&e.thumbnails?.length===1?n=[...e.thumbnails,...e.images]:n=e.thumbnails?.length>0?e.thumbnails:e.images,n.filter(r=>r.variants.includes(t.id)).concat(n.filter(r=>r.variants.length===0))},Yi=e=>{if(e.indexOf("$")===-1)return e;const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),n=e.replace(/[$,]/g,"");return t.format(parseFloat(n))},Rbe=({reason:e})=>{const{uuid:t}=ide({reason:e}),{value:n,loading:r}=Yr({flag:"shopping-enabled",defaultValue:!1,extraAttributes:{orgUUID:t??""}});return f.useMemo(()=>!r&&n,[r,n])},Ibe=A.memo(({contextUUID:e,item:t,canEdit:n,idx:r,onDelete:s,variant:a="list",onClick:o,includeProCons:i,inFlight:c})=>{const u=t.id,{scrollToWidget:d}=kF(),{trackEvent:m}=Te(),h=()=>{u&&e&&m("shopping overview item selected",{contextUUID:e,productId:t.id,productURL:t.url,client:t.client}),o?o(t):d(u)};switch(a){case"list":return l.jsx(jbe,{canEdit:n,item:t,onClick:h,onDelete:s??Rn,idx:r});case"card":return l.jsx(YI,{canEdit:n,item:t,onClick:h,idx:r,includeProCons:i,inFlight:c});case"tile":return l.jsx(YI,{canEdit:n,item:t,onClick:h,idx:r,includeProCons:i,inFlight:c,variant:"tile"});case"chip":return l.jsx(Dbe,{canEdit:n,item:t,onClick:h,idx:r})}});Ibe.displayName="ShoppingOverviewItem";const jbe=A.memo(({onClick:e,onDelete:t,item:n,idx:r,canEdit:s})=>{const{image_url:a,num_reviews:o,rating:i}=n;return l.jsxs(z,{className:"py-md group relative cursor-pointer duration-150 active:scale-[0.99]",onClick:e,children:[l.jsx("div",{className:"-inset-x-sm inset-y-sm bg-offset pointer-events-none absolute scale-[0.98] rounded-md opacity-0 duration-150 group-hover:scale-100 group-hover:opacity-100"}),l.jsxs("div",{className:"gap-md relative flex w-full items-center",children:[a&&l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"p-xs after:rounded-inherit relative !size-[60px] shrink-0 overflow-hidden !rounded-md bg-white after:absolute after:inset-0 after:border after:border-black/10 after:content-['']",children:l.jsx(p0,{className:"!bg-white",src:a})}),l.jsx(D,{className:"size-md border-subtler bg-base absolute -left-1.5 -top-1.5 flex items-center justify-center rounded-full border shadow-sm",variant:"smallCaps",color:"light",children:r+1})]}),l.jsxs("div",{className:"gap-xs flex flex-1 flex-col duration-150 group-hover:opacity-70",children:[l.jsx(D,{variant:"smallBold",className:"line-clamp-2 leading-tight",children:n.name}),l.jsxs(bc,{className:"gap-xs text-quiet",delimiter:"",children:[typeof i=="number"&&l.jsx(fr,{id:"rating",children:l.jsx(L1,{showCount:!1,reviewCount:o,rating:i,size:"2xs",textVariant:"tiny",className:"mb-two",variant:"truncated"})}),n.price&&l.jsx(fr,{id:"price",children:l.jsx(D,{variant:"tiny",color:"light",children:Yi(n.price)})}),n.variants&&n.variants[0].compare_at_price&&l.jsx(fr,{id:"originalPrice",children:l.jsx(D,{variant:"tiny",color:"light",className:"line-through opacity-70",children:Yi(n.variants[0].compare_at_price)})})]})]}),s&&l.jsx(Obe,{onDelete:t})]})]})});jbe.displayName="OverviewListItem";const Obe=A.memo(({onDelete:e})=>{const{$t:t}=X(),{isMobileStyle:n}=Ce(),[r,s]=f.useState(!1),a=f.useMemo(()=>[{text:t({defaultMessage:"Remove",id:"G/yZLul6P1"}),icon:Ud,destructive:!0,onClick:c=>{e(),c.stopPropagation()}}],[e,t]),o=f.useCallback(c=>{s(!0),c.stopPropagation()},[]),i=f.useCallback(()=>{s(!1)},[]);return l.jsx(en,{items:a.map(c=>({type:"default",...c})),isMobileStyle:n,isOpen:r,onClose:i,children:l.jsx(ye,{icon:cu,extraCSS:"",size:"tiny",pill:!0,onClick:o})})});Obe.displayName="OverviewDropdownMenu";const YI=A.memo(({onClick:e,item:t,idx:n,showCount:r,includeProCons:s,inFlight:a,variant:o})=>{const i="shopping-overview-item",{$t:c}=X(),{image_url:u,num_reviews:d,rating:m}=t,p=Rbe({reason:i})&&t.merchant_info.pro_shop_enabled,g=f.useMemo(()=>{if(t.variants&&t.variants[0].compare_at_price&&t.variants[0].price){const y=Pbe(t.variants[0].price,t.variants[0].compare_at_price);if(y)return c({defaultMessage:"{amount} off",id:"+Fpudsk35l"},{amount:y})}return null},[t,c]);return l.jsx(z,{variant:o==="tile"?"transparent":"offset",bgHover:"offsetPlus",className:"p-sm group relative flex shrink-0 cursor-pointer select-none rounded-lg duration-150 active:scale-[0.98]",onClick:e,children:l.jsxs("div",{className:"gap-sm relative flex w-full flex-col items-start",children:[u&&l.jsxs("div",{className:"relative aspect-square w-full",children:[l.jsxs("div",{className:"p-xs after:rounded-inherit relative shrink-0 overflow-hidden rounded-md bg-white after:absolute after:inset-0 after:border after:border-black/10 after:content-['']",children:[l.jsx(p0,{className:"!bg-white",src:u}),g&&l.jsx("div",{className:"gap-sm absolute right-2 top-2 flex items-center",children:l.jsx(D,{variant:"smallCaps",className:"py-three flex items-center rounded-full border border-black/5 bg-white/80 px-1 !text-[10px] !text-black/50 backdrop-blur-sm",children:g})})]}),r&&l.jsx(D,{className:"size-md border-subtler bg-base absolute -left-1.5 -top-1.5 flex items-center justify-center rounded-full border shadow-sm",variant:"smallCaps",color:"light",children:n+1})]}),l.jsxs("div",{className:"gap-xs flex w-full flex-1 flex-col",children:[l.jsxs("div",{className:"gap-2xs flex flex-col",children:[l.jsx(D,{variant:"smallBold",className:"line-clamp-2",children:t.name}),l.jsxs(bc,{delimiter:"",className:"gap-xs",children:[l.jsx(fr,{id:"price",children:l.jsx(D,{variant:"tiny",color:"light",children:t.variants?.[0].price?Yi(t.variants[0].price):Yi(t.price??"")})}),t.variants&&t.variants[0].compare_at_price&&l.jsx(fr,{id:"originalPrice",children:l.jsx(D,{variant:"tiny",color:"light",className:"line-through opacity-70",children:Yi(t.variants[0].compare_at_price)})})]}),p&&l.jsx(NF,{className:"mb-sm"})]}),s&&l.jsx(Lbe,{pros:t.review_summary?.pros_detailed,inFlight:a}),l.jsx("div",{className:"h-full flex-1"}),l.jsxs(D,{variant:"tiny",color:"light",className:"gap-xs flex items-center",children:[l.jsx(Xd,{size:12,className:"inline-flex shrink-0",domain:t.merchant_info.merchant_domain}),l.jsx("span",{className:"line-clamp-1",children:t.merchant})]}),typeof m=="number"&&l.jsx(L1,{size:"2xs",reviewCount:d,rating:m,textVariant:"tiny",variant:"truncated"})]})]})})});YI.displayName="OverviewCardItem";const Lbe=A.memo(({pros:e,inFlight:t})=>{const n=!e&&t;return l.jsx("div",{className:"gap-2xs flex flex-col",children:n?l.jsx(Ln,{className:"gap-2xs flex flex-col",children:Array.from({length:2}).map((r,s)=>l.jsxs(D,{variant:"tiny",color:"light",className:"flex items-center",children:[l.jsx("div",{className:B("bg-offsetPlus h-2 rounded",{"w-1/2":s===0,"w-2/3":s===1})}),""]},s))}):e?.slice(0,2).map(r=>l.jsxs(D,{variant:"tiny",color:"light",className:"gap-xs flex items-start",children:[l.jsx(xt,{icon:ZE.faCheck,size:"sm",className:"text-super translate-y-two shrink-0"}),r.label]},r.label))})});Lbe.displayName="ProCons";const Dbe=A.memo(({onClick:e,item:t,idx:n,showCount:r})=>{const{image_url:s}=t;return l.jsx(z,{variant:"offset",bgHover:"offsetPlus",className:"group relative flex shrink-0 cursor-pointer select-none rounded-lg p-1.5 duration-150 active:scale-[0.99]",onClick:e,children:l.jsxs("div",{className:"gap-sm relative flex w-full flex-row items-start",children:[s&&l.jsxs("div",{className:"relative aspect-square size-8 shrink-0",children:[l.jsx("div",{className:"p-xs after:rounded-inherit relative w-full overflow-hidden rounded-md bg-white after:absolute after:inset-0 after:border after:border-black/10 after:content-['']",children:l.jsx(p0,{className:"!bg-white",src:s})}),r&&l.jsx(D,{className:"size-md border-subtler bg-base absolute -left-1.5 -top-1.5 flex items-center justify-center rounded-full border shadow-sm",variant:"smallCaps",color:"light",children:n+1})]}),l.jsx("div",{className:"gap-xs flex w-full min-w-0 flex-1 flex-col",children:l.jsxs("div",{children:[l.jsx(D,{variant:"tiny",className:"mb-1 line-clamp-2 leading-tight",children:t.name}),l.jsx(bc,{delimiter:"",className:"gap-xs",children:l.jsx(fr,{id:"price",children:l.jsx(D,{variant:"smallCaps",color:"light",children:t.variants?.[0].price?Yi(t.variants[0].price):Yi(t.price??"")})})})]})})]})})});Dbe.displayName="OverviewChipItem";const Uwt=(e,t=4)=>e.reduce((n,r,s)=>{const a=Math.floor(s/t);return n[a]||(n[a]=[]),n[a].push(r),n},[]);function Bwt(e){return Object.prototype.toString.call(e)==="[object Object]"}function rJ(e){return Bwt(e)||Array.isArray(e)}function Vwt(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function AF(e,t){const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;const s=JSON.stringify(Object.keys(e.breakpoints||{})),a=JSON.stringify(Object.keys(t.breakpoints||{}));return s!==a?!1:n.every(o=>{const i=e[o],c=t[o];return typeof i=="function"?`${i}`==`${c}`:!rJ(i)||!rJ(c)?i===c:AF(i,c)})}function sJ(e){return e.concat().sort((t,n)=>t.name>n.name?1:-1).map(t=>t.options)}function $wt(e,t){if(e.length!==t.length)return!1;const n=sJ(e),r=sJ(t);return n.every((s,a)=>{const o=r[a];return AF(s,o)})}function PF(e){return typeof e=="number"}function QI(e){return typeof e=="string"}function RF(e){return typeof e=="boolean"}function aJ(e){return Object.prototype.toString.call(e)==="[object Object]"}function Zn(e){return Math.abs(e)}function IF(e){return Math.sign(e)}function Jy(e,t){return Zn(e-t)}function Wwt(e,t){if(e===0||t===0||Zn(e)<=Zn(t))return 0;const n=Jy(Zn(e),Zn(t));return Zn(n/e)}function g0(e){return y0(e).map(Number)}function $o(e){return e[D1(e)]}function D1(e){return Math.max(0,e.length-1)}function jF(e,t){return t===D1(e)}function oJ(e,t=0){return Array.from(Array(e),(n,r)=>t+r)}function y0(e){return Object.keys(e)}function Fbe(e,t){return[e,t].reduce((n,r)=>(y0(r).forEach(s=>{const a=n[s],o=r[s],i=aJ(a)&&aJ(o);n[s]=i?Fbe(a,o):o}),n),{})}function XI(e,t){return typeof t.MouseEvent<"u"&&e instanceof t.MouseEvent}function Hwt(e,t){const n={start:r,center:s,end:a};function r(){return 0}function s(c){return a(c)/2}function a(c){return t-c}function o(c,u){return QI(e)?n[e](c):e(t,c,u)}return{measure:o}}function v0(){let e=[];function t(s,a,o,i={passive:!0}){let c;if("addEventListener"in s)s.addEventListener(a,o,i),c=()=>s.removeEventListener(a,o,i);else{const u=s;u.addListener(o),c=()=>u.removeListener(o)}return e.push(c),r}function n(){e=e.filter(s=>s())}const r={add:t,clear:n};return r}function zwt(e,t,n,r){const s=v0(),a=1e3/60;let o=null,i=0,c=0;function u(){s.add(e,"visibilitychange",()=>{e.hidden&&g()})}function d(){p(),s.clear()}function m(v){if(!c)return;o||(o=v);const x=v-o;for(o=v,i+=x;i>=a;)n(),i-=a;const b=Zn(i/a);r(b),c&&t.requestAnimationFrame(m)}function h(){c||(c=t.requestAnimationFrame(m))}function p(){t.cancelAnimationFrame(c),o=null,i=0,c=0}function g(){o=null,i=0}return{init:u,destroy:d,start:h,stop:p,update:n,render:r}}function Gwt(e,t){const n=t==="rtl",r=e==="y",s=r?"y":"x",a=r?"x":"y",o=!r&&n?-1:1,i=d(),c=m();function u(g){const{height:y,width:v}=g;return r?y:v}function d(){return r?"top":n?"right":"left"}function m(){return r?"bottom":n?"left":"right"}function h(g){return g*o}return{scroll:s,cross:a,startEdge:i,endEdge:c,measureSize:u,direction:h}}function ff(e=0,t=0){const n=Zn(e-t);function r(u){return u<e}function s(u){return u>t}function a(u){return r(u)||s(u)}function o(u){return a(u)?r(u)?e:t:u}function i(u){return n?u-n*Math.ceil((u-t)/n):u}return{length:n,max:t,min:e,constrain:o,reachedAny:a,reachedMax:s,reachedMin:r,removeOffset:i}}function Ube(e,t,n){const{constrain:r}=ff(0,e),s=e+1;let a=o(t);function o(h){return n?Zn((s+h)%s):r(h)}function i(){return a}function c(h){return a=o(h),m}function u(h){return d().set(i()+h)}function d(){return Ube(e,i(),n)}const m={get:i,set:c,add:u,clone:d};return m}function qwt(e,t,n,r,s,a,o,i,c,u,d,m,h,p,g,y,v,x,b){const{cross:_,direction:w}=e,S=["INPUT","SELECT","TEXTAREA"],C={passive:!1},E=v0(),M=v0(),T=ff(50,225).constrain(p.measure(20)),I={mouse:300,touch:400},j={mouse:500,touch:600},N=g?43:25;let P=!1,R=0,k=0,O=!1,L=!1,F=!1,U=!1;function V(te){if(!b)return;function le(pe){(RF(b)||b(te,pe))&&q(pe)}const ie=t;E.add(ie,"dragstart",pe=>pe.preventDefault(),C).add(ie,"touchmove",()=>{},C).add(ie,"touchend",()=>{}).add(ie,"touchstart",le).add(ie,"mousedown",le).add(ie,"touchcancel",se).add(ie,"contextmenu",se).add(ie,"click",Y,!0)}function W(){E.clear(),M.clear()}function H(){const te=U?n:t;M.add(te,"touchmove",Z,C).add(te,"touchend",se).add(te,"mousemove",Z,C).add(te,"mouseup",se)}function G(te){const le=te.nodeName||"";return S.includes(le)}function K(){return(g?j:I)[U?"mouse":"touch"]}function $(te,le){const ie=m.add(IF(te)*-1),pe=d.byDistance(te,!g).distance;return g||Zn(te)<T?pe:v&&le?pe*.5:d.byIndex(ie.get(),0).distance}function q(te){const le=XI(te,r);U=le,F=g&&le&&!te.buttons&&P,P=Jy(s.get(),o.get())>=2,!(le&&te.button!==0)&&(G(te.target)||(O=!0,a.pointerDown(te),u.useFriction(0).useDuration(0),s.set(o),H(),R=a.readPoint(te),k=a.readPoint(te,_),h.emit("pointerDown")))}function Z(te){if(!XI(te,r)&&te.touches.length>=2)return se(te);const ie=a.readPoint(te),pe=a.readPoint(te,_),me=Jy(ie,R),de=Jy(pe,k);if(!L&&!U&&(!te.cancelable||(L=me>de,!L)))return se(te);const ve=a.pointerMove(te);me>y&&(F=!0),u.useFriction(.3).useDuration(.75),i.start(),s.add(w(ve)),te.preventDefault()}function se(te){const ie=d.byDistance(0,!1).index!==m.get(),pe=a.pointerUp(te)*K(),me=$(w(pe),ie),de=Wwt(pe,me),ve=N-10*de,Ae=x+de/50;L=!1,O=!1,M.clear(),u.useDuration(ve).useFriction(Ae),c.distance(me,!g),U=!1,h.emit("pointerUp")}function Y(te){F&&(te.stopPropagation(),te.preventDefault(),F=!1)}function Q(){return O}return{init:V,destroy:W,pointerDown:Q}}function Kwt(e,t){let r,s;function a(m){return m.timeStamp}function o(m,h){const g=`client${(h||e.scroll)==="x"?"X":"Y"}`;return(XI(m,t)?m:m.touches[0])[g]}function i(m){return r=m,s=m,o(m)}function c(m){const h=o(m)-o(s),p=a(m)-a(r)>170;return s=m,p&&(r=m),h}function u(m){if(!r||!s)return 0;const h=o(s)-o(r),p=a(m)-a(r),g=a(m)-a(s)>170,y=h/p;return p&&!g&&Zn(y)>.1?y:0}return{pointerDown:i,pointerMove:c,pointerUp:u,readPoint:o}}function Ywt(){function e(n){const{offsetTop:r,offsetLeft:s,offsetWidth:a,offsetHeight:o}=n;return{top:r,right:s+a,bottom:r+o,left:s,width:a,height:o}}return{measure:e}}function Qwt(e){function t(r){return e*(r/100)}return{measure:t}}function Xwt(e,t,n,r,s,a,o){let i,c,u=[],d=!1;function m(y){return s.measureSize(o.measure(y))}function h(y){if(!a)return;c=m(e),u=r.map(m);function v(b){for(const _ of b){const w=_.target===e,S=r.indexOf(_.target),C=w?c:u[S],E=m(w?e:r[S]);if(Zn(E-C)>=.5){n.requestAnimationFrame(()=>{y.reInit(),t.emit("resize")});break}}}i=new ResizeObserver(b=>{d||(RF(a)||a(y,b))&&v(b)}),[e].concat(r).forEach(b=>i.observe(b))}function p(){i&&i.disconnect(),d=!0}return{init:h,destroy:p}}function Zwt(e,t,n,r,s){let a=0,o=0,i=r,c=s,u=e.get(),d=0;function m(){const S=n.get()-e.get(),C=!i;let E=0;return C?(a=0,e.set(n),E=S):(a+=S/i,a*=c,u+=a,e.add(a),E=u-d),o=IF(E),d=u,w}function h(){const S=n.get()-t.get();return Zn(S)<.001}function p(){return i}function g(){return o}function y(){return a}function v(){return b(r)}function x(){return _(s)}function b(S){return i=S,w}function _(S){return c=S,w}const w={direction:g,duration:p,velocity:y,seek:m,settled:h,useBaseFriction:x,useBaseDuration:v,useFriction:_,useDuration:b};return w}function Jwt(e,t,n,r,s){const a=s.measure(10),o=s.measure(50),i=ff(.1,.99);let c=!1;function u(){return!(c||!e.reachedAny(n.get())||!e.reachedAny(t.get()))}function d(p){if(!u())return;const g=e.reachedMin(t.get())?"min":"max",y=Zn(e[g]-t.get()),v=n.get()-t.get(),x=i.constrain(y/o);n.subtract(v*x),!p&&Zn(v)<a&&(n.set(e.constrain(n.get())),r.useDuration(25).useBaseFriction())}function m(p){c=!p}return{constrain:d,toggleActive:m}}function eSt(e,t,n,r,s){const a=ff(-t+e,0),o=m(),i=d(),c=h();function u(g,y){return Jy(g,y)<1}function d(){const g=o[0],y=$o(o),v=o.lastIndexOf(g),x=o.indexOf(y)+1;return ff(v,x)}function m(){return n.map((g,y)=>{const{min:v,max:x}=a,b=a.constrain(g),_=!y,w=jF(n,y);return _?x:w||u(v,b)?v:u(x,b)?x:b}).map(g=>parseFloat(g.toFixed(3)))}function h(){if(t<=e+s)return[a.max];if(r==="keepSnaps")return o;const{min:g,max:y}=i;return o.slice(g,y)}return{snapsContained:c,scrollContainLimit:i}}function tSt(e,t,n){const r=t[0],s=n?r-e:$o(t);return{limit:ff(s,r)}}function nSt(e,t,n,r){const a=t.min+.1,o=t.max+.1,{reachedMin:i,reachedMax:c}=ff(a,o);function u(h){return h===1?c(n.get()):h===-1?i(n.get()):!1}function d(h){if(!u(h))return;const p=e*(h*-1);r.forEach(g=>g.add(p))}return{loop:d}}function rSt(e){const{max:t,length:n}=e;function r(a){const o=a-t;return n?o/-n:0}return{get:r}}function sSt(e,t,n,r,s){const{startEdge:a,endEdge:o}=e,{groupSlides:i}=s,c=m().map(t.measure),u=h(),d=p();function m(){return i(r).map(y=>$o(y)[o]-y[0][a]).map(Zn)}function h(){return r.map(y=>n[a]-y[a]).map(y=>-Zn(y))}function p(){return i(u).map(y=>y[0]).map((y,v)=>y+c[v])}return{snaps:u,snapsAligned:d}}function aSt(e,t,n,r,s,a){const{groupSlides:o}=s,{min:i,max:c}=r,u=d();function d(){const h=o(a),p=!e||t==="keepSnaps";return n.length===1?[a]:p?h:h.slice(i,c).map((g,y,v)=>{const x=!y,b=jF(v,y);if(x){const _=$o(v[0])+1;return oJ(_)}if(b){const _=D1(a)-$o(v)[0]+1;return oJ(_,$o(v)[0])}return g})}return{slideRegistry:u}}function oSt(e,t,n,r,s){const{reachedAny:a,removeOffset:o,constrain:i}=r;function c(g){return g.concat().sort((y,v)=>Zn(y)-Zn(v))[0]}function u(g){const y=e?o(g):i(g),v=t.map((b,_)=>({diff:d(b-y,0),index:_})).sort((b,_)=>Zn(b.diff)-Zn(_.diff)),{index:x}=v[0];return{index:x,distance:y}}function d(g,y){const v=[g,g+n,g-n];if(!e)return g;if(!y)return c(v);const x=v.filter(b=>IF(b)===y);return x.length?c(x):$o(v)-n}function m(g,y){const v=t[g]-s.get(),x=d(v,y);return{index:g,distance:x}}function h(g,y){const v=s.get()+g,{index:x,distance:b}=u(v),_=!e&&a(v);if(!y||_)return{index:x,distance:g};const w=t[x]-b,S=g+d(w,0);return{index:x,distance:S}}return{byDistance:h,byIndex:m,shortcut:d}}function iSt(e,t,n,r,s,a,o){function i(m){const h=m.distance,p=m.index!==t.get();a.add(h),h&&(r.duration()?e.start():(e.update(),e.render(1),e.update())),p&&(n.set(t.get()),t.set(m.index),o.emit("select"))}function c(m,h){const p=s.byDistance(m,h);i(p)}function u(m,h){const p=t.clone().set(m),g=s.byIndex(p.get(),h);i(g)}return{distance:c,index:u}}function lSt(e,t,n,r,s,a,o){let i=0;function c(){a.add(document,"keydown",u,!1),t.forEach(d)}function u(h){h.code==="Tab"&&(i=new Date().getTime())}function d(h){const p=()=>{if(new Date().getTime()-i>10)return;e.scrollLeft=0;const v=t.indexOf(h),x=n.findIndex(b=>b.includes(v));PF(x)&&(s.useDuration(0),r.index(x,0),o.emit("slideFocus"))};a.add(h,"focus",p,{passive:!0,capture:!0})}return{init:c}}function O_(e){let t=e;function n(){return t}function r(c){t=o(c)}function s(c){t+=o(c)}function a(c){t-=o(c)}function o(c){return PF(c)?c:c.get()}return{get:n,set:r,add:s,subtract:a}}function Bbe(e,t){const n=e.scroll==="x"?a:o,r=t.style;let s=!1;function a(m){return`translate3d(${m}px,0px,0px)`}function o(m){return`translate3d(0px,${m}px,0px)`}function i(m){s||(r.transform=n(e.direction(m)))}function c(m){s=!m}function u(){s||(r.transform="",t.getAttribute("style")||t.removeAttribute("style"))}return{clear:u,to:i,toggleActive:c}}function cSt(e,t,n,r,s,a,o,i,c){const d=g0(s),m=g0(s).reverse(),h=x().concat(b());function p(E,M){return E.reduce((T,I)=>T-s[I],M)}function g(E,M){return E.reduce((T,I)=>p(T,M)>0?T.concat([I]):T,[])}function y(E){return a.map((M,T)=>({start:M-r[T]+.5+E,end:M+t-.5+E}))}function v(E,M,T){const I=y(M);return E.map(j=>{const N=T?0:-n,P=T?n:0,R=T?"end":"start",k=I[j][R];return{index:j,loopPoint:k,slideLocation:O_(-1),translate:Bbe(e,c[j]),target:()=>i.get()>k?N:P}})}function x(){const E=o[0],M=g(m,E);return v(M,n,!1)}function b(){const E=t-o[0]-1,M=g(d,E);return v(M,-n,!0)}function _(){return h.every(({index:E})=>{const M=d.filter(T=>T!==E);return p(M,t)<=.1})}function w(){h.forEach(E=>{const{target:M,translate:T,slideLocation:I}=E,j=M();j!==I.get()&&(T.to(j),I.set(j))})}function S(){h.forEach(E=>E.translate.clear())}return{canLoop:_,clear:S,loop:w,loopPoints:h}}function uSt(e,t,n){let r,s=!1;function a(c){if(!n)return;function u(d){for(const m of d)if(m.type==="childList"){c.reInit(),t.emit("slidesChanged");break}}r=new MutationObserver(d=>{s||(RF(n)||n(c,d))&&u(d)}),r.observe(e,{childList:!0})}function o(){r&&r.disconnect(),s=!0}return{init:a,destroy:o}}function dSt(e,t,n,r){const s={};let a=null,o=null,i,c=!1;function u(){i=new IntersectionObserver(g=>{c||(g.forEach(y=>{const v=t.indexOf(y.target);s[v]=y}),a=null,o=null,n.emit("slidesInView"))},{root:e.parentElement,threshold:r}),t.forEach(g=>i.observe(g))}function d(){i&&i.disconnect(),c=!0}function m(g){return y0(s).reduce((y,v)=>{const x=parseInt(v),{isIntersecting:b}=s[x];return(g&&b||!g&&!b)&&y.push(x),y},[])}function h(g=!0){if(g&&a)return a;if(!g&&o)return o;const y=m(g);return g&&(a=y),g||(o=y),y}return{init:u,destroy:d,get:h}}function fSt(e,t,n,r,s,a){const{measureSize:o,startEdge:i,endEdge:c}=e,u=n[0]&&s,d=g(),m=y(),h=n.map(o),p=v();function g(){if(!u)return 0;const b=n[0];return Zn(t[i]-b[i])}function y(){if(!u)return 0;const b=a.getComputedStyle($o(r));return parseFloat(b.getPropertyValue(`margin-${c}`))}function v(){return n.map((b,_,w)=>{const S=!_,C=jF(w,_);return S?h[_]+d:C?h[_]+m:w[_+1][i]-b[i]}).map(Zn)}return{slideSizes:h,slideSizesWithGaps:p,startGap:d,endGap:m}}function mSt(e,t,n,r,s,a,o,i,c){const{startEdge:u,endEdge:d,direction:m}=e,h=PF(n);function p(x,b){return g0(x).filter(_=>_%b===0).map(_=>x.slice(_,_+b))}function g(x){return x.length?g0(x).reduce((b,_,w)=>{const S=$o(b)||0,C=S===0,E=_===D1(x),M=s[u]-a[S][u],T=s[u]-a[_][d],I=!r&&C?m(o):0,j=!r&&E?m(i):0,N=Zn(T-j-(M+I));return w&&N>t+c&&b.push(_),E&&b.push(x.length),b},[]).map((b,_,w)=>{const S=Math.max(w[_-1]||0);return x.slice(S,b)}):[]}function y(x){return h?p(x,n):g(x)}return{groupSlides:y}}function hSt(e,t,n,r,s,a,o){const{align:i,axis:c,direction:u,startIndex:d,loop:m,duration:h,dragFree:p,dragThreshold:g,inViewThreshold:y,slidesToScroll:v,skipSnaps:x,containScroll:b,watchResize:_,watchSlides:w,watchDrag:S}=a,C=2,E=Ywt(),M=E.measure(t),T=n.map(E.measure),I=Gwt(c,u),j=I.measureSize(M),N=Qwt(j),P=Hwt(i,j),R=!m&&!!b,k=m||!!b,{slideSizes:O,slideSizesWithGaps:L,startGap:F,endGap:U}=fSt(I,M,T,n,k,s),V=mSt(I,j,v,m,M,T,F,U,C),{snaps:W,snapsAligned:H}=sSt(I,P,M,T,V),G=-$o(W)+$o(L),{snapsContained:K,scrollContainLimit:$}=eSt(j,G,H,b,C),q=R?K:H,{limit:Z}=tSt(G,q,m),se=Ube(D1(q),d,m),Y=se.clone(),Q=g0(n),re=({dragHandler:Ue,scrollBody:Ct,scrollBounds:Ye,options:{loop:mt}})=>{mt||Ye.constrain(Ue.pointerDown()),Ct.seek()},te=({scrollBody:Ue,translate:Ct,location:Ye,offsetLocation:mt,scrollLooper:We,slideLooper:Oe,dragHandler:Tt,animation:$e,eventHandler:ct,options:{loop:yt}},ht)=>{const ut=Ue.velocity(),fn=Ue.settled();fn&&!Tt.pointerDown()&&($e.stop(),ct.emit("settle")),fn||ct.emit("scroll"),mt.set(Ye.get()-ut+ut*ht),yt&&(We.loop(Ue.direction()),Oe.loop()),Ct.to(mt.get())},le=zwt(r,s,()=>re(ue),Ue=>te(ue,Ue)),ie=.68,pe=q[se.get()],me=O_(pe),de=O_(pe),ve=O_(pe),Ae=Zwt(me,de,ve,h,ie),Se=oSt(m,q,G,Z,ve),De=iSt(le,se,Y,Ae,Se,ve,o),Ne=rSt(Z),Pe=v0(),dt=dSt(t,n,o,y),{slideRegistry:et}=aSt(R,b,q,$,V,Q),Et=lSt(e,n,et,De,Ae,Pe,o),ue={ownerDocument:r,ownerWindow:s,eventHandler:o,containerRect:M,slideRects:T,animation:le,axis:I,dragHandler:qwt(I,e,r,s,ve,Kwt(I,s),me,le,De,Ae,Se,se,o,N,p,g,x,ie,S),eventStore:Pe,percentOfView:N,index:se,indexPrevious:Y,limit:Z,location:me,offsetLocation:de,options:a,resizeHandler:Xwt(t,o,s,n,I,_,E),scrollBody:Ae,scrollBounds:Jwt(Z,de,ve,Ae,N),scrollLooper:nSt(G,Z,de,[me,de,ve]),scrollProgress:Ne,scrollSnapList:q.map(Ne.get),scrollSnaps:q,scrollTarget:Se,scrollTo:De,slideLooper:cSt(I,j,G,O,L,W,q,de,n),slideFocus:Et,slidesHandler:uSt(t,o,w),slidesInView:dt,slideIndexes:Q,slideRegistry:et,slidesToScroll:V,target:ve,translate:Bbe(I,t)};return ue}function pSt(){let e={},t;function n(u){t=u}function r(u){return e[u]||[]}function s(u){return r(u).forEach(d=>d(t,u)),c}function a(u,d){return e[u]=r(u).concat([d]),c}function o(u,d){return e[u]=r(u).filter(m=>m!==d),c}function i(){e={}}const c={init:n,emit:s,off:o,on:a,clear:i};return c}const gSt={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0};function ySt(e){function t(a,o){return Fbe(a,o||{})}function n(a){const o=a.breakpoints||{},i=y0(o).filter(c=>e.matchMedia(c).matches).map(c=>o[c]).reduce((c,u)=>t(c,u),{});return t(a,i)}function r(a){return a.map(o=>y0(o.breakpoints||{})).reduce((o,i)=>o.concat(i),[]).map(e.matchMedia)}return{mergeOptions:t,optionsAtMedia:n,optionsMediaQueries:r}}function vSt(e){let t=[];function n(a,o){return t=o.filter(({options:i})=>e.optionsAtMedia(i).active!==!1),t.forEach(i=>i.init(a,e)),o.reduce((i,c)=>Object.assign(i,{[c.name]:c}),{})}function r(){t=t.filter(a=>a.destroy())}return{init:n,destroy:r}}function Uw(e,t,n){const r=e.ownerDocument,s=r.defaultView,a=ySt(s),o=vSt(a),i=v0(),c=pSt(),{mergeOptions:u,optionsAtMedia:d,optionsMediaQueries:m}=a,{on:h,off:p,emit:g}=c,y=j;let v=!1,x,b=u(gSt,Uw.globalOptions),_=u(b),w=[],S,C,E;function M(){const{container:re,slides:te}=_;C=(QI(re)?e.querySelector(re):re)||e.children[0];const ie=QI(te)?C.querySelectorAll(te):te;E=[].slice.call(ie||C.children)}function T(re){const te=hSt(e,C,E,r,s,re,c);if(re.loop&&!te.slideLooper.canLoop()){const le=Object.assign({},re,{loop:!1});return T(le)}return te}function I(re,te){v||(b=u(b,re),_=d(b),w=te||w,M(),x=T(_),m([b,...w.map(({options:le})=>le)]).forEach(le=>i.add(le,"change",j)),_.active&&(x.translate.to(x.location.get()),x.animation.init(),x.slidesInView.init(),x.slideFocus.init(),x.eventHandler.init(Q),x.resizeHandler.init(Q),x.slidesHandler.init(Q),x.options.loop&&x.slideLooper.loop(),C.offsetParent&&E.length&&x.dragHandler.init(Q),S=o.init(Q,w)))}function j(re,te){const le=W();N(),I(u({startIndex:le},re),te),c.emit("reInit")}function N(){x.dragHandler.destroy(),x.eventStore.clear(),x.translate.clear(),x.slideLooper.clear(),x.resizeHandler.destroy(),x.slidesHandler.destroy(),x.slidesInView.destroy(),x.animation.destroy(),o.destroy(),i.clear()}function P(){v||(v=!0,i.clear(),N(),c.emit("destroy"),c.clear())}function R(re,te,le){!_.active||v||(x.scrollBody.useBaseFriction().useDuration(te===!0?0:_.duration),x.scrollTo.index(re,le||0))}function k(re){const te=x.index.add(1).get();R(te,re,-1)}function O(re){const te=x.index.add(-1).get();R(te,re,1)}function L(){return x.index.add(1).get()!==W()}function F(){return x.index.add(-1).get()!==W()}function U(){return x.scrollSnapList}function V(){return x.scrollProgress.get(x.location.get())}function W(){return x.index.get()}function H(){return x.indexPrevious.get()}function G(){return x.slidesInView.get()}function K(){return x.slidesInView.get(!1)}function $(){return S}function q(){return x}function Z(){return e}function se(){return C}function Y(){return E}const Q={canScrollNext:L,canScrollPrev:F,containerNode:se,internalEngine:q,destroy:P,off:p,on:h,emit:g,plugins:$,previousScrollSnap:H,reInit:y,rootNode:Z,scrollNext:k,scrollPrev:O,scrollProgress:V,scrollSnapList:U,scrollTo:R,selectedScrollSnap:W,slideNodes:Y,slidesInView:G,slidesNotInView:K};return I(t,n),setTimeout(()=>c.emit("init"),0),Q}Uw.globalOptions=void 0;function OF(e={},t=[]){const n=f.useRef(e),r=f.useRef(t),[s,a]=f.useState(),[o,i]=f.useState(),c=f.useCallback(()=>{s&&s.reInit(n.current,r.current)},[s]);return f.useEffect(()=>{if(Vwt()&&o){Uw.globalOptions=OF.globalOptions;const u=Uw(o,n.current,r.current);return a(u),()=>u.destroy()}else a(void 0)},[o,a]),f.useEffect(()=>{AF(n.current,e)||(n.current=e,c())},[e,c]),f.useEffect(()=>{$wt(r.current,t)||(r.current=t,c())},[t,c]),[i,s]}OF.globalOptions=void 0;const Vbe=cl("CarouselContext",null);function LF(){const e=A.useContext(Vbe);if(!e)throw new Error("useCarousel must be used within a <Carousel />");return e}const $be=A.forwardRef(({orientation:e="horizontal",opts:t,setApi:n,plugins:r,className:s,children:a,...o},i)=>{const[c,u]=OF({...t,axis:e==="horizontal"?"x":"y"},r),[d,m]=A.useState(!1),[h,p]=A.useState(!1),g=A.useCallback(b=>{b&&(m(b.canScrollPrev()),p(b.canScrollNext()))},[]),y=A.useCallback(()=>{u?.scrollPrev()},[u]),v=A.useCallback(()=>{u?.scrollNext()},[u]),x=A.useCallback(b=>{b.key==="ArrowLeft"?(b.preventDefault(),y()):b.key==="ArrowRight"&&(b.preventDefault(),v())},[y,v]);return A.useEffect(()=>{!u||!n||n(u)},[u,n]),A.useEffect(()=>{if(u)return g(u),u.on("reInit",g),u.on("select",g),()=>{u?.off("select",g)}},[u,g]),l.jsx(Vbe.Provider,{value:{carouselRef:c,api:u,opts:t,orientation:e||(t?.axis==="y"?"vertical":"horizontal"),scrollPrev:y,scrollNext:v,canScrollPrev:d,canScrollNext:h},children:l.jsx("div",{ref:i,onKeyDownCapture:x,className:B("relative",s),role:"region","aria-roledescription":"carousel",...o,children:a})})});$be.displayName="Carousel";const Wbe=A.forwardRef(({className:e,...t},n)=>{const{carouselRef:r,orientation:s}=LF();return l.jsx("div",{ref:r,children:l.jsx("div",{ref:n,className:B("flex",s==="horizontal"?"-ml-4":"-mt-4 flex-col",e),...t})})});Wbe.displayName="CarouselContent";const ZI=A.memo(({selectedIndex:e,total:t})=>l.jsx("div",{className:"gap-xs flex",children:Array.from({length:t}).map((n,r)=>l.jsx("div",{className:B("duration-250 bg-inverse/70 h-[4px] w-[4px] rounded-full opacity-20",{"!opacity-100":e===r})},r))}));ZI.displayName="CarouselDots";const Hbe=A.memo(({className:e,ref:t,...n})=>l.jsx("div",{ref:t,role:"group","aria-roledescription":"slide",className:B("min-w-0 shrink-0 grow-0 basis-full",e),...n}));Hbe.displayName="CarouselItem";const JI=A.memo(({...e})=>{const{scrollPrev:t,canScrollPrev:n}=LF(),r=f.useCallback(s=>{s.stopPropagation(),t()},[t]);return l.jsx(ye,{disabled:!n,onClick:r,pill:!0,icon:uS,...e})});JI.displayName="CarouselPrevious";const ej=A.memo(({...e})=>{const{scrollNext:t,canScrollNext:n}=LF(),r=f.useCallback(s=>{s.stopPropagation(),t()},[t]);return l.jsx(ye,{pill:!0,disabled:!n,onClick:r,icon:Jr,...e})});ej.displayName="CarouselNext";const xSt=({children:e,fadeOut:t,clipChildren:n,paginationStyle:r="below",className:s,contentClassName:a,wrapperClassName:o,fadeOutClassName:i,prevClassName:c,nextClassName:u,paginationButtonProps:d})=>{const[m,h]=f.useState(),[p,g]=f.useState(0),[y,v]=f.useState(0),x=A.Children.toArray(e),b=f.useMemo(()=>A.Children.map(x,_=>A.isValidElement(_)?l.jsx(Hbe,{className:B("pl-md shrink-0 grow-0 !basis-[90%]",s),children:_},_.props.id):null),[x,s]);return A.useEffect(()=>{m&&(v(m.scrollSnapList().length),m.on("select",()=>{g(m.selectedScrollSnap())}))},[m,g,v]),l.jsxs($be,{opts:{duration:20},setApi:h,className:o,children:[l.jsxs("div",{className:B("relative"),children:[l.jsx("div",{className:n||t?"overflow-hidden":"",children:l.jsx(Wbe,{className:a,children:b})}),t&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:B("w-lg bg-base pointer-events-none absolute bottom-0 right-0 top-0 opacity-0 duration-300",{"!opacity-100":p<x.length-1},i),style:{maskImage:"linear-gradient(to left, black, transparent)"}}),l.jsx("div",{className:B("w-lg bg-base pointer-events-none absolute bottom-0 left-0 top-0 opacity-0 duration-300",{"!opacity-100":p>0},i),style:{maskImage:"linear-gradient(to right, black, transparent)"}})]}),(r==="overlay"||r==="overlayWithDots")&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:B("-left-sm pointer-events-none absolute top-[50%] -translate-y-[50%] opacity-0 duration-150",{"!pointer-events-auto !opacity-100":p>0},c),children:l.jsx(JI,{extraCSS:"shadow-sm",...d})}),l.jsx("div",{className:B("-right-sm pointer-events-none absolute top-[50%] -translate-y-[50%] opacity-0 duration-150",{"!pointer-events-auto !opacity-100":p<x.length-1},u),children:l.jsx(ej,{extraCSS:"shadow-sm",...d})})]})]}),r==="overlayWithDots"&&y>1&&l.jsx("div",{className:"mt-md flex items-center justify-center",children:l.jsx(ZI,{selectedIndex:p,total:y})}),r==="below"&&l.jsxs("div",{className:"mt-md flex items-center justify-between",children:[l.jsx(JI,{}),l.jsx(ZI,{selectedIndex:p,total:y}),l.jsx(ej,{})]})]})},bSt=({children:e})=>l.jsx(l.Fragment,{children:e}),_St=xSt,wSt=bSt,zbe=A.memo(({contextUUID:e,widgets:t,className:n,onItemClick:r,maxItems:s=1/0,includeProCons:a=!1,inFlight:o=!1})=>{const{articleLocalState:i}=h9(),{isMobileStyle:c}=Ce(),u=c?3:Math.min(t.length,s)<=4?4:5,d=f.useMemo(()=>t.map(p=>{const g=eg(p);if(!g)return null;switch(g.object){case"ShopifyWidget":return g;default:return null}}).filter(Boolean),[t]),m=f.useMemo(()=>d.slice(0,s).map((p,g)=>{if(!p)return null;switch(p.object){case"ShopifyWidget":return l.jsx(Ibe,{contextUUID:e,item:p,canEdit:i.isEditModeEnabled,variant:"card",idx:g,onClick:r,includeProCons:a,inFlight:o},p.id);default:return null}}).filter(Boolean),[d,i.isEditModeEnabled,e,r,a,s,o]);if(d.length===0)return null;const h=Uwt(m,u);return l.jsx("div",{className:B("mb-md",n),children:l.jsx(_St,{fadeOut:!c,paginationStyle:"overlay",paginationButtonProps:{size:"small",variant:"border",extraCSS:"bg-base shadow-sm"},fadeOutClassName:"hidden",className:"!basis-full",children:h.map((p,g)=>l.jsx(wSt,{id:"related-pages-"+g,children:l.jsx("div",{className:"gap-sm grid grid-cols-5 grid-rows-1",style:{gridTemplateColumns:`repeat(${u}, minmax(0, 1fr))`},children:h[g].map((y,v)=>l.jsx(A.Fragment,{children:y},v))})},"related-pages-"+g))})})});zbe.displayName="OverviewCards";const Gbe=f.createContext(void 0),SSt=()=>{const e=f.useContext(Gbe);if(!e)throw new Error("useEntityGroup must be used within an EntityGroupProvider");return e},qbe=A.memo(({children:e})=>{const[t,n]=f.useState(!1);return l.jsx(Gbe.Provider,{value:{viewMoreOpen:t,setViewMoreOpen:n},children:e})});qbe.displayName="EntityGroupProvider";const CSt=3,Kbe=A.memo(({onClick:e,disabled:t,images:n})=>{const{$t:r}=X();return l.jsx("div",{className:"flex items-center justify-center",children:l.jsxs(z,{variant:"background",bgHover:"offset",className:B("gap-sm py-md group flex w-full cursor-pointer items-center justify-center rounded-lg border",{"pointer-events-none opacity-50":t}),onClick:e,children:[l.jsx("div",{className:"mx-xs flex items-center",children:n.slice(0,CSt).map((s,a)=>l.jsxs("div",{className:B("-ml-xs dark:ring-inverse relative size-6 shrink-0 overflow-hidden rounded bg-white p-[0.1rem] shadow-sm duration-150 dark:ring",{"group-hover:-translate-x-sm":a===1},{"group-hover:-translate-x-md":a===0}),children:[l.jsx(es,{src:s.src,containerClassName:B("relative h-full w-full"),alt:"",maskClassName:"!rounded-[0.18rem]",includeLightBoxModal:!1,imageClassName:"w-full h-full object-contain bg-white"}),l.jsx("div",{className:"rounded-inherit absolute inset-0 border border-black/10 dark:border-transparent"})]},s.src))}),l.jsx(D,{variant:"smallBold",children:r({defaultMessage:"All Products",id:"enAu2bZ4pg"})})]})})});Kbe.displayName="ViewAllButton";const Ybe=A.memo(({intentTier:e})=>e===c2.HIGH?l.jsx(Qbe,{}):l.jsx(Xbe,{}));Ybe.displayName="WidgetPlaceholder";const Qbe=A.memo(()=>{const e=f.useMemo(()=>({maskImage:"linear-gradient(to bottom, black, transparent)"}),[]);return l.jsx(_e.div,{children:l.jsx(z,{variant:"offset",className:"flex h-[200px] animate-pulse rounded-lg",style:e})})});Qbe.displayName="HighIntentWidgetAnimationPlaceholder";const Xbe=A.memo(()=>{const{isMobileStyle:e}=Ce();return l.jsx(_e.div,{className:"gap-sm flex",children:Array.from({length:e?2:5}).map((t,n)=>l.jsx(z,{variant:"offset",className:"h-[200px] flex-1 animate-pulse rounded-lg"},n))})});Xbe.displayName="MediumIntentWidgetAnimationPlaceholder";var M5={},iJ;function ESt(){return iJ||(iJ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="fas",n="chevron-down",r=512,s=512,a=[],o="f078",i="M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faChevronDown=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(M5)),M5}var MSt=ESt(),T5={},lJ;function TSt(){return lJ||(lJ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="fas",n="chevron-right",r=320,s=512,a=[9002],o="f054",i="M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faChevronRight=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(T5)),T5}var kSt=TSt();const Zbe=f.createContext({entityId:"",menuItems:void 0,variant:void 0}),F1=()=>{const e=f.useContext(Zbe);if(!e)throw new Error("useEntity must be used within EntityContext");return e},NSt=({children:e,id:t,menuItems:n,className:r,entityVariant:s})=>l.jsx(Zbe.Provider,{value:{entityId:t,menuItems:n,variant:s},children:l.jsx(tr,{variant:s==="hide-chrome"?"transparent":void 0,className:B("group/card flex flex-col",{"p-md":s!=="hide-chrome"},r),children:e})}),ASt=({className:e,...t})=>l.jsx(z,{className:B("gap-sm md:gap-md relative flex flex-col rounded-lg md:flex-row",e),...t}),PSt=({primaryButtonText:e,onPrimaryButtonClick:t,listNumber:n,className:r,children:s,...a})=>l.jsxs("div",{className:B("relative md:w-[calc(30%_-_8px)]",r),...a,children:[l.jsxs("div",{className:"gap-md flex h-full flex-col justify-between",children:[s,e&&t&&l.jsx("div",{className:"flex flex-col items-stretch md:max-w-[160px]",children:l.jsx(ye,{text:e,variant:"primary",onClick:t,pill:!0,size:"small"})})]}),typeof n=="number"&&l.jsx(D,{variant:"smallCaps",color:"light",className:"border-subtler bg-base absolute -left-1.5 -top-1.5 flex size-5 shrink-0 items-center justify-center rounded-full border shadow-sm",children:n})]}),RSt=({className:e,buttonProps:t,secondaryButtonProps:n,trailingComponent:r,children:s,...a})=>{const{menuItems:o}=F1();return l.jsx("div",{className:B("flex min-w-0 flex-1 flex-col",e),...a,children:l.jsxs("div",{className:"gap-sm md:gap-md flex flex-1 flex-col justify-between rounded-lg",children:[l.jsx("div",{className:"gap-xs flex flex-col justify-between",children:l.jsx("div",{className:B("gap-xs relative mb-4 mt-2 flex flex-col md:mt-0"),children:s})}),(t||n)&&l.jsxs("div",{className:"gap-sm flex w-full items-center",children:[t&&l.jsx(ye,{variant:"primary",pill:!0,size:"small",...t,extraCSS:`${t.extraCSS} w-full max-w-[160px]`}),n&&l.jsx(ye,{variant:"border",pill:!0,size:"small",...n,extraCSS:`${n.extraCSS}`}),r,o&&o.length>0&&l.jsx("div",{className:"duration-150 group-hover/card:opacity-100 md:opacity-0",children:l.jsx(Wn.Menu,{menuItems:o,placement:"bottom-start"})})]})]})})},ISt=({title:e,onTitleClick:t,className:n})=>{const{selectedWidgetId:r}=kF(),{entityId:s}=F1(),{isMobileStyle:a}=Ce();return l.jsx("div",{onClick:t,className:n,children:l.jsx(D,{variant:a?"section-title":"entry-title",className:B("line-clamp-3 cursor-pointer !leading-tight duration-150 hover:opacity-70 md:text-2xl"),children:l.jsx("span",{className:B("rounded-md duration-300",{"bg-super/10":r===s}),children:e})})})},jSt=({loading:e,className:t,onClick:n,trailingText:r})=>{const{$t:s}=X();return l.jsxs(z,{className:B("group relative flex h-12 items-center",{"opacity-50":e,"cursor-pointer":!e},t),onClick:e?void 0:n,children:[!e&&l.jsx(z,{variant:"offsetPlus",className:"inset-y-xs absolute -inset-x-3 rounded-md opacity-0 duration-150 group-hover:opacity-100"}),l.jsxs("div",{className:"relative w-full",children:[l.jsxs("div",{className:B("gap-md relative flex w-full items-center justify-between",{"opacity-0":e}),children:[l.jsx(D,{variant:"smallBold",color:"light",children:s({defaultMessage:"View More",id:"QQSdHPJWXu"})}),l.jsxs(D,{variant:"tiny",color:"light",className:"gap-sm flex items-center",children:[r,l.jsx(be,{icon:Jr,size:"xs"})]})]}),e&&l.jsxs("div",{className:"absolute inset-0 flex items-center justify-between",children:[l.jsx(z,{className:"h-2 w-[100px] rounded-full",variant:"offsetPlus"}),l.jsx(xt,{icon:kSt.faChevronRight,className:"text-quietest"})]})]})]})},OSt=({title:e,className:t,children:n,trailingContent:r,defaultExpanded:s=!1})=>{const[a,o]=f.useState(!s);return l.jsxs(z,{className:t,children:[l.jsxs("div",{onClick:()=>o(!a),className:"group relative flex h-12 cursor-pointer select-none items-center justify-between",children:[l.jsx(z,{variant:"offsetPlus",className:"inset-y-xs absolute -inset-x-3 rounded-md opacity-0 duration-150 group-hover:opacity-100"}),l.jsx(D,{variant:"smallBold",color:"light",className:"relative",children:e}),l.jsxs("div",{className:"gap-md relative flex items-center",children:[l.jsx("div",{className:"gap-xs flex items-stretch",children:r}),l.jsx(xt,{icon:MSt.faChevronDown,className:B("text-foreground relative opacity-50",{"rotate-180":!a}),size:"sm"})]})]}),l.jsx(_c,{transition:{ease:Va(.16,1,.3,1),duration:.2},initial:!1,children:!a&&l.jsx(tl,{transition:{duration:.1},exit:{y:-5,opacity:0},animate:{y:0,opacity:1},initial:{y:-5,opacity:0},children:l.jsx("div",{className:"pb-4",children:n})})})]})},Jbe=NSt,eHt=ASt,tHt=ISt,nHt=OSt,rHt=PSt,sHt=RSt,aHt=jSt;var k5={},N5={},cJ;function LSt(){return cJ||(cJ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="xmark",r=384,s=512,a=[128473,10005,10006,10060,215,"close","multiply","remove","times"],o="f00d",i="M345 137c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-119 119L73 103c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l119 119L39 375c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l119-119L311 409c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-119-119L345 137z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faXmark=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(N5)),N5}var uJ;function DSt(){return uJ||(uJ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=LSt();e.definition={prefix:t.prefix,iconName:t.iconName,icon:[t.width,t.height,t.aliases,t.unicode,t.svgPathData]},e.faClose=e.definition,e.prefix=t.prefix,e.iconName=t.iconName,e.width=t.width,e.height=t.height,e.ligatures=t.aliases,e.unicode=t.unicode,e.svgPathData=t.svgPathData,e.aliases=t.aliases}(k5)),k5}var FSt=DSt();const DF=A.memo(f.forwardRef(({isOpen:e,children:t,placement:n,hoverOpen:r=!1,disabled:s=!1,onOpen:a,onClose:o,content:i,contentWidth:c="360px",isMobileStyle:u,boxProps:d,canOutsideClickClose:m,removeScroll:h,...p},g)=>{const[y,v]=f.useState(!1),x=f.useMemo(()=>e!==void 0,[e]),b=f.useMemo(()=>x?e:y,[x,e,y]),_=f.useCallback(()=>{!b&&!s&&(a?.(),x||v(!0))},[s,x,a,b]),w=f.useCallback(()=>{b&&!s&&(o?.(),x||v(!1))},[s,x,o,b]);f.useImperativeHandle(g,()=>({dismiss:w}),[w]);const S=f.useMemo(()=>({width:c??void 0}),[c]),C=f.useMemo(()=>l.jsx(z,{style:S,...d,children:i}),[S,d,i]),E=f.useMemo(()=>({canOutsideClickClose:m??!0,removeScroll:h}),[m,h]);return u?l.jsxs(l.Fragment,{children:[l.jsx(rn,{variant:"bottom-left-sheet",actionList:ce,isOpen:b,onClose:w,children:i}),l.jsx("span",{onClick:_,children:t})]}):l.jsx(ci,{isOpen:b,hoverOpen:r,placement:n,onClose:w,onOpen:_,overlayProps:E,content:C,hasInteractiveContent:!0,...p,children:t})})),USt=A.memo(({inFlight:e,chooseIfReason:t,chooseIfLeadInCopy:n,pros:r,cons:s,className:a,viewState:o="collapsed",id:i})=>{const c=!t&&e;return l.jsx(Ln,{active:c,className:B("relative",a),children:l.jsx(_c,{children:l.jsx(tl,{children:l.jsxs("div",{className:"gap-sm pb-xs relative mt-3 flex flex-col rounded-md md:mx-0",children:[l.jsx(e_e,{reason:t,leadInCopy:n,loading:c}),l.jsx(x0,{pros:r??ce,cons:s??ce,loading:c,viewState:o,id:i})]})})})})});USt.displayName="EntityItemGuidance";const e_e=A.memo(({reason:e,icon:t,leadInCopy:n,loading:r,textVariant:s="base"})=>{const{variant:a}=F1();return!e&&!r?null:l.jsxs("div",{className:B("flex items-start gap-[12px] rounded-md md:items-center"),children:[!r&&t&&l.jsxs(z,{className:"mt-xs text-inverse relative isolate hidden aspect-square size-8 shrink-0 items-center justify-center rounded-full md:mt-0 md:flex",children:[l.jsx("svg",{width:"75",height:"75",viewBox:"0 0 75 75",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"absolute h-auto w-full",children:l.jsx("path",{d:"M30.4039 2.95197C34.316 -0.98399 40.684 -0.983989 44.5961 2.95197L46.7415 5.11049C48.627 7.00748 51.1935 8.07056 53.8681 8.06241L56.9114 8.05315C62.4608 8.03625 66.9637 12.5392 66.9468 18.0886L66.9376 21.1319C66.9294 23.8065 67.9925 26.373 69.8895 28.2585L72.048 30.4039C75.984 34.316 75.984 40.684 72.048 44.5961L69.8895 46.7415C67.9925 48.627 66.9294 51.1935 66.9376 53.8681L66.9468 56.9114C66.9637 62.4608 62.4608 66.9637 56.9114 66.9469L53.8681 66.9376C51.1935 66.9294 48.627 67.9925 46.7415 69.8895L44.5961 72.048C40.684 75.984 34.316 75.984 30.4039 72.048L28.2585 69.8895C26.373 67.9925 23.8065 66.9294 21.1319 66.9376L18.0886 66.9469C12.5392 66.9637 8.03625 62.4608 8.05315 56.9114L8.06241 53.8681C8.07056 51.1935 7.00748 48.627 5.11049 46.7415L2.95197 44.5961C-0.983992 40.684 -0.983987 34.316 2.95197 30.4039L5.11049 28.2585C7.00748 26.373 8.07056 23.8065 8.06241 21.1319L8.05315 18.0886C8.03625 12.5392 12.5392 8.03625 18.0886 8.05315L21.1319 8.06241C23.8065 8.07056 26.373 7.00748 28.2585 5.11049L30.4039 2.95197Z",fill:"#D9D9D9",className:"fill-super"})}),l.jsx(xt,{icon:t,size:"sm",className:"relative"})]}),l.jsx("div",{className:"w-full",children:r?l.jsxs("div",{className:"gap-sm pb-sm flex flex-col",children:[l.jsx(z,{variant:a==="hide-chrome"?"offset":"offsetPlus",className:"h-2 w-full rounded-full"}),l.jsx(z,{variant:a==="hide-chrome"?"offset":"offsetPlus",className:"h-2 rounded-full"}),l.jsx(z,{variant:a==="hide-chrome"?"offset":"offsetPlus",className:"h-2 w-1/2 rounded-full"})]}):l.jsxs(D,{variant:s,children:[l.jsx("span",{className:"font-medium",children:n})," ",e]})})]})});e_e.displayName="EntityItemChooseIf";const t_e=3,n_e=2,x0=A.memo(({pros:e,cons:t,loading:n,className:r,viewState:s="collapsed",id:a,scrollOnMobile:o=!0})=>!n&&e.length===0&&t.length===0?null:l.jsx("div",{className:r,children:s==="collapsed"?l.jsx(s_e,{loading:n,pros:e,cons:t,id:a,scrollOnMobile:o}):l.jsx(a_e,{loading:n,pros:e,cons:t})}));x0.displayName="EntityItemProsCons";const r_e=A.memo(({children:e,loading:t,scrollOnMobile:n=!0})=>{const{isMobileStyle:r}=Ce(),{variant:s}=F1();return r&&n?l.jsx("div",{className:"-mx-md",children:l.jsx(ec,{orientation:"horizontal",showScrollIndicator:!1,children:l.jsx("div",{className:"flex",children:l.jsx("ul",{className:"gap-sm px-md flex shrink-0",children:e})})})}):l.jsx("ul",{className:B("flex flex-wrap",{"gap-0":s==="dense-card"&&!t,"gap-sm":s!=="dense-card"||t}),children:e})});r_e.displayName="ProsConsCollapsedContainer";const s_e=A.memo(({loading:e,pros:t,cons:n,id:r,scrollOnMobile:s=!0})=>l.jsx(r_e,{loading:e,scrollOnMobile:s,children:l.jsx(st,{initial:!1,children:l.jsx(dc,{children:e?Array.from({length:3}).map((a,o)=>l.jsx(L_,{asPlaceholder:!0,text:"",type:"con",label:"",id:r},o)):l.jsxs(l.Fragment,{children:[t.map(a=>l.jsx(L_,{text:a.description,type:"pro",label:a.label,id:r},a.label+r)).slice(0,t_e),n.map(a=>l.jsx(L_,{text:a.description,type:"con",label:a.label,id:r},a.label+r)).slice(0,n_e)]})})})}));s_e.displayName="ProsConsCollapsed";const a_e=A.memo(({loading:e,pros:t,cons:n})=>l.jsx("div",{className:"-mx-6",children:l.jsx(ec,{orientation:"horizontal",showScrollIndicator:!1,children:l.jsx("ul",{className:"gap-sm flex px-6",children:e?Array.from({length:3}).map((r,s)=>l.jsx(o_e,{},s)):l.jsxs(l.Fragment,{children:[t.map(r=>l.jsx(tj,{text:r.description,type:"pro",label:r.label},r.label)).slice(0,t_e),n.map(r=>l.jsx(tj,{text:r.description,type:"con",label:r.label},r.label)).slice(0,n_e)]})})})}));a_e.displayName="ProsConsExpanded";const L_=A.memo(({text:e,label:t,type:n,asPlaceholder:r,id:s})=>{const{trackEvent:a}=Te(),{variant:o}=F1(),i=()=>{r||a("shopping pro con hover",{type:n,label:t})},c={initial:{opacity:0,x:-3},animate:{opacity:1,x:0}},u=f.useMemo(()=>l.jsx("div",{className:B("px-sm py-sm pointer-events-none translate-y-0"),children:l.jsx(D,{variant:"small",children:e})}),[e]);return l.jsx(_e.li,{variants:c,initial:"initial",animate:"animate",transition:{duration:.1,ease:$a},className:B("group inline-flex shrink-0 cursor-default rounded-full duration-150",{"gap-xs":o!=="dense-card","gap-sm":o==="dense-card","hover:bg-offsetPlus/50":!r,"border-subtlest border duration-150":!r&&o!=="dense-card","!border-transparent !bg-transparent":r}),onMouseEnter:i,children:l.jsx(DF,{hoverOpen:!0,placement:"bottom-start",contentWidth:"200px",removeScroll:!1,content:u,isMobileStyle:!1,delayTime:1,disabled:r,hasInteractiveContent:!1,childrenClassName:"inline-flex",children:l.jsxs("div",{className:B("px-xs py-xs relative inline-flex items-center pr-[10px]",{"bg-offset dark:bg-offsetPlus":r,"h-[26px] rounded-full":r,"gap-2xs":o==="dense-card","gap-xs":o!=="dense-card"}),children:[l.jsx("div",{className:B("size-md flex shrink-0 items-center justify-center rounded-full",{"text-super":n==="pro"},{"text-quiet":n==="con"},{"bg-transparent":r}),children:l.jsx(D,{variant:"tiny",color:n==="pro"?"super":"light",className:"inline-flex",children:l.jsx(be,{className:r?"opacity-0":"",icon:n==="pro"?Ea:Xt,size:"xs"})})}),r?l.jsx(D,{variant:"tiny",className:"w-10 shrink-0",children:""}):l.jsx(D,{variant:"tiny",color:"light",children:l.jsx("span",{className:B({"text-super":n==="pro"}),children:t})})]})})},t+s)});L_.displayName="EntityItemProConItem";const o_e=A.memo(()=>l.jsx(z,{className:"p-sm h-[136px] w-[200px] rounded-md",variant:"offset"}));o_e.displayName="ExpandedLoading";const tj=A.memo(({text:e,label:t,type:n})=>l.jsxs(z,{className:"p-sm w-[200px] rounded-md",variant:"offset",children:[l.jsxs("div",{className:"mb-2xs gap-xs flex items-center",children:[l.jsx(z,{variant:n==="pro"?"super":"textColor",className:B("size-md flex shrink-0 items-center justify-center rounded-full",{"opacity-50":n==="con"}),children:l.jsx(xt,{icon:n==="pro"?ZE.faCheck:FSt.faClose,className:"text-inverse",size:"2xs"})}),l.jsx(D,{variant:"smallBold",color:n==="pro"?"super":"light",children:t})]}),l.jsx(D,{variant:"small",color:"light",children:e})]}));tj.displayName="ProConItemExpanded";const BSt=()=>{const[e,t]=f.useState(!1),n=f.useRef(null),r=f.useRef(!1),s=f.useRef({x:0,y:0}),a=f.useRef(null);f.useEffect(()=>{const c=u=>{s.current={x:u.clientX,y:u.clientY}};return document.addEventListener("mousemove",c,{passive:!0}),()=>document.removeEventListener("mousemove",c)},[]);const o=f.useCallback(()=>{if(!n.current)return;const c=n.current.getBoundingClientRect(),{x:u,y:d}=s.current,m=u>=c.left&&u<=c.right&&d>=c.top&&d<=c.bottom;r.current&&!m&&(t(!0),r.current=!1,a.current&&(clearInterval(a.current),a.current=null))},[]),i=f.useCallback(()=>{t(!1),r.current=!0,a.current=setInterval(o,50)},[o]);return f.useEffect(()=>()=>{a.current&&clearInterval(a.current)},[]),[e,n,i]},i_e=f.memo(({images:e,className:t,badgeText:n,imageClassName:r})=>{const[s,a]=f.useState(0),[o,i]=f.useState(!1),c=f.useRef(null),u=4,[d,m,h]=BSt(),p=f.useCallback(()=>{o||(i(!0),c.current=setInterval(()=>{a(v=>v===e.length-1?0:v+1)},1e3))},[o,e.length]),g=f.useCallback(()=>{i(!1),c.current&&(clearInterval(c.current),c.current=null),a(0)},[]),y=f.useCallback(()=>{h(),p()},[h,p]);return f.useEffect(()=>{d&&g()},[d,g]),f.useEffect(()=>()=>{c.current&&(clearInterval(c.current),c.current=null)},[]),l.jsxs("div",{className:"relative w-full",children:[l.jsx("div",{ref:m,className:B("p-xs grid grid-cols-1 grid-rows-1 rounded bg-white",t),onMouseEnter:y,children:o?e.map((v,x)=>l.jsx(p0,{src:v,className:B("rounded-inherit col-start-1 row-start-1 bg-white !duration-100",{"opacity-0":x!==s,hidden:x!==s&&!o}),imageClassName:B(r,"!scale-100")},x)):l.jsx(p0,{src:e[s],className:"rounded-inherit col-start-1 row-start-1 bg-white",imageClassName:B(r,"!scale-100")})}),e.length>1&&l.jsx("div",{className:B("bottom-sm pointer-events-none absolute left-1/2 -translate-x-1/2 duration-150",{"translate-y-0 opacity-50":o,"translate-y-0.5 opacity-0":!o}),children:l.jsx(VSt,{images:e,activeIndex:s,maxDots:u,isAnimating:o})}),n&&l.jsx("div",{className:"gap-sm right-xs top-xs pointer-events-none absolute flex items-center",children:n&&l.jsx(D,{variant:"smallCaps",className:"bg-inverse/70 !text-inverse dark:bg-offset dark:!text-foreground flex h-5 items-center whitespace-nowrap rounded-full px-1.5 !text-[10px] backdrop-blur-sm",children:n})})]})}),VSt=f.memo(({images:e,activeIndex:t,maxDots:n,isAnimating:r})=>l.jsx(_e.div,{layout:!0,layoutRoot:!0,className:"gap-xs flex items-center justify-center",children:l.jsx(st,{mode:"popLayout",children:e.map((s,a)=>{let o=0,i=0;return t<n?(o=Math.max(t-Math.floor(n/2),0),i=o+n):(i=Math.min(t+Math.floor(n/2),e.length-1),o=i-n),a>i||a<o?null:l.jsx(_e.div,{initial:{opacity:0,x:4},animate:{opacity:1,x:0,scale:a===t?1:.6},exit:{opacity:0,x:-4},transition:{duration:.15},layout:"position",children:l.jsx("div",{className:B("bg-dark h-1.5 rounded-full border border-white p-px duration-200",{"w-4":a===t,"w-1.5":a!==t}),children:l.jsx(_e.div,{className:"h-full rounded-full bg-white/50",initial:{width:"0",opacity:0},animate:{width:a===t&&r?"100%":"0",opacity:r?1:0},transition:{width:{duration:1},opacity:{duration:.15}}},s+"progress")})},a)})})})),l_e=A.memo(()=>l.jsx("svg",{className:"h-auto w-full",fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 4635.92 708.22",children:l.jsx("path",{d:"M4806.79,746.44a25,25,0,1,0,25,25A25,25,0,0,0,4806.79,746.44Zm0,46.08a21.08,21.08,0,1,1,21.08-21.07A21.09,21.09,0,0,1,4806.79,792.52Zm8.12-25.33c0-4.55-3.25-7.25-8-7.25h-8v22.77h3.94v-8.26h4.26l4.13,8.26h4.23L4811,773.6A6.59,6.59,0,0,0,4814.91,767.19Zm-8.16,3.78h-3.87v-7.55h3.87c2.63,0,4.23,1.33,4.23,3.77S4809.38,771,4806.75,771ZM569.17,605.31a97.95,97.95,0,1,1-97.94-97.94A97.94,97.94,0,0,1,569.17,605.31Zm552.18,0a97.95,97.95,0,1,1-97.95-97.94A97.95,97.95,0,0,1,1121.35,605.31ZM1099,304.09C998.87,235.77,878,195.89,747.32,195.89a619.47,619.47,0,0,0-351,108.2H195.89l90.17,98.12a274.9,274.9,0,0,0-89.89,203.66c0,152.19,123.38,275.57,275.57,275.57A274.54,274.54,0,0,0,659,808l88.34,96.12L835.66,808a274.54,274.54,0,0,0,187.23,73.4c152.19,0,275.68-123.38,275.68-275.57a274.9,274.9,0,0,0-89.89-203.66l90.17-98.12ZM471.74,792.36c-103,0-186.49-83.49-186.49-186.49s83.5-186.49,186.49-186.49,186.5,83.49,186.5,186.49S574.74,792.36,471.74,792.36ZM747.37,600.5c0-122.73-89.26-228-207-273.06a538.15,538.15,0,0,1,413.93,0C836.62,372.49,747.37,477.78,747.37,600.5Zm462,5.37c0,103-83.5,186.49-186.49,186.49s-186.5-83.49-186.5-186.49,83.5-186.49,186.5-186.49S1209.38,502.87,1209.38,605.87Zm654.11-173.45h43.37v85.84h-50.75c-39.09,0-64.17,19.18-64.17,58.28V792.36h-92.78V432.42h92.78V492.9C1800.05,450.12,1829.56,432.42,1863.49,432.42Zm186.35-85.59a56.06,56.06,0,0,1-112.12,0c0-31.72,24.34-56.8,56.06-56.8S2049.84,315.11,2049.84,346.83Zm-102.33,85.59H2040V792.36h-92.53Zm347.35-6.08a179,179,0,0,0-109.22,36.52V432.42h-92.52V898h92.52V761.92a179,179,0,0,0,109.22,36.52c102.76,0,186-83.3,186-186.05S2397.62,426.34,2294.86,426.34Zm-8.15,287.12a101.07,101.07,0,1,1,101.07-101.07A101.07,101.07,0,0,1,2286.71,713.46Zm1890.57-34.8c0,69.4-59.54,119.78-141.57,119.78-85.12,0-144.57-51.57-144.57-125.42v-2h90.54v2c0,30.82,22,51.53,54.78,51.53,31.42,0,52.53-15.33,52.53-38.14,0-21.61-14.61-33.69-53.89-44.56l-51.71-14.1c-54.34-14.71-85.5-50.12-85.5-97.14,0-60.42,57-104.27,135.57-104.27,79.3,0,132.58,43.88,132.58,109.21v2.05h-85.3v-2.05c0-22.18-20.77-39.55-47.28-39.55-27.84,0-47.28,12.78-47.28,31.09,0,18.76,13.84,29.66,49.36,38.91l54,14.81C4162.05,600.16,4177.28,644.7,4177.28,678.66Zm-1368-215.8A179,179,0,0,0,2700,426.34c-102.76,0-186.05,83.3-186.05,186.05S2597.26,798.44,2700,798.44a179,179,0,0,0,109.22-36.52v30.44h92.52V432.42h-92.52Zm0,149.54a101.07,101.07,0,1,1-101.07-101.08A101.08,101.08,0,0,1,2809.24,612.4ZM3236,462.86a179,179,0,0,0-109.22-36.52c-102.75,0-186.05,83.3-186.05,186.05s83.3,186.05,186.05,186.05A179,179,0,0,0,3236,761.92v30.44h92.53V304.3H3236Zm-101.06,250.6A101.07,101.07,0,1,1,3236,612.39,101.07,101.07,0,0,1,3134.89,713.46Zm623.34-281h92.53V792.36h-92.53Zm102.33-85.59a56.06,56.06,0,1,1-112.12,0c0-31.72,24.34-56.8,56.06-56.8S3860.56,315.11,3860.56,346.83Zm530.71,79.51c-102.75,0-186.05,83.3-186.05,186.05s83.3,186.05,186.05,186.05,186-83.3,186-186.05S4494,426.34,4391.27,426.34Zm0,287.12a101.07,101.07,0,1,1,101.07-101.07A101.06,101.06,0,0,1,4391.27,713.46ZM1744.55,386.87H1613.14V792.36h-92.22V386.87H1389.51V304.3h355Zm1877.76,45.55h97.21L3595.31,792.36H3484L3360.47,432.42h97.2L3540,693.79Zm1162.19,0h43.37v85.84h-50.75c-39.09,0-64.18,19.18-64.18,58.28V792.36h-92.77V432.42h92.77V492.9C4721.06,450.12,4750.57,432.42,4784.5,432.42Z",transform:"translate(-195.89 -195.89)",fill:"currentColor"})}));l_e.displayName="TripadvisorLogo";const c_e=A.memo(()=>l.jsxs("svg",{className:"h-auto w-full",viewBox:"0 0 1000 385",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{d:"M806.495 227.151L822.764 223.392C823.106 223.313 823.671 223.183 824.361 222.96C828.85 221.753 832.697 218.849 835.091 214.862C837.485 210.874 838.241 206.113 837.198 201.582C837.175 201.482 837.153 201.388 837.13 201.289C836.596 199.117 835.66 197.065 834.37 195.239C832.547 192.926 830.291 190.991 827.728 189.542C824.711 187.82 821.553 186.358 818.289 185.171L800.452 178.659C790.441 174.937 780.432 171.309 770.328 167.771C763.776 165.439 758.224 163.393 753.4 161.901C752.49 161.62 751.485 161.34 750.669 161.058C744.837 159.271 740.739 158.53 737.272 158.505C734.956 158.42 732.649 158.841 730.511 159.738C728.283 160.699 726.282 162.119 724.639 163.906C723.822 164.835 723.054 165.806 722.337 166.815C721.665 167.843 721.049 168.907 720.491 170.001C719.876 171.174 719.348 172.391 718.911 173.642C715.6 183.428 713.951 193.7 714.032 204.029C714.091 213.368 714.342 225.354 719.475 233.479C720.712 235.564 722.372 237.366 724.348 238.769C728.004 241.294 731.7 241.627 735.544 241.904C741.289 242.316 746.855 240.905 752.403 239.623L806.45 227.135L806.495 227.151Z",fill:"currentColor"}),l.jsx("path",{d:"M987.995 140.779C983.553 131.457 977.581 122.947 970.328 115.601C969.39 114.669 968.385 113.806 967.321 113.02C966.339 112.283 965.318 111.598 964.264 110.967C963.18 110.373 962.065 109.837 960.924 109.362C958.668 108.476 956.25 108.077 953.829 108.19C951.513 108.322 949.254 108.956 947.207 110.049C944.105 111.591 940.748 114.07 936.283 118.221C935.666 118.834 934.891 119.525 934.195 120.177C930.511 123.641 926.413 127.911 921.536 132.883C914.002 140.497 906.583 148.152 899.21 155.89L886.017 169.571C883.601 172.071 881.401 174.771 879.441 177.643C877.771 180.07 876.59 182.799 875.963 185.678C875.6 187.886 875.653 190.142 876.12 192.329C876.143 192.429 876.164 192.523 876.187 192.622C877.229 197.154 879.988 201.103 883.883 203.637C887.778 206.172 892.505 207.094 897.068 206.211C897.791 206.106 898.352 205.982 898.693 205.898L969.033 189.646C974.576 188.365 980.202 187.191 985.182 184.3C988.522 182.363 991.699 180.443 993.878 176.569C995.043 174.441 995.748 172.092 995.948 169.675C997.027 160.089 992.021 149.202 987.995 140.779Z",fill:"currentColor"}),l.jsx("path",{d:"M862.1 170.358C867.197 163.955 867.184 154.41 867.64 146.607C869.174 120.536 870.79 94.4619 872.07 68.3766C872.56 58.4962 873.624 48.7498 873.036 38.7944C872.552 30.5816 872.492 21.1521 867.307 14.4122C858.154 2.52688 838.636 3.50371 825.319 5.34732C821.239 5.91358 817.153 6.6749 813.099 7.64807C809.045 8.62124 805.033 9.6841 801.108 10.9412C788.329 15.127 770.365 22.8103 767.323 37.5341C765.608 45.858 769.672 54.3727 772.824 61.9691C776.645 71.1774 781.865 79.4721 786.622 88.1401C799.198 111.024 812.008 133.765 824.782 156.53C828.597 163.326 832.755 171.933 840.135 175.454C840.623 175.667 841.121 175.856 841.628 176.018C844.937 177.272 848.545 177.513 851.993 176.712C852.201 176.664 852.405 176.617 852.608 176.57C855.792 175.704 858.675 173.973 860.937 171.568C861.345 171.185 861.734 170.782 862.1 170.358Z",fill:"currentColor"}),l.jsx("path",{d:"M855.997 240.155C854.008 237.355 851.184 235.258 847.931 234.162C844.677 233.065 841.16 233.027 837.881 234.051C837.111 234.307 836.361 234.618 835.636 234.983C834.515 235.554 833.445 236.221 832.439 236.976C829.507 239.148 827.039 241.97 824.791 244.8C824.221 245.522 823.7 246.483 823.022 247.1L811.708 262.663C805.295 271.382 798.971 280.123 792.7 289.003C788.608 294.735 785.068 299.576 782.273 303.859C781.743 304.666 781.193 305.567 780.689 306.284C777.338 311.469 775.441 315.252 774.467 318.622C773.735 320.862 773.503 323.234 773.788 325.572C774.1 328.008 774.92 330.35 776.195 332.447C776.873 333.499 777.604 334.516 778.385 335.495C779.196 336.436 780.058 337.332 780.966 338.18C781.936 339.105 782.973 339.957 784.07 340.729C791.879 346.162 800.428 350.066 809.421 353.083C816.904 355.567 824.682 357.053 832.555 357.504C833.894 357.572 835.237 357.543 836.572 357.417C837.809 357.309 839.04 357.136 840.26 356.9C841.479 356.615 842.681 356.266 843.863 355.853C846.162 354.993 848.255 353.66 850.008 351.94C851.667 350.279 852.944 348.276 853.749 346.07C855.057 342.81 855.917 338.671 856.483 332.526C856.532 331.652 856.657 330.604 856.744 329.644C857.19 324.545 857.395 318.556 857.723 311.514C858.276 300.685 858.71 289.903 859.053 279.09C859.053 279.09 859.782 259.875 859.78 259.865C859.946 255.437 859.81 250.53 858.582 246.121C858.042 244.008 857.17 241.994 855.997 240.155V240.155Z",fill:"currentColor"}),l.jsx("path",{d:"M983.707 270.24C981.346 267.651 978 265.069 972.722 261.878C971.961 261.453 971.068 260.886 970.244 260.392C965.85 257.749 960.557 254.969 954.374 251.611C944.876 246.396 935.372 241.312 925.778 236.271L908.825 227.28C907.946 227.024 907.053 226.389 906.225 225.989C902.968 224.432 899.516 222.978 895.932 222.311C894.697 222.074 893.444 221.944 892.186 221.923C891.375 221.913 890.565 221.962 889.761 222.07C886.371 222.595 883.234 224.178 880.795 226.591C878.356 229.005 876.74 232.128 876.178 235.513C875.919 237.667 875.998 239.847 876.411 241.976C877.24 246.487 879.254 250.95 881.338 254.858L890.391 271.824C895.428 281.394 900.526 290.907 905.752 300.391C909.123 306.578 911.929 311.871 914.557 316.26C915.055 317.085 915.62 317.974 916.046 318.738C919.245 324.013 921.815 327.333 924.421 329.715C926.109 331.345 928.132 332.586 930.349 333.351C932.68 334.124 935.146 334.398 937.59 334.155C938.832 334.008 940.066 333.795 941.286 333.516C942.488 333.193 943.672 332.808 944.833 332.362C946.087 331.889 947.305 331.327 948.478 330.678C955.36 326.82 961.703 322.07 967.345 316.552C974.112 309.894 980.093 302.633 984.745 294.321C985.392 293.145 985.952 291.924 986.422 290.667C986.86 289.504 987.24 288.319 987.558 287.118C987.834 285.896 988.045 284.662 988.191 283.418C988.422 280.977 988.138 278.514 987.358 276.19C986.591 273.963 985.345 271.932 983.707 270.24V270.24Z",fill:"currentColor"}),l.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M400.03 105.19C400.03 91.2089 411.42 79.7877 425.167 79.7877C438.717 79.7877 449.714 91.2089 450.303 105.387V303.682C450.303 317.663 438.913 329.084 425.167 329.084C411.027 329.084 400.03 317.663 400.03 303.682V105.19ZM376.657 227.672C376.461 231.61 375.479 238.896 370.373 244.213C364.874 249.923 357.412 251.302 353.092 251.302C335.123 251.4 317.155 251.45 299.187 251.499C281.218 251.548 263.248 251.597 245.279 251.696C246.85 256.619 249.992 264.101 257.062 270.994C261.382 275.129 265.506 277.492 267.273 278.476C269.434 279.855 276.896 283.793 286.126 283.793C295.945 283.793 304.586 280.642 313.03 276.31L313.736 275.945C319.604 272.904 325.66 269.766 332.079 268.631C338.363 267.646 345.04 268.827 349.949 273.16C355.841 278.279 358.197 285.762 356.037 293.442C353.484 302.106 346.218 309.589 338.559 314.118C334.239 316.678 329.526 318.844 324.813 320.617C318.725 322.783 312.441 324.358 306.157 325.343C299.872 326.327 293.392 326.721 286.911 326.524H286.911C283.769 326.524 280.431 326.524 277.092 326.13C273.558 325.736 270.023 324.949 266.684 324.161C261.186 322.98 256.08 321.207 250.974 318.844C246.064 316.678 241.155 313.921 236.638 310.771C232.121 307.62 227.997 303.879 224.07 299.94C220.338 296.002 216.804 291.67 213.662 286.944C203.057 270.797 198.147 250.908 199.129 231.61C199.915 212.706 206.199 193.802 217.589 178.443C218.823 176.519 220.247 174.883 221.596 173.333C222.18 172.663 222.75 172.008 223.284 171.354C237.35 154.158 256.142 148.716 263.894 146.471L264.328 146.345C286.519 140.044 304.978 144.179 312.441 146.345C316.172 147.33 337.185 153.828 353.484 171.354C354.27 172.141 356.43 174.701 359.179 178.443C369.505 192.508 373.066 205.605 374.272 210.042L374.301 210.146C375.479 214.478 376.657 220.386 376.657 227.672ZM261.382 195.181C249.992 204.436 246.85 216.251 246.064 219.992H331.686C330.901 216.448 327.562 204.436 316.172 195.181C304.586 185.925 292.41 185.335 288.679 185.335C284.948 185.335 272.772 185.925 261.382 195.181ZM586.98 142.998C564.593 142.998 544.169 153.041 529.637 169.385V168.794C529.048 155.6 518.05 144.967 504.696 144.967C490.753 144.967 479.56 156.191 479.56 170.172V359.409C479.56 373.391 490.753 384.615 504.696 384.615C518.64 384.615 529.833 373.391 529.833 359.409V352.123V300.334C544.365 316.482 564.593 326.721 587.176 326.721C632.147 326.721 668.674 285.959 668.674 235.155C668.478 184.35 631.951 142.998 586.98 142.998ZM575.983 285.566C550.453 285.566 529.637 263.314 529.637 235.549C529.637 207.586 550.257 185.335 575.983 185.335C601.512 185.335 622.328 207.586 622.328 235.549C622.132 263.314 601.512 285.566 575.983 285.566ZM161.425 248.348L153.177 266.464C149.446 274.341 145.715 282.415 142.18 290.488C141.052 292.966 139.916 295.494 138.764 298.057C123.068 332.981 104.44 374.43 63.8242 383.236C44.1861 387.568 14.5327 381.661 3.5354 363.15C-7.4619 344.443 8.83767 322.979 29.8504 327.902C33.1646 328.641 36.4235 330.266 39.7101 331.904C45.187 334.635 50.7406 337.404 56.7545 336.173C62.4495 335.188 65.9844 331.053 70.5011 325.736C76.7853 318.45 79.5346 310.771 80.7129 306.242C80.6147 306.045 80.5165 305.798 80.4183 305.552C80.3201 305.306 80.2219 305.06 80.1237 304.863C75.0117 295.326 70.5473 286.8 66.8178 279.677C64.3868 275.034 62.2681 270.987 60.4857 267.646C56.8287 260.714 54.0662 255.473 51.918 251.398C45.6449 239.497 44.609 237.532 41.8296 232.398C35.7418 220.78 29.2612 209.555 22.5843 198.331C15.3182 186.122 7.85577 172.535 13.9436 158.16C18.8531 146.542 31.4214 140.634 43.4006 144.376C56.0403 148.212 61.6377 160.239 66.8724 171.487C67.8188 173.52 68.7534 175.528 69.7156 177.458C78.16 194.196 86.4079 210.934 94.6559 227.672C95.382 229.336 96.4917 231.605 97.8402 234.362C99.0447 236.824 100.44 239.676 101.922 242.834C102.697 244.475 103.434 246.002 104.101 247.382C104.954 249.149 105.691 250.676 106.242 251.892C110.072 242.342 113.95 232.841 117.829 223.34C121.707 213.839 125.586 204.337 129.415 194.787C129.522 194.253 130.436 192.216 131.813 189.145C132.977 186.549 134.473 183.215 136.092 179.427C136.64 178.133 137.191 176.79 137.755 175.417C142.856 162.995 148.988 148.06 162.604 143.982C172.423 141.028 183.42 144.967 189.115 153.237C192.061 157.372 193.239 162.098 193.435 166.824C193.593 177.275 188.545 188.491 184.212 198.115C183.157 200.459 182.144 202.708 181.26 204.829C181.219 204.91 181.048 205.296 180.739 205.988C179.541 208.679 176.278 216.005 170.655 228.066C168.626 232.389 166.679 236.713 164.707 241.09C163.626 243.491 162.538 245.907 161.425 248.348Z",fill:"currentColor"}),l.jsx("path",{d:"M687.728 310.153H689.549C690.447 310.153 691.167 309.923 691.706 309.462C692.256 308.99 692.532 308.395 692.532 307.676C692.532 306.833 692.29 306.232 691.807 305.872C691.324 305.502 690.56 305.316 689.515 305.316H687.728V310.153ZM695.043 307.608C695.043 308.507 694.801 309.305 694.318 310.002C693.846 310.687 693.178 311.198 692.313 311.535L696.324 318.193H693.492L690.004 312.226H687.728V318.193H685.234V303.176H689.633C691.498 303.176 692.863 303.541 693.728 304.271C694.605 305.002 695.043 306.114 695.043 307.608ZM677.228 310.676C677.228 308.429 677.79 306.322 678.914 304.356C680.037 302.389 681.582 300.839 683.549 299.704C685.515 298.569 687.633 298.002 689.902 298.002C692.15 298.002 694.256 298.564 696.223 299.687C698.189 300.811 699.74 302.356 700.874 304.322C702.009 306.288 702.577 308.406 702.577 310.676C702.577 312.889 702.032 314.968 700.942 316.912C699.852 318.856 698.324 320.412 696.358 321.58C694.391 322.749 692.24 323.333 689.902 323.333C687.577 323.333 685.431 322.754 683.464 321.597C681.498 320.429 679.964 318.872 678.863 316.929C677.773 314.985 677.228 312.901 677.228 310.676ZM678.998 310.676C678.998 312.62 679.487 314.44 680.464 316.136C681.442 317.822 682.773 319.153 684.459 320.131C686.155 321.097 687.97 321.58 689.902 321.58C691.858 321.58 693.672 321.092 695.346 320.114C697.02 319.136 698.346 317.816 699.324 316.153C700.313 314.479 700.807 312.653 700.807 310.676C700.807 308.721 700.318 306.906 699.341 305.232C698.363 303.558 697.037 302.232 695.363 301.255C693.7 300.266 691.88 299.771 689.902 299.771C687.947 299.771 686.133 300.26 684.459 301.238C682.785 302.215 681.453 303.541 680.464 305.215C679.487 306.878 678.998 308.698 678.998 310.676Z",fill:"currentColor"})]}));c_e.displayName="YelpLogo";const $St=({className:e})=>l.jsx(D,{className:B("w-10",e),children:l.jsx(c_e,{})}),WSt=({className:e})=>l.jsx(D,{className:B("w-[70px]",e),children:l.jsx(l_e,{})}),HSt=e=>{const t=f.useMemo(()=>Kr(e).with(Td.string.includes("yelp.com"),()=>$St).with(Td.string.includes("tripadvisor.com"),()=>WSt).otherwise(()=>null),[e]);return f.useMemo(()=>({SearchClientLogo:t}),[t])},u_e=A.memo(({operatingHours:e})=>{const{locale:t}=X();return e?l.jsx("div",{className:"gap-xs flex flex-col",children:e.map(({day:n,hours:r,is_today:s})=>l.jsxs("div",{className:"gap-md flex items-center justify-between",children:[l.jsx(D,{variant:"tiny",color:"white",className:s?void 0:"opacity-50",children:w9(n,t)}),l.jsx(D,{variant:"tiny",color:"white",className:s?void 0:"opacity-50",children:r.join(", ")})]},`place-hours-${n}`))}):null});u_e.displayName="PlaceOperatingHours";var nj=(e=>(e.DEFAULT="default",e.DALLE3="dall-e-3",e.PLAYGROUND="playground",e.FLUX="flux",e.GPT4O_IMAGE="gpt-4o",e.GEMINI_FLASH="gemini-flash",e))(nj||{});const d_e=e=>{switch(e){case"dall-e-3":return"DALL-E 3";case"playground":return"Playground";case"flux":return"FLUX";case"gpt-4o":return"GPT-4o Image";case"gemini-flash":return"Gemini Flash";default:return"AI"}},FF=e=>{if(e==="dalle"||Object.values(nj).includes(e))return!0;const t=e.toLowerCase();return Object.values(nj).some(n=>t.includes(n.toLowerCase()))},f_e=A.memo(({mediaItem:e})=>{const{name:t,url:n,image:r,source:s,author_name:a,author_url:o}=e,i=FF(s??""),c=n?.includes("unsplash.com"),u=a&&o;let d=t;c&&(d="Unsplash");const m=f.useCallback(h=>{h.stopPropagation()},[]);return l.jsx(at,{className:"cursor-pointer",target:"_blank",rel:"noopener nofollow",href:n??r??"",children:u?l.jsxs(z,{className:"flex max-w-[300px] items-stretch overflow-hidden",children:[l.jsxs("div",{className:"gap-sm hover:bg-offset flex shrink-0 items-center rounded-md p-[7px] duration-300",children:[n&&l.jsx(Xd,{domain:n}),l.jsx(D,{color:"white",variant:"tiny",className:"truncate",children:d})]}),l.jsx(at,{href:o,target:"_blank",className:"gap-sm p-sm hover:bg-offset group flex items-center overflow-hidden rounded-md pr-[10px] duration-300",onClick:m,children:l.jsx(D,{color:"white",variant:"tiny",className:"truncate opacity-50 duration-300 group-hover:opacity-75",children:a})})]}):l.jsx(z,{className:"hover:bg-offset max-w-[250px] rounded-md p-[7px] px-[10px] duration-300",variant:i?"offset":"transparent",children:n&&l.jsx(xu,{color:"white",url:n,source:d,truncate:!1,isAttachment:!1,variant:"tiny"})})})});f_e.displayName="ImageGalleryCitation";const m_e=A.memo(({image:e,name:t,url:n,fallbackSrc:r,onClick:s,AIProps:a,softBlockSaveImage:o,imageClassName:i,includeLightBoxModal:c,lightboxSrc:u,rounded:d="sm",onFail:m,onLoad:h,className:p,style:g,containerClassName:y,maskClassName:v,ref:x})=>{const b=f.useMemo(()=>({url:n,name:t}),[t,n]),_=f.useMemo(()=>({draggable:!1}),[]);return l.jsx("div",{onClick:s,className:p,style:g,children:l.jsx(es,{AIProps:a,origin:b,fadeIn:!1,hasShadow:!1,includeLightBoxModal:c,lightboxSrc:u,imageClassName:B("max-h-[70vh] object-cover w-full",i),imageRef:x,alt:t,src:e,fallback:null,fallbackSrc:r,softBlockSaveImage:o,rounded:d,onFail:m,onLoad:h,containerClassName:y,maskClassName:v,imageProps:_,draggable:!1},n)})}),h_e=A.memo(({mediaItem:e,softBlockSaveImage:t})=>{const{image:n,name:r,url:s,thumbnail:a,source:o}=e,i=n??a;return i?l.jsx("div",{className:"py-md px-lg flex size-full select-none items-center justify-center","data-color-scheme":"dark",children:l.jsx(m_e,{image:i,name:r,fallbackSrc:a,url:s,AIProps:o?{isAI:FF(o),AILabel:d_e(o)}:void 0,includeLightBoxModal:!1,softBlockSaveImage:t,maskClassName:"bg-offset"})}):(ee.warn(new Error("Invalid media item in image gallery"),{extra:{mediaItem:e}}),null)});h_e.displayName="ImageGalleryMain";const p_e=A.memo(({mediaItem:e,isHighlighed:t,onClick:n,imageRef:r})=>{const{image:s,name:a,url:o,thumbnail:i,source:c}=e,u=i??s,[d,m]=f.useState(!1),[h,p]=f.useState(!1),g=f.useCallback(()=>m(!0),[]),y=f.useCallback(()=>p(!0),[]);return!u||d?(ee.warn(new Error("Invalid media item in image gallery sidebar"),{extra:{mediaItem:e}}),null):l.jsx(m_e,{className:B("cursor-pointer select-none rounded-lg border-transparent transition-all duration-200 ease-in-out",{"ring-super ring-2 ring-offset-2 ring-offset-black":t,"hover:opacity-70":!t,"animate-in fade-in duration-300 ease-in":h,hidden:!h}),AIProps:c?{isAI:FF(c),AILabel:d_e(c)}:void 0,image:u,name:a,fallbackSrc:void 0,url:o,includeLightBoxModal:!1,onClick:n,maskClassName:"bg-offset !rounded-lg",imageClassName:"select-none",onFail:g,onLoad:y,ref:r})});p_e.displayName="GalleryImage";class zSt extends A.Component{static defaultProps={columnsCount:3,gutter:"0"};getColumns(){const{children:t,columnsCount:n=3}=this.props,r=Array.from({length:n},()=>[]);let s=0;return A.Children.forEach(t,a=>{a&&A.isValidElement(a)&&(r[s%n].push(a),s++)}),r}renderColumns(){const{gutter:t="0"}=this.props;return this.getColumns().map((n,r)=>l.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignContent:"stretch",flex:1,width:0,gap:t},children:n.map(s=>s)},r))}render(){const{columnsCount:t,gutter:n="0",style:r,...s}=this.props;return l.jsx("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignContent:"stretch",boxSizing:"border-box",width:"100%",gap:n,...r},...s,children:this.renderColumns()})}}const g_e=A.memo(({mainIndex:e,images:t,onClick:n,mainIndexRef:r})=>l.jsx(zSt,{className:"p-sm select-none pr-1",columnsCount:2,gutter:"8px",children:t.map((s,a)=>l.jsx(GSt,{mediaItem:s,index:a,mainIndex:e,onClick:n,mainIndexRef:r},"galleryImage "+a))}));g_e.displayName="ImageGallerySidebar";const GSt=A.memo(({mediaItem:e,index:t,mainIndex:n,onClick:r,mainIndexRef:s})=>{const a=f.useCallback(()=>r(t),[t,r]);return l.jsx(p_e,{mediaItem:e,isHighlighed:t===n,onClick:a,imageRef:t===n?s:void 0})}),Ai=A.memo(({children:e,isOpen:t,onClose:n,...r})=>l.jsx(pp,{isOpen:t,onClose:n,center:!1,variant:"lightbox",...r,children:l.jsx("div",{className:"flex h-screen flex-col",children:e})}));Ai.displayName="Gallery";const y_e=A.memo(({className:e="",headerText:t,children:n,onClose:r,...s})=>l.jsxs("div",{className:B("mx-md gap-md border-subtler h-headerHeight flex items-center justify-between border-b",e),"data-color-scheme":"dark",...s,children:[l.jsxs("div",{className:"gap-x-md flex items-center",children:[l.jsx(Wa,{variant:"mark",color:"white",size:"tiny"}),t&&l.jsx(D,{color:"white",variant:"section-title",className:"line-clamp-1",children:t})]}),l.jsxs("div",{className:"gap-sm flex items-center",children:[n,l.jsx(ye,{pill:!0,icon:Xt,onClick:r,size:"small",extraCSS:"!bg-offset"})]})]}));y_e.displayName="GalleryHeader";const v_e=A.memo(({className:e,style:t,...n})=>l.jsx("div",{className:B("col-span-6 h-[50dvh] min-h-0 w-full flex-1 shrink-0 md:h-auto md:w-auto lg:col-span-7",e),style:{colorScheme:"dark",...t},...n})),qSt=A.memo(({children:e,className:t,style:n,...r})=>l.jsx("div",{className:B("col-span-4 flex h-[50dvh] min-h-0 flex-col md:h-auto lg:col-span-3",t),"data-color-scheme":"dark",style:n,...r,children:l.jsx("div",{className:"scrollbar-subtle min-h-0 flex-1 overflow-y-auto",children:e})}));v_e.displayName="GalleryMain";const x_e=A.memo(({className:e,...t})=>l.jsx("div",{className:B("gap-lg flex min-h-0 flex-1 grow flex-col md:grid md:grid-cols-10 md:gap-0",e),...t}));x_e.displayName="GalleryContent";Ai.Header=y_e;Ai.Main=v_e;Ai.Sidebar=qSt;Ai.Content=x_e;const UF=A.memo(({mainImageIndex:e,title:t,isOpen:n,onClose:r=Rn,onSelect:s,images:a,softBlockSaveImage:o})=>{const[i,c]=f.useState(e),u=f.useRef(null),d=f.useCallback(({initial:v})=>{u.current?.scrollIntoView({inline:"nearest",block:v?"center":"nearest",behavior:v?"auto":"smooth"})},[u]);f.useEffect(()=>{c(e)},[e,n]),f.useEffect(()=>{d({initial:!1})},[d,i]);const m=f.useCallback(()=>{c(v=>(v+1)%a.length)},[a.length]),h=f.useCallback(()=>{c(v=>(v-1+a.length)%a.length)},[a.length]),p=f.useCallback(()=>{c(v=>{const x=v-2;return x>=0?x:v})},[]),g=f.useCallback(()=>{c(v=>{const x=v+2;return x<a.length?x:v})},[a.length]);f.useEffect(()=>{const v=x=>{n&&(x.key==="ArrowRight"?m():x.key==="ArrowLeft"?h():x.key==="ArrowUp"?(x.preventDefault(),p()):x.key==="ArrowDown"&&(x.preventDefault(),g()))};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[n,m,h,p,g]);const y=f.useCallback(v=>{c(v),s&&s(a[v])},[a,s]);return f.useEffect(()=>{n&&setTimeout(()=>{d({initial:!0})},0)},[n,d]),l.jsxs(Ai,{isOpen:n,onClose:r,children:[l.jsx(Ai.Header,{headerText:t,onClose:r,children:l.jsx(f_e,{mediaItem:a[i]})}),l.jsxs(Ai.Content,{children:[l.jsx(Ai.Main,{children:l.jsx(h_e,{mediaItem:a[i],softBlockSaveImage:o})}),l.jsx(Ai.Sidebar,{children:l.jsx(g_e,{images:a,mainIndex:i,onClick:y,mainIndexRef:u})})]})]})});UF.displayName="ImageGallery";const KSt=({entity_id:e,entity_name:t,data_source:n,entry_uuid:r,url:s,reason:a})=>{const o=gt(),i=["place_result_reviews",`${n}_${s}`],{refetch:c,data:u,isFetching:d,error:m}=Ke({queryKey:i,enabled:!1,queryFn:async()=>{let h={summary:"",review_quality_score:0,pros:[],cons:[],key_features:[],review_search_results:[]},p="PENDING",g="";try{await ne.SSE("/rest/sse/places_review_summary_bulk",a,{params:{places:[{entity_id:e,entity_name:t,data_source:n,entry_uuid:r,url:s}]},handlers:{message:y=>{y.blocks?.[0]?.review_summary_block&&(h={...h,...y.blocks[0].review_summary_block}),p=y.status??"FAILED",g=y.id??"",o.setQueryData(i,{review_summary:h,status:p,id:g})}}})}catch{}return{review_summary:h,status:p,id:g}}});return f.useMemo(()=>({generateReviewSummaryForPlace:c,reviewSummary:u?.review_summary,isFetching:d,error:m}),[u?.review_summary,m,c,d])};function b_e(){const{locale:e}=X(),t=new Intl.Locale(e),{value:n,loading:r}=Yr({flag:"canonical-hotel-pages-enabled",defaultValue:!1,extraAttributes:{cfLanguage:t.language,appApiVersion:ni}});return f.useMemo(()=>({initialized:!r,value:n}),[n,r])}const YSt=4,__e=A.memo(({dollarCount:e,priceRange:t,className:n="",dollarColor:r="default",textVariant:s="tiny",currencySymbol:a,...o})=>{const i=t&&/^(.+?)\s*(\1\s*)+$/.test(t.trim());return i&&(e=t.replace(/\u200A/g,"").length??0),l.jsx("div",{className:`flex items-center ${n}`,...o,children:t&&!i?l.jsx(D,{variant:s,color:r,children:t}):l.jsx("div",{className:"flex gap-px",children:Array.from({length:YSt},(c,u)=>l.jsx(D,{variant:s,className:"inline-flex",color:u<e?r:"ultraLight",children:a||"$"},u))})})});__e.displayName="DollarRange";const w_e=A.memo(({place:e,menuItems:t,className:n,entryUUID:r,contextUUID:s,onHover:a})=>{const o="place-widget",{$t:i}=X(),[c,u]=f.useState(!1),{SearchClientLogo:d}=HSt(e.url),m=b_e(),{generateReviewSummaryForPlace:h,reviewSummary:p,isFetching:g}=KSt({entity_id:String(e.id),entity_name:e.name,entry_uuid:r??"",data_source:e.client,url:e.url,reason:o}),{trackEvent:y}=Te();f.useEffect(()=>{r&&y("place card viewed",{entryUUID:r,contextUUID:s??"",inline:!1,itemID:e.url})},[r,s,e.url,y]),f.useEffect(()=>{e.review_summary||p||h()},[e.review_summary,p]);const v=f.useMemo(()=>e.review_summary??p,[e.review_summary,p]),x=f.useMemo(()=>{const P=[];return e.image_url&&P.push(e.image_url),e.images&&e.images.forEach(R=>{R!==e.image_url&&P.push(R)}),P.length?P.map(R=>({image:R,url:R.includes("tripadvisor.com")?e.url:e.entity_url??e.url})):null},[e.image_url,e.images,e.url,e.entity_url]),b=f.useMemo(()=>Kr(e.url).with(Td.string.includes("yelp.com"),()=>i({defaultMessage:"View on {partnerSite}",id:"Z/KOc+Wez3"},{partnerSite:"Yelp"})).with(Td.string.includes("tripadvisor.com"),()=>i({defaultMessage:"View on {partnerSite}",id:"Z/KOc+Wez3"},{partnerSite:"Tripadvisor"})).otherwise(()=>null),[i,e.url]),_=f.useCallback(()=>{const P=e.entity_url??e.url,R=m.initialized&&m.value?e.canonical_page_path??P:P;window.open(R)},[m,e.canonical_page_path,e.entity_url,e.url]),{isMobileStyle:w}=Ce(),S=!!v?.summary.length,{hasProsOrCons:C,isLoadingProsCons:E}=f.useMemo(()=>{const P=v?.pros_detailed?.length??0,R=v?.cons_detailed?.length??0;return{hasProsOrCons:P||R||g,isLoadingProsCons:g&&!S&&(P+R<3||!P||!R)}},[v?.pros_detailed,v?.cons_detailed,S,g]),M=f.useCallback(P=>{P.stopPropagation()},[]),T=f.useCallback(()=>{a&&a(void 0)},[a]),I=f.useCallback(()=>{a&&a(e.url)},[a,e.url]),j=f.useCallback(()=>{_()},[_]),N=f.useCallback(()=>{u(!1)},[]);return l.jsxs(l.Fragment,{children:[l.jsx(Jbe,{id:String(e.id),entityVariant:"dense-card",menuItems:t,className:"relative !p-0",children:l.jsxs(z,{as:"button","data-widget-id":e.id,className:B("group/root gap-sm p-md md:gap-md group flex h-full cursor-pointer appearance-none flex-col text-left duration-150",n),onMouseEnter:I,onMouseLeave:T,onClick:j,children:[l.jsxs("div",{className:"gap-md flex flex-1",children:[x&&x.length>0&&l.jsx("div",{className:"border-subtlest shadow-subtle size-20 shrink-0 rounded-md border bg-white md:size-28 dark:border-0",children:l.jsx(i_e,{images:x.map(P=>P.image),className:"size-full bg-white",imageClassName:"object-cover"})}),l.jsxs("div",{className:"gap-sm flex flex-1 flex-col",children:[l.jsx(D,{variant:w?"baseSemi":"section-title",className:"group-hover:text-super line-clamp-3 leading-tight transition-colors duration-150",children:e.name}),!!e.operating_hours&&w&&l.jsx(rj,{place:e}),(e.rating||e.price||e.price_range)&&l.jsxs(bc,{className:"gap-xs text-quiet text-xs",children:[!!e.operating_hours&&!w&&l.jsx(fr,{id:"is-open",children:l.jsx(rj,{place:e})}),(e.price||e.price_range)&&l.jsx(fr,{id:"price",children:l.jsx(__e,{dollarCount:e.price?.replace(/\u200A/g,"").length??0,priceRange:e.price_range,currencySymbol:e.currency_char})}),e.rating&&l.jsx(fr,{id:"rating",children:l.jsx(L1,{minReviewCount:1,reviewCount:e.num_reviews,rating:e.rating,size:"sm",variant:"truncated",textVariant:"tiny"})}),d&&l.jsx(fr,{id:"logo",children:e.url?l.jsx(at,{href:e.url,target:"_blank",className:"cursor-pointer duration-150 hover:opacity-70",onClick:M,children:l.jsx(d,{})}):l.jsx(d,{})})]}),l.jsxs("div",{className:"mt-xs gap-xs flex flex-col",children:[!!e.address?.length&&l.jsx(D_,{icon:Wre,href:`https://maps.google.com/?q=${e.address.join(", ")}`,target:"_blank",label:e.address.join(", ")}),!!e.phone&&l.jsx(D_,{icon:ATe,label:e.phone,href:`tel:${e.phone}`}),!!e.url&&b&&!d&&l.jsx(D_,{icon:n8,label:b,href:e.url})]})]})]}),C&&l.jsx(Ln,{active:E,children:l.jsx(z,{className:"mt-xs pt-sm border-t",children:l.jsx("div",{className:"-ml-sm",children:l.jsx(x0,{id:String(e.id),pros:v?.pros_detailed??ce,cons:v?.cons_detailed??ce,loading:E})})})})]})}),l.jsx(UF,{title:e.name,mainImageIndex:0,isOpen:c,images:x??ce,onClose:N})]})});w_e.displayName="PlaceWidget";const rj=A.memo(({place:e})=>{const{$t:t}=X(),n=f.useMemo(()=>{if(e.is_open){const s=e.operating_hours?.find(a=>a.is_today)?.hours;return!s||s.length===0||s.length>1?null:s?.[0].split(" - ")[1]}return null},[e.is_open,e.operating_hours]),r=f.useMemo(()=>l.jsx(u_e,{operatingHours:e.operating_hours}),[e.operating_hours]);return l.jsx(bn,{tooltipText:r,asChild:!0,children:l.jsx(D,{variant:"tiny",color:e.is_open?"super":"red",children:e.is_open?n?t({defaultMessage:"Open until {time}",id:"abDRIJdom/"},{time:n}):t({defaultMessage:"Open",id:"JfG49wNHKP"}):t({defaultMessage:"Closed",id:"Fv1ZSzMOV6"})})})});rj.displayName="OpenUntil";const D_=A.memo(({icon:e,label:t,href:n,target:r})=>{const s=f.useCallback(o=>{o.stopPropagation()},[]),a=l.jsxs(D,{variant:"tiny",color:"light",className:"gap-xs flex items-start md:items-center",children:[l.jsx(be,{icon:e,size:"sm",className:"-translate-x-0.5"}),t]});return n?l.jsx(at,{href:n,target:r,className:"cursor-pointer",onClick:s,children:l.jsx(D,{superHover:!0,color:"light",children:a})}):a});D_.displayName="MetaDataItem";const S_e=A.memo(({url:e,children:t,className:n})=>{const r=f.useCallback(s=>{s.stopPropagation()},[]);return e?l.jsx("div",{className:B("inline-flex",n),children:l.jsx(at,{href:e,target:"_blank",className:"inline-flex min-w-0 items-center gap-0 duration-150 hover:opacity-60",onClick:r,children:t})}):t});S_e.displayName="LogoWrapper";const C_e=A.memo(({merchantName:e,merchantDomain:t,itemUrl:n,className:r,textVariant:s,iconSize:a,faviconSize:o})=>l.jsx(S_e,{url:n??void 0,className:r,iconSize:a,children:l.jsx(E_e,{name:e,domain:t,faviconSize:o,textVariant:s})}));C_e.displayName="EntityItemMerchantInfo";const E_e=A.memo(({name:e,domain:t,faviconSize:n,textVariant:r="tiny"})=>l.jsxs(D,{variant:r,color:"light",className:"gap-xs flex items-center",children:[l.jsx(Xd,{className:"shrink-0 translate-y-[-0.5px]",domain:t,size:n}),l.jsx("span",{className:"truncate whitespace-nowrap",children:e})]}));E_e.displayName="EntityMerchantLogoName";const M_e=A.memo(({price:e,comparePrice:t,soldOut:n,size:r,textVariant:s})=>{const{$t:a}=X(),{isMobileStyle:o}=Ce(),i=Yi(n&&t?t:e);return l.jsxs("div",{className:"gap-sm flex items-center",children:[l.jsx(D,{variant:s||(o||r==="small"?"smallBold":"baseSemi"),className:n?"line-through":void 0,color:t?"default":void 0,children:i}),n?l.jsx(D,{variant:s??"small",color:"red",children:a({defaultMessage:"Sold Out",id:"MwUAGRNkR/"})}):t&&l.jsx(D,{variant:s??"small",color:"light",className:"line-through",children:Yi(t)})]})});M_e.displayName="EntityItemPrice";const T_e=A.memo(()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",role:"img",width:"70",height:"auto","aria-labelledby":"shop-pay-logo",viewBox:"0 0 424 102",fill:"none",children:[l.jsx("title",{id:"shop-pay-logo",children:"Shop Pay"}),l.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M204.916 30.0997C208.894 25.1796 215.067 21.1016 222.436 21.1016C238.98 21.1016 252.012 34.7983 252.001 51.6974C252.001 69.3058 238.903 82.3375 223.189 82.3375C214.834 82.3375 208.44 78.06 206.102 74.4918H205.88V100.356C205.88 100.512 205.818 100.661 205.708 100.771C205.598 100.881 205.449 100.943 205.293 100.943H190.566C190.409 100.943 190.258 100.882 190.146 100.772C190.035 100.662 189.97 100.513 189.967 100.356V21.6779C189.967 21.5192 190.03 21.3669 190.143 21.2547C190.255 21.1425 190.407 21.0795 190.566 21.0795H204.329C204.486 21.0824 204.635 21.1467 204.745 21.2586C204.855 21.3705 204.916 21.5211 204.916 21.6779V30.0997ZM221.179 67.3428C219.958 67.3814 218.73 67.2768 217.521 67.0265C214.479 66.397 211.694 64.8745 209.522 62.6536C207.35 60.4328 205.89 57.6146 205.329 54.5595C205.167 53.6817 205.082 52.7958 205.072 51.9114C205.061 50.9204 205.144 49.926 205.323 48.9415C205.879 45.8886 207.331 43.0704 209.495 40.8465C211.659 38.6226 214.436 37.094 217.473 36.4557C218.689 36.2001 219.924 36.0919 221.153 36.1288C223.15 36.1534 225.123 36.5679 226.962 37.3492C228.825 38.141 230.513 39.2939 231.929 40.7413C233.344 42.1887 234.459 43.902 235.209 45.7824C235.959 47.6628 236.329 49.6731 236.299 51.6974C236.299 51.6977 236.299 51.698 236.299 51.6983C236.331 53.7263 235.962 55.7408 235.214 57.626C234.465 59.5114 233.351 61.2304 231.937 62.6843C230.522 64.1382 228.834 65.2983 226.97 66.098C225.138 66.8837 223.171 67.3063 221.179 67.3428Z",fill:"currentColor"}),l.jsx("path",{d:"M109.306 32.8701C105.904 25.7337 99.4543 21.1238 89.7359 21.1238C86.753 21.1758 83.8218 21.9123 81.1685 23.2765C78.5151 24.6406 76.2106 26.5959 74.4325 28.9916L74.0779 29.4238V1.45428C74.0779 1.29264 74.0137 1.13763 73.8994 1.02333C73.7851 0.909028 73.6301 0.844803 73.4684 0.844803H59.7275C59.5678 0.847707 59.4156 0.913196 59.3037 1.02718C59.1917 1.14117 59.1291 1.29454 59.1291 1.45428V81.6837C59.1291 81.8424 59.1921 81.9946 59.3044 82.1068C59.4166 82.219 59.5688 82.2821 59.7275 82.2821H74.4436C74.6033 82.2821 74.7567 82.2194 74.8707 82.1075C74.9847 81.9956 75.0502 81.8434 75.0531 81.6837V47.4754C75.0531 40.8265 79.4856 36.1169 86.5777 36.1169C94.3347 36.1169 96.2961 42.4998 96.2961 49.0046V81.6837C96.2961 81.8424 96.3592 81.9946 96.4714 82.1068C96.5836 82.219 96.7358 82.2821 96.8945 82.2821H111.577C111.737 82.2821 111.891 82.2194 112.004 82.1075C112.118 81.9956 112.184 81.8434 112.187 81.6837V47.0543C112.187 45.8686 112.187 44.705 112.032 43.5747C111.78 39.8707 110.856 36.2435 109.306 32.8701V32.8701Z",fill:"currentColor"}),l.jsx("path",{d:"M35.8249 44.7604C35.8249 44.7604 28.3339 42.9985 25.5746 42.2893C22.8153 41.5801 17.9949 40.073 17.9949 36.4272C17.9949 32.7814 21.8845 31.6179 25.8295 31.6179C29.7745 31.6179 34.1627 32.5709 34.5062 36.948C34.5201 37.1058 34.5927 37.2525 34.7097 37.3593C34.8267 37.466 34.9795 37.5249 35.1379 37.5243L49.6434 37.4689C49.7288 37.4691 49.8133 37.4517 49.8916 37.4178C49.9699 37.3838 50.0404 37.3341 50.0987 37.2717C50.1569 37.2093 50.2017 37.1356 50.2301 37.0551C50.2585 36.9746 50.2701 36.8891 50.264 36.804C49.3664 22.7971 37.0771 17.7883 25.7408 17.7883C12.2991 17.7883 2.46987 26.6534 2.46987 36.4272C2.46987 43.5636 4.48669 50.2568 20.3442 54.911C23.1256 55.7199 26.9044 56.7727 30.2066 57.6924C34.1738 58.8006 36.3125 60.4739 36.3125 63.1112C36.3125 66.1697 31.8799 68.2973 27.5249 68.2973C21.2196 68.2973 16.7427 65.9592 16.377 61.7593C16.358 61.6056 16.2832 61.4642 16.1667 61.362C16.0502 61.2599 15.9003 61.2041 15.7454 61.2052L1.27307 61.2717C1.18823 61.2717 1.10425 61.2887 1.02614 61.3218C0.94802 61.355 0.877379 61.4035 0.818427 61.4645C0.759474 61.5255 0.713411 61.5978 0.683003 61.677C0.652596 61.7562 0.638464 61.8407 0.641441 61.9255C1.30633 75.1456 14.0721 82.271 25.9735 82.271C43.7038 82.271 51.7156 72.2977 51.7156 62.9561C51.7378 58.5679 50.7294 48.5724 35.8249 44.7604Z",fill:"currentColor"}),l.jsx("path",{d:"M146.384 17.6442C132.654 17.6442 125.806 22.3095 120.31 26.0439L120.143 26.1547C119.86 26.3488 119.66 26.6427 119.584 26.9775C119.508 27.3124 119.562 27.6637 119.733 27.961L125.163 37.3137C125.265 37.4887 125.404 37.6391 125.571 37.754C125.738 37.869 125.928 37.9457 126.127 37.9786C126.323 38.0139 126.523 38.0053 126.715 37.9536C126.907 37.9018 127.084 37.8082 127.235 37.6794L127.668 37.3248C130.493 34.9534 135.026 31.7841 145.996 30.9197C152.102 30.4322 157.377 32.0279 161.266 35.6626C165.544 39.6076 168.104 45.9794 168.104 52.7058C168.104 65.0837 160.812 72.8629 149.099 73.018C139.447 72.9626 132.965 67.9317 132.965 60.496C132.965 56.5511 134.749 53.9802 138.228 51.4093C138.494 51.2193 138.682 50.9395 138.757 50.6217C138.832 50.304 138.79 49.9696 138.638 49.6806L133.762 40.4608C133.672 40.2958 133.551 40.1502 133.404 40.0323C133.258 39.9144 133.089 39.8266 132.909 39.7738C132.725 39.7188 132.531 39.7033 132.34 39.7281C132.149 39.7529 131.965 39.8176 131.801 39.9179C126.327 43.1647 119.611 49.1043 119.977 60.5182C120.42 75.0459 132.499 86.1384 148.201 86.5927H148.988H150.063C168.724 85.9833 182.199 72.1315 182.199 53.3485C182.199 36.1059 169.633 17.6442 146.384 17.6442Z",fill:"currentColor"}),l.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M282.375 1.04428H408.027C416.699 1.04428 423.73 8.07446 423.73 16.7466V85.54C423.73 94.2121 416.699 101.242 408.027 101.242H282.375C273.703 101.242 266.673 94.2121 266.673 85.54V16.7466C266.673 8.07446 273.703 1.04428 282.375 1.04428ZM310.566 55.5316C321.049 55.5316 328.551 47.8854 328.551 37.1697C328.551 26.5093 321.049 18.8188 310.566 18.8188H292.06C291.84 18.8188 291.628 18.9064 291.473 19.0623C291.317 19.2181 291.229 19.4295 291.229 19.65V70.4361C291.232 70.6556 291.32 70.8653 291.476 71.0206C291.631 71.1758 291.841 71.2643 292.06 71.2672H299.019C299.24 71.2672 299.451 71.1796 299.607 71.0237C299.763 70.8679 299.85 70.6565 299.85 70.4361V56.3627C299.85 56.1423 299.938 55.9309 300.094 55.775C300.25 55.6191 300.461 55.5316 300.682 55.5316H310.566ZM310.034 26.5315C315.73 26.5315 319.93 31.0306 319.93 37.1697C319.93 43.3198 315.73 47.8078 310.034 47.8078H300.682C300.463 47.8078 300.253 47.7218 300.098 47.5683C299.942 47.4149 299.853 47.2063 299.85 46.9878V27.3626C299.853 27.1431 299.942 26.9334 300.097 26.7781C300.252 26.6229 300.462 26.5344 300.682 26.5315H310.034ZM330.601 61.5266C330.529 59.8838 330.868 58.2489 331.588 56.7704C332.308 55.2919 333.386 54.0167 334.724 53.0604C337.428 51.0325 341.616 49.9798 347.833 49.736L354.426 49.5144V47.564C354.426 43.6745 351.811 42.0233 347.611 42.0233C343.412 42.0233 340.763 43.5082 340.143 45.9351C340.093 46.1065 339.988 46.2564 339.843 46.3609C339.698 46.4653 339.523 46.5183 339.345 46.5113H332.84C332.72 46.5143 332.601 46.491 332.492 46.4431C332.382 46.3952 332.284 46.3238 332.205 46.2341C332.126 46.1443 332.067 46.0383 332.033 45.9235C331.999 45.8086 331.991 45.6878 332.009 45.5694C332.984 39.807 337.749 35.4299 347.911 35.4299C358.704 35.4299 362.593 40.4498 362.593 50.0352V70.4028C362.595 70.5129 362.575 70.6221 362.533 70.7243C362.492 70.8264 362.431 70.9193 362.354 70.9977C362.277 71.076 362.185 71.1382 362.083 71.1807C361.981 71.2232 361.872 71.245 361.762 71.245H355.191C355.081 71.245 354.972 71.2232 354.87 71.1807C354.769 71.1382 354.677 71.076 354.599 70.9977C354.522 70.9193 354.461 70.8264 354.42 70.7243C354.379 70.6221 354.358 70.5129 354.36 70.4028V68.8846C354.371 68.7514 354.339 68.6183 354.268 68.5049C354.197 68.3915 354.092 68.3041 353.967 68.2555C353.842 68.207 353.706 68.1999 353.577 68.2354C353.448 68.2709 353.334 68.347 353.252 68.4525C351.29 70.5912 348.099 72.1426 343.013 72.1426C335.555 72.1647 330.601 68.2641 330.601 61.5266ZM354.426 57.094V55.5205L345.894 55.9637C341.395 56.1964 338.768 58.0692 338.768 61.2163C338.768 64.0643 341.173 65.6489 345.362 65.6489C351.058 65.6489 354.426 62.5682 354.426 57.1051V57.094ZM369.198 80.7196V86.6481C369.188 86.8397 369.242 87.0293 369.353 87.1861C369.463 87.3429 369.623 87.4579 369.807 87.5124C370.966 87.8283 372.164 87.9739 373.365 87.9446C379.736 87.9446 385.554 85.6175 388.879 76.553L403.506 37.5353C403.548 37.4097 403.559 37.276 403.54 37.1451C403.52 37.0142 403.47 36.8897 403.394 36.7817C403.317 36.6738 403.216 36.5854 403.099 36.5238C402.982 36.4622 402.852 36.4291 402.719 36.4272H395.904C395.727 36.4257 395.554 36.4809 395.411 36.5845C395.267 36.6882 395.161 36.8349 395.106 37.0034L387.05 61.7149C386.989 61.8769 386.879 62.0163 386.737 62.1147C386.594 62.2131 386.425 62.2658 386.252 62.2658C386.079 62.2658 385.91 62.2131 385.767 62.1147C385.625 62.0163 385.516 61.8769 385.454 61.7149L376.168 36.9369C376.106 36.7782 375.998 36.6417 375.858 36.5449C375.718 36.4481 375.552 36.3956 375.381 36.394H368.732C368.6 36.3959 368.47 36.429 368.353 36.4906C368.236 36.5522 368.135 36.6406 368.058 36.7485C367.981 36.8564 367.931 36.9809 367.912 37.1119C367.892 37.2428 367.904 37.3765 367.946 37.5021L381.62 72.6301C381.687 72.8126 381.687 73.0129 381.62 73.1953L381.188 74.5583C380.684 76.2492 379.627 77.722 378.186 78.7407C376.746 79.7593 375.005 80.265 373.243 80.1766C372.22 80.1755 371.2 80.079 370.195 79.8885C370.073 79.8656 369.948 79.87 369.828 79.9012C369.708 79.9325 369.596 79.9898 369.501 80.0692C369.406 80.1486 369.329 80.2481 369.277 80.3605C369.224 80.4729 369.197 80.5956 369.198 80.7196Z",fill:"currentColor"})]}));T_e.displayName="ShopPayIcon";const QSt=({reason:e,enabled:t=!0})=>{const n=gt(),{data:r,isLoading:s}=Ke({queryKey:$3(),queryFn:()=>_Ze({reason:e}),enabled:t}),a=f.useCallback(()=>{setTimeout(()=>{n.invalidateQueries({queryKey:$3()})},3e3)},[n]),o=f.useCallback(({paymentMethodId:i,type:c="card",link:u=null,card:d=null})=>{a(),n.setQueryData($3(),m=>m&&m.customer?{...m,customer:{...m.customer,default_payment_method_type:c,default_payment_method:c==="card"?{id:i,brand:d?.brand,last_digits:d?.last_digits}:null,default_payment_method_link:c==="link"?{id:i,email:u?.email}:null}}:m)},[a,n]);return f.useMemo(()=>({customerShoppingInfo:r,isCustomerShoppingInfoLoading:s,setDefaultPaymentMethod:o}),[r,s,o])},XSt=({ref:e,onInView:t,onNotInView:n,once:r=!0})=>{const[s,a]=f.useState(!1),o=lRe(e);f.useEffect(()=>{const i=r?!s:!0;o&&i?(t(),a(!0)):!o&&i&&n&&(n(),a(!0))},[r,s,a,t,o,n])},ZSt=ge(async()=>{const{ShoppingDetailsModal:e}=await oe(async()=>{const{ShoppingDetailsModal:t}=await import("./ShoppingDetailsModal-zfS74Kzj.js");return{ShoppingDetailsModal:t}},__vite__mapDeps([112,1,2,113,3,53,49,4,114,115,116,117,118,119,120,121,55,5]));return{default:e}}),JSt=ge(async()=>{const{ShopifyPurchaseModal:e}=await oe(async()=>{const{ShopifyPurchaseModal:t}=await import("./ShopifyPurchaseModal-C36uLHqL.js");return{ShopifyPurchaseModal:t}},__vite__mapDeps([122,1,2,3,123,53,50,4,5]));return{default:e}}),eCt=(e,t)=>{switch(t.type){case"setItemDetailsOpen":return{...e,itemDetailsOpen:t.open};case"setSelectedImageIndex":return{...e,selectedImageIndex:t.index};case"setImageGalleryOpen":return{...e,imageGalleryOpen:t.open};case"setTryOnImageUrl":return{...e,tryOnImageUrl:t.url};case"setIsGeneratingTryOn":return{...e,isGeneratingTryOn:t.isGenerating}}},k_e={userDiscountOffer:null,shouldShowBuyWithPro:!1,selectedVariant:null,shopifyPurchaseModalOpen:!1,purchaseUrl:"",hideReviewSummary:!1,hasReviewSummary:!1,isShopifyPurchase:null,carouselImages:[],badgeText:"",needsUpsell:!1,showDiscountTag:!1,inViewRef:A.createRef(),reviewSummaryLoading:!1,buttonTitle:"",buttonTrailingComponent:null,selectedImageIndex:0,hasProsOrCons:!1,itemDetailsOpen:!1,imageGalleryOpen:!1,onPrimaryButtonClick:()=>{},tryOnImageUrl:null,isGeneratingTryOn:!1},tCt={setItemDetailsOpen:()=>{},setSelectedImageIndex:()=>{},setImageGalleryOpen:()=>{},setTryOnImageUrl:()=>{},setIsGeneratingTryOn:()=>{}},N_e=f.createContext(k_e),A_e=f.createContext(tCt),nCt=()=>f.useContext(N_e),rCt=()=>f.useContext(A_e),P_e=A.memo(({contextUUID:e,item:t,inFlight:n,entryUUID:r,onBuyWithProButtonClick:s,onShopifyButtonClick:a,children:o,canTryOn:i=!1})=>{const c="shopping-widget-provider",{$t:u}=X(),[d,m]=f.useReducer(eCt,{...k_e}),[h,p]=f.useState(1),[g,y]=f.useState(!1),[v,x]=f.useState(t.variants.find(ue=>ue.available)||t.variants[0]),{trackEvent:b}=Te(),{openModal:_}=_t(),{hasAccessToProFeatures:w}=Nt(),S=Je(),{openVisitorLoginUpsell:C}=$n({enabled:!S}),M=fp()==="US",{isLocalhost:T}=pc(),I=M||T,j=f.useRef(null),{isMobileStyle:N}=Ce();XSt({ref:j,onInView:()=>{e&&b("shown shopping product",{contextUUID:e,entryUUID:r??"",productId:t.id,productName:t.name,productURL:t.url,client:t.client})}});const P=!!t.review_summary?.buy_if,R=!P&&n;let k=null;v?.id&&t?.merchant_info?.merchant_domain&&t.client!=="shopify_catalogue"&&(k=`https://${t.merchant_info.merchant_domain}/cart/${v.id}:${h}`);const O=f.useMemo(()=>{const ue=Fwt(t,v);return d.tryOnImageUrl?[{src:d.tryOnImageUrl,variants:[]},...ue]:ue},[t,v,d.tryOnImageUrl]),L=f.useMemo(()=>{const ue=t.images.map(Ue=>({image:Ue.src||"",url:Ue.src||""}));return d.tryOnImageUrl?[{image:d.tryOnImageUrl,url:d.tryOnImageUrl},...ue]:ue},[t.images,d.tryOnImageUrl]),F=f.useMemo(()=>t.merchant_info.pro_shop_enabled&&I,[t.merchant_info.pro_shop_enabled,I]),{customerShoppingInfo:U}=QSt({enabled:F??!1,reason:c}),V=f.useMemo(()=>!U?.customer?.shipping_address?.address.city,[U]),W=f.useCallback(()=>{const ue=h+1;e&&b("shopping product quantity changed",{contextUUID:e,productName:t.name,newQuantity:ue}),p(ue)},[e,t.name,h,b]),H=f.useCallback(()=>{const ue=h>1?h-1:1;e&&b("shopping product quantity changed",{contextUUID:e,productName:t.name,newQuantity:ue}),p(ue)},[e,t.name,h,b]),G=f.useCallback(async()=>{v.price?_("shoppingPaymentModal",{product:t,onSuccess:ue=>{_("purchaseConfirmationModal",{order:ue})}}):window.open(t.url)},[t,_,v.price]),K=f.useCallback(()=>{_("shoppingOnboardingModal",{onContinue:()=>{G()}})},[G,_]),$=f.useCallback(()=>{e&&k&&(b("shopping modal button selected",{contextUUID:e,productURL:t.url,productId:t.id,productName:t.name,productPrice:v.price??"",client:t.client}),window.open(k),y(!1))},[e,t.name,t.url,k,v.price,y,b,t.client,t.id]),q=f.useCallback(ue=>{e&&t.url&&b("shopping card button selected",{contextUUID:e,productURL:t.url,productId:t.id,productName:t.name,productPrice:v.price??"",cta:ue,client:t.client})},[e,t.name,t.url,t.id,v.price,b,t.client]),Z=f.useMemo(()=>{if(v?.compare_at_price&&v?.price){const ue=Pbe(v.price,v.compare_at_price);if(ue)return u({defaultMessage:"{amount} off",id:"+Fpudsk35l"},{amount:ue})}return null},[v,u]),se=f.useMemo(()=>!!t.review_summary&&t.review_summary.review_quality_score===0,[t.review_summary]),Y=f.useCallback((ue,Ue)=>{if(!t.variants)return;const Ct=t.variants.find(Ye=>[Ye.option1,Ye.option2,Ye.option3].every((We,Oe)=>Oe===Ue?We===ue:We===v[`option${Oe+1}`]));Ct&&x(Ct),e&&b("shopping product option selected",{contextUUID:e,productName:t.name})},[e,t.name,t.variants,v,x,b]),Q=f.useMemo(()=>k,[k]),re=f.useMemo(()=>F&&(!S||!w),[F,S,w]),te=f.useMemo(()=>u(F||k?{defaultMessage:"Buy with",id:"bw7bvygIAi"}:{defaultMessage:"Visit Site",id:"Ppy3I8Cd73"}),[F,k,u]),le=f.useMemo(()=>F?l.jsx(tC,{sizeVariant:"small",fillColor:"fill-inverse",width:"w-[26px] ml-0.5"}):k?l.jsx("div",{className:"h-[14px] [&>*]:ml-0.5 [&>*]:w-auto",children:l.jsx(T_e,{})}):void 0,[F,k]),ie=f.useCallback(()=>{a?a():y(!0)},[a,y]),pe=f.useCallback(()=>{if(F){if(!S){C({origin:Be.BUY_WITH_PRO_BUTTON,description:u({defaultMessage:"Explore millions of products with free shipping on Perplexity Pro.",id:"PYA+JEZasT"}),title:u({defaultMessage:"Unlock free shipping with Perplexity",id:"dmUvYTOIgW"}),sheetModalVariant:"bottom-sheet-gradient"});return}if(!w){_("pricingModal",{origin:Be.BUY_WITH_PRO_BUTTON,pitchMessage:{title:u({defaultMessage:"Unlock free shipping with Perplexity",id:"dmUvYTOIgW"}),description:u({defaultMessage:"Explore millions of products with free shipping on Perplexity Pro.",id:"PYA+JEZasT"})}});return}V?K():G(),s?.()}else Q?ie():window.open(t.url)},[G,K,ie,Q,t.url,s,V,S,w,_,C,F,u]),me=f.useCallback(()=>{q(F?"buy with pro":Q?"buy with shop":"visit site")},[q,Q,F]),de=f.useCallback(()=>{pe(),me()},[pe,me]),ve=f.useMemo(()=>R?!0:(t.review_summary?.pros_detailed?.length??0)>0||(t.review_summary?.cons_detailed?.length??0)>0,[t.review_summary?.pros_detailed,t.review_summary?.cons_detailed,R]),Ae=f.useMemo(()=>({...d,shouldShowBuyWithPro:F,selectedVariant:v,shopifyPurchaseModalOpen:g,purchaseUrl:k,hideReviewSummary:se,hasReviewSummary:P,isShopifyPurchase:Q,carouselImages:O,badgeText:Z,needsUpsell:re,inViewRef:j,reviewSummaryLoading:R,buttonTitle:te,buttonTrailingComponent:le,hasProsOrCons:ve,onPrimaryButtonClick:de}),[d,F,v,g,k,se,P,Q,O,Z,re,j,R,te,le,ve,de]),Se=f.useMemo(()=>({setItemDetailsOpen:ue=>m({type:"setItemDetailsOpen",open:ue}),setSelectedImageIndex:ue=>m({type:"setSelectedImageIndex",index:ue}),setImageGalleryOpen:ue=>m({type:"setImageGalleryOpen",open:ue}),setTryOnImageUrl:ue=>m({type:"setTryOnImageUrl",url:ue}),setIsGeneratingTryOn:ue=>m({type:"setIsGeneratingTryOn",isGenerating:ue})}),[m]),De=f.useCallback(()=>{Se.setItemDetailsOpen(!1)},[Se]),Ne=f.useCallback(()=>{Se.setItemDetailsOpen(!1),y(!0)},[Se,y]),Pe=f.useCallback(()=>{Se.setItemDetailsOpen(!1)},[Se]),dt=f.useCallback(()=>{y(!1)},[y]),et=f.useCallback(ue=>{Se.setSelectedImageIndex(ue),N||requestAnimationFrame(()=>{Se.setImageGalleryOpen(!0)})},[Se,N]),Et=f.useCallback(()=>{Se.setImageGalleryOpen(!1)},[Se]);return l.jsx(N_e.Provider,{value:Ae,children:l.jsxs(A_e.Provider,{value:Se,children:[o,l.jsx(ZSt,{isOpen:d.itemDetailsOpen,onClose:De,onShopifyButtonClick:Ne,inFlight:n,onBuyWithProButtonClick:Pe,item:t,canTryOn:i,menuItems:ce}),l.jsx(JSt,{open:g,onOptionSelect:Y,onQuantityIncrement:W,onQuantityDecrement:H,onClose:dt,quantity:h,item:t,selectedVariant:v,handleBuyClick:$,selectedImageIndex:d.selectedImageIndex,handleImageClick:et,images:O}),l.jsx(UF,{title:t.name,mainImageIndex:d.selectedImageIndex,isOpen:d.imageGalleryOpen,images:L,onClose:Et})]})})});P_e.displayName="ShoppingWidgetProvider";const sCt=({enabled:e,reason:t})=>{const{data:n,isPending:r,refetch:s}=Ke({queryKey:["create_firmly_session"],queryFn:async()=>wZe({reason:t}),enabled:e});return f.useMemo(()=>({createFirmlySessionData:n,isPending:r,refetch:s}),[n,r,s])},R_e=A.memo(({contextUUID:e,entryUUID:t,item:n,inFlight:r,innerRef:s,className:a,showProsCons:o=!0,context:i})=>{const{result:{answer_modes:c}}=wn(),u=f.useMemo(()=>c.find(m=>m.answer_mode_type===Zt.SHOPPING)?.shopping_config?.can_try_on??!1,[c]);return l.jsx(P_e,{contextUUID:e,item:n,inFlight:r,entryUUID:t,canTryOn:u,children:l.jsx(I_e,{item:n,className:a,contextUUID:e,entryUUID:t,inFlight:r,innerRef:s,showProsCons:o,context:i})})});R_e.displayName="ShoppingWidgetDense";const I_e=A.memo(({item:e,className:t,contextUUID:n,entryUUID:r,innerRef:s,showProsCons:a,context:o})=>{const i="widget-inner",{inViewRef:c,shouldShowBuyWithPro:u,carouselImages:d,badgeText:m,selectedVariant:h,reviewSummaryLoading:p,hasProsOrCons:g}=nCt(),{setItemDetailsOpen:y}=rCt(),{isMobileStyle:v}=Ce(),{trackEvent:x}=Te(),b=f.useCallback(()=>{y(!0),x("shopping card body clicked",{productId:e.id,productURL:e.url,contextUUID:n??"",client:e.client}),o==="answersMode"&&x("answer mode tab item selected",{answerMode:"shopping",entryUUID:r??"",contextUUID:n??"",itemID:e.id})},[o,n,r,e.client,e.id,e.url,y,x]);sCt({enabled:e.client==="firmly",reason:i});const _=f.useCallback(()=>{b()},[b]);return l.jsx(Jbe,{id:e.id,entityVariant:"dense-card",className:B("relative !p-0",t),children:l.jsxs(z,{as:"button","data-widget-id":e.id,ref:ufe([s,c]),className:B("group/root gap-sm md:gap-md flex cursor-pointer flex-col p-[10px] duration-150"),onClick:_,children:[l.jsxs("div",{className:B("md:gap-md flex flex-1 items-start gap-[12px]",{"md:items-center":!a||!g,"md:items-start":a&&g}),children:[e.image_url&&l.jsx("div",{className:"border-subtlest size-[88px] shrink-0 rounded-lg border bg-white md:size-28 dark:border-0",children:l.jsx(i_e,{images:d.map(w=>w.src),className:"size-full rounded-lg bg-white",badgeText:m??void 0})}),l.jsxs("div",{className:"gap-xs flex flex-1 flex-col",children:[l.jsx("div",{className:"gap-xs flex items-start justify-between",children:l.jsxs("div",{className:"gap-xs flex flex-col",children:[e.merchant_info&&l.jsx(C_e,{merchantName:e.merchant,merchantDomain:e.merchant_info.merchant_domain,itemUrl:e.url,className:"md:mb-xs"}),u&&l.jsx("div",{className:"border-super/10 md:right-sm md:top-sm bg-super/10 md:px-sm md:py-xs absolute right-0 top-0 rounded-bl rounded-tr-[11px] border border-r-0 border-t-0 px-[6px] py-0.5 duration-150 md:rounded md:rounded-tr-[6px] md:border-r md:border-t",children:l.jsx(NF,{})}),l.jsx(D,{variant:v?"smallBold":"baseSemi",className:"line-clamp-2 text-pretty text-left leading-tight",children:e.name}),l.jsxs("div",{className:"gap-sm flex items-center",children:[l.jsx(M_e,{textVariant:v?"tiny":void 0,comparePrice:h?.compare_at_price??void 0,price:e.price,size:"small"}),u&&l.jsx(Abe,{className:"inline-flex"})]}),typeof e.rating=="number"&&l.jsx(L1,{reviewCount:e.num_reviews,rating:e.rating,size:"xs",variant:"truncated",textVariant:v?"tiny":void 0})]})}),!v&&g&&a&&l.jsx(Ln,{active:p,className:"-ml-xs mt-1",children:l.jsx(x0,{pros:e.review_summary?.pros_detailed??ce,cons:e.review_summary?.cons_detailed??ce,loading:p,id:e.id})})]})]}),v&&g&&a&&l.jsx(x0,{pros:e.review_summary?.pros_detailed??ce,cons:e.review_summary?.cons_detailed??ce,loading:p,className:"mt-2",id:e.id})]})})});I_e.displayName="WidgetInner";const aCt=ge(async()=>{const{ShoppingDetailsModal:e}=await oe(async()=>{const{ShoppingDetailsModal:t}=await import("./ShoppingDetailsModal-zfS74Kzj.js");return{ShoppingDetailsModal:t}},__vite__mapDeps([112,1,2,113,3,53,49,4,114,115,116,117,118,119,120,121,55,5]));return{default:e}}),oCt=ge(async()=>{const{ShoppingViewMoreModal:e}=await oe(async()=>{const{ShoppingViewMoreModal:t}=await import("./ShoppingViewMoreModal-hyRDqkxx.js");return{ShoppingViewMoreModal:t}},__vite__mapDeps([124,1,2,3,123,53,50,4,113,49,114,115,116,117,118,119,120,121,125,5,126]));return{default:e}}),iCt=A.memo(({data:e,contextUUID:t,entryUUID:n,entryTitle:r,title:s,icon:a,menuItemFn:o,innerRef:i,isEntryInFlight:c,entityVariant:u,includeViewAll:d,className:m,groupClassName:h,entityClassName:p,loading:g,textLoading:y,onRemoveResults:v,intentTier:x=c2.HIGH})=>{const{$t:b}=X(),{entityRefs:_}=kF(),{viewMoreOpen:w,setViewMoreOpen:S}=SSt(),[C,E]=f.useState(null),{trackEvent:M}=Te(),T=f.useCallback(()=>{S(!0),n&&M("view all clicked",{entryUUID:n,src:"button"})},[n,S,M]),I=f.useMemo(()=>{const R=[],k=[],O=[];return e.forEach(L=>{const F=eg(L);if(!F)return;const U=F.object;if(U==="ShopifyWidget")R.push(L),k.push(F),O.push(F.images[0]);else if(U==="PlaceWidget"&&(R.push(L),k.push(F),F.images?.[0])){const V=F.images[0];O.push({src:V,variants:[]})}}),{widgetResults:R,widgets:k,images:O}},[e]),j=f.useCallback(R=>{E(R)},[]),N=f.useCallback(()=>S(!1),[S]),P=f.useCallback(()=>E(null),[]);return l.jsxs(l.Fragment,{children:[l.jsxs(_e.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2,ease:Jn},ref:i,className:B("gap-sm relative isolate flex flex-col",h),children:[s&&l.jsxs("div",{className:"mt-md flex items-end justify-between",children:[l.jsx(Mbe,{icon:a,title:s,loading:g,intentTier:x}),l.jsx("div",{className:"gap-sm flex items-center",children:l.jsxs(st,{mode:"popLayout",initial:!1,children:[d&&!g&&l.jsx(_e.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2,ease:$a},children:l.jsx(ye,{text:b({defaultMessage:"View All",id:"wbcwKddwLa"}),variant:"border",size:"tiny",pill:!0,onClick:T})},"view-all-button"),!g&&v&&l.jsx(ye,{variant:"border",size:"tiny",pill:!0,icon:Xt,onClick:v,toolTip:b({defaultMessage:"Remove results",id:"eLqO1aEzzN"})},"remove-results-button")]})})]}),y?l.jsx(Ybe,{intentTier:x}):x===c2.MEDIUM?l.jsx(O_e,{validatedWidgets:I,className:m,contextUUID:t,onItemClick:j,inFlight:c}):l.jsx(j_e,{validatedWidgets:I,className:m,menuItemFn:o,contextUUID:t,entryUUID:n,isEntryInFlight:c,entityRefs:_,entityVariant:u,entityClassName:p,includeViewAll:d,onClickViewAll:T})]}),n&&l.jsxs(l.Fragment,{children:[C&&l.jsx(aCt,{isOpen:C!==null,onClose:P,item:C,onShopifyButtonClick:Rn,onBuyWithProButtonClick:Rn,inFlight:c,menuItems:ce}),l.jsx(oCt,{open:w,onClose:N,entryUUID:n,title:r??"",initialResults:I.widgetResults.filter(R=>"meta_data"in R)})]})]})});iCt.displayName="EntityGroup";const j_e=A.memo(({validatedWidgets:e,className:t,menuItemFn:n,contextUUID:r,entryUUID:s,isEntryInFlight:a,entityRefs:o,entityClassName:i,includeViewAll:c,onClickViewAll:u})=>l.jsxs("div",{className:B("gap-sm flex flex-col",t),children:[e.widgetResults.map((d,m)=>{const h=n?n(d):void 0,p=e.widgets[m];return Kr(p).with({object:"ShopifyWidget"},g=>l.jsx(R_e,{item:g,contextUUID:r,entryUUID:s,innerRef:o[g.id],inFlight:a,className:i},g.id)).with({object:"PlaceWidget"},g=>l.jsx(w_e,{place:g,contextUUID:r,entryUUID:s,menuItems:h,inFlight:a,className:i},g.id)).otherwise(()=>null)}),c&&l.jsx(Kbe,{onClick:u,disabled:a,images:e.images})]}));j_e.displayName="HighIntentWidgetGroup";const O_e=A.memo(({validatedWidgets:e,className:t,contextUUID:n,onItemClick:r,inFlight:s})=>{const{isMobileStyle:a}=Ce();return l.jsx("div",{className:B("gap-md flex flex-col",t),children:l.jsx(zbe,{contextUUID:n,widgets:e.widgetResults,onItemClick:r,maxItems:a?void 0:4,includeProCons:!0,inFlight:s})})});O_e.displayName="MediumIntentWidgetGroup";const lCt=(e,t)=>e.concat(t).reduce((r,s)=>{const a=eg(s);if(!a)return r;const o=a.object;return(o==="ShopifyWidget"||o==="PlaceWidget")&&(r[o]||(r[o]=[]),r[o].push(s)),r},{}),cCt=e=>{const t=eg(e);if(t)switch(t.object){case"ShopifyWidget":return!0;default:return!1}return!1},L_e=["GenericFallbackWidget"],uCt=(e,t)=>{if(!e)return;const n=e.filter(r=>r.plan_block&&r.intended_usage=="plan").map(r=>r.plan_block);if(n&&n.length>0){const r=[];let s=!1;for(const a of n){for(const o of a?.goals??[])o.description!==null&&(r.length==0||r[r.length-1].final?r.push({...o}):(r[r.length-1].description+=o.description,r[r.length-1].final=o.final));a?.final&&(s=!0)}if(r.length>0)return{goals:r,final:s,channel_uuid:"",comprehensive_mode:!1}}return t},dCt=e=>e.blocks??ce,fCt=e=>{const t=e.filter(s=>s.plan_block&&s.intended_usage=="pro_search_steps").map(s=>s.plan_block),n={};for(let s=0;s<t.length;s++)n[t[s].steps[0].uuid]=s;return t.filter((s,a)=>n[s.steps[0].uuid]===a).map(s=>s.steps.map(a=>({step_type:a.step_type,uuid:a.uuid??"",content:a?.initial_query_content??a?.attachment_content??a?.terminate_content??a?.search_web_content??a?.web_results_content??a?.code_content??a?.table_status_content??a?.entropy_request_content??a?.thought_content??a?.browser_search_content??a?.browser_open_tab_content??a?.browser_open_tab_results_content??a?.url_navigate_content??a?.browser_get_site_content_content??a?.user_clarification_content??a?.browser_get_history_summary_content??a?.browser_get_open_tab_content_content??a?.read_calendar_content??a?.read_calendar_response_content??a?.read_gmail_content??a?.read_gmail_response_content??a?.update_calendar_content??a?.generate_image_content??a?.generate_image_results_content??a?.generate_video_content??a?.generate_video_results_content??a?.search_tabs_content??a?.search_tabs_results_content??a?.create_app_results_content??a?.browser_close_tabs_content??a?.browser_close_tabs_results_content??a?.update_calendar_response_content??a?.browser_group_tabs_content??a?.browser_group_tabs_results_content??a?.create_chart_content??a?.get_url_content_content??a?.create_client_app_content??a?.get_user_info_content??a?.get_user_info_response_content??a?.get_free_busy_content??a?.get_free_busy_response_content??a?.send_gmail_content??a?.send_gmail_response_content??a?.browser_ungroup_content??a?.browser_search_tab_groups_content??a?.browser_search_tab_groups_result_content??a?.search_browser_content??a?.search_browser_results_content??a?.clarifying_questions_content??a?.clarifying_questions_output_content??a?.gmail_gcal_agent_content??a?.gmail_gcal_agent_response_content??a?.mcp_tool_input_content??a?.mcp_tool_output_content??a?.blocking_clarifying_questions_content??a?.create_tasks_content??a?.create_tasks_response_content??a?.flights_search_content??a?.flights_booking_content??a?.flights_search_response_content??a?.flights_booking_response_content??a?.flights_agent_content??{},assets:a.assets}))).flat()},mCt=e=>e?.filter(t=>t.reasoning_plan_block&&t.intended_usage==="reasoning_plan").map(t=>t.reasoning_plan_block),hCt=e=>{let t=!1;if(e&&e.length>0){const n=new Map;for(const a of e){if(a.goals){for(const o of a.goals)if(o.id)if(n.has(o.id)){const i=n.get(o.id);i.description+=o.description,n.set(o.id,i)}else n.set(o.id,{...o})}t=a.progress==="DONE"}const r=Array.from(n.values()),s=e.flatMap(a=>a.web_results??ce);return{goals:r,web_results:s,final:t}}};function pCt(e){const t={},n=[];return e?.forEach(r=>{if(r.widget_block){const s=t[r.intended_usage]??n.length;t[r.intended_usage]=s,n[s]=aqe(n[s],r.widget_block)}}),n}function gCt(e){return(e?.filter(t=>t.media_block).flatMap(t=>t.media_block.media_items)??[]).filter(t=>!t.sponsored_uuid)}function yCt(e){return e?.filter(t=>t.media_block).flatMap(t=>t.media_block.generated_media_items)??[]}function vCt(e=ce){return e.reduce((t,n)=>{if(n.is_code_interpreter&&n.is_image)t.codeInterpreterImages.push(n);else{const r=n.meta_data?.source==="quartr"?{...n,snippet:""}:n;t.webResultsStandard.push(r)}return t},{webResultsStandard:[],codeInterpreterImages:[]})}function xCt(e){return e?.flatMap(t=>t.inline_entity_block?.knowledge_card_block?t.inline_entity_block.knowledge_card_block.knowledge_cards:t.knowledge_card_block?t.knowledge_card_block.knowledge_cards:[])??[]}function bCt(e){return e??ce}function _Ct(e){return e?.filter(t=>t.citation_block).flatMap(t=>t.citation_block.citations)??ce}function wCt(e){const t=e?.find(n=>n?.inline_entity_block?.finance_inline_block&&n.intended_usage==="answer_finance_widget")?.inline_entity_block?.finance_inline_block;if(t!==void 0)return{object:"FinanceWidget",data:t.data_json.map(n=>JSON.parse(n))}}function SCt(e){const t=e?.map(s=>s.widget_block)?.find(s=>s?.widget_type==="sports");if(!t?.sports_widget_block?.data)return;const r=t.sports_widget_block.data;switch(r.object){case"SportsEventsWidget":return r;case"SportsIndvScheduleWidget":return r;case"SportsStandingsWidget":return r;case"SportsIndvEventsWidget":return r;default:return}}function CCt(e){if(!e)return;const t=e?.find(n=>n.widget_block?.search_result_widget_block?.metadata?.object==="WeatherWidget");if(!(!t||!t.widget_block?.search_result_widget_block))return t.widget_block.search_result_widget_block.metadata}function ECt(e){if(!e)return;const t=e?.find(n=>n.widget_block?.search_result_widget_block?.metadata?.object==="TimeWidget");if(!(!t||!t.widget_block?.search_result_widget_block))return t.widget_block.search_result_widget_block.metadata}function MCt(e){if(!e)return;const t=e?.find(r=>r.widget_block?.search_result_widget_block?.metadata?.object==="TimerWidget");return!t||!t.widget_block?.search_result_widget_block?void 0:t.widget_block.search_result_widget_block.metadata}function TCt(e){if(!e)return;const t=e?.find(n=>n.widget_block?.search_result_widget_block?.metadata?.object==="CalculatorWidget");if(!(!t||!t.widget_block?.search_result_widget_block))return t.widget_block.search_result_widget_block.metadata}function kCt(e,t){return e&&e.length>0?e.map(n=>({name:n.widget_type||"",url:"",snippet:"",timestamp:"",meta_data:{object:n.widget_type||"unknown",...n},is_attachment:!1,is_image:!1,is_code_interpreter:!1,is_knowledge_card:!1,is_navigational:!1,is_widget:!0,sitelinks:[],inline_entity_id:""})):t||[]}function NCt(e){const t=e.find(r=>r?.meta_data?.object==="TableWidget");return t?t.meta_data.search_results:ce}function ACt(e){return e.filter(t=>L_e.includes(t?.meta_data?.object))}function PCt(e){return e.filter(t=>!L_e.includes(t?.meta_data?.object))}function RCt(e){const t=e?.find(n=>n.widget_block?.search_result_widget_block?.metadata?.object==="TaskWidget");if(!(!t||!t.widget_block?.search_result_widget_block))return t.widget_block.search_result_widget_block.metadata}function ICt(e){if(!e)return;const t=e?.find(n=>n.widget_block?.search_result_widget_block?.metadata?.object==="FlightStatusWidget");if(!(!t||!t.widget_block?.search_result_widget_block))return t.widget_block.search_result_widget_block.metadata}function jCt(e){if(!e)return;const t=e?.find(r=>r.widget_block?.search_result_widget_block?.metadata?.object==="CurrencyExchangeWidget");return!t||!t.widget_block?.search_result_widget_block?void 0:t.widget_block.search_result_widget_block.metadata}function OCt(e){if(!e?.length)return[];const t=[];return e.forEach(n=>{n.intended_usage==="pro_search_steps"&&n.plan_block?.steps&&n.plan_block.steps.forEach(r=>{r.clarifying_questions_output_content?.clarification&&t.push(r.clarifying_questions_output_content.clarification)})}),t}function LCt(e){return e?e.find(n=>n.intended_usage==="refinement_filters")?.refinement_filters_block?.refinement_filters:void 0}const Fr=e=>e.result,_r=St.makeSelector(e=>dCt(e(Fr))),DCt=St.makeSelector(e=>e(Fr).mode),BF=St.makeSelector(e=>e(Fr).display_model),FCt=St.makeSelector(e=>!!e(Fr).is_pro_reasoning_mode),D_e=St.makeSelector(e=>e(Fr).search_implementation_mode),VF=St.makeSelector(e=>an.isStatusFailed(e(Fr))),UCt=St.makeSelector(e=>an.isStatusPending(e(Fr))),BCt=St.makeSelector(e=>an.isStatusBlocked(e(Fr))),VCt=St.makeSelector(e=>e(Fr).plan),F_e=St.makeSelector(e=>e(Fr).widget_data??ce),tM=St.makeSelector(e=>an.parseAskTextField(e(Fr))??void 0),U_e=St.makeSelector(e=>an.isStatusPending(e(Fr))),$Ct=St.makeSelector(e=>TXe(e(Fr))),B_e=St.makeSelector(e=>e(Fr).expect_search_results),sj=St.makeSelector(e=>{const t=e(tM),n=an.isStatusCompleted(e(Fr));return t?an.hasAnswer(t,n):!1}),V_e=St.makeSelector(e=>e(W_e).length>0),Bw=St.makeSelector(e=>fCt(e(_r))),$F=St.makeSelector(e=>uCt(e(_r),e(VCt))),WCt=St.makeSelector(e=>mCt(e(_r))),aj=St.makeSelector(e=>hCt(e(WCt))),WF=St.makeSelector(e=>xr(e(BF))),HCt=St.makeSelector(e=>{const t=e(WF),n=e(Fr),r=an.parseStructuredAnswerBlocks(n);return r!==null&&r.some(s=>s.intended_usage==="answer_generated_image"||s.intended_usage==="answer_generated_video")&&!r.some(s=>!!s.markdown_block?.answer||!!s.markdown_block?.chunks)&&t===ae.SEARCH}),$_e=St.makeSelector(e=>pCt(e(_r))),W_e=St.makeSelector(e=>vCt(e(tM)?.web_results).webResultsStandard),H_e=St.makeSelector(e=>CCt(e(_r))),z_e=St.makeSelector(e=>ECt(e(_r))),G_e=St.makeSelector(e=>MCt(e(_r))),q_e=St.makeSelector(e=>jCt(e(_r))),K_e=St.makeSelector(e=>TCt(e(_r))),Y_e=St.makeSelector(e=>ICt(e(_r))),nM=St.makeSelector(e=>kCt(e($_e),e(F_e))),zCt=St.makeSelector(e=>kXe(e(_r),e(BF),e(Bw))),GCt=St.makeSelector(e=>e(tM)?.answer==="Answer skipped."||e(_r).some(t=>t.markdown_block?.answer==="Answer skipped.")),qCt=St.makeSelector(e=>e(DCt)===Pm.COPILOT||e(Bw)!=null&&e(Bw).length>0),KCt=St.makeSelector(e=>e(VF)?ce:gCt(e(_r))),YCt=St.makeSelector(e=>e(VF)?ce:yCt(e(_r))),QCt=St.makeSelector(e=>{const t=e($F);return e(D_e)==="fast"||!!t&&t.goals.length===1&&t.goals[0].description==="Searching the web"}),XCt=St.makeSelector(e=>e(Fr).attachment_processing_progress??ce),Q_e=St.makeSelector(e=>!!e(XCt).length),X_e=St.makeSelector(e=>e(Fr).search_focus==="writing"),Z_e=St.makeSelector(e=>{const t=e(U_e),n=e(B_e),r=e(X_e);return t&&n!=="false"&&!r}),ZCt=St.makeSelector(e=>{const t=e(V_e),n=e(Z_e);return t||n}),JCt=St.makeSelector(e=>e(BF)===fe.O3_PRO&&!e(sj)?!0:e(QCt)&&!e(aj)?!1:!!(!e(sj)&&(e($F)||e(aj)||e(WF)!==ae.SEARCH||e(D_e)==="multi_step"||e(Q_e)))),eEt=St.makeSelector(e=>xCt(e(_r))),tEt=St.makeSelector(e=>bCt(e(Fr).related_query_items)),nEt=St.makeSelector(e=>_Ct(e(_r))),J_e=St.makeSelector(e=>wCt(e(_r))),e2e=St.makeSelector(e=>SCt(e(_r))),t2e=St.makeSelector(e=>NCt(e(nM))),rEt=St.makeSelector(e=>ACt(e(nM))),sEt=St.makeSelector(e=>PCt(e(nM))),aEt=St.makeSelector(e=>lCt(e(nM),e($_e))),oEt=St.makeSelector(e=>[...e(W_e),...e(t2e)]),iEt=St.makeSelector(e=>RCt(e(_r))),lEt=St.makeSelector(e=>{const t=e(e2e),n=e(J_e),r=e(H_e),s=e(z_e),a=e(K_e),o=e(Y_e),i=e(G_e),c=e(q_e);return!!(t||n||r||s||a||o||i||c)}),cEt=St.makeSelector(e=>OCt(e(_r))),uEt=St.makeSelector(e=>LCt(e(_r))),n2e=e=>{const{idx:t,result:n,inFlight:r,isLastResult:s,isFirstResult:a,scrollToListItem:o,submitQuery:i,pendingClarifications:c=[]}=e,u=cEt(e),d=n.backend_uuid?c.filter(h=>h.entryUUID===n.backend_uuid).map(h=>h.content):[],m=Array.from(new Set([...u,...d]));return{idx:t,result:n,inFlight:r,isLastResult:s,isFirstResult:a,scrollToListItem:o,submitQuery:i,isPending:UCt(e),isBlocked:BCt(e),isFinalStep:zCt(e),isFailed:VF(e),isProReasoningMode:FCt(e),widgetData:F_e(e),response:tM(e),isEntryInFlight:U_e(e),hasLLMToken:$Ct(e),isAnswerSkipped:GCt(e),expectWebResults:B_e(e),steps:Bw(e),researchPlan:$F(e),reasoningPlan:aj(e),searchMode:WF(e),hasMediaOnlyLayout:HCt(e),hasAnswer:sj(e),hasWebResults:V_e(e),weatherWidgetData:H_e(e),timeWidgetData:z_e(e),timerWidgetData:G_e(e),calculatorWidgetData:K_e(e),currencyExchangeWidgetData:q_e(e),flightStatusWidgetData:Y_e(e),isCopilot:qCt(e),mediaItems:KCt(e),generatedMediaItems:YCt(e),hasPendingFiles:Q_e(e),showAgentWorkflow:JCt(e),knowledgeCards:eEt(e),relatedQueryItems:tEt(e),webResultCitations:nEt(e),financeWidgetData:J_e(e),sportsWidgetData:e2e(e),tableWebResults:t2e(e),highPriorityWidgets:rEt(e),lowPriorityWidgets:sEt(e),groupedEntityWidgets:aEt(e),webResults:oEt(e),taskWidgetData:iEt(e),hasFastWidget:lEt(e),userClarifications:m,refinementFilters:uEt(e),focusIsWriting:X_e(e),expectSearchResults:Z_e(e),hasSources:ZCt(e)}},dEt=e=>yo()((n,r)=>({editQueryValue:e.result?.query_str??"",isEditingQuery:!1,isStatusUpdaterOpen:!1,wasStatusUpdaterManuallyOpened:!1,selectedRefinementQuery:null,...n2e(e),actions:{setEditQueryValue:s=>n({editQueryValue:s}),setIsEditingQuery:s=>n({isEditingQuery:s}),setStatusUpdaterOpen:s=>n({isStatusUpdaterOpen:s}),setWasStatusUpdaterManuallyOpened:s=>n({wasStatusUpdaterManuallyOpened:s}),setSelectedRefinementQuery:s=>n({selectedRefinementQuery:s}),handleSourcesCuration:s=>{r().result?.frontend_context_uuid&&(r().result?.backend_uuid&&r().scrollToListItem?.(r().result.backend_uuid,{smooth:!0}),r().submitQuery({existingEntryUUID:r().result?.backend_uuid??void 0,newFrontendContextUUID:null,existingFrontendContextUUID:r().result?.frontend_context_uuid,deletedUrls:s,rawQuery:r().result?.query_str??"",existingUuid:r().result?.uuid??void 0,collection:null,promptSource:"user",querySource:"citation_modal"}))}}})),{Context:fEt,useTrackedState:mEt}=Y0("ThreadEntry"),r2e=A.memo(({idx:e,children:t,result:n,inFlight:r,isLastResult:s,isFirstResult:a,scrollToListItem:o,submitQuery:i})=>{const c=f.useRef(r),{trackEvent:u}=Ep(),{pendingClarifications:d}=Whe(),[m]=f.useState(()=>dEt({idx:e,result:n,inFlight:r,isLastResult:s,isFirstResult:a,scrollToListItem:o,submitQuery:i,pendingClarifications:d})),p=m(g=>g.isFinalStep);return f.useEffect(()=>{const g=()=>{const x=setTimeout(()=>{u("engaged",{})},1e4);return()=>{clearTimeout(x)}},y=a&&s,v=c.current&&!r;if(y&&v&&p)return g();c.current=r},[r,p,s,a,u]),f.useEffect(()=>{m.setState(n2e({idx:e,result:n,inFlight:r,isLastResult:s,isFirstResult:a,scrollToListItem:o,submitQuery:i,pendingClarifications:d}))},[e,n,r,s,a,o,i,d,m]),l.jsx(fEt.Provider,{value:m,children:t})});r2e.displayName="ThreadEntryProvider";const wn=mEt;function rM(){const{result:{frontend_uuid:e,frontend_context_uuid:t}}=wn(),n=YL(),r=n(e??"")??n(t);return f.useCallback((s,a)=>r?.addTiming(s,a),[r])}function s2e(){const{result:{frontend_uuid:e,frontend_context_uuid:t}}=wn(),n=YL(),r=n(e??"")??n(t);return f.useCallback((s,a)=>r?.addTimingOnce(s,a),[r])}const hEt=({widgetType:e,widgetName:t,widgetSize:n="full"})=>{const{trackEvent:r}=Te(),{result:{backend_uuid:s,frontend_context_uuid:a}}=wn(),o=f.useMemo(()=>({widgetType:e,widgetName:t,widgetLocation:"thread",widgetSize:n,position:0,frontendUUID:a,entryUUID:s}),[e,t,s,a,n]),i=f.useCallback(()=>{r("widget viewed",o)},[r,o]),c=f.useCallback(()=>{r("widget hovered",o)},[r,o]),u=f.useCallback(d=>{r("widget selected",{...o,widgetCTA:{type:"internal_url",permalink:d}})},[r,o]);return f.useMemo(()=>({widgetViewed:i,widgetHovered:c,widgetSelected:u}),[i,c,u])},di=A.memo(e=>{const{children:t,...n}=e,{widgetSelected:r,widgetViewed:s,widgetHovered:a}=hEt(n),o=f.useRef({hovered:!1,viewed:!1}),{ref:i,isIntersecting:c}=gme({threshold:.5,freezeOnceVisible:!0});f.useEffect(()=>{c&&!o.current.viewed&&(s(),o.current.viewed=!0)},[c,s]);const u=f.useCallback(()=>{o.current.hovered||(a(),o.current.hovered=!0)},[a]);return l.jsx("div",{ref:i,onMouseEnter:u,children:typeof t=="function"?t({widgetSelected:r}):t})});di.displayName="WithThreadWidgetInteractionEvents";const a2e=A.memo(e=>{const{data:t}=e,{menuItems:n}=Jp();return t?.result==null?null:l.jsx(di,{widgetType:"calculator",widgetName:"calculator",widgetSize:"full",children:l.jsx(z,{className:"flex",children:l.jsxs("div",{className:"flex w-full items-center",children:[l.jsx(D,{color:"light",variant:"smallBold",children:l.jsx(be,{className:"mt-two text-2xl leading-none",icon:PTe,size:"sm"})}),l.jsx(D,{children:l.jsx(z,{className:"pl-md font-mono text-2xl",children:OKe(t.result)})}),n&&n.length>0&&l.jsx("div",{className:"flex grow items-start justify-end",children:l.jsx(Wn.Menu,{menuItems:n})})]})})})});a2e.displayName="CalculatorWidget";function lc(e){return Array.isArray?Array.isArray(e):l2e(e)==="[object Array]"}function pEt(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function gEt(e){return e==null?"":pEt(e)}function Fi(e){return typeof e=="string"}function o2e(e){return typeof e=="number"}function yEt(e){return e===!0||e===!1||vEt(e)&&l2e(e)=="[object Boolean]"}function i2e(e){return typeof e=="object"}function vEt(e){return i2e(e)&&e!==null}function ja(e){return e!=null}function A5(e){return!e.trim().length}function l2e(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const xEt="Incorrect 'index' type",bEt=e=>`Invalid value for key ${e}`,_Et=e=>`Pattern length exceeds max of ${e}.`,wEt=e=>`Missing ${e} property in key`,SEt=e=>`Property 'weight' in key '${e}' must be a positive integer`,dJ=Object.prototype.hasOwnProperty;class CEt{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(r=>{let s=c2e(r);this._keys.push(s),this._keyMap[s.id]=s,n+=s.weight}),this._keys.forEach(r=>{r.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function c2e(e){let t=null,n=null,r=null,s=1,a=null;if(Fi(e)||lc(e))r=e,t=fJ(e),n=oj(e);else{if(!dJ.call(e,"name"))throw new Error(wEt("name"));const o=e.name;if(r=o,dJ.call(e,"weight")&&(s=e.weight,s<=0))throw new Error(SEt(o));t=fJ(o),n=oj(o),a=e.getFn}return{path:t,id:n,weight:s,src:r,getFn:a}}function fJ(e){return lc(e)?e:e.split(".")}function oj(e){return lc(e)?e.join("."):e}function EEt(e,t){let n=[],r=!1;const s=(a,o,i)=>{if(ja(a))if(!o[i])n.push(a);else{let c=o[i];const u=a[c];if(!ja(u))return;if(i===o.length-1&&(Fi(u)||o2e(u)||yEt(u)))n.push(gEt(u));else if(lc(u)){r=!0;for(let d=0,m=u.length;d<m;d+=1)s(u[d],o,i+1)}else o.length&&s(u,o,i+1)}};return s(e,Fi(t)?t.split("."):t,0),r?n:n[0]}const MEt={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},TEt={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},kEt={location:0,threshold:.6,distance:100},NEt={useExtendedSearch:!1,getFn:EEt,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Dt={...TEt,...MEt,...kEt,...NEt};const AEt=/[^ ]+/g;function PEt(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(s){const a=s.match(AEt).length;if(n.has(a))return n.get(a);const o=1/Math.pow(a,.5*e),i=parseFloat(Math.round(o*r)/r);return n.set(a,i),i},clear(){n.clear()}}}class HF{constructor({getFn:t=Dt.getFn,fieldNormWeight:n=Dt.fieldNormWeight}={}){this.norm=PEt(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Fi(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();Fi(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!ja(t)||A5(t))return;let r={v:t,i:n,n:this.norm.get(t)};this.records.push(r)}_addObject(t,n){let r={i:n,$:{}};this.keys.forEach((s,a)=>{let o=s.getFn?s.getFn(t):this.getFn(t,s.path);if(ja(o)){if(lc(o)){let i=[];const c=[{nestedArrIndex:-1,value:o}];for(;c.length;){const{nestedArrIndex:u,value:d}=c.pop();if(ja(d))if(Fi(d)&&!A5(d)){let m={v:d,i:u,n:this.norm.get(d)};i.push(m)}else lc(d)&&d.forEach((m,h)=>{c.push({nestedArrIndex:h,value:m})})}r.$[a]=i}else if(Fi(o)&&!A5(o)){let i={v:o,n:this.norm.get(o)};r.$[a]=i}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function u2e(e,t,{getFn:n=Dt.getFn,fieldNormWeight:r=Dt.fieldNormWeight}={}){const s=new HF({getFn:n,fieldNormWeight:r});return s.setKeys(e.map(c2e)),s.setSources(t),s.create(),s}function REt(e,{getFn:t=Dt.getFn,fieldNormWeight:n=Dt.fieldNormWeight}={}){const{keys:r,records:s}=e,a=new HF({getFn:t,fieldNormWeight:n});return a.setKeys(r),a.setIndexRecords(s),a}function Ab(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:s=Dt.distance,ignoreLocation:a=Dt.ignoreLocation}={}){const o=t/e.length;if(a)return o;const i=Math.abs(r-n);return s?o+i/s:i?1:o}function IEt(e=[],t=Dt.minMatchCharLength){let n=[],r=-1,s=-1,a=0;for(let o=e.length;a<o;a+=1){let i=e[a];i&&r===-1?r=a:!i&&r!==-1&&(s=a-1,s-r+1>=t&&n.push([r,s]),r=-1)}return e[a-1]&&a-r>=t&&n.push([r,a-1]),n}const yd=32;function jEt(e,t,n,{location:r=Dt.location,distance:s=Dt.distance,threshold:a=Dt.threshold,findAllMatches:o=Dt.findAllMatches,minMatchCharLength:i=Dt.minMatchCharLength,includeMatches:c=Dt.includeMatches,ignoreLocation:u=Dt.ignoreLocation}={}){if(t.length>yd)throw new Error(_Et(yd));const d=t.length,m=e.length,h=Math.max(0,Math.min(r,m));let p=a,g=h;const y=i>1||c,v=y?Array(m):[];let x;for(;(x=e.indexOf(t,g))>-1;){let E=Ab(t,{currentLocation:x,expectedLocation:h,distance:s,ignoreLocation:u});if(p=Math.min(E,p),g=x+d,y){let M=0;for(;M<d;)v[x+M]=1,M+=1}}g=-1;let b=[],_=1,w=d+m;const S=1<<d-1;for(let E=0;E<d;E+=1){let M=0,T=w;for(;M<T;)Ab(t,{errors:E,currentLocation:h+T,expectedLocation:h,distance:s,ignoreLocation:u})<=p?M=T:w=T,T=Math.floor((w-M)/2+M);w=T;let I=Math.max(1,h-T+1),j=o?m:Math.min(h+T,m)+d,N=Array(j+2);N[j+1]=(1<<E)-1;for(let R=j;R>=I;R-=1){let k=R-1,O=n[e.charAt(k)];if(y&&(v[k]=+!!O),N[R]=(N[R+1]<<1|1)&O,E&&(N[R]|=(b[R+1]|b[R])<<1|1|b[R+1]),N[R]&S&&(_=Ab(t,{errors:E,currentLocation:k,expectedLocation:h,distance:s,ignoreLocation:u}),_<=p)){if(p=_,g=k,g<=h)break;I=Math.max(1,2*h-g)}}if(Ab(t,{errors:E+1,currentLocation:h,expectedLocation:h,distance:s,ignoreLocation:u})>p)break;b=N}const C={isMatch:g>=0,score:Math.max(.001,_)};if(y){const E=IEt(v,i);E.length?c&&(C.indices=E):C.isMatch=!1}return C}function OEt(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const s=e.charAt(n);t[s]=(t[s]||0)|1<<r-n-1}return t}class d2e{constructor(t,{location:n=Dt.location,threshold:r=Dt.threshold,distance:s=Dt.distance,includeMatches:a=Dt.includeMatches,findAllMatches:o=Dt.findAllMatches,minMatchCharLength:i=Dt.minMatchCharLength,isCaseSensitive:c=Dt.isCaseSensitive,ignoreLocation:u=Dt.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:s,includeMatches:a,findAllMatches:o,minMatchCharLength:i,isCaseSensitive:c,ignoreLocation:u},this.pattern=c?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const d=(h,p)=>{this.chunks.push({pattern:h,alphabet:OEt(h),startIndex:p})},m=this.pattern.length;if(m>yd){let h=0;const p=m%yd,g=m-p;for(;h<g;)d(this.pattern.substr(h,yd),h),h+=yd;if(p){const y=m-yd;d(this.pattern.substr(y),y)}}else d(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,includeMatches:r}=this.options;if(n||(t=t.toLowerCase()),this.pattern===t){let g={isMatch:!0,score:0};return r&&(g.indices=[[0,t.length-1]]),g}const{location:s,distance:a,threshold:o,findAllMatches:i,minMatchCharLength:c,ignoreLocation:u}=this.options;let d=[],m=0,h=!1;this.chunks.forEach(({pattern:g,alphabet:y,startIndex:v})=>{const{isMatch:x,score:b,indices:_}=jEt(t,g,y,{location:s+v,distance:a,threshold:o,findAllMatches:i,minMatchCharLength:c,includeMatches:r,ignoreLocation:u});x&&(h=!0),m+=b,x&&_&&(d=[...d,..._])});let p={isMatch:h,score:h?m/this.chunks.length:1};return h&&r&&(p.indices=d),p}}class Bu{constructor(t){this.pattern=t}static isMultiMatch(t){return mJ(t,this.multiRegex)}static isSingleMatch(t){return mJ(t,this.singleRegex)}search(){}}function mJ(e,t){const n=e.match(t);return n?n[1]:null}class LEt extends Bu{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class DEt extends Bu{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class FEt extends Bu{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class UEt extends Bu{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class BEt extends Bu{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class VEt extends Bu{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class f2e extends Bu{constructor(t,{location:n=Dt.location,threshold:r=Dt.threshold,distance:s=Dt.distance,includeMatches:a=Dt.includeMatches,findAllMatches:o=Dt.findAllMatches,minMatchCharLength:i=Dt.minMatchCharLength,isCaseSensitive:c=Dt.isCaseSensitive,ignoreLocation:u=Dt.ignoreLocation}={}){super(t),this._bitapSearch=new d2e(t,{location:n,threshold:r,distance:s,includeMatches:a,findAllMatches:o,minMatchCharLength:i,isCaseSensitive:c,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class m2e extends Bu{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,r;const s=[],a=this.pattern.length;for(;(r=t.indexOf(this.pattern,n))>-1;)n=r+a,s.push([r,n-1]);const o=!!s.length;return{isMatch:o,score:o?0:1,indices:s}}}const ij=[LEt,m2e,FEt,UEt,VEt,BEt,DEt,f2e],hJ=ij.length,$Et=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,WEt="|";function HEt(e,t={}){return e.split(WEt).map(n=>{let r=n.trim().split($Et).filter(a=>a&&!!a.trim()),s=[];for(let a=0,o=r.length;a<o;a+=1){const i=r[a];let c=!1,u=-1;for(;!c&&++u<hJ;){const d=ij[u];let m=d.isMultiMatch(i);m&&(s.push(new d(m,t)),c=!0)}if(!c)for(u=-1;++u<hJ;){const d=ij[u];let m=d.isSingleMatch(i);if(m){s.push(new d(m,t));break}}}return s})}const zEt=new Set([f2e.type,m2e.type]);class GEt{constructor(t,{isCaseSensitive:n=Dt.isCaseSensitive,includeMatches:r=Dt.includeMatches,minMatchCharLength:s=Dt.minMatchCharLength,ignoreLocation:a=Dt.ignoreLocation,findAllMatches:o=Dt.findAllMatches,location:i=Dt.location,threshold:c=Dt.threshold,distance:u=Dt.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:r,minMatchCharLength:s,findAllMatches:o,ignoreLocation:a,location:i,threshold:c,distance:u},this.pattern=n?t:t.toLowerCase(),this.query=HEt(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:s}=this.options;t=s?t:t.toLowerCase();let a=0,o=[],i=0;for(let c=0,u=n.length;c<u;c+=1){const d=n[c];o.length=0,a=0;for(let m=0,h=d.length;m<h;m+=1){const p=d[m],{isMatch:g,indices:y,score:v}=p.search(t);if(g){if(a+=1,i+=v,r){const x=p.constructor.type;zEt.has(x)?o=[...o,...y]:o.push(y)}}else{i=0,a=0,o.length=0;break}}if(a){let m={isMatch:!0,score:i/a};return r&&(m.indices=o),m}}return{isMatch:!1,score:1}}}const lj=[];function qEt(...e){lj.push(...e)}function cj(e,t){for(let n=0,r=lj.length;n<r;n+=1){let s=lj[n];if(s.condition(e,t))return new s(e,t)}return new d2e(e,t)}const Vw={AND:"$and",OR:"$or"},uj={PATH:"$path",PATTERN:"$val"},dj=e=>!!(e[Vw.AND]||e[Vw.OR]),KEt=e=>!!e[uj.PATH],YEt=e=>!lc(e)&&i2e(e)&&!dj(e),pJ=e=>({[Vw.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function h2e(e,t,{auto:n=!0}={}){const r=s=>{let a=Object.keys(s);const o=KEt(s);if(!o&&a.length>1&&!dj(s))return r(pJ(s));if(YEt(s)){const c=o?s[uj.PATH]:a[0],u=o?s[uj.PATTERN]:s[c];if(!Fi(u))throw new Error(bEt(c));const d={keyId:oj(c),pattern:u};return n&&(d.searcher=cj(u,t)),d}let i={children:[],operator:a[0]};return a.forEach(c=>{const u=s[c];lc(u)&&u.forEach(d=>{i.children.push(r(d))})}),i};return dj(e)||(e=pJ(e)),r(e)}function QEt(e,{ignoreFieldNorm:t=Dt.ignoreFieldNorm}){e.forEach(n=>{let r=1;n.matches.forEach(({key:s,norm:a,score:o})=>{const i=s?s.weight:null;r*=Math.pow(o===0&&i?Number.EPSILON:o,(i||1)*(t?1:a))}),n.score=r})}function XEt(e,t){const n=e.matches;t.matches=[],ja(n)&&n.forEach(r=>{if(!ja(r.indices)||!r.indices.length)return;const{indices:s,value:a}=r;let o={indices:s,value:a};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),t.matches.push(o)})}function ZEt(e,t){t.score=e.score}function JEt(e,t,{includeMatches:n=Dt.includeMatches,includeScore:r=Dt.includeScore}={}){const s=[];return n&&s.push(XEt),r&&s.push(ZEt),e.map(a=>{const{idx:o}=a,i={item:t[o],refIndex:o};return s.length&&s.forEach(c=>{c(a,i)}),i})}class tg{constructor(t,n={},r){this.options={...Dt,...n},this.options.useExtendedSearch,this._keyStore=new CEt(this.options.keys),this.setCollection(t,r)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof HF))throw new Error(xEt);this._myIndex=n||u2e(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){ja(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let r=0,s=this._docs.length;r<s;r+=1){const a=this._docs[r];t(a,r)&&(this.removeAt(r),r-=1,s-=1,n.push(a))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:r,includeScore:s,shouldSort:a,sortFn:o,ignoreFieldNorm:i}=this.options;let c=Fi(t)?Fi(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return QEt(c,{ignoreFieldNorm:i}),a&&c.sort(o),o2e(n)&&n>-1&&(c=c.slice(0,n)),JEt(c,this._docs,{includeMatches:r,includeScore:s})}_searchStringList(t){const n=cj(t,this.options),{records:r}=this._myIndex,s=[];return r.forEach(({v:a,i:o,n:i})=>{if(!ja(a))return;const{isMatch:c,score:u,indices:d}=n.searchIn(a);c&&s.push({item:a,idx:o,matches:[{score:u,value:a,norm:i,indices:d}]})}),s}_searchLogical(t){const n=h2e(t,this.options),r=(i,c,u)=>{if(!i.children){const{keyId:m,searcher:h}=i,p=this._findMatches({key:this._keyStore.get(m),value:this._myIndex.getValueForItemAtKeyId(c,m),searcher:h});return p&&p.length?[{idx:u,item:c,matches:p}]:[]}const d=[];for(let m=0,h=i.children.length;m<h;m+=1){const p=i.children[m],g=r(p,c,u);if(g.length)d.push(...g);else if(i.operator===Vw.AND)return[]}return d},s=this._myIndex.records,a={},o=[];return s.forEach(({$:i,i:c})=>{if(ja(i)){let u=r(n,i,c);u.length&&(a[c]||(a[c]={idx:c,item:i,matches:[]},o.push(a[c])),u.forEach(({matches:d})=>{a[c].matches.push(...d)}))}}),o}_searchObjectList(t){const n=cj(t,this.options),{keys:r,records:s}=this._myIndex,a=[];return s.forEach(({$:o,i})=>{if(!ja(o))return;let c=[];r.forEach((u,d)=>{c.push(...this._findMatches({key:u,value:o[d],searcher:n}))}),c.length&&a.push({idx:i,item:o,matches:c})}),a}_findMatches({key:t,value:n,searcher:r}){if(!ja(n))return[];let s=[];if(lc(n))n.forEach(({v:a,i:o,n:i})=>{if(!ja(a))return;const{isMatch:c,score:u,indices:d}=r.searchIn(a);c&&s.push({score:u,key:t,value:a,idx:o,norm:i,indices:d})});else{const{v:a,n:o}=n,{isMatch:i,score:c,indices:u}=r.searchIn(a);i&&s.push({score:c,key:t,value:a,norm:o,indices:u})}return s}}tg.version="7.0.0";tg.createIndex=u2e;tg.parseIndex=REt;tg.config=Dt;tg.parseQuery=h2e;qEt(GEt);const fj=[{currencyCode:"AED",type:"fiat",currency:J({defaultMessage:"United Arab Emirates dirham",id:"u/noLkGMVn"}),countryCode:"AE",symbol:"."},{currencyCode:"AFN",type:"fiat",currency:J({defaultMessage:"Afghan afghani",id:"HbCn83pcga"}),countryCode:"AF",symbol:""},{currencyCode:"ALL",type:"fiat",currency:J({defaultMessage:"Albanian lek",id:"/il1Hf7GWO"}),countryCode:"AL",symbol:"L"},{currencyCode:"AMD",type:"fiat",currency:J({defaultMessage:"Armenian dram",id:"Sab4a7TKLH"}),countryCode:"AM",symbol:""},{currencyCode:"ARS",type:"fiat",currency:J({defaultMessage:"Argentine peso",id:"52+/SFD8VZ"}),countryCode:"AR",symbol:"$"},{currencyCode:"AUD",type:"fiat",currency:J({defaultMessage:"Australian dollar",id:"iWILeLEVYR"}),countryCode:"AU",symbol:"$"},{currencyCode:"AWG",type:"fiat",currency:J({defaultMessage:"Aruban florin",id:"BEGfukujzF"}),countryCode:"AW",symbol:""},{currencyCode:"BAM",type:"fiat",currency:J({defaultMessage:"Bosnia and Herzegovina convertible mark",id:"b09sYvQVre"}),countryCode:"BA",symbol:"KM"},{currencyCode:"BBD",type:"fiat",currency:J({defaultMessage:"Barbadian dollar",id:"VlWuwU66Ue"}),countryCode:"BB",symbol:"$"},{currencyCode:"BDT",type:"fiat",currency:J({defaultMessage:"Bangladeshi taka",id:"nzdEshqHWS"}),countryCode:"BD",symbol:""},{currencyCode:"BGN",type:"fiat",currency:J({defaultMessage:"Bulgarian lev",id:"IDTjXBqV4N"}),countryCode:"BG",symbol:""},{currencyCode:"BHD",type:"fiat",currency:J({defaultMessage:"Bahraini dinar",id:"eq8qHJx0kM"}),countryCode:"BH",symbol:".."},{currencyCode:"BIF",type:"fiat",currency:J({defaultMessage:"Burundian franc",id:"o/KpEtmYi4"}),countryCode:"BI",symbol:"FBu"},{currencyCode:"BMD",type:"fiat",currency:J({defaultMessage:"Bermudian dollar",id:"kO0KeiZ+IN"}),countryCode:"BM",symbol:"$"},{currencyCode:"BND",type:"fiat",currency:J({defaultMessage:"Brunei dollar",id:"GRkirfzc48"}),countryCode:"BN",symbol:"$"},{currencyCode:"BOB",type:"fiat",currency:J({defaultMessage:"Bolivian boliviano",id:"l7UUEAhjL1"}),countryCode:"BO",symbol:"Bs."},{currencyCode:"BRL",type:"fiat",currency:J({defaultMessage:"Brazilian real",id:"x+BZGn5rek"}),countryCode:"BR",symbol:"R$"},{currencyCode:"BSD",type:"fiat",currency:J({defaultMessage:"Bahamian dollar",id:"u9nfam/El1"}),countryCode:"BS",symbol:"$"},{currencyCode:"BTN",type:"fiat",currency:J({defaultMessage:"Bhutanese ngultrum",id:"EbzIZvY2C3"}),countryCode:"BT",symbol:"Nu."},{currencyCode:"BWP",type:"fiat",currency:J({defaultMessage:"Botswana pula",id:"TvRjxCQudG"}),countryCode:"BW",symbol:"P"},{currencyCode:"BZD",type:"fiat",currency:J({defaultMessage:"Belize dollar",id:"tnMfFVDwiX"}),countryCode:"BZ",symbol:"$"},{currencyCode:"CAD",type:"fiat",currency:J({defaultMessage:"Canadian dollar",id:"L4ftYFzYiG"}),countryCode:"CA",symbol:"$"},{currencyCode:"CDF",type:"fiat",currency:J({defaultMessage:"Congolese franc",id:"6DNXExdai2"}),countryCode:"CD",symbol:"FC"},{currencyCode:"CHF",type:"fiat",currency:J({defaultMessage:"Swiss franc",id:"113zTX3mKi"}),countryCode:"CH",symbol:"Fr."},{currencyCode:"CLP",type:"fiat",currency:J({defaultMessage:"Chilean peso",id:"tLhKy6Swhn"}),countryCode:"CL",symbol:"$"},{currencyCode:"CNH",type:"fiat",currency:J({defaultMessage:"Chinese yuan (offshore)",id:"wAShedQ5+o"}),countryCode:"CN",symbol:""},{currencyCode:"CNY",type:"fiat",currency:J({defaultMessage:"Chinese yuan",id:"/sleu+8FUs"}),countryCode:"CN",symbol:""},{currencyCode:"COP",type:"fiat",currency:J({defaultMessage:"Colombian peso",id:"KR2NhLe6wO"}),countryCode:"CO",symbol:"$"},{currencyCode:"CRC",type:"fiat",currency:J({defaultMessage:"Costa Rican coln",id:"OLgF3rrfev"}),countryCode:"CR",symbol:""},{currencyCode:"CUP",type:"fiat",currency:J({defaultMessage:"Cuban peso",id:"ua/JslQGFc"}),countryCode:"CU",symbol:"$"},{currencyCode:"CVE",type:"fiat",currency:J({defaultMessage:"Cape Verdean escudo",id:"gg39Xd9NoM"}),countryCode:"CV",symbol:"$"},{currencyCode:"CYP",type:"fiat",currency:J({defaultMessage:"Cypriot pound",id:"xJn7heFKbn"}),countryCode:"CY",symbol:""},{currencyCode:"CZK",type:"fiat",currency:J({defaultMessage:"Czech koruna",id:"xpMdKvcamT"}),countryCode:"CZ",symbol:"K"},{currencyCode:"DJF",type:"fiat",currency:J({defaultMessage:"Djiboutian franc",id:"WtP9AoFz2A"}),countryCode:"DJ",symbol:"Fdj"},{currencyCode:"DKK",type:"fiat",currency:J({defaultMessage:"Danish krone",id:"Xy5G3y8jOw"}),countryCode:"DK",symbol:"kr"},{currencyCode:"DOP",type:"fiat",currency:J({defaultMessage:"Dominican peso",id:"2i/KFaPpw5"}),countryCode:"DO",symbol:"RD$"},{currencyCode:"DZD",type:"fiat",currency:J({defaultMessage:"Algerian dinar",id:"6sTpFM3olk"}),countryCode:"DZ",symbol:""},{currencyCode:"EGP",type:"fiat",currency:J({defaultMessage:"Egyptian pound",id:"PxOcvtceh8"}),countryCode:"EG",symbol:""},{currencyCode:"ETB",type:"fiat",currency:J({defaultMessage:"Ethiopian birr",id:"6VjP5tvzWg"}),countryCode:"ET",symbol:"Br"},{currencyCode:"EUR",type:"fiat",currency:J({defaultMessage:"Euro",id:"Zz6d8XMgGD"}),countryCode:"EU",symbol:""},{currencyCode:"FJD",type:"fiat",currency:J({defaultMessage:"Fijian dollar",id:"w33lAGgTZS"}),countryCode:"FJ",symbol:"$"},{currencyCode:"GBP",type:"fiat",currency:J({defaultMessage:"Pound sterling",id:"uU25lEI6GM"}),countryCode:"GB",symbol:""},{currencyCode:"GEL",type:"fiat",currency:J({defaultMessage:"Georgian lari",id:"m4gS106RpO"}),countryCode:"GE",symbol:""},{currencyCode:"GHS",type:"fiat",currency:J({defaultMessage:"Ghanaian cedi",id:"2k7sXvkoLP"}),countryCode:"GH",symbol:""},{currencyCode:"GMD",type:"fiat",currency:J({defaultMessage:"Gambian dalasi",id:"zT8nD3rOKp"}),countryCode:"GM",symbol:"D"},{currencyCode:"GNF",type:"fiat",currency:J({defaultMessage:"Guinean franc",id:"kZk7wkuU9a"}),countryCode:"GN",symbol:"FG"},{currencyCode:"GTQ",type:"fiat",currency:J({defaultMessage:"Guatemalan quetzal",id:"0eSFsz1h5U"}),countryCode:"GT",symbol:"Q"},{currencyCode:"GYD",type:"fiat",currency:J({defaultMessage:"Guyanese dollar",id:"pvTNSDiMVb"}),countryCode:"GY",symbol:"$"},{currencyCode:"HKD",type:"fiat",currency:J({defaultMessage:"Hong Kong dollar",id:"tSeK2eAo7a"}),countryCode:"HK",symbol:"$"},{currencyCode:"HNL",type:"fiat",currency:J({defaultMessage:"Honduran lempira",id:"u1All4YZ/M"}),countryCode:"HN",symbol:"L"},{currencyCode:"HRK",type:"fiat",currency:J({defaultMessage:"Croatian kuna",id:"m4/bILMdtE"}),countryCode:"HR",symbol:"kn"},{currencyCode:"HTG",type:"fiat",currency:J({defaultMessage:"Haitian gourde",id:"fYPjhPHJw5"}),countryCode:"HT",symbol:"G"},{currencyCode:"HUF",type:"fiat",currency:J({defaultMessage:"Hungarian forint",id:"Bhl6SxOjG0"}),countryCode:"HU",symbol:"Ft"},{currencyCode:"IDR",type:"fiat",currency:J({defaultMessage:"Indonesian rupiah",id:"JnQBDoCEpL"}),countryCode:"ID",symbol:"Rp"},{currencyCode:"ILS",type:"fiat",currency:J({defaultMessage:"Israeli new shekel",id:"IxD6vfIMsj"}),countryCode:"IL",symbol:""},{currencyCode:"INR",type:"fiat",currency:J({defaultMessage:"Indian rupee",id:"XnsufP9pQC"}),countryCode:"IN",symbol:""},{currencyCode:"IQD",type:"fiat",currency:J({defaultMessage:"Iraqi dinar",id:"rmzi7U/4iu"}),countryCode:"IQ",symbol:"."},{currencyCode:"ISK",type:"fiat",currency:J({defaultMessage:"Icelandic krna",id:"+QCFy0sZgh"}),countryCode:"IS",symbol:"kr"},{currencyCode:"JMD",type:"fiat",currency:J({defaultMessage:"Jamaican dollar",id:"EkOwDtWSVs"}),countryCode:"JM",symbol:"J$"},{currencyCode:"JOD",type:"fiat",currency:J({defaultMessage:"Jordanian dinar",id:"B2GvyCUDsS"}),countryCode:"JO",symbol:"."},{currencyCode:"JPY",type:"fiat",currency:J({defaultMessage:"Japanese yen",id:"2PiQsV1fPp"}),countryCode:"JP",symbol:""},{currencyCode:"KES",type:"fiat",currency:J({defaultMessage:"Kenyan shilling",id:"JIjYrchwhv"}),countryCode:"KE",symbol:"KSh"},{currencyCode:"KHR",type:"fiat",currency:J({defaultMessage:"Cambodian riel",id:"KCKOEaCtcY"}),countryCode:"KH",symbol:""},{currencyCode:"KMF",type:"fiat",currency:J({defaultMessage:"Comorian franc",id:"WV9ZQdQeR+"}),countryCode:"KM",symbol:"CF"},{currencyCode:"KRW",type:"fiat",currency:J({defaultMessage:"South Korean won",id:"EiHQBnRax2"}),countryCode:"KR",symbol:""},{currencyCode:"KWD",type:"fiat",currency:J({defaultMessage:"Kuwaiti dinar",id:"fkOQdpZmRV"}),countryCode:"KW",symbol:"."},{currencyCode:"KYD",type:"fiat",currency:J({defaultMessage:"Cayman Islands dollar",id:"RsdrXusNMV"}),countryCode:"KY",symbol:"$"},{currencyCode:"KZT",type:"fiat",currency:J({defaultMessage:"Kazakhstani tenge",id:"2qtVTeGWCE"}),countryCode:"KZ",symbol:""},{currencyCode:"LAK",type:"fiat",currency:J({defaultMessage:"Lao kip",id:"Fgzd1G5Yfn"}),countryCode:"LA",symbol:""},{currencyCode:"LBP",type:"fiat",currency:J({defaultMessage:"Lebanese pound",id:"FGzeEqNQzF"}),countryCode:"LB",symbol:"."},{currencyCode:"LKR",type:"fiat",currency:J({defaultMessage:"Sri Lankan rupee",id:"a4/joWlRVu"}),countryCode:"LK",symbol:"Rs"},{currencyCode:"LRD",type:"fiat",currency:J({defaultMessage:"Liberian dollar",id:"FI1z5I01J6"}),countryCode:"LR",symbol:"$"},{currencyCode:"LSL",type:"fiat",currency:J({defaultMessage:"Lesotho loti",id:"csvFpR0QuR"}),countryCode:"LS",symbol:"L"},{currencyCode:"LTL",type:"fiat",currency:J({defaultMessage:"Lithuanian litas",id:"0eziwi9562"}),countryCode:"LT",symbol:"Lt"},{currencyCode:"LYD",type:"fiat",currency:J({defaultMessage:"Libyan dinar",id:"MHH+Pd33wK"}),countryCode:"LY",symbol:"."},{currencyCode:"MAD",type:"fiat",currency:J({defaultMessage:"Moroccan dirham",id:"ECYUhp5Zzw"}),countryCode:"MA",symbol:".."},{currencyCode:"MDL",type:"fiat",currency:J({defaultMessage:"Moldovan leu",id:"b0q4AtgUSW"}),countryCode:"MD",symbol:"L"},{currencyCode:"MGA",type:"fiat",currency:J({defaultMessage:"Malagasy ariary",id:"7X6Af0dVLl"}),countryCode:"MG",symbol:"Ar"},{currencyCode:"MKD",type:"fiat",currency:J({defaultMessage:"Macedonian denar",id:"RCCw/rBMD7"}),countryCode:"MK",symbol:""},{currencyCode:"MMK",type:"fiat",currency:J({defaultMessage:"Burmese kyat",id:"09O/caoUOd"}),countryCode:"MM",symbol:"K"},{currencyCode:"MOP",type:"fiat",currency:J({defaultMessage:"Macanese pataca",id:"WSCDGHnfAP"}),countryCode:"MO",symbol:"P"},{currencyCode:"MUR",type:"fiat",currency:J({defaultMessage:"Mauritian rupee",id:"B7EPhc2k1/"}),countryCode:"MU",symbol:""},{currencyCode:"MVR",type:"fiat",currency:J({defaultMessage:"Maldivian rufiyaa",id:"WKep/6FHLO"}),countryCode:"MV",symbol:"Rf"},{currencyCode:"MWK",type:"fiat",currency:J({defaultMessage:"Malawian kwacha",id:"0QSRp0Tfcl"}),countryCode:"MW",symbol:"MK"},{currencyCode:"MXN",type:"fiat",currency:J({defaultMessage:"Mexican peso",id:"cAJvdQ+v2Y"}),countryCode:"MX",symbol:"$"},{currencyCode:"MXV",type:"fiat",currency:J({defaultMessage:"Mexican Unidad de Inversion (UDI)",id:"pJjurDaC1J"}),countryCode:"MX",symbol:"UDI"},{currencyCode:"MYR",type:"fiat",currency:J({defaultMessage:"Malaysian ringgit",id:"BJOmmIMKBn"}),countryCode:"MY",symbol:"RM"},{currencyCode:"MZN",type:"fiat",currency:J({defaultMessage:"Mozambican metical",id:"KVoUcWYwrs"}),countryCode:"MZ",symbol:"MT"},{currencyCode:"NAD",type:"fiat",currency:J({defaultMessage:"Namibian dollar",id:"ofXViiQOEO"}),countryCode:"NA",symbol:"$"},{currencyCode:"NGN",type:"fiat",currency:J({defaultMessage:"Nigerian naira",id:"YtrB6By6fQ"}),countryCode:"NG",symbol:""},{currencyCode:"NIO",type:"fiat",currency:J({defaultMessage:"Nicaraguan crdoba",id:"NJJMgSKcDP"}),countryCode:"NI",symbol:"C$"},{currencyCode:"NOK",type:"fiat",currency:J({defaultMessage:"Norwegian krone",id:"X7p/vNj1w0"}),countryCode:"NO",symbol:"kr"},{currencyCode:"NPR",type:"fiat",currency:J({defaultMessage:"Nepalese rupee",id:"KpP5Ur9yKv"}),countryCode:"NP",symbol:""},{currencyCode:"NZD",type:"fiat",currency:J({defaultMessage:"New Zealand dollar",id:"uoVYggIiS7"}),countryCode:"NZ",symbol:"$"},{currencyCode:"OMR",type:"fiat",currency:J({defaultMessage:"Omani rial",id:"YuZlkmlwz6"}),countryCode:"OM",symbol:".."},{currencyCode:"PAB",type:"fiat",currency:J({defaultMessage:"Panamanian balboa",id:"WsXJoQA7BU"}),countryCode:"PA",symbol:"B/."},{currencyCode:"PEN",type:"fiat",currency:J({defaultMessage:"Peruvian sol",id:"Gzey/zBCdq"}),countryCode:"PE",symbol:"S/."},{currencyCode:"PGK",type:"fiat",currency:J({defaultMessage:"Papua New Guinean kina",id:"1odcdptMV2"}),countryCode:"PG",symbol:"K"},{currencyCode:"PHP",type:"fiat",currency:J({defaultMessage:"Philippine peso",id:"Ze94/Fib/J"}),countryCode:"PH",symbol:""},{currencyCode:"PKR",type:"fiat",currency:J({defaultMessage:"Pakistani rupee",id:"xg2ovH8pDh"}),countryCode:"PK",symbol:""},{currencyCode:"PLN",type:"fiat",currency:J({defaultMessage:"Polish zoty",id:"5nGZooUDXi"}),countryCode:"PL",symbol:"z"},{currencyCode:"PYG",type:"fiat",currency:J({defaultMessage:"Paraguayan guaran",id:"faGTF61Eyw"}),countryCode:"PY",symbol:""},{currencyCode:"QAR",type:"fiat",currency:J({defaultMessage:"Qatari riyal",id:"DuHEQnjrPb"}),countryCode:"QA",symbol:"."},{currencyCode:"RON",type:"fiat",currency:J({defaultMessage:"Romanian leu",id:"lXgl4aKBP3"}),countryCode:"RO",symbol:"lei"},{currencyCode:"RSD",type:"fiat",currency:J({defaultMessage:"Serbian dinar",id:"giqvsRUiA5"}),countryCode:"RS",symbol:"."},{currencyCode:"RUB",type:"fiat",currency:J({defaultMessage:"Russian ruble",id:"4U+m5Kd694"}),countryCode:"RU",symbol:""},{currencyCode:"RWF",type:"fiat",currency:J({defaultMessage:"Rwandan franc",id:"URbs3Tt0On"}),countryCode:"RW",symbol:"FRw"},{currencyCode:"SAR",type:"fiat",currency:J({defaultMessage:"Saudi riyal",id:"p6D2TLqko8"}),countryCode:"SA",symbol:"."},{currencyCode:"SCR",type:"fiat",currency:J({defaultMessage:"Seychellois rupee",id:"V7Ju6HZQJK"}),countryCode:"SC",symbol:""},{currencyCode:"SDG",type:"fiat",currency:J({defaultMessage:"Sudanese pound",id:"FsgRxw4tdm"}),countryCode:"SD",symbol:".."},{currencyCode:"SEK",type:"fiat",currency:J({defaultMessage:"Swedish krona",id:"WoyUwT/z0X"}),countryCode:"SE",symbol:"kr"},{currencyCode:"SGD",type:"fiat",currency:J({defaultMessage:"Singapore dollar",id:"SCjBmFU+PM"}),countryCode:"SG",symbol:"$"},{currencyCode:"SHP",type:"fiat",currency:J({defaultMessage:"Saint Helena pound",id:"XZdS6/MxwW"}),countryCode:"SH",symbol:""},{currencyCode:"SLL",type:"fiat",currency:J({defaultMessage:"Sierra Leonean leone",id:"DFZ4yqf1EG"}),countryCode:"SL",symbol:"Le"},{currencyCode:"SOS",type:"fiat",currency:J({defaultMessage:"Somali shilling",id:"e7cANdrF41"}),countryCode:"SO",symbol:"Sh.So."},{currencyCode:"SVC",type:"fiat",currency:J({defaultMessage:"Salvadoran coln",id:"A2mT13SXuX"}),countryCode:"SV",symbol:""},{currencyCode:"SZL",type:"fiat",currency:J({defaultMessage:"Swazi lilangeni",id:"+kNQR2VJjT"}),countryCode:"SZ",symbol:"E"},{currencyCode:"THB",type:"fiat",currency:J({defaultMessage:"Thai baht",id:"Yz36aOmXMd"}),countryCode:"TH",symbol:""},{currencyCode:"TJS",type:"fiat",currency:J({defaultMessage:"Tajikistani somoni",id:"G3q+8He+TZ"}),countryCode:"TJ",symbol:"M"},{currencyCode:"TMT",type:"fiat",currency:J({defaultMessage:"Turkmenistan manat",id:"iV0j+gxDPN"}),countryCode:"TM",symbol:"m"},{currencyCode:"TND",type:"fiat",currency:J({defaultMessage:"Tunisian dinar",id:"l6iU1LyMSk"}),countryCode:"TN",symbol:"."},{currencyCode:"TRY",type:"fiat",currency:J({defaultMessage:"Turkish lira",id:"hQ9m98Llgt"}),countryCode:"TR",symbol:""},{currencyCode:"TTD",type:"fiat",currency:J({defaultMessage:"Trinidad and Tobago dollar",id:"Op/jRg7//J"}),countryCode:"TT",symbol:"TT$"},{currencyCode:"TWD",type:"fiat",currency:J({defaultMessage:"New Taiwan dollar",id:"yAeWHzFY54"}),countryCode:"TW",symbol:"NT$"},{currencyCode:"TZS",type:"fiat",currency:J({defaultMessage:"Tanzanian shilling",id:"7YNH90CDt1"}),countryCode:"TZ",symbol:"TSh"},{currencyCode:"UAH",type:"fiat",currency:J({defaultMessage:"Ukrainian hryvnia",id:"HCy2dyACi0"}),countryCode:"UA",symbol:""},{currencyCode:"UGX",type:"fiat",currency:J({defaultMessage:"Ugandan shilling",id:"P5STuJcFRi"}),countryCode:"UG",symbol:"USh"},{currencyCode:"USD",type:"fiat",currency:J({defaultMessage:"United States dollar",id:"BPRJDRwXU1"}),countryCode:"US",symbol:"$"},{currencyCode:"UYU",type:"fiat",currency:J({defaultMessage:"Uruguayan peso",id:"HtXUCx6BL1"}),countryCode:"UY",symbol:"$U"},{currencyCode:"UZS",type:"fiat",currency:J({defaultMessage:"Uzbekistani som",id:"lv4m0Kbuw1"}),countryCode:"UZ",symbol:"so'm"},{currencyCode:"VND",type:"fiat",currency:J({defaultMessage:"Vietnamese ng",id:"We/RqEPpOp"}),countryCode:"VN",symbol:""},{currencyCode:"XAF",type:"fiat",currency:J({defaultMessage:"Central African CFA franc",id:"fZwFESvHCw"}),countryCode:"CF",symbol:"FCFA"},{currencyCode:"XAG",type:"fiat",currency:J({defaultMessage:"Silver (troy ounce)",id:"XVTnv5Liuj"}),countryCode:"ZZ",symbol:"XAG"},{currencyCode:"XAU",type:"fiat",currency:J({defaultMessage:"Gold (troy ounce)",id:"s3i6lUYb/y"}),countryCode:"ZZ",symbol:"XAU"},{currencyCode:"XCD",type:"fiat",currency:J({defaultMessage:"East Caribbean dollar",id:"pXF3HmkspQ"}),countryCode:"AG",symbol:"$"},{currencyCode:"XDR",type:"fiat",currency:J({defaultMessage:"Special drawing rights",id:"X4eXXVN7wq"}),countryCode:"ZZ",symbol:"SDR"},{currencyCode:"XOF",type:"fiat",currency:J({defaultMessage:"West African CFA franc",id:"cezzLNBm20"}),countryCode:"SN",symbol:"CFA"},{currencyCode:"XPF",type:"fiat",currency:J({defaultMessage:"CFP franc",id:"txe+aX9vvZ"}),countryCode:"PF",symbol:""},{currencyCode:"YER",type:"fiat",currency:J({defaultMessage:"Yemeni rial",id:"lRXRuW4arm"}),countryCode:"YE",symbol:""},{currencyCode:"ZAC",type:"fiat",currency:J({defaultMessage:"South African rand (financial)",id:"GsJykrhxvK"}),countryCode:"ZA",symbol:"R"},{currencyCode:"ZAR",type:"fiat",currency:J({defaultMessage:"South African rand",id:"MbU2//IGEL"}),countryCode:"ZA",symbol:"R"},{currencyCode:"ZMW",type:"fiat",currency:J({defaultMessage:"Zambian kwacha",id:"ZJnHTLBz2v"}),countryCode:"ZM",symbol:"ZK"},{currencyCode:"BTC",type:"crypto",currency:J({defaultMessage:"Bitcoin",id:"RkW5weBw8q"}),symbol:""},{currencyCode:"ETH",type:"crypto",currency:J({defaultMessage:"Ethereum",id:"ohE0sWxJfP"}),symbol:""},{currencyCode:"XRP",type:"crypto",currency:J({defaultMessage:"XRP",id:"rwHxdc9N83"}),symbol:"XRP"},{currencyCode:"BNB",type:"crypto",currency:J({defaultMessage:"BNB",id:"+x/JA+cbSg"}),symbol:"BNB"},{currencyCode:"USDT",type:"crypto",currency:J({defaultMessage:"Tether",id:"G17JtC1DRO"}),symbol:"USDT"},{currencyCode:"SOL",type:"crypto",currency:J({defaultMessage:"Solana",id:"RmbsLR1XI9"}),symbol:"SOL"},{currencyCode:"HYPE",type:"crypto",currency:J({defaultMessage:"HYPE",id:"sRJuK+IQu7"}),symbol:"HYPE"},{currencyCode:"STETH",type:"crypto",currency:J({defaultMessage:"stETH",id:"VNvqEhRv0o"}),symbol:"stETH"},{currencyCode:"WTRX",type:"crypto",currency:J({defaultMessage:"Wrapped TRX",id:"hi8IgS7Vvh"}),symbol:"WTRX"},{currencyCode:"DOGE",type:"crypto",currency:J({defaultMessage:"Dogecoin",id:"Q4KOhNgUFl"}),symbol:"DOGE"},{currencyCode:"ADA",type:"crypto",currency:J({defaultMessage:"Cardano",id:"Zk+zRo7Vav"}),symbol:"ADA"},{currencyCode:"TRX",type:"crypto",currency:J({defaultMessage:"TRON",id:"fLtNc/n43W"}),symbol:"TRX"},{currencyCode:"USDC",type:"crypto",currency:J({defaultMessage:"USD Coin",id:"tPc0IbLJq0"}),symbol:"USDC"},{currencyCode:"WBTC",type:"crypto",currency:J({defaultMessage:"Wrapped Bitcoin",id:"AO1Xrr+Cwk"}),symbol:"WBTC"},{currencyCode:"WSTETH",type:"crypto",currency:J({defaultMessage:"Wrapped stETH",id:"Fg7h7ipjGE"}),symbol:"wstETH"},{currencyCode:"EDLC",type:"crypto",currency:J({defaultMessage:"EDLC",id:"FplbXN+574"}),symbol:"EDLC"},{currencyCode:"LINK",type:"crypto",currency:J({defaultMessage:"Chainlink",id:"d/A799ZTa/"}),symbol:"LINK"},{currencyCode:"AIC",type:"crypto",currency:J({defaultMessage:"AIC",id:"RSOIsb9pEC"}),symbol:"AIC"},{currencyCode:"XLM",type:"crypto",currency:J({defaultMessage:"Stellar",id:"+uYwRW10Bd"}),symbol:"XLM"},{currencyCode:"WETH",type:"crypto",currency:J({defaultMessage:"Wrapped Ether",id:"s8UwDT+8t2"}),symbol:"WETH"},{currencyCode:"BCH",type:"crypto",currency:J({defaultMessage:"Bitcoin Cash",id:"hLt+wzROTK"}),symbol:"BCH"},{currencyCode:"UST",type:"crypto",currency:J({defaultMessage:"TerraUSD",id:"wot2OPkJDe"}),symbol:"UST"},{currencyCode:"AVAX",type:"crypto",currency:J({defaultMessage:"Avalanche",id:"C9K+TI7R4G"}),symbol:"AVAX"},{currencyCode:"SUI",type:"crypto",currency:J({defaultMessage:"Sui",id:"CvmoCbTblr"}),symbol:"SUI"},{currencyCode:"LTC",type:"crypto",currency:J({defaultMessage:"Litecoin",id:"oyKw8Dr6hh"}),symbol:"LTC"},{currencyCode:"TON",type:"crypto",currency:J({defaultMessage:"Toncoin",id:"V2AxdWxVB/"}),symbol:"TON"},{currencyCode:"HBAR",type:"crypto",currency:J({defaultMessage:"Hedera",id:"yLSpOa++/L"}),symbol:"HBAR"},{currencyCode:"WHBAR",type:"crypto",currency:J({defaultMessage:"Wrapped HBAR",id:"rfimaaddr1"}),symbol:"WHBAR"},{currencyCode:"UNI",type:"crypto",currency:J({defaultMessage:"Uniswap",id:"hincAkLfxR"}),symbol:"UNI"},{currencyCode:"BTCB",type:"crypto",currency:J({defaultMessage:"Bitcoin BEP2",id:"T7D16Bt6JS"}),symbol:"BTCB"},{currencyCode:"OKB",type:"crypto",currency:J({defaultMessage:"OKB",id:"6ZLe/X3P+I"}),symbol:"OKB"},{currencyCode:"SHIB",type:"crypto",currency:J({defaultMessage:"Shiba Inu",id:"dwuQAuovNP"}),symbol:"SHIB"},{currencyCode:"USDS",type:"crypto",currency:J({defaultMessage:"StableUSD",id:"DAzSEb0LeA"}),symbol:"USDS"},{currencyCode:"WBT",type:"crypto",currency:J({defaultMessage:"WhiteBIT Coin",id:"Lj9Zp416rG"}),symbol:"WBT"},{currencyCode:"BGB",type:"crypto",currency:J({defaultMessage:"Bitget Token",id:"OEQgkmdE1O"}),symbol:"BGB"},{currencyCode:"DAI",type:"crypto",currency:J({defaultMessage:"Dai",id:"7g+Z6oltsB"}),symbol:"DAI"},{currencyCode:"DOT",type:"crypto",currency:J({defaultMessage:"Polkadot",id:"iS7ue2zjn0"}),symbol:"DOT"},{currencyCode:"XMR",type:"crypto",currency:J({defaultMessage:"Monero",id:"RydJABkA4a"}),symbol:"XMR"},{currencyCode:"MNT",type:"crypto",currency:J({defaultMessage:"MNT",id:"90qNZszLR/"}),symbol:"MNT"},{currencyCode:"PEPE",type:"crypto",currency:J({defaultMessage:"Pepe",id:"x9wJbmzZhn"}),symbol:"PEPE"},{currencyCode:"AAVE",type:"crypto",currency:J({defaultMessage:"Aave",id:"kFjzNltaTL"}),symbol:"AAVE"},{currencyCode:"CRO",type:"crypto",currency:J({defaultMessage:"Cronos",id:"2cg8W1gIo3"}),symbol:"CRO"},{currencyCode:"ETC",type:"crypto",currency:J({defaultMessage:"Ethereum Classic",id:"Bv9Xkw6kNg"}),symbol:"ETC"},{currencyCode:"FD",type:"crypto",currency:J({defaultMessage:"FD",id:"+Q62UIi/LA"}),symbol:"FD"},{currencyCode:"TUSD",type:"crypto",currency:J({defaultMessage:"TrueUSD",id:"whDnhXYdIe"}),symbol:"TUSD"},{currencyCode:"NEAR",type:"crypto",currency:J({defaultMessage:"NEAR Protocol",id:"E9RsfkMwMk"}),symbol:"NEAR"},{currencyCode:"METAGAMES",type:"crypto",currency:J({defaultMessage:"MetaGames",id:"C0GGroVhnP"}),symbol:"METAGAMES"},{currencyCode:"TAO",type:"crypto",currency:J({defaultMessage:"Bittensor",id:"6+C0Ut5hKl"}),symbol:"TAO"},{currencyCode:"ICP",type:"crypto",currency:J({defaultMessage:"Internet Computer",id:"q9uyMXlX+M"}),symbol:"ICP"},{currencyCode:"GT",type:"crypto",currency:J({defaultMessage:"GateToken",id:"dSGfpIcmmI"}),symbol:"GT"},{currencyCode:"RETH",type:"crypto",currency:J({defaultMessage:"Rocket Pool ETH",id:"pg4o1kZ2d4"}),symbol:"rETH"},{currencyCode:"MRS",type:"crypto",currency:J({defaultMessage:"MRS",id:"CABw3watNU"}),symbol:"MRS"},{currencyCode:"APT",type:"crypto",currency:J({defaultMessage:"Aptos",id:"/U15UItsIY"}),symbol:"APT"},{currencyCode:"KAS",type:"crypto",currency:J({defaultMessage:"Kaspa",id:"1MwSSUoCwu"}),symbol:"KAS"},{currencyCode:"ALGO",type:"crypto",currency:J({defaultMessage:"Algorand",id:"TijDBb1K3w"}),symbol:"ALGO"},{currencyCode:"PENGU",type:"crypto",currency:J({defaultMessage:"PENGU",id:"esTSdYyjL9"}),symbol:"PENGU"},{currencyCode:"VET",type:"crypto",currency:J({defaultMessage:"VeChain",id:"o3b918Uwm9"}),symbol:"VET"},{currencyCode:"OTRUMP",type:"crypto",currency:J({defaultMessage:"OTRUMP",id:"dwjxu1ZNrs"}),symbol:"OTRUMP"},{currencyCode:"ARB",type:"crypto",currency:J({defaultMessage:"Arbitrum",id:"2qF6KBPwqc"}),symbol:"ARB"},{currencyCode:"LUNA1",type:"crypto",currency:J({defaultMessage:"Terra (LUNA1)",id:"g5JtKAkJm/"}),symbol:"LUNA1"},{currencyCode:"MKR",type:"crypto",currency:J({defaultMessage:"Maker",id:"iVoUggHR7n"}),symbol:"MKR"},{currencyCode:"QNT",type:"crypto",currency:J({defaultMessage:"Quant",id:"kZiBtRgPXK"}),symbol:"QNT"},{currencyCode:"BONK",type:"crypto",currency:J({defaultMessage:"BONK",id:"/WOyXrLUEt"}),symbol:"BONK"},{currencyCode:"ATOM",type:"crypto",currency:J({defaultMessage:"Cosmos",id:"VfvhDOBZSq"}),symbol:"ATOM"},{currencyCode:"FTN",type:"crypto",currency:J({defaultMessage:"FTN",id:"+BtHlnfKBJ"}),symbol:"FTN"},{currencyCode:"KCS",type:"crypto",currency:J({defaultMessage:"KuCoin Token",id:"J6x8n/y945"}),symbol:"KCS"},{currencyCode:"RNDR",type:"crypto",currency:J({defaultMessage:"Render",id:"fI33PYpQj/"}),symbol:"RNDR"},{currencyCode:"BNX",type:"crypto",currency:J({defaultMessage:"BNX",id:"/mzOvKP3DB"}),symbol:"BNX"},{currencyCode:"FIL",type:"crypto",currency:J({defaultMessage:"Filecoin",id:"O60m1dM5+I"}),symbol:"FIL"},{currencyCode:"WBNB",type:"crypto",currency:J({defaultMessage:"Wrapped BNB",id:"6oPoIEcEKM"}),symbol:"WBNB"},{currencyCode:"DUCK",type:"crypto",currency:J({defaultMessage:"DUCK",id:"Wy2n2zHjyn"}),symbol:"DUCK"},{currencyCode:"ONDO",type:"crypto",currency:J({defaultMessage:"Ondo",id:"Mdh4nCMVFp"}),symbol:"ONDO"},{currencyCode:"EZETH",type:"crypto",currency:J({defaultMessage:"EZETH",id:"GquMfdHRpr"}),symbol:"EZETH"},{currencyCode:"DHN",type:"crypto",currency:J({defaultMessage:"DHN",id:"3DBrwMVTuR"}),symbol:"DHN"},{currencyCode:"SPX",type:"crypto",currency:J({defaultMessage:"SPX",id:"78Gbn14660"}),symbol:"SPX"},{currencyCode:"XDC",type:"crypto",currency:J({defaultMessage:"XDC Network",id:"f4v54xCFpd"}),symbol:"XDC"},{currencyCode:"ENA",type:"crypto",currency:J({defaultMessage:"ENA",id:"G6NRdu/3/f"}),symbol:"ENA"},{currencyCode:"SOLVBTCBBN",type:"crypto",currency:J({defaultMessage:"SOLVBTCBBN",id:"U+VGyLBIbO"}),symbol:"SOLVBTCBBN"},{currencyCode:"LDO",type:"crypto",currency:J({defaultMessage:"Lido DAO",id:"Hm40klV7dx"}),symbol:"LDO"},{currencyCode:"INJ",type:"crypto",currency:J({defaultMessage:"Injective",id:"Zy5gqTZCK/"}),symbol:"INJ"},{currencyCode:"USD0",type:"crypto",currency:J({defaultMessage:"USD0",id:"I8k7Is+SUX"}),symbol:"USD0"},{currencyCode:"FLR",type:"crypto",currency:J({defaultMessage:"Flare",id:"EuWzA+LwQr"}),symbol:"FLR"},{currencyCode:"PY",type:"crypto",currency:J({defaultMessage:"PY",id:"2WmUk53rca"}),symbol:"PY"},{currencyCode:"SEI",type:"crypto",currency:J({defaultMessage:"Sei",id:"uIVFPKXueM"}),symbol:"SEI"},{currencyCode:"MSOL",type:"crypto",currency:J({defaultMessage:"Marinade Staked SOL",id:"Sgo9VGem0+"}),symbol:"mSOL"},{currencyCode:"CRV",type:"crypto",currency:J({defaultMessage:"Curve DAO Token",id:"hv2sTxuyJY"}),symbol:"CRV"},{currencyCode:"FTM",type:"crypto",currency:J({defaultMessage:"Fantom",id:"FdV4Gc/fz2"}),symbol:"FTM"},{currencyCode:"FLOKI",type:"crypto",currency:J({defaultMessage:"FLOKI",id:"d2sPiyXVq8"}),symbol:"FLOKI"},{currencyCode:"CMETH",type:"crypto",currency:J({defaultMessage:"CMETH",id:"ZXQlnD2obl"}),symbol:"CMETH"},{currencyCode:"SLISBNB",type:"crypto",currency:J({defaultMessage:"SLISBNB",id:"wqx7ZL4lbr"}),symbol:"SLISBNB"},{currencyCode:"FARTCOIN",type:"crypto",currency:J({defaultMessage:"FARTCOIN",id:"qFlNIb5L+O"}),symbol:"FARTCOIN"},{currencyCode:"EETH",type:"crypto",currency:J({defaultMessage:"eETH",id:"tCrC5owpVn"}),symbol:"eETH"},{currencyCode:"KAIA",type:"crypto",currency:J({defaultMessage:"KAIA",id:"fDXZE/gzgq"}),symbol:"KAIA"},{currencyCode:"GRT",type:"crypto",currency:J({defaultMessage:"The Graph",id:"oFrVNds2cX"}),symbol:"GRT"},{currencyCode:"IMX",type:"crypto",currency:J({defaultMessage:"Immutable",id:"+0mthqqK1s"}),symbol:"IMX"},{currencyCode:"WIF",type:"crypto",currency:J({defaultMessage:"WIF",id:"tK0cRtUi/S"}),symbol:"WIF"},{currencyCode:"RAY",type:"crypto",currency:J({defaultMessage:"Raydium",id:"pSdm2ZTXHD"}),symbol:"RAY"},{currencyCode:"OP",type:"crypto",currency:J({defaultMessage:"Optimism",id:"ghDrrz64nC"}),symbol:"OP"},{currencyCode:"XAUT",type:"crypto",currency:J({defaultMessage:"Tether Gold",id:"pobzwuxAfg"}),symbol:"XAUT"},{currencyCode:"PENDLE",type:"crypto",currency:J({defaultMessage:"Pendle",id:"z8diWExCd3"}),symbol:"PENDLE"}],eMt=A.memo(e=>{const{data:t}=e,{source_currency:n,target_currency:r,source_amount:s,converted_amount:a,exchange_rate:o}=t,{menuItems:i}=Jp(),[c,u]=f.useState(s),[d,m]=f.useState(O(a)),[h,p]=f.useState(n),[g,y]=f.useState(r),[v,x]=f.useState(o),{colorScheme:b}=fs(),_=b==="dark",{$t:w}=X(),{data:S,isLoading:C,error:E}=Ke({queryKey:Tpt(h,g,c),queryFn:()=>kpt({sourceCurrency:h,targetCurrency:g,amount:c}),enabled:!!h&&!!g&&c>0}),M=f.useRef(S?.source_currency),T=f.useRef(S?.target_currency),I=f.useRef(S?.exchange_rate),j=f.useRef(S?.source_img),N=f.useRef(S?.source_img_dark),P=f.useRef(S?.target_img),R=f.useRef(S?.target_img_dark);f.useEffect(()=>{S&&(S?.source_currency!==M.current||S?.target_currency!==T.current)&&(m(O(S.converted_amount)),M.current=S.source_currency,T.current=S.target_currency),S&&S.exchange_rate!==I.current&&(x(S.exchange_rate),I.current=S.exchange_rate),S&&S.source_img!==j.current&&(j.current=S.source_img),S&&S.source_img_dark!==N.current&&(N.current=S.source_img_dark),S&&S.target_img!==P.current&&(P.current=S.target_img),S&&S.target_img_dark!==R.current&&(R.current=S.target_img_dark)},[S]);function k(U){return fj.find(V=>V.currencyCode===U)}function O(U){return U>1?parseFloat(U.toFixed(2)):parseFloat(U.toPrecision(2))}const L=k(h),F=k(g);return l.jsx("div",{className:"@container",children:l.jsxs(z,{variant:"offset",className:"@[480px]:grid-cols-2 dark:!bg-subtle grid w-full grid-cols-1 gap-px overflow-hidden",children:[l.jsxs(z,{variant:"raised",className:"p-md pb-sm gap-md flex w-full flex-col",children:[l.jsx("div",{className:"flex-1",children:l.jsxs(D,{variant:"entry-title-200",className:"flex font-mono !text-2xl",children:[l.jsx("span",{className:"text-quieter",children:L?.symbol}),l.jsx(yJ,{id:"fromAmount",value:c,error:!!E,onChange:U=>{const V=parseFloat(U.target.value);u(V),V>0?m(O(V*v)):m(0)}})]})}),l.jsxs("div",{className:"gap-md flex items-center",children:[l.jsx(gJ,{onSelect:U=>p(U),currency:L?w(L.currency):h,icon:L&&L.type==="crypto"?l.jsx(z,{variant:"offset",className:"size-full overflow-hidden rounded-full",children:(_?N.current:j.current)&&l.jsx("img",{src:_?N.current??"":j.current??"",alt:w(L.currency),className:"size-full object-contain"})}):l.jsx(oI,{className:"size-full object-contain",countryCode:L?.countryCode})}),l.jsx("div",{className:"ml-auto grid grid-cols-1 grid-rows-1 items-center",children:l.jsxs(st,{children:[C&&l.jsx(_e.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:ho,className:"col-start-1 row-start-1 ml-auto",children:l.jsx(D,{color:"ultraLight",children:l.jsx(Ns,{size:12})})},"loading"),!C&&E&&l.jsx(_e.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:ho,className:"col-start-1 row-start-1 ml-auto",children:l.jsx(D,{color:"light",variant:"small",children:w({defaultMessage:"Not supported",id:"+FiyOTaUCW"})})},"error")]})})]})]}),l.jsxs(z,{variant:"raised",className:"p-md pb-sm gap-md flex w-full flex-col",children:[l.jsx("div",{className:"flex-1",children:l.jsxs(D,{variant:"entry-title-200",color:"default",className:"flex font-mono !text-2xl",children:[l.jsx("span",{className:"text-quieter",children:F?.symbol}),l.jsx(yJ,{id:"toAmount",value:d,error:!!E,onChange:U=>{const V=parseFloat(U.target.value);m(V),V>0?u(O(V/v)):u(0)}})]})}),l.jsxs("div",{className:"gap-md flex items-center",children:[l.jsx(gJ,{onSelect:U=>y(U),currency:F?w(F.currency):g,icon:F&&F.type==="crypto"?l.jsx(z,{variant:"offset",className:"size-full overflow-hidden rounded-full",children:(_?R.current:P.current)&&l.jsx("img",{src:_?R.current??"":P.current??"",alt:w(F.currency),className:"size-full object-contain"})}):l.jsx(oI,{className:"size-full object-contain",countryCode:F?.countryCode})}),i&&i.length>0&&l.jsx("div",{className:"ml-auto",children:l.jsx(Wn.Menu,{menuItems:i})})]})]})]})})}),gJ=A.memo(({currency:e,icon:t,onSelect:n})=>{const{$t:r}=X(),{isMobileStyle:s}=Ce(),[a,o]=f.useState(""),i=f.useMemo(()=>["CNY","EUR","GBP","JPY","USD","BTC","ETH"].map(y=>fj.find(v=>v.currencyCode===y)),[]),c=f.useMemo(()=>{const g=fj.map(y=>({...y,localizedCurrency:r(y.currency)}));return new tg(g,{keys:["localizedCurrency","currencyCode","countryCode"],threshold:.3})},[r]),u=f.useMemo(()=>c.search(a)??[],[c,a]),d=f.useMemo(()=>i.map(g=>({type:"default",text:g?.currencyCode?r(g.currency):"",onClick:()=>{g?.currencyCode&&(n(g.currencyCode),o(""))}})),[i,n,r]),m=f.useMemo(()=>u.map(g=>({type:"default",text:r(g.item?.currency)??"",onClick:()=>{g?.item?.currencyCode&&(n(g.item?.currencyCode),o(""))}})),[u,n,r]),h=f.useMemo(()=>[{type:"default",text:r({defaultMessage:"No results",id:"jHJmjfxD4s"}),disabled:!0}],[r]),p=f.useMemo(()=>l.jsx(xo,{autoFocus:!0,className:B({"!-mx-xs":s,"!px-xs py-sm mb-xs border-none !bg-transparent shadow-none outline-none focus:!ring-0":!s}),pill:!1,isMobileUserAgent:s,placeholder:r({defaultMessage:"Search currencies...",id:"fDMc8k+hJQ"}),value:a,onChange:g=>o(g),disable1pass:!0}),[s,a,r]);return l.jsx(en,{alwaysShowChildren:!0,placement:"bottom-start",showFooterOnMobile:!0,items:a.length>0?m.length>0?m:h:d,isMobileStyle:s,wrapperClassName:"flex",header:p,footer:s&&p,children:l.jsx(ke,{chevron:!0,noPadding:!0,leadingComponent:l.jsx("div",{className:"mr-0.5 size-5",children:t}),variant:"primary",size:"small",text:e})})}),yJ=A.memo(({value:e,id:t,onChange:n,error:r})=>l.jsx("input",{className:B("bg-raised dark:!bg-offset placeholder:text-quieter w-full overflow-hidden transition-colors duration-200 [appearance:textfield] focus:outline-none [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:appearance-none",{"!text-quieter":r}),id:t,name:t,value:r?"---":e??"",disabled:r,type:r?"text":"number",placeholder:"0",min:0,onChange:n})),hy=(e,t,n)=>{const r=wUe({start:e,end:t}),s=r.days||0,a=r.hours||0,o=r.minutes||0;return s>0?a===0&&o===0?n({id:"sSynIO3ThU",defaultMessage:"{days}d"},{days:s}):o===0?n({id:"10cSZzeWte",defaultMessage:"{days}d {hours}h"},{days:s,hours:a}):n({id:"OWk1HjddEb",defaultMessage:"{days}d {hours}h {minutes}m"},{days:s,hours:a,minutes:o.toString().padStart(2,"0")}):a===0?n({id:"VvfhE21OJI",defaultMessage:"{minutes}m"},{minutes:o}):o===0?n({id:"unuVj1l7KW",defaultMessage:"{hours}h"},{hours:a}):n({id:"0Yp4jJ7rzm",defaultMessage:"{hours}h {minutes}m"},{hours:a,minutes:o.toString().padStart(2,"0")})},p2e=A.memo(({flightMetadata:e,departureTime:t,arrivalTime:n,actualDepartureTime:r,actualArrivalTime:s,estimatedDepartureTime:a,estimatedArrivalTime:o,delayed:i=!1,rightContent:c})=>{const{$t:u,locale:d}=X(),m=f.useMemo(()=>new Date,[]),{cancelled:h,diverted:p,status:g,flightNumber:y,departureCity:v,departureAirport:x,arrivalAirport:b,arrivalCity:_}=e,w=f.useMemo(()=>t.toLocaleDateString(d,{month:"short",day:"numeric",year:"numeric"}),[t,d]),S=r||a||t,C=s||o||n,E=f.useMemo(()=>hy(m,S,u),[m,S,u]),M=f.useMemo(()=>hy(S,m,u),[m,S,u]),T=f.useMemo(()=>hy(C,m,u),[m,C,u]),I=f.useMemo(()=>hy(m,C,u),[m,C,u]),j=S<=m,N=C<=m,P=f.useMemo(()=>N?u({id:"mtuHNb+mRc",defaultMessage:"Arrived {time} ago"},{time:T}):j?u({id:"b6q320RasU",defaultMessage:"Departed {time} ago"},{time:M}):u({id:"/JLglYfuNX",defaultMessage:"Departing in {time}"},{time:E}),[j,N,E,M,T,u]),R=f.useMemo(()=>h?u({id:"3wsVWFbC1x",defaultMessage:"Cancelled"}):p?u({id:"/N1ZeWQc8B",defaultMessage:"Diverted"}):g,[h,p,u,g]);return l.jsxs("div",{className:"gap-sm flex flex-col justify-between sm:flex-row",children:[l.jsxs("div",{children:[l.jsx(D,{variant:"section-title",children:l.jsx(he,{id:"5KgWVKDR/R",defaultMessage:"{flightNumber}  {departureCity} ({departureAirport}) to {arrivalCity} ({arrivalAirport})",values:{flightNumber:y,departureCity:v,departureAirport:x,arrivalAirport:b,arrivalCity:_}})}),l.jsx("div",{className:"gap-sm flex flex-row",children:l.jsxs(bc,{className:"gap-xs flex flex-row flex-wrap",children:[l.jsx(fr,{id:"day",children:l.jsx(D,{variant:"smallBold",color:"light",children:w})}),!h&&l.jsx(fr,{id:"relative-departure-time",children:l.jsx(D,{variant:"smallBold",color:"light",children:P})}),j&&!N&&!h&&l.jsx(fr,{id:"relative-arrival-time",children:l.jsx(D,{variant:"smallBold",color:"light",children:l.jsx(he,{id:"z8jWKRSOak",defaultMessage:"Arriving in {time}",values:{time:I}})})}),l.jsx(fr,{id:"status",children:l.jsx(D,{variant:"smallBold",color:h||p||i?"negative":"super",children:R})})]})})]}),c]})});p2e.displayName="FlightHeader";const Pb={initial:{opacity:0,filter:"blur(2px)"},animate:{opacity:1,filter:"blur(0px)"},exit:{opacity:0,filter:"blur(2px)"},transition:{duration:.5,ease:pa}},g2e=A.memo(({children:e,animationKey:t,...n})=>l.jsx(st,{mode:"popLayout",initial:!1,children:l.jsx(_e.div,{initial:Pb.initial,animate:Pb.animate,exit:Pb.exit,transition:Pb.transition,children:l.jsx(D,{...n,children:e})},t)})),y2e=A.memo(({terminal:e,gate:t,alignEnd:n})=>{const{$t:r}=X();return l.jsxs("div",{className:B("gap-lg flex w-full flex-row",n&&"justify-end"),children:[e&&l.jsx(mj,{label:r({id:"GAHVEi8lHA",defaultMessage:"Terminal"}),value:e}),t&&l.jsx(mj,{label:r({id:"W+gH70jajX",defaultMessage:"Gate"}),value:t})]})});y2e.displayName="FlightTerminalGate";const mj=A.memo(({label:e,value:t})=>l.jsxs("div",{children:[l.jsx(D,{variant:"tinyMono",color:"light",children:e}),l.jsx(g2e,{animationKey:t,variant:"entry-title-200",children:t})]}));mj.displayName="FlightAttribute";const Ec=()=>{const{firstResult:{status:e,privacy_state:t}={}}=zt(),n=vo(),{isIncognitoLocal:r}=hn();return f.useMemo(()=>{if(!e)return!1;const s=!!t&&(r&&t!==mh.INCOGNITO||!r&&t===mh.INCOGNITO);return!n&&e!==dr.PENDING||s},[r,t,n,e])},Rb={initial:{opacity:0,height:0,filter:"blur(2px)"},animate:{opacity:1,height:"auto",filter:"blur(0px)"},exit:{opacity:0,height:0,filter:"blur(2px)"},transition:{duration:.3,ease:Jn}},hj=A.memo(({airport:e,time:t,actualTime:n,estimatedTime:r,timezone:s,terminal:a,gate:o,variant:i="departure",delayed:c=!1,cancelled:u=!1})=>{const{locale:d,$t:m}=X(),{submitQuery:h}=Ta(),p=Ec(),{firstResult:g}=zt(),y=g?.frontend_context_uuid,v=f.useMemo(()=>m(i==="departure"?{id:"BtqAemWTLK",defaultMessage:"Departure"}:{id:"WOIPGxfmZn",defaultMessage:"Arrival"}),[i,m]),x=i==="arrival",b=f.useMemo(()=>{const C=n||r;return C&&C.getTime()===t.getTime()?null:C},[n,r,t]),_=f.useMemo(()=>t.toLocaleTimeString(d,{hour:"numeric",minute:"2-digit",timeZone:s}),[t,s,d]),w=f.useMemo(()=>b?.toLocaleTimeString(d,{hour:"numeric",minute:"2-digit",timeZone:s}),[b,s,d]),S=f.useCallback(()=>{const C=p,E=Sa();h({fork:C,rawQuery:m({id:"xxqvnlQO57",defaultMessage:"Airport {airport}"},{airport:e}),collection:null,newFrontendContextUUID:C?E:null,existingFrontendContextUUID:C?void 0:y,promptSource:"user",querySource:"entity_link",shouldRedirectToBackendUUID:C})},[e,p,y,h,m]);return l.jsxs("div",{className:"gap-md col-span-3 flex flex-col justify-between",children:[l.jsxs("div",{className:B("gap-sm flex flex-col",x&&"items-end"),children:[l.jsxs(D,{variant:"tinyMono",color:"light",className:"gap-sm flex flex-row",children:[v,l.jsx("button",{className:"text-foreground hover:text-super cursor-pointer underline transition-colors duration-150 ease-in-out",onClick:S,children:e})]}),l.jsxs("div",{className:B("flex flex-col",x&&"items-end"),children:[l.jsx(g2e,{animationKey:_,as:"span",variant:"entry-title-200",color:c?"negative":"super",className:B("-translate-y-px !font-mono transition-colors duration-500",u&&"text-quiet line-through"),children:b?w:_}),l.jsx(st,{initial:!1,children:b&&l.jsx(_e.div,{initial:Rb.initial,animate:Rb.animate,exit:Rb.exit,transition:Rb.transition,className:"overflow-hidden",children:l.jsx(D,{as:"span",variant:b?"small":"entry-title-200",color:"super",className:B("-translate-y-px !font-mono",b&&"!text-quiet line-through"),children:_})})})]})]}),l.jsx(y2e,{terminal:a,gate:o,alignEnd:x})]})});hj.displayName="FlightDepartureArrival";const tMt=_e(z),v2e=A.memo(({progress:e,departureTime:t,arrivalTime:n,delayed:r,cancelled:s})=>{const{$t:a}=X(),o=f.useMemo(()=>hy(t,n,a),[t,n,a]),i=f.useMemo(()=>e===void 0||s?0:Math.max(0,Math.min(100,e)),[e,s]),{left:c,width:u}=f.useMemo(()=>({left:`${i}%`,width:`${i}%`}),[i]),d=f.useMemo(()=>({left:0}),[]),m=f.useMemo(()=>({duration:2,ease:Jn,delay:.5}),[]),h=f.useMemo(()=>({left:c,opacity:1,scale:1}),[c]),p=f.useMemo(()=>({...d,opacity:0,scale:1.2,top:"50%",translateX:"-50%",translateY:"-50%"}),[d]),g=f.useMemo(()=>({width:u}),[u]);return l.jsx("div",{className:"px-xs order-last col-span-6 flex flex-col items-center justify-center sm:order-[unset] sm:px-0",children:l.jsxs("div",{className:"gap-md flex w-full flex-col items-center",children:[l.jsx(D,{variant:"tinyMono",color:"light",children:o}),l.jsxs("div",{className:"relative flex w-full flex-1 items-center",children:[l.jsx("div",{className:"bg-inverse/10 relative h-0.5 w-full overflow-hidden rounded-full",children:l.jsx(_e.div,{className:B("!bg-inverse/50 absolute bottom-0 left-0 top-0 transition-colors duration-500"),initial:d,animate:g,transition:m})}),l.jsx(tMt,{variant:"raised",className:"absolute left-0 flex aspect-square w-6 items-center justify-center",initial:p,animate:h,transition:m,children:l.jsx(be,{className:B("text-quiet transition-colors duration-500",e&&e>0&&!r&&"!text-super",r&&"!text-negative",s&&"!text-quiet"),icon:fS})})]})]})})});v2e.displayName="FlightProgress";const x2e=A.memo(({departureTime:e,arrivalTime:t,actualDepartureTime:n,actualArrivalTime:r,estimatedDepartureTime:s,estimatedArrivalTime:a,flightMetadata:o,delayed:i=!1})=>{const{cancelled:c,departureAirport:u,arrivalAirport:d,departureTimezone:m,arrivalTimezone:h,terminal:p,gate:g,arrivalTerminal:y,arrivalGate:v,progressPercent:x}=o;return l.jsxs(tr,{className:"p-md gap-md grid w-full grid-cols-2 overflow-hidden shadow-sm sm:grid-cols-12",children:[l.jsx(hj,{variant:"departure",airport:u,time:e,actualTime:n,estimatedTime:s,timezone:m,terminal:p,gate:g,delayed:i,cancelled:c}),l.jsx(v2e,{departureTime:e,arrivalTime:t,progress:x,delayed:i,cancelled:c}),l.jsx(hj,{variant:"arrival",airport:d,time:t,actualTime:r,estimatedTime:a,timezone:h,terminal:y,gate:v,delayed:i,cancelled:c})]})});x2e.displayName="FlightStatusCard";const b2e=A.memo(({flights:e,selectedFlight:t,setSelectedFlight:n})=>{const{locale:r,$t:s}=X(),{isMobileStyle:a}=Ce(),o=f.useCallback(u=>{const d=new Date(u.departureTime),m=qP(d,u.departureTimezone);let h;if(_L(m)?h=s({id:"zWgbGgjUUg",defaultMessage:"Today"}):EUe(m)?h=s({id:"6dIxDP1C8c",defaultMessage:"Yesterday"}):CUe(m)?h=s({id:"MtrTNyxuSU",defaultMessage:"Tomorrow"}):h=d.toLocaleDateString(r,{weekday:"short",month:"short",day:"numeric"}),e.filter(g=>{if(g.departureTimezone!==u.departureTimezone)return!1;const y=qP(new Date(g.departureTime),g.departureTimezone);return pu(y).getTime()===pu(m).getTime()}).length>1){const g=d.toLocaleTimeString(r,{hour:"numeric",minute:"2-digit"});h=s({id:"Fr3TxQz4BU",defaultMessage:"{dateString} - {timeString}"},{dateString:h,timeString:g})}return h},[r,e,s]),i=f.useMemo(()=>e.map(u=>({type:"default",text:o(u),value:u.flightAwareId,onClick:()=>n(u),active:u.flightAwareId===t?.flightAwareId})),[e,o,n,t?.flightAwareId]),c=f.useMemo(()=>t?o(t):"",[t,o]);return l.jsx("div",{children:l.jsx(en,{items:i,isMobileStyle:a,children:l.jsx(ye,{variant:"border",text:c,chevron:!0,pill:!0})})})});b2e.displayName="FlightStatusSwitcher";const Ib=new Date,_2e=A.memo(({data:e})=>{const t=f.useMemo(()=>[...e.data.flights].sort((p,g)=>new Date(p.departureTime).getTime()-new Date(g.departureTime).getTime()),[e.data.flights]),n=f.useMemo(()=>{const p=new Date().getTime();if(t.length!==0)return t.reduce((g,y)=>{const v=new Date(y.departureTime).getTime(),x=new Date(g.departureTime).getTime(),b=Math.abs(v-p),_=Math.abs(x-p);return b<_?y:g})},[t]),[r,s]=f.useState(n),{departureTime:a,arrivalTime:o,actualDepartureTime:i,actualArrivalTime:c,estimatedDepartureTime:u,estimatedArrivalTime:d}=f.useMemo(()=>{const p=g=>g?new Date(g):void 0;return r?{departureTime:new Date(r.departureTime),arrivalTime:new Date(r.arrivalTime),actualDepartureTime:p(r.actualDepartureTime),actualArrivalTime:p(r.actualArrivalTime),estimatedDepartureTime:p(r.estimatedDepartureTime),estimatedArrivalTime:p(r.estimatedArrivalTime)}:{}},[r]),m=f.useMemo(()=>c?c>o:d?d>o:!1,[c,o,d]),h=f.useMemo(()=>t.length<2?null:l.jsx(b2e,{flights:t,selectedFlight:r,setSelectedFlight:s}),[t,r,s]);return r?l.jsx(Wn,{"data-testid":"flight-status-widget",className:"w-full",variant:"noChrome",children:l.jsxs("div",{className:"gap-sm flex flex-col",children:[l.jsx(p2e,{flightMetadata:r,departureTime:a||Ib,arrivalTime:o||Ib,actualDepartureTime:i,actualArrivalTime:c,estimatedDepartureTime:u,estimatedArrivalTime:d,delayed:m,rightContent:h}),l.jsx(x2e,{departureTime:a||Ib,arrivalTime:o||Ib,actualDepartureTime:i,actualArrivalTime:c,estimatedDepartureTime:u,estimatedArrivalTime:d,flightMetadata:r,delayed:m})]})}):null});_2e.displayName="FlightStatusWidget";const w2e=A.memo(({children:e,entries:t,size:n="sm",footer:r})=>{const s=n!=="sm";return l.jsxs(tr,{shadow:!0,className:B("relative",s?"mb-lg pb-md":""),children:[e,l.jsx(z,{className:B("grid border-t"),children:t.map(({text:a,href:o,onClick:i})=>l.jsx("div",{className:"p-xs border-subtlest border-b last:border-b-0",onClickCapture:i,children:l.jsx(ke,{fullWidth:!0,variant:"super",chevron:!0,chevronIcon:Jr,size:"small",text:a,href:o,extraCSS:"rounded-md"})},o))}),r]})});w2e.displayName="WidgetCta";const S2e=A.memo(({data:{title:e,text:t,image_url:n,canonical_pages:r}})=>{const{$t:s}=X();return l.jsx("div",{className:"mb-md gap-md flex flex-col",children:l.jsx(w2e,{entries:r.map(a=>({text:a.cta??s({defaultMessage:"View More",id:"QQSdHPJWXu"}),href:a.url_web})),size:"sm",children:l.jsx("div",{className:"gap-md p-md flex flex-col items-center md:flex-row",children:l.jsxs("div",{className:"gap-md flex items-center",children:[n&&l.jsx("img",{alt:"",className:"w-[75px] rounded",src:n}),l.jsxs("div",{className:"mr-sm w-full",children:[e&&l.jsx(D,{variant:"baseSemi",children:e}),t&&l.jsx(D,{variant:"small",color:"light",children:t})]})]})})})})});S2e.displayName="GenericFallbackWidget";const Qi={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},C2e=Object.create(null);for(const e in Qi)Object.hasOwn(Qi,e)&&(C2e[Qi[e]]=e);const Or={to:{},get:{}};Or.get=function(e){const t=e.slice(0,3).toLowerCase();let n,r;switch(t){case"hsl":{n=Or.get.hsl(e),r="hsl";break}case"hwb":{n=Or.get.hwb(e),r="hwb";break}default:{n=Or.get.rgb(e),r="rgb";break}}return n?{model:r,value:n}:null};Or.get.rgb=function(e){if(!e)return null;const t=/^#([a-f\d]{3,4})$/i,n=/^#([a-f\d]{6})([a-f\d]{2})?$/i,r=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,s=/^rgba?\(\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,a=/^(\w+)$/;let o=[0,0,0,1],i,c,u;if(i=e.match(n)){for(u=i[2],i=i[1],c=0;c<3;c++){const d=c*2;o[c]=Number.parseInt(i.slice(d,d+2),16)}u&&(o[3]=Number.parseInt(u,16)/255)}else if(i=e.match(t)){for(i=i[1],u=i[3],c=0;c<3;c++)o[c]=Number.parseInt(i[c]+i[c],16);u&&(o[3]=Number.parseInt(u+u,16)/255)}else if(i=e.match(r)){for(c=0;c<3;c++)o[c]=Number.parseInt(i[c+1],10);i[4]&&(o[3]=i[5]?Number.parseFloat(i[4])*.01:Number.parseFloat(i[4]))}else if(i=e.match(s)){for(c=0;c<3;c++)o[c]=Math.round(Number.parseFloat(i[c+1])*2.55);i[4]&&(o[3]=i[5]?Number.parseFloat(i[4])*.01:Number.parseFloat(i[4]))}else return(i=e.match(a))?i[1]==="transparent"?[0,0,0,0]:Object.hasOwn(Qi,i[1])?(o=Qi[i[1]],o[3]=1,o):null:null;for(c=0;c<3;c++)o[c]=ou(o[c],0,255);return o[3]=ou(o[3],0,1),o};Or.get.hsl=function(e){if(!e)return null;const t=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=e.match(t);if(n){const r=Number.parseFloat(n[4]),s=(Number.parseFloat(n[1])%360+360)%360,a=ou(Number.parseFloat(n[2]),0,100),o=ou(Number.parseFloat(n[3]),0,100),i=ou(Number.isNaN(r)?1:r,0,1);return[s,a,o,i]}return null};Or.get.hwb=function(e){if(!e)return null;const t=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=e.match(t);if(n){const r=Number.parseFloat(n[4]),s=(Number.parseFloat(n[1])%360+360)%360,a=ou(Number.parseFloat(n[2]),0,100),o=ou(Number.parseFloat(n[3]),0,100),i=ou(Number.isNaN(r)?1:r,0,1);return[s,a,o,i]}return null};Or.to.hex=function(...e){return"#"+jb(e[0])+jb(e[1])+jb(e[2])+(e[3]<1?jb(Math.round(e[3]*255)):"")};Or.to.rgb=function(...e){return e.length<4||e[3]===1?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"};Or.to.rgb.percent=function(...e){const t=Math.round(e[0]/255*100),n=Math.round(e[1]/255*100),r=Math.round(e[2]/255*100);return e.length<4||e[3]===1?"rgb("+t+"%, "+n+"%, "+r+"%)":"rgba("+t+"%, "+n+"%, "+r+"%, "+e[3]+")"};Or.to.hsl=function(...e){return e.length<4||e[3]===1?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"};Or.to.hwb=function(...e){let t="";return e.length>=4&&e[3]!==1&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"};Or.to.keyword=function(...e){return C2e[e.slice(0,3)]};function ou(e,t,n){return Math.min(Math.max(t,e),n)}function jb(e){const t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}const E2e={};for(const e of Object.keys(Qi))E2e[Qi[e]]=e;const Xe={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},oklab:{channels:3,labels:["okl","oka","okb"]},lch:{channels:3,labels:"lch"},oklch:{channels:3,labels:["okl","okc","okh"]},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},zl=(6/29)**3;function Ym(e){const t=e>.0031308?1.055*e**.4166666666666667-.055:e*12.92;return Math.min(Math.max(0,t),1)}function Qm(e){return e>.04045?((e+.055)/1.055)**2.4:e/12.92}for(const e of Object.keys(Xe)){if(!("channels"in Xe[e]))throw new Error("missing channels property: "+e);if(!("labels"in Xe[e]))throw new Error("missing channel labels property: "+e);if(Xe[e].labels.length!==Xe[e].channels)throw new Error("channel and label counts mismatch: "+e);const{channels:t,labels:n}=Xe[e];delete Xe[e].channels,delete Xe[e].labels,Object.defineProperty(Xe[e],"channels",{value:t}),Object.defineProperty(Xe[e],"labels",{value:n})}Xe.rgb.hsl=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,s=Math.min(t,n,r),a=Math.max(t,n,r),o=a-s;let i,c;switch(a){case s:{i=0;break}case t:{i=(n-r)/o;break}case n:{i=2+(r-t)/o;break}case r:{i=4+(t-n)/o;break}}i=Math.min(i*60,360),i<0&&(i+=360);const u=(s+a)/2;return a===s?c=0:u<=.5?c=o/(a+s):c=o/(2-a-s),[i,c*100,u*100]};Xe.rgb.hsv=function(e){let t,n,r,s,a;const o=e[0]/255,i=e[1]/255,c=e[2]/255,u=Math.max(o,i,c),d=u-Math.min(o,i,c),m=function(h){return(u-h)/6/d+1/2};if(d===0)s=0,a=0;else{switch(a=d/u,t=m(o),n=m(i),r=m(c),u){case o:{s=r-n;break}case i:{s=1/3+t-r;break}case c:{s=2/3+n-t;break}}s<0?s+=1:s>1&&(s-=1)}return[s*360,a*100,u*100]};Xe.rgb.hwb=function(e){const t=e[0],n=e[1];let r=e[2];const s=Xe.rgb.hsl(e)[0],a=1/255*Math.min(t,Math.min(n,r));return r=1-1/255*Math.max(t,Math.max(n,r)),[s,a*100,r*100]};Xe.rgb.oklab=function(e){const t=Qm(e[0]/255),n=Qm(e[1]/255),r=Qm(e[2]/255),s=Math.cbrt(.4122214708*t+.5363325363*n+.0514459929*r),a=Math.cbrt(.2119034982*t+.6806995451*n+.1073969566*r),o=Math.cbrt(.0883024619*t+.2817188376*n+.6299787005*r),i=.2104542553*s+.793617785*a-.0040720468*o,c=1.9779984951*s-2.428592205*a+.4505937099*o,u=.0259040371*s+.7827717662*a-.808675766*o;return[i*100,c*100,u*100]};Xe.rgb.cmyk=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,s=Math.min(1-t,1-n,1-r),a=(1-t-s)/(1-s)||0,o=(1-n-s)/(1-s)||0,i=(1-r-s)/(1-s)||0;return[a*100,o*100,i*100,s*100]};function nMt(e,t){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2}Xe.rgb.keyword=function(e){const t=E2e[e];if(t)return t;let n=Number.POSITIVE_INFINITY,r;for(const s of Object.keys(Qi)){const a=Qi[s],o=nMt(e,a);o<n&&(n=o,r=s)}return r};Xe.keyword.rgb=function(e){return Qi[e]};Xe.rgb.xyz=function(e){const t=Qm(e[0]/255),n=Qm(e[1]/255),r=Qm(e[2]/255),s=t*.4124564+n*.3575761+r*.1804375,a=t*.2126729+n*.7151522+r*.072175,o=t*.0193339+n*.119192+r*.9503041;return[s*100,a*100,o*100]};Xe.rgb.lab=function(e){const t=Xe.rgb.xyz(e);let n=t[0],r=t[1],s=t[2];n/=95.047,r/=100,s/=108.883,n=n>zl?n**(1/3):7.787*n+16/116,r=r>zl?r**(1/3):7.787*r+16/116,s=s>zl?s**(1/3):7.787*s+16/116;const a=116*r-16,o=500*(n-r),i=200*(r-s);return[a,o,i]};Xe.hsl.rgb=function(e){const t=e[0]/360,n=e[1]/100,r=e[2]/100;let s,a;if(n===0)return a=r*255,[a,a,a];const o=r<.5?r*(1+n):r+n-r*n,i=2*r-o,c=[0,0,0];for(let u=0;u<3;u++)s=t+1/3*-(u-1),s<0&&s++,s>1&&s--,6*s<1?a=i+(o-i)*6*s:2*s<1?a=o:3*s<2?a=i+(o-i)*(2/3-s)*6:a=i,c[u]=a*255;return c};Xe.hsl.hsv=function(e){const t=e[0];let n=e[1]/100,r=e[2]/100,s=n;const a=Math.max(r,.01);r*=2,n*=r<=1?r:2-r,s*=a<=1?a:2-a;const o=(r+n)/2,i=r===0?2*s/(a+s):2*n/(r+n);return[t,i*100,o*100]};Xe.hsv.rgb=function(e){const t=e[0]/60,n=e[1]/100;let r=e[2]/100;const s=Math.floor(t)%6,a=t-Math.floor(t),o=255*r*(1-n),i=255*r*(1-n*a),c=255*r*(1-n*(1-a));switch(r*=255,s){case 0:return[r,c,o];case 1:return[i,r,o];case 2:return[o,r,c];case 3:return[o,i,r];case 4:return[c,o,r];case 5:return[r,o,i]}};Xe.hsv.hsl=function(e){const t=e[0],n=e[1]/100,r=e[2]/100,s=Math.max(r,.01);let a,o;o=(2-n)*r;const i=(2-n)*s;return a=n*s,a/=i<=1?i:2-i,a=a||0,o/=2,[t,a*100,o*100]};Xe.hwb.rgb=function(e){const t=e[0]/360;let n=e[1]/100,r=e[2]/100;const s=n+r;let a;s>1&&(n/=s,r/=s);const o=Math.floor(6*t),i=1-r;a=6*t-o,o&1&&(a=1-a);const c=n+a*(i-n);let u,d,m;switch(o){default:case 6:case 0:{u=i,d=c,m=n;break}case 1:{u=c,d=i,m=n;break}case 2:{u=n,d=i,m=c;break}case 3:{u=n,d=c,m=i;break}case 4:{u=c,d=n,m=i;break}case 5:{u=i,d=n,m=c;break}}return[u*255,d*255,m*255]};Xe.cmyk.rgb=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100,s=e[3]/100,a=1-Math.min(1,t*(1-s)+s),o=1-Math.min(1,n*(1-s)+s),i=1-Math.min(1,r*(1-s)+s);return[a*255,o*255,i*255]};Xe.xyz.rgb=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100;let s,a,o;return s=t*3.2404542+n*-1.5371385+r*-.4985314,a=t*-.969266+n*1.8760108+r*.041556,o=t*.0556434+n*-.2040259+r*1.0572252,s=Ym(s),a=Ym(a),o=Ym(o),[s*255,a*255,o*255]};Xe.xyz.lab=function(e){let t=e[0],n=e[1],r=e[2];t/=95.047,n/=100,r/=108.883,t=t>zl?t**(1/3):7.787*t+16/116,n=n>zl?n**(1/3):7.787*n+16/116,r=r>zl?r**(1/3):7.787*r+16/116;const s=116*n-16,a=500*(t-n),o=200*(n-r);return[s,a,o]};Xe.xyz.oklab=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100,s=Math.cbrt(.8189330101*t+.3618667424*n-.1288597137*r),a=Math.cbrt(.0329845436*t+.9293118715*n+.0361456387*r),o=Math.cbrt(.0482003018*t+.2643662691*n+.633851707*r),i=.2104542553*s+.793617785*a-.0040720468*o,c=1.9779984951*s-2.428592205*a+.4505937099*o,u=.0259040371*s+.7827717662*a-.808675766*o;return[i*100,c*100,u*100]};Xe.oklab.oklch=function(e){return Xe.lab.lch(e)};Xe.oklab.xyz=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100,s=(.999999998*t+.396337792*n+.215803758*r)**3,a=(1.000000008*t-.105561342*n-.063854175*r)**3,o=(1.000000055*t-.089484182*n-1.291485538*r)**3,i=1.227013851*s-.55779998*a+.281256149*o,c=-.040580178*s+1.11225687*a-.071676679*o,u=-.076381285*s-.421481978*a+1.58616322*o;return[i*100,c*100,u*100]};Xe.oklab.rgb=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100,s=(t+.3963377774*n+.2158037573*r)**3,a=(t-.1055613458*n-.0638541728*r)**3,o=(t-.0894841775*n-1.291485548*r)**3,i=Ym(4.0767416621*s-3.3077115913*a+.2309699292*o),c=Ym(-1.2684380046*s+2.6097574011*a-.3413193965*o),u=Ym(-.0041960863*s-.7034186147*a+1.707614701*o);return[i*255,c*255,u*255]};Xe.oklch.oklab=function(e){return Xe.lch.lab(e)};Xe.lab.xyz=function(e){const t=e[0],n=e[1],r=e[2];let s,a,o;a=(t+16)/116,s=n/500+a,o=a-r/200;const i=a**3,c=s**3,u=o**3;return a=i>zl?i:(a-16/116)/7.787,s=c>zl?c:(s-16/116)/7.787,o=u>zl?u:(o-16/116)/7.787,s*=95.047,a*=100,o*=108.883,[s,a,o]};Xe.lab.lch=function(e){const t=e[0],n=e[1],r=e[2];let s;s=Math.atan2(r,n)*360/2/Math.PI,s<0&&(s+=360);const o=Math.sqrt(n*n+r*r);return[t,o,s]};Xe.lch.lab=function(e){const t=e[0],n=e[1],s=e[2]/360*2*Math.PI,a=n*Math.cos(s),o=n*Math.sin(s);return[t,a,o]};Xe.rgb.ansi16=function(e,t=null){const[n,r,s]=e;let a=t===null?Xe.rgb.hsv(e)[2]:t;if(a=Math.round(a/50),a===0)return 30;let o=30+(Math.round(s/255)<<2|Math.round(r/255)<<1|Math.round(n/255));return a===2&&(o+=60),o};Xe.hsv.ansi16=function(e){return Xe.rgb.ansi16(Xe.hsv.rgb(e),e[2])};Xe.rgb.ansi256=function(e){const t=e[0],n=e[1],r=e[2];return t>>4===n>>4&&n>>4===r>>4?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)};Xe.ansi16.rgb=function(e){e=e[0];let t=e%10;if(t===0||t===7)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];const n=(Math.trunc(e>50)+1)*.5,r=(t&1)*n*255,s=(t>>1&1)*n*255,a=(t>>2&1)*n*255;return[r,s,a]};Xe.ansi256.rgb=function(e){if(e=e[0],e>=232){const a=(e-232)*10+8;return[a,a,a]}e-=16;let t;const n=Math.floor(e/36)/5*255,r=Math.floor((t=e%36)/6)/5*255,s=t%6/5*255;return[n,r,s]};Xe.rgb.hex=function(e){const n=(((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255)).toString(16).toUpperCase();return"000000".slice(n.length)+n};Xe.hex.rgb=function(e){const t=e.toString(16).match(/[a-f\d]{6}|[a-f\d]{3}/i);if(!t)return[0,0,0];let n=t[0];t[0].length===3&&(n=[...n].map(i=>i+i).join(""));const r=Number.parseInt(n,16),s=r>>16&255,a=r>>8&255,o=r&255;return[s,a,o]};Xe.rgb.hcg=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,s=Math.max(Math.max(t,n),r),a=Math.min(Math.min(t,n),r),o=s-a;let i;const c=o<1?a/(1-o):0;return o<=0?i=0:s===t?i=(n-r)/o%6:s===n?i=2+(r-t)/o:i=4+(t-n)/o,i/=6,i%=1,[i*360,o*100,c*100]};Xe.hsl.hcg=function(e){const t=e[1]/100,n=e[2]/100,r=n<.5?2*t*n:2*t*(1-n);let s=0;return r<1&&(s=(n-.5*r)/(1-r)),[e[0],r*100,s*100]};Xe.hsv.hcg=function(e){const t=e[1]/100,n=e[2]/100,r=t*n;let s=0;return r<1&&(s=(n-r)/(1-r)),[e[0],r*100,s*100]};Xe.hcg.rgb=function(e){const t=e[0]/360,n=e[1]/100,r=e[2]/100;if(n===0)return[r*255,r*255,r*255];const s=[0,0,0],a=t%1*6,o=a%1,i=1-o;let c=0;switch(Math.floor(a)){case 0:{s[0]=1,s[1]=o,s[2]=0;break}case 1:{s[0]=i,s[1]=1,s[2]=0;break}case 2:{s[0]=0,s[1]=1,s[2]=o;break}case 3:{s[0]=0,s[1]=i,s[2]=1;break}case 4:{s[0]=o,s[1]=0,s[2]=1;break}default:s[0]=1,s[1]=0,s[2]=i}return c=(1-n)*r,[(n*s[0]+c)*255,(n*s[1]+c)*255,(n*s[2]+c)*255]};Xe.hcg.hsv=function(e){const t=e[1]/100,n=e[2]/100,r=t+n*(1-t);let s=0;return r>0&&(s=t/r),[e[0],s*100,r*100]};Xe.hcg.hsl=function(e){const t=e[1]/100,r=e[2]/100*(1-t)+.5*t;let s=0;return r>0&&r<.5?s=t/(2*r):r>=.5&&r<1&&(s=t/(2*(1-r))),[e[0],s*100,r*100]};Xe.hcg.hwb=function(e){const t=e[1]/100,n=e[2]/100,r=t+n*(1-t);return[e[0],(r-t)*100,(1-r)*100]};Xe.hwb.hcg=function(e){const t=e[1]/100,r=1-e[2]/100,s=r-t;let a=0;return s<1&&(a=(r-s)/(1-s)),[e[0],s*100,a*100]};Xe.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};Xe.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};Xe.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};Xe.gray.hsl=function(e){return[0,0,e[0]]};Xe.gray.hsv=Xe.gray.hsl;Xe.gray.hwb=function(e){return[0,100,e[0]]};Xe.gray.cmyk=function(e){return[0,0,0,e[0]]};Xe.gray.lab=function(e){return[e[0],0,0]};Xe.gray.hex=function(e){const t=Math.round(e[0]/100*255)&255,r=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".slice(r.length)+r};Xe.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]};function rMt(){const e={},t=Object.keys(Xe);for(let{length:n}=t,r=0;r<n;r++)e[t[r]]={distance:-1,parent:null};return e}function sMt(e){const t=rMt(),n=[e];for(t[e].distance=0;n.length>0;){const r=n.pop(),s=Object.keys(Xe[r]);for(let{length:a}=s,o=0;o<a;o++){const i=s[o],c=t[i];c.distance===-1&&(c.distance=t[r].distance+1,c.parent=r,n.unshift(i))}}return t}function aMt(e,t){return function(n){return t(e(n))}}function oMt(e,t){const n=[t[e].parent,e];let r=Xe[t[e].parent][e],s=t[e].parent;for(;t[s].parent;)n.unshift(t[s].parent),r=aMt(Xe[t[s].parent][s],r),s=t[s].parent;return r.conversion=n,r}function iMt(e){const t=sMt(e),n={},r=Object.keys(t);for(let{length:s}=r,a=0;a<s;a++){const o=r[a];t[o].parent!==null&&(n[o]=oMt(o,t))}return n}const qr={},lMt=Object.keys(Xe);function cMt(e){const t=function(...n){const r=n[0];return r==null?r:(r.length>1&&(n=r),e(n))};return"conversion"in e&&(t.conversion=e.conversion),t}function uMt(e){const t=function(...n){const r=n[0];if(r==null)return r;r.length>1&&(n=r);const s=e(n);if(typeof s=="object")for(let{length:a}=s,o=0;o<a;o++)s[o]=Math.round(s[o]);return s};return"conversion"in e&&(t.conversion=e.conversion),t}for(const e of lMt){qr[e]={},Object.defineProperty(qr[e],"channels",{value:Xe[e].channels}),Object.defineProperty(qr[e],"labels",{value:Xe[e].labels});const t=iMt(e),n=Object.keys(t);for(const r of n){const s=t[r];qr[e][r]=uMt(s),qr[e][r].raw=cMt(s)}}const M2e=["keyword","gray","hex"],pj={};for(const e of Object.keys(qr))pj[[...qr[e].labels].sort().join("")]=e;const gj={};function Bn(e,t){if(!(this instanceof Bn))return new Bn(e,t);if(t&&t in M2e&&(t=null),t&&!(t in qr))throw new Error("Unknown model: "+t);let n,r;if(e==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof Bn)this.model=e.model,this.color=[...e.color],this.valpha=e.valpha;else if(typeof e=="string"){const s=Or.get(e);if(s===null)throw new Error("Unable to parse color from string: "+e);this.model=s.model,r=qr[this.model].channels,this.color=s.value.slice(0,r),this.valpha=typeof s.value[r]=="number"?s.value[r]:1}else if(e.length>0){this.model=t||"rgb",r=qr[this.model].channels;const s=Array.prototype.slice.call(e,0,r);this.color=yj(s,r),this.valpha=typeof e[r]=="number"?e[r]:1}else if(typeof e=="number")this.model="rgb",this.color=[e>>16&255,e>>8&255,e&255],this.valpha=1;else{this.valpha=1;const s=Object.keys(e);"alpha"in e&&(s.splice(s.indexOf("alpha"),1),this.valpha=typeof e.alpha=="number"?e.alpha:0);const a=s.sort().join("");if(!(a in pj))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=pj[a];const{labels:o}=qr[this.model],i=[];for(n=0;n<o.length;n++)i.push(e[o[n]]);this.color=yj(i)}if(gj[this.model])for(r=qr[this.model].channels,n=0;n<r;n++){const s=gj[this.model][n];s&&(this.color[n]=s(this.color[n]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}Bn.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(e){let t=this.model in Or.to?this:this.rgb();t=t.round(typeof e=="number"?e:1);const n=t.valpha===1?t.color:[...t.color,this.valpha];return Or.to[t.model](...n)},percentString(e){const t=this.rgb().round(typeof e=="number"?e:1),n=t.valpha===1?t.color:[...t.color,this.valpha];return Or.to.rgb.percent(...n)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const e={},{channels:t}=qr[this.model],{labels:n}=qr[this.model];for(let r=0;r<t;r++)e[n[r]]=this.color[r];return this.valpha!==1&&(e.alpha=this.valpha),e},unitArray(){const e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,this.valpha!==1&&e.push(this.valpha),e},unitObject(){const e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,this.valpha!==1&&(e.alpha=this.valpha),e},round(e){return e=Math.max(e||0,0),new Bn([...this.color.map(fMt(e)),this.valpha],this.model)},alpha(e){return e!==void 0?new Bn([...this.color,Math.max(0,Math.min(1,e))],this.model):this.valpha},red:lr("rgb",0,Ar(255)),green:lr("rgb",1,Ar(255)),blue:lr("rgb",2,Ar(255)),hue:lr(["hsl","hsv","hsl","hwb","hcg"],0,e=>(e%360+360)%360),saturationl:lr("hsl",1,Ar(100)),lightness:lr("hsl",2,Ar(100)),saturationv:lr("hsv",1,Ar(100)),value:lr("hsv",2,Ar(100)),chroma:lr("hcg",1,Ar(100)),gray:lr("hcg",2,Ar(100)),white:lr("hwb",1,Ar(100)),wblack:lr("hwb",2,Ar(100)),cyan:lr("cmyk",0,Ar(100)),magenta:lr("cmyk",1,Ar(100)),yellow:lr("cmyk",2,Ar(100)),black:lr("cmyk",3,Ar(100)),x:lr("xyz",0,Ar(95.047)),y:lr("xyz",1,Ar(100)),z:lr("xyz",2,Ar(108.833)),l:lr("lab",0,Ar(100)),a:lr("lab",1),b:lr("lab",2),keyword(e){return e!==void 0?new Bn(e):qr[this.model].keyword(this.color)},hex(e){return e!==void 0?new Bn(e):Or.to.hex(...this.rgb().round().color)},hexa(e){if(e!==void 0)return new Bn(e);const t=this.rgb().round().color;let n=Math.round(this.valpha*255).toString(16).toUpperCase();return n.length===1&&(n="0"+n),Or.to.hex(...t)+n},rgbNumber(){const e=this.rgb().color;return(e[0]&255)<<16|(e[1]&255)<<8|e[2]&255},luminosity(){const e=this.rgb().color,t=[];for(const[n,r]of e.entries()){const s=r/255;t[n]=s<=.04045?s/12.92:((s+.055)/1.055)**2.4}return .2126*t[0]+.7152*t[1]+.0722*t[2]},contrast(e){const t=this.luminosity(),n=e.luminosity();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)},level(e){const t=this.contrast(e);return t>=7?"AAA":t>=4.5?"AA":""},isDark(){const e=this.rgb().color;return(e[0]*2126+e[1]*7152+e[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const e=this.rgb();for(let t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten(e){const t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken(e){const t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate(e){const t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate(e){const t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten(e){const t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken(e){const t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale(){const e=this.rgb().color,t=e[0]*.3+e[1]*.59+e[2]*.11;return Bn.rgb(t,t,t)},fade(e){return this.alpha(this.valpha-this.valpha*e)},opaquer(e){return this.alpha(this.valpha+this.valpha*e)},rotate(e){const t=this.hsl();let n=t.color[0];return n=(n+e)%360,n=n<0?360+n:n,t.color[0]=n,t},mix(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);const n=e.rgb(),r=this.rgb(),s=t===void 0?.5:t,a=2*s-1,o=n.alpha()-r.alpha(),i=((a*o===-1?a:(a+o)/(1+a*o))+1)/2,c=1-i;return Bn.rgb(i*n.red()+c*r.red(),i*n.green()+c*r.green(),i*n.blue()+c*r.blue(),n.alpha()*s+r.alpha()*(1-s))}};for(const e of Object.keys(qr)){if(M2e.includes(e))continue;const{channels:t}=qr[e];Bn.prototype[e]=function(...n){return this.model===e?new Bn(this):n.length>0?new Bn(n,e):new Bn([...mMt(qr[this.model][e].raw(this.color)),this.valpha],e)},Bn[e]=function(...n){let r=n[0];return typeof r=="number"&&(r=yj(n,t)),new Bn(r,e)}}function dMt(e,t){return Number(e.toFixed(t))}function fMt(e){return function(t){return dMt(t,e)}}function lr(e,t,n){e=Array.isArray(e)?e:[e];for(const r of e)(gj[r]||=[])[t]=n;return e=e[0],function(r){let s;return r!==void 0?(n&&(r=n(r)),s=this[e](),s.color[t]=r,s):(s=this[e]().color[t],n&&(s=n(s)),s)}}function Ar(e){return function(t){return Math.max(0,Math.min(e,t))}}function mMt(e){return Array.isArray(e)?e:[e]}function yj(e,t){for(let n=0;n<t;n++)typeof e[n]!="number"&&(e[n]=0);return e}const sM=A.memo(({size:e="default",className:t,includeDot:n})=>{const{$t:r}=X();return l.jsx("div",{className:B("flex shrink-0 items-center justify-center",t),children:l.jsxs(D,{variant:e==="tiny"?"micro":"tiny",color:"super",className:B("bg-superBG flex shrink-0 items-center rounded-full py-0.5 pt-[3px] tracking-wider",{"px-2.5":e==="default","pl-2":e==="default"&&n,"px-2":e==="small","px-1.5":e==="tiny"}),children:[n&&l.jsxs("span",{className:"grid",children:[l.jsx("span",{className:"bg-super mr-1 size-1.5 rounded-full",style:{gridArea:"1/-1"}}),l.jsx("span",{className:"bg-super mr-1 size-1.5 animate-ping rounded-full",style:{gridArea:"1/-1"}})]}),r({defaultMessage:"Live",id:"Dn82ALx/+V"}).toUpperCase()]})})}),hMt=["West First Round","East First Round","Western Conference Semifinals","Eastern Conference Semifinals","Western Conference Finals","Eastern Conference Finals","NBA Finals"],T2e=e=>hMt.includes(e);function pMt(e){return e!==null&&typeof e=="object"&&"is_bye_event"in e&&typeof e.is_bye_event=="boolean"}function k2e(e,t){return t.find(n=>String(n.teamId)===String(e))}const gMt=e=>{switch(e){case"nba":case"wnba":case"ncaam":case"ncaaw":case"mlb":case"atp":case"wta":return"/static/images/sports/nba/logos/nba-logo-generic.png";case"nfl":return"/static/images/sports/nfl/logos/nfl-logo-generic.png";case"ipl":case"cricket":case"icc":return"/static/images/sports/cricket/logos/cricket-logo-generic.png";default:return""}},yMt="#64645F";function qh(e,t,n){const r={teamId:e,logo:gMt(n),color:yMt};return k2e(e,t)??r}function vMt(e,t){return t.find(n=>n.teamId===e)}function aM(e){return[...e].sort((t,n)=>n.teamLocationType.teamLocationTypeId-t.teamLocationType.teamLocationTypeId)}function oHt(e){if(!e||e.wins+e.losses+e.ties===0)return"";const{wins:t,losses:n,ties:r}=e;return r?`${t}-${n}-${r}`:`${t}-${n}`}function iHt(e,t){return t.winProbabilities?.find(n=>n.teamId===e)}function xMt(e,t,n,r){const s=qh(e,n,r),a=vMt(e,t),o=t.find(c=>c.teamId===e)?.seed,i=bMt(r);return{teamId:a.teamId,logo:s.logo,color:s.color,nickname:i?a.location:a.nickname,abbreviation:a.abbreviation,record:a.record,winner:a.isWinner,score:a.score,seed:o}}const bMt=e=>e==="ncaam"||e==="ncaaw";function _Mt(e,t,n,r){const s=qh(e,n,r),a=t.find(o=>o.id===e);return a?{teamId:a.id,logo:s.logo,color:s.color,nickname:a.title??"",abbreviation:a.abbreviation??""}:{teamId:e,logo:s.logo,color:s.color,nickname:"",abbreviation:""}}function lHt(e,t,n){return aM(e)?.map(r=>xMt(r.teamId,e,t,n))}function cHt(e,t,n){return e.map(r=>_Mt(r.id,e,t,n))}function uHt(e,t){for(const n of t)for(const r of n.divisions)for(const s of r.teams)if(s.teamId===e)return{conference:n.abbreviation,division:r.name};return null}const dHt=e=>e?"nickname"in e?e.nickname:e.title:null,fHt=e=>e?"teamId"in e?e.teamId:e.id:null,mHt=e=>"score"in e?e.score:e.sub_text&&e.text?`${e.text} ${e.sub_text}`:e.text,wMt=e=>"isWinner"in e?e.isWinner:e.won,hHt=e=>e?e.some(t=>wMt(t)):!1,pHt=e=>e?"teamId"in e[0]?e.every(t=>"teamId"in t)&&!e.some(t=>!t.teamId||String(t.teamId)==="TBD"):e.every(t=>"id"in t)&&!e.some(t=>t.id==="TBD"):!1,gHt=e=>!e.team_1||!e.team_2||pMt(e.extra)&&e.extra.is_bye_event?!1:e.team_1.id&&e.team_2.id&&e.team_1.id!=="TBD"&&e.team_2.id!=="TBD",yHt=e=>"id"in e,vHt=e=>!!e.team_1.won||!!e.team_2.won;var Yg={},vJ;function U1(){if(vJ)return Yg;vJ=1,Yg.__esModule=!0,Yg.default=void 0;var e={top:"top",left:"left",right:"right",bottom:"bottom"};return Yg.default=e,Yg}var SMt=U1();const CMt=Ha(SMt);var P5,xJ;function EMt(){if(xJ)return P5;xJ=1,P5=e;function e(r,s,a){r instanceof RegExp&&(r=t(r,a)),s instanceof RegExp&&(s=t(s,a));var o=n(r,s,a);return o&&{start:o[0],end:o[1],pre:a.slice(0,o[0]),body:a.slice(o[0]+r.length,o[1]),post:a.slice(o[1]+s.length)}}function t(r,s){var a=s.match(r);return a?a[0]:null}e.range=n;function n(r,s,a){var o,i,c,u,d,m=a.indexOf(r),h=a.indexOf(s,m+1),p=m;if(m>=0&&h>0){for(o=[],c=a.length;p>=0&&!d;)p==m?(o.push(p),m=a.indexOf(r,p+1)):o.length==1?d=[o.pop(),h]:(i=o.pop(),i<c&&(c=i,u=h),h=a.indexOf(s,p+1)),p=m<h&&m>=0?m:h;o.length&&(d=[c,u])}return d}return P5}var R5,bJ;function MMt(){if(bJ)return R5;bJ=1,R5=e;function e(r,s,a){r instanceof RegExp&&(r=t(r,a)),s instanceof RegExp&&(s=t(s,a));var o=n(r,s,a);return o&&{start:o[0],end:o[1],pre:a.slice(0,o[0]),body:a.slice(o[0]+r.length,o[1]),post:a.slice(o[1]+s.length)}}function t(r,s){var a=s.match(r);return a?a[0]:null}e.range=n;function n(r,s,a){var o,i,c,u,d,m=a.indexOf(r),h=a.indexOf(s,m+1),p=m;if(m>=0&&h>0){if(r===s)return[m,h];for(o=[],c=a.length;p>=0&&!d;)p==m?(o.push(p),m=a.indexOf(r,p+1)):o.length==1?d=[o.pop(),h]:(i=o.pop(),i<c&&(c=i,u=h),h=a.indexOf(s,p+1)),p=m<h&&m>=0?m:h;o.length&&(d=[c,u])}return d}return R5}var I5,_J;function TMt(){if(_J)return I5;_J=1;var e=MMt();I5=t;function t(s,a,o){var i=s;return n(s,a).reduce(function(c,u){return c.replace(u.functionIdentifier+"("+u.matches.body+")",r(u.matches.body,u.functionIdentifier,o,i,a))},s)}function n(s,a){var o=[],i=typeof a=="string"?new RegExp("\\b("+a+")\\("):a;do{var c=i.exec(s);if(!c)return o;if(c[1]===void 0)throw new Error("Missing the first couple of parenthesis to get the function identifier in "+a);var u=c[1],d=c.index,m=e("(",")",s.substring(d));if(!m||m.start!==c[0].length-1)throw new SyntaxError(u+"(): missing closing ')' in the value '"+s+"'");o.push({matches:m,functionIdentifier:u}),s=m.post}while(i.test(s));return o}function r(s,a,o,i,c){return o(t(s,c,o),a,i)}return I5}var j5,wJ;function kMt(){if(wJ)return j5;wJ=1;var e=function(t){this.value=t};return e.math={isDegree:!0,acos:function(t){return e.math.isDegree?180/Math.PI*Math.acos(t):Math.acos(t)},add:function(t,n){return t+n},asin:function(t){return e.math.isDegree?180/Math.PI*Math.asin(t):Math.asin(t)},atan:function(t){return e.math.isDegree?180/Math.PI*Math.atan(t):Math.atan(t)},acosh:function(t){return Math.log(t+Math.sqrt(t*t-1))},asinh:function(t){return Math.log(t+Math.sqrt(t*t+1))},atanh:function(t){return Math.log((1+t)/(1-t))},C:function(t,n){var r=1,s=t-n,a=n;a<s&&(a=s,s=n);for(var o=a+1;o<=t;o++)r*=o;return r/e.math.fact(s)},changeSign:function(t){return-t},cos:function(t){return e.math.isDegree&&(t=e.math.toRadian(t)),Math.cos(t)},cosh:function(t){return(Math.pow(Math.E,t)+Math.pow(Math.E,-1*t))/2},div:function(t,n){return t/n},fact:function(t){if(t%1!==0)return"NaN";for(var n=1,r=2;r<=t;r++)n*=r;return n},inverse:function(t){return 1/t},log:function(t){return Math.log(t)/Math.log(10)},mod:function(t,n){return t%n},mul:function(t,n){return t*n},P:function(t,n){for(var r=1,s=Math.floor(t)-Math.floor(n)+1;s<=Math.floor(t);s++)r*=s;return r},Pi:function(t,n,r){for(var s=1,a=t;a<=n;a++)s*=Number(r.postfixEval({n:a}));return s},pow10x:function(t){for(var n=1;t--;)n*=10;return n},sigma:function(t,n,r){for(var s=0,a=t;a<=n;a++)s+=Number(r.postfixEval({n:a}));return s},sin:function(t){return e.math.isDegree&&(t=e.math.toRadian(t)),Math.sin(t)},sinh:function(t){return(Math.pow(Math.E,t)-Math.pow(Math.E,-1*t))/2},sub:function(t,n){return t-n},tan:function(t){return e.math.isDegree&&(t=e.math.toRadian(t)),Math.tan(t)},tanh:function(t){return e.sinha(t)/e.cosha(t)},toRadian:function(t){return t*Math.PI/180},and:function(t,n){return t&n}},e.Exception=function(t){this.message=t},j5=e,j5}var O5,SJ;function NMt(){if(SJ)return O5;SJ=1;var e=kMt();function t(b,_){for(var w=0;w<b.length;w++)b[w]+=_;return b}for(var n=[{token:"sin",show:"sin",type:0,value:e.math.sin},{token:"cos",show:"cos",type:0,value:e.math.cos},{token:"tan",show:"tan",type:0,value:e.math.tan},{token:"pi",show:"&pi;",type:3,value:"PI"},{token:"(",show:"(",type:4,value:"("},{token:")",show:")",type:5,value:")"},{token:"P",show:"P",type:10,value:e.math.P},{token:"C",show:"C",type:10,value:e.math.C},{token:" ",show:" ",type:14,value:" ".anchor},{token:"asin",show:"asin",type:0,value:e.math.asin},{token:"acos",show:"acos",type:0,value:e.math.acos},{token:"atan",show:"atan",type:0,value:e.math.atan},{token:"7",show:"7",type:1,value:"7"},{token:"8",show:"8",type:1,value:"8"},{token:"9",show:"9",type:1,value:"9"},{token:"int",show:"Int",type:0,value:Math.floor},{token:"cosh",show:"cosh",type:0,value:e.math.cosh},{token:"acosh",show:"acosh",type:0,value:e.math.acosh},{token:"ln",show:" ln",type:0,value:Math.log},{token:"^",show:"^",type:10,value:Math.pow},{token:"root",show:"root",type:0,value:Math.sqrt},{token:"4",show:"4",type:1,value:"4"},{token:"5",show:"5",type:1,value:"5"},{token:"6",show:"6",type:1,value:"6"},{token:"/",show:"&divide;",type:2,value:e.math.div},{token:"!",show:"!",type:7,value:e.math.fact},{token:"tanh",show:"tanh",type:0,value:e.math.tanh},{token:"atanh",show:"atanh",type:0,value:e.math.atanh},{token:"Mod",show:" Mod ",type:2,value:e.math.mod},{token:"1",show:"1",type:1,value:"1"},{token:"2",show:"2",type:1,value:"2"},{token:"3",show:"3",type:1,value:"3"},{token:"*",show:"&times;",type:2,value:e.math.mul},{token:"sinh",show:"sinh",type:0,value:e.math.sinh},{token:"asinh",show:"asinh",type:0,value:e.math.asinh},{token:"e",show:"e",type:3,value:"E"},{token:"log",show:" log",type:0,value:e.math.log},{token:"0",show:"0",type:1,value:"0"},{token:".",show:".",type:6,value:"."},{token:"+",show:"+",type:9,value:e.math.add},{token:"-",show:"-",type:9,value:e.math.sub},{token:",",show:",",type:11,value:","},{token:"Sigma",show:"&Sigma;",type:12,value:e.math.sigma},{token:"n",show:"n",type:13,value:"n"},{token:"Pi",show:"&Pi;",type:12,value:e.math.Pi},{token:"pow",show:"pow",type:8,value:Math.pow,numberOfArguments:2},{token:"&",show:"&",type:9,value:e.math.and}],r={0:11,1:0,2:3,3:0,4:0,5:0,6:0,7:11,8:11,9:1,10:10,11:0,12:11,13:0,14:-1,15:11},s=0;s<n.length;s++)n[s].precedence=r[n[s].type];var a={0:!0,1:!0,3:!0,4:!0,6:!0,8:!0,9:!0,12:!0,13:!0,14:!0,15:!0},o={0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0,10:!0,11:!0,12:!0,13:!0,15:!0},i={0:!0,3:!0,4:!0,8:!0,12:!0,13:!0,15:!0},c={},u={0:!0,1:!0,3:!0,4:!0,6:!0,8:!0,12:!0,13:!0,15:!0},d={1:!0},m=[[],["1","2","3","7","8","9","4","5","6","+","-","*","/","(",")","^","!","P","C","e","0",".",",","n"," ","&"],["pi","ln","Pi"],["sin","cos","tan","Del","int","Mod","log","pow"],["asin","acos","atan","cosh","root","tanh","sinh"],["acosh","atanh","asinh","Sigma"]];function h(b,_,w,S){for(var C=0;C<S;C++)if(b[w+C]!==_[C])return!1;return!0}e.tokenTypes={FUNCTION_WITH_ONE_ARG:0,NUMBER:1,BINARY_OPERATOR_HIGH_PRECENDENCE:2,CONSTANT:3,OPENING_PARENTHESIS:4,CLOSING_PARENTHESIS:5,DECIMAL:6,POSTFIX_FUNCTION_WITH_ONE_ARG:7,FUNCTION_WITH_N_ARGS:8,BINARY_OPERATOR_LOW_PRECENDENCE:9,BINARY_OPERATOR_PERMUTATION:10,COMMA:11,EVALUATED_FUNCTION:12,EVALUATED_FUNCTION_PARAMETER:13,SPACE:14},e.addToken=function(b){for(var _=0;_<b.length;_++){var w=b[_].token.length,S=-1;b[_].type===e.tokenTypes.FUNCTION_WITH_N_ARGS&&b[_].numberOfArguments===void 0&&(b[_].numberOfArguments=2),m[w]=m[w]||[];for(var C=0;C<m[w].length;C++)if(b[_].token===m[w][C]){S=p(m[w][C],n);break}S===-1?(n.push(b[_]),b[_].precedence=r[b[_].type],m.length<=b[_].token.length&&(m[b[_].token.length]=[]),m[b[_].token.length].push(b[_].token)):(n[S]=b[_],b[_].precedence=r[b[_].type])}};function p(b,_){for(var w=0;w<_.length;w++)if(_[w].token===b)return w;return-1}function g(b){for(var _=[],w=b.length,S,C,E,M=0;M<w;M++)if(!(M<w-1&&b[M]===" "&&b[M+1]===" ")){for(S="",C=b.length-M>m.length-2?m.length-1:b.length-M;C>0;C--)if(m[C]!==void 0)for(E=0;E<m[C].length;E++)h(b,m[C][E],M,C)&&(S=m[C][E],E=m[C].length,C=0);if(M+=S.length-1,S==="")throw new e.Exception("Can't understand after "+b.slice(M));_.push(n[p(S,n)])}return _}var y={value:e.math.changeSign,type:0,pre:21,show:"-"},v={value:")",show:")",type:5,pre:0},x={value:"(",type:4,pre:0,show:"("};return e.lex=function(b,_){var w=[x],S=[],C=b,E=a,M=0,T=c,I="",j;typeof _<"u"&&e.addToken(_);var N={},P=g(C);for(j=0;j<P.length;j++){var R=P[j];if(R.type===14){if(j>0&&j<P.length-1&&P[j+1].type===1&&(P[j-1].type===1||P[j-1].type===6))throw new e.Exception("Unexpected Space");continue}var k=R.token,O=R.type,L=R.value,F=R.precedence,U=R.show,V=w[w.length-1],W;for(W=S.length;W--&&S[W]===0;)if([0,2,3,4,5,9,11,12,13].indexOf(O)!==-1){if(E[O]!==!0)throw new e.Exception(k+" is not allowed after "+I);w.push(v),E=o,T=u,S.pop()}if(E[O]!==!0)throw new e.Exception(k+" is not allowed after "+I);if(T[O]===!0&&(O=2,L=e.math.mul,U="&times;",F=3,j=j-1),N={value:L,type:O,pre:F,show:U,numberOfArguments:R.numberOfArguments},O===0)E=a,T=c,t(S,2),w.push(N),P[j+1].type!==4&&(w.push(x),S.push(2));else if(O===1)V.type===1?(V.value+=L,t(S,1)):w.push(N),E=o,T=i;else if(O===2)E=a,T=c,t(S,2),w.push(N);else if(O===3)w.push(N),E=o,T=u;else if(O===4)t(S,1),M++,E=a,T=c,w.push(N);else if(O===5){if(!M)throw new e.Exception("Closing parenthesis are more than opening one, wait What!!!");M--,E=o,T=u,w.push(N),t(S,1)}else if(O===6){if(V.hasDec)throw new e.Exception("Two decimals are not allowed in one number");V.type!==1&&(V={value:0,type:1,pre:0},w.push(V)),E=d,t(S,1),T=c,V.value+=L,V.hasDec=!0}else O===7&&(E=o,T=u,t(S,1),w.push(N));O===8?(E=a,T=c,t(S,R.numberOfArguments+2),w.push(N),P[j+1].type!==4&&(w.push(x),S.push(R.numberOfArguments+2))):O===9?(V.type===9?V.value===e.math.add?(V.value=L,V.show=U,t(S,1)):V.value===e.math.sub&&U==="-"&&(V.value=e.math.add,V.show="+",t(S,1)):V.type!==5&&V.type!==7&&V.type!==1&&V.type!==3&&V.type!==13?k==="-"&&(E=a,T=c,t(S,2).push(2),w.push(y),w.push(x)):(w.push(N),t(S,2)),E=a,T=c):O===10?(E=a,T=c,t(S,2),w.push(N)):O===11?(E=a,T=c,w.push(N)):O===12?(E=a,T=c,t(S,6),w.push(N),P[j+1].type!==4&&(w.push(x),S.push(6))):O===13&&(E=o,T=u,w.push(N)),t(S,-1),I=k}for(W=S.length;W--;)w.push(v);if(E[5]!==!0)throw new e.Exception("complete the expression");for(;M--;)w.push(v);return w.push(v),new e(w)},O5=e,O5}var L5,CJ;function AMt(){if(CJ)return L5;CJ=1;var e=NMt();return e.prototype.toPostfix=function(){for(var t=[],n,r,s,a,o,i=[{value:"(",type:4,pre:0}],c=this.value,u=1;u<c.length;u++)if(c[u].type===1||c[u].type===3||c[u].type===13)c[u].type===1&&(c[u].value=Number(c[u].value)),t.push(c[u]);else if(c[u].type===4)i.push(c[u]);else if(c[u].type===5)for(;(r=i.pop()).type!==4;)t.push(r);else if(c[u].type===11){for(;(r=i.pop()).type!==4;)t.push(r);i.push(r)}else{n=c[u],a=n.pre,o=i[i.length-1],s=o.pre;var d=o.value=="Math.pow"&&n.value=="Math.pow";if(a>s)i.push(n);else{for(;s>=a&&!d||d&&a<s;)r=i.pop(),o=i[i.length-1],t.push(r),s=o.pre,d=n.value=="Math.pow"&&o.value=="Math.pow";i.push(n)}}return new e(t)},L5=e,L5}var D5,EJ;function PMt(){if(EJ)return D5;EJ=1;var e=AMt();return e.prototype.postfixEval=function(t){t=t||{},t.PI=Math.PI,t.E=Math.E;for(var n=[],r,s,a,o=this.value,i=typeof t.n<"u",c=0;c<o.length;c++)if(o[c].type===1)n.push({value:o[c].value,type:1});else if(o[c].type===3)n.push({value:t[o[c].value],type:1});else if(o[c].type===0)typeof n[n.length-1].type>"u"?n[n.length-1].value.push(o[c]):n[n.length-1].value=o[c].value(n[n.length-1].value);else if(o[c].type===7)typeof n[n.length-1].type>"u"?n[n.length-1].value.push(o[c]):n[n.length-1].value=o[c].value(n[n.length-1].value);else if(o[c].type===8){for(var u=[],d=0;d<o[c].numberOfArguments;d++)u.push(n.pop().value);n.push({type:1,value:o[c].value.apply(o[c],u.reverse())})}else o[c].type===10?(r=n.pop(),s=n.pop(),typeof s.type>"u"?(s.value=s.concat(r),s.value.push(o[c]),n.push(s)):typeof r.type>"u"?(r.unshift(s),r.push(o[c]),n.push(r)):n.push({type:1,value:o[c].value(s.value,r.value)})):o[c].type===2||o[c].type===9?(r=n.pop(),s=n.pop(),typeof s.type>"u"?(s=s.concat(r),s.push(o[c]),n.push(s)):typeof r.type>"u"?(r.unshift(s),r.push(o[c]),n.push(r)):n.push({type:1,value:o[c].value(s.value,r.value)})):o[c].type===12?(r=n.pop(),typeof r.type<"u"&&(r=[r]),s=n.pop(),a=n.pop(),n.push({type:1,value:o[c].value(a.value,s.value,new e(r))})):o[c].type===13&&(i?n.push({value:t[o[c].value],type:3}):n.push([o[c]]));if(n.length>1)throw new e.Exception("Uncaught Syntax error");return n[0].value>1e15?"Infinity":parseFloat(n[0].value.toFixed(15))},e.eval=function(t,n,r){return typeof n>"u"?this.lex(t).toPostfix().postfixEval():typeof r>"u"?typeof n.length<"u"?this.lex(t,n).toPostfix().postfixEval():this.lex(t).toPostfix().postfixEval(n):this.lex(t,n).toPostfix().postfixEval(r)},D5=e,D5}var F5,MJ;function RMt(){if(MJ)return F5;MJ=1;var e=PMt();return e.prototype.formulaEval=function(){for(var t,n,r,s=[],a=this.value,o=0;o<a.length;o++)a[o].type===1||a[o].type===3?s.push({value:a[o].type===3?a[o].show:a[o].value,type:1}):a[o].type===13?s.push({value:a[o].show,type:1}):a[o].type===0?s[s.length-1]={value:a[o].show+(a[o].show!="-"?"(":"")+s[s.length-1].value+(a[o].show!="-"?")":""),type:0}:a[o].type===7?s[s.length-1]={value:(s[s.length-1].type!=1?"(":"")+s[s.length-1].value+(s[s.length-1].type!=1?")":"")+a[o].show,type:7}:a[o].type===10?(t=s.pop(),n=s.pop(),a[o].show==="P"||a[o].show==="C"?s.push({value:"<sup>"+n.value+"</sup>"+a[o].show+"<sub>"+t.value+"</sub>",type:10}):s.push({value:(n.type!=1?"(":"")+n.value+(n.type!=1?")":"")+"<sup>"+t.value+"</sup>",type:1})):a[o].type===2||a[o].type===9?(t=s.pop(),n=s.pop(),s.push({value:(n.type!=1?"(":"")+n.value+(n.type!=1?")":"")+a[o].show+(t.type!=1?"(":"")+t.value+(t.type!=1?")":""),type:a[o].type})):a[o].type===12&&(t=s.pop(),n=s.pop(),r=s.pop(),s.push({value:a[o].show+"("+r.value+","+n.value+","+t.value+")",type:12}));return s[0].value},F5=e,F5}var U5,TJ;function IMt(){if(TJ)return U5;TJ=1;var e=EMt(),t=TMt(),n=RMt(),r=100,s=/(\+|\-|\*|\\|[^a-z]|)(\s*)(\()/g,a;U5=o;function o(c,u){a=0,u=Math.pow(10,u===void 0?5:u),c=c.replace(/\n+/g," ");function d(h,p,g){if(a++>r)throw a=0,new Error("Call stack overflow for "+g);if(h==="")throw new Error(p+"(): '"+g+"' must contain a non-whitespace string");h=m(h,g);var y=i(h);if(y.length>1||h.indexOf("var(")>-1)return p+"("+h+")";var v=y[0]||"";v==="%"&&(h=h.replace(/\b[0-9\.]+%/g,function(_){return parseFloat(_.slice(0,-1))*.01}));var x=h.replace(new RegExp(v,"gi"),""),b;try{b=n.eval(x)}catch{return p+"("+h+")"}return v==="%"&&(b*=100),(p.length||v==="%")&&(b=Math.round(b*u)/u),b+=v,b}function m(h,p){h=h.replace(/((?:\-[a-z]+\-)?calc)/g,"");for(var g="",y=h,v;v=s.exec(y);){v[0].index>0&&(g+=y.substring(0,v[0].index));var x=e("(",")",y.substring([0].index));if(x.body==="")throw new Error("'"+h+"' must contain a non-whitespace string");var b=d(x.body,"",p);g+=x.pre+b,y=x.post}return g+y}return t(c,/((?:\-[a-z]+\-)?calc)\(/,d)}function i(c){for(var u=[],d=[],m=/[\.0-9]([%a-z]+)/gi,h=m.exec(c);h;)!h||!h[1]||(d.indexOf(h[1].toLowerCase())===-1&&(u.push(h[1]),d.push(h[1].toLowerCase())),h=m.exec(c));return u}return U5}var jMt=IMt();const B5=Ha(jMt);var V5,kJ;function OMt(){if(kJ)return V5;kJ=1;var e=typeof La=="object"&&La&&La.Object===Object&&La;return V5=e,V5}var $5,NJ;function zF(){if(NJ)return $5;NJ=1;var e=OMt(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return $5=n,$5}var W5,AJ;function N2e(){if(AJ)return W5;AJ=1;var e=zF(),t=e.Symbol;return W5=t,W5}var H5,PJ;function LMt(){if(PJ)return H5;PJ=1;var e=N2e(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,s=e?e.toStringTag:void 0;function a(o){var i=n.call(o,s),c=o[s];try{o[s]=void 0;var u=!0}catch{}var d=r.call(o);return u&&(i?o[s]=c:delete o[s]),d}return H5=a,H5}var z5,RJ;function DMt(){if(RJ)return z5;RJ=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return z5=n,z5}var G5,IJ;function FMt(){if(IJ)return G5;IJ=1;var e=N2e(),t=LMt(),n=DMt(),r="[object Null]",s="[object Undefined]",a=e?e.toStringTag:void 0;function o(i){return i==null?i===void 0?s:r:a&&a in Object(i)?t(i):n(i)}return G5=o,G5}var q5,jJ;function A2e(){if(jJ)return q5;jJ=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return q5=e,q5}var K5,OJ;function UMt(){if(OJ)return K5;OJ=1;var e=FMt(),t=A2e(),n="[object AsyncFunction]",r="[object Function]",s="[object GeneratorFunction]",a="[object Proxy]";function o(i){if(!t(i))return!1;var c=e(i);return c==r||c==s||c==n||c==a}return K5=o,K5}var Y5,LJ;function BMt(){if(LJ)return Y5;LJ=1;var e=zF(),t=e["__core-js_shared__"];return Y5=t,Y5}var Q5,DJ;function VMt(){if(DJ)return Q5;DJ=1;var e=BMt(),t=function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!t&&t in r}return Q5=n,Q5}var X5,FJ;function $Mt(){if(FJ)return X5;FJ=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return X5=n,X5}var Z5,UJ;function WMt(){if(UJ)return Z5;UJ=1;var e=UMt(),t=VMt(),n=A2e(),r=$Mt(),s=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,o=Function.prototype,i=Object.prototype,c=o.toString,u=i.hasOwnProperty,d=RegExp("^"+c.call(u).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m(h){if(!n(h)||t(h))return!1;var p=e(h)?d:a;return p.test(r(h))}return Z5=m,Z5}var J5,BJ;function HMt(){if(BJ)return J5;BJ=1;function e(t,n){return t?.[n]}return J5=e,J5}var eN,VJ;function P2e(){if(VJ)return eN;VJ=1;var e=WMt(),t=HMt();function n(r,s){var a=t(r,s);return e(a)?a:void 0}return eN=n,eN}var tN,$J;function oM(){if($J)return tN;$J=1;var e=P2e(),t=e(Object,"create");return tN=t,tN}var nN,WJ;function zMt(){if(WJ)return nN;WJ=1;var e=oM();function t(){this.__data__=e?e(null):{},this.size=0}return nN=t,nN}var rN,HJ;function GMt(){if(HJ)return rN;HJ=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return rN=e,rN}var sN,zJ;function qMt(){if(zJ)return sN;zJ=1;var e=oM(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function s(a){var o=this.__data__;if(e){var i=o[a];return i===t?void 0:i}return r.call(o,a)?o[a]:void 0}return sN=s,sN}var aN,GJ;function KMt(){if(GJ)return aN;GJ=1;var e=oM(),t=Object.prototype,n=t.hasOwnProperty;function r(s){var a=this.__data__;return e?a[s]!==void 0:n.call(a,s)}return aN=r,aN}var oN,qJ;function YMt(){if(qJ)return oN;qJ=1;var e=oM(),t="__lodash_hash_undefined__";function n(r,s){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=e&&s===void 0?t:s,this}return oN=n,oN}var iN,KJ;function QMt(){if(KJ)return iN;KJ=1;var e=zMt(),t=GMt(),n=qMt(),r=KMt(),s=YMt();function a(o){var i=-1,c=o==null?0:o.length;for(this.clear();++i<c;){var u=o[i];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=s,iN=a,iN}var lN,YJ;function XMt(){if(YJ)return lN;YJ=1;function e(){this.__data__=[],this.size=0}return lN=e,lN}var cN,QJ;function ZMt(){if(QJ)return cN;QJ=1;function e(t,n){return t===n||t!==t&&n!==n}return cN=e,cN}var uN,XJ;function iM(){if(XJ)return uN;XJ=1;var e=ZMt();function t(n,r){for(var s=n.length;s--;)if(e(n[s][0],r))return s;return-1}return uN=t,uN}var dN,ZJ;function JMt(){if(ZJ)return dN;ZJ=1;var e=iM(),t=Array.prototype,n=t.splice;function r(s){var a=this.__data__,o=e(a,s);if(o<0)return!1;var i=a.length-1;return o==i?a.pop():n.call(a,o,1),--this.size,!0}return dN=r,dN}var fN,JJ;function e3t(){if(JJ)return fN;JJ=1;var e=iM();function t(n){var r=this.__data__,s=e(r,n);return s<0?void 0:r[s][1]}return fN=t,fN}var mN,eee;function t3t(){if(eee)return mN;eee=1;var e=iM();function t(n){return e(this.__data__,n)>-1}return mN=t,mN}var hN,tee;function n3t(){if(tee)return hN;tee=1;var e=iM();function t(n,r){var s=this.__data__,a=e(s,n);return a<0?(++this.size,s.push([n,r])):s[a][1]=r,this}return hN=t,hN}var pN,nee;function r3t(){if(nee)return pN;nee=1;var e=XMt(),t=JMt(),n=e3t(),r=t3t(),s=n3t();function a(o){var i=-1,c=o==null?0:o.length;for(this.clear();++i<c;){var u=o[i];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=s,pN=a,pN}var gN,ree;function s3t(){if(ree)return gN;ree=1;var e=P2e(),t=zF(),n=e(t,"Map");return gN=n,gN}var yN,see;function a3t(){if(see)return yN;see=1;var e=QMt(),t=r3t(),n=s3t();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return yN=r,yN}var vN,aee;function o3t(){if(aee)return vN;aee=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return vN=e,vN}var xN,oee;function lM(){if(oee)return xN;oee=1;var e=o3t();function t(n,r){var s=n.__data__;return e(r)?s[typeof r=="string"?"string":"hash"]:s.map}return xN=t,xN}var bN,iee;function i3t(){if(iee)return bN;iee=1;var e=lM();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return bN=t,bN}var _N,lee;function l3t(){if(lee)return _N;lee=1;var e=lM();function t(n){return e(this,n).get(n)}return _N=t,_N}var wN,cee;function c3t(){if(cee)return wN;cee=1;var e=lM();function t(n){return e(this,n).has(n)}return wN=t,wN}var SN,uee;function u3t(){if(uee)return SN;uee=1;var e=lM();function t(n,r){var s=e(this,n),a=s.size;return s.set(n,r),this.size+=s.size==a?0:1,this}return SN=t,SN}var CN,dee;function d3t(){if(dee)return CN;dee=1;var e=a3t(),t=i3t(),n=l3t(),r=c3t(),s=u3t();function a(o){var i=-1,c=o==null?0:o.length;for(this.clear();++i<c;){var u=o[i];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=s,CN=a,CN}var EN,fee;function f3t(){if(fee)return EN;fee=1;var e=d3t(),t="Expected a function";function n(r,s){if(typeof r!="function"||s!=null&&typeof s!="function")throw new TypeError(t);var a=function(){var o=arguments,i=s?s.apply(this,o):o[0],c=a.cache;if(c.has(i))return c.get(i);var u=r.apply(this,o);return a.cache=c.set(i,u)||c,u};return a.cache=new(n.Cache||e),a}return n.Cache=e,EN=n,EN}var m3t=f3t();const h3t=Ha(m3t);var mee="__react_svg_text_measurement_id";function p3t(e,t){try{var n=document.getElementById(mee);if(!n){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("aria-hidden","true"),r.style.width="0",r.style.height="0",r.style.position="absolute",r.style.top="-100%",r.style.left="-100%",n=document.createElementNS("http://www.w3.org/2000/svg","text"),n.setAttribute("id",mee),r.appendChild(n),document.body.appendChild(r)}return Object.assign(n.style,t),n.textContent=e,n.getComputedTextLength()}catch{return null}}const vj=h3t(p3t,function(e,t){return e+"_"+JSON.stringify(t)});var g3t=["verticalAnchor","scaleToFit","angle","width","lineHeight","capHeight","children","style"];function y3t(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function MN(e){return typeof e=="number"}function hee(e){return typeof e=="number"&&Number.isFinite(e)||typeof e=="string"}function R2e(e){var t=e.verticalAnchor,n=t===void 0?"end":t,r=e.scaleToFit,s=r===void 0?!1:r,a=e.angle,o=e.width,i=e.lineHeight,c=i===void 0?"1em":i,u=e.capHeight,d=u===void 0?"0.71em":u,m=e.children,h=e.style,p=y3t(e,g3t),g=p.x,y=g===void 0?0:g,v=p.y,x=v===void 0?0:v,b=!hee(y)||!hee(x),_=f.useMemo(function(){var T=m==null?[]:m.toString().split(/(?:(?!\u00A0+)\s+)/);return{wordsWithWidth:T.map(function(I){return{word:I,wordWidth:vj(I,h)||0}}),spaceWidth:vj("",h)||0}},[m,h]),w=_.wordsWithWidth,S=_.spaceWidth,C=f.useMemo(function(){return b?[]:o||s?w.reduce(function(T,I){var j=I.word,N=I.wordWidth,P=T[T.length-1];if(P&&(o==null||s||(P.width||0)+N+S<o))P.words.push(j),P.width=P.width||0,P.width+=N+S;else{var R={words:[j],width:N};T.push(R)}return T},[]):[{words:m==null?[]:m.toString().split(/(?:(?!\u00A0+)\s+)/)}]},[b,o,s,m,w,S]),E=f.useMemo(function(){var T=b?"":B5(n==="start"?"calc("+d+")":n==="middle"?"calc("+(C.length-1)/2+" * -"+c+" + ("+d+" / 2))":"calc("+(C.length-1)+" * -"+c+")");return T},[b,n,d,C.length,c]),M=f.useMemo(function(){var T=[];if(b)return"";if(MN(y)&&MN(x)&&MN(o)&&s&&C.length>0){var I=C[0].width||1,j=s==="shrink-only"?Math.min(o/I,1):o/I,N=j,P=y-j*y,R=x-N*x;T.push("matrix("+j+", 0, 0, "+N+", "+P+", "+R+")")}return a&&T.push("rotate("+a+", "+y+", "+x+")"),T.length>0?T.join(" "):""},[b,y,x,o,s,C,a]);return{wordsByLines:C,startDy:E,transform:M}}var v3t=["dx","dy","textAnchor","innerRef","innerTextRef","verticalAnchor","angle","lineHeight","scaleToFit","capHeight","width"];function xj(){return xj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xj.apply(null,arguments)}function x3t(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}var b3t={overflow:"visible"};function cM(e){var t=e.dx,n=t===void 0?0:t,r=e.dy,s=r===void 0?0:r,a=e.textAnchor,o=a===void 0?"start":a,i=e.innerRef,c=e.innerTextRef;e.verticalAnchor,e.angle;var u=e.lineHeight,d=u===void 0?"1em":u;e.scaleToFit,e.capHeight,e.width;var m=x3t(e,v3t),h=m.x,p=h===void 0?0:h,g=m.fontSize,y=R2e(e),v=y.wordsByLines,x=y.startDy,b=y.transform;return A.createElement("svg",{ref:i,x:n,y:s,fontSize:g,style:b3t},v.length>0?A.createElement("text",xj({ref:c,transform:b},m,{textAnchor:o}),v.map(function(_,w){return A.createElement("tspan",{key:w,x:p,dy:w===0?x:d},_.words.join(" "))})):null)}const _3t=Object.freeze(Object.defineProperty({__proto__:null,Text:cM,getStringWidth:vj,useText:R2e},Symbol.toStringTag,{value:"Module"}));function Ob(e,t,n,r,s){var a;switch(e){case"center":return s;case"min":return n??0;case"max":return r??0;case"outside":default:return(a=(t??0)<s?n:r)!=null?a:0}}function pee(e){var t=e.from,n=e.to;return{fromX:t.x,toX:n.x,fromY:t.y,toY:n.y,opacity:1}}function I2e(e){var t=e.scale,n=e.animateXOrY,r=e.animationTrajectory,s=r===void 0?"outside":r,a=n==="x";return f.useMemo(function(){var o=t.range().map(dE),i=o[0],c=o[1],u=c!=null&&i!=null&&c<i,d=u?[c,i]:[i,c],m=d[0],h=d[1],p=c!=null&&i!=null?Math.abs(c-i):0,g=(m??0)+p/2,y=s;!a&&s==="min"&&(y="max"),!a&&s==="max"&&(y="min");var v=function(b){var _=b.from,w=b.to;return{fromX:a?Ob(y,_.x,m,h,g):_.x,toX:a?Ob(y,_.x,m,h,g):w.x,fromY:a?_.y:Ob(y,_.y,m,h,g),toY:a?w.y:Ob(y,_.y,m,h,g),opacity:0}};return{from:v,leave:v,enter:pee,update:pee}},[t,a,s])}function ev(){return ev=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ev.apply(null,arguments)}function w3t(e){var t=e.hideTicks,n=e.horizontal,r=e.orientation,s=e.scale,a=e.tickClassName,o=e.tickComponent,i=e.tickLabelProps,c=e.tickStroke,u=c===void 0?"#222":c,d=e.tickTransform,m=e.ticks,h=e.tickLineProps,p=e.animationTrajectory,g=gve(m,ev({},I2e({scale:s,animateXOrY:n?"x":"y",animationTrajectory:p}),{keys:function(v){return"tick-"+v.value+"-"+v.index}}));return A.createElement(A.Fragment,null,g(function(y,v,x,b){var _,w,S=y.fromX,C=y.toX,E=y.fromY,M=y.toY,T=y.opacity,I=x.key,j=(_=(w=i[b])!=null?w:i[0])!=null?_:{};return v==null||I==null?null:A.createElement(C_.g,{key:I,className:B("visx-axis-tick",a),transform:d},!t&&A.createElement(C_.line,ev({x1:S,x2:C,y1:E,y2:M,stroke:u,strokeLinecap:"square",strokeOpacity:T},h)),A.createElement(C_.g,{key:b,transform:Fgt([C,M],function(N,P){var R;return"translate("+N+","+(P+(r===CMt.bottom&&typeof j.fontSize=="number"?(R=j.fontSize)!=null?R:10:0))+")"}),opacity:T},o?o(ev({},j,{x:C,y:M,formattedValue:v?.formattedValue})):A.createElement(cM,j,v?.formattedValue)))}))}var Lb={};const GF=Jh(Fmt),qF=Jh(Amt);var Db={};const j2e=Jh(gpt),O2e=Jh(_3t);var Fb={},gee;function S3t(){if(gee)return Fb;gee=1,Fb.__esModule=!0,Fb.default=n;var e=t(U1());function t(r){return r&&r.__esModule?r:{default:r}}function n(r){var s=r.labelOffset,a=r.labelProps,o=r.orientation,i=r.range,c=r.tickLabelFontSize,u=r.tickLength,d=o===e.default.left||o===e.default.top?-1:1,m,h,p;if(o===e.default.top||o===e.default.bottom){var g=o===e.default.bottom&&typeof a.fontSize=="number"?a.fontSize:0;m=(Number(i[0])+Number(i[i.length-1]))/2,h=d*(u+s+c+g)}else m=d*((Number(i[0])+Number(i[i.length-1]))/2),h=-(u+s),p="rotate("+d*90+")";return{x:m,y:h,transform:p}}return Fb}var Ub={},yee;function C3t(){if(yee)return Ub;yee=1,Ub.__esModule=!0,Ub.default=c;var e=o(Zh()),t=o(k0()),n=j2e,r=GF,s=O2e,a=o(U1());function o(u){return u&&u.__esModule?u:{default:u}}function i(){return i=Object.assign?Object.assign.bind():function(u){for(var d=1;d<arguments.length;d++){var m=arguments[d];for(var h in m)({}).hasOwnProperty.call(m,h)&&(u[h]=m[h])}return u},i.apply(null,arguments)}function c(u){var d=u.hideTicks,m=u.horizontal,h=u.orientation,p=u.tickClassName,g=u.tickComponent,y=u.tickLabelProps,v=u.tickStroke,x=v===void 0?"#222":v,b=u.tickTransform,_=u.ticks,w=u.strokeWidth,S=u.tickLineProps;return _.map(function(C){var E,M=C.value,T=C.index,I=C.from,j=C.to,N=C.formattedValue,P=(E=y[T])!=null?E:{},R=Math.max(10,typeof P.fontSize=="number"&&P.fontSize||0),k=j.y+(m&&h!==a.default.top?R:0);return e.default.createElement(r.Group,{key:"visx-tick-"+M+"-"+T,className:(0,t.default)("visx-axis-tick",p),transform:b},!d&&e.default.createElement(n.Line,i({from:I,to:j,stroke:x,strokeWidth:w,strokeLinecap:"square"},S)),g?g(i({},P,{x:j.x,y:k,formattedValue:N})):e.default.createElement(s.Text,i({x:j.x,y:k},P),N))})}return Ub}var vee;function E3t(){if(vee)return Db;vee=1,Db.__esModule=!0,Db.default=d;var e=i(Zh()),t=i(k0()),n=j2e,r=O2e,s=i(S3t()),a=i(U1()),o=i(C3t());function i(m){return m&&m.__esModule?m:{default:m}}function c(){return c=Object.assign?Object.assign.bind():function(m){for(var h=1;h<arguments.length;h++){var p=arguments[h];for(var g in p)({}).hasOwnProperty.call(p,g)&&(m[g]=p[g])}return m},c.apply(null,arguments)}var u={textAnchor:"middle",fontFamily:"Arial",fontSize:10,fill:"#222"};function d(m){var h=m.axisFromPoint,p=m.axisLineClassName,g=m.axisToPoint,y=m.hideAxisLine,v=m.hideTicks,x=m.horizontal,b=m.label,_=b===void 0?"":b,w=m.labelClassName,S=m.labelOffset,C=S===void 0?14:S,E=m.labelProps,M=m.orientation,T=M===void 0?a.default.bottom:M,I=m.scale,j=m.stroke,N=j===void 0?"#222":j,P=m.strokeDasharray,R=m.strokeWidth,k=R===void 0?1:R,O=m.tickClassName,L=m.tickComponent,F=m.tickLineProps,U=m.tickLabelProps,V=m.tickLength,W=V===void 0?8:V,H=m.tickStroke,G=H===void 0?"#222":H,K=m.tickTransform,$=m.ticks,q=m.ticksComponent,Z=q===void 0?o.default:q,se=c({},u,E),Y=c({},u,typeof U=="object"?U:null),Q=$.map(function(te){var le=te.value,ie=te.index;return typeof U=="function"?U(le,ie,$):Y}),re=Math.max.apply(Math,[10].concat(Q.map(function(te){return typeof te.fontSize=="number"?te.fontSize:0})));return e.default.createElement(e.default.Fragment,null,Z({hideTicks:v,horizontal:x,orientation:T,scale:I,tickClassName:O,tickComponent:L,tickLabelProps:Q,tickStroke:G,tickTransform:K,ticks:$,strokeWidth:k,tickLineProps:F}),!y&&e.default.createElement(n.Line,{className:(0,t.default)("visx-axis-line",p),from:h,to:g,stroke:N,strokeWidth:k,strokeDasharray:P}),_&&e.default.createElement(r.Text,c({className:(0,t.default)("visx-axis-label",w)},(0,s.default)({labelOffset:C,labelProps:se,orientation:T,range:I.range(),tickLabelFontSize:re,tickLength:W}),se),_))}return Db}var Bb={},xee;function M3t(){if(xee)return Bb;xee=1,Bb.__esModule=!0,Bb.default=e;function e(t,n){n===void 0&&(n="center");var r=t;if(n!=="start"&&"bandwidth"in r){var s=r.bandwidth();return n==="center"&&(s/=2),r.round()&&(s=Math.round(s)),function(a){var o=r(a);return typeof o=="number"?o+s:o}}return t}return Bb}var Vb={},bee;function T3t(){if(bee)return Vb;bee=1,Vb.__esModule=!0,Vb.default=t;var e=qF;function t(n){var r=n;return"tickFormat"in r?r.tickFormat():e.toString}return Vb}var $b={},Mu=function(){function e(n){var r=n.x,s=r===void 0?0:r,a=n.y,o=a===void 0?0:a;this.x=0,this.y=0,this.x=s,this.y=o}var t=e.prototype;return t.value=function(){return{x:this.x,y:this.y}},t.toArray=function(){return[this.x,this.y]},e}();function k3t(e,t){return new Mu({x:e.x+t.x,y:e.y+t.y})}function N3t(e,t){return new Mu({x:e.x-t.x,y:e.y-t.y})}const A3t=Object.freeze(Object.defineProperty({__proto__:null,Point:Mu,subtractPoints:N3t,sumPoints:k3t},Symbol.toStringTag,{value:"Module"})),L2e=Jh(A3t);var _ee;function P3t(){if(_ee)return $b;_ee=1,$b.__esModule=!0,$b.default=t;var e=L2e;function t(n,r){var s=n.x,a=n.y;return new e.Point(r?{x:s,y:a}:{x:a,y:s})}return $b}var qf={},wee;function R3t(){if(wee)return qf;wee=1,qf.__esModule=!0,qf.default=n,qf.defaultAxisRangePadding=void 0;function e(){return e=Object.assign?Object.assign.bind():function(r){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var o in a)({}).hasOwnProperty.call(a,o)&&(r[o]=a[o])}return r},e.apply(null,arguments)}var t=qf.defaultAxisRangePadding=0;function n(r){return r===void 0&&(r=t),typeof r=="number"?{start:r,end:r}:e({start:t,end:t},r)}return qf}var See;function I3t(){if(See)return Lb;See=1,Lb.__esModule=!0,Lb.default=g,m($L());var e=m(Zh()),t=m(k0()),n=GF,r=qF,s=m(E3t()),a=m(M3t()),o=m(T3t()),i=m(P3t()),c=m(U1()),u=m(R3t()),d=["children","axisClassName","hideAxisLine","hideTicks","hideZero","innerRef","left","numTicks","orientation","rangePadding","scale","tickFormat","tickLength","tickValues","top"];function m(y){return y&&y.__esModule?y:{default:y}}function h(){return h=Object.assign?Object.assign.bind():function(y){for(var v=1;v<arguments.length;v++){var x=arguments[v];for(var b in x)({}).hasOwnProperty.call(x,b)&&(y[b]=x[b])}return y},h.apply(null,arguments)}function p(y,v){if(y==null)return{};var x={};for(var b in y)if({}.hasOwnProperty.call(y,b)){if(v.includes(b))continue;x[b]=y[b]}return x}function g(y){var v=y.children,x=v===void 0?s.default:v,b=y.axisClassName,_=y.hideAxisLine,w=_===void 0?!1:_,S=y.hideTicks,C=S===void 0?!1:S,E=y.hideZero,M=E===void 0?!1:E,T=y.innerRef,I=y.left,j=I===void 0?0:I,N=y.numTicks,P=N===void 0?10:N,R=y.orientation,k=R===void 0?c.default.bottom:R,O=y.rangePadding,L=O===void 0?0:O,F=y.scale,U=y.tickFormat,V=y.tickLength,W=V===void 0?8:V,H=y.tickValues,G=y.top,K=G===void 0?0:G,$=p(y,d),q=U??(0,o.default)(F),Z=k===c.default.left,se=k===c.default.top,Y=se||k===c.default.bottom,Q=(0,a.default)(F),re=Z||se?-1:1,te=F.range(),le=(0,u.default)(L),ie=(0,i.default)({x:Number(te[0])+.5-le.start,y:0},Y),pe=(0,i.default)({x:Number(te[te.length-1])+.5+le.end,y:0},Y),me=(H??(0,r.getTicks)(F,P)).filter(function(ve){return!M||ve!==0&&ve!=="0"}).map(function(ve,Ae){return{value:ve,index:Ae}}),de=me.map(function(ve){var Ae=ve.value,Se=ve.index,De=(0,r.coerceNumber)(Q(Ae));return{value:Ae,index:Se,from:(0,i.default)({x:De,y:0},Y),to:(0,i.default)({x:De,y:W*re},Y),formattedValue:q(Ae,Se,me)}});return e.default.createElement(n.Group,{className:(0,t.default)("visx-axis",b),innerRef:T,top:K,left:j},x(h({},$,{axisFromPoint:ie,axisToPoint:pe,hideAxisLine:w,hideTicks:C,hideZero:M,horizontal:Y,numTicks:P,orientation:k,rangePadding:L,scale:F,tickFormat:q,tickLength:W,tickPosition:Q,tickSign:re,ticks:de})))}return Lb}var j3t=I3t();const O3t=Ha(j3t);var L3t=["animationTrajectory","tickComponent"];function $w(){return $w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$w.apply(null,arguments)}function D3t(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function F3t(e){var t=e.animationTrajectory,n=e.tickComponent,r=D3t(e,L3t),s=f.useMemo(function(){return function(o){return A.createElement(w3t,$w({},o,{tickComponent:n,animationTrajectory:t}))}},[t,n]);return A.createElement(O3t,$w({},r,{ticksComponent:s}))}var Wb={},Hb={},Cee;function D2e(){if(Cee)return Hb;Cee=1,Hb.__esModule=!0,Hb.default=o;var e=r(Zh()),t=r(k0()),n=["from","to","fill","className","innerRef"];function r(i){return i&&i.__esModule?i:{default:i}}function s(){return s=Object.assign?Object.assign.bind():function(i){for(var c=1;c<arguments.length;c++){var u=arguments[c];for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(i[d]=u[d])}return i},s.apply(this,arguments)}function a(i,c){if(i==null)return{};var u={},d=Object.keys(i),m,h;for(h=0;h<d.length;h++)m=d[h],!(c.indexOf(m)>=0)&&(u[m]=i[m]);return u}function o(i){var c=i.from,u=c===void 0?{x:0,y:0}:c,d=i.to,m=d===void 0?{x:1,y:1}:d,h=i.fill,p=h===void 0?"transparent":h,g=i.className,y=i.innerRef,v=a(i,n),x=u.x===m.x||u.y===m.y;return e.default.createElement("line",s({ref:y,className:(0,t.default)("visx-line",g),x1:u.x,y1:u.y,x2:m.x,y2:m.y,fill:p,shapeRendering:x?"crispEdges":"auto"},v))}return Hb}var zb={},Eee;function U3t(){if(Eee)return zb;Eee=1,zb.__esModule=!0,zb.default=e;function e(t){return"bandwidth"in t?t.bandwidth():0}return zb}var Mee;function B3t(){if(Mee)return Wb;Mee=1,Wb.__esModule=!0,Wb.default=h;var e=u($L()),t=u(Zh()),n=u(k0()),r=u(D2e()),s=GF,a=L2e,o=qF,i=u(U3t()),c=["top","left","scale","width","stroke","strokeWidth","strokeDasharray","className","children","numTicks","lineStyle","offset","tickValues"];function u(p){return p&&p.__esModule?p:{default:p}}function d(){return d=Object.assign?Object.assign.bind():function(p){for(var g=1;g<arguments.length;g++){var y=arguments[g];for(var v in y)Object.prototype.hasOwnProperty.call(y,v)&&(p[v]=y[v])}return p},d.apply(this,arguments)}function m(p,g){if(p==null)return{};var y={},v=Object.keys(p),x,b;for(b=0;b<v.length;b++)x=v[b],!(g.indexOf(x)>=0)&&(y[x]=p[x]);return y}function h(p){var g=p.top,y=g===void 0?0:g,v=p.left,x=v===void 0?0:v,b=p.scale,_=p.width,w=p.stroke,S=w===void 0?"#eaf0f6":w,C=p.strokeWidth,E=C===void 0?1:C,M=p.strokeDasharray,T=p.className,I=p.children,j=p.numTicks,N=j===void 0?10:j,P=p.lineStyle,R=p.offset,k=p.tickValues,O=m(p,c),L=k??(0,o.getTicks)(b,N),F=(R??0)+(0,i.default)(b)/2,U=L.map(function(V,W){var H,G=((H=(0,o.coerceNumber)(b(V)))!=null?H:0)+F;return{index:W,from:new a.Point({x:0,y:G}),to:new a.Point({x:_,y:G})}});return t.default.createElement(s.Group,{className:(0,n.default)("visx-rows",T),top:y,left:x},I?I({lines:U}):U.map(function(V){var W=V.from,H=V.to,G=V.index;return t.default.createElement(r.default,d({key:"row-line-"+G,from:W,to:H,stroke:S,strokeWidth:E,strokeDasharray:M,style:P},O))}))}return h.propTypes={tickValues:e.default.array,width:e.default.number.isRequired},Wb}var V3t=B3t();const $3t=Ha(V3t);var W3t=["scale","lines","animationTrajectory","animateXOrY","lineKey","lineStyle"];function Ww(){return Ww=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ww.apply(null,arguments)}function H3t(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function F2e(e){var t=e.scale,n=e.lines,r=e.animationTrajectory,s=e.animateXOrY,a=e.lineKey,o=e.lineStyle,i=H3t(e,W3t),c=gve(n,Ww({},I2e({scale:t,animateXOrY:s,animationTrajectory:r}),{key:a}));return A.createElement(A.Fragment,null,c(function(u,d,m){var h=u.fromX,p=u.toX,g=u.fromY,y=u.toY,v=u.opacity,x=m.key;return A.createElement(C_.line,Ww({key:x,x1:h,x2:p,y1:g,y2:y,strokeOpacity:v,style:o},i))}))}F2e.propTypes={lineKey:we.func.isRequired};var z3t=["scale","width","numTicks","tickValues","offset","className","animationTrajectory","top","left"];function bj(){return bj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bj.apply(null,arguments)}function G3t(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function U2e(e){var t=e.scale,n=e.width,r=e.numTicks,s=e.tickValues,a=e.offset,o=e.className,i=e.animationTrajectory,c=e.top,u=e.left,d=G3t(e,z3t);return A.createElement($3t,{scale:t,width:n,numTicks:r,tickValues:s,className:o,top:c,left:u,offset:a},function(m){var h=m.lines;return A.createElement(F2e,bj({scale:t,lines:h,animationTrajectory:i,animateXOrY:"y",lineKey:function(g){var y,v;return"row-"+((y=g==null||(v=g.from)==null?void 0:v.y)!=null?y:"")+"-"+g.index}},d))})}var Hs={top:"top",left:"left",bottom:"bottom"};function q3t(e){var t=e.labelOffset,n=e.labelProps,r=e.orientation,s=e.range,a=e.tickLabelFontSize,o=e.tickLength,i=r===Hs.left||r===Hs.top?-1:1,c,u,d;if(r===Hs.top||r===Hs.bottom){var m=r===Hs.bottom&&typeof n.fontSize=="number"?n.fontSize:0;c=(Number(s[0])+Number(s[s.length-1]))/2,u=i*(o+t+a+m)}else c=i*((Number(s[0])+Number(s[s.length-1]))/2),u=-(o+t),d="rotate("+i*90+")";return{x:c,y:u,transform:d}}function tv(){return tv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tv.apply(null,arguments)}function K3t(e){var t=e.hideTicks,n=e.horizontal,r=e.orientation,s=e.tickClassName,a=e.tickComponent,o=e.tickLabelProps,i=e.tickStroke,c=i===void 0?"#222":i,u=e.tickTransform,d=e.ticks,m=e.strokeWidth,h=e.tickLineProps;return d.map(function(p){var g,y=p.value,v=p.index,x=p.from,b=p.to,_=p.formattedValue,w=(g=o[v])!=null?g:{},S=Math.max(10,typeof w.fontSize=="number"&&w.fontSize||0),C=b.y+(n&&r!==Hs.top?S:0);return A.createElement(Ca,{key:"visx-tick-"+y+"-"+v,className:B("visx-axis-tick",s),transform:u},!t&&A.createElement(pE,tv({from:x,to:b,stroke:c,strokeWidth:m,strokeLinecap:"square"},h)),a?a(tv({},w,{x:b.x,y:C,formattedValue:_})):A.createElement(cM,tv({x:b.x,y:C},w),_))})}function nv(){return nv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nv.apply(null,arguments)}var Tee={textAnchor:"middle",fontFamily:"Arial",fontSize:10,fill:"#222"};function Y3t(e){var t=e.axisFromPoint,n=e.axisLineClassName,r=e.axisToPoint,s=e.hideAxisLine,a=e.hideTicks,o=e.horizontal,i=e.label,c=i===void 0?"":i,u=e.labelClassName,d=e.labelOffset,m=d===void 0?14:d,h=e.labelProps,p=e.orientation,g=p===void 0?Hs.bottom:p,y=e.scale,v=e.stroke,x=v===void 0?"#222":v,b=e.strokeDasharray,_=e.strokeWidth,w=_===void 0?1:_,S=e.tickClassName,C=e.tickComponent,E=e.tickLineProps,M=e.tickLabelProps,T=e.tickLength,I=T===void 0?8:T,j=e.tickStroke,N=j===void 0?"#222":j,P=e.tickTransform,R=e.ticks,k=e.ticksComponent,O=k===void 0?K3t:k,L=nv({},Tee,h),F=nv({},Tee,typeof M=="object"?M:null),U=R.map(function(W){var H=W.value,G=W.index;return typeof M=="function"?M(H,G,R):F}),V=Math.max.apply(Math,[10].concat(U.map(function(W){return typeof W.fontSize=="number"?W.fontSize:0})));return A.createElement(A.Fragment,null,O({hideTicks:a,horizontal:o,orientation:g,scale:y,tickClassName:S,tickComponent:C,tickLabelProps:U,tickStroke:N,tickTransform:P,ticks:R,strokeWidth:w,tickLineProps:E}),!s&&A.createElement(pE,{className:B("visx-axis-line",n),from:t,to:r,stroke:x,strokeWidth:w,strokeDasharray:b}),c&&A.createElement(cM,nv({className:B("visx-axis-label",u)},q3t({labelOffset:m,labelProps:L,orientation:g,range:y.range(),tickLabelFontSize:V,tickLength:I}),L),c))}function Q3t(e,t){t===void 0&&(t="center");var n=e;if(t!=="start"&&"bandwidth"in n){var r=n.bandwidth();return t==="center"&&(r/=2),n.round()&&(r=Math.round(r)),function(s){var a=n(s);return typeof a=="number"?a+r:a}}return e}function X3t(e){var t=e;return"tickFormat"in t?t.tickFormat():iye}function Gb(e,t){var n=e.x,r=e.y;return new Mu(t?{x:n,y:r}:{x:r,y:n})}function _j(){return _j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_j.apply(null,arguments)}var TN=0;function Z3t(e){return e===void 0&&(e=TN),typeof e=="number"?{start:e,end:e}:_j({start:TN,end:TN},e)}var J3t=["children","axisClassName","hideAxisLine","hideTicks","hideZero","innerRef","left","numTicks","orientation","rangePadding","scale","tickFormat","tickLength","tickValues","top"];function wj(){return wj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wj.apply(null,arguments)}function e4t(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function Hw(e){var t=e.children,n=t===void 0?Y3t:t,r=e.axisClassName,s=e.hideAxisLine,a=s===void 0?!1:s,o=e.hideTicks,i=o===void 0?!1:o,c=e.hideZero,u=c===void 0?!1:c,d=e.innerRef,m=e.left,h=m===void 0?0:m,p=e.numTicks,g=p===void 0?10:p,y=e.orientation,v=y===void 0?Hs.bottom:y,x=e.rangePadding,b=x===void 0?0:x,_=e.scale,w=e.tickFormat,S=e.tickLength,C=S===void 0?8:S,E=e.tickValues,M=e.top,T=M===void 0?0:M,I=e4t(e,J3t),j=w??X3t(_),N=v===Hs.left,P=v===Hs.top,R=P||v===Hs.bottom,k=Q3t(_),O=N||P?-1:1,L=_.range(),F=Z3t(b),U=Gb({x:Number(L[0])+.5-F.start,y:0},R),V=Gb({x:Number(L[L.length-1])+.5+F.end,y:0},R),W=(E??Y7(_,g)).filter(function(G){return!u||G!==0&&G!=="0"}).map(function(G,K){return{value:G,index:K}}),H=W.map(function(G){var K=G.value,$=G.index,q=dE(k(K));return{value:K,index:$,from:Gb({x:q,y:0},R),to:Gb({x:q,y:C*O},R),formattedValue:j(K,$,W)}});return A.createElement(Ca,{className:B("visx-axis",r),innerRef:d,top:T,left:h},n(wj({},I,{axisFromPoint:U,axisToPoint:V,hideAxisLine:a,hideTicks:i,hideZero:u,horizontal:R,numTicks:g,orientation:v,rangePadding:b,scale:_,tickFormat:j,tickLength:C,tickPosition:k,tickSign:O,ticks:H})))}var t4t=D2e();const n4t=Ha(t4t);function r4t(e){return"bandwidth"in e?e.bandwidth():0}var s4t=["top","left","scale","width","stroke","strokeWidth","strokeDasharray","className","children","numTicks","lineStyle","offset","tickValues"];function Sj(){return Sj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sj.apply(this,arguments)}function a4t(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function B1(e){var t=e.top,n=t===void 0?0:t,r=e.left,s=r===void 0?0:r,a=e.scale,o=e.width,i=e.stroke,c=i===void 0?"#eaf0f6":i,u=e.strokeWidth,d=u===void 0?1:u,m=e.strokeDasharray,h=e.className,p=e.children,g=e.numTicks,y=g===void 0?10:g,v=e.lineStyle,x=e.offset,b=e.tickValues,_=a4t(e,s4t),w=b??Y7(a,y),S=(x??0)+r4t(a)/2,C=w.map(function(E,M){var T,I=((T=dE(a(E)))!=null?T:0)+S;return{index:M,from:new Mu({x:0,y:I}),to:new Mu({x:o,y:I})}});return A.createElement(Ca,{className:B("visx-rows",h),top:n,left:s},p?p({lines:C}):C.map(function(E){var M=E.from,T=E.to,I=E.index;return A.createElement(n4t,Sj({key:"row-line-"+I,from:M,to:T,stroke:c,strokeWidth:d,strokeDasharray:m,style:v},_))}))}B1.propTypes={tickValues:we.array,width:we.number.isRequired};function kee({ref:e}){const t=e.current,[n,r,s]=f.useMemo(()=>{if(t){const a=t.querySelectorAll(".visx-axis-tick"),o=Array.from(a).map(i=>{const{width:c,height:u}=i.getBBox();return[c,u]});if(o.length){const i=Math.max(...o.map(u=>u[0])),c=Math.max(...o.map(u=>u[1]));return[i,c,o.length*i]}}return[0,0,0]},[t]);return f.useMemo(()=>({minRequiredWidth:s,maxLabelWidth:n,maxLabelHeight:r}),[r,n,s])}function uM(){const e=f.useRef(null),{maxLabelWidth:t,minRequiredWidth:n}=kee({ref:e}),r=f.useRef(null),{maxLabelWidth:s}=kee({ref:r});return f.useMemo(()=>({xAxisRef:e,yAxisRef:r,maxXLabelWidth:t,maxYLabelWidth:s,minXRequiredWidth:n}),[t,s,n])}const Nee=40,kN=e=>typeof e=="number";function dM({config:e,innerWidth:t,innerHeight:n,maxXLabelWidth:r}){let s=Math.floor(t/(r+Nee));kN(e?.x?.numTicks)&&kN(s)&&(s=Math.min(s,e.x.numTicks)),r||(s=void 0);let a=Math.floor(n/Nee);return kN(e?.y?.numTicks)&&(a=Math.min(a,e.y.numTicks)),{xTiltTicks:!1,xNumTicks:s,yNumTicks:a}}const B2e="fill-quiet font-mono text-xs font-bold truncate max-w-[100px]",Aee="fill-quiet text-xs font-semibold font-sans",o4t=(e,t,n)=>n?{transform:"rotate(-10deg)",transformOrigin:`${e}px ${t}px`,textAnchor:"end"}:{textAnchor:"middle"};function i4t(e){const{shouldTilt:t,x:n,y:r,formattedValue:s,style:a,className:o,...i}=e;return l.jsx("text",{...i,x:n,y:r,dy:"2px",className:B(B2e,o),style:{...a,...o4t(n,r,t)},children:s})}const V1=A.memo(function(t){const{margin:n,height:r,width:s,xScale:a,yScale:o,xFormat:i,yFormat:c,yNumTicks:u,xNumTicks:d,xTickValues:m,yTickValues:h,xTiltTicks:p,animated:g,tickColor:y,axisColor:v,xAxisRef:x,yAxisRef:b,xAxisLabel:_,yAxisLabel:w,gridDashed:S=!1,gridStrokeWidth:C=.5}=t,E=ms(),M=g?F3t:Hw,T=g?U2e:B1,I=f.useCallback(N=>l.jsx(i4t,{...N,shouldTilt:p}),[p]),j=f.useMemo(()=>({className:B2e,textAnchor:"start",dx:"0.75em",dy:"-0.25em"}),[]);return l.jsxs(l.Fragment,{children:[l.jsx(Hw,{orientation:Hs.bottom,top:r-n.bottom,scale:a,stroke:v,hideAxisLine:!0,label:_,labelClassName:Aee,tickFormat:i,numTicks:d,tickStroke:y,innerRef:x,tickValues:m,tickComponent:I,axisClassName:"select-none"}),l.jsx(M,{orientation:Hs.left,left:n.left,hideAxisLine:!0,label:w,labelOffset:7.5,labelClassName:Aee,scale:o,tickFormat:c,stroke:v,tickStroke:y,hideTicks:!0,innerRef:b,tickLabelProps:j,numTicks:u,tickValues:h,axisClassName:"select-none"}),E&&l.jsx(T,{left:n.left,scale:o,width:s-n.right-n.left*2,strokeDasharray:S?"8,4":void 0,stroke:v,strokeWidth:C,numTicks:u})]})});V1.displayName="Axes";const l4t=g1("%b %d"),c4t=g1("%b"),u4t=g1("%Y");function d4t(e){return e?(e=new Date(e),(p1(e)<e?l4t:Qo(e)<e?c4t:u4t)(e)):""}const V2e=(e,t,n)=>{if(!e&&(e!==0||!n?.renderZero))return"";const s=t&&/^[A-Z]{3}$/.test(t)?t:void 0,a=e%1===0&&!n?.alwaysShowMinor||n?.roundToMajor?0:2;let o=n?.roundToMajor?0:2;if(e>0&&e<1){const c=Math.abs(e).toExponential();o=Math.abs(parseInt(c.split("e")[1]))+1}const i=Intl.NumberFormat(void 0,{style:s?"currency":"decimal",currency:s,minimumFractionDigits:1,maximumFractionDigits:1,currencyDisplay:n?.currencyDisplay??"narrowSymbol"});return n?.truncate&&e>=1e6?`${i.format(e/1e6)}M`:n?.truncate&&e>=1e3?`${i.format(e/1e3)}k`:e.toLocaleString(void 0,{style:s?"currency":"decimal",currency:s,minimumFractionDigits:a,maximumFractionDigits:o,currencyDisplay:n?.currencyDisplay??"narrowSymbol"})};function f4t(e,t){const n=e>1?0:2;return e.toLocaleString(void 0,{style:"percent",minimumFractionDigits:0,maximumFractionDigits:n})}const m4t={time:e=>new Date(e),linear:e=>+e,band:e=>e,ordinal:e=>e,log:e=>+e,point:e=>e};function NN(e,t){if(!e)return r=>null;if(t===void 0)return r=>r[e];const n=m4t[t]||(r=>r);return r=>n(r[e])}function Kf(e,t){return typeof t=="function"?t(e):typeof t=="string"?t.replace("%s",e):e instanceof Date?d4t(e):String(e)}const Ua={time:y1,linear:Ah,band:z7,log:q7,point:G7,ordinal:K7},Pee=["band","ordinal","point"];function h4t({width:e,height:t,margin:n,hasAxis:r,maxYLabelWidth:s=0}){const a=n.left+(r?s+15:0),o=e-n.right-n.left,i=t-n.bottom,c=n.top,u=[a,o],d=[i,c],m=Math.max(0,o-a);return{innerHeight:Math.max(0,i-c),innerWidth:m,xRange:u,yRange:d}}function xHt(e,t,n){const r=[];let s="";return e.forEach(a=>{const o=t(a),i=o.toISOString().slice(0,10);i!==s&&(s=i,r.push(o))}),r.filter((a,o)=>o%n===0)}function fM(e){const{colorScheme:t}=fs(),n=ms(),r=f.useMemo(()=>n?t==="dark":!1,[t,n]);return f.useMemo(()=>({...r?Myt:Tyt,...e}),[r,e])}function mM(e){return f.useMemo(()=>e.data.map(n=>({__key:Math.random(),...n})),[e.data])}function hM({config:e}){const t=f.useMemo(()=>NN(e.x.accessor,e.x.scale),[e.x]),n=f.useMemo(()=>NN(e.y.accessor,e.y.scale),[e.y]),r=f.useMemo(()=>NN(e.z?.accessor,e.z?.scale),[e.z]);return f.useMemo(()=>({xGet:t,yGet:n,zGet:r}),[t,n,r])}function pM({config:e}){const t=f.useCallback(i=>Kf(i,e.x.format),[e.x]),n=f.useCallback(i=>Kf(i,e.y.format),[e.y]),r=f.useCallback(i=>Kf(i,e.z?.format),[e.z]),s=f.useCallback(i=>Kf(i,e.x.tooltipFormat??e.x.format),[e.x]),a=f.useCallback(i=>Kf(i,e.y.tooltipFormat??e.y.format),[e.y]),o=f.useCallback(i=>Kf(i,e.z?.tooltipFormat??e.z?.format),[e.z]);return f.useMemo(()=>({xFormat:t,yFormat:n,zFormat:r,xTooltipFormat:s,yTooltipFormat:a,zTooltipFormat:o}),[t,n,r,s,a,o])}function $1({width:e,height:t,margin:n,maxYLabelWidth:r,hasAxis:s}){return f.useMemo(()=>h4t({width:e,height:t,margin:n,maxYLabelWidth:r,hasAxis:s}),[e,t,n,r,s])}function KF({config:e,xGet:t,yGet:n,data:r,endTime:s,previousClose:a}){const o=f.useMemo(()=>{if(Pee.includes(e.x.scale))return[...new Set(r.map(t))];const u=Ll(r,t);return e.x.tickValues?Ll([...e.x.tickValues,...u]):u},[e.x.tickValues,e.x.scale,r,t]),i=f.useMemo(()=>{if(Pee.includes(e.y.scale))return[...new Set(r.map(n))];const d=[...Ll(r,n)];a!==void 0&&d.push(a),e.y.tickValues&&d.push(...e.y.tickValues);const[m,h]=Ll(d),g=(h-m)*.05;return[m-g,h+g]},[e.y.tickValues,e.y.scale,r,n,a]),c=f.useMemo(()=>{if(!s||!o||o.length<2||e.x.scale!=="time")return o;const[u,d]=o;return new Date(d).toDateString()!==s.toDateString()?o:Date.now()<s.getTime()&&d<s?[u,s]:o},[o,s,e.x.scale]);return f.useMemo(()=>({xDomain:c,yDomain:i}),[c,i])}function $2e(e){const[t,n]=f.useState({width:0,height:0,resizing:!1});return f.useEffect(()=>{let r;const s=()=>{e.current&&(clearTimeout(r),n(a=>{const o=e.current?.offsetWidth??0,i=e.current?.offsetHeight??0,c=Math.round(a.width)!==Math.round(o);return{width:o,height:i,resizing:c}}),r=setTimeout(()=>{n(a=>({...a,resizing:!1}))},500))};return s(),window.addEventListener("resize",s),()=>{clearTimeout(r),window.removeEventListener("resize",s)}},[e]),t}const W2e=A.memo(({color:e})=>l.jsx("div",{className:"size-[14px] rounded-full",style:{backgroundColor:e}}));W2e.displayName="Tile";const W1=A.memo(({entries:e})=>l.jsx("ol",{className:"my-sm gap-x-md gap-y-xs flex flex-wrap",children:e.map(({key:t,color:n})=>l.jsxs("li",{className:"gap-xs fade-in flex items-center transition-all duration-200",children:[l.jsx(W2e,{color:n}),l.jsx(D,{variant:"tiny",color:"light",children:String(t)})]},String(t)))}));W1.displayName="Legend";const H1=A.memo(({width:e,height:t,children:n,ref:r})=>{const s=f.useMemo(()=>({position:"relative",height:t,overflow:"visible"}),[t]);return l.jsx(z,{style:s,children:l.jsx("svg",{width:e,ref:r,height:t,style:{position:"absolute",left:0,top:0,overflow:"visible"},children:n})})});function p4t(e){return!!e&&e instanceof Element}function g4t(e){return!!e&&(e instanceof SVGElement||"ownerSVGElement"in e)}function y4t(e){return!!e&&"createSVGPoint"in e}function v4t(e){return!!e&&"getScreenCTM"in e}function x4t(e){return!!e&&"changedTouches"in e}function b4t(e){return!!e&&"clientX"in e}function _4t(e){return!!e&&(e instanceof Event||"nativeEvent"in e&&e.nativeEvent instanceof Event)}function rv(){return rv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rv.apply(this,arguments)}var AN={x:0,y:0};function w4t(e){if(!e)return rv({},AN);if(x4t(e))return e.changedTouches.length>0?{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}:rv({},AN);if(b4t(e))return{x:e.clientX,y:e.clientY};var t=e?.target,n=t&&"getBoundingClientRect"in t?t.getBoundingClientRect():null;return n?{x:n.x+n.width/2,y:n.y+n.height/2}:rv({},AN)}function Ree(e,t){if(!e||!t)return null;var n=w4t(t),r=g4t(e)?e.ownerSVGElement:e,s=v4t(r)?r.getScreenCTM():null;if(y4t(r)&&s){var a=r.createSVGPoint();return a.x=n.x,a.y=n.y,a=a.matrixTransform(s.inverse()),new Mu({x:a.x,y:a.y})}var o=e.getBoundingClientRect();return new Mu({x:n.x-o.left-e.clientLeft,y:n.y-o.top-e.clientTop})}function S4t(e,t){if(p4t(e)&&t)return Ree(e,t);if(_4t(e)){var n=e,r=n.target;if(r)return Ree(r,n)}return null}var C4t=["tooltipOpen"];function E4t(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function zw(){return zw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zw.apply(null,arguments)}function M4t(e){var t=f.useState(zw({tooltipOpen:!1},e)),n=t[0],r=t[1],s=f.useCallback(function(o){return r(typeof o=="function"?function(i){i.tooltipOpen;var c=E4t(i,C4t);return zw({},o(c),{tooltipOpen:!0})}:{tooltipOpen:!0,tooltipLeft:o.tooltipLeft,tooltipTop:o.tooltipTop,tooltipData:o.tooltipData})},[r]),a=f.useCallback(function(){return r({tooltipOpen:!1,tooltipLeft:void 0,tooltipTop:void 0,tooltipData:void 0})},[r]);return{tooltipOpen:n.tooltipOpen,tooltipLeft:n.tooltipLeft,tooltipTop:n.tooltipTop,tooltipData:n.tooltipData,updateTooltip:r,showTooltip:s,hideTooltip:a}}var T4t=["className","top","left","offsetLeft","offsetTop","style","children","unstyled","applyPositionStyle"];function Gw(){return Gw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gw.apply(null,arguments)}function k4t(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}var H2e={position:"absolute",backgroundColor:"white",color:"#666666",padding:".3rem .5rem",borderRadius:"3px",fontSize:"14px",boxShadow:"0 1px 2px rgba(33,33,33,0.2)",lineHeight:"1em",pointerEvents:"none"},YF=A.forwardRef(function(e,t){var n=e.className,r=e.top,s=e.left,a=e.offsetLeft,o=a===void 0?10:a,i=e.offsetTop,c=i===void 0?10:i,u=e.style,d=u===void 0?H2e:u,m=e.children,h=e.unstyled,p=h===void 0?!1:h,g=e.applyPositionStyle,y=g===void 0?!1:g,v=k4t(e,T4t);return A.createElement("div",Gw({ref:t,className:B("visx-tooltip",n),style:Gw({top:r==null||c==null?r:r+c,left:s==null||o==null?s:s+o},y&&{position:"absolute"},!p&&d)},v),m)});YF.propTypes={children:we.node,className:we.string,left:we.number,offsetLeft:we.number,offsetTop:we.number,top:we.number,applyPositionStyle:we.bool,unstyled:we.bool};YF.displayName="Tooltip";function Cj(){return Cj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cj.apply(null,arguments)}function N4t(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Ej(e,t)}function Ej(e,t){return Ej=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Ej(e,t)}var Iee={top:0,right:0,bottom:0,left:0,width:0,height:0};function A4t(e){var t;return t=function(n){function r(a){var o;return o=n.call(this,a)||this,o.state={rect:void 0,parentRect:void 0},o.nodeRef=A.createRef(),o.getRects=o.getRects.bind(o),o}N4t(r,n);var s=r.prototype;return s.componentDidMount=function(){var o,i=this;this.node=(o=this.nodeRef)!=null&&o.current?this.nodeRef.current:Wne.findDOMNode(this),this.setState(function(){return i.getRects()})},s.getRects=function(){if(!this.node)return this.state;var o=this.node,i=o.parentNode,c=o.getBoundingClientRect?o.getBoundingClientRect():Iee,u=i!=null&&i.getBoundingClientRect?i.getBoundingClientRect():Iee;return{rect:c,parentRect:u}},s.render=function(){return A.createElement(e,Cj({nodeRef:this.nodeRef,getRects:this.getRects},this.state,this.props))},r}(A.PureComponent),t.displayName="withBoundingRects("+(e.displayName||"")+")",t}var z2e=f.createContext({isFlippedVertically:!1,isFlippedHorizontally:!1}),P4t=z2e.Provider;z2e.Consumer;var R4t=["children","getRects","left","offsetLeft","offsetTop","parentRect","rect","style","top","unstyled","nodeRef"];function qw(){return qw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qw.apply(null,arguments)}function I4t(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function G2e(e){var t=e.children;e.getRects;var n=e.left,r=n===void 0?0:n,s=e.offsetLeft,a=s===void 0?10:s,o=e.offsetTop,i=o===void 0?10:o,c=e.parentRect,u=e.rect,d=e.style,m=d===void 0?H2e:d,h=e.top,p=h===void 0?0:h,g=e.unstyled,y=g===void 0?!1:g,v=e.nodeRef,x=I4t(e,R4t),b,_=!1,w=!1;if(u&&c){var S=r,C=p;if(c.width){var E=S+a+u.width-c.width,M=u.width-S-a;_=E>0&&E>M}else{var T=S+a+u.width-window.innerWidth,I=u.width-S-a;_=T>0&&T>I}if(c.height){var j=C+i+u.height-c.height,N=u.height-C-i;w=j>0&&j>N}else w=C+i+u.height>window.innerHeight;S=_?S-u.width-a:S+a,C=w?C-u.height-i:C+i,S=Math.round(S),C=Math.round(C),b="translate("+S+"px, "+C+"px)"}return A.createElement(YF,qw({ref:v,style:qw({left:0,top:0,transform:b},!y&&m)},x),A.createElement(P4t,{value:{isFlippedVertically:!w,isFlippedHorizontally:!_}},t))}G2e.propTypes={nodeRef:we.oneOfType([we.string,we.func,we.object])};const j4t=A4t(G2e);function jee(e){return function(){return e}}function O4t(e){return e[0]}function L4t(e){return e[1]}function Kw(){this._=null}function gM(e){e.U=e.C=e.L=e.R=e.P=e.N=null}Kw.prototype={constructor:Kw,insert:function(e,t){var n,r,s;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=Oee(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)r=n.U,n===r.L?(s=r.R,s&&s.C?(n.C=s.C=!1,r.C=!0,e=r):(e===n.R&&(Qg(this,n),e=n,n=e.U),n.C=!1,r.C=!0,Xg(this,r))):(s=r.L,s&&s.C?(n.C=s.C=!1,r.C=!0,e=r):(e===n.L&&(Xg(this,n),e=n,n=e.U),n.C=!1,r.C=!0,Qg(this,r))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t=e.U,n,r=e.L,s=e.R,a,o;if(r?s?a=Oee(s):a=r:a=s,t?t.L===e?t.L=a:t.R=a:this._=a,r&&s?(o=a.C,a.C=e.C,a.L=r,r.U=a,a!==s?(t=a.U,a.U=e.U,e=a.R,t.L=e,a.R=s,s.U=a):(a.U=t,t=a,e=a.R)):(o=e.C,e=a),e&&(e.U=t),!o){if(e&&e.C){e.C=!1;return}do{if(e===this._)break;if(e===t.L){if(n=t.R,n.C&&(n.C=!1,t.C=!0,Qg(this,t),n=t.R),n.L&&n.L.C||n.R&&n.R.C){(!n.R||!n.R.C)&&(n.L.C=!1,n.C=!0,Xg(this,n),n=t.R),n.C=t.C,t.C=n.R.C=!1,Qg(this,t),e=this._;break}}else if(n=t.L,n.C&&(n.C=!1,t.C=!0,Xg(this,t),n=t.L),n.L&&n.L.C||n.R&&n.R.C){(!n.L||!n.L.C)&&(n.R.C=!1,n.C=!0,Qg(this,n),n=t.L),n.C=t.C,t.C=n.L.C=!1,Xg(this,t),e=this._;break}n.C=!0,e=t,t=t.U}while(!e.C);e&&(e.C=!1)}}};function Qg(e,t){var n=t,r=t.R,s=n.U;s?s.L===n?s.L=r:s.R=r:e._=r,r.U=s,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Xg(e,t){var n=t,r=t.L,s=n.U;s?s.L===n?s.L=r:s.R=r:e._=r,r.U=s,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Oee(e){for(;e.L;)e=e.L;return e}function py(e,t,n,r){var s=[null,null],a=xs.push(s)-1;return s.left=e,s.right=t,n&&Yw(s,e,t,n),r&&Yw(s,t,e,r),Oa[e.index].halfedges.push(a),Oa[t.index].halfedges.push(a),s}function Zg(e,t,n){var r=[t,n];return r.left=e,r}function Yw(e,t,n,r){!e[0]&&!e[1]?(e[0]=r,e.left=t,e.right=n):e.left===n?e[1]=r:e[0]=r}function D4t(e,t,n,r,s){var a=e[0],o=e[1],i=a[0],c=a[1],u=o[0],d=o[1],m=0,h=1,p=u-i,g=d-c,y;if(y=t-i,!(!p&&y>0)){if(y/=p,p<0){if(y<m)return;y<h&&(h=y)}else if(p>0){if(y>h)return;y>m&&(m=y)}if(y=r-i,!(!p&&y<0)){if(y/=p,p<0){if(y>h)return;y>m&&(m=y)}else if(p>0){if(y<m)return;y<h&&(h=y)}if(y=n-c,!(!g&&y>0)){if(y/=g,g<0){if(y<m)return;y<h&&(h=y)}else if(g>0){if(y>h)return;y>m&&(m=y)}if(y=s-c,!(!g&&y<0)){if(y/=g,g<0){if(y>h)return;y>m&&(m=y)}else if(g>0){if(y<m)return;y<h&&(h=y)}return!(m>0)&&!(h<1)||(m>0&&(e[0]=[i+m*p,c+m*g]),h<1&&(e[1]=[i+h*p,c+h*g])),!0}}}}}function F4t(e,t,n,r,s){var a=e[1];if(a)return!0;var o=e[0],i=e.left,c=e.right,u=i[0],d=i[1],m=c[0],h=c[1],p=(u+m)/2,g=(d+h)/2,y,v;if(h===d){if(p<t||p>=r)return;if(u>m){if(!o)o=[p,n];else if(o[1]>=s)return;a=[p,s]}else{if(!o)o=[p,s];else if(o[1]<n)return;a=[p,n]}}else if(y=(u-m)/(h-d),v=g-y*p,y<-1||y>1)if(u>m){if(!o)o=[(n-v)/y,n];else if(o[1]>=s)return;a=[(s-v)/y,s]}else{if(!o)o=[(s-v)/y,s];else if(o[1]<n)return;a=[(n-v)/y,n]}else if(d<h){if(!o)o=[t,y*t+v];else if(o[0]>=r)return;a=[r,y*r+v]}else{if(!o)o=[r,y*r+v];else if(o[0]<t)return;a=[t,y*t+v]}return e[0]=o,e[1]=a,!0}function U4t(e,t,n,r){for(var s=xs.length,a;s--;)(!F4t(a=xs[s],e,t,n,r)||!D4t(a,e,t,n,r)||!(Math.abs(a[0][0]-a[1][0])>Fn||Math.abs(a[0][1]-a[1][1])>Fn))&&delete xs[s]}function B4t(e){return Oa[e.index]={site:e,halfedges:[]}}function V4t(e,t){var n=e.site,r=t.left,s=t.right;return n===s&&(s=r,r=n),s?Math.atan2(s[1]-r[1],s[0]-r[0]):(n===r?(r=t[1],s=t[0]):(r=t[0],s=t[1]),Math.atan2(r[0]-s[0],s[1]-r[1]))}function q2e(e,t){return t[+(t.left!==e.site)]}function $4t(e,t){return t[+(t.left===e.site)]}function W4t(){for(var e=0,t=Oa.length,n,r,s,a;e<t;++e)if((n=Oa[e])&&(a=(r=n.halfedges).length)){var o=new Array(a),i=new Array(a);for(s=0;s<a;++s)o[s]=s,i[s]=V4t(n,xs[r[s]]);for(o.sort(function(c,u){return i[u]-i[c]}),s=0;s<a;++s)i[s]=r[o[s]];for(s=0;s<a;++s)r[s]=i[s]}}function H4t(e,t,n,r){var s=Oa.length,a,o,i,c,u,d,m,h,p,g,y,v,x=!0;for(a=0;a<s;++a)if(o=Oa[a]){for(i=o.site,u=o.halfedges,c=u.length;c--;)xs[u[c]]||u.splice(c,1);for(c=0,d=u.length;c<d;)g=$4t(o,xs[u[c]]),y=g[0],v=g[1],m=q2e(o,xs[u[++c%d]]),h=m[0],p=m[1],(Math.abs(y-h)>Fn||Math.abs(v-p)>Fn)&&(u.splice(c,0,xs.push(Zg(i,g,Math.abs(y-e)<Fn&&r-v>Fn?[e,Math.abs(h-e)<Fn?p:r]:Math.abs(v-r)<Fn&&n-y>Fn?[Math.abs(p-r)<Fn?h:n,r]:Math.abs(y-n)<Fn&&v-t>Fn?[n,Math.abs(h-n)<Fn?p:t]:Math.abs(v-t)<Fn&&y-e>Fn?[Math.abs(p-t)<Fn?h:e,t]:null))-1),++d);d&&(x=!1)}if(x){var b,_,w,S=1/0;for(a=0,x=null;a<s;++a)(o=Oa[a])&&(i=o.site,b=i[0]-e,_=i[1]-t,w=b*b+_*_,w<S&&(S=w,x=o));if(x){var C=[e,t],E=[e,r],M=[n,r],T=[n,t];x.halfedges.push(xs.push(Zg(i=x.site,C,E))-1,xs.push(Zg(i,E,M))-1,xs.push(Zg(i,M,T))-1,xs.push(Zg(i,T,C))-1)}}for(a=0;a<s;++a)(o=Oa[a])&&(o.halfedges.length||delete Oa[a])}var K2e=[],QF;function z4t(){gM(this),this.x=this.y=this.arc=this.site=this.cy=null}function Sm(e){var t=e.P,n=e.N;if(!(!t||!n)){var r=t.site,s=e.site,a=n.site;if(r!==a){var o=s[0],i=s[1],c=r[0]-o,u=r[1]-i,d=a[0]-o,m=a[1]-i,h=2*(c*m-u*d);if(!(h>=-1e-12)){var p=c*c+u*u,g=d*d+m*m,y=(m*p-u*g)/h,v=(c*g-d*p)/h,x=K2e.pop()||new z4t;x.arc=e,x.site=s,x.x=y+o,x.y=(x.cy=v+i)+Math.sqrt(y*y+v*v),e.circle=x;for(var b=null,_=b0._;_;)if(x.y<_.y||x.y===_.y&&x.x<=_.x)if(_.L)_=_.L;else{b=_.P;break}else if(_.R)_=_.R;else{b=_;break}b0.insert(b,x),b||(QF=x)}}}}function Xm(e){var t=e.circle;t&&(t.P||(QF=t.N),b0.remove(t),K2e.push(t),gM(t),e.circle=null)}var Y2e=[];function G4t(){gM(this),this.edge=this.site=this.circle=null}function Lee(e){var t=Y2e.pop()||new G4t;return t.site=e,t}function PN(e){Xm(e),Zm.remove(e),Y2e.push(e),gM(e)}function q4t(e){var t=e.circle,n=t.x,r=t.cy,s=[n,r],a=e.P,o=e.N,i=[e];PN(e);for(var c=a;c.circle&&Math.abs(n-c.circle.x)<Fn&&Math.abs(r-c.circle.cy)<Fn;)a=c.P,i.unshift(c),PN(c),c=a;i.unshift(c),Xm(c);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<Fn&&Math.abs(r-u.circle.cy)<Fn;)o=u.N,i.push(u),PN(u),u=o;i.push(u),Xm(u);var d=i.length,m;for(m=1;m<d;++m)u=i[m],c=i[m-1],Yw(u.edge,c.site,u.site,s);c=i[0],u=i[d-1],u.edge=py(c.site,u.site,null,s),Sm(c),Sm(u)}function K4t(e){for(var t=e[0],n=e[1],r,s,a,o,i=Zm._;i;)if(a=Q2e(i,n)-t,a>Fn)i=i.L;else if(o=t-Y4t(i,n),o>Fn){if(!i.R){r=i;break}i=i.R}else{a>-1e-6?(r=i.P,s=i):o>-1e-6?(r=i,s=i.N):r=s=i;break}B4t(e);var c=Lee(e);if(Zm.insert(r,c),!(!r&&!s)){if(r===s){Xm(r),s=Lee(r.site),Zm.insert(c,s),c.edge=s.edge=py(r.site,c.site),Sm(r),Sm(s);return}if(!s){c.edge=py(r.site,c.site);return}Xm(r),Xm(s);var u=r.site,d=u[0],m=u[1],h=e[0]-d,p=e[1]-m,g=s.site,y=g[0]-d,v=g[1]-m,x=2*(h*v-p*y),b=h*h+p*p,_=y*y+v*v,w=[(v*b-p*_)/x+d,(h*_-y*b)/x+m];Yw(s.edge,u,g,w),c.edge=py(u,e,null,w),s.edge=py(e,g,null,w),Sm(r),Sm(s)}}function Q2e(e,t){var n=e.site,r=n[0],s=n[1],a=s-t;if(!a)return r;var o=e.P;if(!o)return-1/0;n=o.site;var i=n[0],c=n[1],u=c-t;if(!u)return i;var d=i-r,m=1/a-1/u,h=d/u;return m?(-h+Math.sqrt(h*h-2*m*(d*d/(-2*u)-c+u/2+s-a/2)))/m+r:(r+i)/2}function Y4t(e,t){var n=e.N;if(n)return Q2e(n,t);var r=e.site;return r[1]===t?r[0]:1/0}var Fn=1e-6,Zm,Oa,b0,xs;function Q4t(e,t,n){return(e[0]-n[0])*(t[1]-e[1])-(e[0]-t[0])*(n[1]-e[1])}function X4t(e,t){return t[1]-e[1]||t[0]-e[0]}function Mj(e,t){var n=e.sort(X4t).pop(),r,s,a;for(xs=[],Oa=new Array(e.length),Zm=new Kw,b0=new Kw;;)if(a=QF,n&&(!a||n[1]<a.y||n[1]===a.y&&n[0]<a.x))(n[0]!==r||n[1]!==s)&&(K4t(n),r=n[0],s=n[1]),n=e.pop();else if(a)q4t(a.arc);else break;if(W4t(),t){var o=+t[0][0],i=+t[0][1],c=+t[1][0],u=+t[1][1];U4t(o,i,c,u),H4t(o,i,c,u)}this.edges=xs,this.cells=Oa,Zm=b0=xs=Oa=null}Mj.prototype={constructor:Mj,polygons:function(){var e=this.edges;return this.cells.map(function(t){var n=t.halfedges.map(function(r){return q2e(t,e[r])});return n.data=t.site.data,n})},triangles:function(){var e=[],t=this.edges;return this.cells.forEach(function(n,r){if(i=(a=n.halfedges).length)for(var s=n.site,a,o=-1,i,c,u=t[a[i-1]],d=u.left===s?u.right:u.left;++o<i;)c=d,u=t[a[o]],d=u.left===s?u.right:u.left,c&&d&&r<c.index&&r<d.index&&Q4t(s,c,d)<0&&e.push([s.data,c.data,d.data])}),e},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})},find:function(e,t,n){for(var r=this,s,a=r._found||0,o=r.cells.length,i;!(i=r.cells[a]);)if(++a>=o)return null;var c=e-i.site[0],u=t-i.site[1],d=c*c+u*u;do i=r.cells[s=a],a=null,i.halfedges.forEach(function(m){var h=r.edges[m],p=h.left;if(!((p===i.site||!p)&&!(p=h.right))){var g=e-p[0],y=t-p[1],v=g*g+y*y;v<d&&(d=v,a=p.index)}});while(a!==null);return r._found=s,n==null||d<=n*n?i.site:null}};function Z4t(){var e=O4t,t=L4t,n=null;function r(s){return new Mj(s.map(function(a,o){var i=[Math.round(e(a,o,s)/Fn)*Fn,Math.round(t(a,o,s)/Fn)*Fn];return i.index=o,i.data=a,i}),n)}return r.polygons=function(s){return r(s).polygons()},r.links=function(s){return r(s).links()},r.triangles=function(s){return r(s).triangles()},r.x=function(s){return arguments.length?(e=typeof s=="function"?s:jee(+s),r):e},r.y=function(s){return arguments.length?(t=typeof s=="function"?s:jee(+s),r):t},r.extent=function(s){return arguments.length?(n=s==null?null:[[+s[0][0],+s[0][1]],[+s[1][0],+s[1][1]]],r):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},r.size=function(s){return arguments.length?(n=s==null?null:[[0,0],[+s[0],+s[1]]],r):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},r}var Dee=1;function J4t(e){var t=e.width,n=t===void 0?0:t,r=e.height,s=r===void 0?0:r,a=e.x,o=e.y,i=Z4t();return a&&i.x(a),o&&i.y(o),i.extent([[-1,-1],[n+Dee,s+Dee]]),i}function yM({data:e,innerHeight:t,innerWidth:n,xScale:r,yScale:s,xGet:a,yGet:o,voronoiRadius:i=void 0}){const{showTooltip:c,hideTooltip:u,tooltipData:d}=M4t(),m=f.useMemo(()=>J4t({width:n,height:t,x:g=>r(a(g)),y:g=>s(o(g))})(e),[e,n,t,r,s,a,o]),h=f.useCallback(p=>{const{x:g,y}=S4t(p)??{x:0,y:0},v=m.find(g,y,i);if(!v)return u();c({tooltipData:{localPoint:{x:g,y},voronoiSite:v}})},[c,u,m,i]);return f.useMemo(()=>({showTooltip:c,hideTooltip:u,handleTooltip:h,tooltipData:d}),[h,u,c,d])}const z1=A.memo(function({margin:t,height:n,width:r,tooltipHandle:s,tooltipHide:a,maxYLabelWidth:o}){const c=f.useCallback(()=>a(),[a]);return l.jsx(Hp,{x:t.left+o-2.5,y:t.top,width:r-t.right-t.left*2-o+2.5*2,height:n-t.bottom-t.top,fill:"transparent",onTouchStart:s,onTouchMove:s,onMouseMove:s,onMouseLeave:c})});z1.displayName="TooltipListener";const _0=A.memo(({cx:e,cy:t,color:n,r=3})=>l.jsx("circle",{cx:e,cy:t,r,fill:n,stroke:n,strokeWidth:1}));_0.displayName="YDot";const Kh=A.memo(({marginTop:e,tooltipLeft:t=0,innerHeight:n,color:r,strokeWidth:s=1,dotted:a=!1})=>{const o=f.useMemo(()=>({x:t,y:e}),[e,t]),i=f.useMemo(()=>({x:t,y:n+e}),[n,e,t]);return l.jsx("g",{children:l.jsx(pE,{from:o,to:i,stroke:r,strokeWidth:s,strokeDasharray:a?"4 4":void 0,pointerEvents:"none",className:"animate-in fade-in duration-300"})})});Kh.displayName="YCrosshair";const RN=e=>e,X2e=A.memo(({entry:e,xFormat:t=RN,yFormat:n=RN,zFormat:r=RN,xGet:s,yGet:a,zGet:o})=>{const i=[{value:t(s(e))},{value:n(a(e))}];o&&i.unshift({value:r(o(e))});const c=i.filter(u=>u.value);return l.jsx(z,{children:c.map(({value:u},d)=>l.jsx(D,{variant:"tiny",className:"py-two",children:String(u)},d))})});X2e.displayName="InnerToolTip";const Z2e=A.memo(({tooltipTop:e=0,tooltipLeft:t=0,children:n})=>{const r=f.useMemo(()=>({position:"absolute",pointerEvents:"none"}),[]);return l.jsx(j4t,{top:e,left:t,style:r,children:l.jsx(z,{variant:"background",className:"p-sm dark:border-inverse rounded-md border shadow-sm",children:n})})});Z2e.displayName="Tooltip";const G1=A.memo(({tooltipTop:e,tooltipLeft:t,entry:n,data:r,config:s,UserToolTip:a,xFormat:o,yFormat:i,zFormat:c,zGet:u,xGet:d,yGet:m})=>l.jsx(Z2e,{tooltipTop:e,tooltipLeft:t,children:a?l.jsx(a,{entry:n,config:s,data:r}):l.jsx(X2e,{entry:n,config:s,xFormat:o,yFormat:i,zFormat:c,zGet:u,xGet:d,yGet:m})}));G1.displayName="ComposedTooltip";const Yf=0,J2e=A.memo(function(t){const{width:n,height:r,margin:s,config:a,tooltip:o,colors:i,axes:c=!0}=t,{colorSchema:u,axisColor:d,tickColor:m}=fM(i),h=ms(),p=mM({data:t.data}),{xAxisRef:g,yAxisRef:y,maxYLabelWidth:v,maxXLabelWidth:x,minXRequiredWidth:b}=uM(),{innerHeight:_,innerWidth:w,xRange:S,yRange:C}=$1({width:n,height:r,margin:s,maxYLabelWidth:v,hasAxis:c}),{xNumTicks:E,yNumTicks:M,xTiltTicks:T}=dM({config:a,innerWidth:w,innerHeight:_,maxXLabelWidth:x}),{xGet:I,yGet:j,zGet:N}=hM({config:a}),{xFormat:P,yFormat:R,xTooltipFormat:k,yTooltipFormat:O,zTooltipFormat:L}=pM({config:a}),F=f.useMemo(()=>{if(!a?.z?.accessor)return[{key:"default",data:p}];const ie=a.z.accessor,pe=Rv(p,me=>String(me[ie]));return Object.entries(pe).map(([me,de])=>({key:me,data:de}))},[p,a.z]),U=F.length>1,V=U?F.map(({key:ie})=>ie):p.map(I),W=Ua.band({range:S,domain:V,padding:.4}),H=[...new Set(p.map(I))],G=Ua.band({range:[0,W.bandwidth()],domain:H,padding:.1}),K=f.useMemo(()=>{const[ie,pe]=Ll(p,j),me=Math.min(Yf,ie),de=Math.max(Yf,pe);return[me,de]},[p,j]),$=f.useMemo(()=>Ua.linear({range:C,domain:K}),[C,K]),q=Ua.ordinal({range:u.slice(0,H.length),domain:U?H:V}),{tooltipData:Z,hideTooltip:se,handleTooltip:Y}=yM({data:p,innerHeight:_,innerWidth:w,xScale:U?G:W,yScale:$,xGet:I,yGet:j}),re=f.useCallback(({localPoint:ie})=>{const pe=U?G:W,me=pe.bandwidth(),de=(pe.step()-me)/4;if(isNaN(ie?.x??NaN)||isNaN(ie?.y??NaN))return null;const ve=ie?.x,Ae=ie?.y;return p.reduce((Se,De)=>{let Ne=pe(I(De))||0;const Pe=$(j(De)),dt=Math.abs(Pe-$(0));return U&&(Ne+=W(De.z)||0),Ne!==void 0&&Pe!==void 0&&ve>=Ne-de&&ve<=Ne+me+de&&Ae>=Pe-dt&&Ae<=Pe+dt?{x:Ne,y:Pe,data:De}:Se},null)},[p,W,I,$,j,U,G])({localPoint:Z?.localPoint}),te=f.useMemo(()=>({marginLeft:s.left,marginRight:s.right}),[s.left,s.right]),le=f.useMemo(()=>[Yf],[]);return l.jsxs(z,{className:"relative",children:[U&&H.length>1&&l.jsx(z,{style:te,children:l.jsx(W1,{entries:H.map(ie=>({key:ie,color:q(ie)}))})}),l.jsxs(H1,{width:n,height:r,children:[l.jsx(V1,{xScale:W,yScale:$,xFormat:P,yFormat:R,width:n,height:r,margin:s,yNumTicks:M,xNumTicks:E,yTickValues:a.y.tickValues,xTickValues:a.x.tickValues,xAxisLabel:a.x.label,yAxisLabel:a.y.label,animated:!0,tickColor:m,axisColor:d,xAxisRef:g,yAxisRef:y,xTiltTicks:T}),h&&l.jsx(U2e,{left:s.left,scale:$,width:n-s.right-s.left*2,stroke:d,tickValues:le,strokeWidth:2}),F.map(({key:ie,data:pe})=>l.jsx(Ca,{left:W(ie),children:pe.map((me,de)=>{const ve=U?G:W;return l.jsx(_e.rect,{rx:2,ry:2,x:ve(I(me)),width:ve.bandwidth(),fill:q(U?de:ie),initial:{y:$(Yf),height:0,opacity:0},animate:{y:$(Math.max(Yf,j(me))),height:Math.abs($(j(me))-$(Yf)),opacity:1},transition:{duration:.5,ease:"easeInOut"}},de)})},ie)),l.jsx(z1,{margin:s,tooltipHandle:Y,tooltipHide:se,height:r,width:n,maxYLabelWidth:v})]}),re&&Z&&l.jsx(G1,{UserToolTip:o,tooltipTop:Z?.localPoint?.y,tooltipLeft:Z?.localPoint?.x,entry:re.data,data:p,config:a,xFormat:k,yFormat:O,zFormat:L,zGet:N,xGet:I,yGet:j})]})});J2e.displayName="BarChart";function eTt({xScale:e,xPosition:t}){const n=e.domain(),[r,s]=e.range(),a=(s-r)/(n.length-1),o=Math.min(Math.max(Math.round((t-r)/a),0),n.length-1);return n[o]}function tTt({tooltipData:e,config:t,groups:n,xScale:r,xGet:s}){const a=t.z?.accessor?e?.voronoiSite?.data?.[t.z?.accessor]:"",o=f.useMemo(()=>[...(n.find(({key:m})=>m===a)||n[0])?.d||[]].sort((m,h)=>s(m)-s(h)),[a,n,s]),i=e?.localPoint.x,c=f.useMemo(()=>o.map(s),[o,s]);return f.useMemo(()=>{if(i==null)return;if("invert"in r){const h=r.invert(i),p=Vp(c,h);if(p<=0)return o[0];if(p>=c.length)return o[c.length-1];const g=o[p-1],y=o[p];return Math.abs(s(g)-h)<Math.abs(s(y)-h)?g:y}const d=eTt({xScale:r,xPosition:i}),m=o.find(h=>String(s(h))===String(d));return m||o.reduce((h,p)=>Math.abs(s(p)-d)<Math.abs(s(h)-d)?p:h,o[0])},[i,r,o,s,c])}const ewe=A.memo(function(t){const{$t:n}=X(),{width:r,height:s,margin:a={top:0,right:0,bottom:0,left:0},config:o,tooltip:i,axes:c=!0,colors:u,animate:d=!0,includeLegend:m=!0,endTime:h,previousClose:p,exchangeName:g,showLastPoint:y=!1,children:v}=t,[x,b]=f.useState(null),_=mM({data:t.data}),w=f.useRef(new Set),{colorSchema:S,tickColor:C,axisColor:E,textColor:M}=fM(u),{colorScheme:T}=fs(),I=T==="dark",{xAxisRef:j,yAxisRef:N,maxYLabelWidth:P,maxXLabelWidth:R,minXRequiredWidth:k}=uM(),{xGet:O,yGet:L,zGet:F}=hM({config:o}),{xFormat:U,yFormat:V,xTooltipFormat:W,yTooltipFormat:H,zTooltipFormat:G}=pM({config:o}),{xDomain:K,yDomain:$}=KF({config:o,data:_,xGet:O,yGet:L,endTime:h,previousClose:p}),{innerHeight:q,innerWidth:Z,xRange:se,yRange:Y}=$1({width:r,height:s,margin:a,maxYLabelWidth:P,hasAxis:c}),{xNumTicks:Q,yNumTicks:re,xTiltTicks:te}=dM({config:o,innerWidth:Z,innerHeight:q,maxXLabelWidth:R}),le=f.useMemo(()=>Ua[o.x.scale]({range:[se[0],R?se[1]-R/2:se[1]],domain:K}),[o.x.scale,se,K,R]),ie=f.useMemo(()=>{const We=o.y.scale==="log";return Ua[o.y.scale]({range:Y,domain:$,base:We?2:void 0,nice:!We,round:!0})},[o.y.scale,Y,$]),pe=f.useMemo(()=>{if(!o.z?.accessor)return[{key:"",d:_}];const We=o.z.accessor,Oe=Rv(_,Tt=>String(Tt[We]));return Object.entries(Oe).map(([Tt,$e])=>({key:Tt,d:$e}))},[_,o?.z?.accessor]),me=f.useMemo(()=>{if(pe.length<=1)return null;const We=new Map;return pe.forEach(Tt=>{Tt.d.forEach($e=>{const ct=O($e);We.set(ct,$e)})}),Array.from(We.values()).sort((Tt,$e)=>O(Tt)-O($e))},[pe,O]),{tooltipData:de,hideTooltip:ve,handleTooltip:Ae}=yM({data:_,innerHeight:q,innerWidth:Z,xScale:le,yScale:ie,xGet:O,yGet:L}),Se=tTt({tooltipData:de,config:o,groups:pe,xScale:le,xGet:O}),De=f.useMemo(()=>!y||!pe.length||!pe[0].d.length?null:pe[0].d.at(-1),[pe,y]),Ne=f.useMemo(()=>Cf().x(We=>le(O(We))).y(We=>ie(L(We))).curve(tf),[le,ie,O,L]),Pe=f.useMemo(()=>Ua.ordinal({domain:pe.map(({key:We})=>We),range:S}),[S,pe]),dt=f.useCallback(()=>{de&&b(Se||null)},[de,Se]),et=f.useCallback(()=>{b(null)},[]),Et=f.useMemo(()=>{const We={};if(!x||!Se||!pe.length)return We;const Oe=O(x),Tt=O(Se),[$e,ct]=Oe<Tt?[Oe,Tt]:[Tt,Oe],yt=fn=>{const wr=o.z?.accessor?fn[o.z.accessor]:pe[0].key,sn=pe.find(({key:kt})=>kt===wr);return sn?sn.d.filter(kt=>{const Kt=O(kt);return Kt>=$e&&Kt<=ct}):[]},ht=o.z?.accessor?x[o.z.accessor]:pe[0].key;We[ht]=yt(x);const ut=o.z?.accessor?Se[o.z.accessor]:pe[0].key;return ht!==ut&&(We[ut]=yt(Se)),We},[x,Se,pe,O,o.z?.accessor]),ue=f.useMemo(()=>{const We=Et[o.z?.accessor?x?.[o.z.accessor]:pe[0]?.key]||[],Oe=Et[o.z?.accessor?Se?.[o.z.accessor]:pe[0]?.key]||[],Tt=[...We,...Oe],$e=new Map;return Tt.forEach(yt=>{$e.set(O(yt),yt)}),Array.from($e.values()).sort((yt,ht)=>O(yt)-O(ht))},[Et,o.z?.accessor,x,Se,pe,O]),Ue=f.useMemo(()=>({marginLeft:a.left,marginRight:a.right}),[a.left,a.right]),Ct=f.useMemo(()=>[p],[p]),Ye=f.useCallback(We=>le(O(We))??0,[le,O]),mt=f.useCallback(We=>ie(L(We))??0,[ie,L]);return l.jsxs(z,{children:[o.z&&pe?.length>1&&m&&l.jsx(z,{style:Ue,children:l.jsx(W1,{entries:pe.map(({key:We})=>({key:We,color:Pe(We)}))})}),l.jsxs(z,{className:"relative",onMouseDown:dt,onMouseUp:et,onMouseLeave:et,children:[l.jsxs(H1,{width:r,height:s,children:[c&&l.jsx(V1,{width:r,height:s,margin:a,xScale:le,yScale:ie,xFormat:U,yFormat:V,yNumTicks:re,xNumTicks:Q,yTickValues:o.y.tickValues,xTickValues:o.x.tickValues,tickColor:C,axisColor:E,xAxisRef:j,yAxisRef:N,xTiltTicks:te,xAxisLabel:o.x.label,yAxisLabel:o.y.label}),v&&v({xScale:le,yScale:ie,xGet:O,yGet:L}),p&&l.jsx("text",{x:r-a.right-10,y:ie(p)-5,fill:M,fontSize:12,className:"font-mono",textAnchor:"end",children:g==="CRYPTO"?n({defaultMessage:"Prev day: {value}",id:"7i8MvDtMyq"},{value:typeof o.y.format=="function"?o.y.format(p):p}):n({defaultMessage:"Prev close: {value}",id:"uRPxTu0cgj"},{value:typeof o.y.format=="function"?o.y.format(p):p})}),p&&l.jsx(B1,{left:a.left,scale:ie,width:r-a.right-a.left*2,stroke:M,tickValues:Ct,strokeWidth:2,strokeDasharray:"2,6",opacity:I?.6:1}),Se&&l.jsx(Kh,{marginTop:a.top,tooltipLeft:le(O(Se)),innerHeight:q,color:E,strokeWidth:1}),x&&l.jsx(Kh,{marginTop:a.top,tooltipLeft:le(O(x)),innerHeight:q,color:E,strokeWidth:1}),me&&pe.length>1&&pe[1]?.key&&l.jsx(_e.path,{d:Ne(me),stroke:Pe(pe[1].key),strokeWidth:1.5,fill:"none",shapeRendering:"geometricPrecision",initial:d?{pathLength:d?0:1,opacity:d?0:1}:void 0,animate:d?{pathLength:1,opacity:1}:void 0,transition:d?{duration:.8,ease:pa}:void 0}),pe.map(({d:We,key:Oe},Tt)=>{const $e=w.current.has(Oe),ct=$e||!d?{initial:void 0,animate:{pathLength:1,opacity:1}}:{initial:{pathLength:d?0:1,opacity:d?0:1},animate:{pathLength:1,opacity:1},transition:{duration:.8,ease:pa,delay:Tt/pe.length}};return $e||w.current.add(Oe),l.jsx(_e.path,{d:Ne(We),stroke:Pe(Oe),strokeWidth:2,fill:"none",shapeRendering:"geometricPrecision",...ct},Oe)}),(Se||De)&&l.jsxs(_e.g,{initial:{opacity:0},animate:{opacity:1},transition:{duration:0,delay:.8},children:[l.jsx(_0,{cx:le(O(Se||De)),cy:ie(L(Se||De)),color:Pe(o.z?.accessor?(Se||De)?.[o.z.accessor]:""),r:5}),x&&Se&&l.jsxs(l.Fragment,{children:[l.jsx(_0,{cx:le(O(x)),cy:ie(L(x)),color:Pe(o.z?.accessor?x[o.z.accessor]:""),r:5}),ue.length>1&&l.jsx(Ph,{data:ue,x:Ye,y:mt,fill:Pe(pe[0].key),fillOpacity:.2,stroke:"none",yScale:ie,curve:tf})]})]}),(pe.length===1||pe.length===2)&&pe.map(({d:We,key:Oe},Tt)=>{const $e=Pe(Oe);return l.jsx(_e.g,{initial:d?{opacity:0,clipPath:"inset(0% 100% 0% 0%)"}:void 0,animate:d?{opacity:1,clipPath:"inset(0% 0% 0% 0%)"}:void 0,transition:d?{duration:.8,ease:pa,delay:Tt/pe.length}:void 0,children:!x&&(pe.length===1||Tt===0)&&l.jsxs(l.Fragment,{children:[l.jsx(tE,{from:`${$e}22`,to:`${$e}00`,id:Oe}),l.jsx(Ph,{data:We,x:Ye,y:mt,strokeWidth:0,yScale:ie,fill:`url('#${Oe}')`},Oe)]})},Oe)}),l.jsx(z1,{margin:a,tooltipHandle:Ae,tooltipHide:ve,height:s,width:r,maxYLabelWidth:P})]}),Se&&de&&l.jsx(G1,{tooltipTop:de.localPoint.y,tooltipLeft:de.localPoint.x,entry:Se,UserToolTip:i?We=>l.jsx(i,{...We,comparisonEntry:x||void 0}):void 0,data:_,config:o,xFormat:W,yFormat:H,zFormat:G,zGet:F,xGet:O,yGet:L})]})]})});ewe.displayName="CompositeLineChart";const nTt=200,rTt={top:24,right:8,bottom:24,left:16};function sTt({xScale:e,xPosition:t}){const n=e.domain(),[r,s]=e.range(),a=(s-r)/(n.length-1),o=Math.min(Math.max(Math.round((t-r)/a),0),n.length-1);return n[o]}function aTt({tooltipData:e,config:t,groups:n,xScale:r,xGet:s}){const a=t.z?.accessor?e?.voronoiSite?.data?.[t.z?.accessor]:"",o=f.useMemo(()=>[...(n.find(({key:d})=>d===a)||n[0])?.d||[]].sort((d,m)=>s(d)-s(m)),[a,n,s]),i=e?.localPoint.x;return f.useMemo(()=>{if(!i)return;if("invert"in r){const m=r.invert(i),h=Vp(o.map(s),m);return o?.[h-1]}const u=sTt({xScale:r,xPosition:i});return o.find(m=>String(s(m))===String(u))},[i,r,o,s])}const twe=A.memo(e=>{const{$t:t}=X(),{enableComparison:n=!0,width:r,height:s,margin:a={top:0,right:0,bottom:0,left:0},config:o,tooltip:i,axes:c=!0,colors:u,animate:d=!0,includeLegend:m=!0,endTime:h,previousClose:p,exchangeName:g,showLastPoint:y=!1,children:v}=e,[x,b]=f.useState(null),_=mM({data:e.data}),w=ms(),{colorSchema:S,tickColor:C,axisColor:E,textColor:M}=fM(u),{colorScheme:T}=fs(),I=f.useMemo(()=>w?T==="dark":!1,[T,w]),{xAxisRef:j,yAxisRef:N,maxYLabelWidth:P,maxXLabelWidth:R,minXRequiredWidth:k}=uM(),{xGet:O,yGet:L,zGet:F}=hM({config:o}),{xFormat:U,yFormat:V,xTooltipFormat:W,yTooltipFormat:H,zTooltipFormat:G}=pM({config:o}),{xDomain:K,yDomain:$}=KF({config:o,data:_,xGet:O,yGet:L,endTime:h,previousClose:p}),{innerHeight:q,innerWidth:Z,xRange:se,yRange:Y}=$1({width:r,height:s,margin:a,maxYLabelWidth:P,hasAxis:c}),{xNumTicks:Q,yNumTicks:re,xTiltTicks:te}=dM({config:o,innerWidth:Z,innerHeight:q,maxXLabelWidth:R}),le=f.useMemo(()=>Ua[o.x.scale]({range:[se[0],R?se[1]-R/2:se[1]],domain:K}),[o.x.scale,se,K,R]),ie=f.useMemo(()=>{const Ye=o.y.scale==="log";return Ua[o.y.scale]({range:Y,domain:$,base:Ye?2:void 0,nice:!Ye,round:!0})},[o.y.scale,Y,$]),pe=f.useMemo(()=>{if(!o.z?.accessor)return[{key:"",d:_}];const Ye=o.z.accessor,mt=Rv(_,We=>String(We[Ye]));return Object.entries(mt).map(([We,Oe])=>({key:We,d:Oe}))},[_,o?.z?.accessor]),{tooltipData:me,hideTooltip:de,handleTooltip:ve}=yM({data:_,innerHeight:q,innerWidth:Z,xScale:le,yScale:ie,xGet:O,yGet:L}),Ae=aTt({tooltipData:me,config:o,groups:pe,xScale:le,xGet:O}),Se=f.useMemo(()=>!y||!pe.length||!pe[0].d.length?null:pe[0].d.at(-1),[pe,y]),De=f.useMemo(()=>Cf().x(Ye=>le(O(Ye))).y(Ye=>ie(L(Ye))).curve(tf),[le,ie,O,L]),Ne=f.useMemo(()=>Ua.ordinal({range:S}),[S]),Pe=f.useCallback(()=>{!me||!n||b(Ae||null)},[n,me,Ae]),dt=f.useCallback(()=>{n&&b(null)},[n]),et=f.useMemo(()=>{if(!x||!Ae||!pe.length)return[];const Ye=pe[0],mt=O(x),We=O(Ae),[Oe,Tt]=mt<We?[mt,We]:[We,mt];return Ye.d.filter($e=>{const ct=O($e);return ct>=Oe&&ct<=Tt})},[x,Ae,pe,O]),Et=f.useMemo(()=>({marginLeft:a.left,marginRight:a.right}),[a.left,a.right]),ue=f.useCallback(Ye=>le(O(Ye))??0,[le,O]),Ue=f.useCallback(Ye=>ie(L(Ye))??0,[ie,L]),Ct=f.useMemo(()=>[p],[p]);return l.jsxs(z,{children:[o.z&&pe?.length>1&&m&&l.jsx(z,{style:Et,children:l.jsx(W1,{entries:pe.map(({key:Ye})=>({key:Ye,color:Ne(Ye)}))})}),l.jsxs(z,{className:"relative",onMouseDown:Pe,onMouseUp:dt,onMouseLeave:dt,children:[l.jsxs(H1,{width:r,height:s,children:[c&&l.jsx(V1,{width:r,height:s,margin:a,xScale:le,yScale:ie,xFormat:U,yFormat:V,yNumTicks:re,xNumTicks:Q,yTickValues:o.y.tickValues,xTickValues:o.x.tickValues,tickColor:C,axisColor:E,xAxisRef:j,yAxisRef:N,xTiltTicks:te,xAxisLabel:o.x.label,yAxisLabel:o.y.label}),v&&v({xScale:le,yScale:ie,xGet:O,yGet:L}),p&&l.jsx("text",{x:r-a.right-10,y:ie(p)-5,fill:M,fontSize:12,className:"font-mono",textAnchor:"end",children:g==="CRYPTO"?t({defaultMessage:"Prev day: {value}",id:"7i8MvDtMyq"},{value:typeof o.y.format=="function"?o.y.format(p):p}):t({defaultMessage:"Prev close: {value}",id:"uRPxTu0cgj"},{value:typeof o.y.format=="function"?o.y.format(p):p})}),p&&l.jsx(B1,{left:a.left,scale:ie,width:r-a.right-a.left*2,stroke:M,tickValues:Ct,strokeWidth:2,strokeDasharray:"2,6",opacity:I?.6:1}),Ae&&l.jsx(Kh,{marginTop:a.top,tooltipLeft:le(O(Ae)),innerHeight:q,color:E,strokeWidth:1}),x&&l.jsx(Kh,{marginTop:a.top,tooltipLeft:le(O(x)),innerHeight:q,color:E,strokeWidth:1}),(Ae||Se)&&l.jsxs(_e.g,{initial:{opacity:0},animate:{opacity:1},transition:{duration:0,delay:.8},children:[l.jsx(_0,{cx:le(O(Ae||Se)),cy:ie(L(Ae||Se)),color:Ne(o.z?.accessor?(Ae||Se)?.[o.z.accessor]:""),r:5}),x&&Ae&&et.length>0&&l.jsxs(l.Fragment,{children:[l.jsx(_0,{cx:le(O(x)),cy:ie(L(x)),color:Ne(o.z?.accessor?x[o.z.accessor]:""),r:5}),l.jsx(Ph,{data:et,x:ue,y:Ue,fill:Ne(o.z?.accessor?x[o.z.accessor]:""),fillOpacity:.2,stroke:"none",yScale:ie,curve:tf})]})]}),pe.length===1&&pe.map(({d:Ye,key:mt},We)=>{const Oe=Ne(mt);return l.jsx(_e.g,{initial:d?{opacity:0,clipPath:"inset(0% 100% 0% 0%)"}:void 0,animate:d?{opacity:1,clipPath:"inset(0% 0% 0% 0%)"}:void 0,transition:d?{duration:.8,ease:"easeInOut",delay:We/pe.length}:void 0,children:!x&&l.jsxs(l.Fragment,{children:[l.jsx(tE,{from:`${Oe}22`,to:`${Oe}00`,id:mt}),l.jsx(Ph,{data:Ye,x:ue,y:Ue,strokeWidth:0,yScale:ie,fill:`url('#${mt}')`},mt)]})},mt)}),pe.map(({d:Ye,key:mt},We)=>l.jsx(_e.path,{d:De(Ye),stroke:Ne(mt),strokeWidth:2,fill:"none",shapeRendering:"geometricPrecision",initial:d?{pathLength:0,opacity:0}:void 0,animate:d?{pathLength:1,opacity:1}:void 0,transition:d?{duration:.8,ease:"easeInOut",delay:We/pe.length}:void 0},mt)),l.jsx(z1,{margin:a,tooltipHandle:ve,tooltipHide:de,height:s,width:r,maxYLabelWidth:P})]}),Ae&&me&&l.jsx(G1,{tooltipTop:me.localPoint.y,tooltipLeft:me.localPoint.x,entry:Ae,UserToolTip:i?Ye=>l.jsx(i,{...Ye,comparisonEntry:x||void 0}):void 0,data:_,config:o,xFormat:W,yFormat:H,zFormat:G,zGet:F,xGet:O,yGet:L})]})]})});twe.displayName="LineChart";const nwe=A.memo(e=>{const{width:t,height:n,margin:r,config:s,tooltip:a,colors:o,axes:i=!0}=e,c=3,u=mM({data:e.data}),{colorSchema:d,tickColor:m,axisColor:h}=fM(o),{xAxisRef:p,yAxisRef:g,maxYLabelWidth:y,maxXLabelWidth:v,minXRequiredWidth:x}=uM(),{innerHeight:b,innerWidth:_,xRange:w,yRange:S}=$1({width:t,height:n,margin:r,maxYLabelWidth:y,hasAxis:i}),{xNumTicks:C,yNumTicks:E,xTiltTicks:M}=dM({config:s,innerWidth:_,innerHeight:b,maxXLabelWidth:v}),{xGet:T,yGet:I,zGet:j}=hM({config:s}),{xFormat:N,yFormat:P,xTooltipFormat:R,yTooltipFormat:k,zTooltipFormat:O}=pM({config:s}),{xDomain:L,yDomain:F}=KF({data:u,config:s,xGet:T,yGet:I}),U=f.useMemo(()=>Ua[s.x.scale]({range:w,domain:L}),[s.x.scale,w,L]),V=f.useMemo(()=>Ua[s.y.scale]({range:S,domain:F,nice:!0,round:!0}),[s.y.scale,S,F]),{tooltipData:W,handleTooltip:H,hideTooltip:G}=yM({data:u,innerHeight:b,innerWidth:_,xScale:U,yScale:V,xGet:T,yGet:I,voronoiRadius:c*2}),K=f.useMemo(()=>Ua.ordinal({range:d}),[d]),$=f.useMemo(()=>{if(!s.z?.accessor)return[];const se=new Set([]);return u.forEach(Y=>se.add(Y[s?.z?.accessor])),Array.from(se)},[u,s.z]),q=W?.voronoiSite,Z=f.useMemo(()=>({marginLeft:r.left,marginRight:r.right}),[r.left,r.right]);return l.jsxs(z,{children:[$.length>1&&l.jsx(z,{style:Z,children:l.jsx(W1,{entries:$.map(se=>({key:se,color:K(se)}))})}),l.jsxs(z,{className:"relative",children:[l.jsxs(H1,{width:t,height:n,children:[l.jsx(V1,{xScale:U,yScale:V,xFormat:N,yFormat:P,width:t,height:n,margin:r,yTickValues:s.y.tickValues,xTickValues:s.x.tickValues,tickColor:m,axisColor:h,xAxisRef:p,yAxisRef:g,yNumTicks:E,xNumTicks:C,xTiltTicks:M}),q&&l.jsx(Kh,{marginTop:r.top,tooltipLeft:q[0],innerHeight:b,color:h}),l.jsx("g",{children:u.map((se,Y)=>{const Q=q?.data?.__key==se.__key,re=s.z?.accessor?K(se[s.z.accessor]):K("");return l.jsx(_e.circle,{"data-hint":`${T(se)}: ${I(se)}`,cx:U(T(se)),cy:V(I(se)),r:c,strokeWidth:c/2,stroke:re,fill:Q?"transparent":re,initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,ease:"easeInOut",delay:Y/u.length}},se.__key)})}),l.jsx(z1,{margin:r,tooltipHandle:H,tooltipHide:G,height:n,width:t,maxYLabelWidth:y})]}),q&&l.jsx(G1,{tooltipTop:q?.[1],tooltipLeft:q?.[0],UserToolTip:a,entry:q.data,data:u,config:s,xFormat:R,yFormat:k,zFormat:O,zGet:j,xGet:T,yGet:I})]})]})});nwe.displayName="ScatterChart";function oTt(e){const{type:t,config:n,width:r,data:s,height:a,margin:o,tooltip:i,axes:c,colors:u,animate:d,includeLegend:m,endTime:h,previousClose:p,exchangeName:g,showLastPoint:y,children:v,enableComparison:x}=e;return t==="line"?l.jsx(twe,{data:s,config:n,width:r,height:a,margin:o,tooltip:i,axes:c,colors:u,animate:d,includeLegend:m,endTime:h,previousClose:p,exchangeName:g,showLastPoint:y,enableComparison:x,children:v}):t==="bar"?l.jsx(J2e,{data:s,config:n,width:r,height:a,margin:o,tooltip:i,colors:u,includeLegend:m}):t==="scatter"?l.jsx(nwe,{data:s,config:n,width:r,height:a,margin:o,tooltip:i,colors:u,includeLegend:m}):t==="compositeLine"?l.jsx(ewe,{data:s,config:n,width:r,height:a,margin:o,tooltip:i,axes:c,colors:u,animate:d,includeLegend:m,endTime:h,previousClose:p,exchangeName:g,showLastPoint:y,children:v}):null}const rwe=A.memo(function({type:t,config:n,data:r,tooltip:s,height:a=nTt,margin:o=rTt,axes:i,className:c,colors:u,includeLegend:d,endTime:m,previousClose:h,exchangeName:p,showLastPoint:g,animate:y,children:v,enableComparison:x}){const b=f.useRef(null),{width:_}=$2e(b);return l.jsx("div",{ref:b,className:c,children:l.jsx(oTt,{type:t,data:r,config:n,width:_,height:a,margin:o,tooltip:s,axes:i,colors:u,includeLegend:d,endTime:m,previousClose:h,exchangeName:p,showLastPoint:g,animate:y,enableComparison:x,children:v})})});rwe.displayName="Chart";const bHt=({data:e,brands:t,teams:n,isLive:r,isFinal:s,startLabel:a,endLabel:o,nowLabel:i,shouldAdjustColors:c=!0,nicknameFormatter:u,tooltip:d})=>{const m=f.useMemo(()=>n.map((k,O)=>({...k,uniqueName:k.name+"".repeat(O+1)})),[n]),{teamsData:h}=f.useMemo(()=>({teamsData:m.map(k=>{const O=k.brand||k2e(k.id,t),L=e[k.id]?.candlesticks||[];return{id:k.id,name:k.name,uniqueName:k.uniqueName,brand:O,candlesticks:L}})}),[m,e,t]),{colorScheme:p,isColorSchemeReady:g}=fs(),{earliestTimestamp:y,latestTimestamp:v}=f.useMemo(()=>{let k=1/0,O=0;return h.forEach(L=>{if(L.candlesticks.length>0){const F=L.candlesticks[0]?.timestamp,U=L.candlesticks[L.candlesticks.length-1]?.timestamp;F&&(k=Math.min(k,F)),U&&(O=Math.max(O,U))}}),{earliestTimestamp:k===1/0?0:k,latestTimestamp:O}},[h]),x=f.useMemo(()=>y?new Date(y*1e3):null,[y]),b=f.useMemo(()=>v?new Date(v*1e3):null,[v]),_=f.useMemo(()=>h.flatMap(k=>k.candlesticks.map(O=>({timestamp:new Date(O.timestamp*1e3),value:(O.price.open+O.price.close)/2,team:k.uniqueName}))),[h]),{locale:w}=X(),S=!r&&!s,[C,E]=f.useState(!1),{isMobileStyle:M}=Ce();f.useEffect(()=>{E(!0)},[]);const T=f.useMemo(()=>{const k=[];if((r||s)&&x&&b)k.push(x,b);else if(S&&x&&b){const O=b.getTime()-x.getTime();k.push(x,new Date(x.getTime()+O/2),b)}return k},[r,s,S,x,b]),j={x:{accessor:"timestamp",scale:"time",format:f.useMemo(()=>{const k=T.map((O,L)=>{const F=L===0||L>0&&O.toDateString()!==T[L-1].toDateString();return{date:O,shouldShowDate:F}});return O=>S?k.find(U=>U.date.getTime()===O.getTime())?.shouldShowDate??!0?M?O.toLocaleString(w,{month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(":00","").replace(" AM","a").replace(" PM","p"):O.toLocaleString(w,{month:"short",day:"numeric",hour:"numeric",minute:"numeric"}):M?O.toLocaleString(w,{hour:"numeric",minute:"numeric",hour12:!0}).replace(":00","").replace(" AM","a").replace(" PM","p"):O.toLocaleString(w,{hour:"numeric",minute:"numeric"}):!x||!b?"":O.getTime()===x.getTime()?a:O.getTime()===b.getTime()?s?o:r?i:"":M?O.toLocaleString(w,{hour:"numeric",minute:"numeric",hour12:!0}).replace(":00","").replace(" AM","a").replace(" PM","p"):r?O.toLocaleString(w,{hour:"numeric",minute:"numeric"}):O.toLocaleString(w,{month:"short",day:"numeric",hour:"numeric",minute:"numeric"})},[T,S,M,w,x,b,s,r,a,o,i]),tickValues:T.length>0?T:void 0,tooltipFormat:k=>k.toLocaleString(w,{month:"short",day:"numeric",hour:"numeric",minute:"numeric"})},y:{accessor:"value",scale:"linear",format:k=>f4t(k/100)},z:{accessor:"team",scale:"ordinal",label:"team",format:k=>k.replace(/\u200B/g,"")}},N=f.useMemo(()=>{if(!C||!c)return h.map(L=>L.brand?.color||"#4a90e2");let k=null;return h.map(L=>{const F=Bn(L.brand?.color||"#4a90e2"),U=Qw(F,p==="dark"),V=Bn(L.brand?.color||"#4a90e2"),W=Qw(V,p==="dark"),H=Tj(U,W,p==="dark",2);if(k){const G=Tj(H,k,H.isDark(),2);return k=G,G.hex()}return k=H,H.hex()}).map(L=>L.toString())},[h,p,g,C,c]),{$t:P}=X(),R=n.length>2;return l.jsxs("div",{children:[l.jsxs(z,{className:B("mb-sm pb-sm -mx-md -mt-sm px-md flex border-b",{"flex-col":R,"items-center justify-between":!R}),children:[l.jsx(D,{variant:"baseSemi",className:R?"mb-sm":void 0,children:P({id:"J3+o0a6LLR",defaultMessage:"Odds to win"})}),l.jsx("div",{className:B("gap-md flex items-center",{"flex-wrap":R}),children:h.map((k,O)=>l.jsx(uTt,{nickname:u?u(k.name):k.name,color:N[O]},k.id))})]}),l.jsx(rwe,{type:"line",data:_,config:j,height:200,margin:iTt,className:"w-full",includeLegend:!1,colors:{colorSchema:N},enableComparison:!1,tooltip:d})]})},iTt={top:16,right:-6,bottom:10,left:8},Qw=(e,t)=>{const n="#f7f1f2",r="#1f2121";return e?Tj(e,Bn(t?r:n),t):Bn(n)},Tj=(e,t,n,r=3)=>{if(!e)return Bn(t);let s=Bn(e),a=0,o=0;for(;s.contrast(Bn(t))<r&&(s=n?lTt(s,a):cTt(s,a),a+=.01,o++,!(o>20)););return s};function lTt(e,t){const n=e.lightness();return e.lightness(n+(100-n)*t)}function cTt(e,t){const n=e.lightness();return e.lightness(n-n*t)}const uTt=({nickname:e,color:t})=>l.jsxs(z,{className:"gap-xs flex items-center",children:[l.jsx(z,{className:"size-2 rounded-full",style:{backgroundColor:t}}),l.jsx(D,{variant:"small",children:e})]}),dTt=({event:e})=>{const t=e.event.status==="live",n=e.event.extra.pitch_outcome,r=n?.count?.outs??0,s=n?.count?.balls??0,a=n?.count?.strikes??0,o=n?.runners,i=n?.count,c=n?.type!=="half_over"&&r!==3&&s!==4&&a!==3;return t?l.jsxs("div",{className:"mt-lg md:mt-md flex flex-col items-center gap-0",children:[l.jsx(fTt,{runners:o}),l.jsx(mTt,{outs:r}),l.jsx(hTt,{count:i,show:c})]}):null},fTt=({runners:e})=>{const t=e?.filter(n=>!n.out).map(n=>n.ending_base);return l.jsx("div",{style:{transformStyle:"preserve-3d",perspective:"1000px"},className:"inline-flex",children:l.jsx("div",{style:{transform:"rotateX(45deg)"},children:l.jsxs("div",{className:"gap-three grid rotate-45 grid-cols-2 grid-rows-2",children:[l.jsx(IN,{active:t?.includes(2)??!1}),l.jsx(IN,{active:t?.includes(1)??!1}),l.jsx(IN,{active:t?.includes(3)??!1})]})})})},IN=({active:e})=>l.jsx("div",{className:B("size-3 duration-150 md:size-4",e?"bg-super":"bg-inverse/25")}),mTt=({outs:e})=>l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(jN,{filled:e>=1}),l.jsx(jN,{filled:e>=2}),l.jsx(jN,{filled:e>=3})]}),jN=({filled:e})=>l.jsx("div",{className:B("relative size-1 rounded-full duration-150",e?"bg-inverse":"bg-inverse/25"),children:e&&l.jsx("div",{className:"bg-inverse repeat-1 absolute inset-0 animate-ping rounded-full"})}),hTt=({count:e,show:t})=>{const n=e?.balls??0,r=e?.strikes??0,s=n===0&&r===0;return l.jsx(D,{variant:"micro",color:s?"ultraLight":"light",className:B("mt-1 duration-150",t?"opacity-100":"opacity-0"),children:l.jsx("span",{className:"font-mono",children:t?`${n}-${r}`:l.jsx(l.Fragment,{children:""})})})};function pTt({children:e,className:t}){return l.jsx(D,{variant:"micro",className:B("py-xs !font-mono uppercase",t),color:"light",children:e})}const _Ht="[&_tr>td:first-child]:pl-md [&_tr>th:first-child]:pl-md [&_tr>td:last-child]:pr-md [&_tr>th:last-child]:pr-md",XF=({className:e,textCenter:t,finalText:n})=>{const{$t:r}=X();return l.jsx("div",{className:B("flex items-center justify-center",e),children:l.jsx(D,{variant:"tiny",color:"light",className:"bg-offset dark:bg-offsetPlus pt-three rounded-full px-2.5 py-0.5",textCenter:t,children:n?n.toUpperCase():r({defaultMessage:"Final",id:"6/JzkWi0di"}).toUpperCase()})})},gTt=({className:e,textCenter:t=!1})=>{const{$t:n}=X();return l.jsx("div",{className:B("flex items-center justify-center",e),children:l.jsx(D,{variant:"tiny",color:"light",className:"bg-offset dark:bg-offsetPlus pt-three rounded-full px-2.5 py-0.5",textCenter:t,children:n({defaultMessage:"Upcoming",id:"6/aEFZbs2i"}).toUpperCase()})})},swe=A.memo(({children:e,innerRef:t,canScrollLeft:n,canScrollRight:r,fadeOut:s})=>l.jsx("div",{className:"gap-md flex w-full flex-col overflow-hidden",children:l.jsxs(ec,{orientation:"horizontal",viewportRef:t,showScrollIndicator:!1,className:"relative",children:[l.jsx("div",{className:"p-md pt-0",children:e}),n&&s&&l.jsx(z,{className:"w-xl to-offset pointer-events-none absolute inset-y-0 left-0 bg-gradient-to-l from-transparent"}),r&&s&&l.jsx(z,{className:"w-xl from-offset pointer-events-none absolute inset-y-0 right-0 bg-gradient-to-l to-transparent"})]})}));swe.displayName="CanonicalScroll";const vM=A.memo(({title:e,subtitle:t,subtitleIcon:n,children:r,scrollable:s,fadeOut:a,trailing:o,titleClassName:i})=>{const c=f.useRef(null),[u,d]=f.useState(!1),[m,h]=f.useState(!1),p=f.useCallback(()=>{c.current?.scrollTo({left:c.current.scrollLeft-c.current.clientWidth,behavior:"smooth"})},[c]),g=f.useCallback(()=>{c.current?.scrollTo({left:c.current.scrollLeft+c.current.clientWidth,behavior:"smooth"})},[c]),y=f.useCallback(()=>{c.current&&(d(c.current.scrollLeft>0),h(c.current.scrollLeft+c.current.clientWidth+10<c.current.scrollWidth&&c.current.scrollWidth>c.current.clientWidth))},[c]);return f.useEffect(()=>{const v=c.current;return v?.addEventListener("scroll",y),()=>{v?.removeEventListener("scroll",y)}},[y,c]),f.useEffect(()=>{const v=new ResizeObserver(y);return v.observe(window.document.body),()=>{v.disconnect()}},[y,c]),f.useEffect(()=>{y()},[y]),l.jsxs(z,{className:"gap-md flex flex-col",children:[l.jsxs(awe,{title:e,subtitle:t,subtitleIcon:n,className:i,children:[o,s&&l.jsxs("div",{className:"-mr-sm flex items-center",children:[l.jsx(ke,{icon:uS,size:"small",onClick:p,disabled:!u,variant:u?void 0:"noHover"}),l.jsx(ke,{icon:Jr,size:"small",onClick:g,disabled:!m,variant:m?void 0:"noHover"})]})]}),s?l.jsx(swe,{innerRef:c,canScrollLeft:u,canScrollRight:m,fadeOut:a,children:r}):l.jsx("div",{ref:c,className:"gap-md px-md pb-md flex flex-col",children:r})]})});vM.displayName="CanonicalSection";const awe=A.memo(({children:e,title:t,subtitle:n,subtitleIcon:r,className:s})=>l.jsxs(z,{className:B("gap-md px-md py-sm flex items-center justify-between border-b",s),children:[l.jsxs(z,{className:"flex items-center justify-between",children:[t&&l.jsx(D,{variant:"baseSemi",children:t}),n&&l.jsxs(D,{variant:"smallCaps",color:"light",className:"gap-xs flex items-center",children:[r&&l.jsx(xt,{icon:r}),n]})]}),e]}));awe.displayName="SectionTitle";const yTt={tiny:"size-[16px]",small:"size-[24px]",medium:"size-[32px]",large:"xl:size-[64px] size-[50px]"},vTt={tiny:"p-[0.5px]",small:"p-[0.5px]",medium:"p-[0.5px]",large:"p-[0.5px]"},xTt={tiny:"border-[1px]",small:"border-[1px]",medium:"border-[2px]",large:"border-[4px]"},il=f.memo(({includeStripe:e=!0,includeShadow:t=!1,className:n,includeBackground:r=!1,size:s="large",logo:a,color:o,...i})=>{const c=f.useMemo(()=>{let u=yTt[s];return r&&(u+=` ${vTt[s]}`),u},[r,s]);return l.jsx("div",{className:B(c,{"shadow-subtle":t&&r,"border-subtlest rounded-full border bg-white dark:border-transparent":r},n),...i,children:l.jsx("div",{className:B("rounded-inherit relative flex size-full items-center justify-center",{[xTt[s]]:e&&r}),style:{borderColor:r?o:void 0},children:l.jsx("img",{src:a,alt:"",width:r?"70%":"100%",height:"auto"})})})});function wHt(e,t){return e=Math.abs(e/100),e.toLocaleString(t,{style:"percent",maximumFractionDigits:0})}const bTt=new Map([["one","st"],["two","nd"],["few","rd"],["other","th"]]),_Tt=new Intl.PluralRules("en-US",{type:"ordinal"});function owe(e){if(!e&&e!==0||isNaN(e))return"";const t=bTt.get(_Tt.select(e));return`${e}${t}`}function wTt(e,t){if(t!=="upcoming"||e<new Date)return!1;const n=new Date;return Math.abs(+e-+n)<1e3*60*60*24}function SHt(e){return new Date(e.toLocaleDateString(void 0,{timeZone:"UTC"}))}function iwe(e,t){const n=yme();return f.useMemo(()=>!n||!t?e:Qw(Bn(e),t==="dark").toString(),[e,t,n])}const CHt=(e,t,n,r)=>{if(!e||!t)return n;const s=new Date(e),a=new Date(t),o={month:"short",day:"numeric"};s.getFullYear()!==a.getFullYear()&&(o.year="numeric");const i=s.toLocaleDateString(r,o),c=a.toLocaleDateString(r,{...o,year:"numeric"});return s.toDateString()===a.toDateString()?c:s.getMonth()===a.getMonth()&&s.getFullYear()===a.getFullYear()?`${s.toLocaleDateString(r,{month:"short"})} ${s.getDate()}-${a.getDate()}, ${a.getFullYear()}`:`${i} - ${c}`},STt=[17,16];function EHt({event:e,brands:t,isLive:n}){const{$t:r}=X(),[s,a]=f.useState(!1),[o,i]=f.useState("all"),c=f.useMemo(()=>(e.matchEvents?e.matchEvents.liveData.event:[]).filter(d=>o==="all"?!0:STt.includes(d.typeId[0])).reduce((d,m)=>(d[m.periodId[1].toString()]=d[m.periodId[1].toString()]||[],d[m.periodId[1].toString()].push(m),d),{}),[e?.matchEvents,o]),u=f.useMemo(()=>[{text:r({defaultMessage:"All Plays",id:"lVQ27GyPmi"}),onClick:()=>i("all"),show:!0,active:o==="all"},{text:r({defaultMessage:"Key Plays",id:"CyNRXF54hv"}),onClick:()=>i("key"),show:!0,active:o==="key"}],[o,r]);return l.jsxs(l.Fragment,{children:[l.jsx(z,{variant:"raised",className:"rounded-xl border",children:l.jsx(vM,{title:r(n?{defaultMessage:"Play by Play",id:"g2y6uMg3RU"}:{defaultMessage:"Play Summary",id:"HtqDGZkC7q"}),trailing:l.jsx("div",{className:"-mb-sm",children:l.jsx(Zp,{actionList:u,layoutGroupId:"soccer-play-summary-tab-bar",layout:"right",size:"tiny"})}),children:l.jsx("div",{className:"-my-md",children:l.jsx(cwe,{plays:c,event:e,onViewAll:()=>a(!0),playsToRender:6,reverse:!0,brands:t,inModal:!1})})})}),s&&l.jsx(kTt,{plays:c,isOpen:s,onClose:()=>a(!1),event:e,brands:t,reverse:!0,setOpen:a})]})}const lwe=({isRed:e,className:t})=>l.jsx("svg",{width:"16",height:"19",viewBox:"0 0 16 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:B("shrink-0",t),children:l.jsx("rect",{x:"4.29248",y:"0.726685",width:"12",height:"15",rx:"2",transform:"rotate(14.6454 4.29248 0.726685)",fill:e?"#EB4E45":"#f6c825"})}),cwe=f.memo(({plays:e,onViewAll:t,playsToRender:n=1/0,reverse:r=!0,brands:s,inModal:a=!1})=>{const{$t:o}=X(),i=r?[...Object.keys(e)].reverse():Object.keys(e),c=f.useMemo(()=>{let u=n;return l.jsxs(z,{children:[i.map(d=>{let m=0;const h=e[d].length;return u<=0?null:(u<h?(m=u,u=0):(m=h,u-=h),l.jsx(CTt,{plays:e[d],playsToRender:m,period:d,reverse:r,brands:s},d))}),!a&&t&&l.jsx("div",{className:"-mx-sm py-sm flex items-center justify-center",children:l.jsx(ke,{variant:"super",chevron:!0,chevronIcon:Jr,text:o({defaultMessage:"View All",id:"wbcwKddwLa"}),fullWidth:!0,size:"small",onClick:t})})]})},[e,n,r,a,t,o,i,s]);return a?c:l.jsx(_c,{className:"relative isolate",mode:"popLayout",transition:{duration:.2,ease:Jn},children:l.jsx(tl,{children:c})})});function CTt({plays:e,playsToRender:t,period:n,reverse:r,brands:s}){const a=f.useMemo(()=>r?[...e].reverse():e,[e,r]),o=ms();return l.jsxs(z,{children:[t>0&&l.jsx(z,{variant:"offsetPlus",className:B("-mx-md px-md py-sm sticky top-0 z-10 flex items-center justify-between"),children:l.jsx(D,{variant:"smallCaps",color:"light",children:n})}),l.jsx(dc,{children:l.jsx(_e.div,{layout:!0,layoutRoot:!0,children:a.slice(0,t).map(i=>l.jsx(ETt,{play:i,brands:s,parentHasMounted:o},i.id))})})]})}const ETt=f.memo(({play:e,brands:t,parentHasMounted:n})=>{const{$t:r}=X(),s=f.useRef(!n),a=qh(e.contestantId,t,"soccer"),{colorScheme:o}=fs(),i=iwe(a.color,o).toString();return l.jsxs(_e.div,{className:"-mx-md border-subtlest p-md relative border-b",initial:s.current?void 0:{opacity:0},animate:s.current?void 0:{opacity:1},transition:{layout:{duration:.2,ease:Jn},opacity:{duration:.2,ease:$a}},layout:"position",children:[l.jsx("div",{className:"left-xs inset-y-xs absolute w-1 rounded-full opacity-50",style:{backgroundColor:i}}),!s.current&&l.jsx(_e.div,{className:"bg-super/15 absolute inset-0",initial:{opacity:1},animate:{opacity:0},transition:{duration:1,ease:$a,delay:.2}}),l.jsxs("div",{className:"gap-md relative flex items-center",children:[l.jsx(il,{logo:a.logo,color:a.color,size:"small",includeStripe:!1}),l.jsxs("div",{className:"gap-sm flex flex-1 flex-row items-center",children:[l.jsxs("div",{className:"gap-md flex items-baseline",children:[l.jsx(D,{variant:"tiny",color:"light",className:"whitespace-nowrap",children:e.periodId[1]==="PENALTIES"?`${r({defaultMessage:"PK",id:"mG6A02k2Ar"})} ${e.timeMin}`:`${e.timeMin}'`}),l.jsx(D,{variant:"small",children:e.commentary_text})]}),MTt(e)&&l.jsx(lwe,{isRed:TTt(e)==="red"})]})]})]})}),MTt=e=>e.typeId[0]===17,TTt=e=>{const t=e.commentary_text.toLowerCase();return t.includes("second yellow card")||t.includes("red card")?"red":t.includes("yellow card")?"yellow":null},kTt=({plays:e,isOpen:t,setOpen:n,event:r,brands:s,reverse:a})=>{const o=f.useRef(null),{isMobileStyle:i}=Ce();return l.jsx(rn,{modalContentClassname:"!py-0 mb-0 min-h-0",modalClassname:"[&_>div]:min-h-0",isOpen:t,onClose:()=>n(!1),variant:i?"bottom-sheet":"side-sheet",includeBlur:!1,children:l.jsxs("div",{className:"flex min-h-0 flex-1 flex-col",children:[l.jsx(D,{variant:"section-title",className:"py-sm -mt-sm -mx-md px-md border-subtlest shadow-subtle border-b",children:"Play by Play"}),l.jsx("div",{ref:o,className:"-mx-md px-md scrollbar-subtle flex min-h-0 flex-1 flex-col overflow-y-auto overflow-x-hidden",children:l.jsx(cwe,{plays:e,event:r,brands:s,inModal:!0,reverse:a})})]})})},NTt=({event:e})=>{const n=[...e.matchStats?.contestantStats.map(r=>{const s=r.goal_events.map(o=>({type:"goal",event:o})),a=r.red_card_events.map(o=>({type:"red_card",event:o}));return[...s,...a]})??[]].map(r=>r.sort((s,a)=>s.event[0]-a.event[0]));return!n||n.length===0?null:l.jsx("div",{className:"gap-md p-md grid grid-cols-2",children:n.map((r,s)=>l.jsx(ATt,{events:r,position:s===0?"left":"right"},s))})},ATt=({events:e,position:t})=>l.jsx("div",{className:B("gap-xs flex flex-col",{"items-start":t==="left","items-end":t==="right"}),children:e.map((n,r)=>l.jsx(PTt,{event:n,position:t},r))}),PTt=({event:e,position:t})=>l.jsxs("div",{className:"gap-xs flex items-center",children:[l.jsxs(D,{variant:"tiny",className:B("flex items-center gap-1",{"flex-row-reverse":t==="right"}),children:[l.jsx(RTt,{event:e})," ",e.event[1]]}),l.jsxs(D,{variant:"tiny",color:"light",children:[e.event[0],"'"]})]}),RTt=({event:e})=>e.type!=="goal"?l.jsx(lwe,{isRed:!0,className:"size-md inline-block"}):l.jsx("div",{className:"size-md inline-block",children:""}),uwe=A.memo(()=>l.jsx("div",{}));uwe.displayName="SportsWidgetErrorFallback";const Fee=new Set,ITt=e=>e.status==="live"||e.status==="upcoming";function jTt({widget:e}){const{isMobileStyle:t}=Ce(),{result:{backend_uuid:n,mode:r}}=wn(),s=rM();if(f.useEffect(()=>{!n||!e||!e?.events?.length||Fee.has(n)||(s("web.frontend.sports_widget_render_time",{widgetType:"sports",widgetSubType:e.object,league:e.league,queryMode:r}),Fee.add(n))},[n,e?.events?.length,r,e,s]),!e?.events?.length)return null;const a=e.canonical_pages?.[0]?.url_web,o=e.events.at(0),i=!t&&(o&&ITt(o)||e.events.length<5),c=e.league??"nba";return l.jsx(Zs,{fallback:uwe,children:l.jsx(di,{widgetType:"sports",widgetName:e.object,children:({widgetSelected:u})=>l.jsx(OTt,{canonicalPageLink:a,children:l.jsx(VTt,{events:e.events,showHero:i,widgetSelected:u,league:c})})})})}const OTt=({children:e,canonicalPageLink:t})=>{const{$t:n}=X();return l.jsxs(z,{variant:"raised",className:"shadow-subtle overflow-hidden rounded-xl border",children:[e,t?l.jsx(at,{href:t,children:l.jsxs(D,{variant:"smallBold",className:"p-sm border-subtlest flex items-center justify-center gap-0.5 border-t text-center duration-150 hover:opacity-75",color:"super",children:[n({defaultMessage:"View More",id:"QQSdHPJWXu"}),l.jsx(Jr,{size:18})]})}):null]})},dwe=({initialData:e,refetch:t=!1,reason:n})=>Ke({initialData:e,queryKey:["sports/events/widget",e.id],queryFn:async()=>{if(!e.refetch_url)return e;const r=await er({urlPath:e.refetch_url,timeoutMs:0,reason:n});if(!r.ok)throw ee.error("Failed to fetch sport event",{url:e.refetch_url,status:r.status,statusText:r.statusText}),new Error(`Failed to fetch sport event ${r.status} ${r.statusText}`);return await r.json()},refetchInterval:r=>r.state.data?.refetch_url?r.state.data?.refetch_interval_secs*1e3:!1,enabled:!!e.refetch_url&&t}),LTt=({event:e,onClick:t,eventCount:n,league:r})=>{const{data:s}=dwe({initialData:e,refetch:!0,reason:"sports-event-row"}),a=fwe(),o=r==="nba"&&T2e(s.title[0]),i=gwe(s.team_1,s.team_2),c=o?i:null,u=f.useMemo(()=>[{title:s.team_1.title,score:s.team_1.text,subscore:s.team_1.sub_text,image:s.team_1.img,emphasized:s.team_1.won,period:s.period_text},{title:s.team_2.title,score:s.team_2.text,subscore:s.team_2.sub_text,image:s.team_2.img,emphasized:s.team_2.won,period:s.period_text}],[s]);return l.jsx(pwe,{href:s.url?.url_web,onClick:()=>t(s.url?.url_web),children:l.jsx(HTt,{title:s.status==="live"?"LIVE":a(s.datetime,s.datetime_tba,s.datetime_end),isLive:s.status==="live",items:u,period:mwe(s.period_text,s.period_time,r)??null,eventCount:n,subtitle:c??void 0},s.id)})},DTt=({events:e,onClick:t,league:n})=>l.jsx("div",{className:B("bg-offset/25 dark:bg-offsetPlus/25 grid grid-cols-1 rounded-b-lg md:grid-cols-2",{"lg:grid-cols-3":e.length>2}),children:e.map(r=>l.jsx(LTt,{event:r,onClick:t,eventCount:e.length,league:n},r.id))}),FTt=e=>{const{locale:t}=X();return e?new Date(e).toLocaleTimeString(t,{hour:"numeric",minute:"numeric",timeZoneName:"short"}):""},UTt=e=>e.join("  "),fwe=({includeTime:e=!0}={})=>{const{$t:t}=X(),{locale:n}=X();return f.useCallback((r,s,a)=>{if(a){if(!r&&s)return t({defaultMessage:"TBA",id:"ZfAWFLTzx/"});if(!r)return"";const m=new Date(r),h=new Date(a),p=m.getFullYear();if(!(p===new Date().getFullYear())){const w=m.toLocaleDateString(n,{month:"short"}),S=h.toLocaleDateString(n,{month:"short"}),C=m.getDate(),E=h.getDate();return w===S?`${w} ${C}-${E}, ${p}`:`${w} ${C}-${S} ${E}, ${p}`}const y=m.toLocaleDateString(n,{month:"short"}),v=h.toLocaleDateString(n,{month:"short"}),x=m.getDate(),b=h.getDate();let _;if(y===v?_=`${y} ${x}-${b}`:_=`${y} ${x}-${v} ${b}`,e){const w=s?"TBA":m.toLocaleTimeString(n,{hour:"numeric",minute:"numeric",timeZoneName:"short"});return`${_}, ${w}`}return _}if(!r&&s)return t({defaultMessage:"TBA",id:"ZfAWFLTzx/"});if(!r)return"";const o=new Date(r),i=r&&s,c=o.toLocaleTimeString(n,{hour:"numeric",minute:"numeric",timeZoneName:"short"});if(R9(o))return e?`${t({defaultMessage:"Today",id:"zWgbGgjUUg"})}, ${c}`:t({defaultMessage:"Today",id:"zWgbGgjUUg"});if(DYe(o))return e?`${t({defaultMessage:"Yesterday",id:"6dIxDP1C8c"})}, ${c}`:t({defaultMessage:"Yesterday",id:"6dIxDP1C8c"});if(Rfe(o))return e?`${t({defaultMessage:"Tomorrow",id:"MtrTNyxuSU"})}, ${c}`:t({defaultMessage:"Tomorrow",id:"MtrTNyxuSU"});if(o.getFullYear()!==new Date().getFullYear())return new Date(o).toLocaleDateString(n,{month:"short",day:"numeric",year:"numeric"});const u=o.toLocaleDateString(n,{month:"short",day:"numeric"});if(!e)return u;const d=i?"TBA":o.toLocaleTimeString(n,{hour:"numeric",minute:"numeric",timeZoneName:"short"});return`${u}, ${d}`},[n,t,e])},mwe=(e,t,n)=>{if(n==="mlb")return BTt(e);if(!e||typeof t?.seconds!="number"&&typeof t?.minutes!="number")return e;const r=t?.seconds?.toString().padStart(2,"0")??"00",s=t?.minutes??0;return`${e} ${s}:${r}`},BTt=e=>e?.replace("Top","").replace("Bot",""),VTt=({events:e,showHero:t,widgetSelected:n,league:r})=>{const s=f.useMemo(()=>t?e.slice(1):e,[e,t]),{data:a}=dwe({initialData:e[0],refetch:t,reason:"sports-widget-dense"});return l.jsxs(z,{children:[t&&l.jsxs(pwe,{href:a?.url?.url_web,onClick:()=>{n(a?.url?.url_web)},children:[l.jsx($Tt,{event:a,includeBorder:s.length>0,league:r,statusExtra:a&&r==="mlb"&&a.status==="live"?l.jsx(dTt,{event:{event:a}}):null}),r==="championsleague"&&a&&l.jsx(NTt,{event:{event:a,brands:[],candlestickData:null,matchEvents:null,matchStats:a.extra?.match_stats??null,eventExtra:null}})]}),l.jsx(DTt,{events:s,onClick:n,league:r})]})},hwe=()=>l.jsx("span",{className:"text-quietest",children:""}),pwe=({children:e,href:t,onClick:n})=>t?l.jsx(at,{href:t,className:"group/link group",onClick:n,children:e}):l.jsx("div",{className:"group",onClick:n,children:e}),gwe=(e,t)=>{const{$t:n}=X(),r=e.subtitle?.split("-"),s=t.subtitle?.split("-"),a=r?+r[0]:null,o=s?+s[0]:null,i=4;if(a===null||o===null)return null;const c=a>o?e.abbreviation:t.abbreviation,u=a>o?a:o,d=a>o?o:a;return a>=i||o>=i?n({defaultMessage:"{leadingTeam} Wins {leadingScore}-{trailingScore}",id:"T1UC+k87MZ"},{leadingTeam:c,leadingScore:u,trailingScore:d}):a===o?n({defaultMessage:"Series Tied {team1Record}-{team2Record}",id:"Liahhq+hIg"},{team1Record:a,team2Record:o}):n({defaultMessage:"{leadingTeam} Leads {leadingScore}-{trailingScore}",id:"oO28OWtTlZ"},{leadingTeam:c,leadingScore:u,trailingScore:d})},$Tt=({event:e,includeBorder:t=!1,className:n,league:r,scoreExtra:s,statusExtra:a})=>{const{$t:o}=X(),i=e.team_1.title,c=e.team_2.title,u=e.team_1.text,d=e.team_1.sub_text,m=e.team_2.text,h=e.team_2.sub_text,p=r==="nba"&&T2e(e.title[0]),g=gwe(e.team_1,e.team_2),y=p?g:null,v=fwe({includeTime:!1}),x=FTt(e.datetime),b=e.datetime_tba?o({defaultMessage:"TBA",id:"ZfAWFLTzx/"}):x,_=UTt(e.title),w=yme(),{colorScheme:S}=fs(),C=mwe(e.period_text,e.period_time,r),E=e.team_1.won||e.team_2.won,M=f.useMemo(()=>{let T;return E?(e.team_1.won?T=e.team_1.color:T=e.team_2.color,w?Qw(T?Bn(T):null,S==="dark"):T):null},[e.team_1.won,e.team_1.color,e.team_2.color,S,E,w]);return l.jsxs(z,{className:B(n,"rounded-inherit relative",{"border-b":t}),children:[E&&l.jsx("div",{className:"rounded-inherit pointer-events-none absolute inset-0 overflow-hidden",style:{color:M?.toString(),maskImage:e.team_1.won?"linear-gradient(to left, transparent 60%, black)":"linear-gradient(to right, transparent 60%, black)"},children:l.jsx(uJe,{className:"-inset-xl rounded-inherit !absolute ![--dog-bg-highlight:currentColor]",dotClassName:"!text-[currentColor]",highlightClassName:"!bg-black/5 dark:!bg-white/5"})}),l.jsx("div",{className:"px-md gap-sm relative flex items-start justify-between pt-[12px]",children:l.jsxs(D,{variant:"tiny",color:"light",children:[_,y&&" "+y]})}),l.jsxs("div",{className:"p-md md:px-lg md:py-md gap-sm relative grid grid-cols-[1fr_auto_1fr] items-center justify-start md:justify-between md:gap-[12px]",children:[l.jsxs("div",{className:"gap-md flex flex-col-reverse items-center justify-start md:flex-row md:justify-start md:gap-[12px]",children:[l.jsx(Vee,{record:e.team_1.subtitle,name:i,logo:e.team_1.img}),l.jsx("div",{className:"md:mx-auto",children:l.jsx(Uee,{position:"leading",score:u,subscore:d,isWinner:e.team_1.won,hasWinner:E,scoreExtra:s,team:e.team_1,teamIdx:0,league:r})})]}),l.jsxs("div",{className:"gap-sm flex flex-col items-center",children:[l.jsx(WTt,{status:e.status,date:v(e.datetime,e.datetime_tba,e.datetime_end),time:b,isUpcoming:e.datetime?wTt(new Date(e.datetime),e.status):void 0,period:C??null}),a]}),l.jsxs("div",{className:"gap-md flex flex-col-reverse items-center justify-start md:flex-row-reverse md:gap-[12px]",children:[l.jsx(Vee,{record:e.team_2.subtitle,name:c,logo:e.team_2.img}),l.jsx("div",{className:"md:mx-auto",children:l.jsx(Uee,{score:m,subscore:h,position:"trailing",isWinner:e.team_2.won,hasWinner:E,scoreExtra:s,team:e.team_2,teamIdx:1,league:r})})]})]}),e.live_text&&l.jsx("div",{className:"bg-offset/50 dark:bg-offsetPlus/50 px-md relative py-[12px]",children:l.jsxs(D,{variant:"tiny",color:"light",className:"gap-sm line-clamp-1 flex items-start md:items-center",children:[l.jsx(RTe,{size:16,className:"opacity-80 md:-translate-y-px"}),e.live_text]})}),E&&l.jsx("div",{className:"rounded-inherit pointer-events-none absolute inset-0 opacity-20 mix-blend-multiply dark:opacity-60 dark:mix-blend-soft-light",style:{backgroundColor:M?.toString(),maskImage:e.team_1.won?"linear-gradient(to left, transparent 60%, black)":"linear-gradient(to right, transparent 60%, black)"}}),!t&&E&&l.jsx("div",{className:"pointer-events-none absolute -inset-px rounded-[12px] border opacity-40",style:{borderColor:M?.toString(),maskImage:e.team_1.won?"linear-gradient(to left, transparent 60%, black)":"linear-gradient(to right, transparent 60%, black)"}}),!t&&E&&l.jsx("div",{className:"pointer-events-none absolute -inset-px rounded-[13px] border opacity-20 dark:opacity-40",style:{borderColor:M?.toString(),maskImage:e.team_1.won?"linear-gradient(to left, transparent 60%, black)":"linear-gradient(to right, transparent 60%, black)"}})]})},Uee=({score:e,subscore:t,position:n,emptyPlaceholder:r=l.jsx(hwe,{}),isWinner:s,hasWinner:a,scoreExtra:o,team:i,teamIdx:c,league:u})=>{const{isMobileStyle:d}=Ce(),m=u==="ipl"||u==="cricket"||u==="icc"||u==="atp"||u==="wta";return l.jsxs("div",{className:B("md:gap-xs flex flex-col items-center justify-center",{"items-start":n==="leading","items-end":n==="trailing","opacity-50":a&&!s}),children:[l.jsxs(D,{variant:d?m?"section-title":"display":"section-title",className:"gap-xs md:gap-sm flex items-center sm:!text-2xl lg:!text-3xl",children:[s&&n==="trailing"&&l.jsx(Bee,{className:"size-3 rotate-180 md:size-4"}),l.jsxs("span",{className:"font-mono",children:[o&&l.jsx("span",{className:"mr-xs",children:o(i,c)}),e??r]}),s&&n==="leading"&&l.jsx(Bee,{className:"size-2.5 md:size-4"})]}),t&&l.jsx(D,{variant:"tiny",color:"light",children:l.jsx("span",{className:"font-mono",children:t})})]})},Bee=({className:e})=>l.jsx("svg",{width:"6",viewBox:"0 0 18 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e,children:l.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18 0.322327L0.822266 17.5L18 34.6777V0.322327Z",className:"fill-foreground"})}),Vee=({name:e,logo:t,record:n})=>e?l.jsxs("div",{className:"gap-sm flex flex-col items-center justify-between md:gap-0",children:[t&&l.jsx(il,{logo:t,color:"#000000"}),l.jsx(D,{variant:"baseSemi",children:e}),n&&l.jsx(D,{variant:"tiny",color:"light",children:l.jsx("span",{className:"font-mono",children:n})})]}):null,WTt=({status:e,date:t,time:n,isUpcoming:r,variant:s="stacked",period:a})=>{const o=e==="live",i=e==="final",{isMobileStyle:c}=Ce();return l.jsx("div",{className:B("gap-sm flex",{"flex-row items-center":s==="row","flex-col items-center justify-center":s==="stacked"}),children:o?l.jsxs("div",{className:"gap-sm flex flex-col items-center",children:[l.jsx(sM,{size:c?"small":"default",includeDot:!0}),a&&l.jsx(D,{variant:"tiny",color:"light",children:a})]}):l.jsxs("div",{className:B("gap-xs flex",{"flex-col":s==="stacked","flex-row items-center":s==="row"}),children:[r&&l.jsx(gTt,{textCenter:!0,className:"mb-1 hidden md:block"}),i&&l.jsx(XF,{textCenter:!0,className:"-mt-0.5 md:mb-1 md:mt-0 md:block"}),l.jsx(D,{variant:"tiny",color:"light",className:"w-full whitespace-nowrap text-center",children:t}),n&&!i&&l.jsx(D,{variant:"tiny",color:"light",className:"w-full whitespace-nowrap text-center",children:n})]})})},HTt=({items:e,title:t,subtitle:n,isLive:r,period:s,eventCount:a})=>{const o=e.some(d=>d.emphasized),{isMobileStyle:i}=Ce(),{isLargeScreen:c,isMediumScreen:u}=mD();return l.jsx(z,{variant:"raised",className:B("px-md h-full py-[12px]",{"border-b border-r-0 group-last:border-b-0 group-even:border-r-0":i,"border-b group-odd:border-r":u&&!c,"group-[&:nth-child(2n):nth-last-child(-n+3)~a]:border-b-0":u&&!c&&a>2,"border-b border-r group-[&:nth-child(3n)]:border-r-0":c,"group-[&:nth-child(3n):nth-last-child(-n+4)~a]:border-b-0":c&&a>3,"!border-b-0":c&&a<=3||u&&!c&&a<=2}),children:l.jsxs("div",{className:"gap-sm flex size-full flex-col items-start justify-between duration-150 group-hover/link:opacity-75",children:[r?l.jsxs("div",{className:"gap-sm flex items-center",children:[l.jsx(sM,{size:"small",className:"-ml-1"}),s&&l.jsx(D,{variant:"tiny",color:"super",children:s})]}):t?l.jsx(D,{variant:"tinyRegular",color:"light",children:t}):null,l.jsx("div",{className:"w-full",children:e.map((d,m)=>l.jsx(zTt,{item:d,anyEmphasized:o},d.title+m))}),n&&l.jsx(D,{variant:"tinyRegular",color:"light",children:n})]})})},zTt=({item:e,anyEmphasized:t})=>{const n=f.useMemo(()=>e.score?e.subscore?`${e.score} ${e.subscore}`:e.score:l.jsx(hwe,{}),[e.score,e.subscore]);return l.jsxs(z,{className:"flex w-full items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[e.image&&l.jsx("img",{src:e.image,alt:e.title,className:"size-[24px]"}),l.jsx(D,{variant:e.emphasized?"smallBold":"small",color:t&&!e.emphasized?"light":"default",children:e.title})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[e.emphasized&&l.jsx(ITe,{size:14,className:"text-super translate-y-[-0.5px]"}),l.jsx(D,{variant:e.emphasized?"smallBold":"small",color:t&&!e.emphasized?"light":"default",children:n})]})]})},ywe=A.memo(()=>l.jsx("div",{children:"Error loading individual event widget."}));ywe.displayName="IndvEventsWidgetErrorFallback";const $ee=new Set,GTt=({children:e,canonicalPageLink:t})=>{const{$t:n}=X();return l.jsxs(z,{variant:"raised",className:"shadow-subtle overflow-hidden rounded-xl border",children:[e,t?l.jsx(at,{href:t,children:l.jsxs(D,{variant:"smallBold",className:"p-sm border-subtlest flex items-center justify-center gap-0.5 border-t text-center duration-150 hover:opacity-75",color:"super",children:[n({defaultMessage:"View More",id:"QQSdHPJWXu"}),l.jsx(Jr,{size:18})]})}):null]})},qTt=(e,t)=>{if(!e)return"";try{return new Date(e).toLocaleDateString(t,{month:"short",day:"numeric"})}catch{return""}},KTt=(e,t)=>{if(!e)return"";try{return new Date(e).toLocaleTimeString(t,{hour:"numeric",minute:"2-digit",hour12:!0}).replace(/^0+/,"")}catch{return""}},vwe=({competitor:e})=>l.jsxs(z,{className:"gap-sm border-subtlest px-md py-sm flex items-center border-b last:border-b-0",children:[l.jsx(D,{className:"w-4 text-center",children:e.rank}),l.jsxs("div",{className:"gap-sm flex grow items-center",children:[e.primary_img_url?l.jsx(il,{logo:e.primary_img_url,color:"transparent",size:"small",className:"shrink-0"}):l.jsx(z,{className:"flex h-5 w-8 shrink-0 items-center justify-center rounded-sm bg-[#44403c] text-xs",children:e.abbreviation}),l.jsxs("div",{className:"flex grow flex-col",children:[l.jsx(D,{variant:"smallBold",children:e.title}),l.jsxs(D,{variant:"tiny",color:"light",children:[e.metadata[0]," "]})]})]}),l.jsxs(z,{className:"flex flex-col items-end text-right",children:[l.jsx(D,{variant:"smallBold",children:e.metadata[1]}),l.jsx(D,{variant:"tiny",color:"light",children:e.metadata[2]})]})]},e.id),YTt=({event:e,league:t})=>{const{locale:n}=X(),r=e.subtitle,{$t:s}=X(),a=KTt(e.datetime,n),o=e.datetime?_L(new Date(e.datetime))?s({defaultMessage:"Today",id:"zWgbGgjUUg"}):Rfe(new Date(e.datetime))?s({defaultMessage:"Tomorrow",id:"MtrTNyxuSU"}):new Date(e.datetime).toLocaleDateString(n,{weekday:"short",month:"short",day:"numeric"}):"";return l.jsxs(z,{className:"flex flex-col",children:[l.jsxs(z,{className:"p-md border-subtler flex items-end justify-between border-b",children:[l.jsxs(z,{className:"flex flex-col",children:[l.jsx(D,{variant:"baseSemi",children:e.title.join(" ")}),l.jsxs(D,{variant:"small",color:"light",children:[t.toUpperCase(),r&&`${r}`]})]}),l.jsxs("div",{className:"flex flex-col items-end",children:[l.jsx(D,{variant:"small",children:o}),l.jsx(D,{variant:"small",color:"light",children:a})]})]}),e.image_url&&l.jsx(z,{className:"aspect-video w-full overflow-hidden rounded-lg bg-[#292524]",children:l.jsx(es,{src:e.image_url,alt:`${e.title.join(" ")} circuit map`,className:"size-full object-contain"})}),l.jsx(z,{className:"gap-xs p-md flex flex-col",children:e.metadata?.map((i,c)=>l.jsxs(z,{className:"flex justify-between",children:[l.jsx(D,{className:"text-sm",color:"light",children:i[0]}),l.jsx(D,{className:"text-sm",children:i[1]})]},c))})]})},QTt=({event:e,league:t})=>{const{locale:n}=X(),r=qTt(e.datetime,n),s=e.competitors.slice(0,3),a=e.subtitle;return l.jsxs(z,{className:"flex flex-col",children:[l.jsxs(z,{className:"border-subtler px-md py-sm gap-md flex items-center justify-between border-b",children:[l.jsxs("div",{children:[l.jsx(D,{variant:"baseSemi",className:"flex justify-between",children:l.jsx("span",{children:e.title.join(" ")})}),l.jsxs(D,{variant:"small",color:"light",children:[t.toUpperCase(),a&&`${a}`]})]}),l.jsxs("div",{className:"gap-sm flex items-center",children:[l.jsx(D,{variant:"small",color:"light",children:r}),l.jsx(XF,{})]})]}),l.jsx(z,{className:"flex flex-col",children:s.map(o=>l.jsx(vwe,{competitor:o},o.id))})]})},XTt=({event:e,league:t})=>{const n=e.competitors.slice(0,3),r=e.subtitle;return l.jsxs(z,{className:"flex flex-col",children:[l.jsxs(z,{className:"border-subtler px-md py-sm gap-md flex items-center justify-between border-b",children:[l.jsxs("div",{children:[l.jsx(D,{variant:"baseSemi",className:"flex justify-between",children:l.jsx("span",{children:e.title.join(" ")})}),l.jsx("div",{children:l.jsxs(D,{variant:"small",color:"light",children:[t.toUpperCase(),r&&`${r}`]})})]}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(sM,{includeDot:!0}),e.period_text&&l.jsx(D,{color:"light",variant:"small",children:e.period_text})]})]}),l.jsx(z,{className:"flex flex-col",children:n.map(s=>l.jsx(vwe,{competitor:s},s.id))})]})},ZTt=({event:e,league:t})=>{switch(e.status){case"upcoming":return l.jsx(YTt,{event:e,league:t});case"live":return l.jsx(XTt,{event:e,league:t});case"final":return l.jsx(QTt,{event:e,league:t});default:return null}};function JTt({widgetData:e}){const{result:{backend_uuid:t,mode:n}}=wn(),r=rM(),s=f.useMemo(()=>e?.event,[e]),a=f.useMemo(()=>e?.league,[e]);if(f.useEffect(()=>{!t||!e||!s||$ee.has(t)||(r("web.frontend.sports_widget_render_time",{widgetType:"sports",widgetSubType:e.object,league:e.league,queryMode:n}),$ee.add(t))},[t,s,n,e,r]),!e||!s)return null;const o=e.canonical_page?.url_web,i=`indv-event-${s.id??"unknown"}`;return l.jsx(Zs,{fallback:ywe,children:l.jsx(di,{widgetType:"sports",widgetName:i,children:({})=>l.jsx(GTt,{canonicalPageLink:o,children:l.jsx(ZTt,{event:s,league:a})})})})}const xwe=A.memo(()=>l.jsx("div",{children:"Error loading individual schedule widget."}));xwe.displayName="IndvScheduleWidgetErrorFallback";const Wee=new Set,ekt=({children:e,canonicalPageLink:t})=>{const{$t:n}=X();return l.jsxs(z,{variant:"raised",className:"shadow-subtle overflow-hidden rounded-xl border",children:[e,t?l.jsx(at,{href:t,children:l.jsxs(D,{variant:"smallBold",className:"p-sm border-subtlest flex items-center justify-center gap-0.5 border-t text-center duration-150 hover:opacity-75",color:"super",children:[n({defaultMessage:"View More",id:"QQSdHPJWXu"}),l.jsx(Jr,{size:18})]})}):null]})},tkt=(e,t,n)=>{if(!e)return t.replace(/^(0)(\d:[0-5]\d\s+[AP]M)$/,"$2");try{return new Date(e).toLocaleTimeString(n,{hour:"numeric",minute:"2-digit",hour12:!0,timeZoneName:"short"}).replace(/^0+/,"")}catch{return t.replace(/^(0)(\d:[0-5]\d\s+[AP]M)$/,"$2")}},ON=({event:e,isFinal:t,isLive:n})=>{const{locale:r}=X(),s=e.metadata?.[0],a=e.metadata?.[1]??"",o=tkt(e.datetime,a,r),{isMobileStyle:i}=Ce(),c=!!e.url?.url_web,u=l.jsxs(l.Fragment,{children:[l.jsxs(z,{className:"p-md col-span-3 grid grid-cols-subgrid items-center md:col-span-4",children:[l.jsx(z,{className:"flex flex-col items-start",children:l.jsx(rkt,{date:e.datetime??""})}),l.jsxs(z,{className:"gap-xs flex flex-col md:gap-0",children:[l.jsx(D,{variant:"baseSemi",className:"text-base leading-snug",children:e.title.join(" ")}),s&&l.jsxs(D,{variant:i?"tiny":"small",className:"mt-0 pt-0",color:"light",children:[!t&&!n&&l.jsxs(l.Fragment,{children:[o,"  "]}),s]})]}),l.jsx("div",{className:"hidden md:block",children:e.live_text&&l.jsx(D,{variant:"small",className:"text-right",children:e.live_text})}),l.jsx("div",{children:t?l.jsx(XF,{}):n?l.jsx(sM,{includeDot:!0}):null})]}),l.jsx("div",{className:"p-md -mt-sm col-span-2 col-start-2 pl-0 pt-0 md:hidden",children:e.live_text&&l.jsx(D,{variant:"tiny",className:"border-subtlest p-xs px-sm rounded border",color:"light",children:e.live_text})})]}),d="col-span-3 grid grid-cols-subgrid border-b border-subtlest last:border-b-0 md:col-span-4";return c?l.jsx(at,{href:e.url?.url_web??"",className:B(d,"hover:bg-offset/25 duration-150"),children:u}):l.jsx(z,{className:d,children:u})};function nkt({widgetData:e}){const{result:{backend_uuid:t,mode:n}}=wn(),r=rM(),s=f.useMemo(()=>e?.events??[],[e]);if(f.useEffect(()=>{!t||!e||!s?.length||Wee.has(t)||(r("web.frontend.sports_widget_render_time",{widgetType:"sports",widgetSubType:e.object,league:e.league,queryMode:n}),Wee.add(t))},[t,e,s,n,r]),!e||!s||s.length===0)return null;const a=e.canonical_page?.url_web,o=`indv-schedule-${e.league??"unknown"}`;return l.jsx(Zs,{fallback:xwe,children:l.jsx(di,{widgetType:"sports",widgetName:o,children:({})=>l.jsx(ekt,{canonicalPageLink:a,children:l.jsx(z,{className:"gap-x-md grid grid-cols-[min-content,1fr,min-content] md:grid-cols-[min-content,1fr,1fr,min-content]",children:s.map(i=>{switch(i.status){case"upcoming":return l.jsx(ON,{event:i},i.id);case"live":return l.jsx(ON,{event:i,isLive:!0},i.id);case"final":return l.jsx(ON,{event:i,isFinal:!0},i.id);default:return null}})})})})})}const rkt=({date:e})=>{const{locale:t}=X(),n=new Date(e).toLocaleDateString(t,{day:"numeric"}),r=new Date(e).toLocaleDateString(t,{month:"short"}),{isMobileStyle:s}=Ce();return l.jsxs("div",{className:"dark:bg-offsetPlus bg-offset py-xs flex w-full flex-col items-center justify-center rounded-lg px-0.5 md:p-[6px]",children:[l.jsx(D,{className:"px-sm -mb-0.5 rounded-full text-center",variant:"tinyRegular",color:"light",children:r}),l.jsx(D,{className:"px-sm -mb-1 text-center",variant:s?"baseSemi":"section-title",children:n})]})},skt=({result:e})=>{let t="",n=null;return e==="W"?(t="bg-[#059669] text-white",n=Ea):e==="D"?(t="bg-[#64748b] text-white",n=u8):e==="L"&&(t="bg-[#e11d48] text-white",n=Xt),l.jsx("div",{className:B("flex h-4 w-4 items-center justify-center rounded-full",t),children:n&&l.jsx(n,{size:12,strokeWidth:2.5})})},bwe=({form:e})=>{const t=String(e).replace(/\s/g,"");return l.jsx("div",{className:"flex gap-0.5",children:t.split("").map((n,r)=>l.jsx(skt,{result:n},r))})};bwe.displayName="FormDisplay";const akt={form:e=>{const t=e.display_value??e.value??"";return l.jsx(bwe,{form:String(t)})}},_we=(e="left")=>{switch(e){case"center":return"text-center";case"right":return"text-right";case"left":default:return"text-left"}},okt=(e=!1)=>e?"w-full":"w-0",LN=(e="normal",t)=>{if(t==="pos")return"smallCaps";switch(e){case"bold":return"smallBold";case"normal":default:return"small"}},ikt=(e="")=>e==="pos"?"light":"default",lkt=({cell:e,column:t,columnRenderers:n=akt})=>{const{inApp:r}=ep();if(!e)return l.jsx("td",{className:"md:px-md p-sm"});let s;const a=t.column_type??"text",o=e.display_value??e.value??"-";t.column_id&&n[t.column_id]?s=n[t.column_id](e,t):(a==="entity"||a==="image")&&e.image_url?s=l.jsxs("div",{className:"md:gap-md gap-sm flex items-center",children:[l.jsx(il,{logo:e.image_url,color:"transparent",size:"small",className:"shrink-0"}),l.jsxs("div",{children:[l.jsx(D,{variant:LN(t.font_weight??"normal",t.column_id),children:o}),a==="entity"&&e.sub_text&&l.jsx(D,{variant:"tiny",color:"light",children:e.sub_text})]})]}):a==="entity"&&!e.image_url?s=l.jsxs("div",{children:[l.jsx(D,{variant:LN(t.font_weight??"normal",t.column_id),children:o}),e.sub_text&&l.jsx(D,{variant:"tiny",color:"light",children:e.sub_text})]}):s=l.jsx(D,{variant:LN(t.font_weight??"normal",t.column_id),color:ikt(t.column_id),children:o});const i=B("md:pl-md pl-sm last:px-sm md:last:px-md py-sm align-middle",_we(t.alignment),okt(t.should_fill_width));return e.canonical_page?l.jsx("td",{className:i,children:l.jsx(yE,{href:r?e.canonical_page.url_app:e.canonical_page.url_web,className:"block",children:s})}):l.jsx("td",{className:i,children:s})},ckt=({row:e,columns:t,columnRenderers:n})=>{const r=new Map(e.cells.map(s=>[s.column_id,s]));return l.jsx("tr",{className:B("border-subtlest border-b last:border-b-0"),children:t.map(s=>l.jsx(lkt,{cell:r.get(s.column_id),column:s,columnRenderers:n},s.column_id))})},ukt=({table:e,variant:t="offset",title:n,className:r,noWrapTitle:s=!1,onGroupClick:a,columnRenderers:o})=>{const[i,c]=f.useState(e?.groups?.[0]?.group_id??""),[u,d]=f.useState(!1),{isMobileStyle:m}=Ce(),{$t:h}=X();if(DC("standings"),!e||!e.groups?.length)return null;const p=n??e.title??"Standings",g=e.groups.find(b=>b.group_id===i),y=e.groups.length>1;if(!g)return null;const v=u?g.rows:g.rows.slice(0,10),x=e.groups.map(b=>({type:"default",text:b.title??b.group_id,onClick:()=>{c(b.group_id),a?.(b.group_id)},active:i===b.group_id,show:!0}));return l.jsx(tr,{className:r,header:l.jsxs("div",{className:"md:pl-md gap-md pl-sm mb-sm flex items-center justify-between md:mb-0",children:[l.jsx(D,{variant:"baseSemi",className:s?"flex-shrink-0":void 0,children:p}),y?m?l.jsx(en,{items:x,isMobileStyle:!1,size:Ft.regular,children:l.jsx(ye,{text:g.title??g.group_id,chevron:!0,size:"small"})}):l.jsx(Zp,{size:m?"tiny":"small",actionList:x,layoutGroupId:`standings-${e.table_id}-tabs`,layout:"left",allowScroll:!0,styleProps:{wrapperClass:"min-w-0 self-stretch",scrollInnerClass:"!h-10",scrollClass:"h-full"}}):l.jsx("div",{className:"invisible min-h-10"})]}),children:l.jsxs("div",{className:"rounded-inherit",children:[l.jsx("div",{className:"rounded-t-inherit overflow-hidden",children:l.jsx(ec,{orientation:"horizontal",children:l.jsxs("table",{className:B("w-full table-auto border-collapse"),children:[l.jsx(z,{as:"thead",variant:t==="raised"?"raisedOffset":"offsetPlus",children:l.jsx("tr",{children:g.columns.map(b=>l.jsx("th",{className:B("md:pl-md pl-sm last:px-sm md:last:px-md py-xs whitespace-nowrap align-middle",_we(b.alignment)),children:l.jsx(pTt,{className:B({"w-[200px] md:w-auto":b.should_fill_width}),children:b.header_label})},b.column_id))})}),l.jsx("tbody",{children:v.map(b=>l.jsx(ckt,{row:b,columns:g.columns,columnRenderers:o},b.row_id))})]})})}),g.rows.length>10&&l.jsx(z,{className:"p-xs border-t",children:l.jsx(ke,{text:h(u?{id:"UOYN/MXiOT",defaultMessage:"View Less"}:{id:"wbcwKddwLa",defaultMessage:"View All"}),size:"small",fullWidth:!0,onClick:()=>d(b=>!b)})})]},g.group_id)})},wwe=A.memo(()=>l.jsx("div",{children:"Error loading standings widget."}));wwe.displayName="StandingsWidgetErrorFallback";const dkt=new Set,fkt=({children:e,canonicalPageLink:t})=>{const{$t:n}=X();return l.jsxs(z,{variant:"raised",className:"shadow-subtle overflow-hidden rounded-xl border",children:[e,t?l.jsx(at,{href:t,children:l.jsxs(D,{variant:"smallBold",className:"p-sm border-subtlest flex items-center justify-center gap-0.5 border-t text-center duration-150 hover:opacity-75",color:"super",children:[n({defaultMessage:"View More",id:"QQSdHPJWXu"}),l.jsx(Jr,{size:18})]})}):null]})};function mkt({widgetData:e}){const{result:{backend_uuid:t,mode:n}}=wn(),r=rM(),s=f.useMemo(()=>e?.standings_table?e.standings_table:null,[e]);if(f.useEffect(()=>{!t||!e||!s||dkt.has(t)||r("web.frontend.sports_widget_render_time",{widgetType:"sports",widgetSubType:e.object,league:e.league,queryMode:n})},[t,s,n,e,r]),!e||!s)return null;const a=e.canonical_pages?.[0]?.url_web,o=`standings-${s.table_id??"unknown"}`;return l.jsx(Zs,{fallback:wwe,children:l.jsx(di,{widgetType:"sports",widgetName:o,children:({})=>l.jsx(fkt,{canonicalPageLink:a,children:l.jsx(ukt,{table:s,variant:"raised",className:"!rounded-none border-0"})})})})}const gy=A.memo(({data:e})=>Kr(e).with({object:"SportsEventsWidget"},t=>l.jsx(jTt,{widget:t})).with({object:"SportsStandingsWidget"},t=>l.jsx(mkt,{widgetData:t})).with({object:"SportsIndvScheduleWidget"},t=>l.jsx(nkt,{widgetData:t})).with({object:"SportsIndvEventsWidget"},t=>l.jsx(JTt,{widgetData:t})).exhaustive());gy.displayName="SportsWidget";function hkt({csvString:e,filename:t="perplexity.csv"}){if(typeof window>"u")throw new Error("Attempting to download a CSV file in a server context.");try{const n=new Blob([e],{type:"text/csv;charset=utf-8;"}),r=window.URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s)}catch(n){throw n}}function pkt(){return f.useCallback(e=>{hkt(e)},[])}var DN,xM="HoverCard",[Swe,MHt]=Ga(xM,[op]),bM=op(),[gkt,_M]=Swe(xM),Cwe=e=>{const{__scopeHoverCard:t,children:n,open:r,defaultOpen:s,onOpenChange:a,openDelay:o=700,closeDelay:i=300}=e,c=bM(t),u=f.useRef(0),d=f.useRef(0),m=f.useRef(!1),h=f.useRef(!1),[p,g]=ti({prop:r,defaultProp:s??!1,onChange:a,caller:xM}),y=f.useCallback(()=>{clearTimeout(d.current),u.current=window.setTimeout(()=>g(!0),o)},[o,g]),v=f.useCallback(()=>{clearTimeout(u.current),!m.current&&!h.current&&(d.current=window.setTimeout(()=>g(!1),i))},[i,g]),x=f.useCallback(()=>g(!1),[g]);return f.useEffect(()=>()=>{clearTimeout(u.current),clearTimeout(d.current)},[]),l.jsx(gkt,{scope:t,open:p,onOpenChange:g,onOpen:y,onClose:v,onDismiss:x,hasSelectionRef:m,isPointerDownOnContentRef:h,children:l.jsx(iO,{...c,children:n})})};Cwe.displayName=xM;var Ewe="HoverCardTrigger",Mwe=f.forwardRef((e,t)=>{const{__scopeHoverCard:n,...r}=e,s=_M(Ewe,n),a=bM(n);return l.jsx(AS,{asChild:!0,...a,children:l.jsx(on.a,{"data-state":s.open?"open":"closed",...r,ref:t,onPointerEnter:jt(e.onPointerEnter,Zw(s.onOpen)),onPointerLeave:jt(e.onPointerLeave,Zw(s.onClose)),onFocus:jt(e.onFocus,s.onOpen),onBlur:jt(e.onBlur,s.onClose),onTouchStart:jt(e.onTouchStart,o=>o.preventDefault())})})});Mwe.displayName=Ewe;var ZF="HoverCardPortal",[ykt,vkt]=Swe(ZF,{forceMount:void 0}),Twe=e=>{const{__scopeHoverCard:t,forceMount:n,children:r,container:s}=e,a=_M(ZF,t);return l.jsx(ykt,{scope:t,forceMount:n,children:l.jsx(Rs,{present:n||a.open,children:l.jsx(B0,{asChild:!0,container:s,children:r})})})};Twe.displayName=ZF;var Xw="HoverCardContent",kwe=f.forwardRef((e,t)=>{const n=vkt(Xw,e.__scopeHoverCard),{forceMount:r=n.forceMount,...s}=e,a=_M(Xw,e.__scopeHoverCard);return l.jsx(Rs,{present:r||a.open,children:l.jsx(xkt,{"data-state":a.open?"open":"closed",...s,onPointerEnter:jt(e.onPointerEnter,Zw(a.onOpen)),onPointerLeave:jt(e.onPointerLeave,Zw(a.onClose)),ref:t})})});kwe.displayName=Xw;var xkt=f.forwardRef((e,t)=>{const{__scopeHoverCard:n,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:o,...i}=e,c=_M(Xw,n),u=bM(n),d=f.useRef(null),m=kn(t,d),[h,p]=f.useState(!1);return f.useEffect(()=>{if(h){const g=document.body;return DN=g.style.userSelect||g.style.webkitUserSelect,g.style.userSelect="none",g.style.webkitUserSelect="none",()=>{g.style.userSelect=DN,g.style.webkitUserSelect=DN}}},[h]),f.useEffect(()=>{if(d.current){const g=()=>{p(!1),c.isPointerDownOnContentRef.current=!1,setTimeout(()=>{document.getSelection()?.toString()!==""&&(c.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",g),()=>{document.removeEventListener("pointerup",g),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!1}}},[c.isPointerDownOnContentRef,c.hasSelectionRef]),f.useEffect(()=>{d.current&&wkt(d.current).forEach(y=>y.setAttribute("tabindex","-1"))}),l.jsx(F0,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:o,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:jt(a,g=>{g.preventDefault()}),onDismiss:c.onDismiss,children:l.jsx(lO,{...u,...i,onPointerDown:jt(i.onPointerDown,g=>{g.currentTarget.contains(g.target)&&p(!0),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!0}),ref:m,style:{...i.style,userSelect:h?"text":void 0,WebkitUserSelect:h?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})})}),bkt="HoverCardArrow",_kt=f.forwardRef((e,t)=>{const{__scopeHoverCard:n,...r}=e,s=bM(n);return l.jsx(cO,{...s,...r,ref:t})});_kt.displayName=bkt;function Zw(e){return t=>t.pointerType==="touch"?void 0:e()}function wkt(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;n.nextNode();)t.push(n.currentNode);return t}var Nwe=Cwe,Awe=Mwe,Pwe=Twe,Rwe=kwe;const FN="text-foreground text-left hover:text-super focus:text-super mb-xs transition-color line-clamp-2 cursor-pointer font-sans text-sm font-medium duration-150",Iwe=A.memo(({hideHoverCard:e=!1,children:t,contentProps:n,linkProps:r,result:s,webResultCitation:a,timestampComponent:o,trackEvent:i,getAttachmentUrl:c})=>{const u=s?.is_conversation_history??!1,d=s?.is_memory??!1,m=u||d,[h,p]=f.useState(!1),[g,y]=f.useState(null),v=s.is_attachment??!1,x=co(s.url),b=f.useCallback(async()=>{if(!c)return;const H=await c(s.url);x&&(y(H),p(!0),T(!1),I.current=!1)},[c,s.url,x]),_=NC(s),w=Nfe(s),S=w||m&&!_?null:s.meta_data?.generated_file_title??s.name,C=a?.cited_texts??[],E=s.meta_data?.generated_file_description??s.snippet,[M,T]=f.useState(!1),I=f.useRef(!1),[j,N]=f.useState(!1),P=!!(s.url&&Cp(s.url)),R=D0(),k=s.meta_data?.authors,O=typeof s.meta_data?.wiley_book_uuid=="string",L=typeof s.meta_data?.domain_name=="string"?s.meta_data?.domain_name:void 0,F=f.useMemo(()=>C9(s),[s]);f.useEffect(()=>{if(typeof window>"u")return;function H(){I.current=!1}return document.addEventListener("visibilitychange",H),()=>{window.removeEventListener("visibilitychange",H)}},[]);const U=s.url||_,V=f.useCallback(()=>p(!1),[]),W=f.useMemo(()=>({src:g??void 0}),[g]);return l.jsxs(Nwe,{onOpenChange:H=>{!H&&I.current||T(e?!1:H)},open:M,openDelay:200,closeDelay:200,children:[P&&s.url&&l.jsx(Z0,{isOpen:j,name:S,setisOpen:N,url:s.url}),x&&g&&l.jsx(X0,{isOpen:h,onClose:V,imgProps:W}),l.jsx(Awe,{asChild:!0,"aria-label":S,onPointerEnter:()=>{I.current=!0},onClick:()=>{T(!1),I.current=!1},onPointerLeave:()=>{I.current=!1},children:t}),l.jsx(Pwe,{children:l.jsx(Rwe,{className:B({"data-open:animate-in data-open:zoom-in-[0.97] data-open:fade-in data-closed:animate-out data-closed:zoom-out-[0.97] data-closed:fade-out data-[side=bottom]:origin-top data-[side=top]:origin-bottom":!R}),side:"bottom",sideOffset:8,...n,children:l.jsxs("div",{className:"bg-base dark:border-subtler px-md w-80 rounded-xl border py-3 shadow-lg",children:[m&&!_?l.jsx(A9,{variant:"medium",searchType:d?"memory":"conversation-history"}):l.jsxs("div",{className:"gap-sm flex flex-col",children:[(U||o)&&l.jsxs("div",{className:"flex items-center justify-between",children:[U&&l.jsx(xu,{className:"text-right",variant:"tiny",color:"light",url:s.url,isAttachment:v,source:L,connectionType:s.meta_data?.connection_type}),o]}),P?l.jsx("button",{className:FN,onClick:()=>{N(!0)},children:S}):v?l.jsx("button",{className:FN,onClick:b,children:S}):F?l.jsx(N9,{className:FN,result:s,trackEvent:i,...r,children:S}):l.jsx("span",{className:"text-foreground mb-xs line-clamp-2 text-left font-sans text-sm",children:S})]}),k?l.jsx(D,{color:"light",variant:"small",className:"line-clamp-3",children:k.join(", ")}):null,w?l.jsx(D,{variant:"small",color:"light",children:l.jsx(he,{defaultMessage:"This is a private source.",id:"jKReyt0qq8",description:"Text shown when a source is private and obfuscated"})}):null,S!==s.name&&!d&&!w?l.jsx(D,{variant:"small",color:"light",children:s.name}):null,C.length>0?l.jsx("ul",{children:C.map((H,G)=>l.jsx("li",{className:"border-b last:border-b-0",children:l.jsx(D,{variant:"small",className:"line-clamp-[20] italic",children:H})},G))}):E&&l.jsx(D,{variant:"small",className:"line-clamp-4 whitespace-pre-wrap",children:E}),O?l.jsxs(z,{className:"gap-xs pt-sm mt-sm flex items-center border-t",children:[l.jsx(D,{variant:"tiny",color:"super",children:l.jsx(be,{size:"sm",icon:cre})}),l.jsx(D,{variant:"tiny",color:"super",children:l.jsx(he,{defaultMessage:"Premium Source",id:"K/sjkPqxv7",description:"title"})})]}):null,_&&!w?l.jsxs(z,{className:"gap-xs pt-sm mt-sm flex items-center border-t",children:[l.jsx(D,{variant:"tiny",color:"super",children:l.jsx(be,{size:"sm",icon:ure})}),l.jsx(D,{variant:"tiny",color:"super",children:l.jsx(he,{defaultMessage:"Personal Search",id:"7+aLCEyqS2",description:"title"})})]}):null]})})})]})});var UN,Hee;function Skt(){if(Hee)return UN;Hee=1;var e=typeof Element<"u",t=typeof Map=="function",n=typeof Set=="function",r=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function s(a,o){if(a===o)return!0;if(a&&o&&typeof a=="object"&&typeof o=="object"){if(a.constructor!==o.constructor)return!1;var i,c,u;if(Array.isArray(a)){if(i=a.length,i!=o.length)return!1;for(c=i;c--!==0;)if(!s(a[c],o[c]))return!1;return!0}var d;if(t&&a instanceof Map&&o instanceof Map){if(a.size!==o.size)return!1;for(d=a.entries();!(c=d.next()).done;)if(!o.has(c.value[0]))return!1;for(d=a.entries();!(c=d.next()).done;)if(!s(c.value[1],o.get(c.value[0])))return!1;return!0}if(n&&a instanceof Set&&o instanceof Set){if(a.size!==o.size)return!1;for(d=a.entries();!(c=d.next()).done;)if(!o.has(c.value[0]))return!1;return!0}if(r&&ArrayBuffer.isView(a)&&ArrayBuffer.isView(o)){if(i=a.length,i!=o.length)return!1;for(c=i;c--!==0;)if(a[c]!==o[c])return!1;return!0}if(a.constructor===RegExp)return a.source===o.source&&a.flags===o.flags;if(a.valueOf!==Object.prototype.valueOf&&typeof a.valueOf=="function"&&typeof o.valueOf=="function")return a.valueOf()===o.valueOf();if(a.toString!==Object.prototype.toString&&typeof a.toString=="function"&&typeof o.toString=="function")return a.toString()===o.toString();if(u=Object.keys(a),i=u.length,i!==Object.keys(o).length)return!1;for(c=i;c--!==0;)if(!Object.prototype.hasOwnProperty.call(o,u[c]))return!1;if(e&&a instanceof Element)return!1;for(c=i;c--!==0;)if(!((u[c]==="_owner"||u[c]==="__v"||u[c]==="__o")&&a.$$typeof)&&!s(a[u[c]],o[u[c]]))return!1;return!0}return a!==a&&o!==o}return UN=function(o,i){try{return s(o,i)}catch(c){if((c.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw c}},UN}var Ckt=Skt();const Ekt=Ha(Ckt),iu=A.memo(({variant:e=yO.subtle,label:t,accessory:n,onClick:r,className:s,size:a="default",textColor:o="default",icon:i,iconClassName:c,iconOnly:u=!1,tooltip:d,truncate:m=!1,hover:h=!0})=>{const p=l.jsxs(z,{as:"span",variant:e,className:B("text-3xs rounded-badge min-w-[1rem] cursor-pointer text-center align-middle font-mono tabular-nums",{"py-[0.1875rem] leading-snug":a==="default","py-[0.175rem] leading-none":a==="small","py-[0.125rem] leading-none":a==="extraSmall"},{"px-[0.3rem]":!u,"inline-block px-[0.1875rem]":u,"[@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white":h}),onClick:r,children:[i&&l.jsx(be,{icon:i,size:"2xs",className:B("-mt-px inline-block align-middle opacity-80",{"mr-xs":!u},c)}),l.jsx("span",{ref:g=>{if(g&&m){const y=g.scrollWidth>g.clientWidth;g.style.maskImage=y?"linear-gradient(to right, black 70%, transparent 100%)":""}},className:B("relative -mt-px inline-block align-middle",{"max-w-[25ch] overflow-hidden":m}),children:t}),!!n&&l.jsx("span",{className:"ml-xs -mt-px mr-px inline-block align-middle",children:n})]});return l.jsx(D,{as:"span",color:o,className:B("relative -mt-px select-none whitespace-nowrap",{"-top-px":a==="default","-top-[3px] leading-none":a==="small","-top-two leading-none":a==="extraSmall"},s),children:d?l.jsx(bn,{tooltipText:d,tooltipLayout:"top",asChild:!0,children:p}):p})});iu.displayName="CitationBubble";const jwe=A.memo(({domain:e,url:t,suffix:n,overflowCount:r,includeLink:s=!0,className:a,trackEvent:o,onClickLink:i,...c})=>{if(!t&&!e)return null;const u=e||ffe(t).replace(/^[a-z]{1,2}\./i,""),d=n?`${u}.${n}`:u,m=r&&r>0?l.jsxs("span",{className:"opacity-50",children:["+",r]}):void 0,h=l.jsx(iu,{label:d,accessory:m,truncate:!0,...c});return s&&t?o?l.jsx("span",{className:a,children:l.jsx(k9,{href:t,trackEvent:o,onClickLink:i,className:"citation inline",children:h})}):l.jsx("span",{className:a,children:l.jsx(at,{href:t,target:"_blank",rel:"noopener",className:"citation inline",children:h})}):l.jsx("span",{className:a,children:h})});jwe.displayName="CitationDomainBubble";const JF=A.memo(e=>l.jsx(iu,{...e}));JF.displayName="CitationNumberBubble";const Owe=A.memo(function({href:t,overflowCount:n,getAttachmentUrl:r,onCitationClick:s,...a}){const[o,i]=f.useState(!1),[c,u]=f.useState(null),d=f.useCallback(async g=>{if(s?.(g),g?.defaultPrevented||!t||!r)return;const y=await r(t);co(t)&&(u(y),i(!0))},[s,r,t]),m=n&&n>0?l.jsxs("span",{className:"opacity-50",children:["+",n]}):void 0,h=f.useCallback(()=>i(!1),[]),p=f.useMemo(()=>({src:c??void 0}),[c]);return l.jsxs(l.Fragment,{children:[l.jsx(iu,{accessory:m,icon:t8,className:"cursor-pointer",truncate:!0,onClick:d,...a}),c&&l.jsx(X0,{isOpen:o,onClose:h,imgProps:p})]})});Owe.displayName="FileCitationBubble";const Lwe=A.memo(({children:e,webResults:t,citationGroup:n,contentProps:r,hideHoverCard:s=!1,trackEvent:a,getAttachmentUrl:o,openMemorySearchHistoryModal:i,onCitationClick:c})=>{const[u,d]=f.useState(!1),[m,h]=f.useState(!1),[p,g]=f.useState(null),[y,v]=f.useState(!1),[x,b]=f.useState(null),_=D0(),w=X(),{isMobileStyle:S}=Ce(),C=f.useCallback(()=>v(!1),[]),E=f.useMemo(()=>({src:x??void 0}),[x]),M=f.useMemo(()=>t.every(N=>N.is_conversation_history),[t]),T=f.useCallback(()=>{if(M)return w.formatMessage({defaultMessage:"Library",id:"StcK672jB9"});switch(n.category){case"memory":return w.formatMessage({defaultMessage:"Memory",id:"dVx3yznM2C"});case"attachment":return w.formatMessage({defaultMessage:"Attachments",id:"Vlx13nOMtX"});case"youtube":return w.formatMessage({defaultMessage:"YouTube",id:"zuA3BgDC6u"});default:return w.formatMessage({defaultMessage:"Sources",id:"fhwTpAcBLC"})}},[n.category,M,w]),I=f.useCallback(N=>async P=>{if(P.preventDefault(),N.is_conversation_history||N.is_memory)if(c){c(N,P);return}else if(i){i(N);return}else{console.warn("Memory/conversation history modal handler not provided");return}if(N.url?Cp(N.url):null){g(N),h(!0),d(!1);return}const k=N.is_attachment||!1,O=co(N.url);if(k&&O&&o){const L=await o(N.url);b(L),v(!0),d(!1);return}if(k&&TC(N)&&o){const L=await o(N.url);window.open(L,"_blank");return}a&&N.url&&a("click citation",{source:"grouped_hovercard",citation_url:N.url}),C9(N)&&window.open(N.url,"_blank")},[c,i,a,o]),j=f.useCallback(N=>{const P=N.is_memory?l.jsx(be,{icon:Gl,size:"sm"}):N.is_conversation_history?l.jsx(be,{icon:pf,size:"sm"}):l.jsx(xu.Icon,{url:N.url,isAttachment:N.is_attachment||!1,connectionType:N.meta_data?.connection_type}),R=N.meta_data?.connection_type,k=R==="WILEY"?"Wiley":R||N.is_memory||N.is_conversation_history?N.name:void 0,O=N.is_memory?N.snippet:N.name;return l.jsxs("div",{className:"hover:bg-offset relative flex min-w-0 cursor-pointer select-none items-start gap-3 rounded-lg px-2 py-1.5 align-top",children:[l.jsx("span",{className:"mt-two shrink-0",children:P}),l.jsxs("span",{className:B("flex min-w-0 select-none",{"gap-two flex-col items-start":N.is_memory,"gap-xs items-center":!N.is_memory}),children:[O&&l.jsx(D,{className:B("min-w-0 shrink",{"truncate text-ellipsis":!N.is_memory},{"line-clamp-2":N.is_memory}),variant:"small",as:"span",children:O}),!M&&l.jsx(D,{variant:"tinyMono",color:"light",className:"shrink-0",children:l.jsx(xu.Source,{url:N.url,source:k,isAttachment:N.is_attachment||!1,connectionType:N.meta_data?.connection_type,isMemory:N.is_memory||!1,isConversationHistory:N.is_conversation_history||!1})})]})]})},[M]);return l.jsxs(l.Fragment,{children:[p&&p.url&&l.jsx(Z0,{isOpen:m,name:p.name,setisOpen:h,url:p.url}),x&&l.jsx(X0,{isOpen:y,onClose:C,imgProps:E}),l.jsxs(Nwe,{onOpenChange:N=>{d(s?!1:N)},open:u,openDelay:0,closeDelay:S?0:200,children:[l.jsx(Awe,{asChild:!0,onPointerDown:N=>{(S||N.pointerType==="touch")&&d(!0)},children:e}),l.jsx(Pwe,{children:l.jsx(Rwe,{className:B({"data-open:animate-in data-open:zoom-in-[0.97] data-open:fade-in data-closed:animate-out data-closed:zoom-out-[0.97] data-closed:fade-out data-[side=bottom]:origin-top data-[side=top]:origin-bottom":!_}),side:"bottom",sideOffset:8,collisionPadding:S?8:10,align:S?"center":"start",...r,children:l.jsxs("div",{className:B("bg-base dark:border-subtler rounded-xl border pt-3 shadow-lg",{"w-96":!S,"w-[calc(100vw-16px)]":S}),children:[l.jsxs("div",{className:"gap-two flex px-5 pb-2 pt-1",children:[l.jsx(D,{variant:"tinyMono",children:T()}),l.jsx(D,{variant:"tinyMono",as:"span",color:"light",className:"mx-two",children:""}),l.jsx(D,{variant:"tinyMono",color:"light",children:n.totalCount||t.length})]}),l.jsx("div",{className:"max-h-60 overflow-y-auto px-3 pb-3 [scrollbar-gutter:stable]",children:l.jsx("div",{className:"space-y-px",children:t.map((N,P)=>l.jsx(at,{className:"block",href:N.url||"#",target:"_blank",rel:"noopener nofollow",onClick:I(N),children:j(N)},N.url||P))})})]})})})]})]})});Lwe.displayName="GroupedCitationHoverCard";const Dwe=A.memo(({ytID:e,timestamp:t,overflowCount:n,...r})=>{const[s,a]=f.useState(!1),o=f.useCallback(()=>a(!0),[]),i=n&&n>0?l.jsxs("span",{className:"opacity-50",children:["+",n]}):void 0;return l.jsxs(l.Fragment,{children:[l.jsx(iu,{label:"youtube",accessory:i,icon:Vre,onClick:o,className:"cursor-pointer",...r}),e&&l.jsx(Z0,{url:`https://www.youtube.com/watch?v=${e}`,name:"",isOpen:s,setisOpen:a,timestamp:t})]})});Dwe.displayName="YoutubeCitationBubble";var ma;(function(e){e.YOUTUBE="youtube",e.FILE="file",e.MEMORY="memory",e.CONVERSATION_HISTORY="conversation_history",e.WEB="web",e.NUMBERED="numbered"})(ma||(ma={}));function Mkt(e){if(e){if(e.is_memory)return Gl;if(e.is_conversation_history)return pf}}function Tkt(e){const{ytID:t,isMobileStyle:n,isFile:r,isMemory:s,isConversationHistory:a,enableCitationGrouping:o}=e;return t&&!n?ma.YOUTUBE:r?ma.FILE:o?s?ma.MEMORY:a?ma.CONVERSATION_HISTORY:ma.WEB:ma.NUMBERED}function kkt(e){const t=e.indexOf("&t=");return t!==-1?e.substring(t+3):void 0}function Nkt({count:e}){return!e||e<=0?null:l.jsxs("span",{className:"pl-two opacity-50",children:["+",e]})}const Fwe=A.memo(A.forwardRef((e,t)=>{const{str:n,href:r,className:s,trackEvent:a,isFile:o,isDownloadable:i,citationSize:c,onCitationClick:u,getAttachmentUrl:d,isMemory:m,isConversationHistory:h,citationGroup:p,enableCitationGrouping:g,citationDomain:y,fileName:v,webResult:x,...b}=e,{isMobileStyle:_}=Ce(),w=CC.test(n),S=f.useCallback(()=>{a?.("click citation",{source:"inline",citation_url:r})},[r,a]),C=f.useMemo(()=>{const k=p?.overflowCount;return!k||k<=0?null:l.jsx(Nkt,{count:k})},[p?.overflowCount]);if(!w)return l.jsx("span",{children:n});const E=kkt(r),M=Cp(r),T=n.replace(/\[|\]|,.*$/g,""),j=!!(r&&!m&&!h&&(!(M||i)||_)),N=Tkt({ytID:M,isMobileStyle:_,isFile:o,isMemory:m,isConversationHistory:h,enableCitationGrouping:g});let P;switch(N){case ma.YOUTUBE:P=M&&l.jsx(Dwe,{...!g&&{label:T},ytID:M,overflowCount:p?.overflowCount??0,timestamp:E,size:c});break;case ma.FILE:P=l.jsx(Owe,{label:g?v??T:T,overflowCount:p?.overflowCount??0,size:c,href:r,getAttachmentUrl:i?d:void 0,onCitationClick:u});break;case ma.NUMBERED:{const k=Mkt(x);P=k?l.jsx(iu,{label:T,icon:k,size:c,onClick:u}):l.jsx(JF,{label:T,size:c,onClick:u});break}case ma.MEMORY:P=l.jsx(iu,{label:x?.name.toLocaleLowerCase(),icon:Gl,accessory:C,size:c,truncate:!0,onClick:u});break;case ma.CONVERSATION_HISTORY:P=l.jsx(iu,{label:"library",icon:pf,accessory:C,size:c,truncate:!1,onClick:u});break;case ma.WEB:default:{const k=p&&p.citations.length>1,O=_&&g&&k;P=l.jsx(jwe,{domain:y,url:r,overflowCount:p?.overflowCount??0,size:c,includeLink:j&&!O,trackEvent:O?void 0:a,onClickLink:O?void 0:S,className:B(s,"ml-xs inline")})}}const R=_&&g&&p&&p.citations.length>1;return j&&!R?l.jsx(k9,{href:r,ref:t,className:B(s,"citation ml-xs inline"),trackEvent:a,onClickLink:S,...b,children:P}):l.jsx("span",{className:B(s,"citation ml-xs inline"),ref:t,...b,children:P})})),Akt=A.forwardRef(function(t,n){const{anchor:r,className:s,...a}=t,o=u=>{const d=document.getElementById(u);d&&d.scrollIntoView({behavior:"smooth"})},i=r.replace(/\[|\]/g,""),c=f.useCallback(()=>o(`#search${r}`),[r]);return l.jsx(at,{href:`#search${r}`,onClick:c,className:s,ref:n,...a,children:l.jsx(JF,{label:i})})}),THt=e=>{const{hideHoverCard:t=!1,trackEvent:n,citationSize:r,onCitationClick:s,getAttachmentUrl:a,enableCitationGrouping:o=!1,webResults:i=[]}=e;return A.memo(A.forwardRef((u,d)=>{const{className:m,href:h,title:p,children:g,target:y="_blank",node:v,...x}=u,b=v?.data?.webResult,_=b?.is_attachment??!1,w=v?.data?.webResultCitation,S=b?.is_memory??!1,C=b?.is_conversation_history??!1,{$t:E}=X(),M=o&&v?.data?v.data.citationGroup:void 0,{isMobileStyle:T}=Ce(),I=f.useCallback(k=>{if(M&&M.citations.length>1&&T){k?.preventDefault();return}if(o&&M&&M.citations.length>0&&(b?.is_memory||b?.is_conversation_history)){const L=M.citations[0],F=i?.[L-1];F&&s&&s(F,k)}else b&&s&&s(b,k)},[b,M,T]),j=f.useMemo(()=>({side:"bottom"}),[]),N=f.useMemo(()=>b?{onClick(k){n&&n("click citation",{source:"inline hoverCard",citation_url:b.url}),I(k)}}:void 0,[b,I]),P=f.useMemo(()=>({color:"light"}),[]);let R;switch(p){case"_citation":{if(M?.isHidden)return null;R=l.jsx(Fwe,{isMemory:S,isConversationHistory:C,onCitationClick:I,className:m,str:A.Children.toArray(g).join(""),href:h,rel:"nofollow noopener",trackEvent:n,isFile:_,isDownloadable:b?TC(b):!1,citationSize:r,getAttachmentUrl:a,citationGroup:M,enableCitationGrouping:o,citationDomain:b?.meta_data?.citation_domain_name,fileName:b?.name,webResult:b,ref:d});break}case"_anchor_citation":{R=l.jsx(Akt,{anchor:A.Children.toArray(g).join(""),className:m,ref:d,...x});break}default:R=l.jsx(at,{href:h,target:y,title:p,rel:"nofollow noopener",className:B(m,"break-word hover:text-super hover:decoration-super underline decoration-from-font underline-offset-1 transition-all duration-300"),ref:d,...x,children:g})}if(b){if(o&&M&&M.citations.length>1){const O=M.citations.map(L=>i[L-1]).filter(L=>L!==void 0);return l.jsx(Lwe,{webResults:O,citationGroup:M,hideHoverCard:t,trackEvent:n,getAttachmentUrl:a,onCitationClick:s,contentProps:j,children:R})}return l.jsx(Iwe,{hideHoverCard:t,contentProps:j,linkProps:N,result:b,trackEvent:n,timestampComponent:jfe.isRecentlyTrending(b)?l.jsx(Ife,{recentlyUpdatedLabel:E({defaultMessage:"Just now",description:"Label for recently updated content",id:"FlgDFQFpF1"}),timestamp:b.meta_data?.published_date,timestampProps:P,children:"Updated"}):null,webResultCitation:w,getAttachmentUrl:a,children:R})}return R}),Ekt)};var BN={},zee;function Pkt(){return zee||(zee=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="fas",n="check",r=448,s=512,a=[10003,10004],o="f00c",i="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faCheck=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(BN)),BN}var Rkt=Pkt(),VN={},Gee;function Ikt(){return Gee||(Gee=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="fas",n="xmark",r=384,s=512,a=[128473,10005,10006,10060,215,"close","multiply","remove","times"],o="f00d",i="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faXmark=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(VN)),VN}var jkt=Ikt();const Uwe=A.memo(({status:e})=>l.jsx(D,{as:"span",variant:"smallBold",color:e?"super":"light",children:l.jsx(xt,{icon:e?Rkt.faCheck:jkt.faXmark})}));Uwe.displayName="BoolCell";const Bwe=A.memo(({url:e})=>l.jsx(at,{href:e,target:"_blank",rel:"noopener",className:"top-xs relative inline-block transition-opacity duration-300 hover:opacity-50",children:l.jsx(xu,{color:"light",variant:"tiny",url:e,isAttachment:!1})}));Bwe.displayName="LinkCell";var $N={},qee;function Okt(){return qee||(qee=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="arrows-up-down",r=320,s=512,a=["arrows-v"],o="f07d",i="M177 7c-9.4-9.4-24.6-9.4-33.9 0L47 103c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l55-55 0 348.1L81 375c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l96 96c9.4 9.4 24.6 9.4 33.9 0l96-96c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-55 55 0-348.1 55 55c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9L177 7z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faArrowsUpDown=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}($N)),$N}var Lkt=Okt();function Dkt(e,t){return e==null?1:t==null?-1:e==null&&t==null?0:!isNaN(Number(e))&&!isNaN(Number(t))?Number(e)-Number(t):String(e).localeCompare(String(t))}const Fkt=({children:e,...t})=>l.jsx("table",{...t,children:e}),Ukt=({children:e,...t})=>l.jsx("tr",{...t,children:e}),Bkt=({children:e,index:t,id:n,data:r,...s})=>l.jsx("td",{...s,children:l.jsx(D,{variant:"tiny",className:B({"font-normal":t}),children:e})}),Vkt=({SortButton:e,children:t})=>l.jsx("th",{className:"py-sm pr-sm text-left align-text-top outline-none",children:l.jsxs(z,{className:B("group relative flex items-center justify-between"),children:[l.jsx(D,{variant:"tiny",color:"light",children:t}),e]})}),Vwe=A.memo(function({name:t,setSortDescriptor:n}){return l.jsx("button",{className:"right-sm absolute opacity-0 transition-opacity duration-200 group-hover:opacity-100",onClick:()=>{n(r=>({...r,column:t,reverse:!r.reverse}))},children:l.jsx(D,{variant:"tiny",color:"super",children:l.jsx(xt,{icon:Lkt.faArrowsUpDown})})})});Vwe.displayName="SortButton";const $kt=A.memo(({collapsed:e,setCollapsed:t,viewMoreText:n,viewLessText:r})=>{const s=f.useCallback(()=>{t(a=>!a)},[t]);return l.jsx(z,{className:"pb-sm",children:l.jsx(ye,{pill:!0,variant:"border",size:"tiny",chevron:!0,chevronIcon:e?Zr:gS,text:e?n:r,onClick:s})})});$kt.displayName="ResponsiveTableExpander";const Kee="focus-visible:outline-super focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-0",$we=A.memo(function(t){const{data:n,columns:r,compareFunction:s,RowCell:a,HeaderCell:o,Row:i,Table:c,limit:u}=t,[d,m]=f.useState({column:void 0,reverse:!1}),h=n.at(0),p=f.useMemo(()=>r??Object.keys(h??{}).map(w=>({name:w})),[h,r]),g=s??Dkt,y=f.useMemo(()=>{const w=n.map(S=>({data:S,key:S.key??Math.random().toString(36).substring(7)}));return d.column&&w.sort((S,C)=>g(S.data[d.column],C.data[d.column])*(d.reverse?-1:1)),w.slice(0,u||w.length)},[n,u,d,g]),v=o??Vkt,x=c??Fkt,b=i??Ukt,_=a??Bkt;return l.jsx("div",{className:"overflow-x-auto",children:l.jsxs(x,{className:"w-full border-collapse",children:[l.jsx("thead",{children:l.jsx(b,{id:"_header",children:p.map((w,S)=>l.jsx(Wkt,{index:S,HeaderCell:v,setSortDescriptor:m,...w},w.name))})}),l.jsx("tbody",{children:y.map(w=>l.jsx(b,{id:w.key,className:B("group",Kee,"border-subtlest group border-t border-dashed !outline-none first:border-solid"),children:p.map(({name:S},C)=>l.jsx(_,{id:S,index:C,data:w.data,className:B("pr-sm align-text-top last:pr-0",Kee,'group-data-[selected="true"]:first:border-l-super py-sm group-data-[selected="true"]:border-super group-data-[selected="true"]:bg-super/10 group-data-[selected="true"]:first:pl-xs group-data-[selected="true"]:last:pr-xs dark:group-data-[selected="true"]:bg-super/10 rounded-sm outline-none transition-all duration-300 ease-in-out group-data-[selected="true"]:first:border-l-2 group-data-[selected="true"]:last:border-r-2'),children:String(w.data[S])},S))},w.key))})]})})});$we.displayName="ResponsiveTable";const Wkt=A.memo(({index:e,HeaderCell:t,setSortDescriptor:n,...r})=>{const s=f.useMemo(()=>l.jsx(Vwe,{name:r.name,setSortDescriptor:n}),[r.name,n]);return l.jsx(t,{index:e,id:r.name,data:r,SortButton:s,children:r.label??r.name},r.name)}),F_=A.memo(({text:e})=>l.jsx(D,{as:"span",variant:"tiny",className:"text-pretty break-words font-normal",children:e}));F_.displayName="TextCell";const Wwe=function(e){if(e==null)return qkt;if(typeof e=="function")return wM(e);if(typeof e=="object")return Array.isArray(e)?Hkt(e):zkt(e);if(typeof e=="string")return Gkt(e);throw new Error("Expected function, string, or object as test")};function Hkt(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Wwe(e[n]);return wM(r);function r(...s){let a=-1;for(;++a<t.length;)if(t[a].apply(this,s))return!0;return!1}}function zkt(e){const t=e;return wM(n);function n(r){const s=r;let a;for(a in e)if(s[a]!==t[a])return!1;return!0}}function Gkt(e){return wM(t);function t(n){return n&&n.type===e}}function wM(e){return t;function t(n,r,s){return!!(Kkt(n)&&e.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function qkt(){return!0}function Kkt(e){return e!==null&&typeof e=="object"&&"type"in e}const Hwe=[],Ykt=!0,Yee=!1,Qkt="skip";function Xkt(e,t,n,r){let s;typeof t=="function"&&typeof n!="function"?(r=n,n=t):s=t;const a=Wwe(s),o=r?-1:1;i(e,void 0,[])();function i(c,u,d){const m=c&&typeof c=="object"?c:{};if(typeof m.type=="string"){const p=typeof m.tagName=="string"?m.tagName:typeof m.name=="string"?m.name:void 0;Object.defineProperty(h,"name",{value:"node ("+(c.type+(p?"<"+p+">":""))+")"})}return h;function h(){let p=Hwe,g,y,v;if((!t||a(c,u,d[d.length-1]||void 0))&&(p=Zkt(n(c,d)),p[0]===Yee))return p;if("children"in c&&c.children){const x=c;if(x.children&&p[0]!==Qkt)for(y=(r?x.children.length:-1)+o,v=d.concat(x);y>-1&&y<x.children.length;){const b=x.children[y];if(g=i(b,y,v)(),g[0]===Yee)return g;y=typeof g[1]=="number"?g[1]:y+o}}return p}}}function Zkt(e){return Array.isArray(e)?e:typeof e=="number"?[Ykt,e]:e==null?Hwe:[e]}function Qf(e,t,n,r){let s,a,o;typeof t=="function"&&typeof n!="function"?(a=void 0,o=t,s=n):(a=t,o=n,s=r),Xkt(e,a,i,s);function i(c,u){const d=u[u.length-1],m=d?d.children.indexOf(c):void 0;return o(c,m,d)}}class Qee{static stringArrayToCSV(t){return t.map(this.escapeCSVString).join(",")}static escapeCSVString(t){return`"${t.replace(/"/g,'""')}"`}static tableCellToText(t){const n=[];let r="";return Qf(t,[{type:"text"},{tagName:"br"},{tagName:"a"}],s=>{if(s.type==="element"&&s.tagName==="br"){n.push(`
`);return}s.type==="element"&&s.tagName==="a"&&s.properties?.href&&(r=String(s.properties.href)),s.type==="text"&&n.push(s.value.trim())}),r||n.join("")}static tableToCSV(t){if(t.tagName!=="table")throw new Error("Attempting to convert node of wrong tagName to CSV from 'table'");try{const n=[];let r="";return Qf(t,{tagName:"thead"},s=>{const a=[];Qf(s,{tagName:"th"},o=>{const i=this.tableCellToText(o);a.push(i)}),n.push(this.stringArrayToCSV(a)),r+=a.join("-").replace(/[^a-z0-9\\-]/gi,"")}),Qf(t,{tagName:"tbody"},s=>{Qf(s,{tagName:"tr"},a=>{const o=[];Qf(a,{tagName:"td"},i=>{const c=this.tableCellToText(i);o.push(c)}),n.push(this.stringArrayToCSV(o))})}),{csvString:n.join(`
`),filename:r}}catch(n){throw new Error(`Error attempting to convert table node to CSV string: ${n}`)}}}const zwe=A.memo(({tableData:e,citationOffset:t})=>{const{$t:n}=X(),{trackEvent:r}=Te(),{data:s,column_metadata:a,search_results:o}=e,i=f.useMemo(()=>a.reduce((g,{name:y,display_name:v})=>(g[y]=v,g),{}),[a]),c=f.useMemo(()=>a.reduce((g,{name:y,display_format:v})=>(g[y]=v,g),{}),[a]),u=f.useCallback((g,y)=>g.value===null&&y.value===null?0:g.value===null?-1:y.value===null?1:typeof g.value=="string"?String(g.value).localeCompare(String(y.value)):Number(g.value)-Number(y.value),[]),d=f.useCallback(({data:g,id:y,...v})=>{const x=c[y],b=g[y].citation_index??null,_=b!==null?o[b]:null,w=_?.is_attachment??!1,S=g[y].value;let C=l.jsx(F_,{text:String(S)});return x==="url"&&(C=l.jsx(Bwe,{url:String(S)})),x==="boolean"&&(C=l.jsx(Uwe,{status:!!S})),x==="long_text"&&(C=l.jsx(F_,{text:String(S)})),x==="date"&&(C=l.jsx(F_,{text:String(S)})),S===null?l.jsx("td",{...v,children:l.jsx(D,{variant:"tiny",color:"ultraLight",children:l.jsx(be,{icon:u8,size:"xs"})})}):l.jsxs("td",{...v,children:[l.jsx("span",{children:C}),x!=="url"&&_&&_.url&&b!==null&&l.jsx(Iwe,{result:_,children:l.jsx(Fwe,{str:`[${b+t+1}]`,href:_.url,isFile:w,isDownloadable:TC(_),className:B("citation ml-xs inline")})})]})},[o,c,t]),m=f.useMemo(()=>a.map(({name:g})=>({name:g,label:i[g],sortable:!0,resizable:!0})),[a,i]),h=pkt(),p=f.useCallback(()=>{const g=a.reduce((b,_)=>(b.push(_.name),b),[]).join("-"),y=a.map(({display_name:b})=>Qee.escapeCSVString(b)).join(","),v=s.map(b=>a.map(({name:_})=>Qee.escapeCSVString(String(b[_].value))).join(",")),x=[y,...v].join(`
`);return r("clicked download table as csv",{source:"widget"}),h({csvString:x,filename:g})},[a,s,h,r]);return l.jsx(di,{widgetType:"table",widgetName:"table",widgetSize:"full",children:l.jsxs(z,{variant:"offset",className:"px-md pb-xs rounded-lg",children:[l.jsx($we,{data:s,columns:m,RowCell:d,compareFunction:u}),l.jsx(z,{className:"border-subtlest py-sm flex justify-end border-t",children:l.jsx(ke,{icon:gf,variant:"super",onClick:p,pill:!0,size:"tiny",text:n({defaultMessage:"Export CSV",id:"TE51b7zSWC"}),toolTip:n({defaultMessage:"Download Table as CSV",id:"X3dYB0f+/Q"})})})]})})});zwe.displayName="TableWidget";const Mf=(e,t)=>{const{value:n,loading:r}=Ut({flag:"tasks-automations-rename",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},Gwe=A.memo(({onEdit:e})=>{const t=X(),n=At(),[r,s]=f.useState(!1),{isMobileStyle:a}=Ce(),{variation:o,loading:i}=Mf(!1),c=f.useMemo(()=>[{type:"default",text:t.formatMessage({defaultMessage:"Edit",id:"wEQDC6Wv3/"}),onClick:e,testId:"task-widget-edit"},{type:"default",text:o?t.formatMessage({defaultMessage:"View Automations",id:"ykWUMgOBHX"}):t.formatMessage({defaultMessage:"View Tasks",id:"L3nFsHqlqm"}),rightElement:l.jsx("div",{className:"flex items-center",children:l.jsx(Jr,{size:16})}),onClick:()=>{n.push("/account/tasks")},testId:"task-widget-view-tasks"}],[t,e,o,n]),u=f.useCallback(()=>s(!1),[]),d=f.useCallback(()=>s(!0),[]);return i?null:l.jsx(en,{placement:"bottom-start",items:c,onOpen:d,onClose:u,isMobileStyle:a,children:l.jsx(ke,{size:"tiny",icon:ire,extraCSS:B("",{"!text-foreground !bg-offsetPlus":r})})})});Gwe.displayName="TaskWidgetMenu";const Ti=`
`;function qwe({baseInstructions:e,additionalInstructions:t}){let n=e+Ti;return t&&(n+=t),n}function Xee({prompt:e,baseInstructions:t}){if(!e||!t)return"";const n=t+Ti;return e.startsWith(n)?e.slice(n.length):e.startsWith(t)?"":e}function kHt(e){const t=e.split(Ti),n=t[0]||"",r=t.length>1?t.slice(1).join(Ti):"";return{baseInstructions:n,additionalInstructions:r}}function Kwe({prompt:e,symbol:t,quoteName:n=""}){if(!t||!e)return"";const r=(c,u)=>`Explain the factors driving the latest movement of ${c}${u}, including its recent {{direction}} to {{event_value}}. Contextualize this price movement within the last few weeks of price movement and investor narrative.`,s=(c,u)=>`Explain the factors driving the latest movement of ${c}${u}, including its recent {{event_value}}% {{direction}}. Contextualize this price movement within the last few weeks of price movement and investor narrative.`,a=r(t,n),o=s(t,n);let i=e;if(i.startsWith(a+Ti)&&(i=i.slice((a+Ti).length)),i.startsWith(o+Ti)&&(i=i.slice((o+Ti).length)),i.includes(Ti)){const c=i.split(Ti);i=c[c.length-1]}return i}function Jkt({selectedSymbol:e,symbol:t,quote:n,isLoading:r=!1,alertType:s,priceValue:a,percentValue:o}){const i=e??t,c=n?.name?` (${n.name})`:"",u=f.useMemo(()=>r||!n||!i?"":s==="price"?e5t({symbol:i,quoteName:c,priceValue:a}):t5t({symbol:i,quoteName:c,percentValue:o}),[r,n,i,s,c,a,o]),d=f.useMemo(()=>!i||!n?"":s==="price"?SM({symbol:i,quoteName:c}):CM({symbol:i,quoteName:c}),[i,n,s,c]),m=!r&&n?.name;return f.useMemo(()=>({shouldShowDisplayInstructions:m,displayInstructions:u,baseInstructions:d,effectiveSymbol:i,quoteName:c}),[d,u,i,c,m])}function SM({symbol:e,quoteName:t}){return`Explain the factors driving the latest movement of ${e}${t||""}, including its recent {{direction}} to {{event_value}}. Contextualize this price movement within the last few weeks of price movement and investor narrative.`}function CM({symbol:e,quoteName:t}){return`Explain the factors driving the latest movement of ${e}${t||""}, including its recent {{event_value}}% {{direction}}. Contextualize this price movement within the last few weeks of price movement and investor narrative.`}function e5t({symbol:e,quoteName:t,priceValue:n}){return SM({symbol:e,quoteName:t}).replace(" to {{event_value}}",n&&n!=="$"?` to ${n}`:"").replace("{{direction}}","rise/fall")}function t5t({symbol:e,quoteName:t,percentValue:n}){return CM({symbol:e,quoteName:t}).replace(" {{event_value}}%",n?` ${parseFloat(n).toFixed(2)}%`:"").replace("{{direction}}","increase/decrease")}const w0=1e9,S0=-1e9;function Zee({symbol:e,alertType:t,priceValue:n,priceThreshold:r,percentValue:s,positiveSelected:a=!0,negativeSelected:o=!1,baseInstructions:i,additionalInstructions:c=""}){let u,d="";if(t==="price"){if(!n||!r)return null;const h=parseFloat(n.replace(/[^0-9.]/g,""));if(isNaN(h))return null;u={event_entity:e,event_group:"FINANCE",event_type:"STOCK_PRICE_TARGET",value_lower_bound:r==="below"?h:S0,value_upper_bound:r==="above"?h:w0},d=`Alert when ${e} is ${r} ${n}`}else if(t==="movement"){if(!s)return null;const h=parseFloat(s);if(isNaN(h))return null;a&&o?(u={event_entity:e,event_group:"FINANCE",event_type:"STOCK_PRICE_MOVEMENT",value_lower_bound:-h,value_upper_bound:h},d=`Alert when ${e} moves +${s}% or -${s}% in a day`):a?(u={event_entity:e,event_group:"FINANCE",event_type:"STOCK_PRICE_MOVEMENT",value_lower_bound:S0,value_upper_bound:h},d=`Alert when ${e} moves +${s}% in a day`):o&&(u={event_entity:e,event_group:"FINANCE",event_type:"STOCK_PRICE_MOVEMENT",value_lower_bound:-h,value_upper_bound:w0},d=`Alert when ${e} moves -${s}% in a day.`)}if(!u)return null;const m=qwe({baseInstructions:i,additionalInstructions:c});return{task_name:d,prompt:m,event_subscription:u,model_preference:"turbo"}}function Ywe(e){const t={selectedSymbol:e.symbol,additionalInstructions:"",selectedOption:"price",priceValue:"",percentValue:"",positiveSelected:!0,negativeSelected:!1};switch(e.alertType){case _a.TARGET_PRICE:return{...t,selectedOption:"price",priceValue:e.price.toString()};case _a.MOVEMENT_AMOUNT:{const n=e.percentageDecimalUpperBound>0&&e.percentageDecimalUpperBound!==w0/100,r=e.percentageDecimalLowerBound<0&&e.percentageDecimalLowerBound!==S0/100;let s="";return n?s=(e.percentageDecimalUpperBound*100).toFixed(2):r&&(s=(Math.abs(e.percentageDecimalLowerBound)*100).toFixed(2)),{...t,selectedOption:"movement",percentValue:s,positiveSelected:n,negativeSelected:r}}default:Qt(e)}}function n5t(e,t){if(!e.selectedSymbol)return t;switch(e.selectedOption){case"price":{const n=parseFloat(e.priceValue.replace(/[^0-9.]/g,""));return isNaN(n)?t:{type:lt.PRICE_ALERT,alertType:_a.TARGET_PRICE,symbol:e.selectedSymbol,price:n,currency:"usd"}}case"movement":{const r=(parseFloat(e.percentValue)||0)/100;let s=0,a=0;return e.positiveSelected&&e.negativeSelected?(s=r,a=-r):e.positiveSelected?s=r:e.negativeSelected&&(a=-r),{type:lt.PRICE_ALERT,alertType:_a.MOVEMENT_AMOUNT,symbol:e.selectedSymbol,percentageDecimalUpperBound:s,percentageDecimalLowerBound:a}}default:Qt(e.selectedOption)}}function r5t({trigger:e,onTriggerChange:t}){const[n,r]=f.useState(()=>Ywe(e)),s=f.useCallback(p=>{const g=n5t(p,e);t(g)},[e,t]),a=f.useCallback(p=>{r(g=>{const y=p(g);return s(y),y})},[s]),o=f.useCallback(p=>{a(g=>({...g,selectedSymbol:p}))},[a]),i=f.useCallback(p=>{a(g=>({...g,selectedOption:p}))},[a]),c=f.useCallback(p=>{a(g=>({...g,priceValue:typeof p=="function"?p(g.priceValue):p}))},[a]),u=f.useCallback(p=>{a(g=>({...g,percentValue:typeof p=="function"?p(g.percentValue):p}))},[a]),d=f.useCallback(p=>{a(g=>({...g,positiveSelected:p}))},[a]),m=f.useCallback(p=>{a(g=>({...g,negativeSelected:p}))},[a]),h=f.useCallback(p=>{r(g=>({...g,additionalInstructions:p}))},[]);return f.useMemo(()=>({formState:n,onSymbolChange:o,onOptionChange:i,onPriceValueChange:c,onPercentValueChange:u,onPositiveChange:d,onNegativeChange:m,onAdditionalInstructionsChange:h}),[n,o,i,c,u,d,m,h])}const ng=({symbol:e,enabled:t=!!e})=>Ke({enabled:t&&!!e,queryKey:Spt({symbol:e}),queryFn:()=>Oye({symbol:e}),refetchInterval:5*1e3}),Qwe=f.memo(({trigger:e,prompt:t,onPromptChange:n,error:r,variant:s="default"})=>{const{isMobileUserAgent:a}=Ce(),o=Ywe(e),{selectedSymbol:i,priceValue:c,percentValue:u}=o,{data:d,isLoading:m}=ng({symbol:o.selectedSymbol}),h=e.alertType===_a.TARGET_PRICE?"price":"movement",{shouldShowDisplayInstructions:p,displayInstructions:g}=Jkt({selectedSymbol:i,quote:d,isLoading:m,alertType:h,priceValue:c,percentValue:u});return l.jsxs("div",{className:"gap-md flex flex-col",children:[p&&l.jsxs("div",{className:"gap-sm flex w-full flex-col items-start",children:[l.jsx("div",{className:"gap-xs flex w-full items-center",children:l.jsx(D,{variant:"smallBold",color:"light",className:"flex shrink-0 items-center",children:l.jsx(he,{defaultMessage:"Default Query",id:"qax5d8pQCh"})})}),l.jsx("div",{className:"w-full [&>*]:w-full",children:l.jsx(D,{variant:"small",color:"light",className:"pl-sm border-subtlest border-l-2",children:g})})]}),l.jsxs("div",{className:"gap-sm flex w-full flex-col items-start",children:[l.jsx("div",{className:"gap-xs flex w-full items-center",children:l.jsx(D,{variant:"smallBold",color:"light",className:"flex shrink-0 items-center",children:l.jsx(he,{defaultMessage:"Additional Instructions (optional)",id:"QFuOkrgHHJ"})})}),l.jsx("div",{className:"w-full [&>*]:w-full",children:l.jsx(el,{value:t,onChange:n,isMobileUserAgent:a,isMobileStyle:!1,minRows:3,maxLength:Qoe,className:B("[&_textarea]:placeholder:!text-quietest placeholder:!text-quietest hover:!border-subtler focus-within:!border-subtler !border !border-transparent","w-full"),placeholder:"Check news and social media sentiment to assess consensus or controversy",variant:s})})]}),r&&l.jsxs("div",{className:"gap-xs flex items-center",children:[l.jsx(yS,{size:12,className:"text-caution"}),l.jsx(D,{variant:"tinyRegular",color:"red",className:"mt-0.5",children:r})]})]})});Qwe.displayName="PriceAlertQueryPromptInput";const Xwe=f.memo(({trigger:e,prompt:t,onPromptChange:n,error:r,variant:s})=>{const{data:a}=ng({symbol:e.symbol}),o=f.useMemo(()=>{if(!e.symbol)return"";const u=a?.name?` (${a.name})`:"";return e.alertType===_a.TARGET_PRICE?SM({symbol:e.symbol,quoteName:u}):CM({symbol:e.symbol,quoteName:u})},[e.symbol,e.alertType,a?.name]),i=f.useMemo(()=>{const u=a?.name?` (${a.name})`:"";return Kwe({prompt:t,symbol:e.symbol,quoteName:u})},[t,e.symbol,a?.name]),c=u=>{const d=qwe({baseInstructions:o,additionalInstructions:u});n(d)};return l.jsx(Qwe,{trigger:e,prompt:i,onPromptChange:c,error:r,variant:s})});Xwe.displayName="PriceAlertPromptWrapper";const eU=f.memo(({trigger:e,prompt:t,onPromptChange:n,placeholder:r,error:s,variant:a="default"})=>{const{isMobileUserAgent:o}=Ce(),i=(()=>{switch(a){case"default":return"bg-offset [&_textarea]:bg-offset";case"offsetPlus":return"bg-offsetPlus [&_textarea]:bg-offsetPlus";default:Qt(a)}})();switch(e.type){case lt.SCHEDULED:case lt.SHORTCUT:return l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(D,{variant:"tiny",color:"light",className:"select-none",children:l.jsx(he,{defaultMessage:"Instructions",id:"sV2v5LjRpX"})}),l.jsx(el,{placeholder:r,value:t,onChange:n,isMobileUserAgent:o,isMobileStyle:!1,minRows:3,maxLength:Qoe,allowEnterNewlines:!0,className:B("hover:!border-subtler focus-within:!border-subtler !border !border-transparent",i),variant:a}),s&&l.jsxs("div",{className:"gap-xs flex items-center",children:[l.jsx(yS,{size:12,className:"text-caution"}),l.jsx(D,{variant:"tinyRegular",color:"red",className:"mt-0.5",children:s})]})]});case lt.PRICE_ALERT:return l.jsx(Xwe,{trigger:e,prompt:t,onPromptChange:n,error:s,variant:a});default:Qt(e)}});eU.displayName="QueryPromptInput";const s5t=[{value:"ONCE",label:"Once"},{value:"DAILY",label:"Daily"},{value:"WEEKLY",label:"Weekly"},{value:"WEEKDAYS",label:"Every weekday"},{value:"MONTHLY",label:"Monthly"},{value:"YEARLY",label:"Yearly"}],a5t=[{value:"0",label:"Sunday"},{value:"1",label:"Monday"},{value:"2",label:"Tuesday"},{value:"3",label:"Wednesday"},{value:"4",label:"Thursday"},{value:"5",label:"Friday"},{value:"6",label:"Saturday"}],o5t=[...Array(31)].map((e,t)=>({value:String(t+1),label:String(t+1)})),i5t=[{value:"0",label:"January"},{value:"1",label:"February"},{value:"2",label:"March"},{value:"3",label:"April"},{value:"4",label:"May"},{value:"5",label:"June"},{value:"6",label:"July"},{value:"7",label:"August"},{value:"8",label:"September"},{value:"9",label:"October"},{value:"10",label:"November"},{value:"11",label:"December"}];var It=function(){return It=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},It.apply(this,arguments)};function l5t(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function Zwe(e,t,n){for(var r=0,s=t.length,a;r<s;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}function q1(e){return e.mode==="multiple"}function K1(e){return e.mode==="range"}function EM(e){return e.mode==="single"}var c5t={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function u5t(e,t){return gc(e,"LLLL y",t)}function d5t(e,t){return gc(e,"d",t)}function f5t(e,t){return gc(e,"LLLL",t)}function m5t(e){return"".concat(e)}function h5t(e,t){return gc(e,"cccccc",t)}function p5t(e,t){return gc(e,"yyyy",t)}var g5t=Object.freeze({__proto__:null,formatCaption:u5t,formatDay:d5t,formatMonthCaption:f5t,formatWeekNumber:m5t,formatWeekdayName:h5t,formatYearCaption:p5t}),y5t=function(e,t,n){return gc(e,"do MMMM (EEEE)",n)},v5t=function(){return"Month: "},x5t=function(){return"Go to next month"},b5t=function(){return"Go to previous month"},_5t=function(e,t){return gc(e,"cccc",t)},w5t=function(e){return"Week n. ".concat(e)},S5t=function(){return"Year: "},C5t=Object.freeze({__proto__:null,labelDay:y5t,labelMonthDropdown:v5t,labelNext:x5t,labelPrevious:b5t,labelWeekNumber:w5t,labelWeekday:_5t,labelYearDropdown:S5t});function E5t(){var e="buttons",t=c5t,n=Cce,r={},s={},a=1,o={},i=new Date;return{captionLayout:e,classNames:t,formatters:g5t,labels:C5t,locale:n,modifiersClassNames:r,modifiers:s,numberOfMonths:a,styles:o,today:i,mode:"default"}}function M5t(e){var t=e.fromYear,n=e.toYear,r=e.fromMonth,s=e.toMonth,a=e.fromDate,o=e.toDate;return r?a=va(r):t&&(a=new Date(t,0,1)),s?o=lC(s):n&&(o=new Date(n,11,31)),{fromDate:a?pu(a):void 0,toDate:o?pu(o):void 0}}var Jwe=f.createContext(void 0);function T5t(e){var t,n=e.initialProps,r=E5t(),s=M5t(n),a=s.fromDate,o=s.toDate,i=(t=n.captionLayout)!==null&&t!==void 0?t:r.captionLayout;i!=="buttons"&&(!a||!o)&&(i="buttons");var c;(EM(n)||q1(n)||K1(n))&&(c=n.onSelect);var u=It(It(It({},r),n),{captionLayout:i,classNames:It(It({},r.classNames),n.classNames),components:It({},n.components),formatters:It(It({},r.formatters),n.formatters),fromDate:a,labels:It(It({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:It(It({},r.modifiers),n.modifiers),modifiersClassNames:It(It({},r.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:It(It({},r.styles),n.styles),toDate:o});return A.createElement(Jwe.Provider,{value:u},e.children)}function Yn(){var e=f.useContext(Jwe);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function eSe(e){var t=Yn(),n=t.locale,r=t.classNames,s=t.styles,a=t.formatters.formatCaption;return A.createElement("div",{className:r.caption_label,style:s.caption_label,"aria-live":"polite",role:"presentation",id:e.id},a(e.displayMonth,{locale:n}))}function k5t(e){return A.createElement("svg",It({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e),A.createElement("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"}))}function tSe(e){var t,n,r=e.onChange,s=e.value,a=e.children,o=e.caption,i=e.className,c=e.style,u=Yn(),d=(n=(t=u.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&n!==void 0?n:k5t;return A.createElement("div",{className:i,style:c},A.createElement("span",{className:u.classNames.vhidden},e["aria-label"]),A.createElement("select",{name:e.name,"aria-label":e["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:s,onChange:r},a),A.createElement("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true"},o,A.createElement(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})))}function N5t(e){var t,n=Yn(),r=n.fromDate,s=n.toDate,a=n.styles,o=n.locale,i=n.formatters.formatMonthCaption,c=n.classNames,u=n.components,d=n.labels.labelMonthDropdown;if(!r)return A.createElement(A.Fragment,null);if(!s)return A.createElement(A.Fragment,null);var m=[];if(Tce(r,s))for(var h=va(r),p=r.getMonth();p<=s.getMonth();p++)m.push(aT(h,p));else for(var h=va(new Date),p=0;p<=11;p++)m.push(aT(h,p));var g=function(v){var x=Number(v.target.value),b=aT(va(e.displayMonth),x);e.onChange(b)},y=(t=u?.Dropdown)!==null&&t!==void 0?t:tSe;return A.createElement(y,{name:"months","aria-label":d(),className:c.dropdown_month,style:a.dropdown_month,onChange:g,value:e.displayMonth.getMonth(),caption:i(e.displayMonth,{locale:o})},m.map(function(v){return A.createElement("option",{key:v.getMonth(),value:v.getMonth()},i(v,{locale:o}))}))}function A5t(e){var t,n=e.displayMonth,r=Yn(),s=r.fromDate,a=r.toDate,o=r.locale,i=r.styles,c=r.classNames,u=r.components,d=r.formatters.formatYearCaption,m=r.labels.labelYearDropdown,h=[];if(!s)return A.createElement(A.Fragment,null);if(!a)return A.createElement(A.Fragment,null);for(var p=s.getFullYear(),g=a.getFullYear(),y=p;y<=g;y++)h.push(iz(uFe(new Date),y));var v=function(b){var _=iz(va(n),Number(b.target.value));e.onChange(_)},x=(t=u?.Dropdown)!==null&&t!==void 0?t:tSe;return A.createElement(x,{name:"years","aria-label":m(),className:c.dropdown_year,style:i.dropdown_year,onChange:v,value:n.getFullYear(),caption:d(n,{locale:o})},h.map(function(b){return A.createElement("option",{key:b.getFullYear(),value:b.getFullYear()},d(b,{locale:o}))}))}function P5t(e,t){var n=f.useState(e),r=n[0],s=n[1],a=t===void 0?r:t;return[a,s]}function R5t(e){var t=e.month,n=e.defaultMonth,r=e.today,s=t||n||r||new Date,a=e.toDate,o=e.fromDate,i=e.numberOfMonths,c=i===void 0?1:i;if(a&&hh(a,s)<0){var u=-1*(c-1);s=zo(a,u)}return o&&hh(s,o)<0&&(s=o),va(s)}function I5t(){var e=Yn(),t=R5t(e),n=P5t(t,e.month),r=n[0],s=n[1],a=function(o){var i;if(!e.disableNavigation){var c=va(o);s(c),(i=e.onMonthChange)===null||i===void 0||i.call(e,c)}};return[r,a]}function j5t(e,t){for(var n=t.reverseMonths,r=t.numberOfMonths,s=va(e),a=va(zo(s,r)),o=hh(a,s),i=[],c=0;c<o;c++){var u=zo(s,c);i.push(u)}return n&&(i=i.reverse()),i}function O5t(e,t){if(!t.disableNavigation){var n=t.toDate,r=t.pagedNavigation,s=t.numberOfMonths,a=s===void 0?1:s,o=r?a:1,i=va(e);if(!n)return zo(i,o);var c=hh(n,e);if(!(c<a))return zo(i,o)}}function L5t(e,t){if(!t.disableNavigation){var n=t.fromDate,r=t.pagedNavigation,s=t.numberOfMonths,a=s===void 0?1:s,o=r?a:1,i=va(e);if(!n)return zo(i,-o);var c=hh(i,n);if(!(c<=0))return zo(i,-o)}}var nSe=f.createContext(void 0);function D5t(e){var t=Yn(),n=I5t(),r=n[0],s=n[1],a=j5t(r,t),o=O5t(r,t),i=L5t(r,t),c=function(m){return a.some(function(h){return bL(m,h)})},u=function(m,h){c(m)||(h&&Mce(m,h)?s(zo(m,1+t.numberOfMonths*-1)):s(m))},d={currentMonth:r,displayMonths:a,goToMonth:s,goToDate:u,previousMonth:i,nextMonth:o,isDateDisplayed:c};return A.createElement(nSe.Provider,{value:d},e.children)}function Y1(){var e=f.useContext(nSe);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function Jee(e){var t,n=Yn(),r=n.classNames,s=n.styles,a=n.components,o=Y1().goToMonth,i=function(d){o(d)},c=(t=a?.CaptionLabel)!==null&&t!==void 0?t:eSe,u=A.createElement(c,{id:e.id,displayMonth:e.displayMonth});return A.createElement("div",{className:r.caption_dropdowns,style:s.caption_dropdowns},A.createElement("div",{className:r.vhidden},u),A.createElement(N5t,{onChange:i,displayMonth:e.displayMonth}),A.createElement(A5t,{onChange:i,displayMonth:e.displayMonth}))}function F5t(e){return A.createElement("svg",It({width:"16px",height:"16px",viewBox:"0 0 120 120"},e),A.createElement("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"}))}function U5t(e){return A.createElement("svg",It({width:"16px",height:"16px",viewBox:"0 0 120 120"},e),A.createElement("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"}))}var Jw=f.forwardRef(function(e,t){var n=Yn(),r=n.classNames,s=n.styles,a=[r.button_reset,r.button];e.className&&a.push(e.className);var o=a.join(" "),i=It(It({},s.button_reset),s.button);return e.style&&Object.assign(i,e.style),A.createElement("button",It({},e,{ref:t,type:"button",className:o,style:i}))});function B5t(e){var t,n,r=Yn(),s=r.dir,a=r.locale,o=r.classNames,i=r.styles,c=r.labels,u=c.labelPrevious,d=c.labelNext,m=r.components;if(!e.nextMonth&&!e.previousMonth)return A.createElement(A.Fragment,null);var h=u(e.previousMonth,{locale:a}),p=[o.nav_button,o.nav_button_previous].join(" "),g=d(e.nextMonth,{locale:a}),y=[o.nav_button,o.nav_button_next].join(" "),v=(t=m?.IconRight)!==null&&t!==void 0?t:U5t,x=(n=m?.IconLeft)!==null&&n!==void 0?n:F5t;return A.createElement("div",{className:o.nav,style:i.nav},!e.hidePrevious&&A.createElement(Jw,{name:"previous-month","aria-label":h,className:p,style:i.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick},s==="rtl"?A.createElement(v,{className:o.nav_icon,style:i.nav_icon}):A.createElement(x,{className:o.nav_icon,style:i.nav_icon})),!e.hideNext&&A.createElement(Jw,{name:"next-month","aria-label":g,className:y,style:i.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick},s==="rtl"?A.createElement(x,{className:o.nav_icon,style:i.nav_icon}):A.createElement(v,{className:o.nav_icon,style:i.nav_icon})))}function ete(e){var t=Yn().numberOfMonths,n=Y1(),r=n.previousMonth,s=n.nextMonth,a=n.goToMonth,o=n.displayMonths,i=o.findIndex(function(g){return bL(e.displayMonth,g)}),c=i===0,u=i===o.length-1,d=t>1&&(c||!u),m=t>1&&(u||!c),h=function(){r&&a(r)},p=function(){s&&a(s)};return A.createElement(B5t,{displayMonth:e.displayMonth,hideNext:d,hidePrevious:m,nextMonth:s,previousMonth:r,onPreviousClick:h,onNextClick:p})}function V5t(e){var t,n=Yn(),r=n.classNames,s=n.disableNavigation,a=n.styles,o=n.captionLayout,i=n.components,c=(t=i?.CaptionLabel)!==null&&t!==void 0?t:eSe,u;return s?u=A.createElement(c,{id:e.id,displayMonth:e.displayMonth}):o==="dropdown"?u=A.createElement(Jee,{displayMonth:e.displayMonth,id:e.id}):o==="dropdown-buttons"?u=A.createElement(A.Fragment,null,A.createElement(Jee,{displayMonth:e.displayMonth,id:e.id}),A.createElement(ete,{displayMonth:e.displayMonth,id:e.id})):u=A.createElement(A.Fragment,null,A.createElement(c,{id:e.id,displayMonth:e.displayMonth}),A.createElement(ete,{displayMonth:e.displayMonth,id:e.id})),A.createElement("div",{className:r.caption,style:a.caption},u)}function $5t(e){var t=Yn(),n=t.footer,r=t.styles,s=t.classNames.tfoot;return n?A.createElement("tfoot",{className:s,style:r.tfoot},A.createElement("tr",null,A.createElement("td",{colSpan:8},n))):A.createElement(A.Fragment,null)}function W5t(e,t,n){for(var r=n?zd(new Date):Ji(new Date,{locale:e,weekStartsOn:t}),s=[],a=0;a<7;a++){var o=cs(r,a);s.push(o)}return s}function H5t(){var e=Yn(),t=e.classNames,n=e.styles,r=e.showWeekNumber,s=e.locale,a=e.weekStartsOn,o=e.ISOWeek,i=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,u=W5t(s,a,o);return A.createElement("tr",{style:n.head_row,className:t.head_row},r&&A.createElement("td",{style:n.head_cell,className:t.head_cell}),u.map(function(d,m){return A.createElement("th",{key:m,scope:"col",className:t.head_cell,style:n.head_cell,"aria-label":c(d,{locale:s})},i(d,{locale:s}))}))}function z5t(){var e,t=Yn(),n=t.classNames,r=t.styles,s=t.components,a=(e=s?.HeadRow)!==null&&e!==void 0?e:H5t;return A.createElement("thead",{style:r.head,className:n.head},A.createElement(a,null))}function G5t(e){var t=Yn(),n=t.locale,r=t.formatters.formatDay;return A.createElement(A.Fragment,null,r(e.date,{locale:n}))}var tU=f.createContext(void 0);function q5t(e){if(!q1(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return A.createElement(tU.Provider,{value:t},e.children)}return A.createElement(K5t,{initialProps:e.initialProps,children:e.children})}function K5t(e){var t=e.initialProps,n=e.children,r=t.selected,s=t.min,a=t.max,o=function(u,d,m){var h,p;(h=t.onDayClick)===null||h===void 0||h.call(t,u,d,m);var g=!!(d.selected&&s&&r?.length===s);if(!g){var y=!!(!d.selected&&a&&r?.length===a);if(!y){var v=r?Zwe([],r):[];if(d.selected){var x=v.findIndex(function(b){return us(u,b)});v.splice(x,1)}else v.push(u);(p=t.onSelect)===null||p===void 0||p.call(t,v,u,d,m)}}},i={disabled:[]};r&&i.disabled.push(function(u){var d=a&&r.length>a-1,m=r.some(function(h){return us(h,u)});return!!(d&&!m)});var c={selected:r,onDayClick:o,modifiers:i};return A.createElement(tU.Provider,{value:c},n)}function nU(){var e=f.useContext(tU);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function Y5t(e,t){var n=t||{},r=n.from,s=n.to;if(!r)return{from:e,to:void 0};if(!s&&us(r,e))return{from:r,to:e};if(!s&&Mce(e,r))return{from:e,to:r};if(!s)return{from:r,to:e};if(!(us(s,e)&&us(r,e))){if(us(s,e))return{from:s,to:void 0};if(!us(r,e))return Ece(r,e)?{from:e,to:s}:{from:r,to:e}}}var rU=f.createContext(void 0);function Q5t(e){if(!K1(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return A.createElement(rU.Provider,{value:t},e.children)}return A.createElement(X5t,{initialProps:e.initialProps,children:e.children})}function X5t(e){var t=e.initialProps,n=e.children,r=t.selected,s=r||{},a=s.from,o=s.to,i=t.min,c=t.max,u=function(p,g,y){var v,x;(v=t.onDayClick)===null||v===void 0||v.call(t,p,g,y);var b=Y5t(p,r);(x=t.onSelect)===null||x===void 0||x.call(t,b,p,g,y)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(a&&(d.range_start=[a],o?(d.range_end=[o],us(a,o)||(d.range_middle=[{after:a,before:o}])):d.range_end=[a]),i&&(a&&!o&&d.disabled.push({after:DA(a,i-1),before:cs(a,i-1)}),a&&o&&d.disabled.push({after:a,before:cs(a,i-1)})),c&&(a&&!o&&(d.disabled.push({before:cs(a,-c+1)}),d.disabled.push({after:cs(a,c-1)})),a&&o)){var m=Ri(o,a)+1,h=c-m;d.disabled.push({before:DA(a,h)}),d.disabled.push({after:cs(o,h)})}return A.createElement(rU.Provider,{value:{selected:r,onDayClick:u,modifiers:d}},n)}function sU(){var e=f.useContext(rU);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function U_(e){return Array.isArray(e)?Zwe([],e):e!==void 0?[e]:[]}function Z5t(e){var t={};return Object.entries(e).forEach(function(n){var r=n[0],s=n[1];t[r]=U_(s)}),t}var Jo;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(Jo||(Jo={}));var J5t=Jo.Selected,Ml=Jo.Disabled,eNt=Jo.Hidden,tNt=Jo.Today,WN=Jo.RangeEnd,HN=Jo.RangeMiddle,zN=Jo.RangeStart,nNt=Jo.Outside;function rNt(e,t,n){var r,s=(r={},r[J5t]=U_(e.selected),r[Ml]=U_(e.disabled),r[eNt]=U_(e.hidden),r[tNt]=[e.today],r[WN]=[],r[HN]=[],r[zN]=[],r[nNt]=[],r);return e.fromDate&&s[Ml].push({before:e.fromDate}),e.toDate&&s[Ml].push({after:e.toDate}),q1(e)?s[Ml]=s[Ml].concat(t.modifiers[Ml]):K1(e)&&(s[Ml]=s[Ml].concat(n.modifiers[Ml]),s[zN]=n.modifiers[zN],s[HN]=n.modifiers[HN],s[WN]=n.modifiers[WN]),s}var rSe=f.createContext(void 0);function sNt(e){var t=Yn(),n=nU(),r=sU(),s=rNt(t,n,r),a=Z5t(t.modifiers),o=It(It({},s),a);return A.createElement(rSe.Provider,{value:o},e.children)}function sSe(){var e=f.useContext(rSe);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function aNt(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function oNt(e){return!!(e&&typeof e=="object"&&"from"in e)}function iNt(e){return!!(e&&typeof e=="object"&&"after"in e)}function lNt(e){return!!(e&&typeof e=="object"&&"before"in e)}function cNt(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function uNt(e,t){var n,r=t.from,s=t.to;if(!r)return!1;if(!s&&us(r,e))return!0;if(!s)return!1;var a=Ri(s,r)<0;a&&(n=[s,r],r=n[0],s=n[1]);var o=Ri(e,r)>=0&&Ri(s,e)>=0;return o}function dNt(e){return gL(e)}function fNt(e){return Array.isArray(e)&&e.every(gL)}function mNt(e,t){return t.some(function(n){if(typeof n=="boolean")return n;if(dNt(n))return us(e,n);if(fNt(n))return n.includes(e);if(oNt(n))return uNt(e,n);if(cNt(n))return n.dayOfWeek.includes(e.getDay());if(aNt(n)){var r=Ri(n.before,e),s=Ri(n.after,e),a=r>0,o=s<0,i=Ece(n.before,n.after);return i?o&&a:a||o}return iNt(n)?Ri(e,n.after)>0:lNt(n)?Ri(n.before,e)>0:typeof n=="function"?n(e):!1})}function aU(e,t,n){var r=Object.keys(t).reduce(function(a,o){var i=t[o];return mNt(e,i)&&a.push(o),a},[]),s={};return r.forEach(function(a){return s[a]=!0}),n&&!bL(e,n)&&(s.outside=!0),s}function hNt(e,t){for(var n=va(e[0]),r=lC(e[e.length-1]),s,a,o=n;o<=r;){var i=aU(o,t),c=!i.disabled&&!i.hidden;if(!c){o=cs(o,1);continue}if(i.selected)return o;i.today&&!a&&(a=o),s||(s=o),o=cs(o,1)}return a||s}var pNt=365;function aSe(e,t){var n=t.moveBy,r=t.direction,s=t.context,a=t.modifiers,o=t.retry,i=o===void 0?{count:0,lastFocused:e}:o,c=s.weekStartsOn,u=s.fromDate,d=s.toDate,m=s.locale,h={day:cs,week:d2,month:zo,year:GDe,startOfWeek:function(v){return s.ISOWeek?zd(v):Ji(v,{locale:m,weekStartsOn:c})},endOfWeek:function(v){return s.ISOWeek?bce(v):xL(v,{locale:m,weekStartsOn:c})}},p=h[n](e,r==="after"?1:-1);r==="before"&&u?p=qDe([u,p]):r==="after"&&d&&(p=KDe([d,p]));var g=!0;if(a){var y=aU(p,a);g=!y.disabled&&!y.hidden}return g?p:i.count>pNt?i.lastFocused:aSe(p,{moveBy:n,direction:r,context:s,modifiers:a,retry:It(It({},i),{count:i.count+1})})}var oSe=f.createContext(void 0);function gNt(e){var t=Y1(),n=sSe(),r=f.useState(),s=r[0],a=r[1],o=f.useState(),i=o[0],c=o[1],u=hNt(t.displayMonths,n),d=s??(i&&t.isDateDisplayed(i))?i:u,m=function(){c(s),a(void 0)},h=function(v){a(v)},p=Yn(),g=function(v,x){if(s){var b=aSe(s,{moveBy:v,direction:x,context:p,modifiers:n});us(s,b)||(t.goToDate(b,s),h(b))}},y={focusedDay:s,focusTarget:d,blur:m,focus:h,focusDayAfter:function(){return g("day","after")},focusDayBefore:function(){return g("day","before")},focusWeekAfter:function(){return g("week","after")},focusWeekBefore:function(){return g("week","before")},focusMonthBefore:function(){return g("month","before")},focusMonthAfter:function(){return g("month","after")},focusYearBefore:function(){return g("year","before")},focusYearAfter:function(){return g("year","after")},focusStartOfWeek:function(){return g("startOfWeek","before")},focusEndOfWeek:function(){return g("endOfWeek","after")}};return A.createElement(oSe.Provider,{value:y},e.children)}function oU(){var e=f.useContext(oSe);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function yNt(e,t){var n=sSe(),r=aU(e,n,t);return r}var iU=f.createContext(void 0);function vNt(e){if(!EM(e.initialProps)){var t={selected:void 0};return A.createElement(iU.Provider,{value:t},e.children)}return A.createElement(xNt,{initialProps:e.initialProps,children:e.children})}function xNt(e){var t=e.initialProps,n=e.children,r=function(a,o,i){var c,u,d;if((c=t.onDayClick)===null||c===void 0||c.call(t,a,o,i),o.selected&&!t.required){(u=t.onSelect)===null||u===void 0||u.call(t,void 0,a,o,i);return}(d=t.onSelect)===null||d===void 0||d.call(t,a,a,o,i)},s={selected:t.selected,onDayClick:r};return A.createElement(iU.Provider,{value:s},n)}function iSe(){var e=f.useContext(iU);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function bNt(e,t){var n=Yn(),r=iSe(),s=nU(),a=sU(),o=oU(),i=o.focusDayAfter,c=o.focusDayBefore,u=o.focusWeekAfter,d=o.focusWeekBefore,m=o.blur,h=o.focus,p=o.focusMonthBefore,g=o.focusMonthAfter,y=o.focusYearBefore,v=o.focusYearAfter,x=o.focusStartOfWeek,b=o.focusEndOfWeek,_=function(L){var F,U,V,W;EM(n)?(F=r.onDayClick)===null||F===void 0||F.call(r,e,t,L):q1(n)?(U=s.onDayClick)===null||U===void 0||U.call(s,e,t,L):K1(n)?(V=a.onDayClick)===null||V===void 0||V.call(a,e,t,L):(W=n.onDayClick)===null||W===void 0||W.call(n,e,t,L)},w=function(L){var F;h(e),(F=n.onDayFocus)===null||F===void 0||F.call(n,e,t,L)},S=function(L){var F;m(),(F=n.onDayBlur)===null||F===void 0||F.call(n,e,t,L)},C=function(L){var F;(F=n.onDayMouseEnter)===null||F===void 0||F.call(n,e,t,L)},E=function(L){var F;(F=n.onDayMouseLeave)===null||F===void 0||F.call(n,e,t,L)},M=function(L){var F;(F=n.onDayPointerEnter)===null||F===void 0||F.call(n,e,t,L)},T=function(L){var F;(F=n.onDayPointerLeave)===null||F===void 0||F.call(n,e,t,L)},I=function(L){var F;(F=n.onDayTouchCancel)===null||F===void 0||F.call(n,e,t,L)},j=function(L){var F;(F=n.onDayTouchEnd)===null||F===void 0||F.call(n,e,t,L)},N=function(L){var F;(F=n.onDayTouchMove)===null||F===void 0||F.call(n,e,t,L)},P=function(L){var F;(F=n.onDayTouchStart)===null||F===void 0||F.call(n,e,t,L)},R=function(L){var F;(F=n.onDayKeyUp)===null||F===void 0||F.call(n,e,t,L)},k=function(L){var F;switch(L.key){case"ArrowLeft":L.preventDefault(),L.stopPropagation(),n.dir==="rtl"?i():c();break;case"ArrowRight":L.preventDefault(),L.stopPropagation(),n.dir==="rtl"?c():i();break;case"ArrowDown":L.preventDefault(),L.stopPropagation(),u();break;case"ArrowUp":L.preventDefault(),L.stopPropagation(),d();break;case"PageUp":L.preventDefault(),L.stopPropagation(),L.shiftKey?y():p();break;case"PageDown":L.preventDefault(),L.stopPropagation(),L.shiftKey?v():g();break;case"Home":L.preventDefault(),L.stopPropagation(),x();break;case"End":L.preventDefault(),L.stopPropagation(),b();break}(F=n.onDayKeyDown)===null||F===void 0||F.call(n,e,t,L)},O={onClick:_,onFocus:w,onBlur:S,onKeyDown:k,onKeyUp:R,onMouseEnter:C,onMouseLeave:E,onPointerEnter:M,onPointerLeave:T,onTouchCancel:I,onTouchEnd:j,onTouchMove:N,onTouchStart:P};return O}function _Nt(){var e=Yn(),t=iSe(),n=nU(),r=sU(),s=EM(e)?t.selected:q1(e)?n.selected:K1(e)?r.selected:void 0;return s}function wNt(e){return Object.values(Jo).includes(e)}function SNt(e,t){var n=[e.classNames.day];return Object.keys(t).forEach(function(r){var s=e.modifiersClassNames[r];if(s)n.push(s);else if(wNt(r)){var a=e.classNames["day_".concat(r)];a&&n.push(a)}}),n}function CNt(e,t){var n=It({},e.styles.day);return Object.keys(t).forEach(function(r){var s;n=It(It({},n),(s=e.modifiersStyles)===null||s===void 0?void 0:s[r])}),n}function ENt(e,t,n){var r,s,a,o=Yn(),i=oU(),c=yNt(e,t),u=bNt(e,c),d=_Nt(),m=!!(o.onDayClick||o.mode!=="default");f.useEffect(function(){var C;c.outside||i.focusedDay&&m&&us(i.focusedDay,e)&&((C=n.current)===null||C===void 0||C.focus())},[i.focusedDay,e,n,m,c.outside]);var h=SNt(o,c).join(" "),p=CNt(o,c),g=!!(c.outside&&!o.showOutsideDays||c.hidden),y=(a=(s=o.components)===null||s===void 0?void 0:s.DayContent)!==null&&a!==void 0?a:G5t,v=A.createElement(y,{date:e,displayMonth:t,activeModifiers:c}),x={style:p,className:h,children:v,role:"gridcell"},b=i.focusTarget&&us(i.focusTarget,e)&&!c.outside,_=i.focusedDay&&us(i.focusedDay,e),w=It(It(It({},x),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=_||b?0:-1,r)),u),S={isButton:m,isHidden:g,activeModifiers:c,selectedDays:d,buttonProps:w,divProps:x};return S}function MNt(e){var t=f.useRef(null),n=ENt(e.date,e.displayMonth,t);return n.isHidden?A.createElement("div",{role:"gridcell"}):n.isButton?A.createElement(Jw,It({name:"day",ref:t},n.buttonProps)):A.createElement("div",It({},n.divProps))}function TNt(e){var t=e.number,n=e.dates,r=Yn(),s=r.onWeekNumberClick,a=r.styles,o=r.classNames,i=r.locale,c=r.labels.labelWeekNumber,u=r.formatters.formatWeekNumber,d=u(Number(t),{locale:i});if(!s)return A.createElement("span",{className:o.weeknumber,style:a.weeknumber},d);var m=c(Number(t),{locale:i}),h=function(p){s(t,n,p)};return A.createElement(Jw,{name:"week-number","aria-label":m,className:o.weeknumber,style:a.weeknumber,onClick:h},d)}function kNt(e){var t,n,r=Yn(),s=r.styles,a=r.classNames,o=r.showWeekNumber,i=r.components,c=(t=i?.Day)!==null&&t!==void 0?t:MNt,u=(n=i?.WeekNumber)!==null&&n!==void 0?n:TNt,d;return o&&(d=A.createElement("td",{className:a.cell,style:s.cell},A.createElement(u,{number:e.weekNumber,dates:e.dates}))),A.createElement("tr",{className:a.row,style:s.row},d,e.dates.map(function(m){return A.createElement("td",{className:a.cell,style:s.cell,key:pUe(m),role:"presentation"},A.createElement(c,{displayMonth:e.displayMonth,date:m}))}))}function tte(e,t,n){for(var r=n?.ISOWeek?bce(t):xL(t,n),s=n?.ISOWeek?zd(e):Ji(e,n),a=Ri(r,s),o=[],i=0;i<=a;i++)o.push(cs(s,i));var c=o.reduce(function(u,d){var m=n?.ISOWeek?mUe(d):xUe(d,n),h=u.find(function(p){return p.weekNumber===m});return h?(h.dates.push(d),u):(u.push({weekNumber:m,dates:[d]}),u)},[]);return c}function NNt(e,t){var n=tte(va(e),lC(e),t);if(t?.useFixedWeeks){var r=_Ue(e,t);if(r<6){var s=n[n.length-1],a=s.dates[s.dates.length-1],o=d2(a,6-r),i=tte(d2(a,1),o,t);n.push.apply(n,i)}}return n}function ANt(e){var t,n,r,s=Yn(),a=s.locale,o=s.classNames,i=s.styles,c=s.hideHead,u=s.fixedWeeks,d=s.components,m=s.weekStartsOn,h=s.firstWeekContainsDate,p=s.ISOWeek,g=NNt(e.displayMonth,{useFixedWeeks:!!u,ISOWeek:p,locale:a,weekStartsOn:m,firstWeekContainsDate:h}),y=(t=d?.Head)!==null&&t!==void 0?t:z5t,v=(n=d?.Row)!==null&&n!==void 0?n:kNt,x=(r=d?.Footer)!==null&&r!==void 0?r:$5t;return A.createElement("table",{className:o.table,style:i.table,role:"grid","aria-labelledby":e["aria-labelledby"]},!c&&A.createElement(y,null),A.createElement("tbody",{className:o.tbody,style:i.tbody,role:"rowgroup"},g.map(function(b){return A.createElement(v,{displayMonth:e.displayMonth,key:b.weekNumber,dates:b.dates,weekNumber:b.weekNumber})})),A.createElement(x,{displayMonth:e.displayMonth}))}function PNt(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var RNt=PNt()?f.useLayoutEffect:f.useEffect,GN=!1,INt=0;function nte(){return"react-day-picker-".concat(++INt)}function jNt(e){var t,n=e??(GN?nte():null),r=f.useState(n),s=r[0],a=r[1];return RNt(function(){s===null&&a(nte())},[]),f.useEffect(function(){GN===!1&&(GN=!0)},[]),(t=e??s)!==null&&t!==void 0?t:void 0}function ONt(e){var t,n,r=Yn(),s=r.dir,a=r.classNames,o=r.styles,i=r.components,c=Y1().displayMonths,u=jNt(r.id?"".concat(r.id,"-").concat(e.displayIndex):void 0),d=[a.month],m=o.month,h=e.displayIndex===0,p=e.displayIndex===c.length-1,g=!h&&!p;s==="rtl"&&(t=[h,p],p=t[0],h=t[1]),h&&(d.push(a.caption_start),m=It(It({},m),o.caption_start)),p&&(d.push(a.caption_end),m=It(It({},m),o.caption_end)),g&&(d.push(a.caption_between),m=It(It({},m),o.caption_between));var y=(n=i?.Caption)!==null&&n!==void 0?n:V5t;return A.createElement("div",{key:e.displayIndex,className:d.join(" "),style:m},A.createElement(y,{id:u,displayMonth:e.displayMonth}),A.createElement(ANt,{"aria-labelledby":u,displayMonth:e.displayMonth}))}function LNt(e){var t=e.initialProps,n=Yn(),r=oU(),s=Y1(),a=f.useState(!1),o=a[0],i=a[1];f.useEffect(function(){n.initialFocus&&r.focusTarget&&(o||(r.focus(r.focusTarget),i(!0)))},[n.initialFocus,o,r.focus,r.focusTarget,r]);var c=[n.classNames.root,n.className];n.numberOfMonths>1&&c.push(n.classNames.multiple_months),n.showWeekNumber&&c.push(n.classNames.with_weeknumber);var u=It(It({},n.styles.root),n.style),d=Object.keys(t).filter(function(m){return m.startsWith("data-")}).reduce(function(m,h){var p;return It(It({},m),(p={},p[h]=t[h],p))},{});return A.createElement("div",It({className:c.join(" "),style:u,dir:n.dir,id:n.id},d),A.createElement("div",{className:n.classNames.months,style:n.styles.months},s.displayMonths.map(function(m,h){return A.createElement(ONt,{key:h,displayIndex:h,displayMonth:m})})))}function DNt(e){var t=e.children,n=l5t(e,["children"]);return A.createElement(T5t,{initialProps:n},A.createElement(D5t,null,A.createElement(vNt,{initialProps:n},A.createElement(q5t,{initialProps:n},A.createElement(Q5t,{initialProps:n},A.createElement(sNt,null,A.createElement(gNt,null,t)))))))}function FNt(e){return A.createElement(DNt,It({},e),A.createElement(LNt,{initialProps:e}))}var qN={},rte;function UNt(){return rte||(rte=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="chevron-left",r=320,s=512,a=[9001],o="f053",i="M15 239c-9.4 9.4-9.4 24.6 0 33.9L207 465c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9L65.9 256 241 81c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0L15 239z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faChevronLeft=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(qN)),qN}var BNt=UNt(),KN={},ste;function VNt(){return ste||(ste=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="chevron-right",r=320,s=512,a=[9002],o="f054",i="M305 239c9.4 9.4 9.4 24.6 0 33.9L113 465c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l175-175L79 81c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0L305 239z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faChevronRight=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(KN)),KN}var $Nt=VNt();const lSe=A.memo(({className:e,showOutsideDays:t=!0,...n})=>{const r=A.useMemo(()=>({months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-between relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:"h-7 w-7 p-0 rounded hover:bg-offsetPlus flex items-center justify-center bg-offset [&_*]:fill-quiet",table:"w-full border-collapse",head_row:"flex",head_cell:"text-quiet rounded-md w-8 font-normal text-sm font-mono",row:"flex w-full mt-1",cell:B("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected].day-range-end)]:rounded-r-full",n.mode==="range"?"[&:has(>.day-range-end)]:rounded-r-full [&:has([aria-selected])]:bg-superBG [&:has(>.day-range-start)]:rounded-l-full first:[&:has([aria-selected])]:rounded-l-full last:[&:has([aria-selected])]:rounded-r-full":"[&:has([aria-selected])]:rounded-md"),day:B("h-8 w-8 p-0 font-normal select-none aria-selected:opacity-100 flex items-center justify-center rounded-full hover:bg-offset cursor-pointer"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:B(n.mode==="range"?"[&.day-range-start]:!bg-super [&.day-range-start]:!text-inverse [&.day-range-start]:hover:!bg-super [&.day-range-end]:!bg-super [&.day-range-end]:!text-inverse [&.day-range-end]:hover:!bg-super":"!bg-super !text-inverse hover:!bg-super"),day_today:"bg-superBG text-super hover:bg-superBG",day_outside:"day-outside text-quiet aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-quiet opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...B}),[n.mode]),s=f.useMemo(()=>({IconLeft:({className:a,...o})=>l.jsx(xt,{icon:BNt.faChevronLeft,className:a,size:"sm",...o}),IconRight:({className:a,...o})=>l.jsx(xt,{icon:$Nt.faChevronRight,className:a,size:"sm",...o})}),[]);return l.jsx(FNt,{showOutsideDays:t,className:B("p-3 font-sans text-base",e),classNames:r,components:s,...n})});lSe.displayName="Calendar";var MM="Popover",[cSe,NHt]=Ga(MM,[op]),Q1=op(),[WNt,Vu]=cSe(MM),uSe=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:o=!1}=e,i=Q1(t),c=f.useRef(null),[u,d]=f.useState(!1),[m,h]=ti({prop:r,defaultProp:s??!1,onChange:a,caller:MM});return l.jsx(iO,{...i,children:l.jsx(WNt,{scope:t,contentId:Mm(),triggerRef:c,open:m,onOpenChange:h,onOpenToggle:f.useCallback(()=>h(p=>!p),[h]),hasCustomAnchor:u,onCustomAnchorAdd:f.useCallback(()=>d(!0),[]),onCustomAnchorRemove:f.useCallback(()=>d(!1),[]),modal:o,children:n})})};uSe.displayName=MM;var dSe="PopoverAnchor",HNt=f.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Vu(dSe,n),a=Q1(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:i}=s;return f.useEffect(()=>(o(),()=>i()),[o,i]),l.jsx(AS,{...a,...r,ref:t})});HNt.displayName=dSe;var fSe="PopoverTrigger",mSe=f.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Vu(fSe,n),a=Q1(n),o=kn(t,s.triggerRef),i=l.jsx(on.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":vSe(s.open),...r,ref:o,onClick:jt(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?i:l.jsx(AS,{asChild:!0,...a,children:i})});mSe.displayName=fSe;var lU="PopoverPortal",[zNt,GNt]=cSe(lU,{forceMount:void 0}),hSe=e=>{const{__scopePopover:t,forceMount:n,children:r,container:s}=e,a=Vu(lU,t);return l.jsx(zNt,{scope:t,forceMount:n,children:l.jsx(Rs,{present:n||a.open,children:l.jsx(B0,{asChild:!0,container:s,children:r})})})};hSe.displayName=lU;var Yh="PopoverContent",pSe=f.forwardRef((e,t)=>{const n=GNt(Yh,e.__scopePopover),{forceMount:r=n.forceMount,...s}=e,a=Vu(Yh,e.__scopePopover);return l.jsx(Rs,{present:r||a.open,children:a.modal?l.jsx(KNt,{...s,ref:t}):l.jsx(YNt,{...s,ref:t})})});pSe.displayName=Yh;var qNt=gv("PopoverContent.RemoveScroll"),KNt=f.forwardRef((e,t)=>{const n=Vu(Yh,e.__scopePopover),r=f.useRef(null),s=kn(t,r),a=f.useRef(!1);return f.useEffect(()=>{const o=r.current;if(o)return Yle(o)},[]),l.jsx(nL,{as:qNt,allowPinchZoom:!0,children:l.jsx(gSe,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:jt(e.onCloseAutoFocus,o=>{o.preventDefault(),a.current||n.triggerRef.current?.focus()}),onPointerDownOutside:jt(e.onPointerDownOutside,o=>{const i=o.detail.originalEvent,c=i.button===0&&i.ctrlKey===!0,u=i.button===2||c;a.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:jt(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),YNt=f.forwardRef((e,t)=>{const n=Vu(Yh,e.__scopePopover),r=f.useRef(!1),s=f.useRef(!1);return l.jsx(gSe,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{e.onCloseAutoFocus?.(a),a.defaultPrevented||(r.current||n.triggerRef.current?.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{e.onInteractOutside?.(a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=a.target;n.triggerRef.current?.contains(o)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),gSe=f.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEscapeKeyDown:i,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...m}=e,h=Vu(Yh,n),p=Q1(n);return Fle(),l.jsx(eL,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:l.jsx(F0,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:i,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>h.onOpenChange(!1),children:l.jsx(lO,{"data-state":vSe(h.open),role:"dialog",id:h.contentId,...p,...m,ref:t,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),ySe="PopoverClose",QNt=f.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Vu(ySe,n);return l.jsx(on.button,{type:"button",...r,ref:t,onClick:jt(e.onClick,()=>s.onOpenChange(!1))})});QNt.displayName=ySe;var XNt="PopoverArrow",ZNt=f.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Q1(n);return l.jsx(cO,{...s,...r,ref:t})});ZNt.displayName=XNt;function vSe(e){return e?"open":"closed"}var JNt=uSe,e6t=mSe,t6t=hSe,n6t=pSe;const cU=A.memo(e=>{const{children:t,content:n,disableAnimation:r,isOpen:s,onClose:a,onOpen:o,contentClassName:i}=e;return l.jsxs(JNt,{open:s,onOpenChange:c=>{c?o?.():a?.()},children:[l.jsx(e6t,{asChild:!0,children:t}),l.jsx(t6t,{children:l.jsx(n6t,{asChild:!0,sideOffset:4,side:"bottom",align:"start",children:l.jsx(z,{variant:"background",className:B("p-xs relative rounded-lg border shadow-sm",{"data-close:zoom-out-95 data-close:fade-out data-close:animate-out":!r,"data-open:duration-150 data-open:ease-in-out data-open:animate-in data-open:fade-in data-open:zoom-in-95":!r},i),children:n})})})]})});cU.displayName="Popover";const r6t=e=>e.toLocaleDateString();function xSe({value:e,onChange:t,placeholder:n="Select date",formatDate:r=r6t,showIcon:s=!0,buttonClassName:a,variant:o="default",trailingIcon:i,fromDate:c}){const[u,d]=f.useState(!1),m=()=>{d(!u)},h=y=>{t(y),d(!1)},p=f.useMemo(()=>{const y=new Date;return y.setHours(0,0,0,0),y},[]),g=(()=>{switch(o){case"offsetPlus":return"bg-offsetPlus";case"default":return"bg-offset";default:Qt(o)}})();return l.jsx("div",{className:"relative z-50 size-full",children:l.jsx(cU,{isOpen:u,onOpen:()=>d(!0),onClose:()=>d(!1),placement:"bottom-start",content:l.jsx(lSe,{mode:"single",selected:e,onSelect:h,disabled:[{before:c??p}],fromDate:c??p}),children:l.jsxs("div",{role:"button",tabIndex:0,onClick:()=>m(),className:B(g,"flex cursor-pointer items-center justify-between rounded-lg pl-4 pr-4 font-sans","hover:border-subtler focus:border-subtler border border-transparent","transition-colors duration-200 ease-out","h-full w-full","outline-none focus:outline-none focus:ring-0",a),children:[l.jsxs("div",{className:"flex items-center gap-2",children:[s&&l.jsx(mS,{size:16,className:"text-foreground"}),l.jsx("span",{className:"text-foreground text-sm",children:e?r(e):n})]}),i]})})})}const ate=({hour:e,minute:t})=>`${e%12||12}:${t.toString().padStart(2,"0")} ${e>=12?"PM":"AM"}`,ote=e=>{const t=e.trim().match(/^((?:0?[1-9]|1[0-2])):([0-5]\d)\s*([ap]m)$/i);if(!t||t.length!==4)return null;const n=parseInt(t[1],10),r=parseInt(t[2],10);if(isNaN(n)||isNaN(r))return null;const s=t[3]?.toLowerCase();return s==="pm"&&n!==12?{hour:n+12,minute:r}:s==="am"&&n===12?{hour:0,minute:r}:{hour:n,minute:r}},s6t=Array.from({length:48},(e,t)=>({hour:Math.floor(t/2),minute:t%2*30}));function a6t({value:e,onChange:t,placeholder:n="Select time",variant:r="default"}){const[s,a]=f.useState(""),[o,i]=f.useState(!1),c=f.useRef(null),u=s.trim()!==""&&!ote(s),d=e?ate(e):n,m=f.useMemo(()=>s6t.map(x=>({key:`${x.hour}:${x.minute}`,label:ate(x),value:x})),[]),h=()=>{const x=ote(s);x&&t(x),a("")},p=x=>{t(x),a(""),i(!1)},g=()=>{i(!o)},y=()=>{i(!o),setTimeout(()=>{c.current&&c.current.focus()},0)},v=(()=>{switch(r){case"offsetPlus":return"bg-offsetPlus";case"default":return"bg-offset";default:Qt(r)}})();return l.jsx("div",{className:"relative z-50 size-full",children:l.jsx(cU,{contentClassName:"rounded-xl min-w-[var(--radix-popper-anchor-width)]",isOpen:o,onOpen:()=>i(!0),onClose:()=>i(!1),placement:"bottom-start",matchTargetWidth:!0,content:l.jsx("div",{className:"p-xs scrollbar-subtle max-h-64 overflow-y-auto",children:m.map(x=>l.jsx("div",{role:"button",tabIndex:0,onClick:()=>p(x.value),className:B("px-sm text-foreground cursor-pointer rounded-lg py-1.5","hover:bg-offset"),children:l.jsx(D,{variant:"extraSmall",children:x.label})},x.key))}),children:l.jsxs("div",{role:"button",tabIndex:0,onClick:g,className:B(v,"text-foreground flex h-full w-full cursor-pointer items-center rounded-lg pl-4 pr-4 font-sans","border transition-colors duration-200 ease-out","outline-none focus:outline-none focus:ring-0","hover:border-subtler focus-within:border-subtler border-transparent",{"!border-negative":u}),children:[l.jsx("input",{ref:c,type:"text",value:s||d,placeholder:n,onChange:x=>a(x.target.value),onBlur:h,onClick:y,className:"w-full bg-transparent text-sm focus:outline-none"}),l.jsx(be,{size:"xs",icon:Zr,className:"right-sm pointer-events-none absolute text-inherit opacity-50"})]})})})}const C0=f.memo(({children:e})=>l.jsx("div",{className:"min-w-0 flex-1 rounded-md",children:e})),yy=f.memo(({options:e,value:t,onChange:n,isMobileStyle:r,variant:s="default"})=>{const a=X(),o=f.useMemo(()=>e.map(h=>({type:"default",text:h.label,onClick:()=>n(h.value),active:h.value===t,role:"menuitemradio"})),[n,e,t]),c=f.useMemo(()=>e.find(h=>h.value===t),[e,t])?.label||a.formatMessage({defaultMessage:"Select...",id:"724CrE1YuG"}),u=f.useMemo(()=>({className:"w-full"}),[]),d=f.useMemo(()=>({matchTargetWidth:!0,avoidPositionCollisions:!1}),[]),m=(()=>{switch(s){case"offsetPlus":return"";case"default":return"!bg-offset";default:Qt(s)}})();return l.jsx(C0,{children:l.jsx(en,{items:o,isMobileStyle:r,placement:"bottom",contentClassName:"w-full",boxProps:u,popoverProps:d,children:l.jsx(ye,{text:c,extraCSS:B("pl-4 pr-4 w-full !h-10 border-0 !outline-none !justify-start font-normal w-full",m),textClassName:"text-left text-foreground text-sm font-normal",fullWidth:!0,layout:"split",chevron:!0,chevronIcon:Zr})})})});yy.displayName="FormSelect";const uU=f.memo(({schedule:e,onScheduleChange:t,variant:n="default"})=>{const{formatMessage:r}=X(),{isMobileStyle:s}=Ce(),a=f.useMemo(()=>new Date(e.year,e.month,e.day,e.hour,e.minute),[e.year,e.month,e.day,e.hour,e.minute]),{kind:o}=e,i=o==="ONCE",c=o==="WEEKLY",u=o==="MONTHLY"||o==="YEARLY",d=o==="YEARLY",m=f.useCallback(b=>{t({kind:b})},[t]),h=f.useCallback(b=>{t({dayOfWeek:parseInt(b,10)})},[t]),p=f.useCallback(b=>{t({month:parseInt(b,10)})},[t]),g=f.useCallback(b=>{t({day:parseInt(b,10)})},[t]),y=f.useCallback(b=>{b&&t({day:b.getDate(),month:b.getMonth(),year:b.getFullYear()})},[t]),v=f.useCallback(b=>{t({hour:b.hour,minute:b.minute})},[t]),x=f.useMemo(()=>({hour:e.hour,minute:e.minute}),[e.hour,e.minute]);return l.jsxs("div",{className:"gap-md flex flex-col",children:[l.jsx(D,{variant:"tiny",color:"light",className:"select-none",children:r({defaultMessage:"Schedule",id:"hGQqkWwmJD"})}),l.jsxs("div",{className:"flex h-10 flex-wrap gap-3",children:[l.jsx(yy,{options:s5t,value:e.kind,onChange:m,isMobileStyle:s,variant:n}),c&&l.jsx(yy,{options:a5t,value:String(e.dayOfWeek),onChange:h,isMobileStyle:s,variant:n}),d&&l.jsx(yy,{options:i5t,value:String(e.month),onChange:p,isMobileStyle:s,variant:n}),u&&l.jsx(yy,{options:o5t,value:String(e.day),onChange:g,isMobileStyle:s,variant:n}),i&&l.jsx(C0,{children:l.jsx(xSe,{value:a,onChange:y,variant:n})}),l.jsx(C0,{children:l.jsx(a6t,{value:x,onChange:v,variant:n})})]})]})});uU.displayName="ScheduleSelect";const o6t=({selectedModel:e,onModelChange:t,variant:n="default"})=>{const r="task-modal-model-selector",s=e||fe.PRO,{isMobileStyle:a}=Ce(),{selectOptions:o}=Wxe({reason:r,selectedSearchMode:ae.SEARCH,currentModel:s,onModelSelect:m=>{t?.(m)}}),i=f.useMemo(()=>o.map(m=>({type:"default",text:m.label,onClick:()=>t?.(m.value),active:m.value===s})),[o,s,t]),u=f.useMemo(()=>o.find(m=>m.value===s),[o,s])?.label||"Select model...",d=(()=>{switch(n){case"offsetPlus":return"bg-offsetPlus";case"default":return"!bg-offset";default:Qt(n)}})();return l.jsx(en,{items:i,isMobileStyle:a,placement:"bottom",contentClassName:"w-full",boxProps:{className:"w-full"},popoverProps:{matchTargetWidth:!0,avoidPositionCollisions:!1},children:l.jsx(ye,{text:u,extraCSS:B("pl-4 pr-4 w-full !h-10 border-0 !outline-none !justify-start font-normal w-full",d),textClassName:"text-left text-foreground text-sm font-normal",fullWidth:!0,layout:"split",chevron:!0,chevronIcon:Zr})})};function i6t(e,t){if(e.includes(t)){let n=e.filter(r=>r!==t);return t==="web"&&e.includes("crunchbase")&&(n=n.filter(r=>r!=="crunchbase")),n}else{const n=[...e];return t==="crunchbase"&&!n.includes("web")&&n.push("web"),n.push(t),n}}const bSe=({sources:e,onChange:t,variant:n="default"})=>{const[r,s]=f.useState(!1),a=f.useCallback(o=>{const i=i6t(e,o);t(i)},[t,e]);return l.jsx(qxe,{isOpen:r,onOpen:()=>s(!0),onClose:()=>s(!1),selectedSources:e,onSourcesChange:a,variant:"button",buttonVariant:n,hiddenSources:[ki.org,ki.google_drive,ki.onedrive,ki.sharepoint,ki.my_files]})};bSe.displayName="TaskSourcesSelector";const dU=f.memo(({searchModel:e,onSearchModelChange:t,sources:n,onSourcesChange:r,variant:s="default"})=>{const a=wa[e]??ae.SEARCH,{hasActiveSubscription:o}=Nt();return l.jsx("div",{className:"flex w-full flex-col gap-2",children:l.jsxs("div",{className:"flex gap-6",children:[o&&l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(D,{variant:"tiny",color:"light",className:"select-none",children:l.jsx(he,{defaultMessage:"Mode",id:"mrOnjMzgC4"})}),l.jsx("div",{className:"h-full w-fit",children:l.jsx(bF,{value:e,onChange:t,layoutKey:"task-modal",className:"h-full",variant:s,buttonSize:"regular"})})]}),o&&a===ae.SEARCH&&l.jsxs("div",{className:"flex min-w-[100px] flex-1 flex-col gap-2",children:[l.jsx(D,{variant:"tiny",color:"light",className:"select-none",children:l.jsx(he,{defaultMessage:"Model",id:"rhSI1/3g21"})}),l.jsx(C0,{children:l.jsx(o6t,{selectedModel:e,onModelChange:t,variant:s})})]}),o&&l.jsxs("div",{className:"flex min-w-[100px] flex-col gap-2",children:[l.jsx(D,{variant:"tiny",color:"light",className:"select-none",children:l.jsx(he,{defaultMessage:"Sources",id:"fhwTpAcBLC"})}),l.jsx(C0,{children:l.jsx(bSe,{sources:n,onChange:r,variant:s})})]})]})})});dU.displayName="QuerySearchConfigurationSelector";const l6t={settings_create:!0,settings_edit:!0,settings_suggest:!0,settings_primer:!0,task_widget:!0,discover_task_widget:!0,thread_dropdown:!0,typeahead_create:!0,notifications_panel:!0,router:!0};function kj(e){return e in l6t}const c6t={settings_create:!0,settings_edit:!0,settings_suggest:!0,finance_home_page:!0,finance_asset_page:!0};function ite(e){return e in c6t}const u6t={settings_create:!0,settings_edit:!0,typeahead_create:!0,thread_create:!0,suggestions_dropdown:!0,notifications_panel:!0,typeahead_edit:!0,shortcut_widget:!0,settings_paste:!0,try_assistant_suggestions:!0,thread_upsell_create:!0};function lte(e){return e in u6t}const d6t={created:!0,updated:!0,deleted:!0,paused:!0,resumed:!0};function _Se(e){return e in d6t}const f6t={created:!0,updated:!0,deleted:!0,paused:!0,resumed:!0};function m6t(e){return e in f6t}const h6t={created:!0,updated:!0,deleted:!0,copied:!0};function p6t(e){return e in h6t}const g6t=()=>{const{formatMessage:e}=X();return{getErrorMessage:n=>{switch(n?.detail?.error_code){case eY.TASK_LIMIT_EXCEEDED:return e({defaultMessage:"You have reached the maximum of number of active tasks of this type for your subscription level.",id:"3H43PMJpfD"});case eY.SHORTCUT_NAME_ALREADY_EXISTS:return e({defaultMessage:"A shortcut with this name already exists. Please choose a different name.",id:"GpnXJDWEkN"});default:return e({defaultMessage:"Something went wrong. Please try again.",id:"W/5hwrn09m"})}}}};function wSe({reason:e,source:t,onSuccess:n,onError:r}){const s=gt(),{trackEvent:a}=Te(),{getErrorMessage:o}=g6t(),i=f.useCallback((g,y)=>{s.invalidateQueries({queryKey:s_()}),y&&s.invalidateQueries({queryKey:FO(y)}),n?.(g)},[s,n]),c=f.useCallback((g,y)=>{kj(t)&&_Se(g)&&a("task modal action",{source:t,action:g}),i(g,y)},[t,a,i]),u=Mt({mutationFn:g=>Ylt({payload:g,reason:e}),onSuccess:g=>c("created",g.task_id),onError:g=>r(o(g))}),d=Mt({mutationFn:({id:g,payload:y})=>QP({taskId:g,payload:y,reason:e}),onSuccess:g=>c("updated",g.task.task_id),onError:g=>r(o(g))}),m=Mt({mutationFn:({id:g,newStatus:y})=>QP({taskId:g,payload:{status:y},reason:e}),onSuccess:g=>{c(g.task.status==="PAUSED"?"paused":"resumed",g.task.task_id)},onError:g=>r(o(g))}),h=Mt({mutationFn:g=>Xpe({taskId:g,reason:e}),onSuccess:()=>c("deleted"),onError:g=>r(o(g))}),p=u.isPending||d.isPending||m.isPending||h.isPending;return{createMutation:u,updateMutation:d,toggleMutation:m,deleteMutation:h,isMutationLoading:p,invalidateAndClose:i}}const y6t=e=>({id:e.id,title:e.title,prompt:e.prompt,schedule:v2(e.scheduleInfo),searchModel:e.searchModel,sources:e.sources||["web"]}),cte=(e={})=>e.prefill?e.prefill:e.initial?y6t(e.initial):{...IBe(),searchModel:fe.PRO},vy=({text:e,onClick:t,variant:n="secondary",disabled:r=!1})=>l.jsx(ye,{text:e,onClick:t,disabled:r,testId:`task-modal-${e.toLowerCase()}-button`,variant:n==="secondary"?"common":"inverted",extraCSS:B("min-w-[100px]")}),v6t=(e,t)=>e.schedule.kind==="ONCE"&&new Date(e.schedule.year,e.schedule.month,e.schedule.day,e.schedule.hour,e.schedule.minute)<=new Date(Date.now())?{ok:!1,message:t({defaultMessage:"Please schedule this task for a future time.",id:"loBg9tvLRE"})}:{ok:!0};function fU({open:e,onClose:t,onSuccess:n,initial:r,prefill:s,errorMessage:a,source:o}){const i="task-modal",{formatMessage:c}=X(),{trackEvent:u}=Te(),{configuredModel:d}=Sn();f.useEffect(()=>{e&&u("task modal opened",{source:o})},[e,o,u]);const[m,h]=f.useState(a),{createMutation:p,updateMutation:g,deleteMutation:y,isMutationLoading:v,invalidateAndClose:x}=wSe({reason:i,source:o,onSuccess:f.useCallback(k=>{n?.(k),t?.()},[n,t]),onError:h}),b=f.useRef(r?lB(r):void 0);f.useEffect(()=>{e&&(b.current=r?lB(r):void 0)},[e,r]);const[_,w]=f.useState(()=>cte({initial:r,prefill:s})),S=f.useMemo(()=>wa[_.searchModel]??ae.SEARCH,[_.searchModel]);f.useEffect(()=>{h(e?a:void 0)},[e,a]),f.useEffect(()=>{e&&w(cte({initial:r,prefill:s}))},[e,r,s,d]),f.useEffect(()=>{const k=Rl(S);w(O=>({...O,searchModel:k}))},[S]);const C=!!b.current,E=b.current?.status==="PAUSED",M=b.current?.status==="COMPLETED",T=k=>w(O=>({...O,...k})),I=k=>w(O=>({...O,schedule:{...O.schedule,...k}})),j=()=>{h(void 0);const k=v6t(_,c);if(!k.ok){h(k.message);return}C?g.mutate({id:b.current.id,payload:{task_name:_.title,prompt:_.prompt,schedule:Ry(_.schedule),status:"ACTIVE",model_preference:_.searchModel,sources:_.sources}},{onSuccess:()=>{u("task modal action",{source:o,action:"updated"}),x("updated",b.current.id)}}):p.mutate({task_id:_.id,task_name:_.title,prompt:_.prompt,schedule:Ry(_.schedule),model_preference:_.searchModel,sources:_.sources},{onSuccess:()=>{u("task modal action",{source:o,action:"created"})}})},N=f.useMemo(()=>{if(!C)return!0;const k=_.prompt!==b.current?.prompt,O=b.current.scheduleInfo,L=Ry(_.schedule),F=!ua(L.rrule,O.rrule)||!ua(L.tzid,O.tzid),U=_.schedule.kind==="ONCE"&&L.start_at!==O.start_at,V=_.searchModel!==b.current?.searchModel,W=!ua(_.sources||["web"],b.current?.sources||["web"]);return k||(F||U||V)||W},[C,_,b]),{variation:P,loading:R}=Mf(!1);return R?null:l.jsx(rn,{isOpen:e,onClose:t,title:c(P?{defaultMessage:"Automation",id:"Fn4YKyl4lm"}:{defaultMessage:"Task",id:"0wJ7N+noSq"}),titleTextVariant:"base",modalContentClassname:"!pb-4 md:!pb-4",children:l.jsxs("div",{className:"flex flex-col gap-4",children:[l.jsx(eU,{trigger:{type:lt.SCHEDULED,schedule:_.schedule},prompt:_.prompt,onPromptChange:k=>T({prompt:k}),error:m}),l.jsx(uU,{schedule:_.schedule,onScheduleChange:I}),l.jsx(dU,{searchModel:_.searchModel,onSearchModelChange:k=>T({searchModel:k}),sources:_.sources||["web"],onSourcesChange:k=>T({sources:k})}),l.jsxs(z,{variant:"background",className:"mt-md pt-md -mx-md px-md flex items-center justify-between border-t",children:[C&&l.jsxs("div",{className:"flex gap-4",children:[!M&&l.jsx(vy,{text:c(E?{defaultMessage:"Resume",id:"3y9DGgura7"}:{defaultMessage:"Pause",id:"tFFMkFDBMO"}),onClick:()=>g.mutate({id:b.current.id,payload:{status:E?"ACTIVE":"PAUSED"}},{onSuccess:()=>{const k=E?"resumed":"paused";u("task modal action",{source:o,action:k}),x(k,b.current.id)}}),disabled:v}),l.jsx(vy,{text:c({defaultMessage:"Delete",id:"K3r6DQW7h+"}),onClick:()=>y.mutate(b.current.id),disabled:v})]}),l.jsxs("div",{className:"ml-auto flex gap-4",children:[l.jsx(vy,{text:c({defaultMessage:"Cancel",id:"47FYwba+bI"}),onClick:()=>t?.()}),l.jsx(vy,{text:c({defaultMessage:"Save",id:"jvo0vs3nF0"}),variant:"primary",disabled:v||!_.prompt||!N,onClick:j})]})]})]})})}const x6t=Object.freeze(Object.defineProperty({__proto__:null,FormButton:vy,default:fU},Symbol.toStringTag,{value:"Module"}));var ute={};const b6t=()=>l.jsxs(Ln,{className:"flex w-full items-center justify-between gap-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"bg-offsetPlus size-4 shrink-0 rounded"}),l.jsx("div",{className:"bg-offsetPlus h-4 w-32 rounded"})]}),l.jsx("div",{className:"bg-offsetPlus h-4 w-20 rounded"})]}),SSe=A.memo(({data:e})=>{const{$t:t}=X(),{suggested_prompt:n,suggested_schedule:r,widget_uuid:s}=e,a=f.useMemo(()=>({id:s,title:"",prompt:n,schedule:v2(r),searchModel:fe.PRO}),[n,r,s]),o=hr(),i=f.useCallback(()=>{if(!ute.NEXT_PUBLIC_IS_SIDECAR_BUILD)throw new Error("handleOpenTaskFromSidecar can only be called in sidecar mode");o.openTab({url:`${window.location.origin}${Yt.Tasks.href}`})},[o]),[c,u]=f.useState(!1),[d,m]=f.useState(null),[h,p]=f.useState(!1),g=f.useCallback(()=>{u(!0)},[]);f.useEffect(()=>{if(!d)return;const N=setTimeout(()=>{m(null)},2e3);return()=>clearTimeout(N)},[d]);const y=X(),{data:v,isLoading:x}=Ke({queryKey:FO(s),queryFn:()=>eE({taskId:s,reason:"task-widget"})}),b=f.useMemo(()=>{if(!v)return null;const N=v2(v.scheduleInfo);return{kind:jBe(N.kind,y),friendly:PBe(N,y),isRecurring:N.kind!=="ONCE"}},[v,y]),_=f.useMemo(()=>{if(!d)return null;const N=d==="created"?l.jsx(he,{defaultMessage:"Task created",id:"991WgJt61N"}):d==="updated"?l.jsx(he,{defaultMessage:"Task updated",id:"sQGGdcVjgL"}):d==="deleted"?l.jsx(he,{defaultMessage:"Task deleted",id:"kGP3l1jr/4"}):d==="paused"?l.jsx(he,{defaultMessage:"Task paused",id:"Ryhxeg2OIZ"}):l.jsx(he,{defaultMessage:"Task resumed",id:"fqAqWnF85q"});return l.jsx(_e.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2,ease:Jn},children:l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(jTe,{className:"text-super",size:16}),l.jsx(D,{variant:"small",color:"super",className:"truncate",children:N})]})},"confirmed")},[d]),{variation:w,loading:S}=Mf(!1),C=f.useCallback(()=>{p(!1)},[]),E=f.useCallback(()=>p(!0),[]),M=f.useMemo(()=>t(w?{defaultMessage:"Automation",id:"Fn4YKyl4lm"}:{defaultMessage:"Task",id:"0wJ7N+noSq"}),[t,w]),T=f.useMemo(()=>l.jsx(mr,{size:12}),[]),I=f.useCallback(()=>{u(!1),p(!1)},[]),j=f.useCallback(N=>{u(!1),p(!1),m(N)},[]);return S?null:l.jsx(di,{widgetType:"task",widgetName:"task",widgetSize:"mini",children:l.jsxs(l.Fragment,{children:[l.jsx(z,{variant:"offset",className:"p-md group relative flex h-14 items-center justify-between gap-2 rounded-lg",onMouseEnter:E,onMouseLeave:C,children:l.jsx(st,{mode:"wait",children:x?l.jsx(b6t,{}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex min-w-0 shrink items-center gap-2",children:[l.jsx(Ire,{size:16,className:"text-quiet shrink-0"}),l.jsx("div",{className:"flex w-full min-w-0 flex-col items-start",children:v?l.jsx(D,{variant:"small",color:"default",className:"w-full truncate",children:v.prompt}):l.jsxs(l.Fragment,{children:[l.jsx(D,{variant:"small",color:"default",className:"w-full truncate",children:n}),l.jsx(D,{variant:"tinyRegular",color:"light",className:"truncate",children:l.jsx(he,{defaultMessage:"Create a task to get this sent automatically.",id:"1AmBIpC9N9"})})]})})]}),ute.NEXT_PUBLIC_IS_SIDECAR_BUILD?l.jsx(ke,{size:"tiny",icon:uc,onClick:i}):l.jsx(st,{mode:"wait",children:_||(b?l.jsx("div",{className:"flex min-w-0 shrink-0 items-center gap-1.5",children:h&&v?l.jsx(Gwe,{onEdit:g}):l.jsxs(l.Fragment,{children:[b.isRecurring&&l.jsx(OTe,{size:16,className:"shrink-0"}),l.jsx(D,{className:"truncate",variant:"small",children:b.kind}),l.jsx(D,{className:"truncate",variant:"small",color:"light",children:b.friendly})]})}):l.jsx(_e.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2,ease:Jn},children:l.jsx(ye,{text:M,leadingComponent:T,size:"small",onClick:g})},"default"))})]})})}),l.jsx(Jd,{children:l.jsx(fU,{source:"task_widget",open:c,prefill:v?void 0:a,initial:v??void 0,onClose:I,onSuccess:j})})]})})});SSe.displayName="TaskWidget";const CSe=A.memo(e=>{const{data:t}=e,{menuItems:n}=Jp();return l.jsx(di,{widgetType:"time",widgetName:"time",widgetSize:"full",children:l.jsxs(z,{className:"flex w-full",children:[l.jsx(D,{children:l.jsx(z,{className:"mr-md pr-md border-r font-mono text-4xl",children:t.time})}),l.jsxs("div",{children:[l.jsx(D,{variant:"smallBold",children:t.date}),l.jsx(D,{variant:"small",color:"light",children:t.location?`${t.location}`:null})]}),n&&n.length>0&&l.jsx("div",{className:"-mr-sm -mt-sm flex grow justify-end",children:l.jsx("div",{children:l.jsx(Wn.Menu,{menuItems:n})})})]})})});CSe.displayName="TimeWidget";const _6t=e=>{const t=yn(e);if(!t)return 0;const n=parseInt(t);return isNaN(n)?1:n},w6t=(e,t)=>{qt(e,t.toString(),{expires:365})},S6t=({cueKey:e,impressionsLimit:t,enabled:n})=>{const[r,s]=f.useState(!1),[a,o]=f.useState(0);return f.useEffect(()=>{if(!n){s(!1);return}const i=_6t(e);o(i),i<t&&(s(!0),w6t(e,i+1),o(i+1))},[e,t,n]),f.useMemo(()=>({shouldShow:r,currentCount:a}),[r,a])},C6t={xs:"px-xs py-xxs",sm:"px-sm py-xs"},E6t=e=>{switch(e){case"primary":return{background:"!bg-super",titleText:"!text-inverse",subtitleText:"!text-inverse mt-xs opacity-90",arrow:"fill-super",borderRadius:"rounded-xl"};case"common":return{background:"!bg-inverse dark:!bg-offsetPlus",titleText:"!text-light font-semibold",subtitleText:"!text-light mt-xxs opacity-90",arrow:"fill-foreground dark:fill-offsetPlus",borderRadius:"rounded"};default:return{background:"!bg-inverse dark:!bg-offsetPlus",titleText:"!text-light font-semibold",subtitleText:"!text-light mt-xxs opacity-90",arrow:"fill-foreground dark:fill-offsetPlus",borderRadius:"rounded"}}},ESe=A.memo(({cueKey:e,title:t,subtitle:n,children:r,enabled:s,impressionsLimit:a=1,variant:o="primary",size:i="xs",placement:c="bottom",sideOffset:u=10,className:d})=>{const[m,h]=f.useState(!1),{shouldShow:p}=S6t({cueKey:e,impressionsLimit:a,enabled:s}),g=E6t(o),y=p&&!m,v=()=>!t&&!n?null:l.jsxs("div",{className:B(C6t[i],d),children:[t&&l.jsx(D,{variant:"tiny",className:g.titleText,children:t}),n&&l.jsx(D,{variant:"tiny",className:g.subtitleText,children:n})]}),x=f.useCallback(()=>{h(!0)},[]),b=f.useMemo(()=>({removeScroll:!1,animationClassName:"z-[2000]"}),[]);return l.jsx(ci,{content:v(),contentClassName:g.background,arrowClassName:g.arrow,borderRadius:g.borderRadius,isOpen:s&&y,onClose:x,placement:c,sideOffset:u,overlayProps:b,children:r})});ESe.displayName="Cue";const MSe=A.memo(e=>{const{data:t}=e,{duration_seconds:n}=t,{menuItems:r}=Jp(),{result:s}=wn(),a=s?.uuid,o=f.useMemo(()=>`timer_widget_state_${a}_${n}`,[a,n]),[i,c]=f.useState(!1),[u,d]=f.useState(!1),[m,h]=f.useState(null),[p,g]=f.useState(n*1e3),[y,v]=f.useState(!0),[x,b]=f.useState(!1),_=f.useRef(void 0),w=f.useRef(void 0),S=f.useRef(!1),C=f.useRef(null);f.useEffect(()=>{if(!a)return;const R=Ve.getItem(o);if(R)try{const k=JSON.parse(R),O=Date.now();if(k.status==="expired"){d(!0),g(0),h(null);return}if(k.pausedAt&&k.remainingMillis!==void 0)c(!0),g(k.remainingMillis),h(null);else if(k.endTime){const L=k.endTime-O;if(L>0)h(k.endTime),g(L),c(!1);else{g(0),h(null),d(!0);const F={status:"expired",endTime:0,remainingMillis:0};Ve.setItem(o,JSON.stringify(F))}}}catch{Ve.removeItem(o)}else{const k=Date.now()+n*1e3;h(k),c(!1)}},[o,n,a]),f.useEffect(()=>{if(!a||u)return;const R=i?{status:"paused",endTime:0,pausedAt:Date.now(),remainingMillis:p}:{status:"running",endTime:m||Date.now()+p};Ve.setItem(o,JSON.stringify(R))},[p,i,m,o,u,a]);const E=f.useCallback(()=>{if(S.current||u)return;S.current=!0,g(0),h(null),d(!0),b(!0);const R={status:"expired",endTime:0,remainingMillis:0};Ve.setItem(o,JSON.stringify(R)),!y&&C.current&&C.current.play().catch(()=>{})},[o,u,y]),M=f.useCallback(()=>{if(!i&&m){const R=Date.now(),k=m-R;k>0?(g(k),_.current=requestAnimationFrame(M)):E()}},[i,m,E]);f.useEffect(()=>{if(!i&&m&&p>0&&!u){_.current=requestAnimationFrame(M);const R=m-Date.now();R>0&&(w.current=window.setTimeout(E,R))}return()=>{_.current&&cancelAnimationFrame(_.current),w.current&&clearTimeout(w.current)}},[i,m,p,u,M,E]),f.useEffect(()=>{const R=()=>{if(!document.hidden&&!i&&m){const k=Date.now(),O=m-k;O>0?g(O):E()}};return document.addEventListener("visibilitychange",R),()=>{document.removeEventListener("visibilitychange",R)}},[i,m,E]);const T=f.useCallback(()=>{if(!u)if(i){const R=Date.now()+p;h(R),c(!1)}else c(!0),h(null)},[u,i,p]),I=f.useCallback(()=>{_.current&&(cancelAnimationFrame(_.current),_.current=void 0),w.current&&(clearTimeout(w.current),w.current=void 0),S.current=!1;const R=Date.now()+n*1e3;d(!1),c(!1),g(n*1e3),h(R)},[n]),j=f.useCallback(()=>{v(R=>!R)},[]),N=f.useCallback(()=>{b(!1),C.current&&(C.current.pause(),C.current.currentTime=0)},[]),P=f.useMemo(()=>{const R=Math.ceil(p/1e3),k=Math.floor(R/3600),O=Math.floor(R%3600/60),L=Math.floor(R%60),F=O.toString().padStart(2,"0"),U=L.toString().padStart(2,"0");return k>0?`${k}:${F}:${U}`:`${F}:${U}`},[p]);return l.jsx(di,{widgetType:"timer",widgetName:"timer",widgetSize:"full",children:l.jsxs(z,{className:B("relative flex transition-all duration-200",{"hover:scale-[1.01]":x}),children:[x&&l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"-m-md absolute inset-0 z-20 cursor-pointer rounded-xl",onClick:N,title:"Click anywhere to stop alarm","aria-label":"Stop alarm"}),l.jsx("div",{className:"-m-md to-attention/20 from-negative/20 absolute inset-0 animate-pulse rounded-xl bg-gradient-to-br"})]}),l.jsxs("div",{className:"relative z-10 flex w-full items-center",children:[l.jsxs(z,{className:"gap-sm flex items-center",children:[l.jsx(ye,{variant:"primaryGhost",size:"small",onClick:T,icon:i?sre:rre,disabled:u,pill:!0}),l.jsx(ye,{variant:"primaryGhost",size:"small",onClick:I,icon:LTe,"aria-label":"Restart timer",disabled:x,pill:!0})]}),l.jsx(D,{className:"flex-1",children:l.jsx(z,{className:`pl-lg font-mono text-2xl ${x?"text-negative":""}`,children:P})}),l.jsxs("div",{className:"gap-sm flex items-center",children:[l.jsx(ESe,{cueKey:`timer-unmute-${a}`,title:"Tap to unmute",enabled:y&&!u,placement:"top",sideOffset:8,variant:"common",size:"xs",children:l.jsx(ye,{variant:"primaryGhost",size:"small",onClick:j,icon:y?are:ore,disabled:u,pill:!0})}),r&&r.length>0&&l.jsx(Wn.Menu,{menuItems:r})]})]}),l.jsx("audio",{ref:C,src:"https://r2cdn.perplexity.ai/Hole_In_One.wav?v=1",preload:"auto",style:{display:"none"},loop:!0})]})})});MSe.displayName="TimerWidget";const TSe=A.memo(({day:e,icon:t,high:n,low:r,selected:s})=>l.jsxs("div",{className:"relative col-span-1",children:[s&&l.jsx("div",{className:"-inset-sm right-md absolute",children:l.jsx("div",{className:"absolute inset-0 rounded-md bg-white opacity-10"})}),l.jsxs("div",{className:"relative flex flex-col items-start",children:[l.jsx(D,{color:"white",children:l.jsx(xt,{icon:t,className:"text-xl"})}),l.jsx(D,{variant:"smallBold",color:"white",children:e}),l.jsxs("div",{className:"mt-xs gap-x-xs flex",children:[l.jsx(D,{variant:"smallCaps",color:"white",className:"gap-x-two flex",children:l.jsxs("span",{children:[n,""]})}),l.jsx(D,{variant:"smallCaps",color:"white",className:"gap-x-two flex opacity-75",children:l.jsxs("span",{children:[r,""]})})]})]})]}));TSe.displayName="ForecastItem";const dte=e=>e.time,fte=e=>e.temp,M6t="white",mte="white",YN="rgba(255, 255, 255, 0.5)",hte="rgba(255, 255, 255, 0.3)",pte="font-mono text-[11px]",Jg={top:30,right:0,bottom:5,left:0},T6t=100,k6t=35,N6t=40,mU=130,kSe=A.memo(({forecast:e,activeDay:t,isMetric:n})=>{const{locale:r}=X(),s=f.useMemo(()=>e.map(C=>C?.hour?.map(E=>({time:new Date(E.time),temp:n?E.temp_c:E.temp_f}))),[e,n]),a=f.useMemo(()=>Ll(s.flat(),fte),[s]),o=f.useMemo(()=>s[t],[t,s]),i=f.useRef(null),{width:c,height:u}=$2e(i),d=c/T6t,{xRange:m,yRange:h}=$1({width:c,height:u,margin:Jg,maxYLabelWidth:k6t}),p=f.useMemo(()=>y1({range:m,domain:Ll(o,dte),round:!0}),[o,m]),g=u/N6t,y=f.useMemo(()=>Ah({range:h,domain:a,nice:!0,round:!0}),[h,a]),v=f.useMemo(()=>Cf().x(C=>p(dte(C))).y(C=>y(fte(C))).curve(nut),[p,y]),x=f.useMemo(()=>v(o),[v,o]),b=f.useCallback(C=>`${C}`,[]),_=f.useCallback(C=>typeof C=="number"?C.toString():C.toLocaleString(r,{hour:"numeric",minute:"numeric",hour12:!0}).replace(":00",""),[r]),w=f.useCallback((C,E,M)=>({className:pte,fill:mte,dx:E===0?"-0.3em":E===M.length-1?"0.3em":"0",dy:"0.3em",textAnchor:E===0?"start":E===M.length-1?"end":"middle"}),[]),S=f.useMemo(()=>({className:pte,textAnchor:"start",dx:"0.75em",dy:"-0.5em",fill:mte}),[]);return l.jsx("div",{className:"relative",ref:i,style:{height:mU},children:l.jsxs(H1,{width:c,height:u,children:[l.jsx(Hw,{orientation:Hs.bottom,scale:p,top:u,stroke:YN,hideAxisLine:!0,numTicks:d,tickStroke:hte,tickLabelProps:w,tickFormat:_}),l.jsx(Hw,{orientation:Hs.left,left:Jg.left,hideAxisLine:!0,tickFormat:b,scale:y,stroke:YN,tickStroke:hte,hideTicks:!0,tickLabelProps:S,numTicks:g}),l.jsx(B1,{left:Jg.left,scale:y,width:c-Jg.right-Jg.left*2,strokeDasharray:"2,2",stroke:YN,pointerEvents:"none",numTicks:g}),l.jsx("path",{d:x,stroke:M6t,strokeWidth:2,fill:"none",strokeLinecap:"round",shapeRendering:"geometricPrecision"})]})})});kSe.displayName="HourlyTemperature";const A6t=Object.freeze(Object.defineProperty({__proto__:null,HOURLY_TEMPERATURE_HEIGHT:mU,HourlyTemperature:kSe},Symbol.toStringTag,{value:"Module"}));function NSe(){const[e,t]=f.useState(!1),n=fp(),r=f.useCallback(s=>{qt(eW,s.toString()),t(s)},[t]);return f.useEffect(()=>{const s=yn(eW);t(s==="true"||s===void 0&&n!=="US")},[n]),f.useMemo(()=>({prefersMetric:e,setPrefersMetric:r}),[e,r])}const P6t=ge(async()=>{const{HourlyTemperature:e}=await oe(async()=>{const{HourlyTemperature:t}=await Promise.resolve().then(()=>A6t);return{HourlyTemperature:t}},void 0);return{default:e}},{loading:()=>l.jsx("div",{style:{height:mU}})}),ASe=A.memo(e=>{const{$t:t}=X(),{prefersMetric:n,setPrefersMetric:r}=NSe(),s=n,[a,o]=f.useState(0),[i,c]=f.useState(!1),u=e,{menuItems:d}=Jp(),{openModal:m}=_t(),{permissionStatus:h}=Pp(),{submitQuery:p}=Ta(),{trackEvent:g}=Te(),{locale:y}=X(),{value:v}=ZO({flag:"weather-provider",defaultValue:"weatherapi",subjectType:"visitor_id"}),x=f.useCallback(()=>{g("precise location modal opened",{origin:"weather_widget"}),m("locationPermissionModal",{onPermissionGranted:I=>{c(!1);const j=Sa();p({rawQuery:"weather",copilotOverride:!1,attachments:[],collection:null,newFrontendContextUUID:j,promptSource:"device_location_request",querySource:"device_location_request",deviceLocation:{latitude:I.coords.latitude,longitude:I.coords.longitude},shouldRedirectToBackendUUID:!0})},origin:"weather_widget"})},[g,m,p]);f.useEffect(()=>{h!==void 0&&h!=="granted"&&c(!0)},[h]);const b=f.useCallback(()=>{window.open(u.url||"https://www.accuweather.com/","_blank")},[u.url]);if(!u||!u.current||!u.location)return null;const{current:_,location:w,forecast:S}=u,C=S[0],E=_.condition?.icon,M=oS(AE,E)?s0[E]:S1.faSun,T="col-span-1";return l.jsx(di,{widgetType:"weather",widgetName:"weather_forecast",widgetSize:"full",children:l.jsxs(z,{className:"p-md relative select-none",children:[l.jsx(vw,{variant:a===0?_.condition?.icon:S[a].icon??"clear-day"}),l.jsxs(z,{className:"gap-md relative flex flex-col drop-shadow-sm",children:[l.jsxs("div",{className:"gap-x-lg flex",children:[l.jsx(z,{className:T,children:l.jsx("div",{className:"flex h-full items-center",children:l.jsxs(D,{className:"gap-x-md flex items-center",color:"white",children:[l.jsx(xt,{icon:M,className:"text-4xl"}),l.jsxs("div",{className:"flex items-baseline",children:[l.jsx("div",{className:"font-mono text-4xl",children:l.jsx(nu,{value:s?_.temp_c??0:_.temp_f??0,suffix:""})}),l.jsxs("div",{className:"ml-xs mt-two flex",children:[l.jsx("button",{onClick:()=>r(!1),className:"cursor-pointer appearance-none",children:l.jsx(D,{color:"white",className:s?"opacity-60":void 0,children:l.jsx("div",{className:"font-mono",children:"F"})})}),l.jsx("button",{onClick:()=>r(!0),className:"ml-xs cursor-pointer appearance-none",children:l.jsx(D,{color:"white",className:s?void 0:"opacity-60",children:l.jsx("div",{className:"font-mono",children:"C"})})})]})]})]})})}),l.jsxs(z,{className:T,children:[_.condition&&l.jsx(D,{variant:"section-title",color:"white",children:_.condition.text}),l.jsx("div",{className:"gap-x-sm flex",children:l.jsxs("div",{className:"gap-x-xs flex",children:[l.jsx(D,{variant:"smallCaps",color:"white",children:l.jsx(nu,{value:s?C.maxtemp_c??0:C.maxtemp_f??0,suffix:""})}),l.jsx(D,{variant:"smallCaps",className:"flex opacity-70",color:"white",children:l.jsx(nu,{value:s?C.mintemp_c??0:C.mintemp_f??0,suffix:""})})]})})]})]}),l.jsxs("div",{className:"gap-sm flex",children:[l.jsxs(z,{className:"flex flex-col items-start justify-center",children:[l.jsx("div",{className:"gap-sm relative flex items-center",children:l.jsxs(bc,{className:"gap-xs text-xs text-white",children:[l.jsx(fr,{id:"location-name",children:l.jsxs(D,{variant:"smallBold",className:"text-right",color:"white",children:[w.name,w.is_usa?w.region?`, ${w.region}`:"":`, ${w.country}`]})}),i&&l.jsx(fr,{id:"precise",children:l.jsx(ke,{onClick:x,size:"small",extraCSS:"!text-white hover:underline hover:opacity-100 !p-0 !h-0 decoration-white/50 decoration-offset-[4px] opacity-70 !font-normal",pill:!0,variant:"noBackground",text:t({defaultMessage:"Use Precise Location",id:"A+BBIFLIgr"})})})]})}),w.localtime&&l.jsx(D,{variant:"tiny",color:"white",className:"opacity-75",children:jKe(w.localtime,y)})]}),d&&d?.length>0&&l.jsx("div",{className:"absolute right-0 top-0",children:l.jsx(Wn.Menu,{buttonClass:"!text-white opacity-40 hover:opacity-100 hover:!bg-white/10",menuItems:d})})]})]}),l.jsx(z,{className:"mt-xl relative grid grid-cols-3 gap-x-4 gap-y-6 drop-shadow-sm md:grid-cols-6 md:gap-0",children:S.map((I,j)=>l.jsx("button",{onClick:()=>o(j),className:j!==a?"duration-150 hover:opacity-70 active:scale-[0.98]":"",children:l.jsx(TSe,{day:w9(I.dow??"",y),high:(s?I.maxtemp_c:I.maxtemp_f)??0,low:(s?I.mintemp_c:I.mintemp_f)??0,icon:s0[I.icon],selected:a===j})},j))}),l.jsx(z,{className:"mt-sm",children:l.jsx(P6t,{forecast:S,activeDay:a,isMetric:s})}),v==="accuweather"&&l.jsx(z,{className:"mt-lg flex cursor-pointer justify-end",onClick:b,children:l.jsxs(D,{variant:"micro",color:"white",className:"mt-xs gap-xs -mb-sm -mr-xs flex items-center opacity-65 hover:opacity-40",children:["The AccuWeather",l.jsx("sup",{className:"-ml-xs",children:""})," Forecast",l.jsx(be,{icon:ql,size:"xs"})]})})]})})});ASe.displayName="WeatherWidget";const PSe=()=>null,R6t=ge(()=>oe(()=>import("./index-Dlk1aEme.js"),__vite__mapDeps([127,1,2,3,5,4])),{loading:()=>l.jsx(PSe,{})}),I6t=ge(async()=>{const{CharityWidget:e}=await oe(async()=>{const{CharityWidget:t}=await import("./CharityWidget-K5XMlb5M.js");return{CharityWidget:t}},__vite__mapDeps([128,1,2,3,114,115,116,117,4,5]));return{default:e}},{loading:()=>l.jsx(PSe,{})}),RSe=A.memo(({widgetData:e,menuItems:t,tableCitationOffset:n})=>{const r=eg(e);return r?Kr(r).with({object:"CalculatorWidget"},s=>l.jsx(Wn,{menuItems:t,children:l.jsx(a2e,{...s})})).with({object:"FinanceWidget"},()=>null).with({object:"CrunchbaseWidget"},s=>l.jsx(Wn,{menuItems:t,variant:"noChrome",children:l.jsx(R6t,{...s})})).with({object:"PlaceWidget"},()=>null).with({object:"ShopifyWidget"},()=>null).with({object:"JobsWidget"},()=>null).with({object:"TimeWidget"},s=>l.jsx(Wn,{menuItems:t,children:l.jsx(CSe,{...s})})).with({object:"TimerWidget"},s=>l.jsx(Wn,{menuItems:t,children:l.jsx(MSe,{...s})})).with({object:"CurrencyExchangeWidget"},s=>l.jsx(Wn,{menuItems:t,className:"overflow-hidden !p-0",children:l.jsx(eMt,{...s})})).with({object:"WeatherWidget"},s=>l.jsx(Wn,{menuItems:t,variant:"noChrome",children:l.jsx(ASe,{...s})})).with({object:"TableWidget"},s=>l.jsx(Wn,{menuItems:t,variant:"noChrome",children:l.jsx(zwe,{tableData:s,citationOffset:n??0})})).with({object:"SportsEventsWidget"},s=>l.jsx(gy,{data:s})).with({object:"SportsIndvScheduleWidget"},s=>l.jsx(gy,{data:s})).with({object:"SportsStandingsWidget"},s=>l.jsx(gy,{data:s})).with({object:"SportsIndvEventsWidget"},s=>l.jsx(gy,{data:s})).with({object:"FlightStatusWidget"},s=>l.jsx(_2e,{data:s})).with({object:"CharityWidget"},s=>l.jsx(Wn,{menuItems:t,variant:"noChrome",children:l.jsx(I6t,{...s})})).with({object:"TaskWidget"},s=>l.jsx(SSe,{data:s})).with({object:"GenericFallbackWidget"},s=>l.jsx(S2e,{...s})).otherwise(()=>(ee.warn(new Error(`No PanelComponent found for livePanelType: ${r.object}`),{widgetData:e}),null)):null});RSe.displayName="LivePanel";const ISe=A.memo(({name:e,title:t,values:n,onEntityClick:r})=>{const{inFlight:s}=zt(),a=f.useCallback(c=>{s||r(c)},[s,r]),o=B("underline-thickness-thin underline-offset-2 cursor-pointer decoration-subtler hover:text-super hover:decoration-super group transition-colors duration-200 ease-in-out",{underline:!s}),i=f.useCallback(({content:c,href:u})=>{const d=u||(c.startsWith("http://")||c.startsWith("https://")?c:`https://${c}`);return l.jsxs(at,{href:d,target:"_blank",rel:"noopener",className:o,children:[c,l.jsx(D,{className:"ml-xs inline",color:"light",variant:"tiny",children:l.jsx(be,{icon:iv,size:"xs"})})]})},[o]);return l.jsx(Wn.Item,{name:e,title:t,value:n.map((c,u)=>l.jsx(j6t,{attributeValue:c,index:u,totalValues:n.length,entityStyling:o,handleEntityClick:a,renderLink:i},`${c.id}-${u}`))},e)});ISe.displayName="WikiPanelItem";const j6t=A.memo(({attributeValue:e,index:t,totalValues:n,entityStyling:r,handleEntityClick:s,renderLink:a})=>{const o=f.useMemo(()=>()=>l.jsx("div",{children:e.value}),[e.value]),i=f.useCallback(()=>s(e.value),[e.value,s]),c=f.useMemo(()=>l.jsxs(Zs,{fallback:o,children:[e.value&&l.jsx(l.Fragment,{children:e.clickable_entity?l.jsx("span",{className:r,onClick:i,children:e.value}):e.value}),e.detail&&l.jsxs("span",{className:"text-quiet ml-1",children:["(",e.source?a({content:e.detail,href:e.source}):e.detail,")"]})]}),[e.clickable_entity,e.detail,e.source,e.value,r,o,i,a]);return l.jsxs("span",{children:[c,t<n-1&&", "]})}),gte=0,O6t=A.memo(({data:e,isReadonly:t,submit:n,entryUUID:r})=>{const{$t:s}=X(),{title:a,subtitle:o,attributes:i,image_url:c,source_url:u}=e,{trackEvent:d}=Te(),{firstResult:{frontend_context_uuid:m}={}}=zt(),h=At(),p=i.length,[g,y]=f.useState(p),v=g===p,x=i.length>2,{menuItems:b}=Jp(),_=f.useCallback(()=>{d("click toggle on knowledge card",{newState:v?"collapsed":"expanded",entryUUID:r??"",type:e.type,id:e.source_url,name:e.title}),y(T=>T===gte?p:gte)},[d,v,p,r,e]),[w,{height:S}]=tc(),C=t,E=Sa(),M=f.useCallback(T=>{if(d("knowledge card link clicked",{entryUUID:r??"",type:e.type,id:e.source_url,name:e.title,label:"attributes",value:T}),n({fork:C,rawQuery:T,collection:null,newFrontendContextUUID:C?E:null,existingFrontendContextUUID:C?void 0:m,promptSource:"user",querySource:"entity_link"}),C){const I=new URLSearchParams({q:T,newFrontendContextUUID:E}),j=new URL(window.location.href);j.pathname="search/new",j.search=I.toString();const N=j.toString();h.push(N)}},[n,C,E,m,h,r,e,d]);return f.useEffect(()=>{d("knowledge card shown",{entryUUID:r??"",type:e.type,id:e.source_url,name:e.title})},[]),l.jsx("div",{className:"relative",children:l.jsx(_e.div,{animate:S>0?{height:S}:{},transition:{type:"spring",bounce:.2,duration:.2},className:"overflow-hidden",children:l.jsxs("div",{ref:w,className:"gap-md relative flex flex-col",children:[l.jsx("div",{className:"flex items-end justify-between",children:l.jsx(Wn.Title,{title:a,subtitle:o,image_url:c,href:u,links:e.links,entryUUID:r??"",data:e,children:l.jsx("div",{className:"flex items-start",children:l.jsx("div",{className:"gap-sm flex items-center",children:b&&b?.length>0&&l.jsx(Wn.Menu,{menuItems:b,buttonClass:"opacity-0 pointer-events-none"})})})})}),v&&l.jsx("div",{className:"gap-sm border-subtlest pt-md md:gap-x-md grid grid-cols-[auto,1fr] border-t",children:i.slice(0,g).map(T=>l.jsx(ISe,{name:T.key,title:T.title,values:T.values,onEntityClick:M},T.key))}),l.jsx("div",{children:x&&l.jsx("div",{className:"flex justify-end",children:l.jsx(ye,{variant:"border",fullWidth:!0,text:s(v?{defaultMessage:"Less",id:"mFYgAXM/x4"}:{defaultMessage:"More",id:"I5NMJ8llIi"}),size:"tiny",pill:!0,onClick:_,icon:v?gS:Zr,extraCSS:"pl-xs w-[76px]"})})})]})})})});function L6t(e){if(!e||!e.card_type)return null;const{primaryLink:t,otherLinks:n}=e.links.reduce((s,a)=>(a.type==="PRIMARY"&&!s.primaryLink?s.primaryLink=a:s.otherLinks.push(a),s),{primaryLink:null,otherLinks:[]}),r=e?.media_items?.[0]?.image??e?.image_urls?.[0]??"";return{source_url:t?.url??"",image_url:r,title:e?.title??"",subtitle:e.description??"",attributes:e.attributes??[],type:e.card_type,links:n}}const jSe=A.memo(({knowledgePanelData:e,isReadonly:t,submit:n,menuItems:r,entryUUID:s,className:a})=>{const o=f.useMemo(()=>e?L6t(e):null,[e]);return o?l.jsx(Wn,{menuItems:r,className:a,children:l.jsx(O6t,{data:o,submit:n,isReadonly:t,entryUUID:s??""})}):null});jSe.displayName="StaticPanel";function Nj(e){return e&&"is_widget"in e&&e.is_widget===!0}function D6t(e){return e&&"card_type"in e}function yte(e){return"is_code_interpreter"in e&&e.is_code_interpreter===!0&&e.is_image}const OSe=A.memo(({data:e,submit:t,isReadonly:n=!1,menuItems:r,tableCitationOffset:s,entryUUID:a})=>l.jsxs(l.Fragment,{children:[!yte(e)&&Nj(e)&&l.jsx(RSe,{widgetData:e,menuItems:r??ce,tableCitationOffset:s}),D6t(e)&&l.jsx(jSe,{knowledgePanelData:e,summaryData:null,submit:t,isReadonly:n,menuItems:r??ce,entryUUID:a??""}),yte(e)&&l.jsx(Ebe,{graphData:e})]}));OSe.displayName="ThreadEntryPanel";const X1=({reason:e})=>{const t=gt(),{searchTerm:n}=g9(),r=[Yd,{search_term:n??""}],s=est(),a=tde(),o=vo(),{mutate:i}=Mt({mutationKey:["removeWidget"],mutationFn:async({entryUUID:m,data:h})=>Nj(h)?IGe({backendUUID:m,url:h.url,rwToken:o,reason:e}):Promise.resolve(),onMutate:async({entryUUID:m,data:h})=>{await t.cancelQueries({queryKey:["results"]}),a(m,p=>Nj(h)?{...p,widget_data:p.widget_data?.filter(g=>g.url!==h.url)}:p)}}),{mutate:c}=Mt({mutationFn:async m=>{try{await ne.DELETE("/rest/thread/delete_all_threads",e,{body:{delete_all:m==="all"},timeoutMs:0})}catch(h){ee.error(h)}},onMutate:async m=>{await t.cancelQueries({queryKey:r}),await t.cancelQueries({queryKey:Jt});const h=t.getQueryData(r),p=t.getQueryData(Jt);return m==="all"?(t.setQueryData(Jt,g=>{const y=g.pages.map(v=>v.map(x=>({...x,thread_count:0})));return{...g,pages:y}}),t.setQueryData(r,g=>({...g,pages:[]}))):m==="standalone"&&t.setQueryData(r,g=>({...g,pages:g.pages.map(y=>y.filter(v=>v.collection?.uuid))})),{previousThreads:h,previousCollections:p}},onSettled:(m,h,p,g)=>{h?(t.setQueryData(r,g?.previousThreads),t.setQueryData(Jt,g?.previousCollections)):(t.invalidateQueries({queryKey:r}),t.invalidateQueries({queryKey:Jt}),t.invalidateQueries({queryKey:[Ol]}),t.invalidateQueries({queryKey:[j_]}),s())}}),{mutate:u}=Mt({mutationFn:async({entryUUID:m,callback:h})=>{h?.(),await RGe({entryUUID:m,rwToken:o,callback:h,reason:e})},onMutate:async({entryUUID:m,collectionSlug:h})=>{await t.cancelQueries({queryKey:r}),await t.cancelQueries({queryKey:Jt});const p=t.getQueryData(r),g=t.getQueryData(Jt);return t.setQueryData(r,y=>{y=y||{pages:[],pageParams:[]};const v=y.pages.map(x=>x.filter(b=>b.uuid!==m));return{...y,pages:v}}),h&&(t.setQueryData(Jt,y=>{y=y||{pages:[],pageParams:[]};const v=y.pages.map(x=>x.map(b=>b.slug===h?{...b,thread_count:b.thread_count-1}:b));return{...y,pages:v}}),t.setQueryData([Ol,{collection_slug:h.slice(-22)}],y=>{y=y||{pages:[],pageParams:[]};const v=y.pages.map(x=>x.filter(b=>b.uuid!==m));return{...y,pages:v}})),{previousThreads:p,previousCollections:g}},onSettled:(m,h,{entryUUID:p},g)=>{h?(t.setQueryData(r,g?.previousThreads),t.setQueryData(Jt,g?.previousCollections)):(t.invalidateQueries({queryKey:r}),t.invalidateQueries({queryKey:Jt}),t.invalidateQueries({queryKey:[Ol]}),t.invalidateQueries({queryKey:[j_]}),s(p))}}),{mutate:d}=Mt({mutationFn:async({entryUUIDs:m,callback:h})=>{h?.(),await PGe({entryUUIDs:m,rwToken:o,reason:e})},onMutate:async({entryUUIDs:m})=>{await t.cancelQueries({queryKey:r});const h=t.getQueryData(r),p=t.getQueryData(Jt);return t.setQueryData(r,g=>{g=g||{pages:[],pageParams:[]};const y=g.pages.map(v=>v.filter(x=>!m.includes(x.uuid)));return{...g,pages:y}}),{previousThreads:h,previousCollections:p}},onSettled:(m,h,{entryUUIDs:p},g)=>{h?t.setQueryData(r,g?.previousThreads):(t.invalidateQueries({queryKey:r}),t.invalidateQueries({queryKey:[j_]}),p.forEach(y=>s(y)))}});return f.useMemo(()=>({removeWidgetFromEntry:i,deleteAllThreads:c,deleteThread:u,deleteThreads:d}),[c,u,d,i])};function F6t({queryKey:e,pageSize:t,fetchFn:n,autoFetch:r,nextPageAccessor:s,initialData:a,args:o}){const i=f.useMemo(()=>o||[],[o]),c=f.useCallback(async({pageParam:u=1})=>{(!u||u<1)&&(u=1);const m={offset:(u-1)*t,...i};return n(m)},[i,n,t]);return fc({enabled:r,queryKey:e,queryFn:c,placeholderData:W0,refetchOnReconnect:"always",networkMode:"offlineFirst",initialData:a,initialPageParam:1,getNextPageParam:(u,d)=>s(u,d)})}const U6t=(e,t)=>e&&e[0]?.has_next_page?t.length+1:void 0,AHt=(e,t,n,r,s)=>{const a=gt(),{searchTerm:o}=g9(),i=f.useMemo(()=>({search_term:o,with_temporary_threads:t,ascending:r,query_source_filter:n,thread_type_filter:s}),[o,t,r,n,s]),c=f.useCallback(async v=>Nue({timeoutMs:5e3,paginationParams:v,ascending:r,reason:e}),[r,e]),u=F6t({queryKey:[Yd,i],pageSize:kue,fetchFn:c,autoFetch:!0,nextPageAccessor:U6t,args:i}),d=f.useCallback(()=>{a.invalidateQueries({queryKey:[Yd,i]})},[a,i]),m=u.data?.pageParams?.length??1,h=u.data?.pages??[],p=h.flat(),g=h[h.length-1]?.[0]?.has_next_page,y=f.useMemo(()=>({currentPage:m,hasNextPage:g,hasPreviousPage:m>1,getNextPage:()=>u.fetchNextPage(),getPreviousPage:()=>u.fetchPreviousPage()}),[g,m,u]);return f.useMemo(()=>({...u,data:p,paginationInfo:y,invalidateThreadsQuery:d}),[y,u,p,d])};function B6t({reason:e}){const t=gt();return f.useCallback(()=>{t.prefetchInfiniteQuery({queryKey:[Yd,{search_term:""}],initialPageParam:0,queryFn:()=>Nue({timeoutMs:5e3,paginationParams:{offset:0},reason:e})})},[t,e])}const LSe="fetch_bookmarks";async function V6t({reason:e}){try{return await(await er({urlPath:"/rest/collections/list_bookmarks",reason:e})).json()||[]}catch(t){return ee.error("Failed to get bookmarks.",t),[]}}const $6t=({reason:e,enabled:t=!0})=>{const n=ea({reason:e}),s=Ot()?.user?.email,{data:a,refetch:o,isLoading:i}=Ke({queryKey:[LSe,s],queryFn:async()=>s?await V6t({reason:e}):[],enabled:t&&!n&&!!s,refetchOnMount:!1,refetchOnWindowFocus:!0,placeholderData:null});return f.useMemo(()=>!s||n?{data:null,isLoading:!1,refetch:Rn}:{data:a,isLoading:i,refetch:o},[a,s,n,i,o])},W6t=()=>{const e=gt();return f.useCallback(()=>{e.invalidateQueries({queryKey:[LSe]})},[e])},vte=10,H6t=({isOpen:e,onCreateClick:t,onDeleteThreadOrBookmark:n,isConfiguring:r,setIsConfiguring:s})=>{const a="home-sidebar",{data:o,isLoading:i}=gbe({reason:a}),{data:c,refetch:u}=$6t({reason:a,enabled:e}),{sidebarHiddenHubs:d}=hn(),{unsubscribeFromHub:m}=dbe({reason:a}),{bookmarks:h,bookmarks_collection_slug:p,bookmarks_collection_uuid:g}=c||{},v=fp()==="US",{variation:x}=kwt(!1),b=B6t({reason:a}),{deleteThread:_}=X1({reason:a}),{trackEvent:w}=Te(),{$t:S}=X(),C=Je(),{openVisitorLoginUpsell:E}=$n({enabled:!C}),M=At(),T=Pt(),{removeThreadFromCollection:I}=Sp({reason:a});wwt({reason:a});const[j,N]=f.useState([]),[P,R]=f.useState([]),k=f.useMemo(()=>h?.filter(Y=>!j.includes(Y))??[],[h,j]),O=f.useMemo(()=>o?.filter(Y=>!P.includes(Y))??[],[o,P]),L=f.useCallback(Y=>{const Q=g;n(),w("unbookmark item from sidebar",{collectionUUID:Q}),N(re=>[...re,Y]),I({entryUUID:Y.uuid,oldCollectionUUID:Q,callback:()=>{u()}})},[I,u,n,g,w]),F=f.useCallback(Y=>{n(),w("delete thread from sidebar",{entryUUID:Y.uuid}),R(Q=>[...Q,Y]),N(Q=>[...Q,{uuid:Y.uuid,mode:Y.variant==="article"?"article":"thread",title:Y.title,slug:Y.link}]),_({entryUUID:Y.uuid,callback:()=>{Y.link===T&&M.push("/")}})},[T,M,_,n,w]),U=f.useCallback(Y=>{n(),N(Q=>[...Q,Y]),R(Q=>[...Q,{uuid:Y.uuid,link:Y.slug,variant:Y.mode==="article"?"article":"thread",title:Y.title}]),w("delete bookmark from sidebar",{entryUUID:Y.uuid}),_({entryUUID:Y.uuid,callback:()=>{Y.slug===T?.replace("/search/","").replace("/page/","")&&M.push("/")}})},[n,w,T,M,_]),V=f.useCallback(Y=>{m(Y)},[m]),W=f.useMemo(()=>({text:S({defaultMessage:"Hide from sidebar",id:"bt2xOtkULy"}),icon:Xt,type:"default",size:Ft.small,show:!0}),[S]),H=f.useMemo(()=>[{...W,onClick:Y=>{Y.stopPropagation(),V("SIDEBAR_FINANCE")}}],[V,W]),G=f.useMemo(()=>[{...W,onClick:Y=>{Y.stopPropagation(),V("SIDEBAR_TRAVEL")}}],[V,W]),K=f.useMemo(()=>[{...W,onClick:Y=>{Y.stopPropagation(),V("SIDEBAR_SHOPPING")}}],[V,W]),$=f.useMemo(()=>[{...W,onClick:Y=>{Y.stopPropagation(),V("SIDEBAR_ACADEMIC")}}],[V,W]),q=f.useMemo(()=>[{...W,onClick:Y=>{Y.stopPropagation(),V("SIDEBAR_SPORTS")}}],[V,W]),Z=f.useMemo(()=>v?GI:GI.filter(Y=>Y!=="SIDEBAR_SHOPPING"),[v]),se=f.useMemo(()=>C?Z.filter(Y=>!d.includes(Y)):Z,[d,C,Z]);return l.jsxs("div",{className:"flex flex-col gap-[12px]",children:[se.length>0&&l.jsxs(l.Fragment,{children:[l.jsxs(f0,{children:[se.includes("SIDEBAR_FINANCE")&&l.jsx(ws,{href:"/finance",text:S({defaultMessage:"Finance",id:"Fm3M+yFIbr"}),icon:R0,selected:Kg(T)==="finance",menuItems:C?H:void 0,sidebarOpen:e,onClick:()=>{w("sidebar hub clicked",{hub_type:"finance"})}}),se.includes("SIDEBAR_TRAVEL")&&l.jsx(ws,{href:"/travel",text:S({defaultMessage:"Travel",id:"z1QN2qSnI/"}),icon:Ore,selected:Kg(T)==="travel",menuItems:C?G:void 0,sidebarOpen:e,onClick:()=>{w("sidebar hub clicked",{hub_type:"travel"})}}),se.includes("SIDEBAR_SHOPPING")&&l.jsx(ws,{href:"/shopping",text:S({defaultMessage:"Shopping",id:"my1MLnIMoS"}),icon:Lre,selected:Kg(T)==="shopping",menuItems:C?K:void 0,sidebarOpen:e,onClick:()=>{w("sidebar hub clicked",{hub_type:"shopping"})}}),se.includes("SIDEBAR_ACADEMIC")&&l.jsx(ws,{href:"/academic",text:S({defaultMessage:"Academic",id:"mbxIJyT8C5"}),icon:Zj,selected:Kg(T)==="academic",menuItems:C?$:void 0,sidebarOpen:e,onClick:()=>{w("sidebar hub clicked",{hub_type:"academic"})}}),se.includes("SIDEBAR_SPORTS")&&x&&l.jsx(ws,{href:"/sports",text:S({defaultMessage:"Sports",id:"qEuXjx1B4z"}),icon:Dre,selected:Kg(T)==="sports",menuItems:C?q:void 0,sidebarOpen:e,onClick:()=>{w("sidebar hub clicked",{hub_type:"sports"})}})]}),l.jsx(m0,{})]}),l.jsx(Gh,{href:"/library",onClick:Y=>{C||(Y.preventDefault(),E({title:S({defaultMessage:"Organize your search history by signing up",id:"PMTP+jTgx8"}),origin:Be.LIBRARY_PAGE}))},onMouseOver:b,text:S({defaultMessage:"Library",id:"StcK672jB9"}),className:"-mb-xs",testId:"library-button",accessory:o&&e&&O.length>0?l.jsx(xbe,{defaultHidden:!1,buttonClassName:"text-quiet hover:text-foreground duration-150"}):l.jsx("div",{className:"size-[24px]"})}),i?null:O.length===0?l.jsx(ws,{icon:mr,href:"/",text:S({defaultMessage:"Create a Thread",id:"6naN9kZFw2"}),deemphasized:!0,onClick:()=>{const Y=document.getElementById("ask-input");Y&&(Y.focus(),t())},sidebarOpen:e}):l.jsx(h0,{show:!0,data:O,type:"thread",HistoryComponent:({item:Y,position:Q})=>l.jsx(bbe,{item:Y,position:Q,onDeleteClick:F,sidebarOpen:e}),wrapperClassName:"!m-0 !px-0 !border-0 flex flex-col gap-1.5 space-y-0 !-mt-[2px]",id:"recent-threads"}),O?.length>=vte&&l.jsx(zI,{href:"/library",text:S({defaultMessage:"View All",id:"wbcwKddwLa"}),onMouseOver:b}),C&&c!==null&&l.jsx(l.Fragment,{children:k.length>0&&l.jsxs(l.Fragment,{children:[l.jsx(m0,{}),l.jsx(Gh,{href:p?`/spaces/${p}`:void 0,text:S({defaultMessage:"Bookmarks",id:"nGBrvwYczX"}),className:"-mb-xs",testId:"bookmarks-button"}),l.jsx(h0,{show:!0,data:k,type:"thread",HistoryComponent:({item:Y})=>l.jsx(z6t,{item:Y,onRemoveClick:L,onDeleteClick:U,sidebarOpen:e}),wrapperClassName:"!m-0 !px-0 !border-0 flex flex-col gap-1.5 space-y-0 !-mt-[2px]",id:"recent-bookmarks"}),k.length>=vte&&p&&l.jsx(zI,{href:`/spaces/${p}`,text:S({defaultMessage:"View All",id:"wbcwKddwLa"})})]})}),l.jsx(Swt,{isOpen:r,onClose:()=>s(!1),availableHubs:Z})]})},z6t=({item:e,onRemoveClick:t,onDeleteClick:n,sidebarOpen:r})=>{const s=e.mode==="article",o=`/${s?"page":"search"}/${e.slug}`,i=Pt(),{$t:c}=X();return l.jsx(ws,{href:o,text:e.title||e.slug,fadeOut:!0,selected:o===i,sidebarOpen:r,testId:`thread-title-${e.title||e.slug}`,menuItems:[{text:c({defaultMessage:"Remove Bookmark",id:"RokVj/Gv4U"}),icon:DTe,onClick:u=>{u.stopPropagation(),t(e)},type:"default"},{text:c({defaultMessage:"Delete {item}",id:"rdK9AWns19"},{item:s?"Page":"Thread"}),icon:Ud,onClick:u=>{u.stopPropagation(),n(e)},type:"default"}]})};var QN={},XN={},xte;function G6t(){return xte||(xte=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="circle-question",r=512,s=512,a=[62108,"question-circle"],o="f059",i="M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm169.8-90.7c7.9-22.3 29.1-37.3 52.8-37.3l58.3 0c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24l0-13.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1l-58.3 0c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faCircleQuestion=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(XN)),XN}var bte;function q6t(){return bte||(bte=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=G6t();e.definition={prefix:t.prefix,iconName:t.iconName,icon:[t.width,t.height,t.aliases,t.unicode,t.svgPathData]},e.faQuestionCircle=e.definition,e.prefix=t.prefix,e.iconName=t.iconName,e.width=t.width,e.height=t.height,e.ligatures=t.aliases,e.unicode=t.unicode,e.svgPathData=t.svgPathData,e.aliases=t.aliases}(QN)),QN}var K6t=q6t();const hU=A.memo(({showAvatar:e,showCreatorLabel:t,showEdit:n,isCurrentUser:r=!0,textClassName:s="",textColor:a,textVariant:o="smallBold",username:i,image:c,anon:u,avatarSize:d="small",isAlwaysEditing:m=!1,onButtonClick:h=Rn})=>{const{$t:p}=X(),{update:g}=za.useSession(),y=Ot(),[v,x]=A.useState(m),[b,_]=A.useState(i??(r?y?.user?.username:"Anonymous")),[w,S]=A.useState(),{isMobileUserAgent:C}=Ce(),E=async()=>fetch("/api/user",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:b})}),{mutate:M,isPending:T}=Mt({mutationFn:E,onSuccess:R=>{R.json().then(k=>{if(R.status!==200){S(k.message);return}x(!1),S(void 0),g(),h()})}});f.useEffect(()=>{_(i??(r?y?.user?.username:"Anonymous"))},[i,r,y?.user?.username]);const I=f.useCallback(()=>x(!0),[]),j=f.useCallback(()=>M(),[M]),N=f.useCallback(()=>{_(y?.user?.username??""),m||x(!1),h()},[m,h,y?.user?.username]),P=f.useMemo(()=>y?l.jsxs("div",{className:"ml-sm gap-x-xs flex items-center",children:[l.jsx(ye,{text:p({defaultMessage:"Save",id:"jvo0vs3nF0"}),variant:b===y.user.username||b===""||T?"common":"primary",size:"small",disabled:b===y.user.username||b===""||T,onClick:j}),l.jsx(ye,{text:p({defaultMessage:"Cancel",id:"47FYwba+bI"}),size:"small",disabled:T,onClick:N})]}):null,[p,N,j,T,y,b]);return l.jsxs("div",{className:"gap-x-xs relative flex items-center",children:[e&&l.jsx(Cn,{size:d,anon:u,user:c??(r?y?.user.image??void 0:void 0)}),v?l.jsx("div",{children:l.jsx(xo,{isMobileUserAgent:C,value:b,disabled:T,errorText:w??(b===""?"Username cannot be empty":""),onChange:_,className:"md:min-w-[300px]",inlineEditBlock:P})}):l.jsx(D,{variant:o,color:a,className:B("line-clamp-1 break-all",s),children:u?"Anonymous":b}),t&&l.jsx(z,{variant:"offset",className:"px-sm py-xs rounded-full",children:l.jsx(D,{variant:"tiny",color:"light",className:s,children:"Author"})}),n&&!v&&l.jsx(ke,{pill:!0,size:"small",icon:uc,onClick:I})]})});hU.displayName="Username";const DSe=({session:e,onClick:t})=>{const n="sidebar-incognito-menu",{$t:r}=X(),s=ea({reason:n}),{actions:a}=hn(),{hasAccessToProFeatures:o,isPro:i,isMax:c}=Nt(),u=f.useCallback(()=>{a.setIsIncognito(!1),t()},[a,t]),d=f.useCallback(()=>{a.setIsIncognito(!0),t()},[a,t]);return l.jsxs("div",{className:"w-sideBarWidth flex flex-col items-stretch",children:[l.jsx(_te,{onClick:u,icon:l.jsx("div",{className:`relative inline-flex ${o?"-top-two":""}`,children:l.jsx(Cn,{size:"medium",user:e?.user?.image,showProBadge:i,showMaxBadge:c,className:"!text-inverse",showBackground:!1})}),label:l.jsx("div",{className:"gap-sm flex items-center",children:l.jsx(hU,{username:e?.user?.username})}),selected:!s},"user"),l.jsx(_te,{onClick:d,icon:l.jsx(Uu,{inverse:!0}),label:r({defaultMessage:"Incognito",id:"Sp8UUpZ0at"}),selected:s,showTooltip:!0},"incognito")]})},_te=({onClick:e,label:t,selected:n,icon:r,showTooltip:s})=>{const{$t:a}=X();return l.jsxs(z,{as:"button",bgHover:"offset",className:"gap-sm p-sm pr-md flex items-center rounded-md active:scale-[.98]",onClick:e,children:[r,typeof t=="string"?l.jsx(D,{variant:"smallBold",children:t}):t,l.jsx("div",{className:"flex-1"}),n?l.jsx("span",{className:"text-super",children:l.jsx(xt,{icon:ZE.faCheck,size:"sm"})}):s&&l.jsx(bn,{className:"max-w-[280px]",tooltipText:a({defaultMessage:"Create anonymous threads that don't appear in your library and expire after 24 hours.",id:"BBjMWPmxC0"}),keyboardShortcut:The?["",";"]:["ctrl",";"],tooltipLayout:"right",asChild:!0,children:l.jsx(D,{color:"light",className:"opacity-50 duration-150 hover:opacity-100",children:l.jsx(xt,{icon:K6t.faQuestionCircle,size:"sm"})})})]})},FSe=A.memo(({backgroundVariant:e="offset"})=>l.jsx(z,{variant:e,className:"inline-flex h-5 items-center rounded px-[6px] py-px",children:l.jsx(D,{color:"light",variant:"micro",className:"translate-y-[0.5px] uppercase tracking-wider",children:l.jsx(he,{defaultMessage:"Beta",id:"riw/yc06Nq"})})}));FSe.displayName="BetaBadge";const USe=A.memo(()=>l.jsx("div",{className:"bg-super dark inline-flex h-5 items-center justify-center rounded px-[6px] py-px",children:l.jsx(D,{color:"white",variant:"tinyRegular",children:l.jsx(he,{defaultMessage:"New",id:"bW7B87wFFp"})})}));USe.displayName="NewBadge";const PHt=({children:e,card:t=!0,title:n,id:r})=>l.jsxs("div",{id:r,children:[n&&l.jsx(D,{variant:"baseSemi",className:"pl-sm",children:n}),l.jsx(z,{variant:t?"offset":void 0,className:B("mb-lg mt-sm divide-y",{"px-md py-sm rounded-lg":t}),children:e})]}),Y6t=({children:e,title:t,noPadding:n=!1,subTitle:r,cta:s,titleAccessory:a})=>l.jsxs("div",{className:"pb-md flex flex-col",children:[l.jsx(z,{className:"pb-md flex flex-col gap-1 border-b",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(D,{variant:"baseSemi",children:t}),a]}),r&&l.jsx(D,{variant:"tinyRegular",color:"light",children:r})]}),s&&s]})}),l.jsx("div",{className:B("gap-md flex flex-col",{"py-md":!n}),children:e})]}),ZN=({label:e,value:t,valueColor:n="light",cta:r,shouldWrapInMobile:s=!0})=>l.jsxs("div",{className:B("gap-md flex justify-between sm:flex-row sm:flex-nowrap sm:items-center",s&&"flex-col flex-wrap"),children:[l.jsxs("div",{children:[e&&l.jsx(D,{variant:"small",children:e}),t&&l.jsx(D,{variant:"tinyRegular",color:n,children:t})]}),l.jsx("div",{children:r})]}),Q6t={memory_enabled:!1,conversation_history_enabled:!1,citations_enabled:!1},X6t=()=>{const{value:e}=Ut({flag:"memory-search-beta",defaultValue:!1,subjectType:"user_nextauth_id"});return e},BSe=({reason:e})=>{const{isEnterprise:t}=pn({reason:e}),{value:n,loading:r}=Ut({flag:"memory-experiment",defaultValue:!1,extraAttributes:{isEnterprise:t??!1},subjectType:"user_nextauth_id"}),{value:s,loading:a}=vf({flag:"memory-search-history",defaultValue:Q6t,extraAttributes:{isEnterprise:t??!1,dependent_flag:"memory-experiment",variation_served:n},subjectType:"user_nextauth_id"});return a||r?!1:"memory_enabled"in s&&"conversation_history_enabled"in s&&"citations_enabled"in s?s?.memory_enabled&&s?.conversation_history_enabled&&s?.citations_enabled:!1},RHt=()=>{const e="personal-search-settings-main",t=X6t(),{$t:n}=X(),r=gt(),s=Lpe({reason:e}),{openModal:a}=_t(),{trackEvent:o}=Te(),i=Ht();f.useEffect(()=>{i?.get("modal")==="memory"&&a("memoryListModal",{isMemoryEnabled:!0})},[]);const{mutate:c,isPending:u}=Mt({mutationFn:g=>LG({type:"memory",value:g,reason:e}),onSuccess:g=>{g&&r.setQueryData(kA(),g)}}),{mutate:d,isPending:m}=Mt({mutationFn:g=>LG({type:"searchHistory",value:g,reason:e}),onSuccess:g=>{g&&r.setQueryData(kA(),g)}}),h=f.useCallback(g=>{c(g),o("toggle memory",{memoryToggleState:g?"on":"off"})},[c,o]),p=f.useCallback(g=>{d(g),o("toggle search history",{searchHistoryToggleState:g?"on":"off"})},[d,o]);return l.jsxs(Y6t,{title:n({defaultMessage:"Memory",id:"dVx3yznM2C"}),titleAccessory:t?l.jsx(FSe,{}):l.jsx(USe,{}),children:[l.jsx(ZN,{label:n({defaultMessage:"Reference search library",id:"SwsY8rd34h"}),value:n({defaultMessage:"Let Perplexity use previous searches when answering.",id:"ex3azVKEwb"}),cta:l.jsx(Go,{active:s.use_search_history===null?!0:s.use_search_history??!1,onChange:p,disabled:m})}),l.jsx(ZN,{label:n({defaultMessage:"Reference saved memories",id:"jT78QtuUtA"}),value:l.jsx("div",{className:"flex flex-col",children:l.jsx(D,{className:"inline",variant:"tinyRegular",color:"light",children:l.jsx(he,{defaultMessage:"Let Perplexity save and use memories when answering. Incognito searches are never stored. ",id:"B53ddA1KtU"})})}),cta:l.jsx(Go,{active:s.use_memory??!1,onChange:h,disabled:u})}),l.jsx(ZN,{label:l.jsx("div",{className:"gap-sm flex items-center",children:l.jsx(D,{variant:"small",children:n({defaultMessage:"Edit your saved memories",id:"xuzqKrNHGC"})})}),cta:l.jsx(ye,{extraCSS:"w-fit",variant:"border",size:"small",text:n({defaultMessage:"Manage",id:"0AzlrbMWV9"}),trailingComponent:l.jsx(Jr,{size:16}),onClick:()=>{o("viewed memory list modal"),a("memoryListModal",{isMemoryEnabled:!0})}})})]})},No="default",VSe=({trigger:e,popoverPlacement:t="top-start"})=>{const n=At(),[r,s]=f.useState(!1),a=Je(),o=O1(),{isMaxUpsellEnabled:i}=Pu(),c=BSe({reason:"sidebar-bottom-popover"}),{openModal:u}=_t(),d=f.useRef(BO().sidebar),{openVisitorLoginUpsell:m}=$n({enabled:!a}),{isWindowsApp:h}=Wt(),{isGovernmentRequestOrigin:p}=Sn(),g=Hme(),{$t:y}=X(),v=DP(),[x,b]=f.useState(h),[_,w]=f.useState(!1),{keysRequiringRerender:S,removeKeyRequiringRerender:C}=xf(),E=c&&!d.current&&Die(),M=qOe(),{variation:T,loading:I}=Mf(!1);f.useEffect(()=>{!d.current&&r&&GOe("sidebar",!0)},[r]);const j=f.useMemo(()=>[{icon:B6,show:!0,text:y({defaultMessage:"Account",id:"TwyMauNL3r"}),type:No,onClick:()=>n.push(Yt.Account.href),testId:"sidebar-my-account"},{icon:z_,show:!0,text:y({defaultMessage:"Preferences",id:"PCSt5TwTnx"}),type:No,onClick:()=>n.push(Yt.Preferences.href),testId:"sidebar-preferences"},{icon:xre,show:!0,text:y({defaultMessage:"Personalization",id:"FAejG+JVWn"}),type:No,onClick:()=>n.push(Yt.Personalize.href),testId:"sidebar-personalize",...E&&{rightElement:l.jsx(be,{icon:fB,color:"currentColor",className:"text-super"})}},{icon:hS,show:o,text:y({defaultMessage:"Shortcuts",id:"7FAwwkYilD"}),type:No,onClick:()=>n.push(Yt.Shortcuts.href),testId:"sidebar-shortcuts"},{icon:lu,text:y(T?{defaultMessage:"Automations",id:"ORNSnD2XJb"}:{defaultMessage:"Tasks",id:"yhU1etXT1A"}),type:No,onClick:()=>n.push(Yt.Tasks.href),testId:"sidebar-tasks",...!M&&{rightElement:l.jsx(be,{icon:fB,color:"currentColor",className:"text-super"})}},{icon:Tu,show:!0,text:y({defaultMessage:"Notifications",id:"NAidKbB0vi"}),type:No,onClick:()=>n.push(Yt.Notifications.href),testId:"sidebar-notifications"},{icon:pS,show:!0,text:y({defaultMessage:"Connectors",id:"2mMJRvsAg1"}),type:No,onClick:()=>n.push(Yt.Connectors.href),testId:"sidebar-connectors"},{icon:Cre,show:!0,text:y({defaultMessage:"API",id:"xwEc8KM8zK"}),type:No,onClick:()=>n.push(Yt.API.href),testId:"sidebar-api"},{icon:_re,show:!0,text:y({defaultMessage:"Pro Perks",id:"x69637XBwS"}),type:No,onClick:()=>n.push(Yt.ProPerks.href),testId:"sidebar-pro-perks"},{icon:Hre,show:!0,text:y({defaultMessage:"All settings",id:"IzEySeOy5/"}),type:No,onClick:()=>n.push(Yt.Account.href),testId:"sidebar-settings"},{type:"separator",show:i,className:"!border-b-offset !border-b !-mx-1 mb-1"},{icon:FTe,show:i,text:y({defaultMessage:"View plans",id:"EaucLAoHiC"}),type:No,onClick:()=>{u("pricingModal",{origin:Be.SIDEBAR_BOTTOM_POPOVER,pitchMessage:{title:y({defaultMessage:"Select your plan",id:"kujKpiV0z4"})}})},testId:"sidebar-view-plans"}],[y,E,o,T,M,i,n,u]);f.useEffect(()=>{S.includes("sidebar-sign-in-button")&&b(!0),C("sidebar-sign-in-button")},[C,S]),f.useEffect(()=>{v||b(!0)},[v]),f.useEffect(()=>{!g&&p&&b(!0)},[g,p]),f.useEffect(()=>{requestAnimationFrame(()=>{w(!0)})},[]);const{trackEvent:N}=Te();return!a&&!x||I?null:a?l.jsx(en,{placement:t,items:j,footer:l.jsx(Z6t,{handleClick:()=>s(!1)}),isMobileStyle:!1,isOpen:r,onOpen:()=>s(!0),onClose:()=>s(!1),menuItemClassName:"gap-md",wrapperClassName:"inline-flex",children:l.jsx("div",{onClick:()=>s(!r),className:"inline-flex w-full","data-testid":"sidebar-popover-trigger-signed-in",children:e(r)})}):l.jsx("div",{className:"relative inline-flex justify-center duration-150 hover:opacity-80",children:l.jsxs(_e.button,{initial:_?{opacity:0,scale:.5}:void 0,animate:_?{opacity:1,scale:1}:void 0,className:"inline-flex appearance-none flex-col items-center justify-center",onClick:()=>{N("sidebar sign in button clicked"),m({origin:Be.SIGNUP_BUTTON})},children:[l.jsx("div",{className:"p-1",children:l.jsx(z,{variant:"super",className:"flex size-8 items-center justify-center rounded-full",children:l.jsx(B6,{className:"text-inverse size-5"})})}),l.jsx(D,{variant:"tinyRegular",className:"text-center",color:"super",children:y({defaultMessage:"Sign In",id:"Ub+AGcdPg6"})})]})})},Z6t=({handleClick:e})=>{const t=Ot();return l.jsx("div",{className:"border-t-offset border-t pt-2",children:t&&l.jsx(DSe,{session:t,onClick:e})})},$Se=({showBottomLabels:e})=>{const t="sidebar-v2-account-menu",{$t:n}=X(),r=ea({reason:t}),s=Ot(),{isPro:a,isMax:o,hasAccessToProFeatures:i}=Nt(),c=BSe({reason:t}),u=BO().sidebar,d=c&&!u&&Die(),m=f.useCallback(h=>l.jsx(bn,{showTooltip:!!s?.user?.username&&!e,tooltipText:n({defaultMessage:"Account & Settings",id:"zWaEuojd3m"}),tooltipLayout:"right",arrowClassName:" ",delayDuration:0,offset:-2,asChild:!0,children:l.jsxs("div",{className:"gap-xs group flex w-full cursor-pointer flex-col items-center",children:[l.jsxs("div",{className:"relative select-none duration-100 group-hover:opacity-80",children:[r?l.jsx(Uu,{inverse:!0}):l.jsx(Cn,{size:"medium",showProBadge:a,showMaxBadge:o,badgeProps:{show:d,className:"bg-super border-subtlest"},user:s?.user?.image}),l.jsx(Zr,{className:B("text-quietest group-hover:text-quiet absolute right-0 top-1/2 size-3 -translate-y-1/2 translate-x-[calc(100%+2px)] duration-100",{"!text-quiet -translate-y-[calc(50%-2px)]":h})})]}),e&&l.jsx(D,{variant:"micro",color:"light",className:B("px-xs w-full truncate text-center",{"mt-two":i}),children:n({defaultMessage:"Account",id:"TwyMauNL3r"})})]})}),[e,s?.user?.username,n,r,a,o,s?.user?.image,d,i]);return l.jsx(VSe,{trigger:m})};$Se.displayName="SidebarAccountMenu";const J6t="#FF3B30",pU=A.memo(({variant:e})=>l.jsx("div",{className:B("absolute size-2 rounded-full",{"-right-1 -top-1":e!=="iconOnly","-right-sm -top-sm ring-offset ring-2":e==="iconOnly"}),style:{backgroundColor:J6t}}));pU.displayName="NotificationBadge";const gU=A.memo(({text:e,variant:t})=>{const{openModal:n}=_t(),{trackEvent:r}=Te(),[s,a]=f.useState(!1),o=Gj();f.useEffect(()=>{a(o>5&&!eh())},[o]);const i=f.useCallback(()=>{aS(),r("homepage footer download menu opened",{}),n("platformOptionsModal")},[n,r]),c=f.useMemo(()=>l.jsxs("div",{className:"relative ml-auto",children:[l.jsx(be,{icon:gf,className:"size-4"}),s&&l.jsx(pU,{variant:t})]}),[s,t]);return l.jsx(ye,{size:"small",text:t==="iconOnly"?void 0:e,trailingComponent:c,pill:t==="iconOnly",fullWidth:t!=="iconOnly",onClick:i})});gU.displayName="SideDownloadPrompt";const eAt=()=>{const{$t:e}=X();return l.jsx(bn,{tooltipText:e({defaultMessage:"Download",id:"5q3qC0sC3r"}),className:"inline-flex",tooltipLayout:"right",asChild:!0,children:l.jsxs("div",{className:"gap-xs flex flex-col items-center",children:[l.jsx(gU,{variant:"iconOnly"}),l.jsx(D,{variant:"micro",color:"light",className:"px-xs w-full truncate text-center",children:e({defaultMessage:"Install",id:"ubmFc8rrea"})})]})})},WSe=()=>{const e="sidebar-v2-enterprise-menu",{$t:t}=X(),{organization:n}=pn({reason:e}),r=Op();return l.jsx(bn,{tooltipText:n?.display_name,tooltipLayout:"right",arrowClassName:" ",delayDuration:0,offset:-2,asChild:!0,children:l.jsx(at,{href:`${r}/org`,className:"flex justify-center",children:n?.logo?l.jsx(Cn,{size:"medium",user:n?.logo,altText:"Logo"}):l.jsx(ye,{ariaLabel:t({defaultMessage:"Organization settings",id:"8JjaslSBQx"}),pill:!0,size:"small",variant:"inverted"})})})};WSe.displayName="SidebarV2EnterpriseMenu";const HSe=f.memo(({isOpen:e,children:t,title:n,onPin:r,pinned:s,canPin:a,onMouseEnter:o,onMouseLeave:i,accessory:c,actions:u,appContentWrapperRef:d})=>{const{$t:m}=X(),h=f.useMemo(()=>iS(g=>{d.current?.contains(g.target)&&(window.removeEventListener("mousemove",h),e&&i())},100,{leading:!0,trailing:!0}),[i,d,e]);f.useEffect(()=>{e&&!s?window.addEventListener("mousemove",h):window.removeEventListener("mousemove",h)},[e,s,h]),OC(()=>{window.removeEventListener("mousemove",h)});const p=Rp();return l.jsx("div",{className:"group/sidebar-menu pointer-events-none absolute inset-y-0 start-0 overflow-hidden ltr:-translate-x-px rtl:translate-x-px",style:{width:F2+(s?0:16)+ym},children:l.jsxs(z,{className:B("inset-y-0 border-transparent duration-100 dark:border-transparent","end-md absolute start-0 flex flex-col border-e pe-[20px]",{"erp-tab:pt-two pt-[10px]":s,"ease-inCubic pointer-events-none opacity-0 ltr:-translate-x-[10%] rtl:translate-x-[10%]":!e&&!s,"!border-subtlest ease-outCubic shadow-xl":e&&!s,"pointer-events-auto":e||s}),variant:"offset",onMouseEnter:o,onMouseLeave:i,style:{paddingLeft:p?void 0:ym+12,paddingRight:p?ym+12:void 0,width:F2+ym},children:[!s&&e&&l.jsx("div",{className:"absolute inset-y-0 -end-[24px] start-0"}),l.jsxs(z,{className:"group/sidebar-menu-header relative mb-[12px] flex min-h-0 items-center justify-between border-b py-[12px]",children:[u&&e?l.jsx(en,{items:u,isMobileStyle:!1,placement:"bottom-start",children:l.jsxs(D,{variant:"smallBold",className:"group relative cursor-pointer select-none",children:[l.jsx("span",{className:"bg-offsetPlus -inset-x-sm -inset-y-xs absolute rounded-md opacity-0 duration-100 group-hover:opacity-100"}),l.jsxs("span",{className:"gap-xs relative flex items-center",children:[n,l.jsx(Zr,{className:"text-quietest group-hover:text-quiet size-4 opacity-0 duration-100 group-hover/sidebar-menu-header:opacity-100"})]})]})}):l.jsx(D,{variant:"smallBold",children:n}),l.jsxs("div",{className:"flex min-h-[24px] items-center",children:[l.jsx(st,{initial:!1,children:c&&l.jsx(_e.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},className:"inline-flex",children:c})}),a&&l.jsx(ke,{size:"tiny",icon:s?UTe:BTe,onClick:r,extraCSS:"!-me-sm",toolTip:m(s?{defaultMessage:"Unpin Sidebar",id:"0ms2vDE7D8"}:{defaultMessage:"Pin Sidebar",id:"rPlnyNxMsY"}),tooltipLayout:"bottom",testId:"sidebar-pin-sidebar"})]})]}),l.jsx(st,{initial:!1,mode:"popLayout",children:l.jsx(_e.div,{initial:{opacity:0,x:p?10:-10},animate:{opacity:1,x:0},exit:{opacity:0},transition:{duration:.1,ease:Jn},className:"relative flex min-h-0 flex-1 flex-col",children:l.jsx("div",{className:"scrollbar-subtle mx-[-12px] mt-[-12px] flex min-h-0 flex-1 overflow-y-auto overflow-x-hidden p-[12px]",children:l.jsx("div",{className:"w-full",children:t})})},n)})]})})});HSe.displayName="SidebarMenu";const zSe=f.createContext(null),tAt=({children:e})=>{const{openModal:t}=_t(),[n,r]=f.useState(!1),[s,a]=f.useState(null),[o,i]=f.useState(null),c=f.useMemo(()=>s===null&&o===null,[s,o]),u=f.useCallback(g=>o===g,[o]),d=f.useCallback(()=>{r(!0)},[]),m=f.useCallback(g=>{c&&(r(!1),g?.())},[c]),h=f.useCallback(()=>{r(!n)},[n]),p=f.useCallback((g,y)=>{a(g),t(g,{...y,onClose:(...v)=>{y?.onClose?.(...v),a(null)}})},[t]);return l.jsx(zSe.Provider,{value:{isOpen:n,isMenuOpen:u,setOpenMenu:i,open:d,close:m,toggle:h,openModal:p},children:e})},Mc=()=>{const e=f.useContext(zSe);if(!e)throw new Error("useSidebarNotifications must be used within a SidebarNotificationsProvider");return e},GSe=({visible:e})=>e?l.jsx(z,{variant:"super",className:B("ring-offset pointer-events-none size-2 rounded-full opacity-0 ring-2 transition-opacity",{"opacity-100":e})}):null,nAt=(e,t)=>{const{value:n,loading:r}=Ut({flag:"app-notifications-polling",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},rAt=MUe(5),qSe=({reason:e})=>{const{variation:t}=nAt(!1),n=Ke({queryKey:vOe(),queryFn:async()=>(await ne.GET("/rest/notifications/in-app/unread-count",e)).data.unread_count,staleTime:1e3*60*5,refetchInterval:()=>t?rAt:!1});return f.useMemo(()=>{const{data:r,...s}=n;return{count:r??0,...s}},[n])},KSe=()=>{const{$t:e}=X(),{trackEvent:t}=Te(),{toggle:n,isOpen:r}=Mc(),{count:s}=qSe({reason:"SidebarNotificationsButton"}),a=f.useCallback(()=>{r||t("inbox opened",{unreadCount:s}),n()},[r,t,s,n]);return l.jsx(bn,{tooltipText:e({defaultMessage:"Notifications",id:"NAidKbB0vi"}),tooltipLayout:"right",arrowClassName:" ",delayDuration:0,offset:-2,asChild:!0,children:l.jsx("div",{className:"flex w-full flex-col items-center justify-center",children:l.jsxs("div",{className:"relative flex flex-col items-center justify-center",children:[l.jsx(ke,{icon:Tu,onClick:a,pill:!0,extraCSS:"!size-9",testId:"sidebar-new-thread",size:"large"}),l.jsx(YSe,{})]})})})};KSe.displayName="SidebarNotificationsButton";const YSe=()=>{const{count:e,refetch:t}=qSe({reason:"SidebarNotificationsButtonCounter"}),{isOpen:n}=Mc(),r=f.useRef(null),[s,a]=f.useState(null);return f.useEffect(()=>{if(n){a(!1),r.current&&clearTimeout(r.current);return}return a(o=>o===null?e>0:(r.current=setTimeout(()=>{a(e>0)},1e3),o)),()=>{r.current&&clearTimeout(r.current)}},[e,n]),f.useEffect(()=>{n&&t()},[n,t]),l.jsx("div",{className:"right-xs top-xs translate-y-two -translate-x-three pointer-events-none absolute",children:l.jsx(GSe,{visible:!!s})})};YSe.displayName="SidebarNotificationsButtonCounter";const Aj=({menuId:e,items:t,menu:n,children:r,onClose:s,onOpen:a})=>{const o=Is(),{isMenuOpen:i,setOpenMenu:c}=Mc(),u=f.useCallback(()=>{c(e),a?.()},[e,c,a]),d=f.useCallback(()=>{i(e)&&c(null)},[e,c,i]);return f.useEffect(()=>{i(e)||s?.()},[i,e,s]),n?n({onOpen:u,onClose:d}):l.jsx(en,{isOpen:i(e),items:t??[],isMobileStyle:o,boxProps:{className:"shrink-0"},onOpen:u,onClose:d,children:r??l.jsx(ke,{size:"tiny",icon:cu})})},sAt=e=>typeof e=="object"&&e!==null&&"pages"in e&&Array.isArray(e.pages)&&e.pages.every(t=>"has_more"in t&&typeof t.has_more=="boolean"&&"next_cursor"in t&&(typeof t.next_cursor=="string"||t.next_cursor===null)&&"notifications"in t&&Array.isArray(t.notifications)&&t.notifications.every(n=>typeof n=="object"&&n!==null&&"notification_id"in n&&typeof n.notification_id=="string"&&"type"in n&&typeof n.type=="string"&&"is_read"in n&&typeof n.is_read=="boolean")),aAt=({enabled:e=!0,reason:t})=>{const{data:n,error:r,isError:s,refetch:a,isLoading:o,isFetching:i,hasNextPage:c,fetchNextPage:u,isFetchingNextPage:d}=fc({enabled:e,queryKey:Hc(),queryFn:async({pageParam:h})=>(await ne.GET("/rest/notifications/in-app",t,{params:{query:{cursor:h}}})).data,getNextPageParam:h=>!h||h.notifications.length===0?null:h.next_cursor,initialPageParam:""}),m=f.useMemo(()=>n?.pages.flatMap(h=>h?.notifications??[])??[],[n]);return f.useMemo(()=>({refetch:a,error:r,isError:s,isLoading:o,isFetching:i,fetchNextPage:u,isFetchingNextPage:d,hasNextPage:c,notifications:m}),[a,r,s,m,c,u,d,o,i])},TM=({reason:e})=>{const t=gt(),n=Mt({mutationFn:o=>ne.POST("/rest/notifications/in-app/bulk-read",e,{body:{notification_ids:o?.notificationIds}}),onMutate:()=>{t.setQueryData(Hc(),o=>sAt(o)?{...o,pages:o?.pages.map(i=>({...i,notifications:i.notifications.map(c=>({...c,is_read:!0}))}))}:o)},onSuccess:()=>{t.invalidateQueries({queryKey:Hc()})}}),r=Mt({mutationFn:o=>ne.POST("/rest/notifications/in-app/{notification_id}/read",e,{params:{path:{notification_id:o.notificationId}}}),onSuccess:()=>{t.invalidateQueries({queryKey:Hc()})}}),s=Mt({mutationFn:o=>ne.DELETE("/rest/notifications/in-app/bulk-delete",e,{body:{notification_ids:[o.notificationId]}}),onSuccess:()=>{t.invalidateQueries({queryKey:Hc()})}}),a=Mt({mutationFn:()=>ne.DELETE("/rest/notifications/in-app/read",e),onSuccess:()=>{t.invalidateQueries({queryKey:Hc()})}});return f.useMemo(()=>({markAllAsRead:n,markAsRead:r,markAsDeleted:s,markAllReadAsDeleted:a}),[n,r,s,a])},oAt=e=>[e.deleteNotification],QSe=({notification:e,focused:t,onOpen:n,onClose:r,getMenuItems:s=oAt})=>{const{$t:a}=X(),{markAsDeleted:o}=TM({reason:"SidebarNotificationsListItemMenu"}),i=f.useMemo(()=>({type:"default",text:a({defaultMessage:"Delete notification",id:"+Nk8iq3V1o"}),icon:Ud,onClick:()=>{o.mutate({notificationId:e.notification_id})}}),[o,a,e.notification_id]),c=f.useMemo(()=>s({deleteNotification:i}),[s,i]);return l.jsx("div",{className:B("pointer-events-auto col-start-1 row-start-1 flex items-center justify-center justify-self-end opacity-0 group-hover/notification-list-item:opacity-100",{"opacity-100":t}),children:l.jsx(Aj,{menuId:e.notification_id,items:c,onOpen:n,onClose:r})})};QSe.displayName="SidebarNotificationsListItemMenu";const iAt=(e,t)=>{const r=Date.now()-t,s=Math.floor(r/6e4),a=Math.floor(s/60);return s<1?e.formatNumber(1,{style:"unit",unit:"minute",unitDisplay:"narrow"}):s<60?e.formatNumber(s,{style:"unit",unit:"minute",unitDisplay:"narrow"}):_L(new Date(t))?e.formatNumber(a,{style:"unit",unit:"hour"}):SUe(new Date(t))?e.formatDate(new Date(t),{month:"short",day:"numeric"}):e.formatDate(new Date(t),{year:"numeric",month:"short",day:"numeric"})},lAt=({notification:e,className:t,focused:n})=>{const r=X(),s=f.useMemo(()=>iAt(r,e.created_at_ms),[r,e.created_at_ms]);return l.jsxs("div",{className:B("col-start-1 row-start-1 flex items-center justify-end gap-1 text-nowrap group-hover/notification-list-item:opacity-0",t,{"opacity-0":n}),children:[l.jsx(D,{variant:"tinyRegular",color:"light",children:s}),l.jsx(GSe,{visible:!e.is_read})]})},Z1=({notification:e,getMenuItems:t,children:n})=>{const[r,s]=f.useState(!1),[a,o]=f.useState(!1),i=f.useCallback(()=>{s(!0)},[]),c=f.useCallback(()=>{s(!1)},[]);return l.jsxs(z,{variant:r||a?"offset":"transparent",className:"group/notification-list-item grid grid-cols-[1fr_max-content] grid-rows-1 gap-2 rounded-lg p-2",onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[l.jsx(XSe,{notification:e,className:"col-span-full row-start-1",children:n}),l.jsxs("div",{className:"col-start-2 row-start-1 grid grid-cols-1 grid-rows-1 items-center",children:[l.jsx(lAt,{notification:e,focused:r}),l.jsx(QSe,{notification:e,focused:r,getMenuItems:t,onOpen:i,onClose:c})]})]})};Z1.displayName="SidebarNotificationsListItemContainer";const XSe=({notification:e,className:t,children:n})=>{const{close:r}=Mc(),{trackEvent:s}=Te(),{markAsRead:a}=TM({reason:"SidebarNotificationsListItemContainer"}),o=f.useCallback(c=>{s("inbox notification clicked",{notificationId:e.notification_id,notificationType:e.type,wasUnread:!e.is_read,deeplinkPath:e.deeplink_path||void 0}),!(c.metaKey||c.ctrlKey)&&e.deeplink_path&&r(),!e.is_read&&a.mutate({notificationId:e.notification_id})},[s,e.notification_id,e.type,e.is_read,e.deeplink_path,r,a]),i=f.useMemo(()=>B("grid gap-2 text-left grid-cols-subgrid",t),[t]);return e.deeplink_path?l.jsx(at,{href:e.deeplink_path,className:i,onClick:o,children:l.jsx("div",{className:"col-start-1 row-start-1 flex min-w-0 gap-2",children:n})}):l.jsx("button",{type:"button",className:i,onClick:o,children:l.jsx("div",{className:"col-start-1 row-start-1 flex min-w-0 gap-2",children:n})})};XSe.displayName="SidebarNotificationsListItemAction";const J1=({title:e})=>l.jsx(D,{variant:"small",className:"line-clamp-1 text-left",children:e});J1.displayName="SidebarNotificationsListItemTitle";const ex=({primaryIcon:e,secondaryIcon:t})=>l.jsxs("div",{className:"relative flex size-9 shrink-0 items-center",children:[l.jsx("div",{className:"bg-subtle flex size-8 items-center justify-center rounded-full",children:l.jsx(be,{icon:e,size:"md"})}),l.jsx("div",{className:"bg-base absolute bottom-0 right-0 flex size-4 items-center justify-center rounded-full",children:l.jsx(be,{icon:t,size:"xs"})})]});ex.displayName="SidebarNotificationsListItemIcon";const kM=({items:e})=>{const t=l.jsx("span",{className:"mx-1 inline-block size-0.5 shrink-0 -translate-y-0.5 bg-current"});return l.jsx(D,{variant:"tinyRegular",color:"light",className:"min-w-0 truncate",children:e.map((n,r)=>l.jsxs(f.Fragment,{children:[r>0&&t,n]},r))})};kM.displayName="SidebarNotificationsListItemMeta";const cAt=({notification:e})=>{const{$t:t}=X(),{openToast:n}=On(),{openModal:r}=Mc(),s=f.useCallback(a=>[{type:"default",text:t({defaultMessage:"Edit alert",id:"84mzvWHJ9O"}),icon:uc,onClick:async()=>{const i=await eE({taskId:e.metadata.task_id,reason:"SidebarNotificationsListItemFinanceAlert"});if(!i){n(t({defaultMessage:"Can not edit alert. Alert has been deleted.",id:"ZXF6i2Ca2v"}),"error");return}r("financeAlertModal",{task:i})}},a.deleteNotification],[t,e.metadata.task_id,r,n]);return l.jsxs(Z1,{notification:e,getMenuItems:s,children:[l.jsx(ex,{primaryIcon:R0,secondaryIcon:Tu}),l.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[l.jsx(J1,{title:e.title}),l.jsx(kM,{items:[t({defaultMessage:"Finance",id:"Fm3M+yFIbr"}),e.body]})]})]})},yU=(e,t)=>{const{value:n,loading:r}=Ut({flag:"tasks-settings-ui-redesign",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},uAt=({notification:e})=>{const{$t:t}=X(),{openToast:n}=On(),{openModal:r}=Mc(),s=At(),{variation:a,loading:o}=yU(!1),i=f.useMemo(()=>SL(e.metadata.model_preference)??fe.DEFAULT,[e.metadata.model_preference]),c=kce(i),u=f.useCallback(async p=>{const g=await eE({taskId:e.metadata.task_id,reason:"SidebarNotificationsListItemFinanceAlert"});return g||(n(p,"error"),null)},[e.metadata.task_id,n]),d=f.useCallback(async()=>{const p=await u(t({defaultMessage:"Can not edit task. Task has been deleted.",id:"AsFehDyYGj"}));if(!p)return;const g=y=>{y==="updated"&&n(t({defaultMessage:"Task edited",id:"18F/N84T3b"}),"success",5,void 0,t({defaultMessage:"View Tasks",id:"L3nFsHqlqm"}),()=>s.push("/account/tasks"))};!o&&a?r("automationModal",{initial:p,source:"notifications_panel",initialConfiguration:Hce({selectedTask:p}),onSuccess:g}):r("scheduledTaskModal",{initial:p,source:"notifications_panel",onSuccess:g})},[u,r,a,o,n,t,s]),m=f.useCallback(async()=>{const p=await u(t({defaultMessage:"Can not turn off task. Task has been deleted.",id:"GqnRiHY3AK"}));if(p)try{await QP({taskId:p.id,payload:{status:"PAUSED"},reason:"SidebarNotificationsListItemScheduledTaskComplete"}),n(t({defaultMessage:"Task paused",id:"Ryhxeg2OIZ"}),"success",5,void 0,t({defaultMessage:"View Tasks",id:"L3nFsHqlqm"}),()=>s.push("/account/tasks"))}catch(g){ee.error(g),n(t({defaultMessage:"Failed to turn off task",id:"0sPa5XFHCj"}),"error")}},[u,n,t,s]),h=f.useCallback(p=>{const g={type:"default",text:t({defaultMessage:"Turn off task",id:"+H7RughJHn"}),icon:VTe,onClick:m},y={type:"default",text:t({defaultMessage:"Edit task",id:"dsTLW1Kx6B"}),icon:uc,onClick:d};return[g,y,p.deleteNotification]},[t,m,d]);return l.jsxs(Z1,{notification:e,getMenuItems:h,children:[l.jsx(ex,{primaryIcon:c,secondaryIcon:mS}),l.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[l.jsx(J1,{title:e.title}),l.jsx(kM,{items:[t(Vr[wL(i)].name),e.body]})]})]})},dAt=({notification:e})=>{const{$t:t}=X(),n=f.useMemo(()=>SL(e.metadata.model_preference)??fe.DEFAULT,[e.metadata.model_preference]),r=f.useMemo(()=>wL(n),[n]),s=kce(n);return l.jsxs(Z1,{notification:e,children:[l.jsx(ex,{primaryIcon:s,secondaryIcon:Ea}),l.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[l.jsx(J1,{title:e.title}),l.jsx(kM,{items:[t(Vr[r].name),e.body]})]})]})},ZSe=({notification:e})=>{switch(e.type){case"SCHEDULED_TASK_COMPLETE":return l.jsx(uAt,{notification:e});case"THREAD_COMPLETE":return l.jsx(dAt,{notification:e});case"FINANCE_ALERT":return l.jsx(cAt,{notification:e});default:return l.jsx(fAt,{notification:e})}},fAt=({notification:e})=>l.jsxs(Z1,{notification:e,children:[l.jsx(ex,{primaryIcon:Tu,secondaryIcon:Ea}),l.jsxs("div",{className:"flex flex-1 flex-col",children:[l.jsx(J1,{title:e.title}),l.jsx(D,{variant:"tiny",color:"light",className:"line-clamp-1",children:e.body})]})]});ZSe.displayName="SidebarNotificationsListItem";const JSe=()=>{const{isOpen:e}=Mc(),{notifications:t,refetch:n,isError:r,isLoading:s,isFetching:a,hasNextPage:o,fetchNextPage:i,isFetchingNextPage:c}=aAt({enabled:e,reason:"SidebarNotificationsList"}),u=gt(),{ref:d,isIntersecting:m}=gme({threshold:.5});f.useEffect(()=>{m&&o&&!c&&i()},[m,o,c,i]);const h=f.useCallback(()=>{u.setQueryData(Hc(),p=>{if(!(!p||p.pages.length===0))return{pages:[p.pages[0]],pageParams:[p.pageParams[0]]}})},[u]);return f.useEffect(()=>{e&&(h(),n())},[e,h,n]),s||r&&a?l.jsx("div",{className:"flex items-center justify-center p-4",children:l.jsx(Ns,{size:16})}):r?l.jsx(hAt,{refetch:n}):t.length===0?l.jsx(mAt,{}):l.jsxs("div",{className:"scrollbar-subtle pt-xs overflow-y-auto",children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[t.map(p=>l.jsx(ZSe,{notification:p},p.notification_id)),c&&l.jsx("div",{className:"flex items-center justify-center",children:l.jsx(Ns,{size:16})})]}),l.jsx("div",{ref:d})]})};JSe.displayName="SidebarNotificationsList";const mAt=()=>{const{$t:e}=X();return l.jsxs(D,{variant:"tinyRegular",color:"light",className:"flex flex-col items-center justify-center gap-2 p-4 opacity-70",children:[l.jsx(be,{icon:$Te,size:"2xl"}),l.jsx("span",{className:"w-36 text-center",children:e({defaultMessage:"Your notifications will appear here",id:"byRgJ1ceG3"})})]})},hAt=({refetch:e})=>{const{$t:t}=X();return l.jsxs(D,{variant:"tinyRegular",color:"light",className:"flex flex-col items-center justify-center gap-2 pb-4",children:[l.jsx(be,{icon:Are,size:"2xl",className:"opacity-70"}),l.jsx("span",{className:"mb-2 w-40 text-center opacity-70",children:t({defaultMessage:"There was an error loading your notifications",id:"CSvXfEOB3Y"})}),l.jsx(ye,{size:"small",variant:"border",text:t({defaultMessage:"Try again",id:"FazwRldA7z"}),onClick:()=>{e()}})]})},pAt=(e,t)=>{const{value:n,loading:r}=Ut({flag:"tasks-price-alerts-ui-redesign",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},eCe=({source:e,onOpen:t,onClose:n,openModal:r,children:s})=>{const{$t:a}=X(),o=Is(),{openModal:i}=_t(),{hasActiveSubscription:c}=Nt(),{variation:u,loading:d}=yU(!1),{variation:m,loading:h}=pAt(!1),p=r??i,g=[{type:"default",text:a({defaultMessage:"Scheduled",id:"cXAlMRerxW"}),icon:lu,onClick:()=>{!d&&u?p("automationModal",{source:e,initialConfiguration:AL(c),initialActiveCardKey:"action"}):p("scheduledTaskModal",{source:e})}},{type:"default",text:a({defaultMessage:"Price alert",id:"XMapyUiPpV"}),icon:Tu,onClick:()=>{!h&&m?p("automationModal",{source:e,initialConfiguration:zBe(),initialActiveCardKey:"trigger"}):p("financeAlertModal",{})}}];return l.jsx(en,{items:g,isMobileStyle:o,boxProps:{className:"shrink-0"},onOpen:t,onClose:n,children:s??l.jsx(ye,{variant:"border",size:"small",icon:mr})})};eCe.displayName="CreateTaskDropdown";const gAt="notifications-panel-header-menu",yAt="notifications-panel-header-create-task-menu",tCe=()=>{const{$t:e}=X(),{openModal:t}=Mc(),{markAllReadAsDeleted:n}=TM({reason:"SidebarNotificationsPanelHeader"}),r=[{type:"default",text:e({defaultMessage:"Delete all read",id:"CpNQrgahgD"}),icon:Ud,onClick:()=>{n.mutate()}}];return l.jsxs(z,{className:"gap-md px-sm pt-xs pb-sm -mx-xs flex items-center justify-between border-b",children:[l.jsx("div",{className:"ml-xs flex items-center gap-1",children:l.jsx(D,{variant:"smallBold",children:e({defaultMessage:"Notifications",id:"NAidKbB0vi"})})}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Aj,{menuId:gAt,items:r}),l.jsx(Aj,{menuId:yAt,menu:({onOpen:s,onClose:a})=>l.jsx(eCe,{source:"notifications_panel",onOpen:s,onClose:a,openModal:t,children:l.jsx(ke,{size:"tiny",icon:lu,toolTip:e({defaultMessage:"Schedule a notification",id:"7Zbhtucuv7"})})})})]})]})};tCe.displayName="SidebarNotificationsPanelHeader";const nCe=({ref:e})=>l.jsx("div",{ref:e,className:"group/sidebar-notifications max-h-[50vh] w-[400px]",children:l.jsxs("div",{className:"grid h-full grid-cols-1 grid-rows-[min-content_1fr]",children:[l.jsx(tCe,{}),l.jsx(JSe,{})]})});nCe.displayName="SidebarNotifications";const rCe=(e,t)=>{const{value:n,loading:r}=Ut({flag:"app-notifications",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},sCe=({ref:e})=>{const t="sidebar-notifications",{variation:n,loading:r}=rCe(!1),s=Je(),{isOpen:a,close:o}=Mc(),i=Rp(),{markAllAsRead:c}=TM({reason:t}),u=f.useCallback(()=>{o(()=>{c.mutate()})},[c,o]);return r||!n||!s?null:l.jsx("div",{className:"relative flex flex-col items-center justify-center",children:l.jsx(ci,{isOpen:a,onClose:u,placement:i?"top-end":"top-start",content:l.jsx(nCe,{ref:e}),contentClassName:"inline-flex",childrenClassName:"inline-flex w-full",sideOffset:5,children:l.jsx(KSe,{})})})};sCe.displayName="SidebarNotifications";const aCe=f.memo(({icon:e,selected:t,hovered:n,iconSize:r=24,showBadge:s=!1,className:a})=>l.jsxs(z,{className:"grid size-[40px] place-items-center",children:[l.jsx(z,{variant:"offsetPlus",className:B("size-[90%] rounded-md duration-100 [grid-area:1/-1] group-hover:opacity-100",{"opacity-0":!t&&!n},a)}),l.jsxs("div",{className:"relative [grid-area:1/-1]",children:[l.jsx(be,{icon:e,size:r,className:B("duration-100 group-hover:scale-110",{"text-foreground":t,"text-quiet":!t,"scale-110":t||n})}),s&&l.jsx(pU,{variant:"iconOnly"})]})]}));aCe.displayName="SidebarTabButton";const oCe=f.memo(({icon:e,title:t,selected:n,hovered:r,href:s,onHover:a,onLeave:o,onClick:i,showBadge:c=!1})=>l.jsxs(at,{href:s,"data-testid":`sidebar-${t.toLowerCase()}`,className:"p-sm group flex w-full flex-col items-center justify-center gap-0.5",onMouseEnter:a,onMouseLeave:o,onClick:i,children:[l.jsx(aCe,{icon:e,selected:n,hovered:r,showBadge:c}),l.jsx(D,{variant:"micro",color:n?"default":"light",className:B("line-clamp-2 w-full text-ellipsis text-center leading-[1.1]",{"font-medium":n}),children:t})]}));oCe.displayName="SidebarTab";const iCe=()=>{const{$t:e}=X(),{trackEvent:t}=Te(),{openModal:n}=_t(),r=f.useCallback(()=>{t("sidebar pro upsell clicked"),n("pricingModal",{origin:Be.SIDEBAR_PRO_UPSELL})},[t,n]);return l.jsxs("button",{className:"gap-xs group inline-flex appearance-none flex-col items-center",onClick:r,"data-testid":"sidebar-upgrade-button",children:[l.jsx(z,{variant:"offsetPlus",className:"flex size-8 items-center justify-center rounded-full duration-100 group-hover:opacity-80",children:l.jsx(D,{color:"default",children:l.jsx(ql,{className:"size-4"})})}),l.jsx(D,{variant:"micro",color:"light",className:"px-xs w-full truncate text-center",children:e({defaultMessage:"Upgrade",id:"0h/lPMeYkq"})})]})};iCe.displayName="SidebarUpgradeButton";const vAt=({category:e})=>{const{$t:t}=X();let n="/spaces";return e==="invited"?n="/spaces#invites":e==="organization"?n="/spaces#organization":(e==="private"||e==="saved"||e==="shared")&&(n="/spaces#my-spaces"),l.jsx(at,{href:n,className:"m-0 w-full border-none bg-transparent p-0 text-left no-underline",children:l.jsx(D,{variant:"tinyRegular",color:"light",className:"duration-200 hover:opacity-60",children:t({defaultMessage:"View All",id:"wbcwKddwLa"})})})},lCe=A.memo(({item:{title:e,slug:t,emoji:n},sidebarOpen:r})=>{const{setMobileSidebarOpen:s}=wc(),a=Pt(),o=`/spaces/${t}`,i=f.useCallback(()=>{s(!1)},[s]);return l.jsx(ws,{href:o,text:e,fadeOut:!0,selected:a===o,sidebarOpen:r,onClick:i,icon:n?l.jsx("div",{className:"flex size-[12px] items-center justify-center",children:l.jsx(Ru,{unified:n,size:"tiny"})}):l.jsx("div",{className:"flex size-[12px] items-center justify-center",children:l.jsx(be,{icon:ya,className:"text-quiet size-4 shrink-0"})})})});lCe.displayName="SpaceHistoryItem";const wte={organization:{defaultMessage:"Organization",id:"K56Dims7Up"},private:{defaultMessage:"Private",id:"viXE3205/2"},shared:{defaultMessage:"Shared",id:"kWI6zXRaHY"},saved:{defaultMessage:"Saved",id:"fsB/4pdUqN"},invited:{defaultMessage:"Invites",id:"Wy+IdbkBFc"}},xAt={organization:"/spaces#organization",private:"/spaces#my-spaces",shared:"/spaces#my-spaces",saved:"/spaces#my-spaces",invited:"/spaces#invites"};function bAt({category:e,accessory:t,sidebarOpen:n,isLastCategory:r}){const s="spaces-sidebar-section",{$t:a}=X(),{data:o,isLoading:i}=Iqe({category:e,reason:s}),c=f.useMemo(()=>o?.pages.flatMap(u=>u).filter(u=>u!==void 0)??ce,[o?.pages]);return i||c.length===0?null:l.jsxs(l.Fragment,{children:[l.jsx(Gh,{href:xAt[e]||"/spaces",text:a(wte[e]||wte.private),accessory:t}),l.jsx(h0,{show:!0,data:c,type:"space_navbar_item",HistoryComponent:({item:u,position:d})=>l.jsx(lCe,{item:u,position:d,sidebarOpen:n}),wrapperClassName:"!m-0 !px-0 !border-0 flex flex-col gap-1.5"}),c[c.length-1]?.has_next_page&&l.jsx(vAt,{category:e}),!r&&l.jsx(m0,{})]})}const cCe=A.memo(({item:{title:e,slug:t,emoji:n,user_permission:r},sidebarOpen:s})=>{const{setMobileSidebarOpen:a}=wc(),o=`/spaces/${t}`,i=f.useCallback(()=>{a(!1)},[a]),c=_h(r),u=Pt();return l.jsx(ws,{href:o,text:e,fadeOut:!0,selected:u===o,sidebarOpen:s,onClick:i,icon:c?l.jsx("div",{className:"flex size-[12px] items-center justify-center",children:l.jsx(be,{icon:d8,className:"text-quiet size-4 shrink-0"})}):n?l.jsx("div",{className:"flex size-[12px] items-center justify-center",children:l.jsx(Ru,{unified:n,size:"tiny"})}):l.jsx("div",{className:"flex size-[12px] items-center justify-center",children:l.jsx(be,{icon:ya,className:"text-quiet size-4 shrink-0"})})})});cCe.displayName="CollectionHistoryItemV2";const Ste="pb-lg flex flex-col gap-[12px]",uCe=f.memo(({sidebarOpen:e})=>{const t="spaces-sidebar",{data:n,isLoading:r}=Rqe({reason:t}),s=Je(),{$t:a}=X(),o=ul(),{openModal:i}=_t(),c=$9(),u=Array.isArray(o?.slug)?o.slug[0]:o?.slug,{collection:d}=xc({collectionSlug:u,reason:t}),{handleCreateNewSpace:m}=V9(),{templateSpace:h}=Xde({collectionSlug:u??"",reason:t}),p=f.useCallback(()=>{i("spaceCreate",{existingCollection:null,onCreate:null})},[i]),g=f.useCallback(()=>{c?m():p()},[c,m,p]),{openVisitorLoginUpsell:y}=$n({enabled:!s}),x=!(n!==void 0&&((n.organization_spaces?.length??0)>0||(n.saved_spaces?.length??0)>0||(n.private_spaces?.length??0)>0||(n.invited_spaces?.length??0)>0||(n.shared_spaces?.length??0)>0)),b=BG.filter(_=>{const w=(()=>{switch(_){case"private":return n?.private_spaces;case"shared":return n?.shared_spaces;case"saved":return n?.saved_spaces;case"organization":return n?.organization_spaces;case"invited":return n?.invited_spaces;default:return[]}})();return w&&w.length>0});return x?l.jsxs("div",{className:Ste,children:[l.jsx(ws,{href:"/spaces/templates",text:a({defaultMessage:"Welcome",id:"PwaN2oE2pC"}),icon:l.jsx(be,{icon:ya,size:"sm"}),sidebarOpen:e}),r?l.jsx(Fw,{}):l.jsx(ws,{icon:mr,onClick:_=>{s?(_.preventDefault(),g()):(_.preventDefault(),y({title:a({defaultMessage:"Focus your Perplexity experience in Spaces",id:"spZP/TobF9"}),origin:Be.SPACES_PAGE}))},text:a({defaultMessage:"Create a Space",id:"SqVNRzqwJz"}),deemphasized:!0,testId:"create-space-empty-state-button",sidebarOpen:e})]}):l.jsxs("div",{className:Ste,children:[l.jsxs(f0,{children:[l.jsx(ws,{href:"/spaces/templates",text:a({defaultMessage:"Templates",id:"A3ptulOTB3"}),icon:l.jsx(be,{icon:WTe}),sidebarOpen:e}),!!h&&d&&l.jsx(cCe,{item:d,position:0,sidebarOpen:e}),l.jsx(ws,{onClick:g,text:a({defaultMessage:"Create new Space",id:"ZyNYnZRkPz"}),icon:mr,sidebarOpen:e})]}),l.jsx(m0,{}),r?l.jsx(Fw,{}):BG.map(_=>l.jsx(bAt,{category:_,sidebarOpen:e,accessory:_==="private"?l.jsx(ke,{toolTip:a({defaultMessage:"Create new Space",id:"ZyNYnZRkPz"}),icon:mr,size:"tiny",extraCSS:"-mr-sm",onClick:g,testId:"create-space-plus-btn"}):void 0,isLastCategory:_===b[b.length-1]},_))]})});uCe.displayName="SpacesSidebar";const qb=30,NM=({autoFetch:e,reason:t})=>{const n=Ot(),r=gt(),s=async({pageParam:p=0})=>{(!p||p<0)&&(p=1);const g=(p-1)*qb;return await MGe({params:{limit:qb,offset:g},reason:t})},a=fc({queryKey:Jt,enabled:e&&!!n,initialPageParam:0,queryFn:({pageParam:p})=>s({pageParam:p}),getNextPageParam:(p,g)=>p&&p[0]?.has_next_page?g.length+1:void 0}),o=a.data?.pageParams?.length??1,i=a.data?.pages??ce,c=f.useMemo(()=>i.flat(),[i]),u=i[i.length-1]?.[0]?.has_next_page,d=f.useMemo(()=>({currentPage:o,hasNextPage:!!u,hasPreviousPage:o>1,getNextPage:()=>a.fetchNextPage(),getPreviousPage:()=>a.fetchPreviousPage()}),[o,u,a]),m=f.useCallback(p=>{const g=[],y=[];let v=0;for(;v<p.length;)y.push(g.length),g.push(p.slice(v,v+qb)),v+=qb;r.setQueryData(Jt,{pages:g,pageParams:y})},[r]),h=f.useCallback(()=>{!d.hasNextPage||a.isLoading||d.getNextPage()},[a.isLoading,d]);return f.useMemo(()=>({...a,fetchNextPage:h,collections:c,paginationInfo:d,updateCache:m}),[c,h,d,a,m])},_At=({reason:e})=>{const{collections:t}=NM({autoFetch:!0,reason:e}),{data:n}=Kde({reason:e}),r=t?.filter(o=>!_h(o.user_permission)),s=n?.[0]?.link;return r?.length===0?"/spaces/templates/":s||"/spaces/templates/"},dCe=()=>{const[e,t]=f.useState(!1),[n,r]=f.useState(!1),[s,a]=f.useState(""),o=f.useCallback(()=>{r(!0),setTimeout(()=>{r(!1)},2e3)},[]),i=f.useCallback(()=>{a("Brandmark copied to clipboard"),t(!1),o()},[o]),c=f.useCallback(()=>{a("Logo copied to clipboard"),t(!1),o()},[o]),u=f.useCallback(()=>{a("Brand kit downloading..."),t(!1),o()},[o]),d=f.useCallback(()=>{t(!1)},[]);return f.useMemo(()=>({toastCopy:s,toastVisible:n,isBrandDropdownOpen:e,setBrandDropdownOpen:t,handleBrandCopy:i,handleLogoCopy:c,handleDownload:u,handlePopoverClose:d}),[i,u,c,d,e,s,n])},wAt=A.memo(()=>l.jsx("svg",{className:"h-auto w-[14px]",width:"278",height:"330",viewBox:"0 0 278 330",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:l.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M126.99 83.0617L37.008 0.156738V98.524H0V240.866H37.11V329.64L126.99 250.476V325.948H150.506V249.154L241.005 328.664V240.866H278V98.524H240.891V0.156755L150.506 83.4328V4.1913H126.99V83.0617ZM109.019 121.826L37.088 187.144V217.564H23.5159V121.826H109.019ZM151.01 137.113L217.396 197.396V240.866H217.489V276.862L151.01 218.454V137.113ZM241.005 186.421L169.711 121.826H254.484V217.564H241.005V186.421ZM60.625 197.477L126.99 137.199V219.3L60.625 277.752V197.477ZM168.661 98.524L217.375 53.6415V98.524H168.661ZM60.524 53.6416L109.238 98.524H60.524V53.6416Z",fill:"currentColor"})}));wAt.displayName="Brandmark";const vU=A.memo(({children:e,onLogoCopy:t,onBrandmarkCopy:n,onDownload:r,...s})=>{const a=A.lazy(()=>oe(()=>import("./BrandPopoverContent-CG-VNYwd.js"),__vite__mapDeps([129,1,2,5,4,3]))),o=f.useMemo(()=>l.jsx("div",{className:"w-[200px]",children:l.jsxs(z,{className:"gap-sm p-sm flex flex-col",children:[l.jsx(Wi,{noLines:!0,size:"tiny"}),l.jsx(Wi,{noLines:!0,size:"tiny"}),l.jsx(Wi,{noLines:!0,size:"tiny"})]})}),[]),i=f.useMemo(()=>l.jsx(f.Suspense,{fallback:o,children:l.jsx(a,{onLogoCopy:t,onBrandmarkCopy:n,onDownload:r})}),[a,o,n,r,t]);return l.jsx(ci,{content:i,placement:"right-start",...s,children:e})});vU.displayName="BrandPopover";const SAt=()=>{const{isMax:e}=Nt(),{isEnterprise:t,isFetching:n}=QL({reason:"sidebar-v2"}),s=Je()&&!n&&!t;return f.useMemo(()=>s&&!e,[e,s])},CAt=e=>{switch(e?.split("/").slice(1)?.[0]??""){case"":case"search":case"page":return"home";case"spaces":case"collections":return"spaces";case"discover":return"discover";default:return"home"}},fCe=f.memo(({appContentWrapperRef:e,minimalMode:t})=>{const n="sidebar-v2",[r,s]=f.useState(null),a=Pt(),o=f.useRef(null),i=f.useRef(null),c=f.useRef(null),u=f.useRef(null),d=f.useRef(null),m=f.useRef(null),{isSidebarPinned:h,actions:p}=hn(),g=ea({reason:n}),y=f.useRef(null),[v,x]=f.useState(null),[b,_]=f.useState(!1),w=At(),S=Je(),{openVisitorLoginUpsell:C}=$n({enabled:!S}),E=_At({reason:n}),T=Ht()?.get("spaces_created")==="true",I=f.useRef(null),j=f.useRef(null),[N,P]=f.useState(!1),[R,k]=f.useState(!1),O=h&&!t,{setBrandDropdownOpen:L,handleBrandCopy:F,handleDownload:U,handleLogoCopy:V,isBrandDropdownOpen:W,handlePopoverClose:H,toastCopy:G,toastVisible:K}=dCe(),$=tn(),{isWindowsApp:q}=Wt(),{handleShowPanel:Z}=bf(),{shouldShowLossAversionModal:se,handleOpenLossAversion:Y}=Ip(),{isEnterprise:Q}=QL({reason:"sidebar-v2"}),re=Oe=>{Oe.button===2&&(Oe.preventDefault(),L(!0))},te=Oe=>{i.current=setTimeout(()=>{s(Oe)},100),o.current&&clearTimeout(o.current),d.current&&clearTimeout(d.current),c.current&&clearTimeout(c.current),m.current&&clearTimeout(m.current)},le=v||CAt(a),{$t:ie}=X(),pe=()=>{i.current&&clearTimeout(i.current),o.current=setTimeout(()=>{s(null)},500)},me=()=>{p.setIsSidebarPinned(!h)},de=f.useCallback(()=>{s(null),_(!1)},[s,_]),ve=()=>{o.current&&clearTimeout(o.current),d.current&&clearTimeout(d.current),c.current&&clearTimeout(c.current),m.current&&clearTimeout(m.current)},Ae=()=>{i.current&&clearTimeout(i.current),c.current=setTimeout(()=>{s(null)},150),d.current=setTimeout(()=>{_(!1)},150)},Se=f.useMemo(()=>{if(r||b){const Oe=r??le;return y.current=Oe,Oe}return y.current&&!O?(setTimeout(()=>{y.current=null},500),y.current):O||b?le:"home"},[r,le,O,b]),De=f.useCallback(()=>{if(de(),q)Z();else if(se)Y({args:{callback:()=>{w.push("/")},origin:Be.NEW_THREAD_BUTTON}});else{w.push("/");const Oe=document.getElementById("ask-input");Oe&&Oe.focus()}},[se,Y,w,q,Z,de]);f.useEffect(()=>{x(null)},[a]);const Ne=r!==null||O||b,Pe=f.useCallback(()=>{m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{de()},1e3)},[de]),dt=f.useMemo(()=>[{id:"home",title:ie({defaultMessage:"Home",id:"ejEGdxSUGs"}),icon:Ure,menuComponent:l.jsx(H6t,{isOpen:Ne,onCreateClick:de,onDeleteThreadOrBookmark:Pe,isConfiguring:R,setIsConfiguring:k}),href:"/",actions:[{text:ie({defaultMessage:"Customize Sidebar",id:"/4kt7TXcZf"}),onClick:()=>{k(!0)},show:!0,type:"default",size:Ft.small,icon:z_}]},{id:"discover",title:ie({defaultMessage:"Discover",id:"cE4HfwyEyr"}),icon:Bre,accessoryIcon:z_,accessoryClick:Oe=>{S?P(!0):(Oe.preventDefault(),C({title:ie({defaultMessage:"Sign in to customize your Discover Feed",id:"tlclIdp++4"}),origin:Be.DISCOVER_TOPICS}))},accessoryTooltip:ie({defaultMessage:"Personalize Discover",id:"d0oRgWBA8Q"}),href:"/discover",menuComponent:l.jsx(cbe,{isConfiguring:N,setConfiguring:P,sidebarOpen:Ne})},{id:"spaces",title:ie({defaultMessage:"Spaces",id:"ZMoczsYew9"}),icon:ya,menuComponent:l.jsx(uCe,{sidebarOpen:Ne}),href:E,requireLogin:!0,showBadge:T}],[N,P,ie,S,C,Ne,de,Pe,R,k,E,T]),et=f.useMemo(()=>dt.find(Oe=>Oe.id===Se),[Se,dt]),Et=Oe=>{const Tt=I.current&&I.current.contains(Oe.target);if(Tt){Ue();return}j.current&&j.current.contains(Oe.target)&&!Tt&&ue(Oe)},ue=Oe=>{d.current&&clearTimeout(d.current),!(I.current&&I.current.contains(Oe.target))&&(u.current=setTimeout(()=>{_(!0)},100),m.current&&clearTimeout(m.current))},Ue=()=>{u.current&&clearTimeout(u.current),d.current=setTimeout(()=>{_(!1)},100)},Ct=f.useCallback(Oe=>{(Oe.metaKey||Oe.ctrlKey)&&Oe.key===";"&&(Oe.preventDefault(),p.setIsIncognito(!g))},[p,g]);f.useEffect(()=>(document.addEventListener("keydown",Ct),()=>{document.removeEventListener("keydown",Ct)}),[Ct]);const Ye=SAt(),mt=!t&&!q&&!$&&S,We=Rp();return l.jsxs(z,{variant:"transparent",className:B("group/sidebar relative z-10 hidden min-h-0 flex-none flex-row-reverse md:flex",{"duration-100":t}),children:[t&&l.jsx(z,{variant:"background",className:"absolute inset-y-0 -right-px left-0"}),l.jsx(HSe,{isOpen:Ne,title:et?.title??"closed",onPin:me,pinned:O,onMouseEnter:ve,onMouseLeave:Ae,appContentWrapperRef:e,actions:et?.actions,canPin:!t,accessory:et?.accessoryIcon&&l.jsx(ke,{icon:et.accessoryIcon,onClick:et.accessoryClick,size:"tiny",toolTip:et.accessoryTooltip,tooltipLayout:"bottom"}),children:et?.menuComponent}),l.jsxs(z,{ref:j,variant:"transparent",style:{width:ym},className:"py-md relative flex h-full flex-col items-center",children:[l.jsx(vU,{onLogoCopy:V,onBrandmarkCopy:F,onDownload:U,onClose:H,isOpen:W,children:l.jsx(at,{href:"/",className:B("mt-xs active:ease-outExpo block duration-100 ease-out active:scale-[0.97]",{"opacity-50 duration-100":t,"!opacity-100":t&&Ne}),onContextMenu:re,children:l.jsx(Wa,{variant:"mark",size:"small",includeEffects:!0})})}),l.jsxs("div",{onMouseEnter:t?ue:void 0,onMouseOver:t?Et:void 0,onMouseLeave:t?Ue:void 0,className:B("pt-sm relative flex w-full flex-1 flex-col items-center",{"opacity-0 transition-opacity duration-100":t,"opacity-100":t&&Ne}),children:[l.jsx(ye,{icon:mr,onClick:De,pill:!0,extraCSS:"my-lg hover:scale-105",toolTip:ie({defaultMessage:"New Thread",id:"76XSxT3hV8"}),tooltipLayout:We?"left":"right",testId:"sidebar-new-thread"}),l.jsx("div",{className:"pb-xl w-full",onMouseEnter:t?void 0:ue,onMouseOver:t?void 0:Et,onMouseLeave:t?void 0:Ue,children:dt.map(Oe=>l.jsx(oCe,{icon:Oe.icon,title:Oe.title,selected:le===Oe.id,hovered:r===Oe.id,href:Oe.href,onHover:()=>te(Oe.id),onLeave:pe,showBadge:Oe.showBadge,onClick:Tt=>{Oe.requireLogin&&!S?(Tt.preventDefault(),C({title:ie({defaultMessage:"Focus your Perplexity experience in Spaces",id:"spZP/TobF9"}),origin:Be.SPACES_PAGE})):x(Oe.id)}},Oe.id))})]}),l.jsxs("div",{className:"pb-sm gap-md mt-auto flex w-full min-w-0 flex-col items-center justify-center [&>*]:w-full",children:[l.jsx(sCe,{ref:I}),l.jsx($Se,{showBottomLabels:Ye}),Q&&l.jsx(WSe,{}),Ye&&l.jsx(iCe,{}),Ye&&mt&&l.jsx(eAt,{})]})]}),l.jsx(_u,{message:G,variant:"success",isVisible:K,timeout:2})]})});fCe.displayName="SidebarV2";const mCe=A.memo(({collapsed:e})=>{const{$t:t}=X(),{isMacOS:n,isWindowsApp:r}=Wt(),{handleShowPanel:s}=bf(),{shouldShowLossAversionModal:a,handleOpenLossAversion:o}=Ip(),i=At(),c=VP(p=>p.globalShortcuts[os.NEW_THREAD]),u=n?Dn.MACOS:Dn.WINDOWS,d=f.useMemo(()=>c[u],[u,c]),m=f.useMemo(()=>d.map(p=>yGe(p)),[d]),h=f.useCallback(()=>{r?s():a?o({args:{callback:()=>{i.push("/",void 0,"New thread loss aversion")},origin:Be.NEW_THREAD_BUTTON}}):i.push("/",void 0,"New thread button")},[r,a,s,o,i]);return l.jsx("div",{onClick:h,className:e?"-mb-sm py-lg":"pt-sm",children:e?l.jsx("div",{className:"flex items-center justify-center",children:l.jsx(ye,{tooltipLayout:"right",icon:mr,pill:!0,toolTip:t({defaultMessage:"New Thread",id:"76XSxT3hV8"})})}):l.jsx("div",{className:"ml-xs",children:l.jsxs(z,{variant:"background",className:"mx-md py-sm pl-md pr-sm hover:ring-super group flex flex-none cursor-pointer select-none items-center justify-between rounded-full border ring-1 ring-transparent transition duration-200",children:[l.jsx(D,{variant:"smallBold",color:"light",className:"line-clamp-1 overflow-hidden text-clip",children:t({defaultMessage:"New Thread",id:"76XSxT3hV8"})}),l.jsx(D,{variant:"tiny",color:"light",className:"flex items-center gap-0 whitespace-nowrap",children:m.map(p=>l.jsx(z,{className:B("flex items-center justify-center rounded border font-mono",{"text-xs":p!=="","px-xs h-4 min-w-4":m.length<=2,"px-xs h-3.5 min-w-3.5":m.length===3}),children:p},p))})]})})})});mCe.displayName="NewThreadButton";var JN={},Cte;function EAt(){return Cte||(Cte=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="fas",n="building",r=384,s=512,a=[127970,61687],o="f1ad",i="M48 0C21.5 0 0 21.5 0 48L0 464c0 26.5 21.5 48 48 48l96 0 0-80c0-26.5 21.5-48 48-48s48 21.5 48 48l0 80 96 0c26.5 0 48-21.5 48-48l0-416c0-26.5-21.5-48-48-48L48 0zM64 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zm112-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zm80 16c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zM80 96l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zm80 16c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zM272 96l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faBuilding=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(JN)),JN}var MAt=EAt();const TAt=({isEnterprise:e})=>{const t="enterprise-or-social",{$t:n}=X(),{organization:r,isLoading:s}=pn({reason:t}),{isWindowsApp:a}=Wt(),o=Op();return s&&!a?l.jsx(Ln,{className:"p-sm divide-subtlest border-subtlest ring-subtlest h-14 border-t",children:l.jsx("div",{className:"bg-offsetPlus h-8 w-full rounded-md"})}):l.jsxs("div",{className:e||!a?"h-14 items-stretch":"",children:[e&&l.jsx(z,{className:"p-sm h-full border-t",children:l.jsx(at,{href:e?`${o}/org`:"",children:l.jsxs(z,{className:"gap-sm p-sm flex cursor-pointer items-center rounded-full",bgHover:"offsetPlus",children:[r?.logo?l.jsx(Cn,{size:"small",user:r?.logo,altText:"Logo"}):l.jsx(D,{children:l.jsx(xt,{icon:MAt.faBuilding})}),l.jsx(D,{variant:"smallBold",className:"line-clamp-1 grow",children:r?.display_name})]})})}),!e&&!a&&l.jsx(z,{className:"p-sm border-t",children:l.jsx(gU,{text:n({defaultMessage:"Download",id:"5q3qC0sC3r"})})})]})},kAt=({children:e})=>{const[t,n]=f.useState(!1),r=Ot(),s=()=>{n(!1)};return l.jsx(ci,{childrenClassName:"inline-flex min-w-0",placement:"top-start",isOpen:t,onOpen:()=>{n(!0)},onClose:()=>{n(!1)},content:l.jsx(DSe,{session:r,onClick:s}),children:e})},NAt=({imageProps:e,title:t,description:n,buttonText:r,buttonVariant:s,onClick:a,onDismiss:o,useBackgroundImage:i=!1,buttonSize:c="small"})=>{const{image:u,imageAlt:d,imageHeight:m,imageWidth:h,imageClassName:p,imageIsRoundedFull:g}=e;return l.jsx("div",{className:"m-1",children:l.jsxs(z,{variant:i?"offsetPlus":"background",className:B("relative",i?"mx-md p-md animate-in fade-in rounded-[12px] border duration-300 ease-out":"mx-sm rounded-lg p-[10px]"),children:[i&&l.jsxs(l.Fragment,{children:[l.jsx("img",{src:k8e,alt:H$,className:"absolute inset-0 rounded-[12px] object-cover dark:hidden"}),l.jsx("img",{src:N8e,alt:H$,className:"light:hidden absolute inset-0 rounded-[12px] object-cover"})]}),l.jsx("img",{src:u,alt:d,className:B("mb-md",g?"rounded-full":"rounded",p),height:m,width:h}),l.jsx(D,{variant:"smallBold",className:"mb-xs text-center",children:t}),l.jsx(D,{color:"light",variant:"small",className:"mb-md text-center leading-tight",children:n}),l.jsx("div",{className:"w-full",children:l.jsx(ye,{fullWidth:!0,text:r,variant:s,size:c,onClick:a})}),o&&l.jsx("div",{className:"right-xs top-xs absolute",children:l.jsx(ke,{icon:Xt,size:"small",onClick:o})})]})})},hCe=A.memo(()=>{const e=X(),{trackEvent:t}=Te(),n=At(),{actions:r}=hn(),s=Op(),a=f.useCallback(()=>{r.setIsSidebarConnectorsAdDismissed(!0),t("sidebar connectors upsell clicked",{}),n.push(`${s}/connectors`)},[r,t,n,s]),o=f.useCallback(()=>{t("sidebar connectors upsell dismissed",{}),r.setIsSidebarConnectorsAdDismissed(!0)},[r,t]),i=f.useMemo(()=>({image:I8e,imageAlt:"Sidebar connectors showcase image",imageHeight:128,imageWidth:128,imageClassName:"mx-auto mt-md"}),[]);return l.jsx(NAt,{imageProps:i,title:e.formatMessage({defaultMessage:"Connect your files",id:"tQyDiwqfQw"}),description:"",buttonText:e.formatMessage({defaultMessage:"Get started",id:"/aBLH2Kytu"}),buttonVariant:"primary",buttonSize:"regular",onClick:a,onDismiss:o,useBackgroundImage:!0})});hCe.displayName="SidebarConnectorsAd";const AAt=()=>{const{$t:e}=X(),{actions:t}=hn(),{isEnterpriseAdDismissed:n}=hn(),{handleSidebarAdClick:r}=Nme();return n?null:l.jsxs(z,{className:"px-md pb-sm",children:[l.jsxs("div",{className:"gap-x-xs flex items-center justify-between",children:[l.jsx(D,{variant:"smallBold",className:"inline",children:l.jsx(at,{onClick:r,className:"hover:text-super duration-300",children:e({defaultMessage:"Invite your teammates",id:"P1ZqgVAx88"})})}),l.jsx("div",{className:"-mr-sm",children:l.jsx(ke,{ariaLabel:e({defaultMessage:"Close",id:"rbrahOGMC3"}),icon:Xt,size:"small",pill:!0,onClick:()=>t.setIsEnterpriseAdDismissed(!0)})})]}),l.jsx(D,{color:"light",variant:"small",className:"-mt-xs",children:e({defaultMessage:"Want to use Perplexity with your team or business?",id:"6vISFfmj6M"})}),l.jsx("div",{className:"mt-sm gap-x-sm flex",children:l.jsx(ye,{size:"small",onClick:r,fullWidth:!0,chevron:!0,chevronIcon:Jr,text:e({defaultMessage:"Learn More",id:"7DIW6+rckr"})})})]})},PAt=async({stringProperties:e,headers:t,reason:n})=>{if(!t["accept-language"])return ee.warn("No accept-language header provided for translation request"),e;const r=await ne.POST("/rest/translation/translate",n,{body:{texts:e},headers:{...t}});return r.response.ok?r.data?.translated_texts??[]:(ee.error(`Failed to fetch translations for ${e.join(", ")}}`),[])},RAt=e=>e==null||e==="";async function pCe({originalContent:e,keysToTranslate:t,reason:n}){const r=Jc();if(r===mu)return e;const s=t.map(o=>e[o]);if(s.some(RAt))return e;const a=await PAt({stringProperties:s,headers:{"accept-language":r},reason:n});if(a.length===s.length){const o={...e};return t.forEach((i,c)=>{o[i]=a[c]}),o}return e}const IAt=()=>{const e="subs-ad",[t,n]=f.useState(!1),{hasActiveSubscription:r}=Nt(),{trackEvent:s}=Te(),[a,o]=f.useState({bannerTitleText:"",bannerBodyText:"",bannerButtonText:"",buttonVariant:"common"}),{value:i}=vf({flag:"pro-upsell-banner-customization-flag",subjectType:"user_nextauth_id",defaultValue:{bannerTitleText:"",bannerBodyText:"",bannerButtonText:"",buttonVariant:"common"}});if(f.useEffect(()=>{(async()=>{const h=await pCe({originalContent:i,keysToTranslate:["bannerTitleText","bannerBodyText","bannerButtonText"],reason:e});o(h),n(!0)})()},[i]),f.useEffect(()=>{r||s("sidebar pro upsell viewed",{})},[r,s]),r)return null;const{bannerTitleText:c,bannerBodyText:u,bannerButtonText:d}=a;return!t||!c||!u||!d?null:l.jsxs(z,{className:"px-md pb-sm animate-in fade-in duration-200",children:[l.jsx("div",{children:l.jsx(D,{variant:"smallBold",className:"inline",children:l.jsx(at,{href:"/pro",className:"hover:text-super duration-300",children:c})})}),l.jsx(D,{color:"light",variant:"small",children:u}),l.jsx("div",{className:"mt-xs",children:l.jsx(she,{text:d,origin:Be.LEFT_HAND_NAV,variant:i.buttonVariant})})]})};function jAt({reason:e}){const{organization:t}=pn({reason:e}),n=t?.uuid??"",{value:r}=Ut({flag:"org-connectors-blocklist",subjectType:"user_nextauth_id",defaultValue:!1,extraAttributes:{orgUuid:n}});return r}const OAt=({reason:e})=>{const{organization:t}=pn({reason:e}),n=t?.settings?.disabled_connectors,r=n?.includes(Pn.GOOGLE_DRIVE)&&n?.includes(Pn.ONEDRIVE)&&n?.includes(Pn.SHAREPOINT);return f.useMemo(()=>({allFileConnectorsDisabled:r,disabledConnectors:n}),[r,n])},LAt=()=>{const e="sidebar-ads",{hasAccessToProFeatures:t}=Nt(),{isEnterprise:n,orgUser:r,isLoading:s}=pn({reason:e}),a=r?.role==="MEMBER",o=Je(),{hasLoadedSettings:i}=js({reason:e}),{isSidebarConnectorsAdDismissed:c}=hn(),u=jAt({reason:e}),{allFileConnectorsDisabled:d}=OAt({reason:e});if(s||!i)return null;const m=o&&!a,h=!n&&!s&&t;return n&&t&&!s&&!c&&!u&&!d?l.jsx(hCe,{}):!m&&!h?null:l.jsxs(l.Fragment,{children:[m&&l.jsx(IAt,{}),h&&l.jsx(AAt,{})]})},DAt="pplx.first-purchase-tooltip",FAt=()=>{const e="collapsed-bottom-items",t=Je(),{organization:n,isEnterprise:r}=pn({reason:e}),s=ea({reason:e}),a=Op();return l.jsx(l.Fragment,{children:t&&l.jsxs(z,{className:"mb-md gap-sm pt-sm flex flex-col items-center justify-center border-t",children:[l.jsx(VSe,{trigger:()=>l.jsx(UAt,{isIncognito:s})}),r&&l.jsx(z,{className:"px-two pb-sm pt-md flex justify-center border-t",children:l.jsx(at,{href:`${a}/org`,children:n?.logo?l.jsx(Cn,{size:"medium",user:n?.logo,altText:"Logo"}):l.jsx(ye,{ariaLabel:"Organization settings",pill:!0,size:"small",variant:"inverted",icon:D6})})})]})})},UAt=({isIncognito:e})=>{const{data:t}=za.useSession(),{isMax:n,isPro:r,hasAccessToProFeatures:s}=Nt();return l.jsx(z,{as:"button",bgHover:"offsetPlus",className:"my-xs gap-x-sm relative flex items-center justify-between rounded-full",children:l.jsx("div",{className:"flex items-center gap-px",children:l.jsxs("div",{className:"p-xs relative flex",children:[e?l.jsx("div",{className:"w-[32px]",children:l.jsx(Uu,{inverse:!0})}):l.jsx(Cn,{size:"medium",user:t?.user?.image,showProBadge:r,showMaxBadge:n}),!s&&l.jsx(D,{color:"ultraLight",className:"bg-offset -translate-y-two p-two absolute bottom-0 right-20 inline-flex translate-x-[4px] rounded-full",children:l.jsx(xt,{icon:pC.faChevronDown,size:"2xs"})})]})})})},BAt=()=>{const e="uncollapsed-bottom-items",{$t:t}=X(),{isPro:n,isMax:r}=Nt(),{isEnterprise:s}=pn({reason:e}),a=Je(),{data:o,status:i}=za.useSession(),c=ea({reason:e}),u=At(),{isMobileStyle:d}=Ce(),[m,,h]=D9(DAt,null);f.useEffect(()=>{m&&setTimeout(()=>{h()},5e3)},[h,m]);const p=Sst(),g=()=>{m&&h(),u.push(p)};return l.jsxs("div",{className:"gap-md flex flex-col",children:[l.jsx("div",{className:"hidden md:[@media(min-height:670px)]:block",children:l.jsx("div",{className:"opacity-0 transition-opacity duration-300 ease-in-out [@media(min-height:700px)]:opacity-100",children:l.jsx(LAt,{})})}),l.jsxs("div",{children:[a&&l.jsx("div",{children:l.jsx(z,{className:"py-sm w-full border-t md:mb-0",children:l.jsxs(z,{className:"mx-sm gap-xs flex items-center justify-between",children:[l.jsx(kAt,{children:l.jsxs(z,{variant:"offset",bgHover:"offsetPlus",className:B("gap-sm pr-sm inline-flex w-full cursor-pointer select-none items-center justify-start rounded-full p-1 transition !duration-150",{"!bg-inverse":c}),children:[c?l.jsxs(l.Fragment,{children:[l.jsx(Uu,{}),l.jsx(D,{variant:"smallBold",className:"!text-inverse truncate",children:t({defaultMessage:"Incognito",id:"Sp8UUpZ0at"})})]}):l.jsxs(l.Fragment,{children:[l.jsx(Cn,{size:"medium",showProBadge:n,showMaxBadge:r,user:o?.user?.image}),l.jsx(hU,{username:o?.user?.username})]}),l.jsx("span",{className:B("text-inverse relative top-[1px] opacity-50",{"!text-quiet !opacity-100":!c}),children:l.jsx(xt,{icon:pC.faChevronDown,size:"xs"})})]})}),l.jsx(VAt,{text:t({defaultMessage:"Track purchase status in settings",id:"dt0t5ILzKX"}),open:!!m,children:l.jsx(ke,{ariaLabel:t({defaultMessage:"Settings",id:"D3idYvSLF9"}),pill:!0,icon:Hre,onClick:g,size:"small",extraCSS:"aspect-square min-h-[unset] shrink-0 h-[32px] -mr-xs"})})]})})}),!d&&l.jsx(TAt,{isEnterprise:!!s})]})]})},VAt=({children:e,text:t,open:n})=>l.jsx(bn,{bodyClassName:"!bg-super !p-md",bodyTextClassName:"!text-base !text-white",tooltipText:t,arrowClassName:"!fill-super !w-4 translate-x-[1px] !h-auto",open:n,asChild:!0,children:e}),$At=()=>{const e="sidebar-bottom",{$t:t}=X(),n=ea({reason:e}),{isCollapsed:r,actions:s}=hn(),{isMobileStyle:a}=Ce(),o=r&&!a,i=f.useCallback(c=>{(c.metaKey||c.ctrlKey)&&c.key===";"&&(c.preventDefault(),s.setIsIncognito(!n))},[s,n]);return f.useEffect(()=>(document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i)}),[i]),l.jsxs("div",{className:B("flex flex-col",{"items-center justify-center":o}),children:[o&&l.jsx("div",{className:"pb-md flex items-center justify-center",children:l.jsx(ye,{pill:!0,ariaLabel:"Expand sidebar",icon:HTe,onClick:()=>s.setIsCollapsed(!1),toolTip:t({defaultMessage:"Expand",id:"0oLj/toqZk"}),tooltipLayout:"right"})}),o?l.jsx(FAt,{}):l.jsx(BAt,{})]})},WAt=()=>{const{$t:e}=X(),{setBrandDropdownOpen:t,handleBrandCopy:n,handleDownload:r,handleLogoCopy:s,isBrandDropdownOpen:a,handlePopoverClose:o,toastCopy:i,toastVisible:c}=dCe(),{isCollapsed:u,actions:d}=hn(),{isMobileUserAgent:m}=Ce(),{setMobileSidebarOpen:h}=wc(),{isMobileStyle:p}=Ce(),g=_=>{_.button===2&&(_.preventDefault(),t(!0))},y=()=>{h(!1),b.push("/")},v=()=>{h(!1)},x=u&&!p,b=At();return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:`my-sm md:my-md flex items-center ${x?"justify-center":"justify-between"}`,children:[l.jsx(vU,{onBrandmarkCopy:n,onLogoCopy:s,onDownload:r,isOpen:a,onClose:o,children:l.jsx(at,{"aria-label":"Perplexity",href:"/",className:"block",onContextMenu:g,onClick:v,children:x?l.jsx(Wa,{includeEffects:!0,size:"md",variant:"mark"}):l.jsx("div",{className:"ml-xs pl-md pr-sm pt-xs",children:l.jsx(Wa,{includeEffects:!0,color:"mixed",isPro:!0,size:"small"})})})}),!x&&!m&&l.jsx("div",{className:"mr-xs pt-two",children:l.jsx(ke,{ariaLabel:e({defaultMessage:"Collapse",id:"W/V6+Y+Vy2"}),icon:zTe,size:"small",pill:!0,onClick:()=>{h(!1),d.setIsCollapsed(!0)},toolTip:e({defaultMessage:"Collapse",id:"W/V6+Y+Vy2"}),tooltipLayout:"bottom"})}),m&&l.jsx("div",{className:"mr-xs pt-two",children:l.jsx(ke,{icon:mr,pill:!0,onClick:y})})]}),l.jsx(_u,{message:i,variant:"success",isVisible:c,timeout:2})]})},HAt=(e,t)=>e&&!t?"w-collapsedSideBarWidth":"w-sideBarWidth",gCe=f.memo(()=>{const e="sidebar",{$t:t}=X(),n=Je(),{trackEvent:r}=Te(),{isCollapsed:s}=hn(),a=ea({reason:e}),{openVisitorLoginUpsell:o}=$n({enabled:!n}),{setMobileSidebarOpen:i}=wc(),{isMobileStyle:c}=Ce(),u=HAt(s,c),d=s&&!c;return l.jsx("div",{"data-testid":rfe.SIDEBAR,className:B("group/bar isolate h-full shrink-0 transition-all duration-300 ease-in-out md:hidden md:h-auto",u),children:l.jsx(z,{className:B("h-full transition-all duration-300 ease-in-out",u),children:l.jsxs("div",{className:B("flex h-full min-h-0 flex-1 flex-col"),children:[l.jsx(WAt,{}),!c&&l.jsx(mCe,{collapsed:s}),l.jsx("div",{className:"pt-md scrollbar min-h-0 flex-1 overflow-y-auto overflow-x-hidden",children:l.jsx(vbe,{collapsed:d,incognito:a,animationId:"sidebar-tabs"})}),!n&&!d&&l.jsx("div",{className:"m-md md:mb-lg",children:l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(ye,{variant:"primary",size:"small",extraCSS:"h-[44px]",fullWidth:!0,text:t({defaultMessage:"Sign Up",id:"39AHJmowNE"}),onClick:()=>{i(!1),r("signup click",{}),o({origin:Be.SIGNUP_BUTTON})}}),l.jsx(ye,{variant:"common",size:"small",extraCSS:"h-[44px]",fullWidth:!0,text:t({defaultMessage:"Log in",id:"odXlk858Gb"}),onClick:()=>{i(!1),r("login click",{}),o({origin:Be.LOGIN_BUTTON})}})]})}),n||d?l.jsx($At,{}):null]})})})});gCe.displayName="SidebarMobile";const zAt=({appContentWrapperRef:e,minimalMode:t})=>{const{isMobileStyle:n}=Ce({evaluateOnInit:!0});return n?l.jsx(gCe,{}):l.jsx(tAt,{children:l.jsx(fCe,{minimalMode:t,appContentWrapperRef:e})})};function GAt({children:e}){const t=f.useRef(null),{setContainer:n}=f.useContext(Z9),r=Pt(),s=f.useMemo(()=>r?.startsWith("/b/"),[r]),a=f.useMemo(()=>r?.startsWith("/b/zen")||r?.startsWith("/b/try-assistant"),[r]);return l.jsx(att,{ref:n,children:l.jsx(Xje,{children:l.jsxs(dc,{children:[!a&&l.jsx(ott,{children:l.jsx(zAt,{minimalMode:s,appContentWrapperRef:t})}),l.jsx(itt,{hasSidebar:!a,ref:t,children:e})]})})})}const xU=A.memo(function(){const t="stripe-wrapper",n=Ht(),r=n?.get("stripe_checkout"),s=n?.get("referral_status");return f.useLayoutEffect(()=>{(r||s)&&f9({reason:t})},[r,s]),null});xU.displayName="StripeStatusRefresher";const yCe=A.memo(e=>{const t=e.metadata?.title||"Perplexity";return f.useEffect(()=>{const n=document.head?document.head.getElementsByTagName("title"):document.getElementsByTagName("title");for(const r of n)r.textContent=t},[t]),null});yCe.displayName="DocumentTitle";async function qAt({eventId:e,league:t,reason:n}){const{error:r,data:s}=await ne.GET("/rest/sports/tennis/{league}/events/{event_id}",n,{params:{path:{event_id:decodeURIComponent(e),league:t}},timeoutMs:15e3});if(r)throw new Me("API_CLIENTS_ERROR",{cause:r,details:{eventId:e}});return s?.data}async function KAt({seasonId:e,league:t,reason:n}){const{error:r,data:s}=await ne.GET("/rest/sports/tennis/{league}/tournaments/{season_id}",n,{params:{path:{season_id:decodeURIComponent(e),league:t}},timeoutMs:15e3});if(r)throw new Me("API_CLIENTS_ERROR",{cause:r,details:{seasonId:e}});return s?.data}function YAt(e){return e==="cricket"||e==="european_tour"||e==="f1"||e==="nba"||e==="ncaam"||e==="ncaaw"||e==="pga"||e==="soccer"||e==="wnba"||e==="mlb"}const QAt=async({eventId:e,league:t,headers:n,reason:r})=>{if(!YAt(t))throw new Me("API_CLIENTS_ERROR",{message:`Invalid league: ${t}`,details:{league:t,eventId:e}});const{error:s,data:a}=await ne.GET(`/rest/sports/${t}/events/{event_id}`,r,{headers:n,timeoutMs:15e3,params:{path:{event_id:decodeURIComponent(e)}}});if(s)throw new Me("API_CLIENTS_ERROR",{cause:s,details:{league:t,eventId:e}});try{a?.data.pplx_event&&(a.data.apns=a.data.pplx_event.apns)}catch{}return a?.data},XAt=(e,t)=>[`sports/${t}/event/`,e];async function IHt({eventId:e,league:t,locale:n,reason:r}){const s={};n&&(s["accept-language"]=n);try{const{error:a,data:o}=await ne.GET("/rest/sports/{league}/events/{event_id}/hype",r,{headers:s,timeoutMs:0,params:{path:{league:t,event_id:decodeURIComponent(e)}}});if(a)throw new Me("API_CLIENTS_ERROR",{cause:a,details:{league:t,eventId:e}});return o?.data}catch(a){return ee.error(a),null}}async function jHt({eventId:e,headers:t,reason:n}){try{const{error:r,data:s}=await ne.GET("/rest/sports/f1/live_racer",n,{headers:t,timeoutMs:0});if(r)throw new Me("API_CLIENTS_ERROR",{cause:r,details:{eventId:e}});return s?.data}catch(r){return ee.error(r),null}}async function OHt(e){const{error:t,data:n}=await ne.GET("/rest/sports/soccer/events/{event_id}","championsleague-events-event-id-client-page",{params:{path:{event_id:decodeURIComponent(e)}},timeoutMs:15e3});if(t)throw new Me("API_CLIENTS_ERROR",{cause:t,details:{eventId:e}});return n?.data??null}async function ZAt({playerId:e,reason:t}){const{error:n,data:r}=await ne.GET("/rest/sports/nba/players/{player_id}",t,{params:{path:{player_id:e}},timeoutMs:15e3});if(n)throw new Me("API_CLIENTS_ERROR",{cause:n,details:{playerId:e}});return r?.data??null}const JAt=e=>["/rest/sports/nba/players/",e];async function LHt(e){const{error:t,data:n}=await ne.GET("/rest/sports/nba/players/{player_id}/bio","nba-players-player-id-bio-client-page",{params:{path:{player_id:e}},timeoutMs:15e3});if(t)throw new Me("API_CLIENTS_ERROR",{cause:t,details:{playerId:e}});return n?.data??null}async function DHt(e){const{error:t,data:n}=await ne.GET("/rest/sports/nba/players/{player_id}/related","nba-players-player-id-related-client-page",{params:{path:{player_id:e}},timeoutMs:15e3});if(t)throw new Me("API_CLIENTS_ERROR",{cause:t,details:{playerId:e}});return n?.data??null}const ePt=async({teamId:e,reason:t})=>{const n=await er({urlPath:`/rest/sports/nfl/teams/${decodeURIComponent(e)}`,timeoutMs:0,reason:t});if(!n.ok)throw ee.error(n.url,n.statusText),new Error(`Failed to fetch nfl team: ${n.statusText}`);return(await n.json()).data},tPt=e=>["/sports/nfl/teams/",e],nPt=async({teamId:e,reason:t})=>{const n=await er({urlPath:`/rest/sports/nba/teams/${decodeURIComponent(e)}`,timeoutMs:0,reason:t});if(!n.ok)throw ee.error(n.url,n.statusText),new Error(`Failed to fetch nba team: ${n.statusText}`);return(await n.json()).data},rPt=e=>["/sports/nba/teams/",e],sPt=({teamId:e,reason:t,enabled:n})=>Ke({queryFn:()=>nPt({teamId:e,reason:t}),queryKey:rPt(e),enabled:n}),aPt=({teamId:e,reason:t,enabled:n})=>Ke({queryFn:()=>ePt({teamId:e,reason:t}),queryKey:tPt(e),enabled:n}),oPt=({playerId:e,reason:t,enabled:n})=>Ke({queryFn:()=>ZAt({playerId:e,reason:t}),queryKey:JAt(e),enabled:n}),Ete=({seasonId:e,league:t,reason:n,enabled:r})=>Ke({queryFn:()=>KAt({seasonId:e,league:t,reason:n}),queryKey:[`${t}/tournaments`,e],enabled:r}),vCe={staleTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchOnReconnect:!0};function Mte(e){return!isNaN(new Date(e).getTime())}function Tte(e){const t=e+"+00:00";return Mte(t)?t:Mte(e)?e:null}function FHt(e){if(typeof e.startDate=="string")return{full:Tte(e.startDate)??"",dateType:"UTC",year:0,month:0,date:0,hour:0,minute:0};const t=e.startDate?.find(r=>r.dateType==="UTC");if(!t)return;const n=Tte(t.full);if(n)return{...t,full:n}}function UHt(e){return!isNaN(e.hour)&&!isNaN(e.minute)}function BHt(e){const t=e?.tvStations?.[0]?.name;switch(t){case"Amazon Prime Video":return"Prime Video";default:return t}}function VHt(e){return e?.venue?.name||""}function $Ht(e){return[e?.venue?.city,e?.venue?.state?.abbreviation].filter(Boolean).join(", ")}function WHt(e,t){const n=e?.[0]?.forecasts?.[0],r=n?.condition;return{temperature:n?.temperature?.find(a=>a.temperatureScaleId===(t?2:1)),weatherCondition:r}}function tx(e){return typeof e.eventStatus=="string"?e.eventStatus==="live":e?.eventStatus?.eventStatusId===2}function AM(e){return typeof e.eventStatus=="string"?e.eventStatus==="final":e.eventStatus?.eventStatusId===4}function HHt(e){return tx(e)||AM(e)}function zHt(e,t){return aM(e.teams)[1].teamId===t.teamId}function iPt(e,t=4){return t===2?e.period===1&&e.minutes===0&&e.seconds===0&&e.isActive===!1:e.period===2&&e.minutes===0&&e.seconds===0&&e.isActive===!1}function GHt(e){return e.status==="live"}function qHt(e){return e.status==="final"}function KHt(e){return"id"in e}function YHt(e,t){return new Date(e.datetime).toLocaleString(t,{month:"short",day:"numeric"})}const gl=({eventId:e,league:t,reason:n,staleTime:r,refetchInterval:s,enabled:a})=>Ke({...vCe,queryFn:()=>QAt({eventId:e,league:t,reason:n}),queryKey:XAt(e,t),staleTime:r,refetchInterval:s,enabled:a}),kte=({eventId:e,league:t,reason:n,enabled:r})=>gl({eventId:e,league:t,reason:n,enabled:r,refetchInterval:s=>s?.state?.data?.event?AM(s.state.data.event)?!1:tx(s.state.data.event)?1e3*10:1e3*30:1e3*60}),lPt=({eventId:e,league:t,reason:n,enabled:r})=>gl({eventId:e,league:t,reason:n,enabled:r}),QHt=({eventId:e,league:t,reason:n,enabled:r})=>gl({eventId:e,league:t,reason:n,enabled:r}),cPt=({eventId:e,league:t,reason:n,enabled:r})=>gl({eventId:e,league:t,reason:n,enabled:r,refetchInterval:s=>s?.state?.data?.event?AM(s.state.data.event)?!1:tx(s.state.data.event)?1e3*10:1e3*30:1e3*60}),uPt=({eventId:e,league:t,reason:n,enabled:r})=>gl({eventId:decodeURIComponent(e),league:t,reason:n,refetchInterval:s=>s?.state?.data?.event&&s.state.data.event.status==="live"?1e3*10:1e3*60,enabled:r}),dPt=({eventId:e,league:t,reason:n,enabled:r})=>gl({eventId:e,league:t,reason:n,refetchInterval:s=>s?.state?.data?.event?AM(s.state.data.event)?!1:tx(s.state.data.event)?1e3*10:1e3*30:1e3*60,enabled:r}),fPt=({eventId:e,league:t,reason:n,enabled:r})=>gl({eventId:e,league:t,reason:n,enabled:r}),mPt=({eventId:e,league:t,reason:n,enabled:r})=>gl({eventId:e,league:t,reason:n,refetchInterval:s=>{const a=s.state?.data?.event?.refetch_interval_secs;return a?1e3*a:!1},staleTime:0,enabled:r}),Nte=({eventId:e,league:t,enabled:n,reason:r})=>Ke({...vCe,queryKey:[`${t}/events`,e],queryFn:()=>qAt({eventId:e,league:t,reason:r}),refetchInterval:s=>{const a=s.state?.data?.event?.refetch_interval_secs;return a?1e3*a:!1},staleTime:0,enabled:n}),hPt=({eventId:e,league:t,reason:n,enabled:r})=>gl({eventId:e,league:t,reason:n,refetchInterval:s=>{const a=s.state?.data?.event?.refetch_url?.replace("/widget",""),o=s.state?.data?.event?.refetch_interval_secs;return a&&o?1e3*o:!1},staleTime:0,enabled:r}),pPt=({eventId:e,league:t,reason:n,enabled:r})=>gl({eventId:e,league:t,reason:n,enabled:r}),gPt=({reason:e})=>{const t=Ht(),n=typeof t?.get("c")=="string"?t.get("c"):Array.isArray(t?.get("c"))?t.get("c")?.[0]:void 0,r=Ke({queryKey:yOe(n??""),queryFn:()=>Zlt({copyToken:n??"",reason:e}),enabled:!!n}),s=r.isLoading?null:r.data?.shortcut??null;return{...r,shortcut:s,copyToken:n}};var e6={},t6={},n6={},Ate;function yPt(){return Ate||(Ate=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"ReflectAdapter",{enumerable:!0,get:function(){return t}});class t{static get(r,s,a){const o=Reflect.get(r,s,a);return typeof o=="function"?o.bind(r):o}static set(r,s,a,o){return Reflect.set(r,s,a,o)}static has(r,s){return Reflect.has(r,s)}static deleteProperty(r,s){return Reflect.deleteProperty(r,s)}}}(n6)),n6}var Pte;function vPt(){return Pte||(Pte=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(a,o){for(var i in o)Object.defineProperty(a,i,{enumerable:!0,get:o[i]})}t(e,{HeadersAdapter:function(){return s},ReadonlyHeadersError:function(){return r}});const n=yPt();class r extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new r}}class s extends Headers{constructor(o){super(),this.headers=new Proxy(o,{get(i,c,u){if(typeof c=="symbol")return n.ReflectAdapter.get(i,c,u);const d=c.toLowerCase(),m=Object.keys(o).find(h=>h.toLowerCase()===d);if(!(typeof m>"u"))return n.ReflectAdapter.get(i,m,u)},set(i,c,u,d){if(typeof c=="symbol")return n.ReflectAdapter.set(i,c,u,d);const m=c.toLowerCase(),h=Object.keys(o).find(p=>p.toLowerCase()===m);return n.ReflectAdapter.set(i,h??c,u,d)},has(i,c){if(typeof c=="symbol")return n.ReflectAdapter.has(i,c);const u=c.toLowerCase(),d=Object.keys(o).find(m=>m.toLowerCase()===u);return typeof d>"u"?!1:n.ReflectAdapter.has(i,d)},deleteProperty(i,c){if(typeof c=="symbol")return n.ReflectAdapter.deleteProperty(i,c);const u=c.toLowerCase(),d=Object.keys(o).find(m=>m.toLowerCase()===u);return typeof d>"u"?!0:n.ReflectAdapter.deleteProperty(i,d)}})}static seal(o){return new Proxy(o,{get(i,c,u){switch(c){case"append":case"delete":case"set":return r.callable;default:return n.ReflectAdapter.get(i,c,u)}}})}merge(o){return Array.isArray(o)?o.join(", "):o}static from(o){return o instanceof Headers?o:new s(o)}append(o,i){const c=this.headers[o];typeof c=="string"?this.headers[o]=[c,i]:Array.isArray(c)?c.push(i):this.headers[o]=i}delete(o){delete this.headers[o]}get(o){const i=this.headers[o];return typeof i<"u"?this.merge(i):null}has(o){return typeof this.headers[o]<"u"}set(o,i){this.headers[o]=i}forEach(o,i){for(const[c,u]of this.entries())o.call(i,u,c,this)}*entries(){for(const o of Object.keys(this.headers)){const i=o.toLowerCase(),c=this.get(i);yield[i,c]}}*keys(){for(const o of Object.keys(this.headers))yield o.toLowerCase()}*values(){for(const o of Object.keys(this.headers))yield this.get(o)}[Symbol.iterator](){return this.entries()}}}(t6)),t6}var r6={},Rte;function xPt(){return Rte||(Rte=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(Ae,Se){for(var De in Se)Object.defineProperty(Ae,De,{enumerable:!0,get:Se[De]})}t(e,{ACTION_SUFFIX:function(){return m},APP_DIR_ALIAS:function(){return k},CACHE_ONE_YEAR:function(){return E},DOT_NEXT_ALIAS:function(){return P},ESLINT_DEFAULT_DIRS:function(){return ie},GSP_NO_RETURNED_VALUE:function(){return se},GSSP_COMPONENT_MEMBER_ERROR:function(){return re},GSSP_NO_RETURNED_VALUE:function(){return Y},INFINITE_CACHE:function(){return M},INSTRUMENTATION_HOOK_FILENAME:function(){return j},MATCHED_PATH_HEADER:function(){return s},MIDDLEWARE_FILENAME:function(){return T},MIDDLEWARE_LOCATION_REGEXP:function(){return I},NEXT_BODY_SUFFIX:function(){return g},NEXT_CACHE_IMPLICIT_TAG_ID:function(){return C},NEXT_CACHE_REVALIDATED_TAGS_HEADER:function(){return v},NEXT_CACHE_REVALIDATE_TAG_TOKEN_HEADER:function(){return x},NEXT_CACHE_SOFT_TAG_MAX_LENGTH:function(){return S},NEXT_CACHE_TAGS_HEADER:function(){return y},NEXT_CACHE_TAG_MAX_ITEMS:function(){return _},NEXT_CACHE_TAG_MAX_LENGTH:function(){return w},NEXT_DATA_SUFFIX:function(){return h},NEXT_INTERCEPTION_MARKER_PREFIX:function(){return r},NEXT_META_SUFFIX:function(){return p},NEXT_QUERY_PARAM_PREFIX:function(){return n},NEXT_RESUME_HEADER:function(){return b},NON_STANDARD_NODE_ENV:function(){return te},PAGES_DIR_ALIAS:function(){return N},PRERENDER_REVALIDATE_HEADER:function(){return a},PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER:function(){return o},PUBLIC_DIR_MIDDLEWARE_CONFLICT:function(){return H},ROOT_DIR_ALIAS:function(){return R},RSC_ACTION_CLIENT_WRAPPER_ALIAS:function(){return W},RSC_ACTION_ENCRYPTION_ALIAS:function(){return V},RSC_ACTION_PROXY_ALIAS:function(){return F},RSC_ACTION_VALIDATE_ALIAS:function(){return L},RSC_CACHE_WRAPPER_ALIAS:function(){return U},RSC_MOD_REF_PROXY_ALIAS:function(){return O},RSC_PREFETCH_SUFFIX:function(){return i},RSC_SEGMENTS_DIR_SUFFIX:function(){return c},RSC_SEGMENT_SUFFIX:function(){return u},RSC_SUFFIX:function(){return d},SERVER_PROPS_EXPORT_ERROR:function(){return Z},SERVER_PROPS_GET_INIT_PROPS_CONFLICT:function(){return K},SERVER_PROPS_SSG_CONFLICT:function(){return $},SERVER_RUNTIME:function(){return pe},SSG_FALLBACK_EXPORT_ERROR:function(){return le},SSG_GET_INITIAL_PROPS_CONFLICT:function(){return G},STATIC_STATUS_PAGE_GET_INITIAL_PROPS_ERROR:function(){return q},UNSTABLE_REVALIDATE_RENAME_ERROR:function(){return Q},WEBPACK_LAYERS:function(){return de},WEBPACK_RESOURCE_QUERIES:function(){return ve}});const n="nxtP",r="nxtI",s="x-matched-path",a="x-prerender-revalidate",o="x-prerender-revalidate-if-generated",i=".prefetch.rsc",c=".segments",u=".segment.rsc",d=".rsc",m=".action",h=".json",p=".meta",g=".body",y="x-next-cache-tags",v="x-next-revalidated-tags",x="x-next-revalidate-tag-token",b="next-resume",_=128,w=256,S=1024,C="_N_T_",E=31536e3,M=4294967294,T="middleware",I=`(?:src/)?${T}`,j="instrumentation",N="private-next-pages",P="private-dot-next",R="private-next-root-dir",k="private-next-app-dir",O="private-next-rsc-mod-ref-proxy",L="private-next-rsc-action-validate",F="private-next-rsc-server-reference",U="private-next-rsc-cache-wrapper",V="private-next-rsc-action-encryption",W="private-next-rsc-action-client-wrapper",H="You can not have a '_next' folder inside of your public folder. This conflicts with the internal '/_next' route. https://nextjs.org/docs/messages/public-next-folder-conflict",G="You can not use getInitialProps with getStaticProps. To use SSG, please remove your getInitialProps",K="You can not use getInitialProps with getServerSideProps. Please remove getInitialProps.",$="You can not use getStaticProps or getStaticPaths with getServerSideProps. To use SSG, please remove getServerSideProps",q="can not have getInitialProps/getServerSideProps, https://nextjs.org/docs/messages/404-get-initial-props",Z="pages with `getServerSideProps` can not be exported. See more info here: https://nextjs.org/docs/messages/gssp-export",se="Your `getStaticProps` function did not return an object. Did you forget to add a `return`?",Y="Your `getServerSideProps` function did not return an object. Did you forget to add a `return`?",Q="The `unstable_revalidate` property is available for general use.\nPlease use `revalidate` instead.",re="can not be attached to a page's component and must be exported from the page. See more info here: https://nextjs.org/docs/messages/gssp-component-member",te='You are using a non-standard "NODE_ENV" value in your environment. This creates inconsistencies in the project and is strongly advised against. Read more: https://nextjs.org/docs/messages/non-standard-node-env',le="Pages with `fallback` enabled in `getStaticPaths` can not be exported. See more info here: https://nextjs.org/docs/messages/ssg-fallback-true-export",ie=["app","pages","components","lib","src"],pe={edge:"edge",experimentalEdge:"experimental-edge",nodejs:"nodejs"},me={shared:"shared",reactServerComponents:"rsc",serverSideRendering:"ssr",actionBrowser:"action-browser",api:"api",middleware:"middleware",instrument:"instrument",edgeAsset:"edge-asset",appPagesBrowser:"app-pages-browser",pagesDirBrowser:"pages-dir-browser",pagesDirEdge:"pages-dir-edge",pagesDirNode:"pages-dir-node"},de={...me,GROUP:{builtinReact:[me.reactServerComponents,me.actionBrowser],serverOnly:[me.reactServerComponents,me.actionBrowser,me.instrument,me.middleware],neutralTarget:[me.api],clientOnly:[me.serverSideRendering,me.appPagesBrowser],bundled:[me.reactServerComponents,me.actionBrowser,me.serverSideRendering,me.appPagesBrowser,me.shared,me.instrument,me.middleware],appPages:[me.reactServerComponents,me.serverSideRendering,me.appPagesBrowser,me.actionBrowser]}},ve={edgeSSREntry:"__next_edge_ssr_entry__",metadata:"__next_metadata__",metadataRoute:"__next_metadata_route__",metadataImageMeta:"__next_metadata_image_meta__"}}(r6)),r6}var s6={},a6={},Ite;function xCe(){return Ite||(Ite=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(v,x){for(var b in x)Object.defineProperty(v,b,{enumerable:!0,get:x[b]})}t(e,{AppRenderSpan:function(){return c},AppRouteRouteHandlersSpan:function(){return m},BaseServerSpan:function(){return n},LoadComponentsSpan:function(){return r},LogSpanAllowList:function(){return y},MiddlewareSpan:function(){return p},NextNodeServerSpan:function(){return a},NextServerSpan:function(){return s},NextVanillaSpanAllowlist:function(){return g},NodeSpan:function(){return d},RenderSpan:function(){return i},ResolveMetadataSpan:function(){return h},RouterSpan:function(){return u},StartServerSpan:function(){return o}});var n=function(v){return v.handleRequest="BaseServer.handleRequest",v.run="BaseServer.run",v.pipe="BaseServer.pipe",v.getStaticHTML="BaseServer.getStaticHTML",v.render="BaseServer.render",v.renderToResponseWithComponents="BaseServer.renderToResponseWithComponents",v.renderToResponse="BaseServer.renderToResponse",v.renderToHTML="BaseServer.renderToHTML",v.renderError="BaseServer.renderError",v.renderErrorToResponse="BaseServer.renderErrorToResponse",v.renderErrorToHTML="BaseServer.renderErrorToHTML",v.render404="BaseServer.render404",v}(n||{}),r=function(v){return v.loadDefaultErrorComponents="LoadComponents.loadDefaultErrorComponents",v.loadComponents="LoadComponents.loadComponents",v}(r||{}),s=function(v){return v.getRequestHandler="NextServer.getRequestHandler",v.getServer="NextServer.getServer",v.getServerRequestHandler="NextServer.getServerRequestHandler",v.createServer="createServer.createServer",v}(s||{}),a=function(v){return v.compression="NextNodeServer.compression",v.getBuildId="NextNodeServer.getBuildId",v.createComponentTree="NextNodeServer.createComponentTree",v.clientComponentLoading="NextNodeServer.clientComponentLoading",v.getLayoutOrPageModule="NextNodeServer.getLayoutOrPageModule",v.generateStaticRoutes="NextNodeServer.generateStaticRoutes",v.generateFsStaticRoutes="NextNodeServer.generateFsStaticRoutes",v.generatePublicRoutes="NextNodeServer.generatePublicRoutes",v.generateImageRoutes="NextNodeServer.generateImageRoutes.route",v.sendRenderResult="NextNodeServer.sendRenderResult",v.proxyRequest="NextNodeServer.proxyRequest",v.runApi="NextNodeServer.runApi",v.render="NextNodeServer.render",v.renderHTML="NextNodeServer.renderHTML",v.imageOptimizer="NextNodeServer.imageOptimizer",v.getPagePath="NextNodeServer.getPagePath",v.getRoutesManifest="NextNodeServer.getRoutesManifest",v.findPageComponents="NextNodeServer.findPageComponents",v.getFontManifest="NextNodeServer.getFontManifest",v.getServerComponentManifest="NextNodeServer.getServerComponentManifest",v.getRequestHandler="NextNodeServer.getRequestHandler",v.renderToHTML="NextNodeServer.renderToHTML",v.renderError="NextNodeServer.renderError",v.renderErrorToHTML="NextNodeServer.renderErrorToHTML",v.render404="NextNodeServer.render404",v.startResponse="NextNodeServer.startResponse",v.route="route",v.onProxyReq="onProxyReq",v.apiResolver="apiResolver",v.internalFetch="internalFetch",v}(a||{}),o=function(v){return v.startServer="startServer.startServer",v}(o||{}),i=function(v){return v.getServerSideProps="Render.getServerSideProps",v.getStaticProps="Render.getStaticProps",v.renderToString="Render.renderToString",v.renderDocument="Render.renderDocument",v.createBodyResult="Render.createBodyResult",v}(i||{}),c=function(v){return v.renderToString="AppRender.renderToString",v.renderToReadableStream="AppRender.renderToReadableStream",v.getBodyResult="AppRender.getBodyResult",v.fetch="AppRender.fetch",v}(c||{}),u=function(v){return v.executeRoute="Router.executeRoute",v}(u||{}),d=function(v){return v.runHandler="Node.runHandler",v}(d||{}),m=function(v){return v.runHandler="AppRouteRouteHandlers.runHandler",v}(m||{}),h=function(v){return v.generateMetadata="ResolveMetadata.generateMetadata",v.generateViewport="ResolveMetadata.generateViewport",v}(h||{}),p=function(v){return v.execute="Middleware.execute",v}(p||{});const g=["Middleware.execute","BaseServer.handleRequest","Render.getServerSideProps","Render.getStaticProps","AppRender.fetch","AppRender.getBodyResult","Render.renderDocument","Node.runHandler","AppRouteRouteHandlers.runHandler","ResolveMetadata.generateMetadata","ResolveMetadata.generateViewport","NextNodeServer.createComponentTree","NextNodeServer.findPageComponents","NextNodeServer.getLayoutOrPageModule","NextNodeServer.startResponse","NextNodeServer.clientComponentLoading"],y=["NextNodeServer.findPageComponents","NextNodeServer.createComponentTree","NextNodeServer.clientComponentLoading"]}(a6)),a6}var o6={},jte;function bPt(){return jte||(jte=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"isThenable",{enumerable:!0,get:function(){return t}});function t(n){return n!==null&&typeof n=="object"&&"then"in n&&typeof n.then=="function"}}(o6)),o6}var _Pt=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},Md="1.8.0",Ote=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function wPt(e){var t=new Set([e]),n=new Set,r=e.match(Ote);if(!r)return function(){return!1};var s={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(s.prerelease!=null)return function(c){return c===e};function a(i){return n.add(i),!1}function o(i){return t.add(i),!0}return function(c){if(t.has(c))return!0;if(n.has(c))return!1;var u=c.match(Ote);if(!u)return a(c);var d={major:+u[1],minor:+u[2],patch:+u[3],prerelease:u[4]};return d.prerelease!=null||s.major!==d.major?a(c):s.major===0?s.minor===d.minor&&s.patch<=d.patch?o(c):a(c):s.minor<=d.minor?o(c):a(c)}}var SPt=wPt(Md),CPt=Md.split(".")[0],E0=Symbol.for("opentelemetry.js.api."+CPt),M0=_Pt;function nx(e,t,n,r){var s;r===void 0&&(r=!1);var a=M0[E0]=(s=M0[E0])!==null&&s!==void 0?s:{version:Md};if(!r&&a[e]){var o=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(o.stack||o.message),!1}if(a.version!==Md){var o=new Error("@opentelemetry/api: Registration of version v"+a.version+" for "+e+" does not match previously registered API v"+Md);return n.error(o.stack||o.message),!1}return a[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+Md+"."),!0}function mf(e){var t,n,r=(t=M0[E0])===null||t===void 0?void 0:t.version;if(!(!r||!SPt(r)))return(n=M0[E0])===null||n===void 0?void 0:n[e]}function rx(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+Md+".");var n=M0[E0];n&&delete n[e]}var EPt=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,a=[],o;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)a.push(s.value)}catch(i){o={error:i}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},MPt=function(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,a;r<s;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},TPt=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return ey("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return ey("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return ey("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return ey("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return ey("verbose",this._namespace,t)},e}();function ey(e,t,n){var r=mf("diag");if(r)return n.unshift(t),r[e].apply(r,MPt([],EPt(n),!1))}var ca;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(ca||(ca={}));function kPt(e,t){e<ca.NONE?e=ca.NONE:e>ca.ALL&&(e=ca.ALL),t=t||{};function n(r,s){var a=t[r];return typeof a=="function"&&e>=s?a.bind(t):function(){}}return{error:n("error",ca.ERROR),warn:n("warn",ca.WARN),info:n("info",ca.INFO),debug:n("debug",ca.DEBUG),verbose:n("verbose",ca.VERBOSE)}}var NPt=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,a=[],o;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)a.push(s.value)}catch(i){o={error:i}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},APt=function(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,a;r<s;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},PPt="diag",ll=function(){function e(){function t(s){return function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];var i=mf("diag");if(i)return i[s].apply(i,APt([],NPt(a),!1))}}var n=this,r=function(s,a){var o,i,c;if(a===void 0&&(a={logLevel:ca.INFO}),s===n){var u=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((o=u.stack)!==null&&o!==void 0?o:u.message),!1}typeof a=="number"&&(a={logLevel:a});var d=mf("diag"),m=kPt((i=a.logLevel)!==null&&i!==void 0?i:ca.INFO,s);if(d&&!a.suppressOverrideMessage){var h=(c=new Error().stack)!==null&&c!==void 0?c:"<failed to generate stacktrace>";d.warn("Current logger will be overwritten from "+h),m.warn("Current logger will overwrite one already registered from "+h)}return nx("diag",m,n,!0)};n.setLogger=r,n.disable=function(){rx(PPt,n)},n.createComponentLogger=function(s){return new TPt(s)},n.verbose=t("verbose"),n.debug=t("debug"),n.info=t("info"),n.warn=t("warn"),n.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}(),RPt=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,a=[],o;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)a.push(s.value)}catch(i){o={error:i}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},IPt=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},jPt=function(){function e(t){this._entries=t?new Map(t):new Map}return e.prototype.getEntry=function(t){var n=this._entries.get(t);if(n)return Object.assign({},n)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(t){var n=RPt(t,2),r=n[0],s=n[1];return[r,s]})},e.prototype.setEntry=function(t,n){var r=new e(this._entries);return r._entries.set(t,n),r},e.prototype.removeEntry=function(t){var n=new e(this._entries);return n._entries.delete(t),n},e.prototype.removeEntries=function(){for(var t,n,r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];var a=new e(this._entries);try{for(var o=IPt(r),i=o.next();!i.done;i=o.next()){var c=i.value;a._entries.delete(c)}}catch(u){t={error:u}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return a},e.prototype.clear=function(){return new e},e}(),OPt=Symbol("BaggageEntryMetadata"),LPt=ll.instance();function DPt(e){return e===void 0&&(e={}),new jPt(new Map(Object.entries(e)))}function FPt(e){return typeof e!="string"&&(LPt.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:OPt,toString:function(){return e}}}function bU(e){return Symbol.for(e)}var UPt=function(){function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(r){return n._currentContext.get(r)},n.setValue=function(r,s){var a=new e(n._currentContext);return a._currentContext.set(r,s),a},n.deleteValue=function(r){var s=new e(n._currentContext);return s._currentContext.delete(r),s}}return e}(),bCe=new UPt,i6=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],BPt=function(){function e(){function t(r){return function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];if(console){var o=console[r];if(typeof o!="function"&&(o=console.log),typeof o=="function")return o.apply(console,s)}}}for(var n=0;n<i6.length;n++)this[i6[n].n]=t(i6[n].c)}return e}(),rg=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),VPt=function(){function e(){}return e.prototype.createHistogram=function(t,n){return YPt},e.prototype.createCounter=function(t,n){return KPt},e.prototype.createUpDownCounter=function(t,n){return QPt},e.prototype.createObservableGauge=function(t,n){return ZPt},e.prototype.createObservableCounter=function(t,n){return XPt},e.prototype.createObservableUpDownCounter=function(t,n){return JPt},e.prototype.addBatchObservableCallback=function(t,n){},e.prototype.removeBatchObservableCallback=function(t){},e}(),_U=function(){function e(){}return e}(),$Pt=function(e){rg(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.add=function(n,r){},t}(_U),WPt=function(e){rg(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.add=function(n,r){},t}(_U),HPt=function(e){rg(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.record=function(n,r){},t}(_U),wU=function(){function e(){}return e.prototype.addCallback=function(t){},e.prototype.removeCallback=function(t){},e}(),zPt=function(e){rg(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(wU),GPt=function(e){rg(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(wU),qPt=function(e){rg(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(wU),_Ce=new VPt,KPt=new $Pt,YPt=new HPt,QPt=new WPt,XPt=new zPt,ZPt=new GPt,JPt=new qPt;function eRt(){return _Ce}var Pj;(function(e){e[e.INT=0]="INT",e[e.DOUBLE=1]="DOUBLE"})(Pj||(Pj={}));var wCe={get:function(e,t){if(e!=null)return e[t]},keys:function(e){return e==null?[]:Object.keys(e)}},SCe={set:function(e,t,n){e!=null&&(e[t]=n)}},tRt=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,a=[],o;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)a.push(s.value)}catch(i){o={error:i}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},nRt=function(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,a;r<s;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},rRt=function(){function e(){}return e.prototype.active=function(){return bCe},e.prototype.with=function(t,n,r){for(var s=[],a=3;a<arguments.length;a++)s[a-3]=arguments[a];return n.call.apply(n,nRt([r],tRt(s),!1))},e.prototype.bind=function(t,n){return n},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),sRt=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,a=[],o;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)a.push(s.value)}catch(i){o={error:i}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},aRt=function(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,a;r<s;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},l6="context",oRt=new rRt,PM=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return nx(l6,t,ll.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,n,r){for(var s,a=[],o=3;o<arguments.length;o++)a[o-3]=arguments[o];return(s=this._getContextManager()).with.apply(s,aRt([t,n,r],sRt(a),!1))},e.prototype.bind=function(t,n){return this._getContextManager().bind(t,n)},e.prototype._getContextManager=function(){return mf(l6)||oRt},e.prototype.disable=function(){this._getContextManager().disable(),rx(l6,ll.instance())},e}(),eS;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(eS||(eS={}));var SU="0000000000000000",CU="00000000000000000000000000000000",CCe={traceId:CU,spanId:SU,traceFlags:eS.NONE},sv=function(){function e(t){t===void 0&&(t=CCe),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,n){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,n){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,n){},e}(),EU=bU("OpenTelemetry Context Key SPAN");function MU(e){return e.getValue(EU)||void 0}function iRt(){return MU(PM.getInstance().active())}function TU(e,t){return e.setValue(EU,t)}function lRt(e){return e.deleteValue(EU)}function cRt(e,t){return TU(e,new sv(t))}function ECe(e){var t;return(t=MU(e))===null||t===void 0?void 0:t.spanContext()}var uRt=/^([0-9a-f]{32})$/i,dRt=/^[0-9a-f]{16}$/i;function MCe(e){return uRt.test(e)&&e!==CU}function TCe(e){return dRt.test(e)&&e!==SU}function kU(e){return MCe(e.traceId)&&TCe(e.spanId)}function fRt(e){return new sv(e)}var c6=PM.getInstance(),kCe=function(){function e(){}return e.prototype.startSpan=function(t,n,r){r===void 0&&(r=c6.active());var s=!!n?.root;if(s)return new sv;var a=r&&ECe(r);return mRt(a)&&kU(a)?new sv(a):new sv},e.prototype.startActiveSpan=function(t,n,r,s){var a,o,i;if(!(arguments.length<2)){arguments.length===2?i=n:arguments.length===3?(a=n,i=r):(a=n,o=r,i=s);var c=o??c6.active(),u=this.startSpan(t,a,c),d=TU(c,u);return c6.with(d,i,void 0,u)}},e}();function mRt(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var hRt=new kCe,NCe=function(){function e(t,n,r,s){this._provider=t,this.name=n,this.version=r,this.options=s}return e.prototype.startSpan=function(t,n,r){return this._getTracer().startSpan(t,n,r)},e.prototype.startActiveSpan=function(t,n,r,s){var a=this._getTracer();return Reflect.apply(a.startActiveSpan,a,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):hRt},e}(),pRt=function(){function e(){}return e.prototype.getTracer=function(t,n,r){return new kCe},e}(),gRt=new pRt,Rj=function(){function e(){}return e.prototype.getTracer=function(t,n,r){var s;return(s=this.getDelegateTracer(t,n,r))!==null&&s!==void 0?s:new NCe(this,t,n,r)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:gRt},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,n,r){var s;return(s=this._delegate)===null||s===void 0?void 0:s.getTracer(t,n,r)},e}(),Ij;(function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(Ij||(Ij={}));var jj;(function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"})(jj||(jj={}));var Oj;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(Oj||(Oj={}));var Lj="[_0-9a-z-*/]",yRt="[a-z]"+Lj+"{0,255}",vRt="[a-z0-9]"+Lj+"{0,240}@[a-z]"+Lj+"{0,13}",xRt=new RegExp("^(?:"+yRt+"|"+vRt+")$"),bRt=/^[ -~]{0,255}[!-~]$/,_Rt=/,|=/;function wRt(e){return xRt.test(e)}function SRt(e){return bRt.test(e)&&!_Rt.test(e)}var Lte=32,CRt=512,Dte=",",Fte="=",ERt=function(){function e(t){this._internalState=new Map,t&&this._parse(t)}return e.prototype.set=function(t,n){var r=this._clone();return r._internalState.has(t)&&r._internalState.delete(t),r._internalState.set(t,n),r},e.prototype.unset=function(t){var n=this._clone();return n._internalState.delete(t),n},e.prototype.get=function(t){return this._internalState.get(t)},e.prototype.serialize=function(){var t=this;return this._keys().reduce(function(n,r){return n.push(r+Fte+t.get(r)),n},[]).join(Dte)},e.prototype._parse=function(t){t.length>CRt||(this._internalState=t.split(Dte).reverse().reduce(function(n,r){var s=r.trim(),a=s.indexOf(Fte);if(a!==-1){var o=s.slice(0,a),i=s.slice(a+1,r.length);wRt(o)&&SRt(i)&&n.set(o,i)}return n},new Map),this._internalState.size>Lte&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,Lte))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e}();function MRt(e){return new ERt(e)}var ACe=PM.getInstance(),PCe=ll.instance(),TRt=function(){function e(){}return e.prototype.getMeter=function(t,n,r){return _Ce},e}(),kRt=new TRt,u6="metrics",NRt=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalMeterProvider=function(t){return nx(u6,t,ll.instance())},e.prototype.getMeterProvider=function(){return mf(u6)||kRt},e.prototype.getMeter=function(t,n,r){return this.getMeterProvider().getMeter(t,n,r)},e.prototype.disable=function(){rx(u6,ll.instance())},e}(),RCe=NRt.getInstance(),ARt=function(){function e(){}return e.prototype.inject=function(t,n){},e.prototype.extract=function(t,n){return t},e.prototype.fields=function(){return[]},e}(),NU=bU("OpenTelemetry Baggage Key");function ICe(e){return e.getValue(NU)||void 0}function PRt(){return ICe(PM.getInstance().active())}function RRt(e,t){return e.setValue(NU,t)}function IRt(e){return e.deleteValue(NU)}var d6="propagation",jRt=new ARt,ORt=function(){function e(){this.createBaggage=DPt,this.getBaggage=ICe,this.getActiveBaggage=PRt,this.setBaggage=RRt,this.deleteBaggage=IRt}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(t){return nx(d6,t,ll.instance())},e.prototype.inject=function(t,n,r){return r===void 0&&(r=SCe),this._getGlobalPropagator().inject(t,n,r)},e.prototype.extract=function(t,n,r){return r===void 0&&(r=wCe),this._getGlobalPropagator().extract(t,n,r)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){rx(d6,ll.instance())},e.prototype._getGlobalPropagator=function(){return mf(d6)||jRt},e}(),jCe=ORt.getInstance(),f6="trace",LRt=function(){function e(){this._proxyTracerProvider=new Rj,this.wrapSpanContext=fRt,this.isSpanContextValid=kU,this.deleteSpan=lRt,this.getSpan=MU,this.getActiveSpan=iRt,this.getSpanContext=ECe,this.setSpan=TU,this.setSpanContext=cRt}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var n=nx(f6,this._proxyTracerProvider,ll.instance());return n&&this._proxyTracerProvider.setDelegate(t),n},e.prototype.getTracerProvider=function(){return mf(f6)||this._proxyTracerProvider},e.prototype.getTracer=function(t,n){return this.getTracerProvider().getTracer(t,n)},e.prototype.disable=function(){rx(f6,ll.instance()),this._proxyTracerProvider=new Rj},e}(),OCe=LRt.getInstance();const DRt={context:ACe,diag:PCe,metrics:RCe,propagation:jCe,trace:OCe},FRt=Object.freeze(Object.defineProperty({__proto__:null,DiagConsoleLogger:BPt,get DiagLogLevel(){return ca},INVALID_SPANID:SU,INVALID_SPAN_CONTEXT:CCe,INVALID_TRACEID:CU,ProxyTracer:NCe,ProxyTracerProvider:Rj,ROOT_CONTEXT:bCe,get SamplingDecision(){return Ij},get SpanKind(){return jj},get SpanStatusCode(){return Oj},get TraceFlags(){return eS},get ValueType(){return Pj},baggageEntryMetadataFromString:FPt,context:ACe,createContextKey:bU,createNoopMeter:eRt,createTraceState:MRt,default:DRt,defaultTextMapGetter:wCe,defaultTextMapSetter:SCe,diag:PCe,isSpanContextValid:kU,isValidSpanId:TCe,isValidTraceId:MCe,metrics:RCe,propagation:jCe,trace:OCe},Symbol.toStringTag,{value:"Module"})),Ute=Jh(FRt);var m6={exports:{}},Bte;function URt(){return Bte||(Bte=1,(()=>{var e={491:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ContextAPI=void 0;const i=o(223),c=o(172),u=o(930),d="context",m=new i.NoopContextManager;class h{constructor(){}static getInstance(){return this._instance||(this._instance=new h),this._instance}setGlobalContextManager(g){return(0,c.registerGlobal)(d,g,u.DiagAPI.instance())}active(){return this._getContextManager().active()}with(g,y,v,...x){return this._getContextManager().with(g,y,v,...x)}bind(g,y){return this._getContextManager().bind(g,y)}_getContextManager(){return(0,c.getGlobal)(d)||m}disable(){this._getContextManager().disable(),(0,c.unregisterGlobal)(d,u.DiagAPI.instance())}}a.ContextAPI=h},930:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DiagAPI=void 0;const i=o(56),c=o(912),u=o(957),d=o(172),m="diag";class h{constructor(){function g(x){return function(...b){const _=(0,d.getGlobal)("diag");if(_)return _[x](...b)}}const y=this,v=(x,b={logLevel:u.DiagLogLevel.INFO})=>{var _,w,S;if(x===y){const M=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return y.error((_=M.stack)!==null&&_!==void 0?_:M.message),!1}typeof b=="number"&&(b={logLevel:b});const C=(0,d.getGlobal)("diag"),E=(0,c.createLogLevelDiagLogger)((w=b.logLevel)!==null&&w!==void 0?w:u.DiagLogLevel.INFO,x);if(C&&!b.suppressOverrideMessage){const M=(S=new Error().stack)!==null&&S!==void 0?S:"<failed to generate stacktrace>";C.warn(`Current logger will be overwritten from ${M}`),E.warn(`Current logger will overwrite one already registered from ${M}`)}return(0,d.registerGlobal)("diag",E,y,!0)};y.setLogger=v,y.disable=()=>{(0,d.unregisterGlobal)(m,y)},y.createComponentLogger=x=>new i.DiagComponentLogger(x),y.verbose=g("verbose"),y.debug=g("debug"),y.info=g("info"),y.warn=g("warn"),y.error=g("error")}static instance(){return this._instance||(this._instance=new h),this._instance}}a.DiagAPI=h},653:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.MetricsAPI=void 0;const i=o(660),c=o(172),u=o(930),d="metrics";class m{constructor(){}static getInstance(){return this._instance||(this._instance=new m),this._instance}setGlobalMeterProvider(p){return(0,c.registerGlobal)(d,p,u.DiagAPI.instance())}getMeterProvider(){return(0,c.getGlobal)(d)||i.NOOP_METER_PROVIDER}getMeter(p,g,y){return this.getMeterProvider().getMeter(p,g,y)}disable(){(0,c.unregisterGlobal)(d,u.DiagAPI.instance())}}a.MetricsAPI=m},181:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PropagationAPI=void 0;const i=o(172),c=o(874),u=o(194),d=o(277),m=o(369),h=o(930),p="propagation",g=new c.NoopTextMapPropagator;class y{constructor(){this.createBaggage=m.createBaggage,this.getBaggage=d.getBaggage,this.getActiveBaggage=d.getActiveBaggage,this.setBaggage=d.setBaggage,this.deleteBaggage=d.deleteBaggage}static getInstance(){return this._instance||(this._instance=new y),this._instance}setGlobalPropagator(x){return(0,i.registerGlobal)(p,x,h.DiagAPI.instance())}inject(x,b,_=u.defaultTextMapSetter){return this._getGlobalPropagator().inject(x,b,_)}extract(x,b,_=u.defaultTextMapGetter){return this._getGlobalPropagator().extract(x,b,_)}fields(){return this._getGlobalPropagator().fields()}disable(){(0,i.unregisterGlobal)(p,h.DiagAPI.instance())}_getGlobalPropagator(){return(0,i.getGlobal)(p)||g}}a.PropagationAPI=y},997:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TraceAPI=void 0;const i=o(172),c=o(846),u=o(139),d=o(607),m=o(930),h="trace";class p{constructor(){this._proxyTracerProvider=new c.ProxyTracerProvider,this.wrapSpanContext=u.wrapSpanContext,this.isSpanContextValid=u.isSpanContextValid,this.deleteSpan=d.deleteSpan,this.getSpan=d.getSpan,this.getActiveSpan=d.getActiveSpan,this.getSpanContext=d.getSpanContext,this.setSpan=d.setSpan,this.setSpanContext=d.setSpanContext}static getInstance(){return this._instance||(this._instance=new p),this._instance}setGlobalTracerProvider(y){const v=(0,i.registerGlobal)(h,this._proxyTracerProvider,m.DiagAPI.instance());return v&&this._proxyTracerProvider.setDelegate(y),v}getTracerProvider(){return(0,i.getGlobal)(h)||this._proxyTracerProvider}getTracer(y,v){return this.getTracerProvider().getTracer(y,v)}disable(){(0,i.unregisterGlobal)(h,m.DiagAPI.instance()),this._proxyTracerProvider=new c.ProxyTracerProvider}}a.TraceAPI=p},277:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.deleteBaggage=a.setBaggage=a.getActiveBaggage=a.getBaggage=void 0;const i=o(491),u=(0,o(780).createContextKey)("OpenTelemetry Baggage Key");function d(g){return g.getValue(u)||void 0}a.getBaggage=d;function m(){return d(i.ContextAPI.getInstance().active())}a.getActiveBaggage=m;function h(g,y){return g.setValue(u,y)}a.setBaggage=h;function p(g){return g.deleteValue(u)}a.deleteBaggage=p},993:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BaggageImpl=void 0;class o{constructor(c){this._entries=c?new Map(c):new Map}getEntry(c){const u=this._entries.get(c);if(u)return Object.assign({},u)}getAllEntries(){return Array.from(this._entries.entries()).map(([c,u])=>[c,u])}setEntry(c,u){const d=new o(this._entries);return d._entries.set(c,u),d}removeEntry(c){const u=new o(this._entries);return u._entries.delete(c),u}removeEntries(...c){const u=new o(this._entries);for(const d of c)u._entries.delete(d);return u}clear(){return new o}}a.BaggageImpl=o},830:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.baggageEntryMetadataSymbol=void 0,a.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")},369:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.baggageEntryMetadataFromString=a.createBaggage=void 0;const i=o(930),c=o(993),u=o(830),d=i.DiagAPI.instance();function m(p={}){return new c.BaggageImpl(new Map(Object.entries(p)))}a.createBaggage=m;function h(p){return typeof p!="string"&&(d.error(`Cannot create baggage metadata from unknown type: ${typeof p}`),p=""),{__TYPE__:u.baggageEntryMetadataSymbol,toString(){return p}}}a.baggageEntryMetadataFromString=h},67:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.context=void 0;const i=o(491);a.context=i.ContextAPI.getInstance()},223:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.NoopContextManager=void 0;const i=o(780);class c{active(){return i.ROOT_CONTEXT}with(d,m,h,...p){return m.call(h,...p)}bind(d,m){return m}enable(){return this}disable(){return this}}a.NoopContextManager=c},780:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ROOT_CONTEXT=a.createContextKey=void 0;function o(c){return Symbol.for(c)}a.createContextKey=o;class i{constructor(u){const d=this;d._currentContext=u?new Map(u):new Map,d.getValue=m=>d._currentContext.get(m),d.setValue=(m,h)=>{const p=new i(d._currentContext);return p._currentContext.set(m,h),p},d.deleteValue=m=>{const h=new i(d._currentContext);return h._currentContext.delete(m),h}}}a.ROOT_CONTEXT=new i},506:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.diag=void 0;const i=o(930);a.diag=i.DiagAPI.instance()},56:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DiagComponentLogger=void 0;const i=o(172);class c{constructor(m){this._namespace=m.namespace||"DiagComponentLogger"}debug(...m){return u("debug",this._namespace,m)}error(...m){return u("error",this._namespace,m)}info(...m){return u("info",this._namespace,m)}warn(...m){return u("warn",this._namespace,m)}verbose(...m){return u("verbose",this._namespace,m)}}a.DiagComponentLogger=c;function u(d,m,h){const p=(0,i.getGlobal)("diag");if(p)return h.unshift(m),p[d](...h)}},972:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DiagConsoleLogger=void 0;const o=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];class i{constructor(){function u(d){return function(...m){if(console){let h=console[d];if(typeof h!="function"&&(h=console.log),typeof h=="function")return h.apply(console,m)}}}for(let d=0;d<o.length;d++)this[o[d].n]=u(o[d].c)}}a.DiagConsoleLogger=i},912:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createLogLevelDiagLogger=void 0;const i=o(957);function c(u,d){u<i.DiagLogLevel.NONE?u=i.DiagLogLevel.NONE:u>i.DiagLogLevel.ALL&&(u=i.DiagLogLevel.ALL),d=d||{};function m(h,p){const g=d[h];return typeof g=="function"&&u>=p?g.bind(d):function(){}}return{error:m("error",i.DiagLogLevel.ERROR),warn:m("warn",i.DiagLogLevel.WARN),info:m("info",i.DiagLogLevel.INFO),debug:m("debug",i.DiagLogLevel.DEBUG),verbose:m("verbose",i.DiagLogLevel.VERBOSE)}}a.createLogLevelDiagLogger=c},957:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DiagLogLevel=void 0,function(o){o[o.NONE=0]="NONE",o[o.ERROR=30]="ERROR",o[o.WARN=50]="WARN",o[o.INFO=60]="INFO",o[o.DEBUG=70]="DEBUG",o[o.VERBOSE=80]="VERBOSE",o[o.ALL=9999]="ALL"}(a.DiagLogLevel||(a.DiagLogLevel={}))},172:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.unregisterGlobal=a.getGlobal=a.registerGlobal=void 0;const i=o(200),c=o(521),u=o(130),d=c.VERSION.split(".")[0],m=Symbol.for(`opentelemetry.js.api.${d}`),h=i._globalThis;function p(v,x,b,_=!1){var w;const S=h[m]=(w=h[m])!==null&&w!==void 0?w:{version:c.VERSION};if(!_&&S[v]){const C=new Error(`@opentelemetry/api: Attempted duplicate registration of API: ${v}`);return b.error(C.stack||C.message),!1}if(S.version!==c.VERSION){const C=new Error(`@opentelemetry/api: Registration of version v${S.version} for ${v} does not match previously registered API v${c.VERSION}`);return b.error(C.stack||C.message),!1}return S[v]=x,b.debug(`@opentelemetry/api: Registered a global for ${v} v${c.VERSION}.`),!0}a.registerGlobal=p;function g(v){var x,b;const _=(x=h[m])===null||x===void 0?void 0:x.version;if(!(!_||!(0,u.isCompatible)(_)))return(b=h[m])===null||b===void 0?void 0:b[v]}a.getGlobal=g;function y(v,x){x.debug(`@opentelemetry/api: Unregistering a global for ${v} v${c.VERSION}.`);const b=h[m];b&&delete b[v]}a.unregisterGlobal=y},130:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.isCompatible=a._makeCompatibilityCheck=void 0;const i=o(521),c=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function u(d){const m=new Set([d]),h=new Set,p=d.match(c);if(!p)return()=>!1;const g={major:+p[1],minor:+p[2],patch:+p[3],prerelease:p[4]};if(g.prerelease!=null)return function(b){return b===d};function y(x){return h.add(x),!1}function v(x){return m.add(x),!0}return function(b){if(m.has(b))return!0;if(h.has(b))return!1;const _=b.match(c);if(!_)return y(b);const w={major:+_[1],minor:+_[2],patch:+_[3],prerelease:_[4]};return w.prerelease!=null||g.major!==w.major?y(b):g.major===0?g.minor===w.minor&&g.patch<=w.patch?v(b):y(b):g.minor<=w.minor?v(b):y(b)}}a._makeCompatibilityCheck=u,a.isCompatible=u(i.VERSION)},886:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.metrics=void 0;const i=o(653);a.metrics=i.MetricsAPI.getInstance()},901:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ValueType=void 0,function(o){o[o.INT=0]="INT",o[o.DOUBLE=1]="DOUBLE"}(a.ValueType||(a.ValueType={}))},102:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createNoopMeter=a.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=a.NOOP_OBSERVABLE_GAUGE_METRIC=a.NOOP_OBSERVABLE_COUNTER_METRIC=a.NOOP_UP_DOWN_COUNTER_METRIC=a.NOOP_HISTOGRAM_METRIC=a.NOOP_COUNTER_METRIC=a.NOOP_METER=a.NoopObservableUpDownCounterMetric=a.NoopObservableGaugeMetric=a.NoopObservableCounterMetric=a.NoopObservableMetric=a.NoopHistogramMetric=a.NoopUpDownCounterMetric=a.NoopCounterMetric=a.NoopMetric=a.NoopMeter=void 0;class o{constructor(){}createHistogram(x,b){return a.NOOP_HISTOGRAM_METRIC}createCounter(x,b){return a.NOOP_COUNTER_METRIC}createUpDownCounter(x,b){return a.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(x,b){return a.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(x,b){return a.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(x,b){return a.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(x,b){}removeBatchObservableCallback(x){}}a.NoopMeter=o;class i{}a.NoopMetric=i;class c extends i{add(x,b){}}a.NoopCounterMetric=c;class u extends i{add(x,b){}}a.NoopUpDownCounterMetric=u;class d extends i{record(x,b){}}a.NoopHistogramMetric=d;class m{addCallback(x){}removeCallback(x){}}a.NoopObservableMetric=m;class h extends m{}a.NoopObservableCounterMetric=h;class p extends m{}a.NoopObservableGaugeMetric=p;class g extends m{}a.NoopObservableUpDownCounterMetric=g,a.NOOP_METER=new o,a.NOOP_COUNTER_METRIC=new c,a.NOOP_HISTOGRAM_METRIC=new d,a.NOOP_UP_DOWN_COUNTER_METRIC=new u,a.NOOP_OBSERVABLE_COUNTER_METRIC=new h,a.NOOP_OBSERVABLE_GAUGE_METRIC=new p,a.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new g;function y(){return a.NOOP_METER}a.createNoopMeter=y},660:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.NOOP_METER_PROVIDER=a.NoopMeterProvider=void 0;const i=o(102);class c{getMeter(d,m,h){return i.NOOP_METER}}a.NoopMeterProvider=c,a.NOOP_METER_PROVIDER=new c},200:function(s,a,o){var i=this&&this.__createBinding||(Object.create?function(u,d,m,h){h===void 0&&(h=m),Object.defineProperty(u,h,{enumerable:!0,get:function(){return d[m]}})}:function(u,d,m,h){h===void 0&&(h=m),u[h]=d[m]}),c=this&&this.__exportStar||function(u,d){for(var m in u)m!=="default"&&!Object.prototype.hasOwnProperty.call(d,m)&&i(d,u,m)};Object.defineProperty(a,"__esModule",{value:!0}),c(o(46),a)},651:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a._globalThis=void 0,a._globalThis=typeof globalThis=="object"?globalThis:La},46:function(s,a,o){var i=this&&this.__createBinding||(Object.create?function(u,d,m,h){h===void 0&&(h=m),Object.defineProperty(u,h,{enumerable:!0,get:function(){return d[m]}})}:function(u,d,m,h){h===void 0&&(h=m),u[h]=d[m]}),c=this&&this.__exportStar||function(u,d){for(var m in u)m!=="default"&&!Object.prototype.hasOwnProperty.call(d,m)&&i(d,u,m)};Object.defineProperty(a,"__esModule",{value:!0}),c(o(651),a)},939:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.propagation=void 0;const i=o(181);a.propagation=i.PropagationAPI.getInstance()},874:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.NoopTextMapPropagator=void 0;class o{inject(c,u){}extract(c,u){return c}fields(){return[]}}a.NoopTextMapPropagator=o},194:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.defaultTextMapSetter=a.defaultTextMapGetter=void 0,a.defaultTextMapGetter={get(o,i){if(o!=null)return o[i]},keys(o){return o==null?[]:Object.keys(o)}},a.defaultTextMapSetter={set(o,i,c){o!=null&&(o[i]=c)}}},845:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.trace=void 0;const i=o(997);a.trace=i.TraceAPI.getInstance()},403:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.NonRecordingSpan=void 0;const i=o(476);class c{constructor(d=i.INVALID_SPAN_CONTEXT){this._spanContext=d}spanContext(){return this._spanContext}setAttribute(d,m){return this}setAttributes(d){return this}addEvent(d,m){return this}setStatus(d){return this}updateName(d){return this}end(d){}isRecording(){return!1}recordException(d,m){}}a.NonRecordingSpan=c},614:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.NoopTracer=void 0;const i=o(491),c=o(607),u=o(403),d=o(139),m=i.ContextAPI.getInstance();class h{startSpan(y,v,x=m.active()){if(!!v?.root)return new u.NonRecordingSpan;const _=x&&(0,c.getSpanContext)(x);return p(_)&&(0,d.isSpanContextValid)(_)?new u.NonRecordingSpan(_):new u.NonRecordingSpan}startActiveSpan(y,v,x,b){let _,w,S;if(arguments.length<2)return;arguments.length===2?S=v:arguments.length===3?(_=v,S=x):(_=v,w=x,S=b);const C=w??m.active(),E=this.startSpan(y,_,C),M=(0,c.setSpan)(C,E);return m.with(M,S,void 0,E)}}a.NoopTracer=h;function p(g){return typeof g=="object"&&typeof g.spanId=="string"&&typeof g.traceId=="string"&&typeof g.traceFlags=="number"}},124:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.NoopTracerProvider=void 0;const i=o(614);class c{getTracer(d,m,h){return new i.NoopTracer}}a.NoopTracerProvider=c},125:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ProxyTracer=void 0;const i=o(614),c=new i.NoopTracer;class u{constructor(m,h,p,g){this._provider=m,this.name=h,this.version=p,this.options=g}startSpan(m,h,p){return this._getTracer().startSpan(m,h,p)}startActiveSpan(m,h,p,g){const y=this._getTracer();return Reflect.apply(y.startActiveSpan,y,arguments)}_getTracer(){if(this._delegate)return this._delegate;const m=this._provider.getDelegateTracer(this.name,this.version,this.options);return m?(this._delegate=m,this._delegate):c}}a.ProxyTracer=u},846:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ProxyTracerProvider=void 0;const i=o(125),c=o(124),u=new c.NoopTracerProvider;class d{getTracer(h,p,g){var y;return(y=this.getDelegateTracer(h,p,g))!==null&&y!==void 0?y:new i.ProxyTracer(this,h,p,g)}getDelegate(){var h;return(h=this._delegate)!==null&&h!==void 0?h:u}setDelegate(h){this._delegate=h}getDelegateTracer(h,p,g){var y;return(y=this._delegate)===null||y===void 0?void 0:y.getTracer(h,p,g)}}a.ProxyTracerProvider=d},996:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SamplingDecision=void 0,function(o){o[o.NOT_RECORD=0]="NOT_RECORD",o[o.RECORD=1]="RECORD",o[o.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(a.SamplingDecision||(a.SamplingDecision={}))},607:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.getSpanContext=a.setSpanContext=a.deleteSpan=a.setSpan=a.getActiveSpan=a.getSpan=void 0;const i=o(780),c=o(403),u=o(491),d=(0,i.createContextKey)("OpenTelemetry Context Key SPAN");function m(x){return x.getValue(d)||void 0}a.getSpan=m;function h(){return m(u.ContextAPI.getInstance().active())}a.getActiveSpan=h;function p(x,b){return x.setValue(d,b)}a.setSpan=p;function g(x){return x.deleteValue(d)}a.deleteSpan=g;function y(x,b){return p(x,new c.NonRecordingSpan(b))}a.setSpanContext=y;function v(x){var b;return(b=m(x))===null||b===void 0?void 0:b.spanContext()}a.getSpanContext=v},325:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TraceStateImpl=void 0;const i=o(564),c=32,u=512,d=",",m="=";class h{constructor(g){this._internalState=new Map,g&&this._parse(g)}set(g,y){const v=this._clone();return v._internalState.has(g)&&v._internalState.delete(g),v._internalState.set(g,y),v}unset(g){const y=this._clone();return y._internalState.delete(g),y}get(g){return this._internalState.get(g)}serialize(){return this._keys().reduce((g,y)=>(g.push(y+m+this.get(y)),g),[]).join(d)}_parse(g){g.length>u||(this._internalState=g.split(d).reverse().reduce((y,v)=>{const x=v.trim(),b=x.indexOf(m);if(b!==-1){const _=x.slice(0,b),w=x.slice(b+1,v.length);(0,i.validateKey)(_)&&(0,i.validateValue)(w)&&y.set(_,w)}return y},new Map),this._internalState.size>c&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,c))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){const g=new h;return g._internalState=new Map(this._internalState),g}}a.TraceStateImpl=h},564:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.validateValue=a.validateKey=void 0;const o="[_0-9a-z-*/]",i=`[a-z]${o}{0,255}`,c=`[a-z0-9]${o}{0,240}@[a-z]${o}{0,13}`,u=new RegExp(`^(?:${i}|${c})$`),d=/^[ -~]{0,255}[!-~]$/,m=/,|=/;function h(g){return u.test(g)}a.validateKey=h;function p(g){return d.test(g)&&!m.test(g)}a.validateValue=p},98:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createTraceState=void 0;const i=o(325);function c(u){return new i.TraceStateImpl(u)}a.createTraceState=c},476:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.INVALID_SPAN_CONTEXT=a.INVALID_TRACEID=a.INVALID_SPANID=void 0;const i=o(475);a.INVALID_SPANID="0000000000000000",a.INVALID_TRACEID="00000000000000000000000000000000",a.INVALID_SPAN_CONTEXT={traceId:a.INVALID_TRACEID,spanId:a.INVALID_SPANID,traceFlags:i.TraceFlags.NONE}},357:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SpanKind=void 0,function(o){o[o.INTERNAL=0]="INTERNAL",o[o.SERVER=1]="SERVER",o[o.CLIENT=2]="CLIENT",o[o.PRODUCER=3]="PRODUCER",o[o.CONSUMER=4]="CONSUMER"}(a.SpanKind||(a.SpanKind={}))},139:(s,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.wrapSpanContext=a.isSpanContextValid=a.isValidSpanId=a.isValidTraceId=void 0;const i=o(476),c=o(403),u=/^([0-9a-f]{32})$/i,d=/^[0-9a-f]{16}$/i;function m(y){return u.test(y)&&y!==i.INVALID_TRACEID}a.isValidTraceId=m;function h(y){return d.test(y)&&y!==i.INVALID_SPANID}a.isValidSpanId=h;function p(y){return m(y.traceId)&&h(y.spanId)}a.isSpanContextValid=p;function g(y){return new c.NonRecordingSpan(y)}a.wrapSpanContext=g},847:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SpanStatusCode=void 0,function(o){o[o.UNSET=0]="UNSET",o[o.OK=1]="OK",o[o.ERROR=2]="ERROR"}(a.SpanStatusCode||(a.SpanStatusCode={}))},475:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TraceFlags=void 0,function(o){o[o.NONE=0]="NONE",o[o.SAMPLED=1]="SAMPLED"}(a.TraceFlags||(a.TraceFlags={}))},521:(s,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.VERSION=void 0,a.VERSION="1.6.0"}},t={};function n(s){var a=t[s];if(a!==void 0)return a.exports;var o=t[s]={exports:{}},i=!0;try{e[s].call(o.exports,o,o.exports,n),i=!1}finally{i&&delete t[s]}return o.exports}typeof n<"u"&&(n.ab=__dirname+"/");var r={};(()=>{var s=r;Object.defineProperty(s,"__esModule",{value:!0}),s.trace=s.propagation=s.metrics=s.diag=s.context=s.INVALID_SPAN_CONTEXT=s.INVALID_TRACEID=s.INVALID_SPANID=s.isValidSpanId=s.isValidTraceId=s.isSpanContextValid=s.createTraceState=s.TraceFlags=s.SpanStatusCode=s.SpanKind=s.SamplingDecision=s.ProxyTracerProvider=s.ProxyTracer=s.defaultTextMapSetter=s.defaultTextMapGetter=s.ValueType=s.createNoopMeter=s.DiagLogLevel=s.DiagConsoleLogger=s.ROOT_CONTEXT=s.createContextKey=s.baggageEntryMetadataFromString=void 0;var a=n(369);Object.defineProperty(s,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return a.baggageEntryMetadataFromString}});var o=n(780);Object.defineProperty(s,"createContextKey",{enumerable:!0,get:function(){return o.createContextKey}}),Object.defineProperty(s,"ROOT_CONTEXT",{enumerable:!0,get:function(){return o.ROOT_CONTEXT}});var i=n(972);Object.defineProperty(s,"DiagConsoleLogger",{enumerable:!0,get:function(){return i.DiagConsoleLogger}});var c=n(957);Object.defineProperty(s,"DiagLogLevel",{enumerable:!0,get:function(){return c.DiagLogLevel}});var u=n(102);Object.defineProperty(s,"createNoopMeter",{enumerable:!0,get:function(){return u.createNoopMeter}});var d=n(901);Object.defineProperty(s,"ValueType",{enumerable:!0,get:function(){return d.ValueType}});var m=n(194);Object.defineProperty(s,"defaultTextMapGetter",{enumerable:!0,get:function(){return m.defaultTextMapGetter}}),Object.defineProperty(s,"defaultTextMapSetter",{enumerable:!0,get:function(){return m.defaultTextMapSetter}});var h=n(125);Object.defineProperty(s,"ProxyTracer",{enumerable:!0,get:function(){return h.ProxyTracer}});var p=n(846);Object.defineProperty(s,"ProxyTracerProvider",{enumerable:!0,get:function(){return p.ProxyTracerProvider}});var g=n(996);Object.defineProperty(s,"SamplingDecision",{enumerable:!0,get:function(){return g.SamplingDecision}});var y=n(357);Object.defineProperty(s,"SpanKind",{enumerable:!0,get:function(){return y.SpanKind}});var v=n(847);Object.defineProperty(s,"SpanStatusCode",{enumerable:!0,get:function(){return v.SpanStatusCode}});var x=n(475);Object.defineProperty(s,"TraceFlags",{enumerable:!0,get:function(){return x.TraceFlags}});var b=n(98);Object.defineProperty(s,"createTraceState",{enumerable:!0,get:function(){return b.createTraceState}});var _=n(139);Object.defineProperty(s,"isSpanContextValid",{enumerable:!0,get:function(){return _.isSpanContextValid}}),Object.defineProperty(s,"isValidTraceId",{enumerable:!0,get:function(){return _.isValidTraceId}}),Object.defineProperty(s,"isValidSpanId",{enumerable:!0,get:function(){return _.isValidSpanId}});var w=n(476);Object.defineProperty(s,"INVALID_SPANID",{enumerable:!0,get:function(){return w.INVALID_SPANID}}),Object.defineProperty(s,"INVALID_TRACEID",{enumerable:!0,get:function(){return w.INVALID_TRACEID}}),Object.defineProperty(s,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return w.INVALID_SPAN_CONTEXT}});const S=n(67);Object.defineProperty(s,"context",{enumerable:!0,get:function(){return S.context}});const C=n(506);Object.defineProperty(s,"diag",{enumerable:!0,get:function(){return C.diag}});const E=n(886);Object.defineProperty(s,"metrics",{enumerable:!0,get:function(){return E.metrics}});const M=n(939);Object.defineProperty(s,"propagation",{enumerable:!0,get:function(){return M.propagation}});const T=n(845);Object.defineProperty(s,"trace",{enumerable:!0,get:function(){return T.trace}}),s.default={context:S.context,diag:C.diag,metrics:E.metrics,propagation:M.propagation,trace:T.trace}})(),m6.exports=r})()),m6.exports}var Vte;function BRt(){return Vte||(Vte=1,function(e){var t={};Object.defineProperty(e,"__esModule",{value:!0});function n(C,E){for(var M in E)Object.defineProperty(C,M,{enumerable:!0,get:E[M]})}n(e,{BubbledError:function(){return h},SpanKind:function(){return d},SpanStatusCode:function(){return u},getTracer:function(){return S},isBubbledError:function(){return p}});const r=xCe(),s=bPt();let a;if(t.NEXT_RUNTIME==="edge")a=Ute;else try{a=Ute}catch{a=URt()}const{context:o,propagation:i,trace:c,SpanStatusCode:u,SpanKind:d,ROOT_CONTEXT:m}=a;class h extends Error{constructor(E,M){super(),this.bubble=E,this.result=M}}function p(C){return typeof C!="object"||C===null?!1:C instanceof h}const g=(C,E)=>{p(E)&&E.bubble?C.setAttribute("next.bubble",!0):(E&&C.recordException(E),C.setStatus({code:u.ERROR,message:E?.message})),C.end()},y=new Map,v=a.createContextKey("next.rootSpanId");let x=0;const b=()=>x++,_={set(C,E,M){C.push({key:E,value:M})}};class w{getTracerInstance(){return c.getTracer("next.js","0.0.1")}getContext(){return o}getTracePropagationData(){const E=o.active(),M=[];return i.inject(E,M,_),M}getActiveScopeSpan(){return c.getSpan(o?.active())}withPropagatedContext(E,M,T){const I=o.active();if(c.getSpanContext(I))return M();const j=i.extract(I,E,T);return o.with(j,M)}trace(...E){var M;const[T,I,j]=E,{fn:N,options:P}=typeof I=="function"?{fn:I,options:{}}:{fn:j,options:{...I}},R=P.spanName??T;if(!r.NextVanillaSpanAllowlist.includes(T)&&t.NEXT_OTEL_VERBOSE!=="1"||P.hideSpan)return N();let k=this.getSpanContext(P?.parentSpan??this.getActiveScopeSpan()),O=!1;k?(M=c.getSpanContext(k))!=null&&M.isRemote&&(O=!0):(k=o?.active()??m,O=!0);const L=b();return P.attributes={"next.span_name":R,"next.span_type":T,...P.attributes},o.with(k.setValue(v,L),()=>this.getTracerInstance().startActiveSpan(R,P,F=>{const U="performance"in globalThis&&"measure"in performance?globalThis.performance.now():void 0,V=()=>{y.delete(L),U&&t.NEXT_OTEL_PERFORMANCE_PREFIX&&r.LogSpanAllowList.includes(T||"")&&performance.measure(`${t.NEXT_OTEL_PERFORMANCE_PREFIX}:next-${(T.split(".").pop()||"").replace(/[A-Z]/g,W=>"-"+W.toLowerCase())}`,{start:U,end:performance.now()})};O&&y.set(L,new Map(Object.entries(P.attributes??{})));try{if(N.length>1)return N(F,H=>g(F,H));const W=N(F);return(0,s.isThenable)(W)?W.then(H=>(F.end(),H)).catch(H=>{throw g(F,H),H}).finally(V):(F.end(),V(),W)}catch(W){throw g(F,W),V(),W}}))}wrap(...E){const M=this,[T,I,j]=E.length===3?E:[E[0],{},E[1]];return!r.NextVanillaSpanAllowlist.includes(T)&&t.NEXT_OTEL_VERBOSE!=="1"?j:function(){let N=I;typeof N=="function"&&typeof j=="function"&&(N=N.apply(this,arguments));const P=arguments.length-1,R=arguments[P];if(typeof R=="function"){const k=M.getContext().bind(o.active(),R);return M.trace(T,N,(O,L)=>(arguments[P]=function(F){return L?.(F),k.apply(this,arguments)},j.apply(this,arguments)))}else return M.trace(T,N,()=>j.apply(this,arguments))}}startSpan(...E){const[M,T]=E,I=this.getSpanContext(T?.parentSpan??this.getActiveScopeSpan());return this.getTracerInstance().startSpan(M,T,I)}getSpanContext(E){return E?c.setSpan(o.active(),E):void 0}getRootSpanAttributes(){const E=o.active().getValue(v);return y.get(E)}setRootSpanAttribute(E,M){const T=o.active().getValue(v),I=y.get(T);I&&I.set(E,M)}}const S=(()=>{const C=new w;return()=>C})()}(s6)),s6}var h6={exports:{}},$te;function VRt(){return $te||($te=1,(()=>{typeof __nccwpck_require__<"u"&&(__nccwpck_require__.ab=__dirname+"/");var e={};(()=>{var t=e;/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */t.parse=o,t.serialize=i;var n=decodeURIComponent,r=encodeURIComponent,s=/; */,a=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function o(u,d){if(typeof u!="string")throw new TypeError("argument str must be a string");for(var m={},h=d||{},p=u.split(s),g=h.decode||n,y=0;y<p.length;y++){var v=p[y],x=v.indexOf("=");if(!(x<0)){var b=v.substr(0,x).trim(),_=v.substr(++x,v.length).trim();_[0]=='"'&&(_=_.slice(1,-1)),m[b]==null&&(m[b]=c(_,g))}}return m}function i(u,d,m){var h=m||{},p=h.encode||r;if(typeof p!="function")throw new TypeError("option encode is invalid");if(!a.test(u))throw new TypeError("argument name is invalid");var g=p(d);if(g&&!a.test(g))throw new TypeError("argument val is invalid");var y=u+"="+g;if(h.maxAge!=null){var v=h.maxAge-0;if(isNaN(v)||!isFinite(v))throw new TypeError("option maxAge is invalid");y+="; Max-Age="+Math.floor(v)}if(h.domain){if(!a.test(h.domain))throw new TypeError("option domain is invalid");y+="; Domain="+h.domain}if(h.path){if(!a.test(h.path))throw new TypeError("option path is invalid");y+="; Path="+h.path}if(h.expires){if(typeof h.expires.toUTCString!="function")throw new TypeError("option expires is invalid");y+="; Expires="+h.expires.toUTCString()}if(h.httpOnly&&(y+="; HttpOnly"),h.secure&&(y+="; Secure"),h.sameSite){var x=typeof h.sameSite=="string"?h.sameSite.toLowerCase():h.sameSite;switch(x){case!0:y+="; SameSite=Strict";break;case"lax":y+="; SameSite=Lax";break;case"strict":y+="; SameSite=Strict";break;case"none":y+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return y}function c(u,d){try{return d(u)}catch{return u}}})(),h6.exports=e})()),h6.exports}var Wte;function $Rt(){return Wte||(Wte=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(_,w){for(var S in w)Object.defineProperty(_,S,{enumerable:!0,get:w[S]})}t(e,{ApiError:function(){return v},COOKIE_NAME_PRERENDER_BYPASS:function(){return d},COOKIE_NAME_PRERENDER_DATA:function(){return m},RESPONSE_LIMIT_DEFAULT:function(){return h},SYMBOL_CLEARED_COOKIES:function(){return g},SYMBOL_PREVIEW_DATA:function(){return p},checkIsOnDemandRevalidate:function(){return u},clearPreviewData:function(){return y},redirect:function(){return c},sendError:function(){return x},sendStatusCode:function(){return i},setLazyProp:function(){return b},wrapApiHandler:function(){return o}});const n=vPt(),r=xPt(),s=BRt(),a=xCe();function o(_,w){return(...S)=>((0,s.getTracer)().setRootSpanAttribute("next.route",_),(0,s.getTracer)().trace(a.NodeSpan.runHandler,{spanName:`executing api route (pages) ${_}`},()=>w(...S)))}function i(_,w){return _.statusCode=w,_}function c(_,w,S){if(typeof w=="string"&&(S=w,w=307),typeof w!="number"||typeof S!="string")throw Object.defineProperty(new Error("Invalid redirect arguments. Please use a single argument URL, e.g. res.redirect('/destination') or use a status code and URL, e.g. res.redirect(307, '/destination')."),"__NEXT_ERROR_CODE",{value:"E389",enumerable:!1,configurable:!0});return _.writeHead(w,{Location:S}),_.write(S),_.end(),_}function u(_,w){const S=n.HeadersAdapter.from(_.headers),E=S.get(r.PRERENDER_REVALIDATE_HEADER)===w.previewModeId,M=S.has(r.PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER);return{isOnDemandRevalidate:E,revalidateOnlyGenerated:M}}const d="__prerender_bypass",m="__next_preview_data",h=4*1024*1024,p=Symbol(m),g=Symbol(d);function y(_,w={}){if(g in _)return _;const{serialize:S}=VRt(),C=_.getHeader("Set-Cookie");return _.setHeader("Set-Cookie",[...typeof C=="string"?[C]:Array.isArray(C)?C:[],S(d,"",{expires:new Date(0),httpOnly:!0,sameSite:"none",secure:!0,path:"/",...w.path!==void 0?{path:w.path}:void 0}),S(m,"",{expires:new Date(0),httpOnly:!0,sameSite:"none",secure:!0,path:"/",...w.path!==void 0?{path:w.path}:void 0})]),Object.defineProperty(_,g,{value:!0,enumerable:!1}),_}class v extends Error{constructor(w,S){super(S),this.statusCode=w}}function x(_,w,S){_.statusCode=w,_.statusMessage=S,_.end(S)}function b({req:_},w,S){const C={configurable:!0,enumerable:!0},E={...C,writable:!0};Object.defineProperty(_,w,{...C,get:()=>{const M=S();return Object.defineProperty(_,w,{...E,value:M}),M},set:M=>{Object.defineProperty(_,w,{...E,value:M})}})}}(e6)),e6}var WRt=$Rt();function Hte(e){return new Date(`${e}T00:00:00`)}const zte={month:"long",day:"2-digit",year:"numeric"},Gte={hour:"numeric"};function XHt(e,t="en-US"){const n=e.check_in_time?new Date(`${e.check_in_date}T${e.check_in_time}`):Hte(e.check_in_date),r=e.check_out_time?new Date(`${e.check_out_date}T${e.check_out_time}`):Hte(e.check_out_date);return{checkInDateString:n.toLocaleDateString(t,zte),checkOutDateString:r.toLocaleDateString(t,zte),checkInTimeString:e.check_in_time?n.toLocaleTimeString(t,Gte):null,checkOutTimeString:e.check_out_time?r.toLocaleTimeString(t,Gte):null,checkInDate:n,checkOutDate:r}}function HRt(e,t){const n=[],r=new Date(e);for(;r<=t;)n.push(new Date(r)),r.setDate(r.getDate()+1);return n.length}function ZHt(e,t,n){const r=HRt(e,t)-1,s=n.price.pro_rate_discount?.base_price_after_discount;return{dailyBaseRate:n.price.base_price/r,dailyDiscountedBaseRate:s?s/r:null,currencyCode:n.price.currency_code,numNights:r}}const JHt=({amount:e,currency:t,targetCurrency:n,exchangeRates:r,options:s})=>{const a=qte(e,t,s),o=e/1e6,i=r?.find(({source_currency:u,target_currency:d})=>u===t&&d===n);if(!i||n===t)return{original:a,originalAmount:o};const c=qte(e*i.conversion_factor,n,s);return{original:a,originalAmount:o,adjusted:c,adjustedAmount:e*i.conversion_factor/1e6}},qte=(e,t,n)=>V2e(e!==null?e/1e6:e,t,n);function zRt(e,t,n){if(!e)return null;const r=e.split(t);return r.length<=n?r:[r.slice(0,-1).join(t),...r.slice(-1)]}function Qh(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${r}`}function ezt(e){const t=new Date;return t.setDate(t.getDate()+e),t}const GRt=async({hotelSlug:e,headers:t={},reason:n})=>{const{error:r,data:s}=await ne.GET("/rest/travel/hotels/{slug}",n,{params:{path:{slug:e}},headers:t,timeoutMs:nn.HIGH});if(r)throw new Me("API_CLIENTS_ERROR",{cause:r});return s},tzt=async({filters:e,reason:t})=>{const n=await ne.POST("/rest/travel/hotels/search-widgets",t,{body:e,timeoutMs:nn.NONE});if(n.data)return{hotels:n.data.hotels,map_item:n.data.map_item};throw new Error("No hotel results returned",{cause:n.error})},nzt=async({hotelTripadvisorId:e,searchPayload:t,reason:n})=>{const{checkIn:r,checkOut:s,numAdults:a,numChildren:o}=t,i=await ne.POST("/rest/travel/hotels/search-availability",n,{body:{currency:"USD",filter:{tripadvisor_ids:[e]},stay_info:{check_in_date:Qh(r),check_out_date:Qh(s),guests:{adults:a,children:o}}},timeoutMs:nn.HIGH,retries:2});return i.data?{availability:i.data.results?.find(c=>c.tripadvisor_id===e),currencyExchangeRates:i.data.currency_exchange_rates,otaOffers:i.data.ota_hotel_offers?.find(c=>c.tripadvisor_id===e),perplexityProRateInfo:i.data.perplexity_pro_rate_info}:null},rzt=async({tripadvisorIds:e,searchPayload:t,reason:n})=>{const{checkIn:r,checkOut:s,numAdults:a,numChildren:o}=t,i=await ne.POST("/rest/travel/hotels/search-availability",n,{body:{currency:"USD",filter:{tripadvisor_ids:e},stay_info:{check_in_date:Qh(r),check_out_date:Qh(s),guests:{adults:a,children:o}}},timeoutMs:nn.HIGH,retries:2});return i.data?{availability:i.data.results,currencyExchangeRates:i.data.currency_exchange_rates,otaOffers:i.data.ota_hotel_offers}:null},szt=async({searchPayload:e,rate:t,paymentInfo:n,discountId:r,isProRate:s,reason:a})=>{const{checkIn:o,checkOut:i,numAdults:c,numChildren:u}=e,d=zRt(n.name," ",1),m=await ne.POST("/rest/travel/hotels/reservations",a,{timeoutMs:nn.NONE,body:{hotel_booking:{check_in_date:Qh(o),check_out_date:Qh(i),guests:{number_of_adults:c,number_of_children:u||null,primary:{address:{street:[n.address.line1,n.address.line2].filter(h=>!!h).join(" "),city:n.address.city,state:n.address.state,country_code:n.address.country,postal_code:n.address.postal_code},email:n.email,given_name:d?.[0]??"",surname:d?.[1]??"",telephone_number:n.phone}},payment:{stripe_payment_method_id:n.stripePaymentMethodId,stripe_customer_id:n.stripeCustomerId},selfbook_rate:{...t,is_pro_rate:s}},discount_id:r}});if(m.data)return m.data.hotel_booking;throw new WRt.ApiError(m.response.status,"Booking hotel room failed")},azt=async({limit:e,offset:t,isCanceled:n,beforeDate:r,afterDate:s,dateOrder:a="desc",headers:o,reason:i})=>{const c=await ne.GET("/rest/travel/hotels/user/reservations",i,{params:{query:{limit:e,offset:t,is_canceled:n,before_date:r,after_date:s,date_order_by:a}},headers:o,timeoutMs:nn.MEDIUM});return c.data?c.data:null},ozt=async({bookingId:e,reason:t})=>{const n=await ne.DELETE("/rest/travel/hotels/reservations/{reservation_id}",t,{params:{path:{reservation_id:e}},timeoutMs:nn.HIGH});if(!n.data)throw Error("Failed to cancel booking",{cause:n.error})},izt=async({amount:e,currency:t,paymentMethodId:n,reason:r})=>{const s=await ne.GET("/rest/travel/hotels/user/discount-offer",r,{params:{query:{base_amount_micros:e,currency_code:t,payment_method_id:n}},timeoutMs:nn.HIGH});return s.data?s.data:null},lzt=async({reason:e})=>{const t=await ne.GET("/rest/stripe/get-customer-billing-info",e);return t.data?t.data:null},qRt=({slug:e,reason:t,enabled:n=!!e})=>Ke({enabled:n,queryKey:["hotels",e],queryFn:()=>GRt({hotelSlug:e,reason:t})}),KRt=e=>{const t=/\[([^\]]+)\]\(pplx:\/\/action\/followup\)/g;return e.replace(t,"$1")};var tS={};const av="Perplexity",YRt="",LCe=80,DCe=160,Dj="Perplexity is a free AI-powered answer engine that provides accurate, trusted, and real-time answers to any question.";function QRt(e){if(!e)return null;try{return new Date(e).toISOString().slice(0,10)}catch{return null}}const Fj=({firstEntity:e,query:t,slug:n,userAgent:r})=>{if(r?r1(r):!1)return Xn({title:av,index:!1,userAgent:r});if(!e)return p6({result:"no_result",slug:n,userAgent:r}),Xn({index:!1,title:t?nc(t).actualQuery||t:void 0,userAgent:r});const a=an.parseAskTextField(e);if(!a)return p6({result:"bad_parse",slug:n,userAgent:r}),Xn({index:!1,userAgent:r});const o=XRt(e);p6({result:"url_served",slug:n,userAgent:r,imageURL:o});let i=av,c;if(Dfe(e)&&e.article_info?.title?(i=e.article_info.title,e?.article_info?.read_time,c=e?.author_username):e.thread_title&&e.thread_title!==YRt?i=e.thread_title:e.query_str&&(i=e.query_str),i){const{actualQuery:h}=nc(i);i=h||i,i=wh(i,LCe)}const u=a.answer?wh(a.answer,DCe):Dj,d=e?.thread_url_slug?e?.mode?.toLowerCase()=="article"?`https://www.perplexity.ai/page/${e.thread_url_slug}`:`https://www.perplexity.ai/search/${e.thread_url_slug}`:void 0,m=KRt(u);return Xn({imageURL:o,title:i,description:m,author:c,datePublished:e?.updated_datetime,canonicalURL:d,index:e?.should_index??!1,userAgent:r})},p6=({result:e,slug:t,userAgent:n,imageURL:r})=>{const s="[trackThreadOGImageServing]";try{t!=="new"&&qS(`${s} [${t}] [${n}] ${e}: ${r}`)}catch(a){Oie("[trackThreadOGImageServing] error:",{result:e,slug:t,userAgent:n,imageURL:r,err:a})}},XRt=e=>{let t=Nm;const n=`[getThreadOGImageURL] [${e?.thread_url_slug}]`;if(e.s3_social_preview_url&&e.s3_social_preview_url!==Nm)return e.s3_social_preview_url;try{t=Nm;const r=an.isArticleMode(e);return e.thread_url_slug?r?`${tS.NEXTAUTH_URL}/api/og/page/${e.thread_url_slug}`:`${tS.NEXTAUTH_URL}/api/og/thread/${e.thread_url_slug}`:t}catch(r){qS(`${n} error getting thread og image url: `,r)}return t},ZRt=e=>{let t=Nm;const n=`[getSpaceOGImageURL] [${e?.slug}]`;try{return t=e?.s3_social_preview_url??Nm,e?.slug?`${tS.NEXTAUTH_URL}/api/og/space/${e?.slug}`:t}catch(r){qS(`${n} error getting space og image url: `,r)}return t},Xn=({title:e=av,description:t=Dj,imageURL:n=Nm,canonicalURL:r,author:s,datePublished:a,index:o,userAgent:i})=>{try{let c=!1;typeof window>"u"&&(c=i?r1(i):!1),c&&(e=av);const u=QRt(a);return r=r??"./",{metadataBase:new URL("https://www.perplexity.ai"),title:e,description:t,author:s??void 0,alternates:{canonical:r},openGraph:{url:r,images:[n],locale:"en_US",type:"website",siteName:"Perplexity AI"},twitter:{card:t?"summary_large_image":"summary",images:[n],site:"@perplexity_ai",creator:s?`@${s}`:void 0},other:{datePublished:u??""},robots:{index:o}}}catch(c){return Oie("[generatePageMetadata] Error generating metadata:",c),{title:av,description:Dj,metadataBase:new URL("https://www.perplexity.ai"),robots:{index:!1}}}};function JRt({collection:e,slug:t,userAgent:n}){return!t||!e||e?.status==="failed"?Xn({index:!1,userAgent:n}):Xn({index:!1,title:e?.title??"Perplexity AI",description:"A Space on Perplexity AI by "+e?.owner_user?.username+"  "+e?.description,imageURL:ZRt(e),canonicalURL:`https://www.perplexity.ai/spaces/${t}`,author:e?.owner_user?.username,datePublished:e?.updated_datetime,userAgent:n})}function Kte({articleSection:e,slug:t,userAgent:n}){return Fj(!t||!e?{slug:t,userAgent:n}:{firstEntity:e,slug:t,userAgent:n})}function eIt({userAgent:e}){return Xn({imageURL:"https://r2cdn.perplexity.ai/pplx-academic-og.png",title:"Perplexity Academic",description:"The free, AI-powered academic search engine for scholars, students, and educators. Get instant answers from research papers, peer-reviewed journal articles, theses, conference papers, technical reports, and more.",index:!0,userAgent:e})}function tIt({userAgent:e}){return Xn({title:"Perplexity Shopping",index:!0,imageURL:"https://r2cdn.perplexity.ai/pplx-shopping-og.png",description:"Discover trending products, best deals, and trusted reviews with Perplexity Shopping  your smart companion for finding what to buy.",userAgent:e})}function nIt({hotelData:e,userAgent:t}){return Xn(e?{title:`${e?.hotel.name} - Perplexity Travel`,imageURL:e?.hotel?.photos[0]?.image_url,description:e?.hotel.description??void 0,index:!0,userAgent:t}:{index:!1,userAgent:t})}function rIt({userAgent:e}){return Xn({title:"Perplexify Me",index:!0,imageURL:"https://r2cdn.perplexity.ai/poster-lab-og-image.png",description:"Generate a personalized Perplexity poster.",userAgent:e})}function sIt({userAgent:e}){return Xn({title:"Perplexity Discover",index:!0,imageURL:"https://r2cdn.perplexity.ai/pplx-discover-og.png",description:"Stay informed on the biggest stories happening around the world across tech, finance, sports, entertainment and more with Perplexity Discover.",userAgent:e})}function aIt({userAgent:e}){return Xn({title:"Perplexity Travel",index:!0,imageURL:"https://r2cdn.perplexity.ai/pplx-travel-og.png",description:"Explore top destinations, hidden gems, and travel tips all in one place with Perplexity Travel  your go-to for smarter, faster trip planning.",userAgent:e})}function oIt({$t:e}){return{title:e({defaultMessage:"Formula 1  Perplexity Sports",id:"Ktk9GJrnKB"})}}function iIt({eventData:e,$t:t}){const n=e?.event?.title[0],r=e?.event?.subtitle;return n?{title:t({defaultMessage:"{description}  {competition} | Perplexity Sports",id:"WH2sXJYfqC"},{description:n,competition:r})}:{title:t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"})}}function lIt({$t:e}){return{title:e({defaultMessage:"NBA  Perplexity Sports",id:"OygSHzfDGc"})}}function cIt({$t:e}){return{title:e({defaultMessage:"Perplexity Finance",id:"DhdcmgxwQc"}),description:e({defaultMessage:"Get the latest stock price, historical data, earnings reports, stock split stock split history, analyst ratings, and forecasts from Perplexity Finance.",id:"NcFbXdi/CA"}),imageURL:"https://r2cdn.perplexity.ai/finance/images/og-finance-generic.jpg"}}function uIt({eventData:e,$t:t}){const n=e?.event?.teams;if(n?.length!==2)return{title:t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"})};const r=n.map(s=>s.nickname);return{title:t({defaultMessage:"{team1} vs {team2}  Perplexity Sports",id:"MNhNBm/XUU"},{team1:r[0],team2:r[1]})}}function dIt({teamData:e,$t:t}){return e?{title:t({defaultMessage:"{location} {nickname} | NBA | Perplexity Sports",id:"AIPY9QcrzT"},{location:e.team.location,nickname:e.team.nickname})}:{title:t({defaultMessage:"NBA | Perplexity Sports",id:"C6OMW0nwOa"})}}function fIt({playerData:e,$t:t}){return e?{title:t({defaultMessage:"{firstName} {lastName} | NBA | Perplexity Sports",id:"cMhXouxymy"},{firstName:e.player.firstName,lastName:e.player.lastName})}:{title:t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"})}}function mIt({$t:e}){return{title:e({defaultMessage:"NFL  Perplexity Sports",id:"El6nRJUzwb"})}}function hIt({eventData:e,$t:t}){const n=e?.event?.teams;if(n?.length!==2)return{title:t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"})};const r=n.map(s=>s.nickname);return{title:t({defaultMessage:"{team1} vs {team2}  Perplexity Sports",id:"MNhNBm/XUU"},{team1:r[0],team2:r[1]})}}function pIt({teamData:e,$t:t}){return e?{title:t({defaultMessage:"{location} {nickname} | NFL | Perplexity Sports",id:"Hk4RXLiB59"},{location:e.team.location,nickname:e.team.nickname})}:{title:t({defaultMessage:"NFL | Perplexity Sports",id:"7QAbUNnW6e"})}}function gIt({playerData:e,$t:t}){return{title:t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"})}}function yIt({$t:e}){return{title:e({defaultMessage:"MLB  Perplexity Sports",id:"CU0tFjpqFn"})}}function vIt({eventData:e,$t:t}){const n=t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"});if(!e?.event)return{title:n};const r=e.event.team_1?.title||"",s=e.event.team_2?.title||"";return{title:`${r} vs ${s}  MLB | Perplexity Sports`}}function Yte({$t:e,league:t}){const n=e(t==="atp"?{defaultMessage:"ATP",id:"S/1bpj9bkw"}:{defaultMessage:"WTA",id:"iz2JNgjC/c"});return{title:e({defaultMessage:"{league}  Perplexity Sports",id:"SlzezQtEQb"},{league:n})}}function Qte({eventData:e,league:t,$t:n}){const r=n({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"});if(!e?.event)return{title:r};const s=e.event.team_1.title,a=e.event.team_2.title,o=n(t==="atp"?{defaultMessage:"ATP",id:"S/1bpj9bkw"}:{defaultMessage:"WTA",id:"iz2JNgjC/c"});return{title:n({defaultMessage:"{team1} vs {team2}  {league} | Perplexity Sports",id:"d7RYhrB+bM"},{team1:s,team2:a,league:o})}}function Xte({tournamentData:e,league:t,$t:n}){const r=n({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"}),s=e?.tournamentInfo?.season?.name;if(!s)return{title:r};const a=n(t==="atp"?{defaultMessage:"ATP",id:"S/1bpj9bkw"}:{defaultMessage:"WTA",id:"iz2JNgjC/c"});return{title:n({defaultMessage:"{title}  {league} | Perplexity Sports",id:"+pm49/sORt"},{title:s,league:a})}}function xIt({eventData:e,$t:t}){const n=t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"}),r=e?.matchStats?.matchInfo?.description,s=e?.matchStats?.matchInfo?.competition?.name;return r?{title:`${r}  ${s}`}:{title:n}}function Zte({league:e,$t:t}){return{title:t({defaultMessage:"{title}  Perplexity Sports",id:"wrVvZZ22yC"},{title:e==="ncaam"?"NCAA Men's Basketball":"NCAA Women's Basketball"})}}function Jte({eventData:e,$t:t}){const n=t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"}),r=e?.event?.teams;if(r?.length!==2)return{title:n};const s=r.map(a=>a.location);return{title:t({defaultMessage:"{team1} vs {team2}  Perplexity Sports",id:"MNhNBm/XUU"},{team1:s[0],team2:s[1]})}}function bIt({$t:e}){return{title:e({defaultMessage:"IPL  Perplexity Sports",id:"YUrNinGa6l"})}}function _It({$t:e}){return{title:e({defaultMessage:"ICC Cricket  Perplexity Sports",id:"t+zWRM/EBt"})}}function wIt({$t:e}){return{title:e({defaultMessage:"{league}  Perplexity Sports",id:"SlzezQtEQb"},{league:"PGA"})}}function SIt({eventData:e}){return{title:`${e?.event?.name||"Event"}  Perplexity Sports`}}function CIt({$t:e}){return{title:e({defaultMessage:"{league}  Perplexity Sports",id:"SlzezQtEQb"},{league:"European Tour"})}}function EIt({eventData:e}){return{title:"Event  Perplexity Sports"}}function MIt({$t:e}){return{title:e({defaultMessage:"WNBA  Perplexity Sports",id:"xp6AiOFIGz"})}}function TIt({eventData:e,$t:t}){const n=e?.event?.teams;if(n?.length!==2)return{title:t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"})};const r=n.map(s=>s.nickname);return{title:t({defaultMessage:"{team1} vs {team2}  Perplexity Sports",id:"MNhNBm/XUU"},{team1:r[0],team2:r[1]})}}function kIt({$t:e}){return{title:e({defaultMessage:"Champions League  Perplexity Sports",id:"5k4cIVBqE4"})}}function NIt({eventData:e,$t:t}){const n=e?.event?.title[0],r=e?.event?.title[0];return n?{title:t({defaultMessage:"{description}  {competition} | Perplexity Sports",id:"WH2sXJYfqC"},{description:n,competition:r})}:{title:t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"})}}const AIt=({$t:e,userAgent:t})=>Xn({title:e({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"}),index:!0,description:"Stay updated with the latest sports news, scores, and highlights from your favorite leagues and teams.",userAgent:t}),PIt="https://r2cdn.perplexity.ai/finance/images/og-finance-generic.jpg",RIt=e=>({title:`${e.name} Stock Price: Quote, Forecast, Splits & News (${e.symbol})`,description:`Get the latest ${e.name} stock price (${e.symbol}), historical data, earnings reports, stock split stock split history, analyst ratings, and forecasts from Perplexity Finance.`}),IIt=e=>({title:`${e.name} Price: Quote, Market Cap, Forecast & News (${e.symbol})`,description:`Get the latest ${e.name} price ${e.symbol}, real-time quotes, market cap, historical data, charts, price predictions, and news from Perplexity Finance.`}),jIt=e=>({title:`${e.name} Exchange Rate: Live Price, Chart, Forecast & News`,description:`Get the latest ${e.name} exchange rate, live price, interactive chart, historical data, and expert forecast from Perplexity Finance.`}),OIt=e=>({title:`${e.name} Price: Live Chart, Forecast & News (${e.symbol})`,description:`Get the latest ${e.name} price (${e.symbol}), live charts, market trends, expert forecasts, and breaking news from Perplexity Finance.`}),LIt=e=>({title:`${e.name} Price: Quote, Forecast, Charts & News (${e.symbol})`,description:`Get the latest ${e.name} price ${e.symbol}, historical data, charts, analyst ratings, and forecasts from Perplexity Finance.`}),DIt=e=>e.exchange==="NASDAQ"||e.exchange==="NYSE"||e.exchange==="AMEX"?RIt(e):e.exchange==="CRYPTO"?IIt(e):e.exchange==="FOREX"?jIt(e):e.exchange==="COMMODITY"?OIt(e):LIt(e);function FIt({pathname:e,tickerSearchData:t,userAgent:n,$t:r}){const{symbol:s,tab:a}=bhe(e);if(!s&&!a)return cIt({$t:r});if(!s)return Xn({index:!1,userAgent:n});const o={title:`${s} Price: Quote, Forecast, Charts & News`,description:`Get the latest ${s} price, historical data, charts, analyst ratings, and forecasts from Perplexity Finance.`,imageURL:PIt,index:!0},i=t?DIt(t):{};return Xn({...o,...i,userAgent:n})}function UIt({shortcut:e}){return Xn(e?{index:!1,title:wh(`/${e.task_name}`,LCe),description:wh(e.prompt,DCe),imageURL:`${tS.NEXTAUTH_URL}/api/og/shortcut/${e.task_name}`}:{index:!1,title:"Perplexity Account"})}const BIt=e=>{const t="home-metadata",{$t:n}=X(),{userAgent:r}=Wt(),s=Pt(),a=s?.split("/").pop()??"",o=s4e(e,s??""),{route:i,params:c}=o??{},u=i,{firstResult:d}=zt(),{collection:m}=xc({collectionSlug:a,reason:t,enabled:u==="/spaces/:slug"}),{article:h}=h9(),{data:p}=qRt({slug:a,reason:t,enabled:u==="/hotels/:slug"}),{symbol:g}=bhe(s),{data:y}=ng({symbol:g}),{data:v}=uPt({eventId:a,league:"f1",reason:t,enabled:u==="/sports/f1/events/:eventId"}),{data:x}=dPt({eventId:a,league:"nba",reason:t,enabled:u==="/sports/nba/events/:eventId"}),{data:b}=fPt({eventId:a,league:"nfl",reason:t,enabled:u==="/sports/nfl/events/:eventId"}),{data:_}=pPt({eventId:a,league:"championsleague",reason:t,enabled:u==="/sports/championsleague/events/:eventId"}),{data:w}=mPt({eventId:a,league:"mlb",reason:t,enabled:u==="/sports/mlb/events/:eventId"}),{data:S}=hPt({eventId:a,league:"cricket",reason:t,enabled:u==="/sports/cricket/events/:eventId"}),{data:C}=lPt({eventId:a,league:"pga",reason:t,enabled:u==="/sports/pga/events/:eventId"}),{data:E}=cPt({eventId:a,league:"wnba",reason:t,enabled:u==="/sports/wnba/events/:eventId"}),{data:M}=Nte({eventId:a,league:"atp",reason:t,enabled:u==="/sports/atp/events/:eventId"}),{data:T}=Nte({eventId:a,league:"wta",reason:t,enabled:u==="/sports/wta/events/:eventId"}),{data:I}=kte({eventId:a,league:"ncaam",reason:t,enabled:u==="/sports/ncaam/events/:eventId"}),{data:j}=kte({eventId:a,league:"ncaaw",reason:t,enabled:u==="/sports/ncaaw/events/:eventId"}),{data:N}=sPt({teamId:a,reason:t,enabled:u==="/sports/nba/teams/:teamId"}),{data:P}=aPt({teamId:a,reason:t,enabled:u==="/sports/nfl/teams/:teamId"}),{data:R}=oPt({playerId:Number(a),reason:t,enabled:u==="/sports/nba/players/:playerId"}),{data:k}=Ete({seasonId:a,league:"atp",reason:t,enabled:u==="/sports/atp/tournaments/:seasonId"}),{data:O}=Ete({seasonId:a,league:"wta",reason:t,enabled:u==="/sports/wta/tournaments/:seasonId"}),{data:L}=gPt({reason:t});if(!s||!u||!c)return Xn({index:!0,userAgent:r});switch(u){case"/spaces/:slug":return JRt({slug:c.slug,userAgent:r,collection:m});case"/page/:slug":return Kte({slug:c.slug,userAgent:r,articleSection:h?.[0]});case"/academic":return eIt({userAgent:r});case"/discover":case"/discover/:topic":return sIt({userAgent:r});case"/shopping":return tIt({userAgent:r});case"/hotels/:slug":return nIt({slug:c.slug??"",userAgent:r,hotelData:p});case"/perplexify_me":return rIt({userAgent:r});case VC:return FIt({userAgent:r,pathname:s,tickerSearchData:y,$t:n});case"/sports/f1":return oIt({$t:n});case"/sports/f1/events/:eventId":return iIt({eventId:c.eventId??"",eventData:v,$t:n});case"/sports/nba":return lIt({$t:n});case"/sports/nba/events/:eventId":return uIt({eventId:c.eventId??"",eventData:x,$t:n});case"/sports/nba/teams/:teamId":return dIt({teamId:c.teamId??"",teamData:N,$t:n});case"/sports/nba/players/:playerId":return fIt({playerId:c.playerId??"",playerData:R,$t:n});case"/sports/nfl":return mIt({$t:n});case"/sports/nfl/events/:eventId":return hIt({eventId:c.eventId??"",eventData:b,$t:n});case"/sports/nfl/teams/:teamId":return pIt({teamId:c.teamId??"",teamData:P,$t:n});case"/sports/nfl/players/:playerId":return gIt({playerId:c.playerId??"",playerData:void 0,$t:n});case"/sports/championsleague":return kIt({$t:n});case"/sports/championsleague/events/:eventId":return NIt({eventId:c.eventId??"",eventData:_,$t:n});case"/sports/mlb":return yIt({$t:n});case"/sports/mlb/events/:eventId":return vIt({eventId:c.eventId??"",eventData:w,$t:n});case"/sports/ipl":return bIt({$t:n});case"/sports/icc":return _It({$t:n});case"/sports/cricket/events/:eventId":case"/sports/ipl/events/:eventId":case"/sports/icc/events/:eventId":return xIt({eventId:c.eventId??"",eventData:S,$t:n});case"/sports/pga":return wIt({$t:n});case"/sports/pga/events/:eventId":return SIt({eventId:c.eventId??"",eventData:C});case"/sports/dpworldtour":return CIt({$t:n});case"/sports/dpworldtour/events/:eventId":return EIt({eventId:c.eventId??"",eventData:null});case"/sports/wnba":return MIt({$t:n});case"/sports/wnba/events/:eventId":return TIt({eventId:c.eventId??"",eventData:E,$t:n});case"/sports/ncaam":return Zte({league:"ncaam",$t:n});case"/sports/ncaaw":return Zte({league:"ncaaw",$t:n});case"/sports/ncaam/events/:eventId":return Jte({eventId:c.eventId??"",eventData:I,$t:n});case"/sports/ncaaw/events/:eventId":return Jte({eventId:c.eventId??"",eventData:j,$t:n});case"^\\/search(?:\\/(?<new>new))?(?:\\/(?<uuid>.+))?$":return Fj({slug:c.uuid,userAgent:r,firstEntity:d});case"/discover/:topic/:slug":return Kte({slug:c.slug,userAgent:r,articleSection:h?.[0]});case"/travel":return aIt({userAgent:r});case"/sports":return AIt({$t:n,userAgent:r});case"/sports/atp":return Yte({league:"atp",$t:n});case"/sports/wta":return Yte({league:"wta",$t:n});case"/sports/atp/events/:eventId":return Qte({eventId:c.eventId??"",league:"atp",eventData:M,$t:n});case"/sports/wta/events/:eventId":return Qte({eventId:c.eventId??"",league:"wta",eventData:T,$t:n});case"/sports/atp/tournaments/:seasonId":return Xte({seasonId:c.seasonId??"",league:"atp",tournamentData:k,$t:n});case"/sports/wta/tournaments/:seasonId":return Xte({seasonId:c.seasonId??"",league:"wta",tournamentData:O,$t:n});case"/b/home":return Xn({title:"New Tab",index:!0,userAgent:r});case"/account":case"/account/details":case"/account/org/details":case"/account/org/user-access":case"/account/org/permissions":case"/account/org/insights":case"/account/org/files":case"/account/org/connectors":case"/account/org":case"/account/api/group":case"/account/api/members":case"/account/api/billing":case"/account/api/keys":case"/account/api/limits":case"/account/api/files":case"/account/api/files/:repositoryUuid":case"/account/api":case"/account/pro-perks":case"/account/pro-perks/:name":case"/account/tasks/:taskId":case"/account/tasks":case"/account/org/members":case"/account/preferences":case"/account/personalize":case"/account/site-instructions":case"/account/notifications":case"/account/files":case"/account/connectors":return Xn({title:"Perplexity Account",index:!0,userAgent:r});case"/account/shortcuts":return UIt({shortcut:L?.shortcut??void 0});case"/account/reservations":return Xn({title:"Perplexity Reservations",index:!0,userAgent:r});case"/account/purchases":return Xn({title:"Perplexity Purchases",index:!0,userAgent:r});case"/":case"/library":case"/b/speak":case"/b/zen":case"/b/try-assistant":case"/spaces":case"/b/mission-control":case"/spaces/templates":case void 0:return Xn({index:!0,userAgent:r});default:Qt(u)}},VIt=()=>{const{isMobileStyle:e}=Ce(),t=Pt();return e&&t!==En?l.jsx(ke,{icon:dS,href:En,extraCSS:"mt-sm -ml-sm mb-md",pill:!0}):null};function $It({href:e=rtt()}){const{isMobileStyle:t}=Ce();return t?l.jsx(ke,{icon:dS,href:e,extraCSS:"mt-sm -ml-sm",pill:!0}):l.jsxs(at,{href:e,className:"gap-xs hover:bg-offsetPlus px-sm py-xs pl-xs -ml-xs -mt-xs group flex items-center rounded-md duration-150",children:[l.jsx(be,{icon:uS,size:"sm",className:"text-quiet group-hover:text-foreground duration-150"}),l.jsx(D,{variant:"small",color:"light",className:"group-hover:!text-foreground duration-150",children:l.jsx(he,{defaultMessage:"Back",id:"cyR7KhiuaU"})})]})}const Un=(e,t)=>t===e,g6="selectedApiGroupId",Kb=["selected-api-group"],nS=()=>["api-groups"],WIt=async({reason:e})=>await Wie({reason:e}),HIt=async({name:e,address:t,description:n,contactInfo:r,reason:s})=>$ie({displayName:e,address:t,description:n,contactInfo:r,reason:s}),FCe=({reason:e})=>{const t=gt(),{data:n,isLoading:r,isFetching:s,isFetched:a,error:o,refetch:i}=Ke({queryKey:nS(),queryFn:()=>WIt({reason:e})}),{mutateAsync:c,isPending:u,error:d}=Mt({mutationFn:HIt,onSuccess:()=>{t.invalidateQueries({queryKey:nS()})}});return f.useMemo(()=>({groups:n??ce,isLoading:r,isFetching:s,isFetched:a,error:o,refetch:i,createGroup:c,isCreating:u,createError:d}),[d,c,o,n,u,a,s,r,i])},UCe=({reason:e})=>{const t=gt(),{data:n,isFetched:r,isLoading:s,isFetching:a,error:o,refetch:i}=Ke({queryKey:nS(),queryFn:async()=>{const{getAPIGroupsV2:p}=await oe(async()=>{const{getAPIGroupsV2:g}=await Promise.resolve().then(()=>tW);return{getAPIGroupsV2:g}},void 0);return p({reason:e})}}),{mutateAsync:c,isPending:u,error:d}=Mt({mutationFn:async({name:p,address:g,description:y,contactInfo:v,reason:x})=>{const{createApiGroupV2:b}=await oe(async()=>{const{createApiGroupV2:_}=await Promise.resolve().then(()=>tW);return{createApiGroupV2:_}},void 0);return b({displayName:p,address:g,description:y,contactInfo:v,reason:x})},onSuccess:()=>{t.invalidateQueries({queryKey:nS()})}}),{data:m}=Ke({queryKey:Kb,queryFn:async()=>null,enabled:!0,staleTime:1/0,gcTime:1/0});f.useEffect(()=>{const p=n??[];if(!(!r||p.length===0)&&m==null){const g=Ve.getItem(g6),y=p.find(v=>v.api_org_id===g);if(y)t.setQueryData(Kb,y);else{const v=p[0];Ve.setItem(g6,v.api_org_id),t.setQueryData(Kb,v)}}},[n,r,t,m]);const h=f.useCallback(p=>{p&&(Ve.setItem(g6,p.api_org_id),t.setQueryData(Kb,p),t.invalidateQueries({predicate:g=>g.queryKey.includes(p.api_org_id)}))},[t]);return f.useMemo(()=>({group:m??null,isFetched:r,isLoading:s,isFetching:a,error:o,refetch:i,createGroup:c,isCreating:u,createError:d,setSelectedGroup:h}),[d,c,o,r,a,s,u,i,m,h])},zIt=async({orgId:e,reason:t})=>await Hie({orgId:e,reason:t}),GIt=e=>["selected-api-groups","customer-info",e??"no-group-id"],qIt=({reason:e})=>{const t=gt(),{group:n}=UCe({reason:e}),r=GIt(n?.api_org_id),s=Ke({queryKey:r,queryFn:()=>zIt({orgId:n?.api_org_id,reason:e})}),a=f.useCallback(o=>{const i=()=>{t.invalidateQueries({queryKey:r})};o&&o>0?setTimeout(i,o):i()},[t,r]);return f.useMemo(()=>({...s,apiOrganization:s?.data?.apiOrganization,customerInfo:s?.data?.customerInfo,hasDefaultPaymentMethod:s?.data?.hasDefaultPaymentMethod??!1,taxInfo:s?.data?.taxInfo,invalidateCustomerInfo:a,isMember:s?.data?.apiOrganization?.user_role==="MEMBER",isAdmin:s?.data?.apiOrganization?.user_role==="ADMIN"}),[a,s])};function KIt(){const{value:e}=ZO({flag:"sonar-file-search-gate",defaultValue:"disabled",subjectType:"visitor_id"});return e==="enabled"}const BCe=()=>{const e="api-settings",{groups:t}=FCe({reason:e}),{customerInfo:n,isAdmin:r}=qIt({reason:e}),s=n?.customer_portal_url||"",{group:a,setSelectedGroup:o,isLoading:i}=UCe({reason:e}),c=X(),u=Pt(),d=At(),[m,h]=f.useState(!1),{isMobileStyle:p}=Ce(),g=KIt(),y=f.useMemo(()=>({title:c.formatMessage({defaultMessage:"API",id:"xwEc8KM8zK"}),tabs:{isMobileStyle:!1,actionList:[{text:c.formatMessage({defaultMessage:"API group",id:"vzhpEeLnGg"}),...oa.APIGroup,active:Un(oa.APIGroup.href,u)},{text:c.formatMessage({defaultMessage:"API members",id:"9T3yfgfdEe"}),...oa.APIMembers,active:Un(oa.APIMembers.href,u)},{text:c.formatMessage({defaultMessage:"API billing",id:"kq1Eo7ekVC"}),...oa.APIBilling,active:Un(oa.APIBilling.href,u),show:r},{text:c.formatMessage({defaultMessage:"Usage metrics",id:"rmhlHSzjT6"}),...oa.UsageMetrics,trailingComponent:oa.UsageMetrics.trailingComponent,show:!!s&&r,onClick:()=>{window.open(s,"_blank","noopener,noreferrer")}},{text:c.formatMessage({defaultMessage:"Account limits",id:"4Krk/t2RZ4"}),...oa.AccountLimits,active:Un(oa.AccountLimits.href,u),show:!1},{text:c.formatMessage({defaultMessage:"API keys",id:"yOFPA6eD9X"}),...oa.APIKeys,active:Un(oa.APIKeys.href,u)},{text:c.formatMessage({defaultMessage:"API files",id:"B/bk1JrYzU"}),...oa.APIFiles,active:!!u?.startsWith(oa.APIFiles.href),show:g}]}}),[c,u,s,r,g]),v=t.map(C=>({type:"default",text:C.display_name||C.api_org_id,onClick:()=>{d.push("/account/api/group"),o(C),h(!1)},selected:a?.api_org_id===C.api_org_id,active:a?.api_org_id===C.api_org_id})),x={type:"default",text:"New API Group",leftElement:l.jsx(mr,{size:16}),onClick:()=>{d.push("/account/api/group?create=true"),h(!1)}},b={type:"separator",show:t.length>0},_=[...v,b,x],w=()=>{h(!m)},S=!i&&(!!a||t.length===0);return t&&t.length>0?l.jsxs("div",{className:"flex flex-col",children:[l.jsxs(z,{className:"flex items-center justify-between px-3 py-2",children:[l.jsx(D,{variant:p?"small":"tinyRegular",color:"light",children:y.title}),S&&l.jsx(en,{items:_,isMobileStyle:!1,isOpen:m,onOpen:w,onClose:()=>h(!1),children:l.jsx(ye,{size:"tiny",text:a?.display_name||a?.api_org_id||"Select API Group",variant:"border",chevron:!0,extraCSS:"max-w-[150px]"})})]}),l.jsx(eM,{fillSpace:!0,vertical:!0,layoutGroupId:`settings-sidebar-${y.title}`,collapsed:!1,size:p?"regular":"small",isNewRedesign:!0,...y.tabs})]}):null},AU=({reason:e})=>{const{organization:t}=pn({reason:e});return Yr({flag:"api-groups-and-settings-enabled",defaultValue:!0,extraAttributes:{organizationUUID:t?.uuid??"none"}})},VCe=({reason:e})=>{const{groups:t}=FCe({reason:e}),n=X(),r=Pt(),{value:s}=AU({reason:e});return f.useMemo(()=>({text:n.formatMessage({defaultMessage:"API",id:"xwEc8KM8zK"}),...Yt.API,show:s&&t.length<1,href:`${En}/api/group?create=true`,active:Un(Yt.API.href,r)}),[n,r,t.length,s])},sx=({title:e,tabs:t,shouldRenderInMobile:n})=>{const{isMobileStyle:r}=Ce();return l.jsxs("div",{className:"flex flex-col",children:[l.jsx(D,{className:"px-3 py-2",variant:r?"small":"tinyRegular",color:"light",children:e}),l.jsx(eM,{isMobileStyle:n,fillSpace:!0,vertical:!0,layoutGroupId:`settings-sidebar-${e}`,collapsed:!1,size:r?"regular":"small",isNewRedesign:!0,...t})]},e)},YIt=()=>{const e="consumer-workspace-settings",t=X(),n=Pt(),r=VCe({reason:e}),s=f.useMemo(()=>({title:t.formatMessage({defaultMessage:"Workspace",id:"rOZptgrtp0"}),tabs:{isMobileStyle:!1,actionList:[r,{text:t.formatMessage({defaultMessage:"Enterprise",id:"CDLJ0Wjq0x"}),...Yt.Enterprise,active:Un(Yt.Enterprise.href,n)}]}}),[t,n,r]);return s?.tabs?.actionList?.some(o=>o.show)??!1?l.jsx(sx,{title:s.title,tabs:s.tabs,shouldRenderInMobile:!1}):null},QIt=({isEnterpriseAdmin:e,showMembersTab:t,showOrgFilesTab:n,showInsightsTab:r})=>{const s=X(),a=Pt(),o=Is(),i=f.useMemo(()=>({title:s.formatMessage({defaultMessage:"Enterprise",id:"CDLJ0Wjq0x"}),tabs:{isMobileStyle:!1,actionList:[{text:s.formatMessage({defaultMessage:"Organization",id:"K56Dims7Up"}),active:Un(aa.Organization.href,a),...aa.Organization},{text:s.formatMessage({defaultMessage:"Members",id:"+a+2ugZ5sB"}),active:Un(aa.Members.href,a),...aa.Members,show:t},{text:s.formatMessage({defaultMessage:"User access",id:"a0UwG9o6Tr"}),active:Un(aa["User access"].href,a),...aa["User access"],show:e},{text:s.formatMessage({defaultMessage:"Permissions",id:"SFuk1vRI4X"}),active:Un(aa.Permissions.href,a),...aa.Permissions,show:e},{text:s.formatMessage({defaultMessage:"Insights",id:"xK7rmdSjmz"}),active:Un(aa.Insights.href,a),...aa.Insights,show:r},{text:s.formatMessage({defaultMessage:"Org Connectors",id:"FVJIMTlwBP"}),active:Un(aa["Org Connectors"].href,a),...aa["Org Connectors"],show:e},{text:s.formatMessage({defaultMessage:"Org files",id:"iWDsD738/m"}),active:Un(aa["Org Imports"].href,a),...aa["Org Imports"],show:n&&!o}]}}),[s,a,e,t,n,o,r]);return l.jsx(sx,{title:i.title,tabs:i.tabs,shouldRenderInMobile:!1})},XIt=()=>{const e="enterprise-workspace-settings",t=X(),n=VCe({reason:e}),r=f.useMemo(()=>({title:t.formatMessage({defaultMessage:"Developers",id:"aMWgjX56nj"}),tabs:{isMobileStyle:!1,actionList:[n]}}),[t,n]);return r?.tabs?.actionList?.some(a=>a.show)??!1?l.jsx(sx,{title:r.title,tabs:r.tabs,shouldRenderInMobile:!1}):null};function ZIt({reason:e}){const{value:t}=b_e(),{locale:n}=X(),r=new Intl.Locale(n),{uuid:s}=ide({reason:e}),{value:a,loading:o}=Yr({flag:"can-book-hotels",defaultValue:!1,extraAttributes:{cfLanguage:r.language,appApiVersion:ni,dependent_flag:"canonical-hotel-pages-enabled",variation_served:t,orgUUID:s??""}});return f.useMemo(()=>({initialized:!o,value:a}),[o,a])}const $Ce=()=>{const e="purchase-settings",t=X(),n=Pt(),{value:r,initialized:s}=ZIt({reason:e}),a=r&&s,o=Rbe({reason:e}),i=f.useMemo(()=>({title:t.formatMessage({defaultMessage:"Transactions",id:"/jJLYymnae"}),tabs:{isMobileStyle:!1,actionList:[{text:t.formatMessage({defaultMessage:"Purchases",id:"abfoNg9A1k"}),active:Un(Yt.Products.href,n),...Yt.Products,show:o},{text:t.formatMessage({defaultMessage:"Reservations",id:"PnzGcgLznk"}),...Yt.Reservations,active:Un(Yt.Reservations.href,n),show:a}]}}),[t,n,o,a]);return f.useMemo(()=>i.tabs.actionList.some(u=>u.show),[i.tabs.actionList])?l.jsx(sx,{title:i.title,tabs:i.tabs,shouldRenderInMobile:!1}):null},JIt=(e,t)=>{const{value:n,loading:r}=Ut({flag:"site-specific-prompt-teachers",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},WCe=()=>{const e="base-user-settings",{$t:t}=X(),n=Pt(),{isEnterprise:r,organization:s}=pn({reason:e}),a=Is(),{value:o}=Ut({flag:"pro-perks-settings-flag",defaultValue:!1,subjectType:"user_nextauth_id",extraAttributes:{isEnterprise:r??!1,orgUUID:s?.uuid??""}}),{variation:i,loading:c}=Mf(!1),{variation:u}=JIt(!1),d=O1(),m=f.useMemo(()=>({title:t({defaultMessage:"Account",id:"TwyMauNL3r"}),tabs:{isMobileStyle:!1,actionList:[{text:t({defaultMessage:"Account",id:"TwyMauNL3r"}),active:Un(Yt.Account.href,n),...Yt.Account},{text:t({defaultMessage:"Preferences",id:"PCSt5TwTnx"}),...Yt.Preferences,active:Un(Yt.Preferences.href,n)},{text:t({defaultMessage:"Personalization",id:"FAejG+JVWn"}),...Yt.Personalize,active:Un(Yt.Personalize.href,n)},{text:t({defaultMessage:"Shortcuts",id:"7FAwwkYilD"}),...Yt.Shortcuts,active:Un(Yt.Shortcuts.href,n),show:d},{text:t({defaultMessage:"Site-Specific Instructions",id:"yhS5llp8gM"}),...Yt.SiteInstructions,active:Un(Yt.SiteInstructions.href,n),show:u},{text:t(i?{defaultMessage:"Automations",id:"ORNSnD2XJb"}:{defaultMessage:"Tasks",id:"yhU1etXT1A"}),...Yt.Tasks,href:Yt.Tasks.href,active:Un(Yt.Tasks.href,n)},{text:t({defaultMessage:"Notifications",id:"NAidKbB0vi"}),...Yt.Notifications,active:Un(Yt.Notifications.href,n)},{text:t({defaultMessage:"Connectors",id:"2mMJRvsAg1"}),...Yt.Connectors,active:Un(Yt.Connectors.href,n)},{text:t({defaultMessage:"Files",id:"m4vqJl0/FT"}),...Yt.Imports,active:Un(Yt.Imports.href,n),show:r&&!a},...o?[{text:t({defaultMessage:"Pro Perks",id:"x69637XBwS"}),active:Un(Yt.ProPerks.href,n),...Yt.ProPerks}]:[]]}}),[t,n,d,u,i,r,a,o]);return c?null:l.jsx(sx,{title:m.title,tabs:m.tabs,shouldRenderInMobile:!1})},ejt=()=>{const e="consumer-user-settings",{value:t}=AU({reason:e});return l.jsxs(l.Fragment,{children:[l.jsx(WCe,{}),l.jsx($Ce,{}),l.jsx(YIt,{}),t&&l.jsx(BCe,{})]})},tjt=({isEnterpriseAdmin:e,showMembersTab:t,showOrgFilesTab:n,showInsightsTab:r})=>{const s="enterprise-user-settings",{value:a}=AU({reason:s});return l.jsxs(l.Fragment,{children:[l.jsx(WCe,{}),l.jsx($Ce,{}),l.jsx(XIt,{}),a&&l.jsx(BCe,{}),l.jsx(QIt,{isEnterpriseAdmin:e,showMembersTab:t,showOrgFilesTab:n,showInsightsTab:r})]})};function njt(e){const t=e?.user?.subscription_status??"none",n=t==="active"||t==="trialing"||t==="white_glove_past_due",r=e?.user?.subscription_source??"none";return{subscriptionStatus:t,subscriptionSource:r,isEnterprisePro:n&&r==="enterprise"}}const HCe=A.memo(function({shouldRenderInMobile:t=!1,isMobileStyle:n=!1}){const r=Ot(),s=pn({reason:"settings-sidebar"}),a=s.isEnterprise??!1,o=s.orgUser?.role==="ADMIN",i=o||(s?.organization?.settings?.member_invites_allowed??!1),c=o||(s?.organization?.settings?.members_can_modify_org_files??!1),{value:u}=Ut({flag:"enterprise-insights",subjectType:"user_nextauth_id",defaultValue:!1}),{value:d}=Ut({flag:"enterprise-premium-secure",subjectType:"user_nextauth_id",defaultValue:!1}),{value:m}=Ut({flag:"enterprise-insights-special-access",subjectType:"user_nextauth_id",defaultValue:!1}),{isEnterprisePro:h}=njt(r),p=h&&o&&(u&&d||m),g=B("flex flex-col gap-2 -mx-sm md:mx-0",{"border-r py-4 w-sideBarWidth":!t});return n&&!t?null:l.jsxs(z,{className:g,children:[l.jsx("div",{className:"mb-3 ml-2 flex md:px-2",children:l.jsx($It,{})}),l.jsx("div",{className:"scrollbar-subtle overflow-y-auto md:px-2",children:a?l.jsx(tjt,{isEnterpriseAdmin:o,showMembersTab:i,showOrgFilesTab:c,showInsightsTab:p}):l.jsx(ejt,{})})]})});HCe.displayName="SettingsSidebar";const rjt=()=>{const e=At(),t=Pt(),{$t:n}=X(),{openVisitorLoginUpsell:r}=$n({enabled:!0});return f.useEffect(()=>{const a=n(t==="/account/pro-perks"?{id:"UfIxhPDVtn",defaultMessage:"Sign in to Perplexity to see available Perks"}:{id:"ZEOKCVFSgA",defaultMessage:"Sign in to manage your account"});r({title:a,origin:Be.SETTINGS,closeCallback:()=>{e.push("/")}})},[r,e,t,n]),null};function sjt(){return l.jsx("div",{children:l.jsx(z,{className:"mx-auto size-full max-w-screen-md",variant:"background",children:l.jsxs(Ln,{className:"mt-lg gap-lg flex flex-col",children:[l.jsxs("div",{className:"gap-sm flex flex-col",children:[l.jsxs(D,{variant:"baseSemi",className:"ml-sm relative",children:["",l.jsx(Yb,{className:"absolute left-0 top-1/2 h-4 w-[100px] -translate-y-1/2"})]}),l.jsx(Yb,{className:"h-[170px] rounded-md"})]}),l.jsxs("div",{className:"gap-sm flex flex-col",children:[l.jsxs(D,{variant:"baseSemi",className:"ml-sm relative",children:["",l.jsx(Yb,{className:"absolute left-0 top-1/2 h-4 w-[100px] -translate-y-1/2"})]}),l.jsx(Yb,{className:"h-[170px] rounded-md"})]})]})})})}const Yb=({className:e})=>l.jsx("div",{className:B("bg-offset rounded-full",e)}),zCe=A.memo(({children:e})=>{const{data:t,status:n}=za.useSession(),{isMobileStyle:r}=Ce();return n==="loading"?l.jsx(sjt,{}):t?.user?l.jsxs(l.Fragment,{children:[l.jsx(xU,{}),l.jsxs("div",{className:"grid h-screen grid-cols-1 grid-rows-[min-content_1fr] gap-2 p-2",children:[l.jsx("div",{className:"flex w-full flex-col",children:l.jsx($me,{})}),l.jsxs(z,{variant:"background",className:"flex min-h-0 rounded-md border",children:[l.jsx(HCe,{shouldRenderInMobile:!1,isMobileStyle:r}),l.jsxs(n1,{children:[l.jsx(VIt,{}),l.jsx("div",{className:"md:p-md md:pt-xl",children:e})]})]})]})]}):l.jsx(rjt,{})});zCe.displayName="SettingsDevLayout";const PU=A.memo(()=>l.jsxs(l.Fragment,{children:[l.jsx("script",{id:"reddit-pixel-script",src:"/pixel/reddit.js",async:!0}),l.jsx("script",{id:"facebook-pixel-script",src:"/pixel/meta.js",async:!0}),l.jsx("script",{id:"podscribe-pixel-script",src:"/pixel/podscribe.js",async:!0}),l.jsx("script",{id:"amazon-twitch-pixel-script",src:"/pixel/amazon.js",async:!0})]}));PU.displayName="AfterInteractivePixels";const{Provider:ajt,useSelector:ojt,useTrackedState:ijt}=bp("HomepageComponentsProvider",e=>yo(t=>({homepageTitle:e?.homepageTitle||"",actions:{onHomepageTitleChange:n=>{t({homepageTitle:n})}}}))),ljt=()=>ojt(e=>e.actions),cjt=ijt,ujt={hidden:{},visible:{transition:{staggerChildren:.025}}},djt={hidden:{opacity:0},visible:{opacity:1,transition:{type:"tween",duration:.3}},exit:{opacity:0,transition:{duration:.05}}},GCe=A.memo(()=>{const{homepageTitle:e}=cjt(),t=f.useRef(!0),[n,r]=f.useState(!0),{hasAccessToProFeatures:s,isMax:a}=Nt(),o=ms(),{isMobileStyle:i}=Ce(),c=f.useMemo(()=>{const u=e.split(" ");return u.map((d,m)=>m===u.length-1?d:`${d} `)},[e]);return f.useEffect(()=>{if(o){if(t.current){t.current=!1;return}r(!1)}},[e,o]),l.jsx("div",{className:"mb-lg bottom-0 flex w-full items-center justify-center pb-3 text-center md:absolute",children:l.jsx(st,{mode:"wait",children:n&&!i?l.jsx(_e.div,{initial:{opacity:1},exit:{opacity:0,transition:{duration:.2}},children:l.jsx(Wa,{variant:a?"max-text":"text",isPro:s,size:s?"xl":"large"})}):l.jsx(_e.span,{variants:ujt,initial:n?!1:"hidden",animate:"visible",exit:"hidden","aria-hidden":"true",className:"inline-block",children:l.jsx(D,{children:l.jsx("span",{className:"font-display inline-block text-3xl md:text-4xl","aria-label":e,children:c.map((u,d)=>l.jsx(_e.span,{variants:djt,className:"inline-block",style:{whiteSpace:"pre"},children:u},`${u}-${d}`))})})},e)})})});GCe.displayName="HomepageTitle";const Xf=["SMALL","MEDIUM","LARGE"],qCe=A.memo(({widget:e,size:t})=>{const n=Xf.includes(t)?"linear-gradient(to bottom, black, transparent)":"linear-gradient(to right, transparent, black 50%)",r="absolute inset-0 size-full object-cover object-center",s=f.useMemo(()=>l.jsxs("div",{className:"relative h-full",children:[l.jsx("img",{src:e.image_url_light,className:B(r,"block dark:hidden"),alt:e.title,style:{maskImage:n,WebkitMaskImage:n}}),l.jsx("img",{src:e.image_url_dark,className:B(r,"hidden dark:block"),alt:e.title,style:{maskImage:n,WebkitMaskImage:n}})]}),[r,e.image_url_dark,e.image_url_light,e.title,n]),a=f.useMemo(()=>l.jsx("div",{className:"p-sm flex h-full flex-col justify-center",children:l.jsxs("div",{className:"gap-2xs p-xs flex flex-col items-start",children:[l.jsx(D,{className:"line-clamp-2 text-ellipsis leading-tight",variant:Xf.includes(t)?"tinyRegular":"small",color:Xf.includes(t)?"white":void 0,children:e.title}),l.jsx(D,{className:B("line-clamp-2 text-ellipsis leading-tight",{"text-white/70":Xf.includes(t)}),variant:"tiny",color:"light",children:l.jsx("span",{className:"font-normal",children:e.text})})]})}),[t,e.title,e.text]);return l.jsx("div",{className:B("relative h-full w-full",{"bg-inverse dark:bg-offset":Xf.includes(t)}),children:Xf.includes(t)?l.jsxs(l.Fragment,{children:[s,l.jsx("div",{className:"absolute inset-x-0 bottom-0",children:a})]}):l.jsxs("div",{className:"grid h-full grid-cols-3 grid-rows-1",children:[l.jsx("div",{className:"col-span-2",children:l.jsx("div",{className:"flex h-full flex-row items-center",children:a})}),l.jsx("div",{className:"col-span-1",children:s})]})})});qCe.displayName="AnnouncementHomepageWidget";const KCe=A.memo(({widget:e,size:t})=>{const{colorScheme:n}=fs(),r=t=="LARGE"?"grid grid-rows-3":"flex flex-row items-center",s=t=="LARGE"?"row-span-1":"",a=t=="LARGE"?"row-span-3":"",o=f.useMemo(()=>l.jsx("div",{className:B("relative",a),children:l.jsx("img",{src:n==="light"?e.image_url_light:e.image_url_dark,className:"size-full object-cover",alt:e.title,style:{maskImage:"linear-gradient(to bottom, black 75%, transparent)"}})}),[a,n,e.image_url_light,e.image_url_dark,e.title]),i=f.useMemo(()=>l.jsx("div",{className:B(a,"pl-[12px]"),children:l.jsx("div",{className:"relative size-[40px] overflow-hidden rounded-md",children:l.jsx("img",{src:n==="light"?e.image_url_light:e.image_url_dark,alt:e.title,className:"size-full object-cover"})})}),[a,n,e.image_url_light,e.image_url_dark,e.title]),c=f.useMemo(()=>l.jsx("div",{className:B("p-sm flex h-full flex-col justify-center",s,t!=="LARGE"&&"pt-sm"),children:l.jsx(D,{className:"px-xs line-clamp-2 text-ellipsis leading-tight",variant:"tinyRegular",children:e.title})}),[t,s,e.title]);return l.jsx("div",{className:B("h-full w-full",r),children:t=="LARGE"?l.jsxs(l.Fragment,{children:[o,c]}):l.jsxs(l.Fragment,{children:[i,c]})})});KCe.displayName="DiscoverHomepageWidget";var y6={},ene;function fjt(){return ene||(ene=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="location-dot",r=384,s=512,a=["map-marker-alt"],o="f3c5",i="M336 192c0-79.5-64.5-144-144-144S48 112.5 48 192c0 12.4 4.5 31.6 15.3 57.2c10.5 24.8 25.4 52.2 42.5 79.9c28.5 46.2 61.5 90.8 86.2 122.6c24.8-31.8 57.8-76.4 86.2-122.6c17.1-27.7 32-55.1 42.5-79.9C331.5 223.6 336 204.4 336 192zm48 0c0 87.4-117 243-168.3 307.2c-12.3 15.3-35.1 15.3-47.4 0C117 435 0 279.4 0 192C0 86 86 0 192 0S384 86 384 192zm-160 0a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm-112 0a80 80 0 1 1 160 0 80 80 0 1 1 -160 0z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faLocationDot=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(y6)),y6}var mjt=fjt(),v6={},tne;function hjt(){return tne||(tne=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="location-crosshairs",r=512,s=512,a=["location"],o="f601",i="M256 0c13.3 0 24 10.7 24 24l0 41.5C366.8 76.3 435.7 145.2 446.5 232l41.5 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-41.5 0C435.7 366.8 366.8 435.7 280 446.5l0 41.5c0 13.3-10.7 24-24 24s-24-10.7-24-24l0-41.5C145.2 435.7 76.3 366.8 65.5 280L24 280c-13.3 0-24-10.7-24-24s10.7-24 24-24l41.5 0C76.3 145.2 145.2 76.3 232 65.5L232 24c0-13.3 10.7-24 24-24zM112 256a144 144 0 1 0 288 0 144 144 0 1 0 -288 0zm192 0a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm-144 0a96 96 0 1 1 192 0 96 96 0 1 1 -192 0z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faLocationCrosshairs=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(v6)),v6}var pjt=hjt();const RM=({onRequest:e,onSuccess:t,onError:n,origin:r})=>{const{$t:s}=X(),{trackEvent:a}=Te();return f.useCallback(()=>{e?.(),navigator.geolocation?navigator.geolocation.getCurrentPosition(o=>{t(o),a("precise location granted",{origin:r})},o=>{let i;switch(o.code){case o.PERMISSION_DENIED:n(s({defaultMessage:"Looks like permission was denied. Please allow location access in your browser site settings.",id:"9P7nG1a2Cl"})),i="permission_denied";break;case o.POSITION_UNAVAILABLE:n(s({defaultMessage:"Unable to determine your location. Please try again.",id:"VLgkyqQ5LO"})),i="position_unavailable";break;case o.TIMEOUT:n(s({defaultMessage:"Request timed out. Please try again.",id:"VIQi5rKvh3"})),i="timeout";break;default:n(s({defaultMessage:"An error occurred while getting your location. Please try again.",id:"oOu0W+N9Re"})),i="unsupported"}a("precise location modal denied",{origin:r,reason:i})},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):(n(s({defaultMessage:"Location services are not supported by your browser.",id:"1eN9TO+Fjt"})),a("precise location modal denied",{origin:r,reason:"unsupported"}))},[s,n,t,e,r,a])},YCe=A.memo(({isOpen:e,onClose:t,onPermissionGranted:n,origin:r})=>{const{$t:s}=X(),[a,o]=f.useState(!1),[i,c]=f.useState(null),u=RM({onSuccess:g=>{n(g),o(!1),c(null),t()},onError:g=>{o(!1),c(g)},origin:r}),d=f.useCallback(()=>{o(!0),c(null),u()},[u]),{colorScheme:m}=fs(),{isMobileStyle:h}=Ce(),p=f.useMemo(()=>[{text:s({defaultMessage:"Cancel",id:"47FYwba+bI"}),onClick:t,disabled:a},{text:s({defaultMessage:"Allow",id:"y/bmsG8rnv"}),onClick:d,isLoading:a,variant:"primary",disabled:a}],[s,d,a,t]);return l.jsx(rn,{isOpen:e,onClose:t,variant:h?"bottom-sheet":"small",actionList:p,children:l.jsxs(z,{className:"flex flex-col",children:[l.jsx("div",{className:"-mt-md mb-md bg-offset flex h-24 w-full items-center justify-center overflow-hidden rounded-md bg-cover bg-center",style:{backgroundImage:m==="dark"?"url('/static/images/location-share-dialog-map-dark.jpg')":"url('/static/images/location-share-dialog-map.jpg')"},children:l.jsxs(z,{className:"size-xl relative flex items-center justify-center rounded-full border",children:[l.jsx(z,{className:"absolute left-1/2 top-1/2 size-full -translate-x-1/2 -translate-y-1/2 rounded-full",variant:"super"}),l.jsx(z,{variant:"super",className:"!border-super absolute left-1/2 top-1/2 size-[140%] -translate-x-1/2 -translate-y-1/2 rounded-full border opacity-20"}),l.jsx(z,{variant:"super",className:"!border-super absolute left-1/2 top-1/2 size-[180%] -translate-x-1/2 -translate-y-1/2 rounded-full border opacity-10"}),l.jsx(z,{variant:"super",className:"!border-super absolute left-1/2 top-1/2 size-[220%] -translate-x-1/2 -translate-y-1/2 rounded-full border opacity-5"}),l.jsx(xt,{icon:pjt.faLocationCrosshairs,size:"lg",className:"text-inverse relative"})]})}),l.jsx(D,{variant:"section-title",className:"text-center",children:s({defaultMessage:"Enable Precise Location",id:"/JAfaukfkx"})}),l.jsx(D,{variant:"small",color:"light",className:"text-center",children:s({defaultMessage:"To provide you with accurate local weather information, Perplexity needs access to your device location.",id:"0A/wGwJkVw"})}),i&&l.jsx(z,{className:"mt-md",children:l.jsx(D,{variant:"smallBold",color:"red",className:"text-center",children:i})})]})})});YCe.displayName="LocationPermissionModal";const gjt=Object.freeze(Object.defineProperty({__proto__:null,LocationPermissionModal:YCe,useRequestLocation:RM},Symbol.toStringTag,{value:"Module"})),QCe=A.memo(({setShowCTA:e})=>{const{$t:t}=X(),{openToast:n}=On(),r=gt(),s=f.useCallback(()=>{r.invalidateQueries({queryKey:[F9]}),e(!1)},[r,e]),o=RM({onSuccess:s,onError:c=>{n(c,"error",5)},origin:"homepage_weather"}),i=f.useCallback(()=>{o()},[o]);return l.jsxs(_e.div,{whileTap:{scale:.98,transition:{ease:Jn,duration:.15}},className:"bg-offsetPlus flex w-full cursor-pointer flex-row items-center justify-center rounded-full p-3",onClick:i,children:[l.jsx(xt,{icon:mjt.faLocationDot,size:"sm",className:"text-foreground relative"}),l.jsx(D,{variant:"smallBold",color:"default",className:"ml-2",children:t({defaultMessage:"Use Precise Location",id:"A+BBIFLIgr"})})]})});QCe.displayName="EnableLocationCTA";var x6={},nne;function yjt(){return nne||(nne=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="fas",n="arrow-down",r=384,s=512,a=[8595],o="f063",i="M169.4 470.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 370.8 224 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 306.7L54.6 265.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faArrowDown=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(x6)),x6}var vjt=yjt(),b6={},rne;function xjt(){return rne||(rne=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="fas",n="arrow-up",r=384,s=512,a=[8593],o="f062",i="M214.6 41.4c-12.5-12.5-32.8-12.5-45.3 0l-160 160c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 141.2 160 448c0 17.7 14.3 32 32 32s32-14.3 32-32l0-306.7L329.4 246.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-160-160z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faArrowUp=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(b6)),b6}var bjt=xjt();const XCe=A.memo(({widget:e,size:t})=>{const n="leading-none",r=e.profiles[0].image,s=e.profiles[0].displayName??e.profiles[0].symbol,a=e.profiles[0].companyName,o=e.quotes[0].price,i=e.profiles[0].currency,c=e.quotes[0].changesPercentage,u=(c??0)>0,{locale:d}=X(),m=f.useMemo(()=>B({"!text-[#20808D] dark:!text-[#1FB8CD]":u,"!text-[#A84B2F] dark:!text-[#9C4153]":!u}),[u]),h=f.useMemo(()=>o?o>=1e5?(o/1e3).toLocaleString(d,{minimumFractionDigits:2,maximumFractionDigits:2})+"k":o.toLocaleString(d,{minimumFractionDigits:2,maximumFractionDigits:2}):"",[o,d]),p=f.useMemo(()=>c?`${u?"+":""}${c?.toFixed(2)}%`:"",[c,u]),g=f.useMemo(()=>t==="MEDIUM"?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"gap-xs flex items-center",children:[r&&l.jsx("img",{src:r??"",alt:a??"",className:"-mt-two size-[16px] rounded-sm"}),l.jsx(D,{variant:"tinyRegular",color:"light",className:n,children:s})]}),l.jsxs("div",{className:"gap-sm flex flex-row items-baseline",children:[l.jsxs(D,{variant:"tinyRegular",className:n,children:[i==="USD"?"$":"",h,i!=="USD"&&l.jsxs("span",{className:"text-quiet text-[11px]",children:[" ",i]})]}),l.jsx(D,{variant:"tinyRegular",className:B(n,m,"ml-auto"),children:p})]})]}):l.jsxs(l.Fragment,{children:[l.jsx(D,{variant:"tinyRegular",className:n,children:s}),l.jsx(D,{variant:"tinyRegular",className:n,children:h}),l.jsx(D,{variant:"tinyRegular",className:m,children:p})]}),[p,m,a,i,r,h,t,s]),y=f.useMemo(()=>l.jsx("div",{className:B("bg-offsetPlus flex items-center justify-center rounded-full",{"size-[18px]":t==="SMALL","size-[20px]":t!=="SMALL"}),children:l.jsx(xt,{icon:u?bjt.faArrowUp:vjt.faArrowDown,className:m,size:"xs"})}),[u,t,m]);return l.jsxs("div",{className:B("p-sm flex h-full flex-row items-center",{"py-sm":t==="SMALL"}),children:[l.jsx("div",{className:B("pl-xs flex flex-col",t==="MEDIUM"?"gap-sm":"gap-xs"),children:g}),l.jsx("div",{className:B("ml-auto",{"mr-sm":t==="MEDIUM"}),children:y})]})});XCe.displayName="FinanceHomepageWidget";const _jt={SMALL:"col-span-1 row-span-1",MEDIUM:"col-span-2 row-span-1",LARGE:"col-span-2 row-span-2",ROW:"col-span-6 row-span-1"},wjt=e=>e.some(t=>t.type==="QUERY"&&t.educational_type==="comet"),Sjt=e=>e.some(t=>t.type==="QUERY"&&t.educational_type==="project"),Uj=e=>e.type==="QUERY"&&e.educational_type==="primer",ZCe={Ask:fo,"Email & Communication Management":r8,"Finance & Budgeting":wre,"Work & Research":gre,"Shopping & Deals":U6,"Social & Personal Life":pre,"Time Management & Productivity":mS,"Travel & Events":fS,Research:fo,"Current Events":A0,Recommend:F6,Travel:qTe,Shopping:U6,Finance:GTe,Sports:Qb,Local:zre,"Make a plan":rke,Analyze:nke,Summarize:tke,"Fact Check":Yne,Learn:eke,Health:H6,"What is Perplexity":vre,Troubleshoot:f8,Compare:mB,Parenting:JTe,Create:P0,Study:H_,"Get a job":ZTe,Flashcards:XTe,"Practice test":i8,Law:mB,Technology:QTe,Science:YTe,Humanities:KTe},RU=A.memo(({widget:e,showPadding:t=!0,restrictTwoRows:n=!0,tooltipText:r,icon:s})=>{const a=t?"px-sm py-xs":"",o=t?"p-xs":"",i=f.useMemo(()=>({lineHeight:1.3}),[]);return l.jsx("div",{className:`relative h-full ${a}`,children:l.jsx("div",{className:`flex h-full flex-col ${o}`,children:l.jsxs("div",{className:"flex grow items-center gap-2",children:[l.jsx("div",{className:"bg-offsetPlus flex size-6 shrink-0 items-center justify-center rounded-md",children:l.jsx(be,{icon:(s||ZCe[e.prompt])??fo,color:"#8D9191",size:"sm"})}),r?l.jsx(bn,{tooltipText:r,asChild:!0,children:l.jsx(D,{className:B("text-ellipsis",{"line-clamp-2":n}),variant:"tinyRegular",style:i,children:e.query})}):l.jsx(D,{className:B("text-ellipsis text-pretty",{"line-clamp-2":n}),variant:"tinyRegular",style:i,children:e.query})]})})})});RU.displayName="QueryHomepageWidget";const JCe=_e.create(at),Cjt={suggested:A0,trending:ske},Ejt=(e,t)=>{const{action:n,...r}=e,s=n.actions.find(a=>a.query===t)??n.actions[0];return{...r,type:"QUERY",query:t,action:s}},eEe=A.memo(({prompt:e})=>{switch(e){case"suggested":return l.jsx(D,{variant:"tinyRegular",color:"light",children:l.jsx(he,{defaultMessage:"Suggested",id:"a0lFbMbzyl"})});case"trending":return l.jsx(D,{variant:"tinyRegular",color:"light",children:l.jsx(he,{defaultMessage:"Trending",id:"ll/ufR0/ED"})});default:return l.jsx(D,{variant:"tinyRegular",color:"light",children:"Ask"})}});eEe.displayName="WidgetTitle";const tEe=A.memo(({widget:e,onQueryClick:t,onQueryHover:n})=>{const{queries:r}=e,s=r.length===1,a=B("px-[12px] pt-[12px]"),o=e.prompt.toLowerCase(),i=Cjt[o];return l.jsxs("div",{className:a,children:[l.jsxs("div",{className:"gap-x-xs flex",children:[l.jsx(be,{icon:i,color:"#8D9191",size:"sm"}),l.jsx(D,{variant:"tinyRegular",color:"light",children:l.jsx(eEe,{prompt:o})})]}),l.jsx("div",{children:s?l.jsx(Bj,{query:r[0],restrictTwoRows:!1,onQueryClick:t,onQueryHover:n,widget:e},r[0]):l.jsx("div",{children:r.map(c=>l.jsx(Bj,{query:c,onQueryClick:t,onQueryHover:n,widget:e},c))})})]})});tEe.displayName="MultiQueryHomepageWidget";const Bj=A.memo(({query:e,restrictTwoRows:t,onQueryClick:n,onQueryHover:r,widget:s})=>{const a=f.useMemo(()=>Ejt(s,e),[e,s]),o=f.useMemo(()=>({opacity:.5}),[]),i=f.useMemo(()=>({opacity:1}),[]),c=f.useMemo(()=>({opacity:.75,transition:{duration:.15,ease:$a}}),[]);return l.jsx(JCe,{href:`/search/new?q=${e}&source=homepage_widget`,initial:o,animate:i,whileHover:c,children:l.jsx("div",{className:"mt-4",onClick:u=>{u.preventDefault(),n(e)},onMouseEnter:()=>r(e),children:l.jsx(RU,{widget:a,size:"MEDIUM",showPadding:!1,restrictTwoRows:t})})})});Bj.displayName="MotionLinkFactory";const nEe=A.memo(({widget:e,onClick:t,onMouseEnter:n,index:r=0,buttonClassName:s})=>l.jsx("div",{onMouseEnter:n,children:l.jsx(st,{children:l.jsx(_e.div,{initial:{opacity:0,scale:.7,y:14},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.7},transition:{delay:r*.025,duration:.3,type:"spring",stiffness:400,damping:30},children:l.jsx(ye,{variant:"border",size:"small",text:e.query,icon:ZCe[e.prompt]??fo,onClick:t,extraCSS:s},e.query)},e.uuid)})}));nEe.displayName="QueryPrimerHomepageWidget";const rEe=A.memo(({widget:e})=>{const t=f.useMemo(()=>({lineHeight:1.3}),[]);return l.jsxs("div",{className:"flex size-full grow items-center gap-2",children:[l.jsx("div",{className:"bg-offsetPlus ml-3 flex size-[40px] shrink-0 items-center justify-center rounded-md",children:e.icon_url?l.jsx(es,{src:e.icon_url,alt:e.prompt,includeLightBoxModal:!1}):l.jsx(be,{icon:fo,color:"#8D9191",size:"sm"})}),l.jsxs("div",{className:"my-auto mr-1 flex flex-col overflow-hidden",children:[l.jsx(D,{variant:"tiny",children:e.prompt}),l.jsx(D,{className:B("line-clamp-2 text-ellipsis text-pretty"),variant:"tinyRegular",style:t,children:e.query})]})]})});rEe.displayName="QueryProjectHomepageWidget";const sEe=A.memo(({widget:e})=>{const t=f.useMemo(()=>({lineHeight:1.3}),[]);return l.jsx("div",{className:"px-sm py-xs relative h-full",children:l.jsx("div",{className:"p-xs flex h-full flex-col",children:l.jsxs("div",{className:"flex grow items-center gap-2",children:[l.jsx("div",{className:"bg-offsetPlus flex size-8 shrink-0 items-center justify-center rounded-md",children:l.jsx(Ru,{unified:e.emoji,size:"small"})}),l.jsx(D,{className:"line-clamp-2 text-ellipsis text-pretty",variant:"tinyRegular",style:t,children:e.title})]})})})});sEe.displayName="SpaceHomepageWidget";const Mjt=vt({perplexitySports:{defaultMessage:"{pplx} Sports",id:"K65/hgZBjY"},teamVsTeam:{defaultMessage:"{team1} vs {team2}",id:"lyaxuodMxh"},nfl:{defaultMessage:"NFL",id:"Lv6pQppd/V"},nba:{defaultMessage:"NBA",id:"D+pbqZQpNj"},wnba:{defaultMessage:"WNBA",id:"avDAamqQm4"},ncaam:{defaultMessage:"NCAAM",id:"gC9NSK3/R6"},ncaaw:{defaultMessage:"NCAAW",id:"eERAIF8MIh"},cricket:{defaultMessage:"Cricket",id:"hJ+aKKEPPW"},conference:{defaultMessage:"Conference",id:"E0mu0BuhfL"},division:{defaultMessage:"Division",id:"dETzL9JuSD"},league:{defaultMessage:"League",id:"P3y4FpCWKK"},nflByeNote:{defaultMessage:"Plays lowest remaining seed",id:"ivzjhdMH5D"},playoffBracket:{defaultMessage:"Playoff Bracket",id:"5T8u2ZRrKO"},watchOn:{defaultMessage:"Watch on {network}",id:"yCXRhFX8Qz"},overview:{defaultMessage:"Overview",id:"9uOFF3L8kp"},highlights:{defaultMessage:"Highlight Videos",id:"J4ZW4MNVky"},moreAboutNfl:{defaultMessage:"More about the NFL",id:"JGDrER55OW"},pregameHighlights:{defaultMessage:"Pregame Highlights",id:"pTASonM2gu"},gameHighlights:{defaultMessage:"Game Highlights",id:"nX0XrAiLIA"},final:{defaultMessage:"Final",id:"6/JzkWi0di"},videos:{defaultMessage:"Videos",id:"4XfMuxy3FO"},playerPhotos:{defaultMessage:"{player} Photos",id:"YRfYXYpNfE"},noInjuries:{defaultMessage:"No Team Injuries",id:"9D6SP/NB3G"},seasonLeaders:{defaultMessage:"Season Leaders",id:"lT3vL7pgxM"},gameLeaders:{defaultMessage:"Game Leaders",id:"BpPX7CGEMm"},bettingOdds:{defaultMessage:"Betting Odds",id:"taELAJbik0"},teamComparisons:{defaultMessage:"Team Comparison",id:"KdREfWZdzQ"},seasonComparisons:{defaultMessage:"Season Comparison",id:"1fVXZNAk6A"},seasonPerformance:{defaultMessage:"Season Performance",id:"+XGEnxB3qU"},injuries:{defaultMessage:"Injuries",id:"+9VW01o/qa"},nextGame:{defaultMessage:"Next Game",id:"GHv/zzzbyP"},gameWinnerOdds:{defaultMessage:"Game Winner Odds",id:"Ar4Hgi5LK/"},offense:{defaultMessage:"Offense",id:"gkhnHmdS3n"},pointsPerGame:{defaultMessage:"Points Per Game",id:"oiTKA0iiEO"},totalYardsPerGame:{defaultMessage:"Total Yards Per Game",id:"1hUUAbKwNU"},passingYardsPerGame:{defaultMessage:"Passing Yards Per Game",id:"NZ1ECBKywu"},rushingYardsPerGame:{defaultMessage:"Rushing Yards Per Game",id:"XaZf8sSKrF"},thirdDownConversionRate:{defaultMessage:"Third Down Conversion Rate",id:"ffvMztEyfa"},redZoneEfficiency:{defaultMessage:"Red Zone Efficiency",id:"KD1EYvEBXL"},freeThrowsMade:{defaultMessage:"Free Throws Made",id:"qngxYnoujX"},fieldGoalsMade:{defaultMessage:"Field Goals Made",id:"8hkrjZ6IYu"},turnovers:{defaultMessage:"Turnovers",id:"ix10Ldc+00"},blocks:{defaultMessage:"Blocked Shots",id:"H+onZtcuVa"},steals:{defaultMessage:"Steals",id:"6WYTxwolV8"},threePointFieldGoalsMade:{defaultMessage:"Three Point Field Goals Made",id:"sHR4TS9YOq"},defense:{defaultMessage:"Defense",id:"7Y+mK49r3z"},pointsAllowed:{defaultMessage:"Points Allowed",id:"oIj9CdpmXY"},turnoverDiff:{defaultMessage:"Turnover Diff",id:"XAiSFr028u"},pointsAllowedPerGame:{defaultMessage:"Points Allowed Per Game",id:"crP3Q4G1sg"},assistsPerGame:{defaultMessage:"Assists Per Game",id:"iVrCmaL1xp"},reboundsPerGame:{defaultMessage:"Rebounds Per Game",id:"luHpkidK/P"},fieldGoalPercentage:{defaultMessage:"Field Goal Percentage",id:"eFfteQzdQj"},blocksPerGame:{defaultMessage:"Blocks Per Game",id:"GZdk7v9wsc"},stealsPerGame:{defaultMessage:"Steals Per Game",id:"AsfNOOP1Pv"},threePointPercentage:{defaultMessage:"Three Point Percentage",id:"47T2zZRSFt"},freeThrowPercentage:{defaultMessage:"Free Throw Percentage",id:"/G3PY4IYf7"},yardsAllowedPerGame:{defaultMessage:"Yards Allowed Per Game",id:"B15PuOjR7R"},passingYardsAllowed:{defaultMessage:"Passing Yards Allowed",id:"0HGZ3V81cB"},rushingYardsAllowed:{defaultMessage:"Rushing Yards Allowed",id:"ftA+LXAEQL"},firstDowns:{defaultMessage:"First Downs",id:"aHqkLRqHjr"},penalties:{defaultMessage:"Penalties",id:"fa38C8rLbM"},penaltyYards:{defaultMessage:"Penalty Yards",id:"ZC7MShyuR1"},possessionMinutes:{defaultMessage:"Possession Minutes",id:"khpuL1ieoV"},fumblesLost:{defaultMessage:"Fumbles Lost",id:"IzuROyqz+7"},interceptionsThrown:{defaultMessage:"Interceptions Thrown",id:"tmQq6pHbYi"},other:{defaultMessage:"Other",id:"/VnDMl81rh"},totalYards:{defaultMessage:"Total Yards",id:"veZmYTt6MN"},points:{defaultMessage:"Points",id:"P0PLlQxVoe"},turnoversPerGame:{defaultMessage:"Turnovers Per Game",id:"uTgBwtAPGV"},foulsPerGame:{defaultMessage:"Fouls Per Game",id:"SMqdG+QmGB"},penaltiesPerGame:{defaultMessage:"Penalties Per Game",id:"9wKTlQSR/j"},penaltyYardsPerGame:{defaultMessage:"Penalty Yards Per Game",id:"Jm5WpbiViO"},gamePreview:{defaultMessage:"Game Preview",id:"GvobedfNcN"},gameSummary:{defaultMessage:"Game Summary",id:"+eeGQlcxzW"},gameLive:{defaultMessage:"LIVE",id:"UqyNCCygYW"},carries:{defaultMessage:"{value} carries",id:"rq9+96YlFa"},receptions:{defaultMessage:"{value} rec",id:"sTvPmiSZD7"},pointsStat:{defaultMessage:"{value} points",id:"UrDn6NGZfb"},reboundsStat:{defaultMessage:"{value} rebounds",id:"9vdJ9I7bdt"},assists:{defaultMessage:"Assists",id:"PqEAty/m8X"},rebounds:{defaultMessage:"Rebounds",id:"VXRs2esXLO"},assistsStat:{defaultMessage:"{value} assists",id:"bWLYwKNgJ3"},passingYards:{defaultMessage:"Passing Yards",id:"aQGqkCWSsl"},rushingYards:{defaultMessage:"Rushing Yards",id:"MpZ23vuQex"},receivingYards:{defaultMessage:"Receiving Yards",id:"GbfiEHr37J"},bettingOddsSpread:{defaultMessage:"Spread",id:"B7hDsYrvQe"},bettingOddsTotal:{defaultMessage:"Total",id:"MJ2jZQxQnT"},bettingOddsMoneyline:{defaultMessage:"Money Line",id:"kW0GAibgTH"},injuryReport:{defaultMessage:"Injury Report",id:"/YN/gLAPJU"},player:{defaultMessage:"Player",id:"1AGL1rdLFR"},position:{defaultMessage:"Position",id:"U6qGuOVs+L"},injury:{defaultMessage:"Injury",id:"PQiOxuIu/I"},status:{defaultMessage:"Status",id:"tzMNF3jWoU"},noRelatedGames:{defaultMessage:"No related games",id:"Ot5mpNSKsp"},teamComparison:{defaultMessage:"Team Comparison",id:"KdREfWZdzQ"},noUpdatesAvailable:{defaultMessage:"No updates available",id:"0Pg/1iJOgA"},halftime:{defaultMessage:"Halftime",id:"iC0AL294Dr"},viewMatchDetails:{defaultMessage:"View Game Details",id:"jBJqA9z9lD"},viewStandings:{defaultMessage:"View Standings",id:"oaPWiK0oYi"},followGameLive:{defaultMessage:"Follow Game Live",id:"CWFVI1BPrZ"},latestNews:{defaultMessage:"Latest News",id:"BlFeZAX10O"},imageSource:{defaultMessage:"Image source: {source}",id:"O/d/1HvfyG"},week:{defaultMessage:"Week {week}",id:"RE27WbGe9C"},total:{defaultMessage:"T",id:"sjlqAC/nrs"},team:{defaultMessage:"Team",id:"wsUmh9XWBm"},sources:{defaultMessage:"Data: Stats Perform  Player Photos: Associated Press",id:"g0CN3T/ISr"},nflSeason:{defaultMessage:"{year} NFL Season",id:"n6vqth75CA"},nbaSeason:{defaultMessage:"{year} NBA Season",id:"rrCa+R0f7X"},undrafted:{defaultMessage:"Undrafted",id:"ZpiNk0Z5Np"},pre:{defaultMessage:"Pre",id:"hMX10Ja0Xm"},preseason:{defaultMessage:"Preseason",id:"HENGOVahPR"},regularSeason:{defaultMessage:"Regular Season",id:"Ea9LD9vfyQ"},postSeason:{defaultMessage:"Postseason",id:"xvhy/ycHzu"},proBowl:{defaultMessage:"Pro Bowl",id:"pxho4sLngT"},wildCardPlayoff:{defaultMessage:"Wild Card Playoff",id:"EvhXzrm4Ix"},divisionalPlayoff:{defaultMessage:"Divisional Playoff",id:"p1LmAErYhB"},conferenceChampionship:{defaultMessage:"Conference Championship",id:"AVW9uMIxMK"},superBowl:{defaultMessage:"Super Bowl",id:"khEvs6DTrv"},relatedGames:{defaultMessage:"Related Games",id:"Vii6YKE9t9"},noEvents:{defaultMessage:"No events",id:"xPFOlw/kys"},showAllTeams:{defaultMessage:"Show all teams",id:"k112pFsCZU"},tba:{defaultMessage:"TBA",id:"ZfAWFLTzx/"},live:{defaultMessage:"Live",id:"Dn82ALx/+V"},standings:{defaultMessage:"Standings",id:"o2v7SB+ObO"},schedule:{defaultMessage:"Schedule",id:"hGQqkWwmJD"},wins:{defaultMessage:"Wins",id:"f++h1REg9b"},losses:{defaultMessage:"Losses",id:"eQJCl5DaWL"},ties:{defaultMessage:"Ties",id:"LYMVZdnuVv"},winPct:{defaultMessage:"Win Pct",id:"sHcBpWJlFR"},pointsFor:{defaultMessage:"PF",id:"zG5bX7TOdX"},pointsAgainst:{defaultMessage:"PA",id:"+09k0C5AlI"},streak:{defaultMessage:"Str",id:"/K3fzWE90S"},teamSchedule:{defaultMessage:"{year} {team} Schedule",id:"1Z4UTJhHPZ"},home:{defaultMessage:"Home",id:"ejEGdxSUGs"},away:{defaultMessage:"Away",id:"0JXAskjV4d"},previous:{defaultMessage:"Previous",id:"JJNc3cbYIJ"},upcoming:{defaultMessage:"Upcoming",id:"6/aEFZbs2i"},relatedTeams:{defaultMessage:"Related Teams",id:"ZzOufqyGoL"},seasonStats:{defaultMessage:"{year} Season Stats",id:"0p+BU5Jj9p"},coachName:{defaultMessage:"Coach",id:"uQg6UcdK4Y"},diff:{defaultMessage:"Diff",id:"Fm3StihZV6"},teams:{defaultMessage:"Teams",id:"DNeuzb5ky2"},seasonHighlights:{defaultMessage:"Season Highlights",id:"u0NXd7YWeO"},playByPlay:{defaultMessage:"Play by Play",id:"g2y6uMg3RU"},playSummary:{defaultMessage:"Play Summary",id:"HtqDGZkC7q"},activeDrive:{defaultMessage:"Active Drive",id:"9WRCeRXYnG"},drive:{defaultMessage:"Drive",id:"1YAWJ379IQ"},gameDown:{defaultMessage:"{down} Down",id:"D6NiYuphxA"},noLeader:{defaultMessage:"No Leader",id:"nEuoHaJ7ix"},endOfPeriod:{defaultMessage:"End of Quarter",id:"tY+g5ifXSh"},playSubtitle:{defaultMessage:"{count, plural, one {# Play} other {# Plays}}, {yards, plural, one {# Yard} other {# Yards}}, {duration}",id:"segO/liubc"},downloadIosNotificationCta:{defaultMessage:"Download the app to get live game updates",id:"TbQ0fq8jWR"},downloadIosNotificationCtaSub:{defaultMessage:"Scan the QR code to download the app",id:"1j+FmhPZ8J"},iosNotificationsCta:{defaultMessage:"Turn on live game updates",id:"B3DARItQiv"},iosNotificationsCtaOff:{defaultMessage:"Turn off live game updates",id:"MJ3BTMxxFR"},iosNotificationsCtaSub:{defaultMessage:"Real-time game updates",id:"qeSXEmN+v2"},iosNotificationsCtaSubOff:{defaultMessage:"You are subscribed to live game alerts.",id:"ESQg4GtLBi"},moreGames:{defaultMessage:"More Games",id:"ssuX7Q5/hn"},goals:{defaultMessage:"Goals",id:"XHLYdJ4a0Y"},shots:{defaultMessage:"Shots",id:"MtAfOi/9Z4"},shotsOnTarget:{defaultMessage:"Shots on Target",id:"XypPx7GnSa"},fouls:{defaultMessage:"Fouls",id:"ULgxB5+kkl"},yellowCards:{defaultMessage:"Yellow Cards",id:"OgfXSatXn2"},redCards:{defaultMessage:"Red Cards",id:"iM3q/GTmBa"},corners:{defaultMessage:"Corners",id:"SG1mA2ViLF"},saves:{defaultMessage:"Saves",id:"OXuG5Tbo0I"},passes:{defaultMessage:"Passes",id:"zt/qs3N6e3"},pointsWon:{defaultMessage:"Points Won",id:"XinSz02Vcr"},totalWinners:{defaultMessage:"Winners",id:"upRjwyuG/1"},forehandWinners:{defaultMessage:"Forehand Winners",id:"dhq2amJ4Pc"},backhandWinners:{defaultMessage:"Backhand Winners",id:"7LkIR0bV+s"},aces:{defaultMessage:"Aces",id:"sZJa/S3ekv"},doubleFaults:{defaultMessage:"Double Faults",id:"+3VTXdG9VS"},firstServePercentage:{defaultMessage:"First Serve %",id:"L5NV6vruFx"},firstServePointsWonPercentage:{defaultMessage:"First Serve Points Won %",id:"QOFjHS/pnz"},secondServePointsWonPercentage:{defaultMessage:"Second Serve Points Won %",id:"GfQX2xkNys"},breakpointsWon:{defaultMessage:"Break Points Won",id:"vuAxPAew9k"},totalUnforcedErrors:{defaultMessage:"Unforced Errors",id:"4F6jzAUiDp"}});var _6={},sne;function Tjt(){return sne||(sne=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="fass",n="triangle",r=512,s=512,a=[9650],o="f2ec",i="M0 480L256 32 512 480H0z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faTriangle=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(_6)),_6}var aEe=Tjt(),w6={},ane;function kjt(){return ane||(ane=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="chevron-up",r=512,s=512,a=[],o="f077",i="M239 111c9.4-9.4 24.6-9.4 33.9 0L465 303c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-175-175L81 337c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9L239 111z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faChevronUp=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(w6)),w6}var Njt=kjt();const czt=({event:e})=>{const[t,n]=f.useState("scoring"),{$t:r}=X(),s=aM(e.event.teams),a=e.event.pbp,o=tx(e.event),i=f.useMemo(()=>a.reduce((c,u)=>(c[u.period]||(c[u.period]=[]),c[u.period].push(u),c),{}),[a]);return l.jsx(z,{variant:"offset",className:"rounded-md",children:l.jsx(vM,{title:t==="all"?"Play-by-Play":"Scoring Plays",titleClassName:"!py-0",trailing:l.jsx(Zp,{size:"small",actionList:[{text:r({defaultMessage:"Scoring Plays",id:"DpgdMYgrGb"}),show:!0,onClick:()=>n("scoring"),active:t==="scoring"},{text:r({defaultMessage:"All Plays",id:"lVQ27GyPmi"}),show:!0,onClick:()=>n("all"),active:t==="all"}],layoutGroupId:"nfl-play-summary-tab-bar",layout:"right"}),children:l.jsx("div",{className:"-my-md",children:l.jsx(Ajt,{plays:i,teams:s,brands:e.brands,drives:e.event.driveChart,mode:t,isLive:o})})})})},Ajt=({plays:e,teams:t,brands:n,drives:r,mode:s,isLive:a})=>{const o=a?[...Object.keys(e)].reverse():Object.keys(e);return l.jsx("div",{children:o.map(i=>l.jsx("div",{children:l.jsx(Pjt,{plays:e[parseInt(i)],teams:t,brands:n,drives:r,mode:s,isLive:a,period:parseInt(i)})},i+s))})},Pjt=({plays:e,teams:t,brands:n,drives:r,mode:s,isLive:a,period:o})=>{const[i,c]=f.useState(!1),u=f.useMemo(()=>Object.values(e).flat().reduce((h,p)=>(h[p.driveId]||(h[p.driveId]=[]),h[p.driveId].push(p),h),{}),[e]),d=()=>{c(!0)};return!Object.keys(u).some(h=>r.find(p=>p.driveId===parseInt(h))?.driveStats.isScoringDrive==="true")&&s==="scoring"?null:l.jsxs(l.Fragment,{children:[l.jsx(D,{variant:"smallCaps",color:"light",className:"-mx-md bg-offsetPlus p-xs px-md",children:IU(o,{asOrdinal:!0})}),l.jsx("div",{className:B("group/plays flex flex-col",{"flex-col-reverse":a}),children:Object.keys(u).map(h=>{const p=r.find(g=>g.driveId===parseInt(h));return s==="scoring"&&p?.driveStats.isScoringDrive==="false"?null:l.jsx(Ojt,{brands:n,teams:t,plays:u[parseInt(h)],drives:r,isLive:a,period:o,onExpand:d,hasExpanded:i},h)})})]})},Rjt=e=>{if(!e)return;const t=+e.driveStats.timeOfPossession.seconds;return t<10?`${e.driveStats.timeOfPossession.minutes}:0${t}`:`${e.driveStats.timeOfPossession.minutes}:${t}`},Ijt=e=>e?e.driveEnd.playType.playTypeId===20:!1,jjt=e=>e?e.driveEnd.gameClock.minutes!==null:!1,Ojt=({brands:e,teams:t,plays:n,drives:r,isLive:s,period:a,onExpand:o,hasExpanded:i})=>{const{$t:c}=X(),u=r.find(x=>x.driveId===n[0].driveId),d=jjt(u),[m,h]=f.useState(!1),p=qh(u?.teamId??n[0].endPossession.teamId,e,"nfl"),g=f.useMemo(()=>{const x=Rjt(u);return c({defaultMessage:"{count, plural, one {# Play} other {# Plays}}, {yards, plural, one {# Yard} other {# Yards}}, {duration}",id:"segO/liubc"},{count:u?.driveStats.plays,yards:u?.driveStats.yards,duration:x})},[c,u]),y=f.useMemo(()=>u?.driveEnd.period&&u.driveEnd.period!==a?c({defaultMessage:"End of Quarter",id:"tY+g5ifXSh"}):u?.driveEnd.driveChartPlayName??c({defaultMessage:"Active Drive",id:"9WRCeRXYnG"}),[c,u,a]),v=Ijt(u)?qh(t.find(x=>x.teamId!==p.teamId)?.teamId??p.teamId,e,"nfl"):p;return f.useEffect(()=>{s&&!d&&!i&&!m&&h(!0)},[]),f.useEffect(()=>{d&&!i&&h(!1)},[d,i]),l.jsxs(z,{className:B("py-sm relative border-b",{"!border-transparent":m},{"first:border-b-0":s},{"last:border-b-0":!s}),children:[l.jsx("div",{className:B("-inset-x-md bg-offsetPlus/50 absolute inset-y-0 duration-200",{"opacity-0":!m})}),u&&u.driveEnd.period>a&&l.jsx("div",{className:B("bg-inverse/25 absolute left-[calc(12px-1px)] w-[2px]",{"top-lg bottom-0":!s,"h-lg top-0":s})}),u&&u.driveStart.period<a&&l.jsx("div",{className:B("bg-inverse/25 absolute left-[calc(12px-1px)] w-[2px]",{"h-lg top-0":!s,"top-lg bottom-0":s})}),l.jsxs("div",{className:"gap-md relative flex cursor-pointer items-center",onClick:()=>{h(!m),o()},children:[l.jsx(il,{size:"small",logo:v.logo,color:v.color,className:"!border-subtlest relative"}),l.jsxs("div",{className:"flex-1",children:[l.jsx(D,{variant:"smallBold",children:l.jsx("span",{className:"uppercase",children:y})}),l.jsx(D,{variant:"tiny",color:"light",children:g})]}),l.jsxs("div",{className:"gap-lg grid grid-cols-2",children:[l.jsx(one,{team:t[0],score:n[n.length-1].awayScoreAfter,didScore:n[n.length-1].awayScoreAfter>n[0].awayScoreBefore}),l.jsx(one,{team:t[1],score:n[n.length-1].homeScoreAfter,didScore:n[n.length-1].homeScoreAfter>n[0].homeScoreBefore})]}),l.jsx(D,{variant:"small",className:"flex items-center",children:l.jsx(xt,{icon:m?Njt.faChevronUp:pC.faChevronDown,size:"sm",className:"text-quiet"})})]}),l.jsx(_c,{className:"relative",mode:"popLayout",transition:{duration:.2,ease:Jn},children:m&&l.jsx(tl,{className:"w-full",initial:{opacity:0,y:-5},animate:{opacity:1,y:0,transition:{duration:.2,ease:Jn,delay:.05}},exit:{opacity:0,y:-5,transition:{duration:.2,ease:Jn}},children:l.jsx(_e.div,{layout:!0,layoutRoot:!0,children:(s?[...n].reverse():n).map(x=>l.jsx(Djt,{play:x},x.playId))})})})]})},one=({team:e,score:t,didScore:n})=>l.jsxs("div",{children:[l.jsx(D,{variant:"small",color:"light",className:"text-right uppercase",children:e.abbreviation}),l.jsxs(D,{variant:"small",className:"text-right align-baseline",color:n?"super":void 0,children:[n&&l.jsx(xt,{icon:aEe.faTriangle,size:"2xs",className:"mr-xs translate-y-px"}),l.jsx("span",{className:"font-mono",children:t})]})]}),Ljt=e=>{const t=e.match(/([A-Za-z]+)(\d+)/);if(!t)return e;const[n,r,s]=t;return`${r} ${s}`},IU=(e,t)=>[1,2,3,4].includes(e)?t?.asOrdinal?owe(e):`Q${e}`:"OT",Djt=({play:e})=>l.jsxs(_e.div,{layout:"position",initial:{opacity:0},animate:{opacity:1},className:"gap-md group flex w-full",children:[l.jsx("div",{className:"w-[24px] shrink-0"}),l.jsx(z,{className:"gap-md py-sm group-last:-mb-sm flex flex-1 border-b group-last:border-b-0",children:l.jsxs("div",{children:[l.jsxs(D,{variant:"small",children:[e.down&&e.distance&&`${owe(e.down)} & ${e.distance} at `,l.jsx("span",{className:"uppercase",children:Ljt(e.yardLine)})]}),l.jsxs(D,{variant:"small",color:"light",children:["(",e.time," - ",IU(e.period),") ",e.playText]})]})})]});function uzt({event:e,brands:t,isLive:n}){const{$t:r}=X(),[s,a]=f.useState(!1),[o,i]=f.useState("all"),c=f.useMemo(()=>e.pbp.filter(d=>o==="all"?ine(d):ine(d)&&Ujt(d)).reduce((d,m)=>(d[m.period]=d[m.period]||[],d[m.period].push(m),d),{}),[e?.pbp,o]),u=f.useMemo(()=>[{text:r({defaultMessage:"All Plays",id:"lVQ27GyPmi"}),onClick:()=>i("all"),show:!0,active:o==="all"},{text:r({defaultMessage:"Scoring Plays",id:"DpgdMYgrGb"}),onClick:()=>i("scoring"),show:!0,active:o==="scoring"}],[o,r]);return l.jsxs(l.Fragment,{children:[l.jsx(z,{variant:"offset",className:"rounded-md",children:l.jsx(vM,{title:r(n?{defaultMessage:"Play by Play",id:"g2y6uMg3RU"}:{defaultMessage:"Play Summary",id:"HtqDGZkC7q"}),trailing:l.jsx("div",{className:"-mb-sm",children:l.jsx(Zp,{actionList:u,layoutGroupId:"nba-play-summary-tab-bar",layout:"right",size:"tiny"})}),children:l.jsx("div",{className:"-my-md",children:l.jsx(oEe,{plays:c,event:e,onViewAll:()=>a(!0),playsToRender:6,reverse:n,brands:t,inModal:!1})})})}),s&&l.jsx(Vjt,{plays:c,isOpen:s,onClose:()=>a(!1),event:e,brands:t,reverse:n})]})}const oEe=f.memo(({plays:e,event:t,onViewAll:n,playsToRender:r=1/0,reverse:s=!1,brands:a,inModal:o=!1})=>{const{$t:i}=X(),c=aM(t.teams),u=s?[...Object.keys(e)].reverse():Object.keys(e),d=f.useMemo(()=>{let m=r;return l.jsxs(z,{children:[u.map(h=>{let p=0;const g=e[h].length;return m<=0?null:(m<g?(p=m,m=0):(p=g,m-=g),l.jsx(Fjt,{plays:e[h],playsToRender:p,teamsSorted:c,period:h,reverse:s,brands:a},h))}),!o&&n&&l.jsx("div",{className:"-mx-sm py-sm flex items-center justify-center",children:l.jsx(ke,{variant:"super",chevron:!0,chevronIcon:Jr,text:i({defaultMessage:"View All",id:"wbcwKddwLa"}),fullWidth:!0,size:"small",onClick:n})})]})},[e,r,c,s,o,n,i,u,a]);return o?d:l.jsx(_c,{className:"relative",mode:"popLayout",transition:{duration:.2,ease:Jn},children:l.jsx(tl,{children:d})})});function Fjt({plays:e,playsToRender:t,teamsSorted:n,period:r,reverse:s,brands:a}){const o=f.useMemo(()=>s?[...e].reverse():e,[e,s]),i=ms();return l.jsxs(z,{children:[t>0&&l.jsx("div",{children:l.jsxs(z,{variant:"offsetPlus",className:B("-mx-md px-md py-sm flex items-center justify-between"),children:[l.jsx(D,{variant:"smallCaps",color:"light",children:IU(parseInt(r))}),l.jsxs("div",{className:"gap-md flex items-center",children:[l.jsx(cne,{team:n[0].abbreviation}),l.jsx(cne,{team:n[1].abbreviation})]})]})}),l.jsx(dc,{children:l.jsx(_e.div,{layout:!0,layoutRoot:!0,children:o.slice(0,t).map((c,u)=>{const d=o[u-(s?-1:1)]?.visitorScore,m=o[u-(s?-1:1)]?.homeScore;return l.jsx(Bjt,{play:c,previousHomeScore:m,previousVisitorScore:d,brands:a,parentHasMounted:i},c.playId)})})})]})}function iEe(e){const t=e?.minutes||0,n=Math.ceil(e.seconds??0)?.toString().padStart(2,"0")||"00";return`${`${t}:`}${n}`}const ine=e=>e.playText!=="Starting Lineup",Ujt=e=>e.playEvent.playEventId===3||e.playEvent.playEventId===1,Bjt=f.memo(({play:e,previousHomeScore:t,previousVisitorScore:n,brands:r,parentHasMounted:s})=>{const a=f.useRef(!s),o=t!==void 0&&t!==e.homeScore,i=n!==void 0&&n!==e.visitorScore,c=o||i,u=qh(e.teamId,r,"nba"),{colorScheme:d}=fs(),m=iwe(u.color,d);return l.jsxs(_e.div,{className:"-mx-md border-subtlest p-md relative border-b",initial:a.current?void 0:{opacity:0},animate:a.current?void 0:{opacity:1},transition:{layout:{duration:.2,ease:Jn},opacity:{duration:.2,ease:$a}},layout:"position",children:[c&&l.jsx("div",{className:"w-xs absolute inset-y-1 left-1 rounded-full opacity-50",style:{backgroundColor:m}}),!a.current&&l.jsx(_e.div,{className:"bg-super/15 absolute inset-0",initial:{opacity:1},animate:{opacity:0},transition:{duration:1,ease:$a,delay:.2}}),l.jsxs("div",{className:"gap-md relative flex items-center",children:[l.jsx(il,{logo:u.logo,color:u.color,size:"small",includeStripe:!1}),l.jsxs("div",{className:"gap-xs flex flex-1 flex-col items-start",children:[l.jsx(D,{variant:"smallCaps",color:"light",children:iEe(e.time)}),l.jsx(D,{variant:"small",children:e.playText})]}),l.jsxs("div",{className:"gap-md flex items-center",children:[l.jsx(lne,{score:e.visitorScore,didScore:i}),l.jsx(lne,{score:e.homeScore,didScore:o})]})]})]})}),lne=({score:e,didScore:t})=>l.jsxs(D,{variant:"small",className:"relative w-[40px] text-right align-baseline",color:t?"super":void 0,children:[t&&l.jsx(xt,{icon:aEe.faTriangle,size:"2xs",className:"mr-xs translate-y-px"}),l.jsx("span",{className:"font-mono",children:e})]}),cne=({team:e})=>l.jsx(D,{variant:"smallCaps",className:"w-[40px] shrink-0 text-right",children:e}),Vjt=({plays:e,isOpen:t,onClose:n,event:r,brands:s,reverse:a})=>{const{isMobileStyle:o}=Ce();return l.jsx(rn,{isOpen:t,onClose:n,variant:o?"bottom-sheet":"side-sheet",children:l.jsx("div",{className:"min-h-full",children:l.jsx(oEe,{plays:e,event:r,brands:s,inModal:!0,reverse:a})})})},lEe=A.memo(({widget:e})=>{const{data:t}=e;return t.event_status.eventStatusId===2||t.event_status.eventStatusId===4?l.jsx(uEe,{widget:e}):l.jsx(cEe,{widget:e})});lEe.displayName="SportsHomepageWidget";const cEe=A.memo(({widget:e})=>{const{$t:t}=X(),{data:n}=e,{away_team:r,home_team:s}=n,{locale:a}=X(),o=f.useMemo(()=>{const i=new Date(n.start_date);return R9(i)?`${i.toLocaleString(a,{hour:"numeric",minute:"2-digit"})}, ${t({defaultMessage:"Today",id:"zWgbGgjUUg"})}`:i.toLocaleString(a,{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})},[n,a,t]);return l.jsxs("div",{className:B("py-sm flex h-full flex-col items-center justify-center px-[12px]"),children:[l.jsxs("div",{className:"grid w-full grid-cols-[1fr_auto_1fr] items-center",children:[l.jsx("div",{className:"flex items-center justify-start",children:l.jsx(il,{logo:r.logo,color:r.color,size:"small"})}),l.jsx("div",{className:"flex items-center justify-center",children:l.jsx(D,{variant:"tinyRegular",className:"truncate",children:o})}),l.jsx("div",{className:"flex items-center justify-end",children:l.jsx(il,{logo:s.logo,color:s.color,size:"small"})})]}),l.jsxs("div",{className:"mt-xs flex w-full items-center justify-between",children:[l.jsx("div",{className:"min-w-0 flex-1",children:l.jsx(D,{variant:"tinyRegular",className:"truncate text-start leading-tight",color:"light",children:r.nickname})}),l.jsx("div",{className:"px-2",children:l.jsx(D,{variant:"tinyRegular",className:"truncate leading-tight",color:"light",children:"vs"})}),l.jsx("div",{className:"min-w-0 flex-1",children:l.jsx(D,{variant:"tinyRegular",className:"truncate text-end leading-tight",color:"light",children:s.nickname})})]})]})});cEe.displayName="PreviewContent";const uEe=A.memo(({widget:e})=>{const{$t:t}=X(),{data:n}=e,{away_team:r,home_team:s,event_status:a,league:o}=n,{minutes:i,seconds:c}=a,u=a.eventStatusId===2,d=a.eventStatusId===4,m=Mjt[o.toLowerCase()],h=m?t(m):"",p=d?t({defaultMessage:"Final",id:"6/JzkWi0di"}):i!=null&&c!=null?iEe({minutes:i,seconds:c}):null,g=d||!a.period?null:`Q${a.period}`,v=iPt(a)?t({defaultMessage:"Halftime",id:"iC0AL294Dr"}):d?t({defaultMessage:"Final",id:"6/JzkWi0di"}):g&&p?`${g} ${p}`:"";return l.jsxs("div",{className:B("p-sm py-sm pr-sm flex h-full flex-col items-center justify-center"),children:[l.jsxs("div",{className:"grid w-full grid-cols-[1fr_auto_1fr] items-center",children:[l.jsxs("div",{className:"flex items-center justify-start",children:[l.jsx(il,{logo:r.logo,color:r.color,size:"small"}),r.score!==void 0&&l.jsxs("div",{className:"ml-sm flex flex-col items-center justify-center",children:[l.jsx(D,{variant:r.sub_score?"tinyRegular":"base",className:"truncate leading-tight",color:"default",children:r.score}),r.sub_score&&l.jsx(D,{variant:"tinyRegular",color:"light",className:"truncate",children:r.sub_score})]})]}),l.jsx("div",{className:"flex items-center justify-center",children:l.jsx(D,{variant:"tinyRegular",className:"truncate",children:v})}),l.jsxs("div",{className:"flex items-center justify-end",children:[s.score!==void 0&&l.jsxs("div",{className:"mr-sm flex flex-col items-center",children:[l.jsx(D,{variant:s.sub_score?"tinyRegular":"base",className:"truncate leading-tight",color:"default",children:s.score}),s.sub_score&&l.jsx(D,{variant:"tinyRegular",color:"light",className:"truncate",children:s.sub_score})]}),l.jsx(il,{logo:s.logo,color:s.color,size:"small"})]})]}),l.jsxs("div",{className:"mt-xs flex w-full items-center justify-between",children:[l.jsx("div",{className:"min-w-0 flex-1",children:l.jsx(D,{variant:"tinyRegular",className:"truncate text-start leading-tight",color:"light",children:r.nickname})}),l.jsx("div",{className:"px-2",children:u?l.jsx(dEe,{}):d&&l.jsx(D,{variant:"tinyRegular",className:"truncate leading-tight",color:"light",children:h})}),l.jsx("div",{className:"min-w-0 flex-1",children:l.jsx(D,{variant:"tinyRegular",className:"truncate text-end leading-tight",color:"light",children:s.nickname})})]})]})});uEe.displayName="SummaryContent";const dEe=A.memo(()=>l.jsx(D,{variant:"tinyRegular",color:"super",className:"bg-super/10 truncate rounded-full px-2 py-0.5 leading-tight",children:"Live"}));dEe.displayName="LiveIndicator";const $jt={SPORTS:oke,FINANCE:ake},Wjt="#8D9191",Hjt=({watchlistType:e})=>{const t=$jt[e];return l.jsx(be,{icon:t,color:Wjt})},zjt=A.memo(({widget:e})=>{const{$t:t}=X(),n=e.watchlist_type.toLowerCase(),r=t(Fy[n].title),s=t(Fy[n].widgetDescription);return l.jsxs("div",{className:"flex h-full flex-col items-start justify-between p-[12px]",children:[l.jsxs("div",{className:"gap-x-xs flex items-center",children:[l.jsx(Hjt,{watchlistType:e.watchlist_type}),l.jsx(D,{variant:"tinyRegular",color:"light",children:r})]}),l.jsx("div",{children:l.jsx(D,{variant:"tinyRegular",children:s})})]})}),fEe=A.memo(({location:e,forecast:t,prefersMetric:n})=>{const r="leading-none line-clamp-1",{$t:s}=X(),a=n?t?.[0]?.maxtemp_c:t?.[0]?.maxtemp_f,o=n?t?.[0]?.mintemp_c:t?.[0]?.mintemp_f,i=s({defaultMessage:"H: {high} L: {low}",id:"JyTe6EoY40"},{high:a,low:o});return f.useMemo(()=>l.jsxs("div",{className:"mt-sm gap-sm flex flex-row items-baseline justify-between",children:[l.jsx(D,{variant:"tinyRegular",className:r,color:"light",children:e?.name}),l.jsx(D,{variant:"tinyRegular",className:B(r,"min-w-max"),color:"ultraLight",children:i})]}),[i,e?.name,r])});fEe.displayName="WeatherBottomSection";const Gjt=({icon:e})=>{const t=oS(AE,e)?s0[e]:S1.faSun;return l.jsx(xt,{icon:t,size:"xs",className:"self-start"})},mEe=A.memo(({forecast:e,prefersMetric:t})=>{const{locale:n}=X(),r="row-span-3",s="leading-none line-clamp-1";return l.jsx("div",{className:B(r,"mt-sm flex flex-grow justify-between"),children:e?.slice(0,5).map((a,o)=>{const i=t?a.maxtemp_c:a.maxtemp_f;return l.jsxs(_e.div,{className:"gap-xs flex flex-col items-start",initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{delay:.025*o,ease:pa},children:[l.jsx(D,{className:"leading-none",children:l.jsx(Gjt,{icon:a.icon})}),l.jsxs(D,{variant:"tinyRegular",className:B(s,"mt-xs"),children:[i,""]}),l.jsx(D,{variant:"tinyRegular",className:s,color:"light",children:w9(a.dow??"",n)})]},a.dow)})})});mEe.displayName="WeatherForecast";const qjt=({icon:e})=>{const t=oS(AE,e)?s0[e]:S1.faSun;return l.jsx(xt,{icon:t,size:"xs",className:"self-start"})},hEe=A.memo(({current:e,prefersMetric:t,setPrefersMetric:n})=>{const r="leading-none line-clamp-1",s=t?e?.temp_c:e?.temp_f,a=e?.condition?.text??"Sunny";return l.jsxs("div",{className:"gap-sm flex flex-row items-center justify-between",children:[l.jsx(D,{variant:"base",className:B(r,"min-w-max"),children:l.jsxs("div",{className:"gap-xs flex flex-row items-center justify-center",children:[l.jsx("div",{children:l.jsx(qjt,{icon:e?.condition?.icon})}),l.jsx(D,{variant:"base",className:"tabular-nums",children:l.jsx(nu,{value:s??0,suffix:""})}),l.jsxs("div",{className:"flex",children:[l.jsx("button",{onClick:()=>n(!1),className:"cursor-pointer appearance-none",children:l.jsx(D,{variant:"tiny",color:t?"light":"default",className:B("transition-opacity",t?"opacity-50 hover:opacity-70":"opacity-100"),children:"F"})}),l.jsx(D,{variant:"tiny",color:"light",className:"opacity-50",children:"/"}),l.jsx("button",{onClick:()=>n(!0),className:"cursor-pointer appearance-none",children:l.jsx(D,{variant:"tiny",color:t?"default":"light",className:B("transition-opacity",t?"opacity-100":"opacity-50 hover:opacity-70"),children:"C"})})]})]})}),l.jsx(D,{variant:"tinyRegular",color:"light",className:r,children:a})]})});hEe.displayName="WeatherTopSection";const pEe=A.memo(({data:e,isLoading:t,error:n,size:r="LARGE"})=>{const{prefersMetric:s,setPrefersMetric:a}=NSe();return t?l.jsx(yEe,{size:r}):n||!e?l.jsx(vEe,{}):l.jsx(gEe,{data:e,size:r,prefersMetric:s,setPrefersMetric:a})});pEe.displayName="WeatherDisplay";const gEe=A.memo(({data:e,prefersMetric:t,setPrefersMetric:n,size:r="LARGE"})=>{const{current:s,location:a,forecast:o}=e;return l.jsxs(_e.div,{initial:{opacity:0,filter:"blur(4px)"},animate:{opacity:1,filter:"blur(0px)",transition:{opacity:{ease:pa,duration:.4},filter:{ease:pa,duration:.4}}},exit:{opacity:0,filter:"blur(2px)",transition:{opacity:{ease:pa,duration:.3},filter:{ease:pa,duration:.3}}},className:B("gap-sm grid h-full w-full",r==="LARGE"?"grid-rows-4":"grid-rows-2"),children:[l.jsx(hEe,{current:s,prefersMetric:t,setPrefersMetric:n}),l.jsx(fEe,{location:a,forecast:o,prefersMetric:t}),r==="LARGE"&&l.jsx(mEe,{forecast:o,prefersMetric:t})]},"success")}),Kjt={action:{type:"CREATE_THREAD",query:"weather",prefer_pro:!1},uuid:"123",type:"WEATHER",current:{temp_c:20,temp_f:68,condition:{text:"Sunny",icon:"sun",code:"sun"}},location:{name:"San Francisco",region:"California",country:"USA"},forecast:[],is_metric_preferred:!1},yEe=A.memo(({size:e="LARGE"})=>{const t=f.useCallback(()=>{},[]);return l.jsxs(Ln,{className:B("relative"),children:[l.jsx("div",{className:"invisible",children:l.jsx(gEe,{data:Kjt,size:e,prefersMetric:!0,setPrefersMetric:t})}),l.jsxs("div",{className:B("gap-sm absolute inset-0 grid h-full w-full",e==="LARGE"?"grid-rows-4":"grid-rows-2"),children:[l.jsxs("div",{className:"gap-sm flex flex-row items-center justify-between",children:[l.jsxs("div",{className:"gap-sm flex flex-row items-center",children:[l.jsx(z,{variant:"offset",className:"shimmer dark:bg-offsetPlus size-4 rounded-full"}),l.jsx(z,{variant:"offset",className:"shimmer dark:bg-offsetPlus h-5 w-12 rounded"})]}),l.jsx(z,{variant:"offset",className:"shimmer dark:bg-offsetPlus h-4 w-20 rounded"})]}),l.jsxs("div",{className:"gap-sm flex flex-row items-baseline justify-between",children:[l.jsx(z,{variant:"offset",className:"shimmer dark:bg-offsetPlus h-3 w-16 rounded"}),l.jsx(z,{variant:"offset",className:"shimmer dark:bg-offsetPlus h-3 w-14 rounded"})]}),e==="LARGE"&&l.jsx("div",{className:B("row-span-3 flex flex-grow justify-between"),children:[1,2,3,4,5].map(n=>l.jsxs("div",{className:"gap-xs flex flex-col items-start",children:[l.jsx(z,{variant:"offset",className:"shimmer dark:bg-offsetPlus size-4 rounded-full"}),l.jsx(z,{variant:"offset",className:"shimmer dark:bg-offsetPlus mt-xs h-3 w-6 rounded"}),l.jsx(z,{variant:"offset",className:"shimmer dark:bg-offsetPlus h-3 w-8 rounded"})]},n))})]})]})});yEe.displayName="WeatherSkeleton";const vEe=A.memo(()=>l.jsx("div",{className:"gap-sm py-md flex size-full flex-col items-center justify-center",children:l.jsxs("div",{className:"gap-xs flex flex-col items-center text-center",children:[l.jsx(be,{icon:ike,size:"lg",className:"opacity-50"}),l.jsx(D,{variant:"tinyRegular",color:"light",className:"mt-sm leading-tight",children:l.jsx(he,{defaultMessage:"Unable to load weather",id:"uwWuSjxDbt"})}),l.jsx(D,{variant:"tinyRegular",color:"ultraLight",className:"leading-tight",children:l.jsx(he,{defaultMessage:"Please try again later",id:"aoWE202GwV"})})]})}));vEe.displayName="WeatherError";const xEe=A.memo(({widget:e,setShowCTA:t,size:n})=>{const{location:r,permissionStatus:s}=Pp(),a=r?.latitude??null,o=r?.longitude??null,{locale:i}=X(),{data:c,isLoading:u,error:d}=Ke({queryKey:[F9,a,o].map(String),queryFn:()=>_me({locale:i,location:r,reason:"weather-homepage-widget"})??e,initialData:e,refetchInterval:1e3*60*5,staleTime:0,refetchOnMount:!0,refetchOnWindowFocus:!0,refetchOnReconnect:!0});return f.useEffect(()=>{s!==void 0&&s!=="granted"&&t(!0)},[s,t]),l.jsx("div",{className:"px-sm pt-xs",children:l.jsx(pEe,{data:c,isLoading:u,error:d,size:n})})});xEe.displayName="WeatherHomepageWidget";const une=e=>Kr(e).with({type:"ANNOUNCEMENT"},()=>"announcement").with({type:"DISCOVER"},()=>"discover_single_page").with({type:"QUERY"},t=>t.prompt.toLowerCase()).with({type:"WEATHER"},()=>"weather_current").with({type:"FINANCE"},()=>"finance_ticker").with({type:"SPORTS"},()=>"sports_game").with({type:"WATCHLIST"},()=>"watchlist").with({type:"MULTIQUERY"},t=>(t.prompt??"Ask").toLowerCase()).with({type:"SPACE"},t=>t.title.toLowerCase()).exhaustive(),Yjt=(e,t,n,r="home")=>{const{trackEvent:s}=Te(),[a,o]=f.useState(!1),i=f.useMemo(()=>{const v=Kr(e).with({type:"ANNOUNCEMENT"},b=>({title:b.title,text:b.text,variant:b.variant})).with({type:"DISCOVER"},b=>({title:b.title})).with({type:"QUERY"},b=>({prompt:b.prompt,query:b.query,uuid:b.uuid,educational_type:b.educational_type})).with({type:"WEATHER"},b=>({location:b.location.name})).with({type:"FINANCE"},b=>({ticker:b.quotes[0].symbol,is_implicit:b.is_implicit??!1})).with({type:"WATCHLIST"},b=>({type:b.watchlist_type})).with({type:"SPACE"},b=>({title:b.title})).otherwise(()=>({})),x=e.action.type==="MULTIQUERY"?e.action.actions.map(b=>({...b,type:b.type.toLowerCase()})):{...e.action,type:e.action.type.toLowerCase()};return{widgetType:e.type.toLowerCase(),widgetName:une(e),widgetCTA:x,widgetLocation:r,widgetSize:`grid_${(e.size??"MEDIUM").toLowerCase()}`,position:t,frontendUUID:n,metadata:v,uuid:e.uuid}},[e,t,n,r]),c=f.useCallback(()=>{a||(s("widget viewed",i),o(!0))},[i,s,a]),u=f.useCallback(()=>{s("widget selected",i)},[i,s]),d=f.useCallback(()=>{s("widget dismissed",i)},[i,s]),m=f.useCallback(()=>{s("widget hovered",i)},[i,s]),h=f.useCallback(v=>{if(e.type!=="MULTIQUERY")return;const x=e.action.actions.find(b=>b.query===v);if(x)return{widgetType:e.type.toLowerCase(),widgetName:une(e),widgetLocation:r,widgetSize:`grid_${(e.size??"MEDIUM").toLowerCase()}`,position:t,frontentUUID:n,metadata:{prompt:e.prompt,query:x.query,uuid:x.uuid??null}}},[e,t,n,r]),p=f.useCallback(v=>{const x=h(v);x&&s("widget selected",x)},[h,s]),g=f.useCallback(v=>{const x=h(v);x&&s("widget hovered",x)},[h,s]),y=f.useCallback(v=>{const x=h(v);x&&s("widget viewed",x)},[h,s]);return f.useMemo(()=>({trackView:c,trackClick:u,trackDismiss:d,trackHover:m,trackMultiQueryClick:p,trackMultiQueryHover:g,trackMultiQueryView:y}),[u,d,m,p,g,y,c])},Qjt=()=>{const{submitQuery:e}=Ta(),t=At(),{openModal:n}=_t(),r=fxe(),{isWindowsApp:s}=Wt(),{setUserInput:a,setShouldTriggerFocus:o}=s1(),{blankStateSuggestions:i}=Xs(),{setSuggestions:c}=qo(),u=Ka(),{onHomepageTitleChange:d}=ljt(),{setFileUploadUpsellTooltipOpen:m}=qo(),{openToast:h}=On(),p=Je(),{hasAccessToProFeatures:g}=Nt(),v=RM({onSuccess:Rn,onError:P=>{h(P,"error",5)},origin:"homepage_primer"}),x=f.useCallback(P=>{const R=Sa();e({rawQuery:P.query,copilotOverride:P.prefer_pro,attachments:P.attachments,collection:null,newFrontendContextUUID:R,promptSource:"homepage_widget",querySource:"homepage_widget",sourcesOverride:["web"],modelPreferenceOverride:P.prefer_pro?"pplx_pro":"turbo",shouldRedirectToBackendUUID:!0})},[e]),b=f.useCallback(P=>{a(P.input_prefix),o(!0),P.suggestions&&P.suggestions.length>0?c(P.suggestions.map(({query:R,submission_query:k})=>({query:R,submission_query:k??void 0}))):P.suggestions&&P.suggestions.length===0&&i[u]&&c(i[u]),P.homepage_tagline&&d(P.homepage_tagline),P.trigger_location_prompt&&v(),P.trigger_file_tooltip&&m(!0),P.trigger_deep_research&&p&&r(fe.ALPHA,ae.RESEARCH),P.trigger_labs&&p&&g&&r(fe.BETA,ae.STUDIO)},[a,o,p,c,i,d,v,m,r,u,g]),_=f.useCallback((P,R)=>{const k=P.find(O=>O.query===R);k&&x(k)},[x]),w=f.useCallback(P=>{t.push(`/page/${P.page_slug}`)},[t]),S=f.useCallback(P=>{s?R2(P):window.open(P,"_blank")},[s]),C=f.useCallback((P,R)=>{const k=P.should_interpolate_template&&R?hfe(P.permalink,R):P.permalink;S(k)},[S]),E=f.useCallback(P=>{s?R2(P.permalink):t.push(P.permalink)},[t,s]),M=f.useCallback(()=>{t.push("/pro")},[t]),T=f.useCallback(P=>{P.deep_research?r(fe.ALPHA):r(fe.PRO)},[r]),I=f.useCallback(P=>{n("watchlistModal",{origin:"home",watchlistType:P.watchlist_type})},[n]),j=f.useCallback(P=>{n("spaceCreate",{existingCollection:null,onCreate:null,content:{title:P.space_title??void 0,description:P.space_description??void 0,instructions:P.space_instructions??void 0,emoji:P.space_emoji??void 0}})},[n]),N=f.useCallback(P=>{P.modal_name&&n(P.modal_name)},[n]);return f.useMemo(()=>({createThreadAction:x,populateInputAction:b,multiQueryCreateThreadAction:_,openPageAction:w,openExternalUrlAction:C,openInternalUrlAction:E,openPaywallAction:M,enableProAction:T,openWatchlistModalAction:I,createSpaceAction:j,openModalAction:N}),[j,x,T,_,C,E,N,w,M,I,b])},Xjt=e=>["ANNOUNCEMENT","QUERY"].includes(e.type),Zjt=A.memo(({onClick:e,onMouseEnter:t,href:n,className:r,children:s,disableHoverAnimation:a=!1})=>{const o=n?JCe:_e.div,i=f.useMemo(()=>({opacity:.5}),[]),c=f.useMemo(()=>({opacity:1}),[]),u=f.useMemo(()=>({scale:.98,transition:{ease:Jn,duration:.15}}),[]),d=f.useMemo(()=>({scale:{ease:Jn,duration:.3},opacity:{ease:pa,duration:.3}}),[]);return l.jsx(o,{initial:i,animate:c,whileHover:a?void 0:{opacity:.75,transition:{duration:.15,ease:$a}},whileTap:u,transition:d,className:B(r,a?"":"cursor-pointer"),href:n,onClick:e,onMouseEnter:t,children:l.jsx(z,{variant:"offset",className:"relative size-full select-none overflow-hidden rounded-lg",children:s})})}),Jjt=A.memo(({widget:e,size:t,position:n,frontendSessionUUID:r,widgetLocation:s="home"})=>{const a="homepage-widget-base",[o,i]=f.useState(!1),[c,u]=f.useState(!1),d=Je(),{showSuggestDropdown:m}=Xs(),{trackView:h,trackHover:p,trackClick:g,trackDismiss:y,trackMultiQueryClick:v,trackMultiQueryHover:x,trackMultiQueryView:b}=Yjt(e,n,r,s),{createThreadAction:_,openPageAction:w,openExternalUrlAction:S,openInternalUrlAction:C,openPaywallAction:E,enableProAction:M,openWatchlistModalAction:T,multiQueryCreateThreadAction:I,populateInputAction:j,createSpaceAction:N,openModalAction:P}=Qjt(),{mutate:R}=hZe({widget:e,reason:a}),k=oi(),O=Ot(),L=f.useMemo(()=>({email:O?.user?.email??"",deviceId:k?.device_id??"",browserVersion:k?.browser_version??"",osName:void 0??""}),[O?.user?.email,k?.device_id,k?.browser_version]),U=(q=>Kr(q).with({type:"CREATE_THREAD"},Z=>`/search/new?q=${Z.query}&source=homepage_widget`).with({type:"OPEN_PAGE"},Z=>`/page/${Z.page_slug}`).with({type:"EXTERNAL_URL"},Z=>Z.should_interpolate_template?hfe(Z.permalink,L):Z.permalink).with({type:"INTERNAL_URL"},Z=>Z.permalink).otherwise(()=>{}))(e.action),V=f.useRef(!1);f.useEffect(()=>{if(!V.current){if(e.type!=="MULTIQUERY")h();else for(const q of e.queries)b(q);V.current=!0}},[h,e,b]);const W=Uj(e),H=f.useCallback(q=>{U&&q.preventDefault(),Kr(e.action).with({type:"CREATE_THREAD"},Z=>{_(Z)}).with({type:"OPEN_PAGE"},Z=>w(Z)).with({type:"EXTERNAL_URL"},Z=>S(Z,L)).with({type:"PAYWALL"},E).with({type:"INTERNAL_URL"},Z=>C(Z)).with({type:"ENABLE_PRO"},Z=>M(Z)).with({type:"OPEN_WATCHLIST_MODAL"},Z=>T(Z)).with({type:"MULTIQUERY"},()=>{}).with({type:"POPULATE_INPUT"},Z=>{j(Z)}).with({type:"CREATE_SPACE"},Z=>{N(Z)}).with({type:"OPEN_MODAL"},Z=>{P(Z)}).exhaustive(),Xjt(e)&&e.dismissable&&d&&(R(),y()),e.type!=="MULTIQUERY"&&g()},[U,e,E,d,_,w,S,L,C,M,T,N,j,R,y,g,P]),G=f.useCallback(()=>{e.type!=="MULTIQUERY"&&p()},[e.type,p]),K=f.useMemo(()=>Kr(e).with({type:"ANNOUNCEMENT"},q=>l.jsx(qCe,{widget:q,size:t})).with({type:"DISCOVER"},q=>l.jsx(KCe,{widget:q,size:t})).with({type:"QUERY",educational_type:"primer"},q=>l.jsx(nEe,{widget:q,onClick:H,onMouseEnter:G,index:n})).with({type:"QUERY",educational_type:"project"},q=>l.jsx(rEe,{widget:q})).with({type:"QUERY"},q=>l.jsx(RU,{widget:q,size:t})).with({type:"WEATHER"},q=>l.jsx(xEe,{widget:q,setShowCTA:u,size:t})).with({type:"FINANCE"},q=>l.jsx(XCe,{widget:q,size:t})).with({type:"SPORTS"},q=>l.jsx(lEe,{widget:q,size:t})).with({type:"WATCHLIST"},q=>l.jsx(zjt,{widget:q,size:t})).with({type:"SPACE"},q=>l.jsx(sEe,{widget:q,size:t})).with({type:"MULTIQUERY"},q=>l.jsx(tEe,{widget:q,onQueryClick:Z=>{I(q.action.actions,Z),v(Z)},onQueryHover:Z=>x(Z)})).otherwise(()=>(ee.error(new Error(`No HomepageWidget found for type: ${e.type}`)),null)),[e,t,H,G,n,I,v,x]),$=f.useMemo(()=>Kr(e.type).with("WEATHER",()=>l.jsx(QCe,{setShowCTA:u})).otherwise(()=>null),[e.type]);return!K||m?null:l.jsxs("div",{className:B("relative",_jt[t]),onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[W?K:l.jsx(Zjt,{href:U,onClick:H,onMouseEnter:G,className:"size-full",disableHoverAnimation:e.type==="MULTIQUERY",children:K}),l.jsx(st,{children:c&&o&&l.jsx(_e.div,{initial:{opacity:.5},animate:{opacity:1},exit:{opacity:0},transition:{scale:{ease:Jn,duration:.2},opacity:{ease:pa,duration:.2}},className:B("bg-offset/60 absolute inset-0 flex justify-center rounded-lg p-[12px]",t==="LARGE"?"items-end":"items-center"),children:$})})]})});let dne=1234567;function e8t(e){e!==void 0&&(dne=e);let t=dne+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}const t8t=5,n8t=f.memo(({children:e})=>l.jsx("div",{className:"gap-sm grid grid-cols-6",style:{gridTemplateRows:"repeat(auto-fit, 64px)",gridAutoRows:"64px"},children:e})),r8t=({children:e})=>l.jsx("div",{className:"gap-sm flex h-[32px] flex-row flex-wrap justify-center overflow-hidden",children:e}),s8t=e=>{switch(e){case 0:return l.jsx(he,{defaultMessage:"See what Comet can do",id:"TO5vylizup"});case 1:return l.jsx(he,{defaultMessage:"Projects created with Perplexity",id:"6XX3tVQOXy"})}},a8t=e=>{switch(e){case 0:return l.jsx(dl,{size:16});case 1:return l.jsx(lS,{size:16})}},o8t=({variant:e,children:t})=>{const n=gt(),r=X(),s=f.useCallback(()=>{n.invalidateQueries({queryKey:[Lv]})},[n]);return e?l.jsxs("div",{children:[l.jsxs("div",{className:"gap-sm pb-sm flex items-center justify-between",children:[l.jsxs("div",{className:"gap-xs flex flex-row items-center",children:[l.jsx(D,{variant:"smallBold",color:"super",children:a8t(e)}),l.jsx(D,{variant:"smallBold",color:"light",children:s8t(e)})]}),l.jsx("div",{children:l.jsx(ke,{size:"tiny",onClick:s,text:r.formatMessage({defaultMessage:"See more",id:"yoLwRWw99S"}),icon:Nre})})]}),t]}):t},i8t=f.memo(({widgets:e,widgetLocation:t="home"})=>{const n=f.useMemo(()=>Sa(),[]),r=WJe(),s=e.length>0;f.useEffect(()=>{s&&r("web.frontend.homepage_widgets_ttv")},[r,s]);const{flexWidgets:a,gridWidgets:o,headingVariant:i}=f.useMemo(()=>{const d=e.filter(Uj).sort((p,g)=>e8t(p.seed)-.5).slice(0,t8t),m=e.filter(p=>!Uj(p)),h=wjt(e)?0:Sjt(e)?1:void 0;return{flexWidgets:d,gridWidgets:m,headingVariant:h}},[e]),c=f.useCallback(u=>u.map((d,m)=>l.jsx(Jjt,{widget:d,size:d.size??"MEDIUM",position:m,frontendSessionUUID:n,widgetLocation:t},d.uuid)),[n,t]);return l.jsx(st,{initial:!1,children:l.jsx(o8t,{variant:i,children:l.jsxs("div",{className:"gap-md grid grid-cols-1",children:[a.length>0&&l.jsx(r8t,{children:c(a)}),o.length>0&&l.jsx(n8t,{children:c(o)})]})})})}),l8t=f.memo(()=>{const e="homepage-widgets-wrapper",{locale:t}=X(),n=Je(),r=f.useMemo(()=>{if(!n)return dZe(tn(),Gj(),t)},[n,t]),s=Ka(),a=f.useMemo(()=>s!==ae.STUDIO?{}:{searchMode:ae.STUDIO},[s]),{data:o}=Ke({queryKey:[Lv],queryFn:()=>fZe({urlPath:r,params:a,reason:e}),gcTime:1/0}),i=gt(),c=f.useRef(!1);return f.useEffect(()=>{if(!c.current){c.current=!0;return}i.invalidateQueries({queryKey:[Lv]})},[i,a]),o?l.jsx(i8t,{widgets:o}):null}),c8t=f.memo(()=>{const{isHomepageWidgetsDisabled:e}=hn();return e?null:l.jsx(Zs,{children:l.jsx("div",{className:"animate-in fade-in duration-300",children:l.jsx(l8t,{})})})}),bEe=A.memo(({show:e,icon:t,text:n,variant:r="offset"})=>l.jsx(st,{children:e&&l.jsx(_e.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:[.16,1,.3,1]},style:{overflow:"hidden"},children:l.jsxs(z,{variant:r,className:"p-sm gap-sm flex items-center rounded-t-2xl",children:[t,l.jsx("div",{className:"flex-1",children:n})]})})}));bEe.displayName="AskInputEducationalHeader";const u8t=()=>{const e=Is(),{value:t}=Ut({flag:"user-education-long-query",defaultValue:!1,subjectType:"visitor_id",extraAttributes:{queryCount:String(a4e())},skip:e});return t},_Ee=A.memo(()=>{const e=u8t(),t=r7(),n=f.useMemo(()=>t?.length>5&&t?.length<100,[t]),r=f.useMemo(()=>l.jsxs(D,{variant:"tiny",children:[l.jsx(D,{inline:!0,variant:"tinyBold",as:"span",children:l.jsx(he,{defaultMessage:"Try adding more detail: ",id:"F1iv3quHId"})}),l.jsx(he,{defaultMessage:"Perplexity works better when you give more context or share your goals",id:"q5qPv0neSZ"})]}),[]),s=f.useMemo(()=>l.jsx(be,{icon:lke,size:"md",className:"text-super"}),[]);return l.jsx(bEe,{show:e&&n,icon:s,text:r})});_Ee.displayName="AskInputLongQueriesEducationalHeader";const d8t=["sso"],IM=A.memo(()=>l.jsxs("div",{className:"flex flex-row items-center",children:[l.jsx(Wa,{variant:"mark",color:"foreground",size:"small"}),l.jsx("div",{className:"ml-2",children:l.jsx(Wa,{variant:"text",color:"foreground",size:"small"})})]}));IM.displayName="PerplexityLogo";const f8t=A.memo(({headerTextLineOne:e="Get answers, not links.",headerTextLineTwo:t="Search smarter today.",modalOrigin:n=Be.MARKETING_LANDING_PAGE})=>{const{isMobileStyle:r}=Ce(),[s,a]=f.useState("");return f.useEffect(()=>{typeof window<"u"&&a(MC(window.location.origin,mc,n))},[n]),l.jsxs("div",{className:"px-lg py-xl flex min-h-screen flex-col items-center justify-between overflow-y-auto",children:[l.jsx(IM,{}),l.jsxs("div",{className:"py-2xl flex flex-col items-center justify-center",children:[e&&l.jsx(D,{variant:r?"entry-title":"display",color:"default",className:"text-center",children:e}),t&&l.jsx(D,{variant:r?"entry-title":"display",color:"default",className:"text-center",children:t}),l.jsx(D,{variant:"base",color:"light",className:"mt-4 max-w-[400px] text-center",children:l.jsx(he,{defaultMessage:"Join millions who have switched to Perplexity, the modern search engine.",id:"n7AYVi1U68"})}),l.jsx(Ov,{autoFocus:!0,redirectUrl:s,showInternal:!0,className:"mt-xl w-full",disallowedMethods:d8t})]}),l.jsxs(D,{variant:"small",color:"light",children:[" ",new Date().getFullYear()," Perplexity AI"]})]})});f8t.displayName="MainContent";ge(()=>oe(()=>import("./AppDownloadQR-DGwMx9Hs.js"),__vite__mapDeps([98,1,2])),{loading:()=>l.jsx(ghe,{})});const m8t=({displayAs:e,className:t,allowBgImage:n=!0})=>{const r=["/static/images/app-icons/nasa.png","/static/images/app-icons/jungle.png","/static/images/app-icons/flower.png","/static/images/app-icons/sf.png","/static/images/app-icons/books.png","/static/images/app-icons/cat.png"],s=f.useMemo(()=>r[Math.floor(Math.random()*r.length)],[]);return l.jsxs("div",{className:B("bg-dark relative inline-flex aspect-square size-20 items-center justify-center overflow-hidden shadow-lg",{"p-md rounded-[20px]":e==="ios","p-md rounded-full":e==="android"},t),children:[n&&l.jsx("img",{className:B("absolute inset-0 opacity-50 duration-150"),src:s,suppressHydrationWarning:!0,alt:""}),l.jsx("div",{className:"relative flex items-center justify-center",children:l.jsx(Wa,{variant:"mark",size:"md",color:"white"})}),l.jsx("div",{className:"rounded-inherit absolute inset-0 border border-black/20 dark:border-white/10"})]})},h8t=({ratingsCount:e})=>l.jsxs("div",{className:"gap-sm flex items-center",children:[l.jsx("div",{className:"flex items-center",children:[...Array(5)].map((t,n)=>l.jsx(be,{icon:Cm,size:16,className:"text-super"},`rating-star-full-${n}`))}),l.jsx("div",{children:e&&l.jsxs(D,{variant:"tiny",color:"light",className:"flex items-end text-center",children:[e," Ratings"]})})]}),wEe=A.memo(({campaignData:e,dismiss:t,translated:n})=>{const r="reviews",{isIOS:s}=Wt(),[a,o]=f.useState(!!n),[i,c]=f.useState(e),{trackEvent:u}=Te();f.useEffect(()=>{if(n)return;(async()=>{const v=await pCe({originalContent:e,keysToTranslate:["title_1","subtext_1","button_text"],reason:r});c(v),o(!0)})()},[e,n]),f.useEffect(()=>{u("mweb splash page viewed",{})},[u]);const{title_1:d,subtext_1:m,button_text:h,button_link:p}=i,g=f.useCallback(()=>{u("app download button selected",{downloadAppDestination:"mobile",origin:"marketingLandingPage"}),aS(),window.open(p,"_blank")},[p,u]);return l.jsxs("div",{className:B("px-lg pt-lg pb-lg fixed inset-0 mb-auto flex h-full flex-col items-center justify-between overflow-y-auto"),children:[t&&l.jsx("div",{className:"right-sm top-sm absolute",children:l.jsx(ke,{pill:!0,variant:"noBackground",size:"small",icon:Xt,extraCSS:"text-foreground md:hover:text-quiet ",onClick:t})}),l.jsx(IM,{}),l.jsxs("div",{className:"flex flex-col items-center gap-4",children:[l.jsx(m8t,{displayAs:s?"ios":"android",allowBgImage:!1}),l.jsxs("div",{className:B("flex flex-col items-center"),children:[l.jsx(st,{children:a?l.jsxs(_e.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},className:"flex flex-col items-center",children:[l.jsx(D,{variant:"entry-title",color:"default",textCenter:!0,children:d}),l.jsx(D,{variant:"base",color:"light",textCenter:!0,className:"mt-4 max-w-[400px]",children:m})]}):l.jsxs("div",{className:"invisible flex flex-col items-center",children:[l.jsx(D,{variant:"entry-title",color:"default",textCenter:!0,children:e.title_1}),l.jsx(D,{variant:"base",color:"light",textCenter:!0,className:"mt-4 max-w-[400px]",children:e.subtext_1})]})}),l.jsx("div",{className:"mt-4",children:l.jsx(h8t,{ratingsCount:"149K"})})]})]}),l.jsx("div",{className:"flex w-full flex-col items-center",children:l.jsx(st,{children:a?l.jsx(_e.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},className:"flex w-full flex-col items-center",children:l.jsx(ye,{variant:"inverted",size:"large",text:h,icon:s?a8:o8,fullWidth:!0,extraCSS:"max-w-xs rounded-xl mx-auto",onClick:g})}):l.jsx("div",{className:"invisible flex w-full flex-col items-center",children:l.jsx(ye,{variant:"inverted",size:"large",text:e.button_text})})})})]})});wEe.displayName="Reviews";const SEe=A.memo(({dismiss:e})=>{const t=e1({origin:"mweb-splash"}),n=f.useMemo(()=>l.jsx(he,{id:"Wpt2mdD04V",defaultMessage:"Chat now"}),[]);return l.jsxs("div",{className:B("px-lg pt-lg pb-lg fixed inset-0 mb-auto flex h-full flex-col items-center justify-between overflow-y-auto"),children:[l.jsx("div",{className:"right-sm top-sm absolute",children:l.jsx(ke,{pill:!0,variant:"noBackground",size:"small",icon:Xt,extraCSS:"text-foreground md:hover:text-quiet ",onClick:e})}),l.jsx(IM,{}),l.jsxs("div",{className:"flex flex-col items-center gap-4",children:[l.jsx("div",{className:"aspect-square size-20 overflow-hidden rounded-full shadow-lg",children:l.jsx("img",{src:"https://r2cdn.perplexity.ai/whatsapp.jpg",alt:"WhatsApp"})}),l.jsxs("div",{className:B("flex flex-col items-center"),children:[l.jsx(D,{variant:"entry-title",color:"default",textCenter:!0,children:l.jsx(he,{id:"2WQt3MyLfa",defaultMessage:"Ask anything, anywhere"})}),l.jsx(D,{variant:"base",color:"light",textCenter:!0,className:"mt-4 max-w-[400px]",children:l.jsx(he,{id:"ZTpOAItHHA",defaultMessage:"We're on WhatsApp"})}),l.jsx(D,{variant:"smallMono",color:"super",textCenter:!0,className:"mt-4",children:l.jsx(he,{id:"b0JEE9uTQq",defaultMessage:"+1 (833) 436-3285"})})]})]}),l.jsx("div",{className:"flex w-full flex-col items-center",children:l.jsx(ye,{variant:"inverted",size:"large",onClick:t,icon:s8,text:n})})]})});SEe.displayName="WhatsAppInterstitial";const p8t=1;function g8t({}){const[e,t]=f.useState(!1),{actions:n}=hn(),{trackEvent:r}=Te(),{$t:s}=X(),a=()=>{t(!1),n.setIsSplashPageDismissed(!0,p8t),r("mweb splash page dismissed",{}),document.head.querySelector("[name='theme-color']")?.remove()},{mwebUpsellWhatsApp:o,loadingMwebUpsellWhatsApp:i}=t1();f.useEffect(()=>{i||t(!0)},[i]);const c=f.useMemo(()=>({title_1:s({defaultMessage:"Start searching with AI",id:"xADWoMp8Ck"}),subtext_1:s({defaultMessage:"It's better in the app.",id:"E7ck+HTwLo"}),button_text:s({defaultMessage:"Download now",id:"OmsvLbYdpQ"}),button_link:"http://perplexity.ai/download"}),[s]);return l.jsx("div",{className:B("bg-base fixed inset-0 flex size-full flex-grow flex-col md:hidden"),children:l.jsx(dL,{open:e,children:l.jsx(st,{mode:"wait",children:l.jsx(fL,{children:l.jsxs(aC,{children:[l.jsxs(uO,{children:[l.jsx(oC,{children:s({defaultMessage:"Know it all",id:"F6NJO530sQ"})}),l.jsx(mL,{children:s({defaultMessage:"Search and discover with AI",id:"ydYv4/6Poi"})})]}),l.jsx(_e.div,{animate:{opacity:1},id:"splash-screen-content",initial:{opacity:0},exit:{opacity:0},children:l.jsx("div",{className:B("bg-base fixed inset-0 flex size-full flex-grow flex-col","z-10"),children:o?l.jsx(SEe,{dismiss:a}):l.jsx(wEe,{dismiss:a,campaignData:c,translated:!0})})},"splash-screen-content")]})})})})})}function CEe(){const{isSplashPageDismissed:e}=hn(),t=FOe(),{isMobileUserAgent:n}=Ce(),r=Je(),s=Pt(),a=Ht(),o=YO(),i=s==="/"&&(a===null||a.size===0);return!(!n||r||e||!i||t||o||eh())}function y8t({}){return CEe()?l.jsx(g8t,{}):null}const v8t=({reason:e})=>{const t=gt(),n=Ht(),r=n?.get("stripe_checkout"),s=n?.get("is_enterprise")==="true",{trackEvent:a}=Te(),o=r!=null,i=r==="success";f.useEffect(()=>{o&&s&&(async()=>{try{const[u,d]=await Promise.all([i?t.fetchQuery({queryKey:["refresh-org-subscription-status"],queryFn:()=>ode({reason:e})}):null,t.fetchQuery({queryKey:["user-org-data"],queryFn:()=>xC({reason:e})})]),m=d?.organization?.uuid;m!=null&&m!==void 0&&a("org payment portal returned",{stripeResult:r??"",orgUUID:m??"",source:n?.get("origin")??""})}catch(u){ee.log("Failed to refresh org subscription:",u)}})()},[])},x8t=()=>{const e=f.useRef(!1),t=ms(),n=Je(),{openVisitorLoginUpsell:r}=$n({enabled:!n}),{data:s}=G9({enabled:t&&!e.current}),a=FC(s??void 0);f.useEffect(()=>{e.current||t&&s&&s.app_location===Vc.MODAL&&(a(),e.current=!0)},[t,n,r,s,a])},S6=vt({[b8e]:{id:"Sj7bs8Ti07",defaultMessage:"Sign in with your school email to unlock one month free of Perplexity Pro"},[_8e]:{id:"8MOEZchxNH",defaultMessage:"Sign in with your USC email to unlock one month free of Perplexity Pro"},[w8e]:{id:"4d/Zn7HZQx",defaultMessage:"Sign in with your UC Berkeley email to unlock one month free of Perplexity Pro"},[S8e]:{id:"DXeXI7X4DZ",defaultMessage:"Sign in with your IITM email to unlock one year free of Perplexity Pro"},[C8e]:{id:"sBfq8LkRp0",defaultMessage:"Sign in with your ac.kr email to unlock one year free of Perplexity Pro"}}),b8t=()=>{const e=Ht(),{$t:t}=X(),{openModal:n}=_t(),{userAgent:r}=Wt(),[s,a]=f.useState(!1),o=Je(),{trackEvent:i}=Te(),{openVisitorLoginImageUpsell:c}=$n({enabled:!0});f.useEffect(()=>{if(typeof window>"u")return;const u=e?.get(x8e),d=[];if(e?.get(B$)&&(d.push(B$),n("onboardingModal",{userAgent:r})),e?.get(V$)&&(d.push(V$),i("default search extension uninstalled",{isBrowserExtension:!0})),e?.get(W$)&&(d.push(W$),n("pricingModal",{origin:Be.MAX_URL_PAYWALL,pitchMessage:{title:t({defaultMessage:"Introducing Perplexity Max",id:"v1bpoVO4Rq"}),description:t({defaultMessage:"Maximize your curiosity with unlimited access to Perplexity Labs",id:"AX3/N9NedQ"})}})),u&&XOe(u),!s&&(e?.get(v8e)||u&&S6[u])){if(o)return;a(!0);const m=u&&S6[u]?t(S6[u]):t({defaultMessage:"Sign in with your school email to unlock one month free of Perplexity Pro",id:"Sj7bs8Ti07"});c({origin:Be.BACK_TO_SCHOOL,title:m,image:M8e,imageAlt:T8e,loginButtonsStyle:"highlightBackToSchool"})}if(d.length>0){const m=Array.from(e?.entries()??[]).filter(([p])=>!d.includes(p)),h=new URLSearchParams;m.forEach(([p,g])=>{h.set(p,g)}),kp(Object.fromEntries(m))}},[e,n,r,s,o,t,i,c])},_8t=()=>{const e=Je(),{openModal:t}=_t(),{$t:n}=X(),{openVisitorLoginUpsell:r}=$n({enabled:!0}),s=f.useCallback(a=>{if(ee.info("Thread access not allowed",{uuidOrSlug:a,isUserLoggedIn:e}),e)t("requestAccessModal",{uuidOrSlug:a});else{const o=`${window.location.origin}/search/${a}`;r({origin:Be.REQUEST_ACCESS_LOGIN_GATE,title:n({defaultMessage:"This thread is private",id:"PX12OU86rT"}),description:n({defaultMessage:"Sign in if you are the owner of this thread, or to request access",id:"/A9MF2B0ub"}),sheetModalVariant:"centered-sheet",overrideRedirectUrl:o})}},[n,e,t,r]);return f.useMemo(()=>({handleRequestAccess:s}),[s])},w8t="https://services.sheerid.com/verify",S8t="681d40e03e7a8077098cb1b6",C8t="685b438c24925a24c23ef56f",E8t="68a6465511f17709c2395bc2",M8t="68a6466f11f17709c2395d7c",fne={prod:{student:S8t,educator:E8t},test:{student:C8t,educator:M8t}},T8t="referral_code",EEe="externalUserId",k8t="sheerid_url",N8t="verificationId";function dzt(e){const{verificationType:t,userId:n,referralCode:r,hostname:s}=e,i=(!s||Ale(s)||Cle(s)?fne.prod:fne.test)[t],c=new URL(`${w8t}/${i}/`);return c.searchParams.set(EEe,n),r&&c.searchParams.set(T8t,r),c}const A8t=e=>{if(e==="pro"||e==="max")return e},MEe=({confirmationRedirectsToHomepage:e}={})=>{const t=Ht(),n=t?.get("stripe_checkout"),r=t?.get("upsell"),s=t?.get("flow_type"),a=t?.get("upgrade_max"),o=t?.get("subscription_tier"),{openModal:i}=_t(),{formatMessage:c}=X(),d=Ot()?.user?.id,m=t?.get(EEe),h=t?.get(N8t),p=t?.get(k8t),g=f.useCallback(()=>{const C=s??"unknown",E=a==="success",M=A8t(o);i("subSuccessModal",{flowType:C,upgradeMax:E,subscriptionTier:M,confirmationRedirectsToHomepage:e})},[s,i,a,o,e]),y=f.useCallback(({isTasksAutomationsRenameEnabled:C})=>{KOe(!0),i("pricingModal",{origin:Be.TASKS_PAGE,pitchMessage:C?{title:c({defaultMessage:"Want to use Perplexity Automations?",id:"uujTvYgZRp"}),description:c({defaultMessage:"Upgrade to Pro to create and manage automations.",id:"9vQrVenMdj"})}:{title:c({defaultMessage:"Want to use Perplexity Tasks?",id:"u3CPeNV09q"}),description:c({defaultMessage:"Upgrade to Pro to create and manage tasks.",id:"oUsys+n/zQ"})}})},[c,i]),v=f.useCallback(C=>{i("referralSuccessModal",{monthsAwarded:C})},[i]),x=f.useCallback(async()=>{const C=await PJe({verificationId:h,reason:"referral-success-modal"});v(C.months_awarded)},[h,v]),b=f.useCallback(()=>{const C=setTimeout(()=>{i("referralErrorModal",null)},1e3);return()=>clearTimeout(C)},[i]),_=f.useCallback(()=>{p&&i("sheerIdRedirectModal",{sheerIdUrl:p.toString()})},[i,p]),{variation:w,loading:S}=Mf(!1);f.useEffect(()=>{(n==="success"||a==="success")&&g(),r==="tasks"&&(S||y({isTasksAutomationsRenameEnabled:w})),p&&_(),h&&(!!m&&!!h&&m===d?x():b())},[d,n,r,m,h,p,a,g,y,v,b,_,x,w,S])};var Io={};const P8t=vt({threadAccessNotAllowed:{defaultMessage:"Cannot view this thread.",id:"PWzBFTUMYQ"},threadExpired:{defaultMessage:"This thread is expired and cannot be viewed.",id:"kxDY3MhDfI"},invalidThread:{defaultMessage:"This thread does not exist.",id:"mTtce3cuRp"},threadStreamError:{defaultMessage:"Unable to start thread.",id:"d3yfUXi5SD"},pageAccessNotAllowed:{defaultMessage:"Cannot view this page.",id:"2AsVl5rMny"},spaceAccessNotAllowed:{defaultMessage:"Cannot view this Space.",id:"kUZg0JvZI+"},subscriptionAlreadyActive:{defaultMessage:"Unable to apply discount code to an active subscription.",id:"o2MqqftZuL"},unableToGrantAccess:{defaultMessage:"Unable to make this thread shareable, ensure you are logged in as the owner of the thread.",id:"F8a+v/zyZO"},collectionAccessNotAllowed:{defaultMessage:"Cannot view this collection.",id:"miGPZEm/qm"},invalidCollection:{defaultMessage:"This collection does not exist.",id:"IKZz6s6MYd"}}),R8t=ge(async()=>{const{CDN:e}=await oe(async()=>{const{CDN:t}=await import("./cdn-C8d6_FM1.js");return{CDN:t}},__vite__mapDeps([130,1,2,5,4,3]));return{default:e,critical:!0}}),TEe=A.memo(function(){const t="home-ask-input",[n,r,s]=JC({csrRedirect:!0}),{isMobileStyle:a}=Ce(),{currentOpenedModal:o}=_t(),i=Ht(),c=CEe(),d=f.useMemo(()=>i?.get("openSearchModeSelector"),[i])==="true",{mentionTypeaheadOptions:m,inputPlaceholder:h,onTriggerTypeahead:p}=MF({reason:t,isLazy:!0}),g=f.useMemo(()=>l.jsx(_Ee,{}),[]);return l.jsxs(l.Fragment,{children:[l.jsx(JE,{...s,value:n,json:r,querySource:"home",autofocus:!a&&o===null&&!c&&!d,initialLayout:Io.NEXT_PUBLIC_IS_SIDECAR_BUILD?"compact":"expanded",minRows:Io.NEXT_PUBLIC_IS_SIDECAR_BUILD?1:2,hasShadow:!0,showFileUpload:!0,showIncognitoHint:!0,showSources:!Io.NEXT_PUBLIC_IS_SIDECAR_BUILD,autosuggestionsEnabled:!Io.NEXT_PUBLIC_IS_SIDECAR_BUILD,dropdownPlacement:Io.NEXT_PUBLIC_IS_SIDECAR_BUILD||a?"top":"bottom",headerComponent:g,dropdownClassName:Io.NEXT_PUBLIC_IS_SIDECAR_BUILD||a?"shadow-[0_-30px_30px_oklch(var(--background-base-color))]":void 0,useLexical:!0,mentionTypeaheadOptions:m,placeholder:h??s.placeholder,onTriggerTypeahead:p,layoutKey:"home-ask-input",disableModeSelector:!!Io.NEXT_PUBLIC_IS_SIDECAR_BUILD}),l.jsx(R8t,{})]})});TEe.displayName="HomeAskInput";const kEe=A.memo(function(){const{$t:t}=X(),{hasAccessToProFeatures:n}=Nt(),r=Je(),{actions:{clearCurrentStreamId:s,clearCurrentThreadId:a}}=zt(),{isIOS:o}=Wt(),{isMobileUserAgent:i,isMobileStyle:c}=Ce(),[u,d]=f.useState(null),{openModal:m}=_t(),{handleRequestAccess:h}=_8t(),{trackEvent:p}=Te(),g=Ht(),{mwebUpsellWhatsApp:y,loadingMwebUpsellWhatsApp:v}=t1(),{handleAppDownloadClicked:x}=J0("mobile-header"),b=e1({origin:"mobile-header"});x8t();const{isLocalhost:_}=pc(),w=tn(),{openVisitorLoginUpsell:S}=$n({enabled:!0}),C=f.useRef(null),E=f.useMemo(()=>g?.get("error"),[g]),M=f.useMemo(()=>g?.get("id"),[g]),T=hn(),I=f.useRef(!1),j=f.useMemo(()=>!!(g?.get(mc)||g?.get(E8e)==="deep_research"),[g]);MEe({confirmationRedirectsToHomepage:!0}),v8t({reason:"search-inner-home"}),b8t(),f.useEffect(()=>{s(),a()},[s,a]),f.useEffect(()=>{I.current||T.welcomeBackGateImpressions>=CO||w||r||i||_||qj()&&Kj()&&(S({origin:Be.WELCOME_BACK,title:t({defaultMessage:"Welcome back!",id:"0MXX5Bf7Ca"}),description:t({defaultMessage:"Log in to continue your journey.",id:"lSkVbenSxm"}),sheetModalVariant:"centered-sheet"}),I.current=!0,T.actions.setWelcomeBackGateImpressions(T.welcomeBackGateImpressions+1))},[w,_,i,r,m,t,T.welcomeBackGateImpressions,T.actions,S]),f.useEffect(()=>{if(E){const k=E,O=M;k===Pd.ThreadAccessNotAllowed&&O?h(O):(ee.info("Error redirect",{errorQueryParam:E}),d(t(P8t[k]))),qZe()}},[E,h,M,m,t]);const N=f.useCallback(()=>{if(y){b();return}p("app download button clicked",{origin:"mobile-header"}),x()},[x,b,y,p]),P=f.useMemo(()=>({homepageTitle:t({defaultMessage:"What do you want to know?",id:"CMjGvpa5Fr"})}),[t]),R=f.useMemo(()=>y?s8:o?a8:o8,[y,o]);return l.jsxs(l.Fragment,{children:[l.jsx(n1,{childrenWidth:Io.NEXT_PUBLIC_IS_SIDECAR_BUILD?"none":"default",mobileHeader:!1,children:l.jsxs("div",{className:"erp-sidecar:px-md sm:px-md md:px-lg isolate mx-auto size-full sm:max-w-screen-md",children:[l.jsxs("div",{className:"relative flex h-full flex-col",children:[l.jsxs(z,{className:"py-md h-headerHeight flex items-center justify-between border-b md:hidden",children:[l.jsxs("div",{className:"gap-x-xs -ml-sm flex items-center",children:[l.jsx(q9,{}),l.jsx(Wa,{color:"mixed",isPro:n,size:"small"})]}),l.jsx("div",{className:"gap-x-sm flex items-center",children:i&&!v&&l.jsx(rc,{isSamsungBrowser:!0,isComet:!0,isFirefoxDefaultSearch:!0,children:l.jsx("div",{className:"animate-in fade-in duration-300",children:l.jsx(ye,{size:"small",icon:R,text:t(y?{defaultMessage:"Chat in WhatsApp",id:"jXqSBQcpKC"}:{defaultMessage:"Open in App",id:"fo3x6hDxdZ"}),pill:!0,variant:"primary",onClick:N})})})})]}),l.jsx(ajt,{initialValue:P,children:l.jsxs(z,{className:B("static w-full grow flex-col items-center justify-center md:mt-0 md:flex","z-10"),ref:C,children:[l.jsx("div",{className:"px-md relative flex size-full flex-col justify-center md:h-auto md:px-0",children:l.jsx(GCe,{})}),l.jsxs(Jd,{children:[l.jsx("div",{className:B("w-full",{"bottom-md absolute":!!Io.NEXT_PUBLIC_IS_SIDECAR_BUILD||c,"bottom-md mb-md animate-in fade-in fill-mode-both slide-in-from-bottom absolute delay-200 duration-300 ease-in-out":!!Io.NEXT_PUBLIC_IS_SIDECAR_BUILD}),children:l.jsx(TEe,{})}),!i&&l.jsx("div",{className:"relative w-full",children:l.jsx("div",{className:"mt-lg absolute w-full",children:l.jsx(c8t,{})})})]})]})})]}),l.jsx(_u,{isVisible:u!=null,variant:"error",message:u,timeout:7})]})}),j&&l.jsx(PU,{}),!Io.NEXT_PUBLIC_IS_SIDECAR_BUILD&&l.jsx(rc,{isSamsungBrowser:!0,isFirefoxDefaultSearch:!0,isPartnershipCampaign:!0,children:l.jsx(y8t,{})})]})});kEe.displayName="Home";const I8t={activeStreamingThreads:[],entries:{},refreshState:()=>{},queuedThreadParams:[],enqueueThreadParams:()=>{},cancelQueuedThread:()=>{}},NEe=f.createContext(I8t),mne=5,j8t=({children:e})=>{const t=Ma(),{submitQuery:n}=Ta(),[r,s]=f.useState([]),a=f.useCallback(x=>{n({newFrontendContextUUID:x.newFrontendContextUUID||ar(),rawQuery:x.query,attachments:x.attachments,promptSource:"user",querySource:"internal",mentions:x.mentions,collection:null,cometIsMissionControl:!0})},[n]),[o,i]=f.useState(()=>t.getState()),c=f.useCallback(()=>{i(t.getState())},[t]);f.useEffect(()=>t.subscribe(b=>{i(b)}),[t]);const{activeStreams:u,streams:d,threads:m,entries:h}=o,p=f.useMemo(()=>pbe({activeStreams:u,streams:d,threads:m,entries:h}),[u,d,m,h]);f.useEffect(()=>{if(p.length<mne&&r.length>0){const x=r[0];s(b=>b.slice(1)),a(x)}},[p.length,a,r]);const g=f.useCallback(x=>{p.length<mne?a(x):s(b=>b.concat([{...x,newFrontendContextUUID:ar()}]))},[p.length,a]),v={activeStreamingThreads:p,entries:h,refreshState:c,queuedThreadParams:r,enqueueThreadParams:g,cancelQueuedThread:x=>{s(b=>b.filter(_=>_.newFrontendContextUUID!==x))}};return l.jsx(NEe.Provider,{value:v,children:e})},fzt=()=>{const e=f.useContext(NEe);if(!e)throw new Error("useUserInput must be used within UserInputProvider");return e},O8t=ge(async()=>{const{MissionControlPage:e}=await oe(async()=>{const{MissionControlPage:t}=await import("./MissionControlPage-DX0-RLpT.js");return{MissionControlPage:t}},__vite__mapDeps([131,1,2,3,4,132,133,5,134,80,77,70,20,135]));return{default:e}}),AEe=A.memo(()=>l.jsx(jqe,{children:l.jsx(j8t,{children:l.jsx(O8t,{})})}));AEe.displayName="MissionControlPageComponent";const L8t=(e,t,n)=>{const r=f.useRef(!1),{submitQuery:s}=Ta(),a=At(),o=Dme();f.useLayoutEffect(()=>{r.current=!1},[t]),f.useLayoutEffect(()=>{const c=new URL(window.location.href).searchParams,u=c.get("copilot"),d=c.get("pro"),m=c.get("q"),h=c.get("utm_source"),p=c.get("in_page"),g=c.get("attachments"),y=c.get("tabs"),v=c.get("nav_suggestions"),x=c.get("sources"),b=c.get("pc"),_=c.get("pt");b&&YOe(b),_&&eLe(_);const w=c.get("qabi")??void 0,S=g?.replace(/[[\]]/g,"").split(","),C=c.get("newFrontendContextUUID"),E=[];if(y)try{const M=JSON.parse(y);if(Array.isArray(M))for(const T of M)E.push({type:"tab",id:T,url:""})}catch(M){ee.error("Failed to parse tabsParam:",M)}if(e&&m&&!C&&!r.current){const M=Array.isArray(m)?m[0]:m,T=c.get("source");if(M==="pending")return;s({rawQuery:M,copilotOverride:u==="true"||d==="true"||dme(h??void 0),collection:null,newFrontendContextUUID:ar(),frontendUUID:t,attachments:S,inPage:p??void 0,promptSource:T==="homepage_widget"?"homepage_widget":"user",querySource:T==="homepage_widget"?"homepage_widget":"default_search",utmSource:h??void 0,quickActionButtonId:w,isNavSuggestionsDisabled:v==="false",modelPreferenceOverride:fe.DEFAULT,shouldRedirectToBackendUUID:!1,mentions:E,sourcesOverride:x?Cst(x?.split(",")):void 0,shouldUsePageStartTime:!0,onThreadSlugReceived:I=>{a.replace(`/search/${I}`,"Omni search query")}}),r.current=!0,o4e()}},[e,s,t,o,a,n])},D8t=()=>{const{value:e}=Yr({flag:"labs-side-canvas",defaultValue:!1});return e},F8t=ge(async()=>{const{SideCanvasViewer:e}=await oe(async()=>{const{SideCanvasViewer:t}=await import("./SideCanvasViewer-JUJ2OX10.js");return{SideCanvasViewer:t}},__vite__mapDeps([136,1,2,137,3,138,4,5]));return{default:e}}),PEe=f.createContext({openCanvas:e=>{},closeCanvas:()=>{},isCanvasOpen:!1}),mzt=()=>{const e=f.useContext(PEe),t=D8t();return f.useMemo(()=>({...e,canUseCanvas:t}),[t,e])},U8t=A.memo(({children:e})=>{const[t,n]=f.useState(!1),[r,s]=f.useState(),a=f.useCallback(c=>{n(!0),s(c)},[]),o=f.useCallback(()=>{n(!1)},[]),i=f.useMemo(()=>({openCanvas:a,closeCanvas:o,currentAppID:r,isCanvasOpen:t}),[a,o,r,t]);return l.jsxs(PEe.Provider,{value:i,children:[e,l.jsx(st,{children:t&&l.jsx(F8t,{})})]})}),REe=A.memo(({children:e})=>{const{results:t}=zt(),n=f.useMemo(()=>{const r=[];return t.map(s=>{s.widget_data?.map(a=>{cCt(a)&&r.push(a)})}),r},[t]);return l.jsx(Nbe,{entities:n,children:e})});REe.displayName="ScrollToWidgetWrapper";const B8t=({items:e,inFlight:t,inFlightLatest:n,rwToken:r,contentHasMounted:s,hasHeader:a=!0})=>{const{scrollContainerRef:o}=Sc(),i=ms(),{isMobileStyle:c}=Ce(),u=tn(),d=f.useMemo(()=>{if(typeof window>"u")return 0;const w=a?getComputedStyle(document.documentElement).getPropertyValue("--header-height"):"0";return parseInt(w)+(c||u?0:8)},[c,a,u]),m=f.useRef(!0),h=f.useMemo(()=>!r&&e.every(w=>!an.isStatusPending(w)),[e,r]),p=f.useMemo(()=>e.some(w=>an.isStatusPending(w)),[e]),g=f.useRef({}),y=f.useRef({});f.useEffect(()=>()=>{g.current={},y.current={}},[]);const v=f.useCallback((w,{smooth:S=!0,anchor:C=!1}={smooth:!0,anchor:!1})=>{const E=typeof w=="number"?g.current?.[w]?.current:y.current?.[w]?.current;if(E){const M=E.getBoundingClientRect().top,T=o?.current?.scrollTop??0,I=M+T-d;if(I+T>document.body.scrollHeight&&C){const j=o?.current?.scrollHeight??0,N=o?.current?.clientHeight??0,P=j-N-.1;requestAnimationFrame(()=>o?.current?.scrollTo({top:P,behavior:S?"smooth":"auto"}))}else o?.current?.scrollTo({top:I,behavior:S?"smooth":"auto"})}},[o,d]),x=f.useCallback(()=>{v(e.length-1)},[v,e.length]);f.useEffect(()=>{const w={...g.current},S={...y.current};let C=!1;e.forEach((E,M)=>{const T=M,I=E.backend_uuid;if(I)if(!w[T]||!w[T].current){const j=A.createRef();w[T]=j,S[I]=j,C=!0}else S[I]=w[T]}),Object.keys(w).forEach(E=>{e.some((M,T)=>T===Number(E))||(delete w[Number(E)],C=!0)}),C&&(y.current=S,g.current=w)},[e.length,p]);const b=e.at(-1)?.query_source==="edit";f.useEffect(()=>{if(e.length<=1||!i||!s)return;const w=window.location.hash;if(w&&!t&&m.current){try{const S=w.slice(1);S.length>3?v(S,{smooth:!1}):v(Number(S),{smooth:!1})}catch(S){ee.error(S)}return}n&&!b&&v(e.length-1,{anchor:!0})},[t,n,h,e.length,i,v,s,b]);const _=g.current;return f.useMemo(()=>({refs:_,scrollToLatestItem:x,scrollToListItem:v}),[_,x,v])},jU=f.createContext({refs:{},scrollToListItem:()=>{},setContentHasMounted:()=>{},contentHasMounted:!1});jU.displayName="ScrollToEntityContext";const IEe=A.memo(({children:e})=>{const t=vo(),{results:n=[],inFlight:r,inFlightLatest:s}=zt(),[a,o]=f.useState(!1),{isMobileStyle:i}=Ce(),c=f.useMemo(()=>Fpe(n).map(h=>h[0]),[n]),{refs:u,scrollToListItem:d}=B8t({items:c,inFlight:r,inFlightLatest:s,rwToken:t,contentHasMounted:a,hasHeader:i});return l.jsx(jU.Provider,{value:{scrollToListItem:d,refs:u,setContentHasMounted:o,contentHasMounted:a},children:e})});IEe.displayName="ScrollToThreadEntryProvider";const jM=()=>{const e=f.useContext(jU);if(!e)throw new Error("useScrollToEntity must be used within ScrollToEntityContext");return e},V8t=90,jEe=A.memo(({submitWillFork:e})=>{const{$t:t}=X(),n=At(),[r,s]=f.useState(!1),{resultsLength:a}=zt(),{isMobileStyle:o}=Ce(),{shouldShowLossAversionModal:i,handleOpenLossAversion:c}=Ip(),u=f.useCallback(()=>{n.push("/")},[n]),d=f.useCallback(p=>{p.preventDefault(),i?c({args:{callback:u,origin:Be.NEW_THREAD_BUTTON}}):u()},[i,c,u]),m=f.useCallback(()=>{s(!0)},[]),h=f.useMemo(()=>a>=V8t&&!r&&!e,[a,r,e]);return l.jsx(st,{children:h&&l.jsxs(_e.div,{className:"bg-offset gap-sm py-sm relative z-0 mx-4 flex items-center justify-between rounded-t-lg px-3 shadow-md",role:"alert",initial:{y:"110%"},animate:{y:0},exit:{y:"110%"},transition:{duration:.4,ease:[.16,1,.3,1]},children:[l.jsxs(D,{color:"light",className:"flex items-center gap-2",children:[l.jsx(be,{icon:yS,className:"text-caution shrink-0"}),l.jsx("span",{className:"font-sans text-xs",children:o?l.jsx(he,{defaultMessage:"Thread too long. Start new one.",id:"wzstV6j0EL"}):l.jsx(he,{defaultMessage:"Thread is getting long. Start a new one for better answers.",id:"X7d6hUix4z"})})]}),l.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[l.jsx(ke,{variant:"primary",size:"tiny",onClick:d,text:t({defaultMessage:"Start new thread",id:"jsMJO4IUTY"})}),l.jsx(ke,{size:"tiny",onClick:m,pill:!0,icon:Xt})]})]},"thread-capacity-warning")})});jEe.displayName="ThreadCapacityWarning";const Bs={default:"d",shopping:"s",jobs:"j",hotels:"h",places:"p",images:"i",videos:"v",sources:"r",assets:"a",apps:"c",tasks:"t",search:"se",chat:"ch"},hne=e=>Object.entries(Bs).find(([t,n])=>n===e)?.[0],OM=(e,t)=>{const r=new URLSearchParams(t?.toString()).get(e.toString());if(r)return typeof r=="string"?hne(r):Array.isArray(r)?hne(r[0]):void 0},$8t=e=>e==="default"||e==="sources",W8t=e=>Kr(e).with("default",()=>"default").with("shopping",()=>"wide").with("jobs",()=>"wide").with("hotels",()=>"full").with("places",()=>"full").with("images",()=>"full").with("videos",()=>"full").with("sources",()=>"default").with("assets",()=>"full").with("apps",()=>"full").with("tasks",()=>"default").with("search",()=>"default").otherwise(()=>"default"),C6=e=>({mode:e,width:W8t(e)}),H8t=()=>{const e=Ht();return f.useCallback(t=>OM(t,e),[e])},z8t=()=>{const e=Ht(),t=Pt(),n=At();return f.useCallback((r,s)=>{if(OM(r,e)===s)return;const a=new URLSearchParams(e?.toString());a.set(r.toString(),Bs[s]),n.replace(`${t}?${a.toString()}`)},[t,n,e])},OU=f.createContext({activeMode:"default",setActiveMode:()=>{},activeEntryIdx:0,pinnedEntryIdx:-1,viewTitle:null,setViewTitle:()=>{}});OU.displayName="SearchPageContext";const LM=()=>{const e=f.useContext(OU);if(!e)throw new Error("useSearchPage must be used within an SearchPageProvider");return e},OEe=A.memo(({children:e})=>{const t=H8t(),[n,r]=f.useState(t(0)??"default"),[s,a]=f.useState(0),[o,i]=f.useState(-1),[c,u]=f.useState(null),{refs:d}=jM(),m=At(),{scrollContainerRef:h}=Sc(),p=f.useCallback(()=>{if(Object.keys(d).length===0||!h.current)return;const g=h.current.clientHeight,y=h.current.scrollTop;if(y===0){a(0),i(-1);return}const v=y+g/2;let x=s,b=-1,_=1/0;Object.entries(d).forEach(([w,S])=>{if(S.current){const C=S.current.getBoundingClientRect(),E=C.top+y+C.height/2,M=Math.abs(E-v);C.top<-100&&C.bottom>100&&(b=parseInt(w)),M<_&&(_=M,x=parseInt(w))}}),a(x),i(b)},[d,a,h,s,i]);return f.useEffect(()=>{if(!h?.current)return;const g=h.current,y=iS(p,50,{leading:!1,trailing:!0});return g.addEventListener("scroll",y),p(),()=>{g.removeEventListener("scroll",y),y.cancel()}},[p,h]),f.useEffect(()=>{u(null)},[m]),l.jsx(OU.Provider,{value:{activeMode:n,setActiveMode:r,activeEntryIdx:s,pinnedEntryIdx:o,viewTitle:c,setViewTitle:u},children:e})});OEe.displayName="SearchPageProvider";const G8t=()=>{const e=gt(),t=HS(),n=f.useMemo(()=>e.getQueryData(t),[e,t]),{connectors:r}=js({reason:"useHasUnauthenticatedGmailGcal"});return f.useMemo(()=>{const s=!!r?.connectors.find(a=>a.name==="gcal"&&(!a.connected||a.has_required_scopes===!1));return!(!n||!s)},[n,r])},LEe=()=>{const e=Ot(),{firstResult:{author_username:t}={},inFlight:n}=zt();return e?.user?.username===t||n};var q8t={};const K8t=({position:e,inFlight:t,isLastResult:n,upsellInformation:r,backendUuid:s})=>{const[a,o]=f.useState(!1),[i,c]=f.useState(null),[u,d]=f.useState(null),m=tn(),h=q8t.NEXT_PUBLIC_IS_SIDECAR_BUILD?"sidecar_thread":m?"search_results_page":void 0,p=hr(),{trackEventOnce:g,trackEvent:y}=Te(),v=LEe(),x=G8t(),{subscriptionTier:b}=Nt();f.useEffect(()=>{(async()=>{try{const E=await p.getIsCometDefaultBrowser("check_default_browser");d(E)}catch{d(null)}})()},[p]);const _=f.useMemo(()=>{if(a||!r||e==="top"&&r.app_location!=="IN_THREAD"||e==="bottom"&&r.app_location!=="IN_THREAD_BOTTOM"||e==="input"&&r.app_location!=="IN_THREAD_INPUT"||e==="connector_auth"&&r.app_location!=="UPSELL_APP_LOCATION_UNSPECIFIED")return!1;const C=s;return!(!C||C===i||!n&&(!r.is_persistent||e==="input"||e==="router_steps"||e==="connector_auth")||e==="bottom"&&t||r.is_persistent&&(!v||r.name==="gmail_gcal_connector"&&!x||r.name==="comet_set_default_browser"&&u!==!1))},[a,r,e,s,i,n,t,v,x,u]);f.useEffect(()=>{if(!_||!r)return;const C=s;c(C),o(!0),g("thread upsell banner viewed",{entryUUID:C,upsellType:r.upsell_type,upsellName:r.name,cometSurface:h,subscriptionTier:b})},[s,_,g,r,h,b]);const w=f.useCallback(({hideBanner:C=!0}={})=>{C&&o(!1);const E=r,M=s;if(M&&E?.upsell_type){y("thread upsell banner dismissed",{entryUUID:M,upsellType:E.upsell_type,upsellName:E.name,cometSurface:h,subscriptionTier:b});const T=E.cta==="SHORTCUT_MODAL"?E.cta_information?.recommended_shortcut?.name:void 0;LC(E.name,T)}},[s,y,r,h,b]),S=f.useCallback(()=>{o(!1)},[]);return f.useMemo(()=>({show:a,handleDismiss:w,handleHide:S}),[w,a,S])},Y8t=({icon_reference:e,icon_image:t})=>{if(t)return l.jsx(z,{variant:"offsetPlus",className:"p-xs rounded-md border",children:l.jsx("img",{src:t.url,alt:t.alt,width:40,height:40,className:"rounded"})});const n={pro:l.jsx(be,{icon:hd.pro,size:"lg"}),collection:l.jsx(be,{icon:hd.collection,size:"lg"}),gmail_gcal:l.jsx(z,{variant:"offsetPlus",className:"p-xs rounded-md border",children:l.jsx("img",{src:FS,alt:"Gmail Gcal Upsell Banner",width:40,height:40})}),research:l.jsx(be,{icon:hd.research,size:"lg"}),labs:l.jsx(be,{icon:hd.labs,size:"lg"}),max:l.jsx(o9,{width:"w-8"}),shortcut:l.jsx(be,{icon:hS,size:"lg"}),comet_login:l.jsx(z,{variant:"super",className:"p-xs rounded-md border",children:l.jsx(D,{color:"defaultInverted",children:l.jsx(dl,{size:24})})})};return e==="comet_download"?null:n[e||""]||l.jsx(be,{icon:hd.pro,size:"lg"})},DM=A.memo(({position:e,upsellInformation:t,inFlight:n,isLastResult:r,backendUuid:s,animateExpand:a=!0,hideOnAccept:o=!0,hideOnReject:i=!0,isSkipping:c=!1,onAccept:u,onReject:d})=>{const{$t:m}=X(),{show:h,handleDismiss:p,handleHide:g}=K8t({position:e,inFlight:n,isLastResult:r,upsellInformation:t,backendUuid:s}),y=f.useCallback(()=>{p({hideBanner:i}),d?.()},[p,d,i]),v=f.useCallback(()=>{p({hideBanner:o}),u?.()},[p,u,o]),b=Ht()?.get("handle_upsell");f.useEffect(()=>{if(h&&b){const C=new URLSearchParams(window.location.search);C.delete("handle_upsell");const E=Object.fromEntries(C.entries());kp(E),v()}},[v,h,b]);const _=Je();if(!h||!t||_&&t.upsell_type===dle.LOGIN)return null;const w=Y8t(t),S=e==="router_steps"||e==="connector_auth";return l.jsx(st,{children:l.jsx(_e.div,{initial:a?{height:0}:{opacity:0},animate:a?{height:"auto"}:{opacity:1},exit:a?{height:0}:{opacity:0},transition:{duration:.2},children:l.jsxs(z,{variant:t.background_super?"superLight":"offset",className:B("gap-sm mb-md p-md md:gap-md md:gap-sm relative flex w-full flex-col items-center rounded-md md:flex-row",{"rounded-xl shadow-xl ring-1":e==="input"||e==="router_steps"}),children:[l.jsx("div",{className:"right-md top-md absolute z-10 md:hidden",children:l.jsx(ke,{icon:Xt,size:"small",onClick:y,noPadding:!0})}),w&&l.jsx(D,{color:"default",className:"mr-sm hidden md:block",children:w}),l.jsxs("div",{className:"md:mr-sm relative flex w-full flex-col",children:[l.jsx(D,{variant:"smallBold",className:"mr-lg line-clamp-2 md:mr-0",children:t.title}),l.jsx(D,{variant:"small",color:"light",className:"mb-0 font-normal leading-[1.3]",children:t.description})]}),l.jsxs("div",{className:"md:gap-sm flex size-full items-end justify-end md:w-auto md:flex-row md:items-center",children:[S&&l.jsx(ke,{text:m({defaultMessage:"Skip",id:"/4tOwTiCH6"}),size:"small",onClick:y,variant:"common",isLoading:c}),t.button_text&&l.jsx(X9,{upsellInformation:t,inFlight:n,position:e,hideUpsell:g}),!S&&l.jsx("div",{className:"mt-sm hidden md:block",children:l.jsx(ke,{icon:Xt,size:"small",onClick:y,noPadding:!0})})]})]})})})});DM.displayName="ThreadUpsell";const Q8t=A.memo(({showStopButton:e,onStopButtonClick:t,clarificationData:n,upsellInformation:r,idx:s,inFlightEntryUUID:a,inFlight:o,isLastResult:i,...c})=>{const{currentOpenedModal:u}=_t(),{isMobileUserAgent:d}=Ce(),m=!!n?.clarificationQuestion,[h,p]=f.useState(a);return f.useEffect(()=>{a&&p(a)},[a]),l.jsx("div",{className:"w-full",children:l.jsxs(Jd,{children:[l.jsx(DM,{position:"input",idx:s,upsellInformation:r,inFlight:o,isLastResult:i,backendUuid:h,animateExpand:!1}),l.jsx(JE,{hasShadow:!0,isHighlighted:m,showFileUpload:!0,initializeAttachmentsFromLastResult:!0,autofocus:u===null&&!d,querySource:c.submitWillFork?"fork":"followup",showStopButton:e,onStopButtonClick:t,initialLayout:d?"compact":"expanded",minRows:1,className:"bg-base shadow-[0_1px_8px_2px_oklch(var(--foreground-color)/0.1),0_36px_16px_36px_oklch(var(--background-base-color))] dark:shadow-[0_4px_12px_rgba(0,0,0,0.12),0_32px_16px_36px_oklch(var(--dark-background-base-color))]",...c})]})})}),X8t=(e,t)=>{const{value:n,loading:r}=Ut({flag:"enable-comet-clarifying-commands",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},Z8t=(e,t,n)=>{const r=Zxe(),{variation:s}=X8t(!1),{addClarification:a}=Whe(),{trackEventOnce:o}=Te(),i=n?.length??0,c=n?.filter(g=>g.markdown_block).length??0,u=f.useMemo(()=>{if(!n)return!1;const g=n.find(x=>x.intended_usage==="pro_search_steps");if(!g?.plan_block?.steps)return!1;const y=g.plan_block.steps;return y[y.length-1]?.step_type==="ENTROPY_REQUEST"},[n]),d=f.useMemo(()=>u?s:r?xr(t?.display_model)===ae.RESEARCH||xr(t?.display_model)===ae.STUDIO:!1,[r,u,s,t?.display_model]),m=f.useMemo(()=>d&&!t?.reasoning_plan&&i>0&&c===0,[t?.reasoning_plan,i,c,d]),h=f.useMemo(()=>!m||!d||!n?null:{clarificationQuestion:"Add details or clarifications",isDefaultClarification:!0,clarificationCount:0},[m,d,n]),p=f.useCallback((g,y,v)=>{const b={uuid:ar(),clarification_type:"FREEFORM_CLARIFICATION",freeform_clarification:{text:v.query,question:"Add details or clarifications",attachments:v.attachments??[]}};_7e({entryUUID:g,clarification:b,reason:e}),a({content:b.freeform_clarification?.text??v.query,UUID:b.uuid,entryUUID:g,question:h?.clarificationQuestion??void 0}),h&&o("clarifying query submitted",{entry_uuid:g,context_uuid:y,query:v.query,attachments:v.attachments})},[a,h,e,o]);return{shouldAcceptClarification:m,handleSubmitClarification:p,clarificationData:h}},J8t=({scrollbarSize:e})=>{const[t,n]=f.useState({height:void 0,width:void 0}),r=f.useRef(null);return f.useEffect(()=>{const s=()=>(r.current==null&&(r.current=document.createElement("div"),r.current.classList.add("scrollbar-thin"),r.current.style.width="99px",r.current.style.height="99px",r.current.style.overflow="scroll",r.current.style.position="absolute",r.current.style.top="-9999px",r.current.setAttribute("aria-hidden","true"),r.current.setAttribute("role","presentation")),r.current),a=()=>{const{offsetHeight:c,clientHeight:u,offsetWidth:d,clientWidth:m}=s(),h=c-u,p=d-m;n(g=>{const{height:y,width:v}=g;return y!==h||v!==p?{height:h,width:p}:g})},o=ks(a,100);window.addEventListener("resize",o),document.body.appendChild(s()),a();const i=s();return()=>{o.cancel(),window.removeEventListener("resize",o),document.body.removeChild(i)}},[e]),t},eOt=()=>{const[e,t]=f.useState(!1),[n,r]=f.useState(!1),{scrollContainerRef:s}=Sc(),{scrollToListItem:a}=jM(),{resultsLength:o}=zt(),i=f.useRef(!1),c=f.useCallback(()=>{a(o-1)},[a,o]),u=f.useCallback(()=>{if(!s.current)return;const d=s.current,m=d.scrollHeight>d.clientHeight,h=iI(d),p=o>1;h?i.current=!0:i.current&&(r(!1),i.current=!1),t(m&&!h&&p)},[s,o]);return f.useEffect(()=>{const d=s.current;if(!d)return;const m=ks(u,100);u();const h=setTimeout(u,200);return d.addEventListener("scroll",m),window.addEventListener("resize",m),()=>{d.removeEventListener("scroll",m),window.removeEventListener("resize",m),m.cancel(),clearTimeout(h)}},[s,u]),f.useEffect(()=>{if(o<=1)return;u();const d=setTimeout(u,300);return r(!1),i.current=!1,()=>clearTimeout(d)},[o,u]),f.useMemo(()=>({showScrollButton:e,hasScrolled:n,setHasScrolled:r,scrollToLatestItem:c}),[n,c,e])};var pne={};const tOt=1e3,DEe=A.memo(({ref:e})=>{const t="thread-floating-footer",{$t:n}=X(),r=Ma(),a=Ht()?.get("q"),o=Je(),{inFlightEntry:{backend_uuid:i,blocks:c,context_uuid:u}={},inFlight:d,lastResult:m,resultsLength:h,firstResult:{frontend_context_uuid:p,collection_info:g,parent_info:y}={}}=zt(),v=c?.length??0,x=Ec(),b=p,{activeMode:_}=LM(),{width:w}=J8t({scrollbarSize:"thin"}),S=!!pne.NEXT_PUBLIC_IS_SIDECAR_BUILD,{mentionTypeaheadOptions:C,onTriggerTypeahead:E}=MF({reason:t,variants:["tab","shortcut"]}),{submitQuery:M}=Ta(),{specialCapabilities:T}=Sn(),{showScrollButton:I,hasScrolled:j,setHasScrolled:N,scrollToLatestItem:P}=eOt(),{isMobileUserAgent:R}=Ce(),{shouldAcceptClarification:k,handleSubmitClarification:O,clarificationData:L}=Z8t(t,m,c),F=f.useMemo(()=>{try{return d&&v>0}catch(se){throw ee.error("Unable to parse non-Pro search inFlightEntry.",se),se}},[d,v]),U=f.useMemo(()=>m?.upsell_information,[m?.upsell_information]),V=f.useCallback(se=>{const Y=x,Q=Sa();i&&k&&(O(i,u,se),$.setUserInput("")),!d&&M({fork:Y,rawQuery:se.query,copilotOverride:o||T.unlimitedProSearch?void 0:!1,attachments:se.attachments,collection:g??null,newFrontendContextUUID:Y?Q:null,existingFrontendContextUUID:Y?void 0:b,promptSource:"user",querySource:"followup",timeFromFirstType:se.timeFromFirstType,shouldRedirectToBackendUUID:Y,...se.side_by_side_metadata&&{side_by_side_metadata:se.side_by_side_metadata},mentions:se.mentions})},[x,i,k,d,M,o,g,b,y]),W=Upe({handleSubmitQuery:V,isHomepage:!1,contextUuid:b||"",disableSideBySide:!!y}),H=f.useMemo(()=>ks(W,tOt,{leading:!0}),[W]),[G,K,$]=jpe({onSubmit:H}),q=f.useCallback(()=>{if(i){const se=r.getState().entries,Q=se[i]?.side_by_side_metadata?.sibling_uuid;Q?Object.values(se).forEach(re=>{re.side_by_side_metadata?.sibling_uuid===Q&&re.status==="PENDING"&&re.backend_uuid&&Mv({entryUUID:re.backend_uuid,reason:t})}):Mv({entryUUID:i,reason:t})}},[i,r]);f.useEffect(()=>{a!==null&&a!==""&&$.setUserInput("")},[a]);const Z=f.useCallback(()=>{P(),N(!0)},[P,N]);return l.jsx(z,{className:B("erp-sidecar:fixed erp-sidecar:w-full bottom-safeAreaInsetBottom p-md pointer-events-none absolute z-10"),style:S?void 0:{width:`calc(100% - ${w??0}px)`},ref:e,children:l.jsx("div",{className:"max-w-threadContentWidth mx-auto",children:l.jsx("div",{className:"pointer-events-auto",children:$8t(_)&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"pointer-events-none h-0",children:l.jsx(st,{initial:!1,children:I&&!j&&l.jsx(_e.div,{className:"flex justify-center",layout:"position",initial:{opacity:0,y:"0%"},animate:{opacity:1,y:"-100%"},exit:{opacity:0,y:"0%"},transition:{opacity:{duration:.2,ease:"easeInOut"},y:{duration:.2,ease:"easeInOut"}},children:l.jsx(ye,{size:"small",variant:"border",icon:cke,layout:"center",pill:!0,onClick:Z,toolTip:n({defaultMessage:"Scroll to latest",id:"E6r0bc1I6z"}),extraCSS:"!bg-base shadow-subtle mb-2 pointer-events-auto"})},"scroll-button")})}),l.jsx(jEe,{submitWillFork:x}),l.jsx("div",{children:f.createElement(Q8t,{...$,key:"ask-input",value:G,json:K,isFollowUp:!0,disableSubmission:d&&!k,placeholder:n(k?{defaultMessage:"Add details or clarifications...",id:"RkaMsxpXoz"}:{defaultMessage:"Ask a follow-up",id:"dxepjFd+cI"}),submitWillFork:x,showStopButton:F,inFlightEntryUUID:i,contextUUID:u,onStopButtonClick:q,useLexical:!0,mentionTypeaheadOptions:C,onTriggerTypeahead:E,dropdownPlacement:pne.NEXT_PUBLIC_IS_SIDECAR_BUILD?"top":void 0,clarificationData:L??void 0,showSearchModeSelector:!k,showModelSelector:!k&&!R,showFileUpload:!F||k,upsellInformation:U,idx:h-1,inFlight:d,isLastResult:!0})})]})})})})});DEe.displayName="ThreadFloatingFooter";const nOt=e=>e?e.filter(t=>t.image_mode_block).flatMap(t=>t.image_mode_block.media_items??ce):ce,rOt=e=>e?e.filter(t=>t.video_mode_block).flatMap(t=>t.video_mode_block.media_items??ce):ce,sOt=e=>e?e.filter(t=>t.shopping_mode_block).flatMap(t=>t.shopping_mode_block.shopping_widgets??ce):ce,aOt=e=>e?e.filter(t=>t.jobs_mode_block).flatMap(t=>t.jobs_mode_block.jobs_blocks??ce):ce,oOt=e=>e?e.filter(t=>t.maps_mode_block).flatMap(t=>t.maps_mode_block.places??ce):ce,iOt=e=>{const t=(e??ce).filter(o=>o.sources_mode_block).flatMap(o=>o.sources_mode_block),n=t.at(-1),r=new Set,s=[];for(const o of t)for(const i of o.web_results)r.has(i.url)||(s.push(i),r.add(i.url));const a=n?.result_count??0;return{count:Math.max(s.length,a),progress:n?.progress,results:s,rows:n?.rows}},lOt=e=>e?e.filter(t=>t.assets_mode_block).flatMap(t=>t.assets_mode_block.assets??ce):ce,cOt=({idx:e,searchParams:t,blocks:n})=>yo()((r,s)=>({answerModeActionList:[],currentModeData:C6(OM(e,t)??"default"),...FEe(n),actions:{updateCurrentMode:a=>{const o=s(),i=o.defaultModeOverride&&a==="default"?o.defaultModeOverride:a;r({currentModeData:C6(i)})},setOverrideMode:a=>{const o=a;r({defaultModeOverride:o,currentModeData:C6(o??"default")})}}})),{Context:uOt,useTrackedState:dOt}=Y0("AnswerMode"),LU=f.createContext(void 0);LU.displayName="AnswerModeApiContext";const fOt=({children:e,scrollToListItem:t})=>{const n=Ht(),{setActiveMode:r,activeEntryIdx:s}=LM(),{idx:a,result:{backend_uuid:o,context_uuid:i}}=wn(),{actions:{updateCurrentMode:c,setOverrideMode:u},currentModeData:d}=ax(),m=z8t(),{trackEvent:h}=Te(),p=f.useCallback(y=>{y!==d.mode&&(m(a,y),c(y),s===a&&r(y),requestAnimationFrame(()=>{t(a,{smooth:!0})}),h("answer mode tab selected",{answerMode:y,entryUUID:o,contextUUID:i}))},[d.mode,m,a,c,s,h,o,i,r,t]);f.useEffect(()=>{s===a&&r(d.mode)},[s,a,r,d.mode]),f.useEffect(()=>{const y=OM(a,n);y&&p(y)},[a,p,n]);const g=f.useMemo(()=>({updateCurrentMode:v=>{p(v)},setOverrideMode:u}),[p,u]);return l.jsx(LU.Provider,{value:g,children:e})};function FEe(e){const t=nOt(e),n=rOt(e),r=sOt(e),s=aOt(e),a=oOt(e),o=iOt(e),i=lOt(e);return{images:t,videos:n,shopping:r,jobs:s,places:a,sources:o,assets:i}}const UEe=A.memo(({children:e,scrollToListItem:t})=>{const{$t:n}=X(),r=Ht(),{idx:s,searchMode:a,hasAnswer:o,researchPlan:i,reasoningPlan:c,showAgentWorkflow:u,result:{answer_modes:d,blocks:m,attachments:h,read_write_token:p},isLastResult:g,hasSources:y}=wn(),v=tn(),[x]=f.useState(()=>cOt({idx:s,searchParams:r,blocks:m}));f.useEffect(()=>{m||ee.error("No blocks found for entry",m)},[m]),f.useEffect(()=>{const C=x.getState(),{images:E,videos:M,shopping:T,jobs:I,places:j,sources:N,assets:P}=FEe(m),R=ua(C.images,E)?C.images:E,k=ua(C.videos,M)?C.videos:M,O=ua(C.shopping,T)?C.shopping:T,L=ua(C.jobs,I)?C.jobs:I,F=ua(C.places,j)?C.places:j,U=ua(C.sources,N)?C.sources:N,V=ua(C.assets,P)?C.assets:P;(R!==C.images||k!==C.videos||O!==C.shopping||L!==C.jobs||F!==C.places||U!==C.sources||V!==C.assets)&&x.setState({images:R,videos:k,shopping:O,jobs:L,places:F,sources:U,assets:V})},[m,x]);const b=x.getState().sources,_=f.useMemo(()=>({[Zt.SHOPPING]:{text:n({defaultMessage:"Shopping",id:"my1MLnIMoS"}),show:!0,icon:mke,id:Bs.shopping,mode:"shopping",testId:Fs.ANSWER_MODE_TABS.SHOPPING},[Zt.JOBS]:{text:n({defaultMessage:"Jobs",id:"9AcATFXaoo"}),show:!0,icon:fke,id:Bs.jobs,mode:"jobs",testId:Fs.ANSWER_MODE_TABS.JOBS},[Zt.HOTELS]:{text:n({defaultMessage:"Hotels",id:"+dqK4hw0if"}),show:!0,icon:cc,id:Bs.hotels,mode:"hotels",testId:Fs.ANSWER_MODE_TABS.HOTELS},[Zt.MAPS]:{text:n({defaultMessage:"Places",id:"QQInFSbbwr"}),show:!0,icon:Wre,id:Bs.places,mode:"places",testId:Fs.ANSWER_MODE_TABS.PLACES},[Zt.IMAGE]:{text:n({defaultMessage:"Images",id:"Fip4H8CuWD"}),show:!0,icon:P0,id:Bs.images,mode:"images",testId:Fs.ANSWER_MODE_TABS.IMAGES},[Zt.VIDEO]:{text:n({defaultMessage:"Videos",id:"4XfMuxy3FO"}),show:!0,icon:$re,id:Bs.videos,mode:"videos",testId:Fs.ANSWER_MODE_TABS.VIDEOS},[Zt.SOURCES]:{text:n({defaultMessage:"Sources",id:"fhwTpAcBLC"}),show:!0,icon:nh,id:Bs.sources,mode:"sources",testId:Fs.ANSWER_MODE_TABS.SOURCES,count:b.count||h?.length||0,disabled:b.progress!==Oc.DONE&&!h?.length},[Zt.ASSETS]:{text:n({defaultMessage:"Assets",id:"d1uESJO+TH"}),show:!0,icon:dke,id:Bs.assets,mode:"assets",testId:Fs.ANSWER_MODE_TABS.ASSETS},[Zt.APPS]:{text:n({defaultMessage:"App",id:"2rUVsUf259"}),show:!0,icon:uke,id:Bs.apps,mode:"apps",testId:Fs.ANSWER_MODE_TABS.APPS},[Zt.TASKS]:{text:n({defaultMessage:"Steps",id:"huCHmkVjex"}),show:!0,icon:hB,id:Bs.tasks,mode:"tasks",testId:Fs.ANSWER_MODE_TABS.TASKS},[Zt.SEARCH]:{text:n({defaultMessage:"Search",id:"xmcVZ0BU63"}),show:!!p&&g&&!y,icon:fo,id:Bs.search,mode:"search",testId:Fs.ANSWER_MODE_TABS.SEARCH},[Zt.CHAT]:{text:n({defaultMessage:"Chat",id:"WTrOy36sdu"}),show:!!p&&g,icon:n8,id:Bs.chat,mode:"chat",testId:Fs.ANSWER_MODE_TABS.CHAT}}),[n,h?.length,b.count,b.progress,p,g,y]),w=f.useMemo(()=>n(v?{defaultMessage:"Assistant",id:"wSAvhubuX6"}:{defaultMessage:"Answer",id:"DwjT1HpUgU"}),[n,v]),S=v?dl:void 0;return f.useEffect(()=>{const C=d?.map(j=>Kr(j.answer_mode_type).with(Zt.SHOPPING,()=>_[Zt.SHOPPING]).with(Zt.JOBS,()=>_[Zt.JOBS]).with(Zt.HOTELS,()=>_[Zt.HOTELS]).with(Zt.MAPS,()=>_[Zt.MAPS]).with(Zt.IMAGE,()=>_[Zt.IMAGE]).with(Zt.VIDEO,()=>_[Zt.VIDEO]).with(Zt.SOURCES,()=>_[Zt.SOURCES]).with(Zt.ASSETS,()=>_[Zt.ASSETS]).with(Zt.APPS,()=>_[Zt.APPS]).with(Zt.TASKS,()=>_[Zt.TASKS]).with(Zt.SEARCH,()=>_[Zt.SEARCH]).with(Zt.CHAT,()=>_[Zt.CHAT]).otherwise(N=>(ee.warn("Unsupported Answer Mode",{mode:N.valueOf()}),null))).filter(j=>!!j),E=[{text:a===ae.SEARCH?w:n(Vr[a].name),icon:a!==ae.SEARCH?ph[a]:S,id:"d",mode:"default",testId:Fs.ANSWER_MODE_TABS.ANSWER(a)},...(C??[]).filter(j=>(j.mode!=="tasks"||o)&&(j.show===void 0||j.show===!0))],M=E.some(j=>j.mode==="tasks"),T=(i?.goals?.length??0)+(c?.goals?.length?c.goals.length-1:0);!M&&T>0&&!u&&o&&E.push({text:n({defaultMessage:"Steps",id:"huCHmkVjex"}),icon:hB,id:Bs.tasks,mode:"tasks",testId:Fs.ANSWER_MODE_TABS.TASKS});const I=x.getState();ua(I.answerModeActionList,E)||x.setState({answerModeActionList:E})},[n,d,o,_,c?.goals?.length,i?.goals?.length,a,v,w,S,u,x]),l.jsx(uOt.Provider,{value:x,children:l.jsx(fOt,{scrollToListItem:t,children:e})})});UEe.displayName="AnswerModeProvider";const ax=dOt,BEe=()=>{const e=f.useContext(LU);if(!e)throw new Error("useAnswerModeApi must be used within an AnswerModeProvider");return e};var E6={},gne;function mOt(){return gne||(gne=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="brush",r=384,s=512,a=[],o="f55d",i="M48 288L48 64c0-8.8 7.2-16 16-16l32 0 0 96c0 8.8 7.2 16 16 16s16-7.2 16-16l0-96 64 0 0 64c0 8.8 7.2 16 16 16s16-7.2 16-16l0-64 96 0c8.8 0 16 7.2 16 16l0 224L48 288zM0 320c0 35.3 28.7 64 64 64l64 0 0 64c0 35.3 28.7 64 64 64s64-28.7 64-64l0-64 64 0c35.3 0 64-28.7 64-64l0-256c0-35.3-28.7-64-64-64L64 0C28.7 0 0 28.7 0 64L0 320zM192 432a16 16 0 1 1 0 32 16 16 0 1 1 0-32z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faBrush=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(E6)),E6}var VEe=mOt(),M6={},yne;function hOt(){return yne||(yne=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="camera-retro",r=512,s=512,a=[128247],o="f083",i="M192 112L64 112c-8.8 0-16 7.2-16 16l0 64 108.1 0c23.5-29.3 59.5-48 99.9-48s76.5 18.7 99.9 48L464 192l0-96c0-8.8-7.2-16-16-16L271.1 80c-2.5 0-4.9 .6-7.2 1.7l-50.5 25.2c-6.7 3.3-14 5.1-21.5 5.1zM48 240l0 176c0 8.8 7.2 16 16 16l384 0c8.8 0 16-7.2 16-16l0-176-84 0c2.6 10.2 4 21 4 32c0 70.7-57.3 128-128 128s-128-57.3-128-128c0-11 1.4-21.8 4-32l-84 0zM0 416L0 128C0 92.7 28.7 64 64 64l0-16c0-8.8 7.2-16 16-16l64 0c8.8 0 16 7.2 16 16l0 16 32 0 50.5-25.2c8.9-4.4 18.7-6.8 28.6-6.8L448 32c35.3 0 64 28.7 64 64l0 320c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64zM336 272a80 80 0 1 0 -160 0 80 80 0 1 0 160 0z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faCameraRetro=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(M6)),M6}var $Ee=hOt(),T6={},vne;function pOt(){return vne||(vne=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="compass-drafting",r=512,s=512,a=["drafting-compass"],o="f568",i="M304 96a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm-19.6 91.7c-9 2.8-18.5 4.3-28.4 4.3s-19.4-1.5-28.4-4.3L158.1 306.4C187.9 320.3 221 328 256 328c85.8 0 160.8-46.6 201-116c6.6-11.5 21.3-15.4 32.8-8.8s15.4 21.3 8.8 32.8C450.2 319.6 359.7 376 256 376c-43.8 0-85.3-10.1-122.2-28L44.7 500.1c-6.7 11.4-21.4 15.3-32.8 8.6S-3.4 487.3 3.3 475.9L92.6 323.4C60.4 300.2 33.4 270.4 13.5 236c-6.6-11.5-2.7-26.2 8.8-32.8s26.2-2.7 32.8 8.8c15.8 27.2 36.9 51 61.9 69.7l69.8-119.2C170.2 145.2 160 121.8 160 96c0-53 43-96 96-96s96 43 96 96c0 25.8-10.2 49.2-26.7 66.5l53.5 91.4c-12.6 9.8-26.4 18.1-41.1 24.7l-53.2-90.9zM508.7 475.9c6.7 11.4 2.9 26.1-8.6 32.8s-26.1 2.9-32.8-8.6L394.4 375.7c14.4-7.1 28.2-15.4 41.2-24.6l73 124.8z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faCompassDrafting=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(T6)),T6}var WEe=pOt(),k6={},xne;function gOt(){return xne||(xne=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="pencil",r=512,s=512,a=[9999,61504,"pencil-alt"],o="f303",i="M36.4 360.9L13.4 439 1 481.2C-1.5 489.7 .8 498.8 7 505s15.3 8.5 23.7 6.1L73 498.6l78.1-23c10.4-3 20.1-8 28.6-14.5l.3 .2 .5-.8c1.4-1.1 2.7-2.2 4-3.3c1.4-1.2 2.7-2.5 4-3.8L492.7 149.3c21.9-21.9 24.6-55.6 8.2-80.5c-2.3-3.5-5.1-6.9-8.2-10L453.3 19.3c-25-25-65.5-25-90.5 0L58.6 323.5c-2.5 2.5-4.9 5.2-7.1 8l-.8 .5 .2 .3c-6.5 8.5-11.4 18.2-14.5 28.6zM383 191L197.4 376.6l-49.6-12.4-12.4-49.6L321 129 383 191zM97 358.9l7.7 31c2.1 8.6 8.9 15.3 17.5 17.5l31 7.7-7.4 11.2c-2.6 1.4-5.3 2.6-8.1 3.4l-23.4 6.9L59.4 452.6l16.1-54.8 6.9-23.4c.8-2.8 2-5.6 3.4-8.1L97 358.9zM315.3 218.7c6.2-6.2 6.2-16.4 0-22.6s-16.4-6.2-22.6 0l-96 96c-6.2 6.2-6.2 16.4 0 22.6s16.4 6.2 22.6 0l96-96z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faPencil=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(k6)),k6}var HEe=gOt();const hzt=async({request:e,reason:t})=>{const n=await ne.POST("/rest/media/search-videos-for-entry",t,{body:{entry_uuid:e.entry_uuid,read_write_token:e.read_write_token,limit:e.limit,page:e.page},timeoutMs:nn.MEDIUM}),{media_items:r=[]}=n.data??{};return{media_items:r}},pzt=async({request:e,reason:t})=>{const n=await ne.POST("/rest/media/search-images-for-entry",t,{body:{entry_uuid:e.entry_uuid,read_write_token:e.read_write_token,limit:e.limit,page:e.page},timeoutMs:nn.HIGH}),{media_items:r=[]}=n.data??{};return{media_items:r}},gzt=async({request:e,reason:t})=>{const n=await ne.POST("/rest/media/search-images-and-videos",t,{body:{query:e.query,entry_uuid:e.entry_uuid,read_write_token:e.read_write_token},timeoutMs:nn.HIGH}),{media_items:r=[]}=n.data??{};return{media_items:r}},yOt=async({request:e,reason:t})=>{const n=await ne.POST("/rest/media/create-image-for-entry",t,{body:{entry_uuid:e.entry_uuid,read_write_token:e.read_write_token,image_style:e.image_style,custom_instructions:e.custom_instructions},timeoutMs:nn.EXREMELY_HIGH}),{media_items:r=[]}=n.data??{};return{media_items:r}},vOt=async({request:e,reason:t})=>{const n=await ne.POST("/rest/media/get-image-gen-subject",t,{body:{entry_uuid:e.entry_uuid,read_write_token:e.read_write_token},timeoutMs:nn.HIGH}),{subject:r=""}=n.data??{};return{subject:r}},xOt=(e,t,n)=>{if(e.backend_uuid!==t)return e;const r=e.blocks??[],s=r.findIndex(c=>c.image_mode_block);if(s===-1)return e;const a=[...r],o=[...n,...r[s].image_mode_block.media_items],i={...r[s].image_mode_block,media_items:o};return a[s]={...a[s],image_mode_block:i},{...e,blocks:a}},zEe=({reason:e})=>{const{decrementCreateLimit:t}=Sn(),{trackEvent:n}=Te(),{openModal:r}=_t(),{$t:s}=X(),a=vo(),o=tde(),{mutate:i}=Mt({mutationFn:async u=>{try{return await vOt({request:u,reason:e})}catch(d){return ee.error("Failed to get image generation subject",d),{subject:""}}}}),c=f.useCallback(async({entryUUID:u,imageStyle:d,customInstructions:m=null,setIsLoadingGeneratedImage:h,onSuccessCallback:p,onFailureCallback:g})=>{n("generate image button clicked",{entryUUID:u,queryStr:m??""}),h(!0);try{const y=await yOt({request:{entry_uuid:u,read_write_token:a??null,image_style:d,custom_instructions:m},reason:e}),{media_items:v}=y;o(u,x=>xOt(x,u,v)),t(),p()}catch(y){y instanceof Error&&y.message==="Pro feature"?r("pricingModal",{redirectUrl:"",pitchMessage:{title:"Generate DALL-E images with Pro",description:"Upgrade to Pro to generate DALL-E images"},origin:Be.GENERATE_IMAGE}):y instanceof Error&&y.message==="Moderation"?g(s({defaultMessage:"Failed due to moderation. Please try a different query",id:"ChRyieNjo/"})):g(s({defaultMessage:"Failed to generate image",id:"mVJ5f5LkYT"}))}finally{h(!1)}},[n,a,o,t,r,s,e]);return f.useMemo(()=>({onGenerateImageClick:c,getImageGenSubjectMutation:i}),[i,c])},bne=150,_ne=500,GEe=A.memo(({entry:e,imageGenSubject:t,setImageGenSubject:n,onSubmit:r})=>{const s="generate-image-custom-input",{$t:a}=X(),{isMobileStyle:o,isMobileUserAgent:i}=Ce(),[c,u]=f.useState(!1),[d,m]=f.useState(""),[h,p]=f.useState(t),{getImageGenSubjectMutation:g}=zEe({reason:s}),y=d.length>0?d+`. The subject is:
`+h:h,v=d.length===0&&h.length===0||d.length>bne||h.length>_ne;f.useEffect(()=>{t===""&&(async()=>(u(!0),await g({entry_uuid:e.entryUUID,read_write_token:null},{onSuccess:_=>{n(_.subject),p(_.subject)},onSettled:()=>{u(!1)}})))()},[t,g,e.entryUUID,n]);const x=f.useCallback(()=>r(y),[y,r]);return c?l.jsx(Wi,{}):l.jsxs("div",{children:[l.jsx(el,{className:"mb-sm",isMobileUserAgent:i,isMobileStyle:o,onChange:m,value:d,label:a({defaultMessage:"Style",id:"7mL9QEUFav"}),placeholder:a({defaultMessage:"Use detailed brush strokes.",id:"FqRwHGXuKd"}),maxLength:bne}),l.jsx(el,{isMobileUserAgent:i,isMobileStyle:o,onChange:p,label:a({defaultMessage:"Subject",id:"LLtKhppiyE"}),value:h,maxLength:_ne}),l.jsx("div",{className:"mt-md flex",children:l.jsx(ye,{text:a({defaultMessage:"Submit",id:"wSZR47Y5kj"}),disabled:v,variant:"primary",onClick:x})})]})});GEe.displayName="GenerateImageCustomInput";var xy=(e=>(e.PAINTING="PAINTING",e.PHOTOGRAPH="PHOTOGRAPH",e.ILLUSTRATION="ILLUSTRATION",e.DIAGRAM="DIAGRAM",e))(xy||{});const $l=A.memo(({icon:e,text:t,onClick:n})=>l.jsxs(z,{variant:"offset",bgHover:"offsetPlus",className:"flex aspect-video cursor-pointer flex-col items-center justify-center rounded border",onClick:n,children:[l.jsx(D,{variant:"section-title",children:l.jsx(xt,{icon:e})}),l.jsx(D,{variant:"smallBold",children:t})]}));$l.displayName="StyleChoice";const bOt=A.memo(({onStyleChoiceClick:e})=>{const t=f.useCallback(()=>e("PAINTING"),[e]),n=f.useCallback(()=>e("PHOTOGRAPH"),[e]),r=f.useCallback(()=>e("ILLUSTRATION"),[e]),s=f.useCallback(()=>e("DIAGRAM"),[e]);return l.jsxs(z,{className:"gap-sm grid grid-cols-2",children:[l.jsx($l,{icon:VEe.faBrush,onClick:t,text:"Painting"}),l.jsx($l,{icon:$Ee.faCameraRetro,onClick:n,text:"Photograph"}),l.jsx($l,{icon:HEe.faPencil,onClick:r,text:"Illustration"}),l.jsx($l,{icon:WEe.faCompassDrafting,onClick:s,text:"Diagram"})]})});bOt.displayName="GenerateImageTemplates";const qEe=A.memo(({icon:e,text:t,subtitle:n,onClick:r,hideOnClick:s=!0,disabled:a=!1,...o})=>{const[i,c]=f.useState(!0),u=f.useCallback(()=>{!a&&r&&r(),!a&&s&&c(!1)},[a,s,r]);return i?l.jsx(z,{bgHover:a?void 0:"offset",className:B("mb-sm px-md py-sm w-full select-none rounded-md border border-dashed",{"cursor-pointer":!a,"opacity-75":a}),onClick:u,...o,children:l.jsxs("div",{className:"gap-sm flex items-center justify-between",children:[l.jsxs(D,{variant:"smallBold",className:"gap-x-sm flex items-center",children:[l.jsx(xt,{fixedWidth:!0,icon:e}),l.jsxs("div",{children:[l.jsx("div",{children:t}),n&&l.jsx(D,{variant:"tiny",color:"light",children:n})]})]}),l.jsx(D,{color:"super",children:l.jsx(xt,{fixedWidth:!0,icon:L9.faPlus})})]})}):null});qEe.displayName="ThreadEntryAccessoryButton";const _Ot=A.memo(({icon:e,message:t,variant:n="good",actionList:r,title:s,dismissable:a,onDismiss:o,size:i="regular",pointerVariant:c="none",testId:u,isMobileStyle:d,className:m})=>{const h=r&&r.length>0&&l.jsx("div",{className:"gap-x-sm flex",children:r?.map((y,v)=>y.visible?y.items&&y.items.length>0?l.jsx(en,{isMobileStyle:d,items:y.items,children:l.jsx(ye,{size:Ft.small,text:y.text,variant:y.variant,icon:y.icon,onClick:y.onClick,debounce:y.debounce})},y.text??v):l.jsx("div",{className:"relative flex h-full items-center",children:l.jsx(ye,{size:Ft.small,text:y.text,variant:y.variant,icon:y.icon,onClick:y.onClick,toolTip:y.tooltip,tooltipLayout:"bottom",disabled:y.disabled,isLoading:y.isLoading,debounce:y.debounce})},y.text??v):l.jsx(A.Fragment,{},v))}),p=f.useMemo(()=>B({"text-foreground":n==="good","text-caution":n==="warning"}),[n]),g=f.useMemo(()=>{if(n==="good")return"super";if(n==="warning")return"red";if(n==="info")return"textColor"},[n]);return t==null?null:l.jsxs("div",{"data-testid":u,children:[c!=="none"&&l.jsx("div",{className:B("mt-sm px-md flex",{"justify-start":c==="left","justify-end":c==="right"||c==="landing-page-right","pr-[75px]":c==="landing-page-right"}),children:l.jsx("div",{className:B("border-b-offset h-0 w-0 border-b-[15px] border-l-[10px] border-r-[10px] border-l-transparent border-r-transparent")})}),l.jsxs(z,{variant:"offset",className:B("gap-sm relative flex flex-col items-center justify-between rounded-lg md:flex-row",{"p-sm":i==="small","p-md":i==="regular"},m),children:[a&&l.jsx("div",{className:"right-xs top-xs absolute",children:l.jsx(ke,{"aria-label":"Dismiss",icon:Xt,size:"small",onClick:o})}),l.jsx("div",{children:l.jsxs("div",{className:"gap-x-md flex items-center",children:[l.jsx(z,{variant:g,className:"flex size-11 shrink-0 items-center justify-center rounded-full",children:l.jsx(D,{variant:i==="regular"?"baseSemi":"smallBold",color:n==="warning"?"white":"defaultInverted",children:e&&l.jsx(be,{icon:e})})}),l.jsxs("div",{children:[l.jsx(D,{variant:s&&i==="regular"?"baseSemi":"smallBold",className:p,children:s||t}),s&&t&&l.jsx(D,{variant:i==="regular"?"base":"small",children:t})]})]})}),h]})]})}),wOt=e=>!!e?.displayName?.startsWith("Icon"),SOt=e=>!!e?.prefix?.startsWith("fa"),wne={page:"page-title",section:"section-title",subsection:"baseSemi"},COt={page:"lg",section:"base",subsection:"md"},EOt=({icon:e,variant:t})=>wOt(e)?l.jsx(be,{icon:e,size:COt[t]}):SOt(e)?l.jsx(xt,{icon:e,size:"sm"}):null,KEe=A.memo(({title:e,icon:t,subtitle:n,actionList:r,search:s,variant:a="page",noBorder:o=!1,center:i="md",background:c="background",testId:u,isMobileStyle:d,leadingComponent:m,trailingComponent:h})=>{const p=r&&r.length>0&&l.jsx("div",{className:"gap-x-sm flex",children:r?.map((y,v)=>y.visible?y.items&&y.items.length>0?l.jsx(en,{isMobileStyle:d,items:y.items,children:l.jsx(ye,{testId:u,size:y.size??Ft.small,text:y.text,variant:y.variant,icon:y.icon,onClick:y.onClick,debounce:y.debounce})},y.text??v):l.jsx("div",{className:"relative flex h-full items-center",children:l.jsx(ke,{testId:u,size:y.size??Ft.small,text:y.text,variant:y.variant,icon:y.icon,onClick:y.onClick,toolTip:y.tooltip,tooltipLayout:"bottom",disabled:y.disabled,debounce:y.debounce,isLoading:y.isLoading})},y.text??v):l.jsx(A.Fragment,{},v))}),g=l.jsxs("div",{children:[l.jsxs("div",{className:"gap-x-sm flex items-center",children:[t&&l.jsx(D,{variant:wne[a]??"section-title",children:l.jsx(EOt,{icon:t,variant:a})}),l.jsx(D,{variant:wne[a]??"section-title",children:e})]}),n&&l.jsx(D,{variant:a==="page"?"base":"small",color:"light",className:"mt-sm",children:n})]});return l.jsx(z,{variant:c,className:B({"sticky top-0 z-[5] flex items-center rounded-t-xl":a==="page","border-b":!o,"h-headerHeight":a==="page"&&!s,"pt-md md:pb-md":a==="page"&&s}),children:l.jsx(z,{className:B("w-full",{"px-sm md:px-lg mx-auto max-w-screen-md":a==="page"&&i==="md","max-w-threadWidth px-md md:px-lg mx-auto":a==="page"&&i==="lg"}),children:l.jsxs(z,{variant:c,className:B("gap-md flex flex-col md:flex-row md:items-center md:justify-between",{"h-14":!s&&a==="section"}),children:[l.jsxs("div",{className:"md:hidden",children:[l.jsxs("div",{className:"gap-xs flex w-full shrink-0 items-center",children:[m,l.jsxs("div",{className:"gap-sm flex w-full justify-between",children:[g,p]})]}),s&&l.jsx("div",{className:"mt-md w-full max-w-md",children:s})]}),l.jsxs("div",{className:"gap-sm hidden grow items-center justify-between md:flex",children:[g,l.jsxs("div",{className:"gap-sm flex grow items-center justify-end",children:[p,s&&l.jsx("div",{className:"max-w-md grow",children:s})]}),h]})]})})})});KEe.displayName="Header";const YEe=A.memo(({userCreateLimit:e,onGenerateClick:t,isDisabled:n,entry:r,btnText:s,buttonComponent:a})=>{const{$t:o}=X(),[i,c]=f.useState(!1),[u,d]=f.useState(!1),[m,h]=f.useState(""),[p,g]=f.useState(""),y=Je(),{hasAccessToProFeatures:v}=Nt(),{isMobileStyle:x,isMobileUserAgent:b}=Ce(),{openVisitorLoginUpsell:_}=$n({enabled:!y}),{trackEvent:w}=Te(),{openModal:S}=_t(),C=v&&e===0,E=v&&e<10;let M=Gre;v?C&&(M=th):M=e8;const T=f.useCallback(V=>{d(!1),w("generate image style clicked",{entryUUID:r.entryUUID,style:V}),t({style:V,customInstructions:null,onFailure:W=>h(W)})},[r.entryUUID,t,w]),I=f.useCallback(V=>{d(!1),c(!1),t({style:"custom",customInstructions:V,onFailure:W=>h(W)}),w("click image gen custom prompt submit",{prompt:V})},[t,w]),j=f.useCallback(()=>{y?v?d(!0):S("pricingModal",{redirectUrl:"",pitchMessage:{title:o({defaultMessage:"Generate images with {pro}",id:"lRrjmenIbD"},{pro:"Pro"}),description:o({defaultMessage:"Visualize your answers with images",id:"mmH7FzyH04"})},origin:Be.GENERATE_IMAGE}):_({title:o({defaultMessage:"Sign in to generate images",id:"rH/ZsL5HtP"}),origin:Be.GENERATE_IMAGE}),w("generate image button clicked",{entryUUID:r.entryUUID,queryStr:r.entryTitle})},[r.entryTitle,r.entryUUID,y,v,_,S,o,w]),N=f.useCallback(()=>c(V=>!V),[]),P=f.useCallback(()=>T(xy.PAINTING),[T]),R=f.useCallback(()=>T(xy.PHOTOGRAPH),[T]),k=f.useCallback(()=>T(xy.ILLUSTRATION),[T]),O=f.useCallback(()=>T(xy.DIAGRAM),[T]),L=f.useMemo(()=>[{icon:f8,tooltipLayout:"right",tooltip:o({defaultMessage:"Custom prompt",id:"zp4jaBPFMA"}),pill:!0,visible:!0,variant:i?"primary":"common",onClick:N}],[o,i,N]),F=f.useMemo(()=>l.jsxs("div",{className:"space-y-md p-sm pt-0",children:[l.jsx(KEe,{title:o(i?{defaultMessage:"Custom prompt",id:"zp4jaBPFMA"}:{defaultMessage:"Choose a style",id:"AU4HcqqKpC"}),variant:"section",isMobileStyle:x,actionList:L}),!i&&l.jsxs(z,{className:"gap-sm grid grid-cols-2",children:[l.jsx($l,{icon:VEe.faBrush,onClick:P,text:o({defaultMessage:"Painting",id:"z/mCLzI8Jj"})}),l.jsx($l,{icon:$Ee.faCameraRetro,onClick:R,text:o({defaultMessage:"Photograph",id:"a3GPHb7Rbe"})}),l.jsx($l,{icon:HEe.faPencil,onClick:k,text:o({defaultMessage:"Illustration",id:"GWdYQ0hPUg"})}),l.jsx($l,{icon:WEe.faCompassDrafting,onClick:O,text:o({defaultMessage:"Diagram",id:"PBUs06BBR7"})})]}),i&&l.jsx(GEe,{entry:r,imageGenSubject:p,setImageGenSubject:g,onSubmit:I})]}),[o,I,L,r,p,x,O,k,P,R,i]),U=f.useCallback(()=>{d(!1),c(!1)},[]);return m!==""?l.jsx(_Ot,{isMobileStyle:x,message:m,icon:hke}):l.jsx(DF,{isMobileStyle:x,isOpen:u,onClose:U,content:F,children:l.jsx(bn,{isMobileUserAgent:b,tooltipText:o({defaultMessage:"{remaining} left today",id:"V9HtlcGCOC"},{remaining:e}),tooltipLayout:"bottom",showTooltip:E,asChild:!0,children:a?a({onClick:j,isRateLimitReached:C,isDisabled:n,buttonIcon:M,text:s}):l.jsx(qEe,{text:s,subtitle:C?o({defaultMessage:"Limit reached. Come back soon.",id:"LPlQBHfRcL"}):void 0,disabled:C||n,icon:M,hideOnClick:!1,onClick:j},"imageGenerate")})})});YEe.displayName="GenerateImageButton";const Za=f.memo(({children:e,id:t})=>{const n={hidden:{opacity:0},visible:{opacity:1}};return l.jsx(_e.div,{className:"relative",variants:n,initial:"hidden",animate:"visible",exit:"hidden",transition:{duration:.1,ease:"easeInOut"},children:e},t)});Za.displayName="AnswerModeContainer";const MOt=({durationMinutes:e,enabled:t=!0,maxProgress:n=95})=>{const[r,s]=f.useState(2),[a,o]=f.useState(e*60),i=f.useRef(void 0),c=f.useRef(void 0),u=f.useCallback(()=>{if(!t)return;i.current&&clearTimeout(i.current);const d=Math.random()*1500+500;i.current=setTimeout(()=>{const m=Date.now(),h=(m-(c.current??m))/1e3,p=e*60,g=Math.min(h/p*100,n),y=1+Math.random()*2,v=Math.random()*4-2;let x=r+y+v;const b=Math.min(g+10,n);x=Math.min(x,b),x=Math.max(r,Math.min(x,n)),s(x);const _=x/h,S=(n-x)/_,C=Math.max(0,Math.min(S,p-h));o(Math.round(C)),x<n&&u()},d)},[t,e,n,r]);return f.useEffect(()=>{if(!t){s(2),o(e*60);return}return c.current=Date.now(),u(),()=>{i.current&&clearTimeout(i.current)}},[t,e,u]),f.useEffect(()=>{t&&(s(2),o(e*60),c.current=Date.now())},[t,e]),f.useMemo(()=>({percentCompleted:Math.round(r),percentRemaining:Math.round(100-r),estimatedSecondsRemaining:a}),[r,a])},TOt=({researchPlan:e,reasoningPlan:t,blocks:n,hasAnswer:r,isProReasoningMode:s,displayModel:a})=>{const o=t?.goals?.slice(1)??ce,i=a===fe.O3_PRO,c=MOt({durationMinutes:5,enabled:i&&!r,maxProgress:95}),u=f.useMemo(()=>!e||r||s&&o.length>0,[e,r,s,o.length]),d=f.useMemo(()=>!t&&!s||!!t?.final,[t,s]),m=r&&d&&u,h=f.useMemo(()=>d?null:t?.goals[t.goals.length-1],[t,d]),p=f.useMemo(()=>{if(i&&!r)return c;let g=0,y=0;if(Array.isArray(n)){for(const x of n)if(x.intended_usage==="plan"&&x.plan_block){const b=x.plan_block;b.eta_seconds_remaining!==void 0&&(g=b.eta_seconds_remaining),b.pct_complete!==void 0&&(y=b.pct_complete)}}const v=y||2;return{estimatedSecondsRemaining:g,percentCompleted:v,percentRemaining:100-v}},[n,i,r,c]);return f.useMemo(()=>({reasoningGoals:o,isResearchPlanFinished:u,isReasoningPlanFinished:d,isAllPlansFinished:m,activeReasoningGoal:h,...p}),[o,u,d,m,h,p])},yzt="/static/images/agent-favicons/gmail.svg",vzt={click:{message:J({defaultMessage:"Clicking",id:"n43/KMHgLD"}),icon:Ske},paused:{message:J({defaultMessage:"Paused",id:"C2iTEHtK//"}),icon:wke},fill:{message:J({defaultMessage:"Filling out a form",id:"5i0X5DesMM"}),icon:_ke},search:{message:J({defaultMessage:"Searching",id:"IfE0if3ytt"}),icon:fo},navigate:{message:J({defaultMessage:"Navigating",id:"3O6LMNhb0M"}),icon:zre},press_key:{message:J({defaultMessage:"Pressing key",id:"R6bmgzv6Xs"}),icon:Xb},scroll_page:{message:J({defaultMessage:"Scrolling",id:"/UUUqdefcb"}),icon:bke},reasoning:{message:J({defaultMessage:"Reasoning",id:"Aw3qRf7hyO"}),icon:Gl},working:{message:J({defaultMessage:"Working",id:"gAR0atqpRn"}),icon:xke},finished:{message:J({defaultMessage:"Done",id:"JXdbo8Vnlw"}),icon:Ea},reading:{message:J({defaultMessage:"Reading",id:"MOK/yKIpYX"}),icon:Ra},reading_browser:{message:J({defaultMessage:"Reviewing your tabs and browser history",id:"P+tFAY9IRT"}),icon:Ra},getting_source:{message:J({defaultMessage:"Getting source",id:"Z1eFpRpq7v"}),icon:Ra},getting_sources:{message:J({defaultMessage:"Getting sources",id:"Jv/OJ6AjyO"}),icon:Ra},reviewing_source:{message:J({defaultMessage:"Reviewing source",id:"ymFEF2YHhs"}),icon:Ra},reviewing_sources:{message:J({defaultMessage:"Reviewing sources",id:"/NZJDBzKok"}),icon:Ra},reviewing_memory:{message:J({defaultMessage:"Reviewing memory",id:"piUVOodSmM"}),icon:Ra},reviewing_memories:{message:J({defaultMessage:"Reviewing memories",id:"VgUfUXIIey"}),icon:Ra},reviewing_conversation_history:{message:J({defaultMessage:"Reviewing previous searches",id:"jfMIJw1AFd"}),icon:Ra},reading_tabs:{message:J({defaultMessage:"Reviewing your tabs",id:"cE3TzCT3eK"}),icon:Ra},building_app:{message:J({defaultMessage:"Building application",id:"qK6gEQyvil"}),icon:pB},creating_chart:{message:J({defaultMessage:"Creating chart",id:"yc5YxtS5VS"}),icon:vke},thinking:{message:J({defaultMessage:"Thinking",id:"AHQWDTo4+e"}),icon:Gl},reading_history:{message:J({defaultMessage:"Reviewing your browser history",id:"7cZkJ7qeNW"}),icon:zM},searching_browser:{message:J({defaultMessage:"Searching your browser",id:"i91D1hXua6"}),icon:zM},searching_open_tabs:{message:J({defaultMessage:"Searching open tabs",id:"xHbSQOjdLq"}),icon:yke},opening_tab:{message:J({defaultMessage:"Opening tab",id:"ySnoI+lduZ"}),icon:yB},closing_tabs:{message:J({defaultMessage:"Closing your tabs",id:"2KnXtfjRKV"}),icon:gB},searching_gmail:{message:J({defaultMessage:"Searching your email",id:"X1ami4cm1T"}),icon:GM},emailing:{message:J({defaultMessage:"Emailing",id:"QRygokyD+u"}),icon:GM},searching_calendar:{message:J({defaultMessage:"Searching your calendar",id:"nH9G8cL0Ys"}),icon:qM},conclusion:{message:J({defaultMessage:"Wrapping up",id:"DN3hjkyzeT"}),icon:null},generating_images:{message:J({defaultMessage:"Generating",id:"NAZfqr2apb"}),icon:Gre},presenting_images:{message:J({defaultMessage:"Presenting",id:"BlxYo7+tmK"}),icon:ere},grouping_tabs:{message:J({defaultMessage:"Grouping tabs",id:"Fg6l7eg2HV"}),icon:gke},ungrouping_tabs:{message:J({defaultMessage:"Ungrouping tab groups",id:"dbpFCBu2NQ"}),icon:pke},searching_tab_groups:{message:J({defaultMessage:"Searching tab groups",id:"V+4/ioYMPd"}),icon:fo},getting_freebusy:{message:J({defaultMessage:"Checking availability",id:"ZamRNp2QgI"}),icon:qM},getting_user_info:{message:J({defaultMessage:"Searching your contacts",id:"gPpZJKZdnL"}),icon:dg},found_contacts:{message:J({defaultMessage:"Found contacts",id:"2zmZgbYnmk"}),icon:dg},no_contacts_found:{message:J({defaultMessage:"No contacts found",id:"JhY7bAH15Y"}),icon:dg},selecting_contacts:{message:J({defaultMessage:"Selecting contacts",id:"OQhQc1Jomc"}),icon:dg},getting_contact_details:{message:J({defaultMessage:"Getting contact details",id:"p391mWkGfv"}),icon:dg},scheduling:{message:J({defaultMessage:"Scheduling",id:"5lQx5rgTEW"}),icon:vB},scheduled:{message:J({defaultMessage:"Scheduled",id:"cXAlMRerxW"}),icon:vB},reading_events:{message:J({defaultMessage:"Getting event details",id:"0QgD+ftRet"}),icon:qM},reading_emails:{message:J({defaultMessage:"Reviewing emails",id:"f/yAuwo+Vl"}),icon:GM},OPEN_TAB:{message:J({defaultMessage:"Open tabs",id:"KO2pxljl8b"}),icon:yB},RECENTLY_CLOSED_TAB:{message:J({defaultMessage:"Recently closed tabs",id:"GrcBtKIzPh"}),icon:gB},BROWSER_HISTORY:{message:J({defaultMessage:"Browser history",id:"DtBSny6kw5"}),icon:zM},MCP_TOOL:{message:J({defaultMessage:"Connecting to {toolName}",id:"d7xGk+onCz"}),icon:pB}},Xh={initial:{opacity:0,position:"absolute",width:"100%"},animate:{opacity:1,position:"relative",transition:{opacity:{duration:.3}}},exit:{opacity:0,position:"absolute",width:"100%",transition:{opacity:{duration:.3}}}},Vj=A.memo(({onClick:e})=>{const[t,n]=f.useState(!1),r=f.useCallback(()=>{n(!0),e()},[e]),{searchMode:s}=wn(),a=f.useMemo(()=>l.jsx(he,{defaultMessage:"Skip remaining steps",id:"nWmXYwgk8a"}),[]);return l.jsx(D,{color:"light",variant:"small",className:"text-pretty",children:l.jsx("div",{className:"relative min-h-[20px] w-full",children:t?l.jsx(_e.div,{initial:"initial",animate:"animate",exit:"exit",variants:Xh,children:l.jsx(Ln,{variant:"super",as:"div",className:"px-sm flex h-6 items-center",children:s===ae.STUDIO?l.jsx(he,{defaultMessage:"Creating",id:"rQUSqe6JcA"}):l.jsx(he,{defaultMessage:"Answer",id:"4hkQO/op5u"})})},"skipping-message"):l.jsx(_e.div,{initial:"initial",animate:"animate",exit:"exit",variants:Xh,children:l.jsx(ye,{size:"tiny",onClick:r,variant:"common",icon:Cke,extraCSS:B("rounded-lg"),text:a})},"skip-button")})})});Vj.displayName="FastAnswerButton";const QEe=A.memo(()=>{const{trackEvent:e}=Te(),{$t:t}=X(),{permission:n,requestPermission:r}=jhe({windowsAppOnly:!1}),s=f.useCallback(async()=>{try{e("permission notifications requested",{origin:"pro_reasoning_status_updater"}),await r()?e("permission notifications granted",{origin:"pro_reasoning_status_updater"}):e("permission notifications not granted",{origin:"pro_reasoning_status_updater"})}catch(o){ee.error("Error requesting notification permission:",o)}},[e,r]),a=Kr(n).with("default",()=>({variant:"primaryGhost",text:t({id:"ipGe+BIJx7",defaultMessage:"Notify me"}),icon:Tu})).with("granted",()=>({variant:"border",text:t({id:"V52jNnY+6M",defaultMessage:"Enabled"}),icon:Eke,toolTip:t({id:"ktmy4MhbQv",defaultMessage:"We'll notify you when done."}),extraCSS:"!pointer-events-none border-none !bg-transparent"})).otherwise(()=>({variant:"border",icon:Mke,toolTip:t({id:"D0ozicKDgX",defaultMessage:"Notifications blocked. Please check browser settings."}),extraCSS:"!pointer-events-none border-none !bg-transparent"}));return l.jsx(ye,{size:"tiny",onClick:s,...a,extraCSS:B("rounded-lg",a.extraCSS)})});QEe.displayName="NotificationButton";const XEe=A.memo(({estimatedSecsRemaining:e,placeholderMessage:t="Creating a plan",resultType:n="project"})=>{const{formatNumber:r,formatMessage:s}=X();return l.jsx(D,{variant:"small",color:"light",className:"text-pretty",children:l.jsx("div",{className:"relative min-h-[20px] w-full",children:l.jsx(st,{mode:"sync",initial:!1,children:e?l.jsx(_e.div,{initial:"initial",animate:"animate",exit:"exit",variants:Xh,children:l.jsx(he,{defaultMessage:"{time} left to gather sources and create your {resultType}.",id:"AhSqF1URDZ",values:{time:l.jsx(D,{inline:!0,variant:"smallBold",as:"span",children:Math.round(e/60)===1?s({defaultMessage:"A minute",id:"X4ic2xRHa2"}):r(Math.round(e/60),{style:"unit",unit:"minute",unitDisplay:"long"})}),resultType:s(n==="project"?{defaultMessage:"project",id:"RbFAl7UGmp"}:{defaultMessage:"report",id:"TmfXGUz23p"})}})},"time-remaining"):l.jsx(_e.div,{initial:"initial",animate:"animate",exit:"exit",variants:Xh,children:l.jsx(Ln,{variant:"super",as:"span",children:t})},"creating-plan")})})})});XEe.displayName="TimeRemaining";const FM=A.memo(({estimatedSecsRemaining:e,percentCompleted:t,placeholderMessage:n,resultType:r,showAnimatePresence:s=!0,wrapperClassName:a="relative min-h-[20px] w-full"})=>{const o=!t||t<95?l.jsx(_e.div,{initial:"initial",animate:"animate",exit:"exit",variants:Xh,children:l.jsx(XEe,{estimatedSecsRemaining:e,placeholderMessage:n,resultType:r})},"time-remaining"):l.jsx(_e.div,{initial:"initial",animate:"animate",exit:"exit",variants:Xh,children:l.jsx(D,{color:"light",variant:"small",className:"text-pretty",children:l.jsx(Ln,{variant:"super",as:"span",children:l.jsx(he,{defaultMessage:"Finishing up...",id:"JUr8ErKBCt"})})})},"finishing-message");return s?l.jsx("div",{className:a,children:l.jsx(st,{mode:"sync",initial:!1,children:o})}):o});FM.displayName="ProgressMessage";const ZEe=A.memo(({percentCompleted:e})=>l.jsx("div",{className:"gap-two relative flex w-full flex-col",children:l.jsx(FM,{percentCompleted:e,placeholderMessage:"Reasoning with o3-pro"})}));ZEe.displayName="O3Message";const JEe=A.memo(({percentCompleted:e=1,className:t,showPlayHead:n=!0})=>l.jsx("div",{className:B("pb-xs relative w-full flex-col",t),children:l.jsxs("div",{className:"bg-offsetPlus h-xs relative left-0 top-0 flex w-full rounded-full",children:[l.jsx("div",{className:"bg-super shadow-super/15 left-0 top-0 h-full rounded-full shadow-[0_0_2px_1px] transition-[width] duration-200 ease-in-out",style:{width:`${e}%`}}),n&&l.jsx("div",{className:"bg-super -ml-two -mt-two shadow-super/50 size-sm rounded-full shadow-[0_0_5px_1px,-4px_0_3px_-2px]"})]})}));JEe.displayName="ProgressBar";const eMe=A.memo(({searchMode:e,estimatedSecondsRemaining:t,percentCompleted:n})=>l.jsx("div",{className:"gap-two relative flex w-full flex-col",children:l.jsx(D,{color:"light",variant:"small",className:"text-pretty",children:e===ae.RESEARCH&&l.jsx(FM,{estimatedSecsRemaining:t,percentCompleted:n,placeholderMessage:"It takes a few minutes to gather sources and create your report.",resultType:"report",showAnimatePresence:!1,wrapperClassName:""})})}));eMe.displayName="ResearchMessage";const tMe=A.memo(({estimatedSecsRemaining:e,percentCompleted:t})=>l.jsx("div",{className:"gap-two pb-xs relative flex w-full flex-col",children:l.jsx(FM,{estimatedSecsRemaining:e,percentCompleted:t,placeholderMessage:"Creating a plan"})}));tMe.displayName="StudioMessage";const nMe=A.memo(({className:e,style:t,skipSearchEnabled:n,onSkipSearch:r})=>{const{searchMode:s,researchPlan:a,reasoningPlan:o,steps:i,hasAnswer:c,isProReasoningMode:u,result:{backend_uuid:d,blocks:m,display_model:h}}=wn(),{estimatedSecondsRemaining:p,percentCompleted:g,percentRemaining:y}=TOt({researchPlan:a,reasoningPlan:o,blocks:m,hasAnswer:c,isProReasoningMode:u??!1,displayModel:h}),v=Math.min(g,95),x=h===fe.O3_PRO,b=s===ae.RESEARCH||s===ae.STUDIO||x,_=i.some(w=>w.step_type==="ENTROPY_REQUEST");return b?l.jsxs(_e.div,{initial:{opacity:0,y:-4},className:e,style:t,animate:{opacity:1,y:0,transition:{ease:wu,duration:.2,delay:.05}},exit:{opacity:0,y:-4,transition:{ease:wu,duration:.5}},children:[l.jsxs(z,{variant:"offset",className:B(x?"shadow-s pt-md pb-md rounded-xl border px-6":"pb-md rounded-xl border px-6 pt-5 shadow-sm","flex flex-col gap-3"),children:[l.jsxs(z,{className:B("gap-sm flex flex-row items-start"),children:[l.jsx("div",{className:"gap-sm pt-two relative flex grow",children:s===ae.RESEARCH?l.jsx(eMe,{searchMode:s,estimatedSecondsRemaining:p,percentCompleted:v}):x?l.jsx(ZEe,{percentCompleted:v}):l.jsx(tMe,{estimatedSecsRemaining:p,percentRemaining:y,percentCompleted:v,backendUuid:d})}),l.jsxs("div",{className:"gap-sm flex items-start",children:[n&&r&&!x&&l.jsx(Vj,{onClick:r}),!x&&l.jsx(QEe,{})]})]}),l.jsx(JEe,{percentCompleted:v,className:"my-1.5"})]}),l.jsx("div",{className:"from-base via-base absolute top-full h-5 w-full bg-gradient-to-b from-0% via-[calc(100%_-_12px)] to-transparent to-100% backdrop-blur-[0.25px]"})]},"progress-banner"):_&&n&&r?l.jsx(Vj,{onClick:r}):null});nMe.displayName="ProgressBanner";const rMe=f.memo(()=>l.jsxs(Ln,{className:"gap-md flex flex-col",children:[l.jsx(N6,{}),l.jsx(N6,{}),l.jsx(N6,{})]})),N6=f.memo(()=>l.jsxs("div",{className:"gap-sm flex items-center",children:[l.jsx(z,{variant:"offset",className:"size-32 shrink-0 rounded-md"}),l.jsxs("div",{className:"gap-sm flex w-full flex-col",children:[l.jsx(z,{variant:"offset",className:"h-4 w-full rounded-full"}),l.jsx(z,{variant:"offset",className:"h-4 w-2/3 rounded-full"})]})]})),kOt=f.memo(()=>{const{searchMode:e,inFlight:t}=wn(),n=e==ae.STUDIO;return l.jsxs("div",{children:[n&&t&&l.jsx(nMe,{}),l.jsxs(Ln,{className:B("gap-md flex",{"max-w-threadContentWidth mx-auto":!n}),children:[n&&l.jsxs("div",{className:"gap-md flex w-[30%] flex-col",children:[l.jsx(z,{variant:"offset",className:"h-4 w-1/2 rounded-full"}),l.jsxs("div",{className:"gap-sm flex",children:[l.jsx(z,{variant:"offset",className:"size-3.5 rounded-full"}),l.jsx(z,{variant:"offset",className:"h-4 w-2/3 rounded-full"})]}),l.jsxs("div",{className:"gap-sm flex",children:[l.jsx(z,{variant:"offset",className:"size-3.5 rounded-full"}),l.jsx(z,{variant:"offset",className:"h-4 w-2/3 rounded-full"})]})]}),l.jsxs("div",{className:"gap-sm flex w-[70%] flex-col",children:[l.jsx(z,{variant:"offset",className:"h-4 w-[70%] rounded-full"}),l.jsx(z,{variant:"offset",className:"h-4 w-4/5 rounded-full"}),l.jsx(z,{variant:"offset",className:"h-4 w-1/2 rounded-full"})]})]})]})}),sMe=f.memo(({count:e,className:t})=>l.jsx(z,{className:B("flex select-none items-center pt-px text-center font-mono text-xs tabular-nums leading-none",t),as:"span",children:l.jsx(nu,{value:e})}));sMe.displayName="AnimatedCounter";function aMe({entryUUID:e,reason:t,callback:n}){const[r,s]=f.useState(!1),a=f.useRef(!1),{inFlight:o}=zt();return f.useEffect(()=>{!o&&a.current&&(a.current=!1,s(!1),n())},[o,n]),{terminateEntry:()=>{a.current=!0,s(!0),Mv({entryUUID:e,reason:t})},isTerminating:r}}const NOt=f.memo(({lineThickness:e,...t})=>l.jsxs("svg",{width:"2820",height:"74",viewBox:"0 0 2820 74",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:[l.jsx("path",{d:"M29.6848 25.4603L48.3092 41.1547V64.3955L29.6848 49.0293M29.6848 25.4603L10.9465 41.2436V64.7306L29.6316 49.0293M29.6848 25.4603H3.35229V49.1113H10.3379M29.6848 25.4603H56.0553V49.1113H48.6552M29.6848 25.4603L10.9465 9.77618V24.7752M29.6848 25.4603L48.3092 9.77618V24.7591M29.6848 25.4603L29.6848 2.77313V24.382M29.6848 25.4603V49.1113M29.6848 25.4603V71.6755V49.0839",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M209.685 49.029L226.532 65.889V42.256L209.685 25.46L189.647 39.835L189.532 64.785L207.207 50.797",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M209.685 25.46L207.549 47.423V71.566L209.685 49.084M209.685 25.46L183.516 24.701V47.433L189.594 47.823M209.685 25.46L235.855 26.937V50.943L226.655 50.299M209.685 25.46L192.558 8.218V24.1M209.685 25.46L229.708 10.542V26.546M209.685 25.46L211.798 2.855V24.76M209.685 25.46V49.111M269.685 49.029L285.993 66.318V42.675L269.685 25.46L249.061 39.22V63.11L266.369 51.263",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M269.685 25.46L266.606 47.86V71.511L269.685 49.084M269.685 25.46L243.571 22.835V46.558L248.794 47.068M269.685 25.46L295.788 27.702V51.6L286.585 50.723M269.685 25.46L253.227 7.67V24.726M269.685 25.46L290.377 11.28V27.133M269.685 25.46L272.71 2.923V23.098M269.685 25.46V49.111M329.685 49.03L345.299 67.137V43.3L329.685 25.46L308.331 38.51V62.29L325.293 51.73",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M329.685 25.46L325.565 47.635V71.334L329.685 49.084M329.685 25.46L304.726 21.906V45.738L307.934 46.296M329.685 25.46L355.721 28.687V52.584L345.937 51.279M329.685 25.46L314.048 7.233V23.17M329.685 25.46L351.015 11.882V27.907M329.685 25.46L333.714 2.992V22.74M329.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M389.685 49.029L404.201 67.538L404.352 43.92L389.685 25.46L367.86 37.607V61.387L384.2 52.113",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M389.685 25.46L384.523 47.3V71.156L389.685 49.084M389.685 25.46L363.9 20.922V44.754L367.262 45.322M389.685 25.46L415.508 29.78V54.723L404.436 51.688M389.685 25.46L375.021 6.57701V22.724",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M389.685 25.46L411.715 12.838V29.235M389.685 25.46L394.754 3.19701V22.344M389.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M449.685 49.029L463.072 68.404L463.215 44.53L449.685 25.46L427.054 36.842V60.595L442.826 52.515",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M449.685 25.46L443.117 47.129V70.924L449.685 49.084M449.685 25.46L424.143 19.8V44.76L426.599 44.184M449.685 25.46L475.28 30.683V54.58L463.735 52.113M449.685 25.46L436.176 5.976V22.356",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M449.685 25.46L472.414 13.727V30.403M449.685 25.46L456.192 3.539L456.33 21.994M449.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M509.685 49.029L521.673 68.656L521.879 45.127L509.685 25.46L486.385 35.611V59.501L501.389 52.742",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M509.685 25.46L501.711 46.575V70.418L509.685 49.084M509.685 25.46L484.477 18.515V42.481L485.621 42.781M509.685 25.46L534.754 32.077V55.906L522.17 52.482",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M509.685 25.46L497.606 5.374L497.3 22.124M509.685 25.46L533.189 14.79V31.499M509.685 25.46L517.651 3.84V21.876M509.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M569.685 49.03L580.306 69.736V45.91L569.685 25.46L545.564 34.271V58.134L559.659 52.802",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M569.685 25.46L560 46.322V69.98L569.685 49.084M569.685 25.46L545.086 17.121V40.813L545.119 40.824M569.685 25.46L594.185 33.444L594.238 57.334L580.581 52.76M569.685 25.46L559.096 4.69V21.458M569.685 25.46L593.98 16.31L594.119 33.415M569.685 25.46L579.4 4.36V21.53M569.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M629.685 49.03L638.275 70.78V46.58L629.685 25.46L604.774 32.603V56.576L617.836 52.61",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M629.685 25.46L618.29 45.14V69.27L629.685 49.084M629.685 25.46L605.937 15.508V32.273M629.685 25.46L653.478 35.112V58.838L638.453 52.696M629.685 25.46L621.102 3.98V21.387",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M629.685 25.46L654.664 17.842V41.941L653.7 42.217M629.685 25.46L641.361 5.084V21.818M629.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M689.685 49.029L696.089 71.244V47.065L689.685 25.46L664.074 30.744V54.552L675.799 52.019",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M689.685 25.46L676.002 44.34V68.094L689.685 49.084M689.685 25.46L667.092 14.721V29.977M689.685 25.46L712.323 36.944V60.698L696.503 52.601M689.685 25.46L683.353 3.433V21.908",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M689.685 25.46L715.303 19.948V43.855L712.658 44.398M689.685 25.46L703.459 6.06799V22.442M689.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M749.685 49.029L753.271 71.747V47.493L749.685 25.46L723.558 28.365V52.201L733.357 51.009",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M749.685 25.46L733.714 43.157V66.918L749.685 49.084M749.685 25.46L728.673 11.707V27.76M749.685 25.46L770.772 38.83V62.694L753.503 51.57M749.685 25.46L746.12 3.05V22.72",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M749.685 25.46L775.789 22.19V46.083L771.103 46.627",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M765.679 23.49V7.408L749.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M809.685 49.029L809.977 72.045L809.685 47.568V25.46H783.345V49.467L790.992 49.34",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M809.685 25.46L791.205 41.503V64.753L809.685 49.083M809.685 25.46L790.832 9.656V25.143M809.685 25.46L828.674 41.127V64.754L809.685 49.11M809.685 25.46L809.343 2.735",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M809.685 25.46L836.063 25.033V48.753L829.072 48.848M809.685 25.46L828.172 9.24001V25.106M809.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M869.685 49.03L866.405 71.53L866.065 47.01L869.685 25.46L843.558 22.37V46.186L848.429 46.717",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M869.685 25.46L848.696 38.865V62.789L866.042 51.462M869.685 25.46L854.76 7.497V23.406M869.685 25.46L885.633 43.096V66.959L869.685 49.111M869.685 25.46L873.235 3.132V22.9",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M869.685 25.46L895.82 28.304V52.088L885.776 50.944M869.685 25.46L890.726 11.618V27.652M869.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M929.685 49.028L922.004 70.99V46.713L929.685 25.46L904.439 18.734V42.44L906.137 42.884",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M929.685 25.46L906.294 35.826V59.59L921.769 52.64M929.685 25.46L917.34 5.48701L917.202 21.692M929.685 25.46L942.076 45.065V68.9L929.685 49.111M929.685 25.46L937.401 3.78801V21.63",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M929.685 25.46L954.747 31.858V55.698L942.558 52.481M929.685 25.46L953.068 14.763V31.197M929.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M989.685 49.03L977.622 69.38V45.26L989.685 25.46L966.203 15.125V31.444",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M989.685 25.46L964.683 32.077V56.008L977.63 52.423M989.685 25.46L981.627 4.01001V21.74M989.685 25.46L997.788 46.787V70.513L989.685 49.111M989.685 25.46L1001.81 5.23701V21.8",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M989.685 25.46L1013.17 35.468V59.279L998 52.711",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1013.48 42.742L1014.79 42.37V18.372L989.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1049.68 49.029L1034.75 66.743V43.12L1049.68 25.46L1028.76 11.652V27.197",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1049.68 25.46L1023.45 28.18V52.112L1033.53 50.949M1049.68 25.46L1046.22 3.026V22.739M1049.68 25.46L1053.2 47.361V71.388L1049.68 49.111M1049.68 25.46L1065.79 7.507V23.295",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1049.68 25.46L1070.59 38.786V62.78L1053.32 51.489",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1070.94 46.661L1075.96 46.101V22.391L1049.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1108.51 49.947L1090.23 64.228V40.474L1109.68 25.46L1091.89 8.78101V24.188",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1109.68 25.46L1084.75 24.27V48.175L1090.22 48.405M1109.68 25.46L1110.87 2.862L1110.71 24.747M1109.68 25.46L1108.57 47.033V71.716L1109.68 49.111M1109.68 25.46L1129.08 10.132V25.747",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1109.68 25.46L1127.46 41.848V65.568L1109.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1127.63 49.715L1135.96 50.034V26.328L1109.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1163.88 52.298L1147.7 61.414V37.531L1169.68 25.46L1155.29 6.59399V22.504",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1169.68 25.46L1143.85 20.662V44.552L1147.51 45.194M1169.68 25.46L1175.13 3.327L1174.79 22.093M1169.68 25.46L1164.62 47.033L1164.2 71.17L1169.68 49.111L1184.23 67.947V44.145L1169.68 25.46ZM1169.68 25.46L1191.87 12.948V28.924",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1184.43 51.662L1195.53 54.743V29.828L1169.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1220.25 52.825L1206.12 58.508V34.662L1229.68 25.46L1218.52 5.036V21.422",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1229.68 25.46L1204.75 17.627V41.49L1205.54 41.7M1229.68 25.46L1238.81 4.256L1238.64 21.334M1229.68 25.46L1220.73 46.404V70.24L1229.68 49.111L1240.89 69.588V45.758L1229.68 25.46ZM1229.68 25.46L1253.58 15.873V32.521",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1241.03 52.54L1254.41 56.678V32.863L1229.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1289.68 25.46L1264.5 32.081V55.974L1277.2 52.472M1289.68 25.46L1281.65 3.97V21.309M1289.68 25.46L1266.25 14.747V31.563M1289.68 25.46L1301.82 5.35V21.67",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1289.68 49.111L1277.57 69.174V45.365L1289.68 25.46L1314.76 18.389V42.272L1314.08 42.458",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1289.68 25.46L1297.73 46.798V70.544L1289.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1297.9 52.673L1313.16 59.44V35.488L1289.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1349.68 25.46L1323.79 29.631V53.515L1334.71 51.624M1349.68 25.46L1344.45 3.259V22.232M1349.68 25.46L1327.68 12.87V28.975M1349.68 25.46L1364.34 6.717V22.43",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1349.68 49.111L1335.01 67.943V44.053L1349.68 25.46L1375.61 20.877V44.761L1372.31 45.315",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1349.68 25.46L1354.73 47.317V71.173L1349.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1354.79 52.049L1371.71 61.573V37.785L1349.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1409.68 25.46L1383.5 27.452V51.428L1392.53 50.601M1409.68 25.46L1407.03 2.95801V23.477M1409.68 25.46L1389.23 11.092V26.894M1409.68 25.46L1426.44 7.97501V23.577",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1409.68 49.112L1393.01 66.522V42.522L1409.68 25.46L1435.92 23.037V46.975L1430.43 47.422",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1409.68 25.46L1412.44 47.563V71.501L1409.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1412.62 51.087L1430.15 63.391V39.466L1409.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1469.68 25.46L1443.5 25.626V49.323L1450.99 49.239M1469.68 25.46L1469.63 2.79401V2.86401M1469.68 25.46L1450.9 9.64301V25.562M1469.68 25.46L1488.17 9.37001V24.736",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1469.68 49.112L1451.33 65.182V41.237L1469.68 25.46L1496.16 25.142V48.807L1488.91 48.89",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1469.68 25.46L1470 47.754V71.638L1469.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1469.68 49.029L1488.52 64.754V40.916L1469.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1529.68 25.46L1503.5 23.874V47.758L1509.37 48.043M1529.68 25.46L1531.55 2.84801V23.465M1529.68 25.46L1512.36 8.33001V24.23M1529.68 25.46L1549.57 10.545V26.025",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1529.68 49.111L1509.84 63.869V40.061L1529.68 25.46L1556.02 26.756V50.694L1547.51 50.182",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1529.68 25.46L1527.94 47.918V71.474L1529.68 49.111V25.46ZM1529.68 25.46L1547.05 42.091V66.098L1529.68 49.029",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1589.68 25.46L1563.5 22.18V46.007L1568.24 46.554M1589.68 25.46L1593.34 3.09401V22.586M1589.68 25.46L1573.79 7.40001V23.212M1589.68 25.46L1610.79 11.584V27.55",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1585.87 51.573L1568.66 62.693V38.803L1589.68 25.46L1615.89 28.242V52.307L1606.05 51.107",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1589.68 25.46L1586.05 47.645V71.31L1589.68 49.111V25.46ZM1589.68 25.46L1605.57 43.075V67.082L1589.68 49.029",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1649.68 25.46L1623.96 20.819V44.572L1627.42 45.172M1649.68 25.46L1654.72 3.17599V21.958M1649.68 25.46L1635.13 6.55299V22.64M1649.68 25.46L1671.73 12.842V28.897",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1644.41 52.059L1627.59 61.463V37.628L1649.68 25.46L1675.55 29.8V54.747L1664.45 51.7",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1649.68 25.46L1644.38 47.317V71.255L1649.68 49.111V25.46ZM1649.68 25.46L1664.25 44.019V67.929L1649.68 49.029",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1709.68 25.46L1684.35 19.59V43.25L1686.64 43.77M1709.68 25.46L1716.47 3.58701V21.618M1709.68 25.46L1696.43 5.87001V22.235M1709.68 25.46L1732.55 14.018V30.154",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1702.93 52.469L1686.93 60.424V36.452L1709.68 25.46L1735.25 31.14V54.76L1722.16 51.964",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1709.68 25.46L1702.88 47.085V70.9L1709.68 49.111V25.46ZM1709.68 25.46L1722.9 44.757V68.558L1709.68 49.029",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1769.68 25.46L1744.79 18.471V42.224L1746.02 42.562M1769.68 25.46L1777.81 3.99701V21.415M1769.68 25.46L1757.68 5.32301V21.924M1769.68 25.46L1793.25 15.056V31.36",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1761.32 52.76L1746.01 59.44V35.467L1769.68 25.46L1794.76 32.084V55.97L1781.58 52.363",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1769.68 25.46L1761.49 46.729V70.489L1769.68 49.111V25.46ZM1769.68 25.46L1781.63 45.222V69.146L1769.68 49.029",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1829.68 25.46L1805.1 17.39V41.163L1805.4 41.259M1829.68 25.46L1839 4.35201V21.335M1829.68 25.46L1818.87 4.703V21.707M1829.68 25.46L1853.83 15.986V32.568",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1820.07 52.787L1805.53 58.347V34.647L1829.68 25.46L1854.34 33.21V57.037L1841 52.75",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1829.68 25.46L1820.32 46.305V70.148L1829.68 49.111V25.46ZM1829.68 25.46L1840.49 45.66V69.638L1829.68 49.029",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1889.68 25.46L1865.62 16.478L1865.29 33.368M1889.68 25.46L1900.06 4.68V21.433M1889.68 25.46L1879.96 4.42V21.716M1889.68 25.46L1914.28 16.834V40.88L1914.24 40.895M1889.68 25.46L1865.16 33.554V57.444L1879.17 52.685",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1899.9 52.822L1913.91 57.912V34.058L1889.68 25.46L1879.29 45.868V69.806L1889.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1889.68 49.029L1899.43 69.806V46.015L1889.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1949.68 25.46L1925.99 15.695V31.95M1949.68 25.46L1961.1 5.063V21.494M1949.68 25.46L1940.84 4.092V21.5M1949.68 25.46L1974.68 17.79L1974.47 41.702L1973.9 41.872M1949.68 25.46L1924.76 32.706V56.596L1938.1 52.605",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1958.83 52.837L1973.52 58.814V34.733L1949.68 25.46L1938.23 45.615V69.41L1949.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M1949.68 49.029L1958.5 70.298V46.37L1949.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2009.68 25.46L1986.3 14.757V31.231M2009.68 25.46L2021.92 5.44601V21.716M2009.68 25.46L2001.76 3.87401V21.862M2009.68 25.46L2034.73 18.584V42.522L2033.42 42.892M2009.68 25.46L1984.49 31.943V55.858L1997.18 52.461",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2017.96 52.797L2033.06 59.525V35.698L2009.68 25.46L1997.49 45.136V69.026L2009.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2009.68 49.029L2017.51 70.544V46.63L2009.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2069.68 25.46L2046.84 14.317V30.256M2069.68 25.46L2082.74 5.82901V21.933M2069.68 25.46L2062.64 3.71001V21.922M2069.68 25.46L2095.2 19.377V43.287L2092.94 43.803M2069.68 25.46L2044.28 31.26V55.065L2056.51 52.199",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2076.98 52.648L2092.73 60.29V36.218L2069.68 25.46L2056.73 44.713V68.576L2069.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2069.68 49.03L2076.74 70.79V47.018L2069.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2129.68 25.46L2107.19 13.74V29.597M2129.68 25.46L2143.31 6.211V22.141M2129.68 25.46L2123.43 3.464V21.942M2129.68 25.46L2155.41 20.033L2155.2 43.916L2152.65 44.436M2129.68 25.46L2103.94 30.658V54.463L2115.78 52.002",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2136.31 52.545L2152.21 60.783V36.874L2129.68 25.46L2115.95 44.384V68.274L2129.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2129.68 49.029L2135.9 70.968V47.032L2129.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2189.68 25.46L2167.64 13.069V28.892M2189.68 25.46L2204.01 6.43V22.382M2189.68 25.46L2184.31 3.3V22.194M2189.68 25.46L2215.62 20.58V44.518L2212.13 45.137M2189.68 25.46L2163.85 29.865L2163.94 53.862L2174.73 51.834",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2195.71 52.442L2211.87 61.385V37.448L2189.68 25.46L2175.33 44.111V67.974L2189.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2189.68 49.029L2195.25 71.118V47.114L2189.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2249.68 25.46L2227.97 12.556V28.31M2249.68 25.46L2264.62 6.676V22.45M2249.68 25.46L2244.76 3.08V22.463M2249.68 25.46L2275.62 21.072V45.229L2271.85 45.793M2249.68 25.46L2223.76 29.346L2223.94 53.233L2234.52 51.539",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2254.75 52.153L2271.51 61.713V37.913L2249.68 25.46L2234.72 43.728V67.618L2249.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2249.68 49.029L2254.55 71.146V47.14L2249.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2309.68 25.46L2288.37 12.072V27.909M2309.68 25.46L2325.14 7.196V22.866M2309.68 25.46L2305.5 3.026V22.507M2309.68 25.46L2335.72 21.7L2335.62 45.502L2331.57 46.066M2309.68 25.46L2284.77 28.853V52.66L2294.05 51.244",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2314.36 51.989L2331.05 62.26V38.46L2309.68 25.46L2294.2 43.51V67.29L2309.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2309.68 49.029L2313.94 71.378V47.36L2309.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2348.71 27.302V11.671L2369.68 25.46L2385.56 7.414V23.034",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2369.68 25.46L2366.04 2.944V23.073M2369.68 25.46L2395.82 22.11L2395.62 46.158L2391.12 46.671M2369.68 25.46L2343.55 28.222V52.167L2353.56 50.996",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2374.76 51.665L2390.75 62.643V38.813L2369.68 25.46L2353.78 43.14V67.003L2369.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2369.68 49.029L2373.21 71.378V47.332L2369.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2429.68 25.46L2409.04 11.326V26.962M2429.68 25.46L2446.08 7.66V23.246M2429.68 25.46L2426.62 2.944V23.177M2429.68 25.46L2455.93 22.548V46.568L2450.64 47.08M2429.68 25.46L2403.43 27.948V51.62L2413.16 50.69",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2433.12 51.449L2450.35 63.189V39.251L2429.68 25.46L2413.32 42.771V66.69L2429.68 49.112",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2429.68 49.03L2432.71 71.46V47.332L2429.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2489.68 25.46L2469.4 11.01V26.644M2489.68 25.46L2506.48 7.88001V23.456M2489.68 25.46L2487.23 2.91701V24.713M2489.68 25.46L2516 23.095V46.98L2510.45 47.43M2489.68 25.46L2463.4 27.429L2463.43 51.292L2472.71 50.521",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2492.62 51.175L2510.11 63.49V39.415L2489.68 25.46L2472.91 42.553V66.457L2489.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2489.68 49.029L2492.24 71.474V47.4L2489.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2549.68 25.46L2529.67 10.693V26.371M2549.68 25.46L2566.81 8.098V24.768M2549.68 25.46L2547.67 2.821V24.777M2549.68 25.46L2576.07 23.45V47.39L2570.31 47.765M2549.68 25.46L2523.37 27.019L2523.43 50.964L2532.28 50.339",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2551.97 50.759L2569.78 64.726V39.606L2549.68 25.46L2532.56 42.252V66.142L2549.68 49.112",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2549.68 49.029L2551.77 71.515V47.333L2549.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2609.68 25.46L2589.92 10.392V25.937M2609.68 25.46L2627.12 8.31701V23.877M2609.68 25.46L2608.05 2.80701V23.983M2609.68 25.46L2636.14 23.888V47.744L2629.74 48.075M2609.68 25.46L2583.34 26.663L2583.38 50.526L2591.88 50.069",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2611.76 50.677L2629.29 63.873V40.071L2609.68 25.46L2592.23 42.074V65.971L2609.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2609.68 49.029L2611.33 71.542V47.305L2609.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2669.68 25.46L2650.26 10.242V25.778M2669.68 25.46L2687.45 8.56301V24.107M2669.68 25.46L2668.45 2.79401V24.457M2669.68 25.46L2696.14 24.161V48.127L2689.77 48.364M2669.68 25.46L2643.32 26.335L2643.33 50.253L2651.65 49.893",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2671.01 50.121L2689.05 63.9V40.235L2669.68 25.46L2651.95 41.828V65.698L2669.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2669.68 49.029L2670.93 71.556V47.387L2669.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2729.68 25.46L2710.5 9.982V25.512M2729.68 25.46L2747.69 8.782V24.307M2729.68 25.46L2728.87 2.78V24.433M2729.68 25.46L2756.14 24.49V48.236L2749.71 48.449M2729.68 25.46L2703.29 25.782V49.597L2711.26 49.45",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2730.41 49.695L2748.94 64.53V40.59L2729.68 25.46L2711.6 41.705V65.493L2729.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2729.68 49.029L2730.61 71.638V47.606L2729.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2789.68 25.46L2770.67 9.72201V25.286M2789.68 25.46L2807.94 9.00001V24.505M2789.68 25.46L2789.16 2.76601V24.416M2789.68 25.46L2816.14 24.763V48.673L2809.16 48.789M2789.68 25.46H2763.29V49.337L2771.24 49.269",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2790.41 49.7L2808.83 64.72V40.727L2789.68 25.46L2771.41 41.493V65.383L2789.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M2789.68 49.029L2790.25 71.611V47.742L2789.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M89.6848 25.4603L108.309 41.4828V65.1065L89.6848 49.0293M89.6848 25.4603L70.5359 40.7925L70.5892 64.669L89.6316 49.0293M89.6848 25.4603L89.0273 47.9151V71.6481L89.6848 49.0839M89.6848 25.4603L63.4071 24.7588V48.5542L70.0911 48.6959M89.6848 25.4603L115.988 25.7611V49.5761L108.665 49.4467M89.6848 25.4603L71.3722 9.03792L71.2884 24.5988M89.6848 25.4603L108.796 9.74877V25.4474M89.6848 25.4603L90.293 2.75943V24.3785M89.6848 25.4603V49.1113",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M149.676 25.4488L167.472 41.872L167.285 65.449L149.676 49.0179M149.676 25.4488L130.087 40.3914V64.2269L148.148 50.1661M149.676 25.4488L148.969 47.3567V71.6093L149.676 49.0725M149.676 25.4488L123.453 24.2184V47.9959L129.828 48.2643M149.676 25.4488L175.913 26.3511V50.1388L167.428 49.8028M149.676 25.4488L131.911 8.67098V24.5132M149.676 25.4488L169.243 10.0381V26.0706M149.676 25.4488L150.984 2.73438V24.3846M149.676 25.4488V49.0999",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"})]})),AOt=f.memo(({lineThickness:e,...t})=>l.jsx("svg",{width:"60",height:"74",viewBox:"0 0 60 74",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:l.jsx("path",{d:"M29.6848 25.4603L48.3092 41.4828V65.1065L29.6848 49.0293M29.6848 25.4603L10.5359 40.7925L10.5892 64.669L29.6316 49.0293M29.6848 25.4603L3.4071 24.8588V48.5542L10.0911 48.6959M29.6848 25.4603L55.9884 25.7611V49.5761L48.6649 49.4467M29.6848 25.4603L11.3722 9.03792L11.2884 24.5988M29.6848 25.4603L48.7956 9.74877V25.4474M29.6848 25.4603L29.63 2.75943M29.6848 25.4603V49.1113M29.63 71.6481L29.6848 49.0839",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"})})),rS=f.memo(({size:e=32,shouldAnimate:t=!0,lineThickness:n="asIcon",className:r,...s})=>{const a=f.useRef(0),[o,i]=f.useState(!1),c=u=>{switch(u){case"asIcon":return 4.7;case"normal":return 3.3}};return f.useEffect(()=>{if(t)i(!0),a.current=performance.now();else if(a.current>0){const d=(performance.now()-a.current)/1e3%1;setTimeout(()=>{i(!1),a.current=0},(1-d)*1e3)}else i(!1),a.current=0},[t]),l.jsx("div",{className:B("text-foreground flex aspect-[60/74] items-center justify-start overflow-hidden",r),style:{height:e},...s,children:o?l.jsx(NOt,{lineThickness:c(n),className:"animate-pplxIndicator fill-mode-both h-full w-auto shrink-0 will-change-transform"}):l.jsx(AOt,{className:"h-full w-auto shrink-0 transform-gpu",lineThickness:c(n)})})}),oMe=Object.freeze(Object.defineProperty({__proto__:null,MarkSpinner:rS},Symbol.toStringTag,{value:"Module"})),iMe=40,lMe=(e,t)=>B("relative flex items-center gap-1.5",{"border-subtlest bg-offset border rounded-full px-3 py-2":t,"border border-super/20 bg-super/10 dark:bg-super/10 focus:bg-super/20 focus:border-super/30 text-super":e&&t}),cMe=()=>{const{isMobileUserAgent:e}=Ce();return e?16:18},uMe=f.memo(({modeList:e,isSticky:t,inFlight:n,accessoryProps:r,accessory:s,defaultModeOverride:a,tabsPlaceholder:o})=>{const{result:{query_str:i,uuid:c,collection_info:{uuid:u}={},backend_uuid:d,context_uuid:m,frontend_context_uuid:h,display_model:p,attachments:g},userClarifications:y,editQueryValue:v}=wn(),{submitQuery:x}=Ta(),b=Ec(),{isMobileUserAgent:_}=Ce(),w=f.useMemo(()=>i?GE(nc(i,y).actualQuery):"",[i,y]),{updateCurrentMode:S}=BEe(),{currentModeData:{mode:C}}=ax(),{trackEvent:E}=Te(),[M,T]=f.useState(!1),{isMax:I}=Nt(),j=tn(),{variation:N}=Xxe(!1),P=I&&p==="comet_max_assistant"&&j&&N,[R,k]=f.useState(null),O=f.useCallback(G=>{const K=G.mode==="search";x({rawQuery:v,existingEntryUUID:d,redoSearch:!0,collection:null,newFrontendContextUUID:null,existingFrontendContextUUID:b?void 0:h,promptSource:"user",querySource:K?"search-mode":"chat-mode",attachments:g,modelPreferenceOverride:p,...K?{alwaysSearchOverride:!0}:{overrideNoSearch:!0}}),k(null)},[x,v,d,b,h,g,p]),{terminateEntry:L}=aMe({entryUUID:d||"",reason:R?.mode==="search"?"search-answer-mode":"chat-answer-mode",callback:f.useCallback(()=>{R&&O(R)},[R,O])}),F=f.useCallback(G=>{G.mode==="search"||G.mode==="chat"?(d&&n?(k(G),L()):O(G),E("answer mode tab selected",{answerMode:G.mode,entryUUID:d,contextUUID:m})):(S(G.mode),G.mode!=="default"&&r?.isOpen&&r.onClick())},[S,r,d,m,E,n,L,k,O]),U=f.useMemo(()=>e.find(K=>K.mode==="default"),[e]),V=f.useMemo(()=>e.filter(G=>G.mode!=="default"&&G.mode!==a),[e,a]),W=f.useCallback(()=>{U&&F(U)},[F,U]),H=f.useCallback(G=>{C!==G.mode&&F(G)},[F,C]);return f.useEffect(()=>{let G=null;const K=q=>{q.metaKey&&q.shiftKey&&!G&&(G=setTimeout(()=>{T(!0)},500))},$=q=>{(!q.metaKey||!q.shiftKey)&&(G&&(clearTimeout(G),G=null),T(!1))};return document.addEventListener("keydown",K),document.addEventListener("keyup",$),()=>{G&&clearTimeout(G),document.removeEventListener("keydown",K),document.removeEventListener("keyup",$)}},[]),l.jsxs(_e.div,{layout:!0,layoutRoot:!0,"data-testid":Fs.ANSWER_MODE_TABS_ROOT,children:[l.jsx("div",{className:B("max-w-threadContentWidth mx-auto flex w-full items-end ease-out will-change-auto",{"opacity-100":t,"pointer-events-none opacity-0":!t}),style:{height:iMe},children:l.jsx(D,{variant:"section-title",className:B("erp-sidecar:line-clamp-1 hidden translate-y-px",{"@[1056px]/main:md:!line-clamp-1":!!u,"@[900px]/main:md:!line-clamp-1":!u}),children:w})}),l.jsx(z,{className:B("relative",{"border-b":!_}),children:l.jsx("div",{className:"-mx-md px-md scrollbar-none -my-px overflow-x-auto overflow-y-hidden py-px",children:l.jsxs("div",{className:"table w-full",children:[l.jsx("div",{className:B("inset-x-sm top-md will-change-opacity absolute bottom-0 shadow-md",{"opacity-0":!t,"opacity-30":t})}),l.jsx(z,{variant:"background",className:"gap-xs relative",children:l.jsxs("div",{className:"relative flex gap-1.5",children:[l.jsx("div",{className:"md:max-w-threadContentWidth md:mx-auto md:w-full",children:l.jsxs("div",{className:B("-mx-sm grid grid-cols-1 grid-rows-1",{"-mx-0":_}),children:[!U&&l.jsx(ROt,{}),l.jsxs("div",{className:"gap-xs relative col-start-1 row-start-1 flex",children:[U&&l.jsx(POt,{tab:U,active:C===U.mode||!!a&&C==a,onClick:W,id:c??"",inFlight:n,testId:U.testId,isScreenshotting:M,isCometMaxAssistantAnswer:P}),l.jsx(st,{initial:!1,children:V.map(G=>l.jsx(DU,{text:G.text,active:C===G.mode,onClick:H,mode:G,icon:G.icon,id:c??"",count:G.count,inFlight:n,disabled:G.disabled,testId:G.testId,loading:G.loading},G.text))}),V.length===0&&o]})]})}),l.jsx("div",{className:"right-0 flex items-center md:absolute md:top-1/2 md:-translate-y-1/2",children:s})]})})]})})})]})});uMe.displayName="AnswerModeTabs";const POt=f.memo(({tab:e,active:t,onClick:n,id:r,inFlight:s,testId:a,isCometMaxAssistantAnswer:o,isScreenshotting:i})=>{const{hasAnswer:c}=wn(),{isMobileUserAgent:u}=Ce(),d=f.useCallback(h=>i?"Perplexity":o?l.jsxs("div",{className:"flex items-center gap-2",children:[h,l.jsx(R1,{className:"text-max h-2.5"})]}):h,[i,o]),m=cMe();return l.jsxs(_e.button,{className:B("focus-visible:ring-offset-inverse focus-visible:ring-super group pointer-events-auto relative select-none rounded-md focus-visible:outline-none focus-visible:ring-1",{"p-0 pr-1":u,"py-md pl-sm pr-2.5":!u}),onClick:n,type:"button","aria-label":e.text,"data-testid":a,children:[l.jsx(z,{variant:"offset",className:B("absolute inset-x-0 inset-y-2.5 rounded-md opacity-0 transition-opacity duration-150",{"group-hover:opacity-100":!t})}),l.jsxs("div",{className:lMe(t,u),children:[l.jsx("div",{className:"relative flex size-[16px] items-center justify-center",children:l.jsx(st,{mode:"wait",initial:!1,children:c?e.icon?l.jsx(_e.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},children:l.jsx(be,{icon:e.icon,size:u?"sm":"xs",className:B("text-foreground duration-100 group-hover:opacity-100",{"opacity-80":!t,"text-super":t&&u})})},`icon-${e.text}`):l.jsx(_e.div,{children:l.jsx(rS,{size:m,shouldAnimate:!1,className:B("text-foreground duration-100 group-hover:opacity-100",{"opacity-80":!t,"text-super":t&&u})})},"empty-spinner"):l.jsx(_e.div,{initial:{opacity:0},animate:{opacity:1},exit:e.icon?{opacity:0}:void 0,transition:{duration:.15},children:l.jsx(rS,{size:m,shouldAnimate:!0,className:B("text-foreground duration-100 group-hover:opacity-100",{"opacity-80":!t,"text-super":t&&u})})},"spinner")})}),l.jsxs("div",{className:"relative",children:[l.jsx(st,{initial:!1,mode:"wait",children:l.jsx(_e.div,{className:"absolute whitespace-nowrap",initial:c?{opacity:1,y:0}:{opacity:0,y:20},animate:{opacity:1,y:0},exit:c?{opacity:0}:{opacity:0,y:-20},transition:{duration:i?0:c?.15:.3},children:l.jsx(D,{className:B("text-foreground whitespace-nowrap font-medium duration-150 group-hover:opacity-100",{"text-xs":u,"text-sm":!u,"opacity-80":!t,"text-super":t&&u}),children:d(e.text)})},`text-${e.text}`)}),l.jsx("div",{className:"invisible",children:l.jsx(D,{className:B("text-foreground whitespace-nowrap",{"text-xs font-medium":u,"text-sm font-[475]":!u}),children:d(e.text)})})]})]}),t&&l.jsx(FU,{id:r,inFlight:s,isScreenshotting:i})]})}),ROt=f.memo(()=>{const e=f.useMemo(()=>({mode:"default",text:"placeholder",count:0,disabled:!1,icon:void 0,loading:!1,testId:"placeholder",id:"d"}),[]);return l.jsx("div",{className:"pointer-events-none invisible col-start-1 row-start-1 opacity-0",role:"none",children:l.jsx(DU,{text:"placeholder",active:!1,onClick:Rn,mode:e,icon:void 0,id:"placeholder",count:0,inFlight:!1,disabled:!1,testId:"placeholder",loading:!1},"placeholder")})}),DU=f.memo(({text:e,active:t,mode:n,onClick:r,icon:s,id:a,count:o,inFlight:i,disabled:c,testId:u,loading:d})=>{const{isMobileUserAgent:m}=Ce(),h=f.useCallback(()=>{r(n)},[r,n]),p=cMe();return l.jsxs("button",{className:B("focus-visible:ring-offset-inverse focus-visible:ring-super group pointer-events-auto relative select-none rounded-md focus-visible:outline-none focus-visible:ring-1",{"p-0 pr-1 last:pr-4":m,"py-md pl-sm pr-2.5":!m}),onClick:h,type:"button","aria-label":e,disabled:c,"data-testid":u,children:[l.jsx(z,{variant:"offset",className:B("absolute inset-x-0 inset-y-2.5 rounded-md opacity-0 transition-opacity duration-150",{"group-hover:opacity-100":!t&&!c&&!m})}),l.jsxs("div",{className:lMe(t,m),children:[l.jsx("div",{className:"relative flex size-[16px] items-center justify-center",children:s?d?l.jsx(Ns,{size:p}):l.jsx(be,{icon:s,size:m?"sm":"xs",className:B("text-foreground duration-100 sm:block",{"group-hover:opacity-100":!c&&!m,"text-super":t&&m},c?"opacity-50":!t&&"opacity-80")}):l.jsx(rS,{size:p,shouldAnimate:!1,className:B("text-foreground duration-100",{"group-hover:opacity-100":!c&&!m,"opacity-80":!t,"text-super":t&&m})})}),l.jsxs("div",{className:B("flex items-center",{"h-4":m}),children:[l.jsx(D,{className:B("text-foreground whitespace-nowrap font-medium duration-150",{"text-xs":m,"text-sm":!m,"text-super":t&&m},!c&&!m&&"group-hover:opacity-100",c?"opacity-50":!t&&"opacity-80"),children:e}),o!==void 0&&o>0&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"px-xs ml-px leading-none opacity-35",children:""}),l.jsx(sMe,{count:o,className:B(c?"opacity-40":"opacity-65")})]})]})]}),t&&l.jsx(FU,{id:a,inFlight:i})]})});DU.displayName="AnswerModeTab";const FU=f.memo(({id:e,inFlight:t,isScreenshotting:n})=>{const{isMobileUserAgent:r}=Ce();return l.jsx(_e.div,{className:B("bg-inverse inset-x-sm absolute -bottom-px h-[2.5px]",{hidden:r}),transition:{duration:n?0:.1,ease:"easeOut"},layoutId:t?void 0:`answer-mode-tab-underline-${e}`})});FU.displayName="Underline";const Jm=A.memo(({...e})=>l.jsx(_e.div,{className:"ml-auto flex items-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:l.jsx(ke,{...e,extraCSS:"!py-md [&_*]:!font-regular hover:!bg-offset shrink-0 whitespace-nowrap rounded-md",size:"tiny"})}));Jm.displayName="AnswerModeTabsAccessory";const IOt=f.memo(({submitQuery:e,isFirstResult:t})=>{const{$t:n}=X(),{inFlight:r,editQueryValue:s,isEditingQuery:a,isFailed:o,userClarifications:i,selectedRefinementQuery:c,result:{uuid:u,query_str:d,backend_uuid:m,frontend_context_uuid:h,display_model:p,attachments:g,side_by_side_metadata:y,user_selected_model:v,sources:x},actions:{setEditQueryValue:b,setIsEditingQuery:_}}=wn(),w=Ec(),S=vo(),{trackEvent:C}=Ep(),{isMobileStyle:E}=Ce(),{openModal:M}=_t(),T=c??d,I=f.useCallback(()=>{b(T??""),_(!1),m&&C("cancel edit query click",{entryUUID:m})},[m,T,b,_,C]),j=f.useRef(null),N="editable-thread-title",{updateCurrentMode:P}=BEe();DC("thread-title",{skip:!t}),f.useEffect(()=>{r&&_(!1)},[_,r]);const R=f.useCallback(()=>{h?(e({rawQuery:s,existingEntryUUID:m,redoSearch:!0,collection:null,newFrontendContextUUID:null,existingFrontendContextUUID:w?void 0:h,promptSource:"user",querySource:"edit",attachments:g,modelPreferenceOverride:p}),_(!1),P("default")):ee.warn(new Error(`No frontend UUID for thread backendUUID=${m}`))},[m,h,w,s,g,p,e,_,P]),{terminateEntry:k,isTerminating:O}=aMe({entryUUID:m,reason:N,callback:R}),L=f.useCallback(()=>{S&&k()},[S,k]),F=f.useCallback(()=>{S&&(C("confirm edit query click",{entryUUID:m??"",newQuery:s}),h?R():ee.warn(new Error(`No frontend UUID for thread backendUUID=${m}`)))},[S,m,h,R,C,s]),U=O1(),V=f.useCallback(()=>{r?L():F()},[r,L,F]),W=f.useCallback(re=>{oo.isEnterKeyWithoutShift(re)?(re.preventDefault(),V()):oo.isEscapeKey(re)&&I()},[V,I]),{quote:H,actualQuery:G}=nc(T,i),K=f.useCallback(()=>{b(G??""),_(!0)},[b,G,_]),$=f.useCallback(re=>{re.preventDefault(),navigator.clipboard.writeText(T??"")},[T]),q=s==="",Z=!!S,se=an.hasUnspecifiedSelectionStatus(y),Y=f.useMemo(()=>({maskImage:"linear-gradient(to bottom, black 50%, transparent)"}),[]),Q=f.useCallback(()=>{M("taskShortcutModal",{source:"thread_create",shortcut:{prompt:T??"",searchModel:v??b7,sources:jue(x?.sources)}})},[M,T,v,x]);return l.jsxs("div",{className:"relative z-10",children:[l.jsxs("div",{className:"mb-xs group relative flex items-end gap-0.5 pt-6",children:[l.jsx("div",{className:"-inset-md absolute select-none"}),l.jsx("div",{className:"md:mr-xl min-w-0 flex-1",children:a?l.jsx(LOt,{onKeyDown:W,editQueryValue:s,setEditQueryValue:b,isEmptyQuery:q,inputRef:j}):l.jsx(fMe,{queryString:G??"",isFirstResult:t,isFailed:o,quote:H},u)}),Z&&l.jsx("div",{className:"absolute bottom-0 right-0 flex shrink-0",children:l.jsx("div",{"data-testid":"edit-query-button-group",className:B("bg-base mb-xs shadow-subtle border-subtlest relative flex shrink-0 flex-row rounded-[10px] border p-[1.5px] duration-150 group-hover:pointer-events-auto group-hover:opacity-100",{"pointer-events-none opacity-0":!a,"pointer-events-auto opacity-100":a||O}),children:a?E?null:l.jsxs(l.Fragment,{children:[l.jsx(ye,{toolTip:n({defaultMessage:"Save and rewrite answer",id:"J0SzInCu9R"}),icon:Ea,size:"tiny",variant:"primary",onClick:V,extraCSS:"shrink-0",testId:"confirm-edit-query-button",disabled:O,isLoading:O}),l.jsx("div",{className:"m-[1.5px] w-px border-r border-transparent"}),l.jsx(ye,{icon:Xt,size:"tiny",variant:"common",extraCSS:"!bg-base !text-quiet hover:!bg-offset shrink-0",onClick:I,testId:"cancel-edit-query-button",disabled:O})]}):l.jsxs(l.Fragment,{children:[l.jsx(ye,{icon:uc,size:"tiny",variant:"common",onClick:K,disabled:se,extraCSS:B("!bg-base hover:!bg-offset shrink-0 !text-quiet !rounded-r-[2px]"),testId:"edit-query-button",toolTip:n({defaultMessage:"Edit Query",id:"b3OoXBV5TQ"})}),l.jsx(z,{className:"m-[1.5px] w-px border-r"}),l.jsx(ye,{icon:Tke,size:"tiny",variant:"common",extraCSS:B("!bg-base hover:!bg-offset shrink-0 !text-quiet !rounded-l-[2px]",{"!rounded-r-[2px]":U}),onClick:$,testId:"copy-query-button",toolTip:n({defaultMessage:"Copy Query",id:"pLS6m4WFYK"}),clickFeedback:!0}),U&&l.jsxs(l.Fragment,{children:[l.jsx(z,{className:"m-[1.5px] w-px border-r"}),l.jsx(ye,{icon:hS,size:"tiny",variant:"common",extraCSS:"!bg-base hover:!bg-offset shrink-0 !text-quiet !rounded-l-[2px]",onClick:Q,testId:"save-as-shortcut-button",toolTip:n({defaultMessage:"Save query as shortcut",id:"iOwvGHWuK/"}),clickFeedback:!0})]})]})})})]}),a&&E&&l.jsxs("div",{className:"gap-x-sm mb-sm pb-sm -inset-x-xs absolute top-full mt-[12px] flex justify-end",children:[l.jsx(z,{className:"-inset-lg -top-sm absolute",variant:"background",style:Y}),l.jsx(ye,{size:"small",variant:"border",onClick:I,text:n({defaultMessage:"Cancel",id:"47FYwba+bI"}),extraCSS:"!bg-base",disabled:O}),l.jsx(ye,{size:"small",variant:"primary",onClick:V,text:n({defaultMessage:"Done",id:"JXdbo8Vnlw"}),disabled:O,isLoading:O})]})]})}),dMe=144,jOt=A.memo(({queryString:e="",className:t="",quote:n,isFirstResult:r,isFailed:s})=>{const{$t:a}=X(),[o,i]=f.useState(!1),[c,u]=f.useState(!1),d=f.useRef(null),m=f.useMemo(()=>{const p=GE(e);return p.length<75?"entry-title-100":p.length<200?"entry-title-200":"entry-title-300"},[e]);f.useEffect(()=>{typeof window>"u"||!d.current||d.current.offsetHeight>dMe&&!c&&u(!0)},[c]);const h=f.useCallback(()=>{i(!o)},[o]);return l.jsxs("div",{className:"group/title relative inline-flex flex-col",children:[n&&l.jsxs(D,{variant:"small",color:"light",className:"border-super bg-offset/50 px-sm mb-2 flex items-center border-l-2 py-1.5",children:[l.jsx(kke,{size:18,className:"text-super mr-sm shrink-0 -translate-y-px rotate-180"}),l.jsx("span",{className:"line-clamp-1",children:n})]}),l.jsx("div",{className:"overflow-hidden",children:l.jsxs(OOt,{isTruncated:c,isExpanded:o,children:[l.jsx(D,{variant:m,as:r?"h1":"div",ref:d,className:B("group/query relative whitespace-pre-line !text-wrap break-words [word-break:break-word]",t),children:s?l.jsx("div",{className:"gap-x-sm flex items-center",children:l.jsx("span",{children:e?l.jsx(sS,{editQueryValue:e,disabled:!0}):a({defaultMessage:"Something went wrong.",id:"iuY8kxCDQT"})})}):l.jsx(sS,{editQueryValue:e,disabled:!0})}),l.jsx("div",{className:B("text-inverse pointer-events-none absolute bottom-0 left-0 right-0 h-1/4 transition-opacity duration-100",{"opacity-0":o}),style:{background:!o&&c?"linear-gradient(transparent, currentColor)":void 0}})]})}),c&&l.jsx("div",{className:"top-xs relative flex",children:l.jsx(ke,{size:"tiny","data-testid":"toggle-query-expand-button",extraCSS:"-mt-0.5 -ml-sm",chevron:!0,chevronIcon:o?gS:Zr,onClick:h,text:o?a({defaultMessage:"Show less",id:"qyJtWyZ0yt"}):l.jsx(he,{defaultMessage:"Show more",id:"kgNFsmh2uY",description:"Show more of the query."})})})]})}),fMe=f.memo(jOt);fMe.displayName="DisplayQuery";const OOt=({children:e,isTruncated:t,isExpanded:n})=>t?l.jsx(_c,{transition:{duration:.2,ease:Jn},initial:!1,mode:"popLayout",supportZeroHeight:!1,children:l.jsx(tl,{style:{maxHeight:n?void 0:dMe},children:e})}):e,mMe=(e,t)=>{const n=GE(e);return n.length<75?B("font-display text-2xl md:text-3xl font-semimedium",{"translate-y-[1px]":!t}):n.length<200?"font-display text-xl font-medium":"font-sans font-medium"},LOt=({onKeyDown:e,editQueryValue:t,setEditQueryValue:n,isEmptyQuery:r,inputRef:s})=>{const a=f.useCallback(o=>{n(o)},[n]);return l.jsxs("div",{className:"relative w-full min-w-0",children:[l.jsx("div",{className:"-inset-y-xs -left-sm border-subtlest bg-offset/50 -right-sm md:-right-md absolute rounded-md border"}),l.jsxs("div",{className:"relative grid",children:[l.jsx(sS,{onKeyDown:e,editQueryValue:t,onChange:a,inputRef:s}),l.jsx("div",{className:B("pointer-events-none col-start-1 row-start-1 opacity-0",mMe(t)),children:r?l.jsx(l.Fragment,{children:""}):l.jsx(sS,{editQueryValue:t,disabled:!0})})]})]})},sS=({onKeyDown:e=Rn,editQueryValue:t,disabled:n,onChange:r=Rn,inputRef:s})=>{const{$t:a}=X(),{isMobileUserAgent:o}=Ce();return l.jsx("div",{className:B("text-foreground placeholder:text-subtle block h-auto w-full resize-none appearance-none overflow-hidden bg-transparent focus:outline-none","caret-super selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super",mMe(t,n),"[&_[contenteditable]]:!font-display [&_[contenteditable]+*>*]:!text-subtle [&>*]:p-0 [&_[contenteditable]]:!bg-transparent","[&_[contenteditable]]:max-h-none [&_[contenteditable]]:!overflow-hidden [&_[contenteditable]]:sm:max-h-none [&_[contenteditable]]:lg:max-h-none"),style:{gridArea:"1/-1"},children:l.jsx(mF,{onKeyDown:e,placeholder:a({defaultMessage:"Ask anything",id:"AUouhaZgFv"}),value:t,onChange:r,minRows:0,isMobileStyle:!1,isMobileUserAgent:o,useLexical:!0,autoFocus:!0,disableInput:n,ref:s})})},DOt=A.memo(({onClick:e,didSelectAnswer:t,onDismiss:n})=>{const{isMobileStyle:r}=Ce(),[s,a]=f.useState(!1),{$t:o}=X(),i=f.useCallback(()=>{a(!0),n()},[n]);return r||s?null:l.jsx("div",{children:l.jsx(z,{variant:"superLight",className:"p-md gap-sm flex items-center justify-between rounded-md",children:t?l.jsxs("div",{className:"gap-sm flex w-full items-center justify-between",children:[l.jsxs("div",{className:"gap-sm flex items-center",children:[l.jsx(be,{icon:Nke,size:"lg",className:"text-super"}),l.jsx(D,{color:"super",variant:"smallBold",children:o({defaultMessage:"Thank you! Your feedback helps improve answers for everyone.",id:"jfIf25t1OU"})})]}),l.jsx(ke,{variant:"noHover",icon:Xt,pill:!0,size:"small",extraCSS:"!text-super",onClick:i})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx(D,{color:"super",variant:"smallBold",children:o({defaultMessage:"Help improve our product",id:"A7lIeL4dUS"})}),l.jsx(D,{color:"super",variant:"small",children:o({defaultMessage:"We made two versions of this answer. Which do you prefer?",id:"GT2t8+NleA"})})]}),l.jsx(ye,{variant:"primary",size:"small",text:o({defaultMessage:"Compare",id:"493J7RI1tF"}),onClick:e})]})})})}),FOt=A.memo(({refinementFilters:e,handlePillClick:t,selectedIndex:n})=>e.map((r,s)=>{const a=n===s;return l.jsx(ye,{text:r.label,size:"small",variant:a?"primary":"border",pill:!0,onClick:()=>t(s),extraCSS:B("flex-shrink-0",a&&"bg-super")},s)})),UOt=A.memo(({refinementFilters:e,handlePillClick:t,selectedIndex:n})=>l.jsx(z,{className:"gap-xs flex flex-wrap",children:l.jsx(FOt,{refinementFilters:e,handlePillClick:t,selectedIndex:n})})),BOt=ge(async()=>{const{MarkSpinner:e}=await oe(async()=>{const{MarkSpinner:t}=await Promise.resolve().then(()=>oMe);return{MarkSpinner:t}},void 0);return{default:e}}),xzt=A.memo(({title:e,titleIcon:t,titleAccessory:n,titleUrl:r,showPplxMark:s,queryStr:a,loading:o,className:i="mb-sm"})=>{const{trackEvent:c}=Te(),[u,d]=f.useState(!1),m=f.useCallback(()=>{r!=null&&(c("click result entry header",{query:a}),window.open(r,"_blank")?.focus())},[c,a,r]);return l.jsxs("div",{className:B("flex w-full items-center justify-between",i),children:[l.jsx("div",{onClick:m,className:B({"cursor-pointer":r!=null}),children:l.jsxs("div",{color:"super",className:"space-x-sm flex items-center",children:[(s||t)&&l.jsx(D,{variant:"section-title",as:"div",children:s?l.jsx("div",{className:"relative -top-px flex w-[24px] transform-gpu items-center justify-center",onClick:()=>{d(!0),setTimeout(()=>{d(!1)},0)},children:l.jsx(BOt,{size:24,shouldAnimate:o||u})}):t&&l.jsx("div",{className:"w-[24px]",children:l.jsx(be,{icon:t,size:"lg"})})}),l.jsx(D,{variant:"section-title",as:"div",children:e})]})}),n]})}),hMe=A.memo(({header:e,children:t})=>l.jsxs(z,{children:[e&&l.jsx(z,{variant:"background",className:B("flex","items-center","justify-between"),children:e}),t]}));hMe.displayName="ThreadEntrySection";var A6={},Sne;function VOt(){return Sne||(Sne=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="circle-exclamation",r=512,s=512,a=["exclamation-circle"],o="f06a",i="M256 48a208 208 0 1 1 0 416 208 208 0 1 1 0-416zm0 464A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-384c-13.3 0-24 10.7-24 24l0 112c0 13.3 10.7 24 24 24s24-10.7 24-24l0-112c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faCircleExclamation=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(A6)),A6}var $Ot=VOt();const WOt=e=>{try{return JSON.parse(e)}catch{return null}},HOt=A.memo(({title:e,description:t,className:n="",role:r,retryFn:s,...a})=>{const{$t:o}=X(),i=o({defaultMessage:"Please try again later.",id:"EjH+J3uOTD"}),c=f.useMemo(()=>WOt(t??""),[t]);return c&&(console.warn("Tried to pass a JSON error description"),console.warn(c)),l.jsxs("div",{className:`gap-md bg-caution py-xs px-md mt-4 flex items-center rounded-lg text-left font-sans text-white ${n}`,role:"alert",...a,children:[l.jsx(xt,{className:"text-xl",icon:$Ot.faCircleExclamation}),l.jsxs("div",{className:"flex grow flex-col",children:[l.jsx("p",{className:"font-semibold",children:e||o({defaultMessage:"Sorry, something went wrong",id:"E2YPKR25ob"})}),l.jsx("p",{children:c?i:t})]}),s&&l.jsx(ke,{noXPadding:!0,text:o({defaultMessage:"Try again",id:"FazwRldA7z"}),onClick:s,textClassName:"text-white"})]})}),UM=A.memo(({fullWidth:e,retryFn:t,className:n,errorCode:r})=>{const{$t:s}=X(),a=f.useCallback(()=>{IS("error retry")},[]),o=(()=>{switch(r){case"FETCHER_SSE_OFFLINE_ERROR":return s({defaultMessage:"Unstable internet, check your connection",id:"vbFcV2WAsH"});default:return s({defaultMessage:"Sorry, something went wrong",id:"E2YPKR25ob"})}})();return l.jsx("div",{className:B("max-w-threadContentWidth mx-auto",{"w-full":e},n),children:l.jsx(HOt,{className:B("mx-md md:mx-0",{"bg-super":r==="FETCHER_SSE_OFFLINE_ERROR"}),title:o,retryFn:t??a})})});UM.displayName="QueryErrorFallback";const zOt=(e,t)=>{const{value:n,loading:r}=Ut({flag:"generative-refinement",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},GOt=()=>{const{result:e,refinementFilters:t,selectedRefinementQuery:n,actions:{setSelectedRefinementQuery:r},submitQuery:s}=wn(),{variation:a,loading:o}=zOt(!1),[i,c]=f.useState(-1),u=f.useCallback(m=>{if(!t)return;const h=t[m].reformulated_query;s({rawQuery:h,existingEntryUUID:e.backend_uuid,newFrontendContextUUID:null,collection:null,promptSource:"user",querySource:"refinement-pill"})},[t,s,e.backend_uuid]),d=f.useCallback(m=>{if(i===m)c(-1),r(null);else{const h=t?.[m]?.reformulated_query;h&&(c(m),r(h))}},[i,t,r]);return f.useEffect(()=>()=>{r(null)},[r]),{refinementFilters:a&&!o?t:null,selectedRefinementQuery:n,selectedPillIndex:i,handlePillClickDefaultAnswerMode:u,handlePillClickAnswerMode:d}},pMe=({target:e,entryUUID:t,frontendContextUUID:n,targetVisibilityPortionThreshold:r=.5,hasLLMToken:s})=>{const a=f.useRef(null),o=f.useRef(null),i=f.useRef(!1),{trackEvent:c}=Te(),{result:u}=wn(),d=f.useRef(u);f.useEffect(()=>{d.current=u},[u]);const m=f.useCallback(()=>{if(a.current){const p=Math.round(performance.now()-a.current);c("thread entry exited",{entryUUID:t,frontendContextUUID:n,timeOnEntryMs:p}),a.current=null}if(o.current){const p=d.current;p&&xr(p.display_model)==ae.STUDIO&&an.isStatusPending(p)&&c("answer processing exited",{entryUUID:t,frontendContextUUID:n,timeOnEntryMs:Math.round(performance.now()-o.current)}),o.current=null}},[c,t,n]),h=f.useCallback(()=>{s&&(a.current=performance.now()),o.current||(o.current=performance.now())},[s]);return f.useEffect(()=>{const p=new IntersectionObserver(y=>{y.forEach(v=>{i.current=v.isIntersecting,v.isIntersecting&&document.visibilityState==="visible"?h():m()})},{threshold:r}),g=e.current;return g&&p.observe(g),()=>{g&&p.unobserve(g),m()}},[e,r,h,m]),f.useEffect(()=>{const p=()=>{document.visibilityState==="hidden"?m():document.visibilityState==="visible"&&i.current&&h()};return document.addEventListener("visibilitychange",p),()=>{document.removeEventListener("visibilitychange",p)}},[h,m]),f.useEffect(()=>{const p=()=>{i.current&&a.current&&m()};return window.addEventListener("beforeunload",p),()=>{window.removeEventListener("beforeunload",p)}},[m]),null};var qOt={};const KOt=ge(async()=>{const{ConnectorAuthorizationPrompt:e}=await oe(async()=>{const{ConnectorAuthorizationPrompt:t}=await import("./ConnectorAuthorizationPrompt-ODY3LdL7.js");return{ConnectorAuthorizationPrompt:t}},__vite__mapDeps([139,1,2,3,5,4]));return{default:e}}),YOt=ge(async()=>{const{AgentWorkflow:e}=await oe(async()=>{const{AgentWorkflow:t}=await import("./AgentWorkflow-NdlbMA47.js");return{AgentWorkflow:t}},__vite__mapDeps([140,1,2,3,133,4,5,134,80,77,70,20,135,141,19,21,22,137,138]));return{default:e}}),QOt=ge(async()=>{const{ThreadEntryFooter:e}=await oe(async()=>{const{ThreadEntryFooter:t}=await import("./ThreadEntryFooter-DNHb-k9e.js");return{ThreadEntryFooter:t}},__vite__mapDeps([142,1,2,3,4,143,134,80,77,70,5,20,68,144,74,145,45,141,19,21,22,146,147,148,149,150,151,34,152,94,153,154,155,118,156,157,137,138,158,159]));return{default:e}}),XOt=ge(async()=>{const{RelatedContent:e}=await oe(async()=>{const{RelatedContent:t}=await import("./Related-B6uJPznA.js");return{RelatedContent:t}},__vite__mapDeps([160,1,2,3,161,116,117,4,162,158,5]));return{default:e}}),ZOt=ge(async()=>{const{ThreadContentResponse:e}=await oe(async()=>{const{ThreadContentResponse:t}=await import("./ThreadContentResponse-BlKH5Dt9.js");return{ThreadContentResponse:t}},__vite__mapDeps([163,1,2,3,120,143,134,4,80,77,70,5,20,68,144,74,145,45,141,19,21,22,146,147,148,149,150,151,34,152,94,153,154,155,118,156,157,137,138,164]));return{default:e}}),JOt=ge(async()=>{const{SourcesModePreviewRow:e}=await oe(async()=>{const{SourcesModePreviewRow:t}=await import("./SourcesModePreview-CE2KdgKR.js");return{SourcesModePreviewRow:t}},__vite__mapDeps([165,1,2,119,3,120,4,5]));return{default:e}}),eLt=ge(async()=>oe(()=>import("./AnswerComparisonModal-qfQ3EMt3.js"),__vite__mapDeps([166,1,2,3,163,120,143,134,4,80,77,70,5,20,68,144,74,145,45,141,19,21,22,146,147,148,149,150,151,34,152,94,153,154,155,118,156,157,137,138,164,125]))),gMe=A.memo(({submitQuery:e,shouldShowProductFeedback:t,feedbackEntryUUID:n,shouldShowRecruitmentBanner:r,deleteLastResult:s,setQuote:a,answerModesTabsBottom:o,shouldShowNavResults:i,shouldShowRelatedContent:c=!0,sbsEntriesGroup:u})=>{const d="thread-content",{$t:m}=X(),{isMobileStyle:h}=Ce(),{trackEvent:p}=Te(),g=Ot(),{removeWidgetFromEntry:y}=X1({reason:d}),{result:v,widgetData:x,isEntryInFlight:b,response:_,hasLLMToken:w,isAnswerSkipped:S,steps:C,isPending:E,hasMediaOnlyLayout:M,showAgentWorkflow:T,isFinalStep:I,sportsWidgetData:j,weatherWidgetData:N,timeWidgetData:P,timerWidgetData:R,calculatorWidgetData:k,currencyExchangeWidgetData:O,flightStatusWidgetData:L,highPriorityWidgets:F,lowPriorityWidgets:U,taskWidgetData:V,hasFastWidget:W,isLastResult:H,idx:G,hasAnswer:K,hasSources:$,hasWebResults:q}=wn(),{refinementFilters:Z,handlePillClickDefaultAnswerMode:se}=GOt(),Y=Ec(),Q=CHe(),re=vC(),te=LEe(),le=f.useRef(null),ie=f.useMemo(()=>{const ft=v?.side_by_side_metadata?.selection_status;return ft===Lo.SELECTED||ft===Lo.TIE},[v?.side_by_side_metadata?.selection_status]),pe=f.useMemo(()=>u.length<1?[]:[...u].sort((ft,pr)=>ft.backend_uuid.localeCompare(pr.backend_uuid,void 0,{sensitivity:"base"})),[u]),{trackJudgment:me,trackBannerExposure:de,trackSBSExposure:ve}=kit({results:pe,session:g,trackEvent:p}),Ae=f.useMemo(()=>{const ft=v?.side_by_side_metadata?.sibling_uuid;return ft?Ve.getItem(`sbs-banner-dismissed-${ft}`)==="true":!1},[v?.side_by_side_metadata?.sibling_uuid]),Se=f.useMemo(()=>u.length>1,[u]),De=f.useMemo(()=>v?.side_by_side_metadata?.sibling_uuid,[v]),Ne=f.useMemo(()=>te?!Ae&&(ie||Se&&K):!1,[Ae,te,Se,ie,K]),Pe=f.useCallback(()=>{De&&Ve.setItem(`sbs-banner-dismissed-${De}`,"true")},[De]);f.useEffect(()=>{Ne&&de()},[Ne,de]);const[dt,et]=f.useState(!1),Et=f.useMemo(()=>pe.map(ft=>an.parseAskTextField(ft)??void 0).filter(ft=>ft!==void 0),[pe]),ue=f.useCallback(async ft=>{try{me(ft);const pr=pe[0]?.side_by_side_metadata?.sibling_uuid;await Vit(ft,pe,pr,re),et(!1)}catch(pr){ee.error("Failed to process answer selection:",pr)}},[pe,re,me]),Ue=f.useCallback(()=>{et(!0),ve()},[ve]),Ct=f.useMemo(()=>u.some(ft=>an.isStatusPending(ft)),[u]),Ye=f.useMemo(()=>{if(!v?.query_str)return"";const{actualQuery:ft}=nc(v.query_str);return ft||""},[v?.query_str]),mt=f.useCallback(()=>et(!1),[]),{standardWidgetData:We,codeInterpreterImages:Oe}=x.reduce((ft,pr)=>(pr.is_code_interpreter&&pr.is_image?ft.codeInterpreterImages.push(pr):ft.standardWidgetData.push(pr),ft),{standardWidgetData:[],codeInterpreterImages:[]}),Tt=f.useMemo(()=>Oe.length>0,[Oe]),$e=f.useMemo(()=>!Tt&&We.length>0,[Tt,We]),ct=f.useMemo(()=>!h,[h]),yt=f.useCallback(ft=>{v?.frontend_context_uuid&&v?.backend_uuid&&(y({entryUUID:v.backend_uuid,data:ft}),p("remove widget",{url:"url"in ft?ft.url:ft?.links?.[0]?.url??"",entryUUID:v.backend_uuid,source:"thread"}))},[y,v.backend_uuid,p,v.frontend_context_uuid]),ht=f.useCallback((ft,pr,yl,$u,ra)=>{const Tc=ra||("url"in ft?ft.url:ft?.links?.[0]?.url??"");return l.jsx(OSe,{data:ft,submit:e,isReadonly:pr,menuItems:pr||b?[]:[{type:"default",text:m({defaultMessage:"Report",id:"x5Tz6MZH82"}),icon:$_,onClick:()=>yl&&yl(ft)}],inFlight:b,entryUUID:v?.backend_uuid??null,tableCitationOffset:$u},Tc)},[b,e,m,v?.backend_uuid]),ut=f.useCallback((ft,pr,yl)=>{const $u={name:`${pr}-widget`,snippet:"",timestamp:"",url:"",meta_data:ft,is_attachment:!1,is_image:!1,is_code_interpreter:!1,is_knowledge_card:!1,is_navigational:!1,is_widget:!0,sitelinks:[],inline_entity_id:""};return ht($u,Y,yt,_?.web_results?.length,yl)},[yt,Y,_?.web_results?.length,ht]),fn=f.useCallback(ft=>ht(ft,Y,yt,_?.web_results?.length),[yt,Y,_?.web_results?.length,ht]),wr=f.useCallback(ft=>ut(ft,"sports"),[ut]),sn=f.useCallback(ft=>ut(ft,"weather"),[ut]),kt=f.useCallback(ft=>ut(ft,"time"),[ut]),Kt=f.useCallback(ft=>ut(ft,"timer"),[ut]),xe=f.useCallback(ft=>ut(ft,"currency-exchange"),[ut]),qe=f.useCallback(ft=>ut(ft,"calculator"),[ut]),He=f.useCallback(ft=>ut(ft,"flight-status"),[ut]),ze=f.useCallback(ft=>ut(ft,"task","task"),[ut]),ot=f.useRef(null),{hasAccessToProFeatures:it}=Nt();pMe({entryUUID:v?.backend_uuid??"",target:ot,targetVisibilityPortionThreshold:.3,frontendContextUUID:v?.frontend_context_uuid??"",hasLLMToken:w});const Gt=hr(),Vt=f.useMemo(()=>(!h||!!qOt.NEXT_PUBLIC_IS_SIDECAR_BUILD)&&$&&!W&&!T&&!i&&!M,[h,$,i,T,M,W]),cn=ede(v?.frontend_uuid),Qn=kHe(v?.backend_uuid),Sr=an.isStatusFailed(v),ns=Sr&&v.reconnectable&&cn;f.useEffect(()=>{Gt.maybeSendSearchResult(_,C,E)},[E,q,_,Gt,C]);const Os=f.useCallback(()=>{Q(v.backend_uuid??"")},[v.backend_uuid,Q]),fi=f.useMemo(()=>A.memo(()=>{throw new Bhe("STREAM_FAILED_CHUNK_ERROR")}),[]),Tf=f.useMemo(()=>()=>l.jsx(UM,{retryFn:Os,errorCode:Qn?.code}),[Os,Qn?.code]);return l.jsxs(l.Fragment,{children:[Ne&&l.jsx(DOt,{onClick:Ue,didSelectAnswer:ie,onDismiss:Pe}),v?.connector_auth_info&&l.jsx(KOt,{connectorAuthInfo:v.connector_auth_info,isLastResult:H,backendUuid:v?.backend_uuid,inFlight:b}),Vt&&l.jsx(JOt,{}),T&&!S&&l.jsx(YOt,{answerModesTabsBottom:o,autoScroll:H}),l.jsxs("div",{className:"gap-y-lg mt-3 flex flex-col first:mt-0",children:[(M||S||!T&&(I||W))&&l.jsx(hMe,{children:l.jsxs("div",{className:"gap-y-sm md:gap-y-md flex flex-col",children:[Tt&&Oe.map(ft=>l.jsx("div",{children:ht(ft,Y)},ft.url)),$e&&F.map(fn),N&&sn(N),P&&kt(P),R&&Kt(R),O&&xe(O),k&&qe(k),L&&He(L),j&&wr(j),$e&&U.map(fn),Z&&l.jsx(UOt,{refinementFilters:Z,handlePillClick:se}),l.jsx(ZOt,{submitQuery:e,setQuote:a,markdownRef:le}),it&&te&&V&&ze(V),l.jsx(QOt,{submitQuery:e,deleteLastResult:s,showSourcesSidebar:ct,markdownRef:le}),l.jsx(rc,{isSamsungBrowser:!0,children:l.jsx(DM,{position:"bottom",idx:G,upsellInformation:v?.upsell_information,backendUuid:v?.backend_uuid,isLastResult:H,inFlight:b})})]})}),Sr&&!ns&&l.jsx(Zs,{fallback:Tf,children:l.jsx(fi,{})}),c&&l.jsx(XOt,{shouldShowProductFeedback:t,feedbackEntryUUID:n,shouldShowRecruitmentBanner:r,submitQuery:e})]}),Se&&l.jsx(eLt,{isOpen:dt,onClose:mt,responses:Et,queryStr:Ye,onSelectAnswer:ue,isAnyEntryPending:Ct})]})});gMe.displayName="LowerPriorityThreadContent";const tLt=e=>{const{result:{classifier_results:t,query_source:n}}=wn(),r=s2e(),{classifierResults:s}=_o(),a=t,o=typeof a<"u",i=s[e],c=typeof i<"u",u=n==="default_search";return f.useEffect(()=>{u&&(o&&r("web.frontend.browser.mhe_loaded_ms"),c&&r("web.frontend.browser.mhe_extension_loaded_ms"))},[o,c,u,r]),i??a},nLt=({items:e})=>{const[t,n]=f.useState(!1),r=f.useMemo(()=>document.querySelector("meta[name='version']")?.getAttribute("content")||"",[]),s=e.filter(i=>i.isStatic),a=e.filter(i=>!i.isStatic),o=i=>l.jsx(z,{className:"px-md py-sm gap-sm grid grid-cols-3 align-top",children:i.map((c,u)=>l.jsx("div",{children:c.href?l.jsx(ke,{variant:"negative",href:c.href,text:c.label,target:"_blank",size:"tiny",icon:iv}):l.jsxs("div",{className:"py-xs",children:[l.jsx(D,{variant:"tiny",color:"light",children:c.label}),l.jsx(D,{variant:"tiny",children:c.value})]})},u))});return l.jsxs("div",{className:"relative",children:[l.jsxs("div",{className:"bg-caution/10 border-caution/20 rounded-lg border shadow-md 2xl:absolute 2xl:right-[-450px] 2xl:w-[400px]",children:[l.jsxs("div",{className:"py-sm pl-md pr-sm gap-sm border-caution/20 flex items-center justify-between border-b",children:[l.jsxs(D,{variant:"smallBold",color:"red",className:"gap-sm flex items-center",children:[l.jsx(f8,{size:16}),l.jsx("span",{children:"Internal Debug Mode"})]}),l.jsx(ye,{size:"small",text:"Report a Bug",variant:"rejecter",onClick:()=>n(!0)})]}),s.length>0&&o(s),s.length>0&&a.length>0&&l.jsx("div",{className:"border-caution/20 border-t"}),a.length>0&&o(a),r&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"border-caution/20 border-t"}),l.jsxs(z,{className:"px-md py-sm gap-sm flex items-center",children:[l.jsx(D,{variant:"tinyBold",color:"red",children:"Version"}),l.jsx(ke,{variant:"negative",href:`https://github.com/ppl-ai/agi/commit/${r}`,text:r,target:"_blank",size:"tiny",icon:iv})]})]})]}),l.jsx(Dde,{isOpen:t,onClose:()=>n(!1)})]})},Cne=1e3*60*20,Ene=e=>new Date(e).getTime(),rLt=["llm","mhe"],sLt=["ms"],aLt=e=>(e.split(".").at(-1)??"").split("_").map(t=>rLt.includes(t)?t.toUpperCase():sLt.includes(t)?t.toLowerCase():`${t.charAt(0).toUpperCase()}${t.slice(1)}`).join(" "),oLt=()=>{const{result:{backend_uuid:e,frontend_uuid:t,frontend_context_uuid:n}={}}=wn(),{formatNumber:r}=X(),a=Fme()(),o=YL(),i=t??"",c=o(t??"")??o(n??""),{envHasDevLogins:u,isLocalhost:d}=pc(),{result:{debug_data:m}}=wn(),{navigationMeta:h}=_o(),p=h[i]??{},g=d?"http://localhost:3009":"https://admin.i.perplexity.ai",y=`${g}/debugger/`,v=`${g}/replayer/`,x=d||!u?"production":"testing",b=c!==a?c?.getEvents()??[]:a?.getEvents()??[],_=[{label:"Nav Search Type",value:p.type??"unknown"},{label:"Nav Search Time",value:p.searchTime},{label:"Nav Classify Time",value:p.classifyTime},...b.map(w=>({label:aLt(w.metricName),value:w.duration})),{label:"Debugger",href:`${y}${e}?env=${x}`,isStatic:!0},{label:"Chat Replayer",href:`${v}${e}?env=${x}`,isStatic:!0}];return m?.dd_trace_id&&_.push({label:"Datadog Trace",href:`https://app.datadoghq.com/apm/trace/${m.dd_trace_id}`,isStatic:!0}),m?.dd_request_id&&_.push({label:"Datadog Logs",href:`https://app.datadoghq.com/logs?query=%40request_id%3A"${m.dd_request_id.request_id}"&from_ts=${Ene(m.dd_request_id.datetime)-Cne}&to_ts=${Ene(m.dd_request_id.datetime)+Cne}&live=false`,isStatic:!0}),l.jsx("div",{children:l.jsx(nLt,{items:_.filter(w=>w.href||w.value).map(w=>({label:w.label,value:w.value?typeof w.value=="number"?r(w.value,{style:"unit",unit:"millisecond",unitDisplay:"narrow"}):w.value:"",href:w.href,isStatic:w.isStatic}))})})},iLt=()=>{const e=f.useContext(Jhe);return!!e&&e.debugEnabled},lLt=({webResults:e})=>yo(t=>({isShowing:!1,webResults:e,actions:{hide:()=>t({isShowing:!1}),show:n=>t({...n,isShowing:!0})}})),{Context:cLt,useTrackedState:uLt}=Y0("SourcesList"),yMe=f.memo(({children:e,webResults:t})=>{const[n]=A.useState(()=>lLt({webResults:t}));return f.useEffect(()=>{n.setState({webResults:t})},[t,n]),l.jsx(cLt.Provider,{value:n,children:e})});yMe.displayName="SourcesListProvider";const dLt=uLt,fLt=({trackEvent:e,entryUUID:t,frontendContextUUID:n,contextUUID:r})=>f.useCallback((s,a)=>{e(s,{entryUUID:t,frontendContextUUID:n,contextUUID:r,...a})},[t,n,r,e]),id={lastEntryUUID:null,loggedUrls:new Set,seenEntries:new Set};function mLt(e){if(e)return[{...e,url:e?.url,title:e?.name,snippet:e?.snippet,sitelinks:e?.sitelinks?.map(t=>({url:t.url,title:t.title}))}]}const hLt=A.memo(({navigationResult:e,trackEvent:t,queryString:n,entryUUID:r,onClick:s,...a})=>{const{url:o,title:i,snippet:c,sitelinks:u,position:d,source:m,client_request_timestamp:h,unstable_server_request_timestamp:p,is_cached:g,is_comet_navigation:y}=e,v=f.useMemo(()=>S9(o),[o]),x=f.useMemo(()=>kP(o),[o]);f.useEffect(()=>{if(!r||!o)return;const _=id.seenEntries.has(r);id.lastEntryUUID!==r&&(id.lastEntryUUID=r,id.loggedUrls.clear()),id.loggedUrls.has(o)||(id.loggedUrls.add(o),id.seenEntries.add(r),t("navigational source viewed",{query:n,url:o,title:i,subLinks:u,position:d,source:m,is_comet_navigation:y,...typeof h=="number"&&!_&&{renderTimeMs:performance.now()-h},...typeof p=="number"&&!_&&{unstableRenderTimeMs:performance.now()-p},isCached:g}))},[r,o,n]);const b=f.useCallback((_,w)=>S=>{t("click citation",{source:"navigationalCard",navigationalLinkType:w,citation_url:_,is_comet_navigation:y}),s?.(S)},[y,t,s]);return l.jsxs(z,{variant:"transparent",className:"flex grow flex-col rounded-lg",children:[l.jsx(at,{className:"group flex cursor-pointer items-stretch",href:o,target:"_self",onClick:b(o,"primaryLink"),rel:"noopener",...a,children:l.jsxs(z,{className:"pr-md group",children:[l.jsxs("div",{className:"mb-xs flex items-center gap-1.5",children:[l.jsx(Xd,{size:18,domain:v,className:"flex-shrink-0 rounded-full"}),l.jsx(D,{variant:"tinyRegular",color:"light",className:"line-clamp-1 break-all",children:x})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(D,{variant:"baseSemi",color:"super",className:"decoration-1 underline-offset-1 group-hover:underline",children:i}),l.jsx(D,{variant:"small",color:"light",className:"mb-two line-clamp-2",children:c})]})]})},o),u&&u.length>0&&l.jsx(D,{variant:"small",color:"light",className:"pt-two pb-sm",children:l.jsx(bc,{className:"flex-wrap",children:u.map(_=>l.jsx(fr,{id:_.url,children:l.jsx(at,{className:"group flex cursor-pointer items-stretch",href:_.url,onClick:b(_.url,"siteLink"),rel:"noopener",...a,children:l.jsx(D,{variant:"small",color:"super",className:B("decoration-1 underline-offset-1 group-hover:underline"),children:_.title})})},_.url))})})]})}),pLt=({entry:e,webResults:t,showSourcesSidebar:n,submit:r,allowedNavResultsCount:s,isFirstResult:a,...o})=>{const{trackEvent:i}=Te(),{trackEvent:c}=Ep(),{openModal:u}=_t(),d=vo(),m=dLt(),h=f.useMemo(()=>"searchMode"in o&&o.searchMode===ae.SEARCH,[o]),p=f.useMemo(()=>t?.filter(N=>N.is_navigational)?.flatMap(N=>mLt(N)||[]),[t]),{data:g}=FHe(e?.query_str??""),y=f.useMemo(()=>g?.navigation_results?.map(N=>({...N,is_cached:!0}))??p?.map(N=>({...N,is_cached:!1})),[g,p]),v=f.useMemo(()=>y?.slice(0,s),[y,s]),x=v?.length&&a&&!h,b=f.useMemo(()=>an.isPerplexityMessage(e)?e?.display_model==="pplx_study":!1,[e]),_=f.useMemo(()=>{if(b)return;if(!v)return t;const N=new Set(v.map(P=>P.url));return t?.filter(P=>!N.has(P.url))},[t?.length,v]),w=f.useMemo(()=>_?.filter(N=>N.meta_data?.client==="trending")??[],[_?.length]),S=f.useMemo(()=>_?.slice(0,3)??[],[_]),E=f.useMemo(()=>S.filter(N=>N.meta_data?.client==="trending").length,[S])>=2,M=f.useMemo(()=>an.isPerplexityMessage(e)?e?.blocks?.some(N=>N.intended_usage==="answer_media_items"):!1,[e]),T=f.useMemo(()=>!x&&!M&&E,[x,M,E]),I=f.useCallback(()=>{if(e?.backend_uuid){const N=n?"sidebar":"modal";c("click view sources button",{entryUUID:e.backend_uuid,type:m.isShowing?void 0:N})}n?m.actions.show({webResults:t}):u("citationListModal",{webResults:t,entry:e,submit:d?r:void 0})},[e?.backend_uuid,u,d,n,m.isShowing,m.actions.hide,r,c,t?.length]),j=fLt({trackEvent:i,entryUUID:e?.backend_uuid,frontendContextUUID:e?.uuid,contextUUID:e?.context_uuid});return f.useMemo(()=>({isNavigationalLayout:x,navigationResults:v,trackCitationClickEvent:j,handleViewAllClick:I,dedupedWebResults:_,isTrendingLayout:T,trendingResults:w}),[_,I,x,T,v,j,w])};var gLt={};const Mne=3,vMe=A.memo(({sbsEntriesGroup:e,submitQuery:t,shouldShowProductFeedback:n,feedbackEntryUUID:r,shouldShowRecruitmentBanner:s,deleteLastResult:a,setQuote:o,answerModesTabsBottom:i})=>{const{isMobileStyle:c}=Ce(),u=gt(),d=s2e(),{result:m,response:h,hasLLMToken:p,searchMode:g,isFirstResult:y,webResults:v,steps:x,isPending:b,actions:{handleSourcesCuration:_}}=wn(),w=Dme(),S=f.useMemo(()=>{if(!m?.query_str)return"";const{actualQuery:Y}=nc(m.query_str);return Y||""},[m?.query_str]),C=f.useMemo(()=>!c,[c]),E=f.useRef(null);pMe({entryUUID:m?.backend_uuid??"",target:E,targetVisibilityPortionThreshold:.3,frontendContextUUID:m?.frontend_context_uuid??"",hasLLMToken:p});const{trackCitationClickEvent:M,navigationResults:T}=pLt({allowedNavResultsCount:Mne,entry:m,webResults:v,showSourcesSidebar:C,submit:_,searchMode:g,isFirstResult:y}),I=tn(),j=hr(),{navigationResults:N}=_o(),P=m?.frontend_uuid,R=N[P??""]??ce,k=ede(P),O=tLt(P??""),L=f.useMemo(()=>R.length>0,[R]),F=f.useMemo(()=>I&&(R.length||k)?R:T||ce,[I,R,T,k]),U=f.useMemo(()=>F?{serverRequestTimestamp:u.getQueryData(["serverRequestTimestamp",m?.query_str??void 0,m?.uuid??void 0])}:{serverRequestTimestamp:void 0},[u,m?.query_str,F,m?.uuid]),V=f.useMemo(()=>F?.slice(0,Math.max(Mne,R?.length??0))?.map((Y,Q)=>({...Y,position:Q,source:U.serverRequestTimestamp?"default_search":"client_search",client_request_timestamp:w(),unstable_server_request_timestamp:U.serverRequestTimestamp||void 0,sitelinks:Y.sitelinks?.map((re,te)=>({url:re.url,title:re.title,position:te})),is_comet_navigation:L})),[w,F,R?.length,U.serverRequestTimestamp,L]),W=f.useMemo(()=>!!v&&v.length>0,[v]),H=f.useMemo(()=>m?.search_focus==="writing",[m?.search_focus]),G=tn(),K=typeof O<"u",$=f.useMemo(()=>{if(!G)return!1;const Y=m.status==="COMPLETED";return!(K||Y)||!!O?.personal_search||!!O?.skip_search||!!O?.hide_nav||!!O?.image_generation||!!O?.time_widget},[G,K,O,m.status]),q=f.useMemo(()=>!gLt.NEXT_PUBLIC_IS_SIDECAR_BUILD&&!$&&V&&V.length>0&&m.attachments?.length===0&&!H&&g===ae.SEARCH,[$,V,m.attachments?.length,H,g]);f.useEffect(()=>{j.maybeSendSearchResult(h,x,b)},[b,W,h,j,x]);const Z=f.useCallback(()=>{L&&(m?.query_source==="default_search"?d("web.frontend.omnisearch_nav_results_shown",{omnisearch:w()!==0}):d("web.frontend.nav_results_shown"))},[L,m?.query_source,d,w]),se=iLt();return l.jsxs("div",{className:"gap-y-sm flex flex-col",ref:E,children:[se&&l.jsx(oLt,{}),q&&l.jsx(xMe,{navResults:V,queryStr:S,result:m,trackCitationClickEvent:M,onMount:Z}),l.jsx(gMe,{submitQuery:t,shouldShowProductFeedback:n,feedbackEntryUUID:r,shouldShowRecruitmentBanner:s,deleteLastResult:a,setQuote:o,answerModesTabsBottom:i,shouldShowNavResults:q,sbsEntriesGroup:e})]})});vMe.displayName="ThreadContent";const xMe=f.memo(({navResults:e,queryStr:t,result:n,trackCitationClickEvent:r,onMount:s})=>{f.useEffect(()=>{s?.()},[s]);const a=f.useCallback((o,i)=>{r(o,i);const c=n.query_source==="default_search",u=i.is_comet_navigation;!(o==="click citation")||!c||!u||uo("web.frontend.omnisearch_nav_results_clicked")},[r,n.query_source]);return l.jsx(z,{className:"my-sm flex flex-col gap-3",children:e.map(o=>l.jsx("div",{className:"gap-sm flex",children:l.jsx("div",{className:"grow",children:l.jsx(hLt,{navigationResult:o,trackEvent:a,queryString:t,entryUUID:n.backend_uuid??""},o.url)})},o.url))})});xMe.displayName="NavigationResultList";const bMe=A.memo(({submitQuery:e})=>{const t="trigger-entry-rewrite",n=Ht(),{result:{backend_uuid:r,frontend_context_uuid:s,attachments:a,display_model:o},idx:i,editQueryValue:c}=wn(),u=Ec(),d=window.location.hash.slice(1),m=parseInt(d,10),h=n?.get("rw")==="true";return f.useEffect(()=>{if(!(isNaN(m)||i!==m)&&h){Dv({rw:void 0});const p=()=>e({rawQuery:c,existingEntryUUID:r,redoSearch:!0,collection:null,newFrontendContextUUID:null,existingFrontendContextUUID:u?void 0:s,promptSource:"user",querySource:"rewrite-url-param",attachments:a,modelPreferenceOverride:o});r?Mv({entryUUID:r,reason:t}).catch(g=>{ee.error("Error terminating entry",g)}).finally(p):p()}},[h,u,e,m,i,r,c,s,a,o]),null});bMe.displayName="TriggerEntryRewrite";function yLt(e,t,n){const r=new Blob([n],{type:"text/plain"});UU(e,t,r)}function UU(e,t,n){const r=document.createElement("a"),s=URL.createObjectURL(n);r.href=s,r.download=t,e.appendChild(r),r.click(),URL.revokeObjectURL(s),e.removeChild(r)}const vLt=new Set(["markdown","md"]);function _Me(e){if(e?.asset_type==$s.CODE_FILE&&e.code_file?.url&&vLt.has(e.code_file.name.split(".").at(-1)))return{filenamePrefix:e.code_file.name.slice(0,e.code_file.name.lastIndexOf(".")),url:e.code_file.url}}function bzt(e){return _Me(e)!==void 0}function _zt(e){return!(!e?.asset_type||[$s.GENERATED_VIDEO,$s.APP].includes(e.asset_type))}function wzt({asset:e,reason:t}){const n=f.useCallback(async(r,s)=>{const a=_Me(e);if(!a)return;const{filenamePrefix:o,url:i}=a,c=o+"."+r,u=await gYe({request:{filename:c,format:r,url:i},reason:t});UU(s||document.body,c,u)},[e,t]);return f.useMemo(()=>({exportAsset:n}),[n])}function xLt({reason:e}){const{result:{backend_uuid:t}}=wn(),[n,r]=f.useState(!1),s=f.useCallback(async a=>{r(!0);try{const o=await yYe({request:{entry_uuid:t},reason:e});UU(a||document.body,"exported-assets.zip",o)}finally{r(!1)}},[t,e]);return f.useMemo(()=>({exportAllAssets:s,isExporting:n}),[s,n])}function bLt({asset:e,reason:t,answerMode:n,entryUUID:r}){const{downloadS3Asset:s,downloadImageAsset:a,downloadMediaAsset:o}=wfe({reason:t}),{trackEvent:i}=Te(),c=f.useCallback(async u=>{if(e)if(i("generated asset downloaded",{assetType:e.asset_type,answerMode:n,entryUUID:r,reason:t}),e.asset_type===$s.GENERATED_IMAGE)e.generated_image?.url&&await a(e.generated_image.url,"generated-image.png",u||document.body);else if(e.asset_type===$s.GENERATED_VIDEO)e.generated_video?.url&&await o(e.generated_video.url,"generated-video.mp4",u||document.body);else for(const d of e.download_info)d.url?await s({url:d.url,filename:d.filename}):d.text_content&&yLt(u||document.body,d.filename,d.text_content)},[e,i,n,r,a,o,s,t]);return f.useMemo(()=>({downloadAsset:c}),[c])}var _Lt=(e=>(e[e.UNCOPIED=0]="UNCOPIED",e[e.COPYING=1]="COPYING",e[e.FAILED=2]="FAILED",e[e.SUCCEEDED=3]="SUCCEEDED",e))(_Lt||{});function Szt({asset:e,reason:t}){const[n,r]=f.useState(0),{$t:s}=X(),{openToast:a}=On(),o=f.useCallback(async()=>{if(e){r(1);try{await wLt({asset:e,reason:t}),a(s({defaultMessage:"Copied to the clipboard!",id:"WWy0tPuRW8"}),"success",3),r(3)}catch{a(s({defaultMessage:"Failed to copy the asset",id:"HHPhgIZj9h"}),"error",3),r(2)}setTimeout(()=>r(0),2e3)}},[s,a,r,e,t]);return f.useMemo(()=>({copyStatus:n,copyAsset:o}),[n,o])}async function wLt({asset:e,reason:t}){let n;if(e.asset_type==$s.CODE_ASSET)n={"text/plain":e.code?.script??""};else if(e.asset_type==$s.CHART&&e.chart?.url){const s=await PP({request:{url:e.chart.url,filename:"chart.png"},reason:t});n={"image/png":await(await fetch(s)).blob()}}else if(e.asset_type==$s.CODE_FILE&&e.code_file?.url){const s=await PP({request:{url:e.code_file.url,filename:e.code_file.name},reason:t});n={"text/plain":await(await fetch(s)).text()}}else if(e.asset_type==$s.GENERATED_IMAGE&&e.generated_image?.url){const s=e.generated_image.url;n={"image/png":await(await fetch(s)).blob()}}else if(e.asset_type==$s.GENERATED_VIDEO&&e.generated_video?.url){const s=e.generated_video.url;n={"video/mp4":await(await fetch(s,{mode:"cors",cache:"no-cache"})).blob()}}if(!n)throw new Error("Failed to find anything to copy");const r=new ClipboardItem(n);await navigator.clipboard.write([r])}const wMe=A.memo(()=>l.jsx(Ln,{children:l.jsx("div",{className:"gap-sm flex flex-wrap",children:Array.from({length:8}).map((e,t)=>l.jsx(SMe,{index:t},t))})}));wMe.displayName="ImagesModeLoader";const SMe=A.memo(({index:e})=>{const{isMobileStyle:t}=Ce(),{isLargeScreen:n,isXLargeScreen:r}=mD(),s=f.useMemo(()=>t?120:r?240:n?200:180,[t,n,r]);return l.jsx("div",{className:B("bg-offset grow basis-1/3 rounded-xl md:basis-1/4",{"w-1/2 !max-w-none":e===1}),style:{height:s}})});SMe.displayName="Item";const CMe=A.memo(()=>l.jsx(Ln,{children:l.jsx(z,{variant:"offset",className:"h-[180px] w-full overflow-hidden rounded-xl [mask-image:linear-gradient(to_bottom,#000_0%,transparent_160px)]"})}));CMe.displayName="JobsModeLoader";const BU=A.memo(()=>l.jsxs("div",{className:"gap-md @container flex w-full flex-row",children:[l.jsx("div",{className:"md:@[1458px]:w-[874px] md:@[1458px]:shrink-0 w-full md:w-3/5",children:l.jsx(MMe,{})}),l.jsx("div",{className:"@md:w-[570px] @md:@[1458px]:w-full hidden md:block",children:l.jsx(EMe,{})})]}));BU.displayName="PlacesModeLoader";const EMe=A.memo(()=>l.jsx(Ln,{children:l.jsx(z,{variant:"offset",className:"sticky h-[180px] w-full overflow-hidden rounded-xl [mask-image:linear-gradient(to_bottom,#000_0%,transparent_160px)]"})}));EMe.displayName="PlacesModeMapLoader";const MMe=A.memo(()=>l.jsx(Ln,{children:l.jsx("div",{className:"gap-md grid h-[180px] grid-cols-[repeat(auto-fill,minmax(220px,1fr))] overflow-hidden [mask-image:linear-gradient(to_bottom,#000_0%,transparent_160px)]",children:Array.from({length:8}).map((e,t)=>l.jsx(TMe,{},t))})}));MMe.displayName="PlacesModeGridLoader";const TMe=A.memo(()=>l.jsx("div",{className:B("bg-offset aspect-[4/3] w-full rounded-xl")}));TMe.displayName="Item";const kMe=f.memo(()=>{const{isMobileStyle:e}=Ce();return l.jsxs(Ln,{className:"-mx-md pl-md md:mx-auto",children:[l.jsx("div",{className:"gap-md md:mb-lg mb-md flex auto-rows-fr grid-cols-2 overflow-hidden md:grid md:grid-cols-3",children:Array.from({length:3}).map((t,n)=>l.jsx(NMe,{},n))}),l.jsxs("div",{className:"gap-sm flex flex-col",children:[l.jsxs("div",{className:"grid grid-cols-1 grid-rows-1 items-center",children:[l.jsx(D,{variant:e?"base":"section-title",className:"col-start-1 row-start-1",children:""}),l.jsx("div",{className:"bg-offset col-start-1 row-start-1 h-3 w-32 grow rounded-full md:h-4"})]}),l.jsx("div",{className:"gap-md pr-md flex auto-rows-fr grid-cols-2 flex-col md:grid md:pr-0",children:Array.from({length:2}).map((t,n)=>l.jsx(AMe,{},n))})]})]})});kMe.displayName="ShoppingModeLoader";const NMe=f.memo(()=>l.jsx("div",{className:B("bg-offset aspect-video h-[327px] w-[70vw] grow rounded-xl md:h-[413px] md:w-full")}));NMe.displayName="Item";const AMe=f.memo(()=>l.jsx("div",{className:"bg-offset aspect-video h-[144px] w-full grow rounded-md"}));AMe.displayName="SmallItem";const SLt=()=>{const{openModal:e}=_t(),{trackEvent:t}=Te();return f.useCallback(r=>{if(NC(r))return;const s=Zfe(r);e("memorySearchHistoryModal",s);const a=s.type,o=s.memoryKey,i=s.entryUuid;t("viewed memory search history modal",{type:a,...a==="memory"&&{memory_key:o},...a==="conversation_history"&&{entry_uuid:i}})},[e,t])};function PMe(){const{value:e}=Ut({flag:"move-citations-to-paragraph-end",subjectType:"visitor_id",defaultValue:!1});return e}typeof globalThis<"u"&&(globalThis.__useMoveCitationsToParagraphEnd=PMe);const VU=A.memo(({webResult:e,citationIndex:t,isRelatedResult:n})=>{const r="sources-row",{$t:s,formatDate:a}=X(),o=f.useMemo(()=>Hi(e.url),[e.url]),i=f.useMemo(()=>S9(e.url),[e.url]),c=e.is_client_context,{result:{backend_uuid:u,context_uuid:d,frontend_context_uuid:m}}=wn(),h=hr(),p=tn(),g=f.useMemo(()=>e.meta_data?.domain_name??o.replace(/\.[^.]*$/,""),[o,e.meta_data?.domain_name]),y=co(e.url),v=pfe(e),x=e.meta_data?.connection_type,{trackEvent:b}=Te(),_=f.useCallback((G,K)=>{p&&h.openTab({url:G,tabId:K})},[p,h]),{mutate:w}=Vde({reason:r,onSuccess:p?_:void 0}),S=PMe(),C=SLt(),E=e.meta_data?.repo_type,M=!c||p,T=P9(e),I=LYe(e),j=NC(e),{getImageDownloadUrl:N}=EF({reason:r}),[P,R]=f.useState(null);f.useEffect(()=>{P===null&&(async()=>{if(!y){R(e.url);return}if(E9(e.url)){R(e.url);return}try{const K=await N({url:e.url,thread_id:u});R(K)}catch(K){ee.error(`Failed to fetch image source ${K}`),R(e.url)}})()},[N,u,e,y,P]),f.useEffect(()=>{b("source card viewed",{citation_url:e.url,position:t,title:e.name,contextUUID:d,frontendContextUUID:m,entryUUID:u,source:n?"sourcesTabViewMore":"sourcesTab"})},[e,b,t,n,d,m,u]);const k=f.useCallback(G=>{try{const $=e.meta_data?.file_uuid?"fileRepositoryFile":e.is_attachment?"fileAttachment":n?"sourcesTabViewMore":"sourcesTab",q=Zfe(e),{type:Z,memoryKey:se}=q;b("click citation",{citation_url:e.url,contextUUID:d,frontendContextUUID:m,entryUUID:u,isMemory:e.is_memory,isConversationHistory:e.is_conversation_history,source:$,...Z==="memory"&&{memory_key:se}})}catch($){ee.error("Failed to send click citation event:",$)}if(T&&!j){C(e);return}const K=TC(e);if(U9e(G)&&!K){h.openTab({url:e.url,tabId:e.tab_id});return}if(!K&&!c){const $=window.open(e.url,"_blank");$&&$.focus()}else K&&w({file_url:e.url})},[T,e,c,n,b,d,m,u,C,h,w,j]),O=()=>E=="COLLECTION"?s({defaultMessage:"Space Context",id:"wGTk8CFt1g"}):E=="USER"?s({defaultMessage:"My Files",id:"AjhJXSvkRs"}):E=="ORG"?s({defaultMessage:"Org Files",id:"DaFSYzpM1Q"}):s({defaultMessage:"Attachment",id:"eLCAEP8LHj"}),L=()=>e.meta_data?.repo_type=="COLLECTION"?s({defaultMessage:"File",id:"gyrIElu9qY"}):e.meta_data?.connection_type?Bqe(e.meta_data.connection_type):s({defaultMessage:"Local upload",id:"fscjAJoLwa"}),F=f.useMemo(()=>l.jsx(Cn,{size:"tiny",showBackground:!1,rounded:!1,user:$c(x)??void 0}),[x]);let U=null,V="",W=null;if(y||v||x&&x!==Pn.WILEY)U=l.jsx("div",{className:"bg-offset size-lg flex items-center justify-center rounded-full",children:x?l.jsx(be,{icon:Qne,size:"base",badge:F}):l.jsx(be,{icon:hf,className:"size-md"})}),W=l.jsx(D,{variant:"tinyRegular",color:"light",className:"line-clamp-1",children:L()}),V=O();else if(T&&!j)U=l.jsx("div",{className:"bg-offsetPlus flex size-[28px] items-center justify-center rounded-full",children:l.jsx(be,{size:"base",icon:e.is_memory?Gl:pf})}),W=l.jsx(D,{variant:"tinyRegular",color:"light",className:"line-clamp-1",children:e.timestamp&&a(e.timestamp,{dateStyle:"long"})}),V=e?.is_memory?s({defaultMessage:"Memory",id:"dVx3yznM2C"}):s({defaultMessage:"Library",id:"StcK672jB9"});else{const G=x===Pn.WILEY?LS:void 0;U=l.jsx(Xd,{size:28,domain:i,className:"size-full rounded-full",overrideIconUrl:G}),V=g,W=j?l.jsxs("div",{className:"gap-xs -ml-two flex flex-row items-center",children:[l.jsx(D,{variant:"tiny",color:"super",className:"-translate-y-px",children:l.jsx(be,{size:"xs",icon:W_})}),l.jsx(D,{variant:"tinyRegular",color:"super",className:"line-clamp-1",children:l.jsx(he,{defaultMessage:"Personal Search",id:"TZougEncQH",description:"subtitle"})})]}):l.jsx(D,{variant:"tinyRegular",color:"light",className:"line-clamp-1",children:GKe(zKe(e.url))})}const H=f.useMemo(()=>{if(y)return P;if(typeof e.meta_data?.image_url=="string")return e.meta_data.image_url;if(typeof e.meta_data?.images?.[0]=="string")return e.meta_data.images[0];if(typeof e.meta_data?.images?.[0]?.src=="string")return e.meta_data.images[0].src},[y,e,P]);return l.jsx("div",{className:"gap-md relative items-start",children:l.jsxs("div",{className:"gap-lg relative flex w-full flex-row items-center lg:pl-0",children:[l.jsxs("div",{className:"grow",children:[l.jsxs("div",{className:B("gap-xs group flex flex-1 flex-col",{"cursor-pointer":!y&&M}),onClick:k,children:[l.jsxs("div",{className:B("gap-sm flex flex-row items-center"),children:[l.jsx("div",{className:"size-[28px] shrink-0",children:U}),l.jsxs("div",{className:"flex flex-1 flex-col",children:[l.jsx("div",{className:"gap-sm flex flex-row items-center",children:l.jsxs(D,{variant:"tiny",className:"line-clamp-1",children:[!n&&t&&!S?t+". ":null,V]})}),W]}),T&&l.jsx(D,{variant:"tiny",color:"light",children:l.jsx(be,{size:"xs",icon:W_})})]}),I?null:l.jsx(D,{variant:"baseSemi",color:"default",className:B("line-clamp-1 transition-colors duration-300",{"group-hover:text-super":!y&&M}),children:e.name})]}),l.jsx(D,{variant:"small",color:"light",className:B("line-clamp-3 whitespace-pre-wrap",{"pt-2":I}),children:e.meta_data?.generated_file_description??e.meta_data?.description??e.snippet})]}),H&&l.jsxs("div",{className:"relative ml-auto hidden aspect-square h-fit w-20 shrink-0 cursor-pointer overflow-hidden rounded-md sm:block",onClick:k,role:"button",tabIndex:0,onKeyDown:G=>{(G.key==="Enter"||G.key===" ")&&(G.preventDefault(),k(G))},children:[l.jsx(es,{src:H,alt:"image",containerClassName:"absolute inset-0",imageClassName:"absolute inset-0 object-cover object-center w-full h-full",includeLightBoxModal:!1}),l.jsx("div",{className:"rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"})]})]})})});VU.displayName="SourcesRow";const CLt=async({request:e,reason:t})=>(await ne.POST("/rest/sources/search",t,{body:{entry_uuid:e.entry_uuid,limit:e.limit,page:e.page??null},timeoutMs:nn.MEDIUM})).data,ELt=({reason:e})=>{const{mutate:t,data:n,isPending:r}=Mt({mutationFn:async s=>(await CLt({request:s,reason:e})).results});return f.useMemo(()=>({isSearchResultsLoading:r,searchResults:n,fetchSearch:t}),[t,r,n])};var Tne={};const MLt=10,kne=tn(),RMe=A.memo(()=>{const e="sources-mode",{$t:t}=X(),{sources:n}=ax(),r=TLt({dedupeAttachments:!0}),{isEntryInFlight:s,result:a}=wn(),{fetchSearch:o,isSearchResultsLoading:i}=ELt({reason:e}),[c,u]=f.useState(1),[d,m]=f.useState([]),h=Ec(),p=Je(),{openModal:g}=_t(),y=f.useCallback(()=>{const b=c+1;o({entry_uuid:a.backend_uuid??"",limit:MLt,page:b},{onSuccess:_=>{m([...d,..._]),u(b)}})},[c,o,d,a.backend_uuid]),v=f.useCallback(()=>{if(!p){g("loginModal",{origin:Be.SOURCES_VIEW_MORE});return}y()},[y,p,g]);f.useEffect(()=>{n.count<10&&!i&&!s&&!h&&!kne&&!Tne.NEXT_PUBLIC_IS_SIDECAR_BUILD&&y()},[s]);const x=!kne&&!Tne.NEXT_PUBLIC_IS_SIDECAR_BUILD;return l.jsxs("div",{children:[l.jsx(om,{heading:t({defaultMessage:" Attached ",id:"19UTmMXJZR"}),sources:r.attachedSources}),l.jsx(om,{heading:t({defaultMessage:"Selected",id:"byP6IC/F2s"}),sources:r.selectedSources}),l.jsx(om,{heading:t({defaultMessage:"Reviewed",id:"wiy+GNv+BV"}),sources:r.reviewedSources}),l.jsx(om,{heading:t({defaultMessage:"Reviewing",id:"L+ISAVX7+d"}),sources:r.reviewingSources,shimmer:!0}),l.jsx(om,{sources:r.unsortedSources}),x&&l.jsxs(st,{mode:"wait",children:[c===1&&l.jsx(_e.div,{animate:{opacity:1,y:0},exit:{opacity:0,y:-6},transition:ho,className:"mt-md flex w-full items-center justify-center",children:l.jsx(ye,{variant:"common",isLoading:i||s,size:"small",text:t({defaultMessage:"View More",id:"QQSdHPJWXu"}),onClick:v,pill:!0})},"masher"),d.length>0?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"my-md relative md:ml-0",children:[l.jsx("hr",{className:"bg-offsetPlus absolute top-1/2 h-px w-full border-0"}),l.jsx(D,{variant:"small",color:"light",className:"mb-md bg-base pr-sm relative z-[1] w-fit",children:t({defaultMessage:"More Results",id:"7S7CM3eEfJ"})})]}),l.jsx(z,{className:"gap-lg py-sm flex flex-col",children:d.map((b,_)=>l.jsx(VU,{webResult:b,citationIndex:_,isRelatedResult:!0},b.url))})]}):null]})]})});RMe.displayName="SourcesMode";const om=A.memo(({sources:e,heading:t,shimmer:n=!1})=>e.length===0?null:l.jsxs(l.Fragment,{children:[t?l.jsxs("div",{className:"my-md relative md:ml-0",children:[l.jsx("hr",{className:"bg-offsetPlus absolute top-1/2 h-px w-full border-0"}),l.jsx("div",{className:"bg-base",children:l.jsx(D,{variant:"small",color:"light",className:"mb-md bg-base pr-sm relative z-[1] w-fit",children:l.jsx(Ln,{variant:"super",active:n,as:"span",children:t})})})]}):null,l.jsx(z,{className:"gap-lg py-sm flex flex-col",children:e.map(r=>l.jsx(VU,{webResult:r.web_result,citationIndex:r.citation},r.web_result?.url))})]}));om.displayName="SourcesModeSection";const TLt=({dedupeAttachments:e=!1})=>{const{result:t}=wn(),n=kLt({attachments:t.attachments??ce});return f.useMemo(()=>{const r=new Map,s=[];for(const u of t?.blocks?.find(d=>d.sources_mode_block)?.sources_mode_block?.rows??[]){const d=u.web_result?.is_attachment&&!gfe(u.web_result);if(d&&s.push(u),!d||!e){const m=r.get(u.status)??[];m.push(u),r.set(u.status,m)}}const a=r.get(Ax.SELECTED)??ce,o=r.get(Ax.REVIEWED)??ce,i=r.get(Ax.REVIEWING)??ce,c=r.get(Ax.UNSORTED)??ce;return s.length===0&&n.length>0&&s.push(...n),{attachedSources:s,selectedSources:a,reviewedSources:o,reviewingSources:i,unsortedSources:c}},[e,n,t?.blocks])},kLt=({attachments:e})=>e.map(t=>({web_result:{name:mfe(t),url:t,is_attachment:!0,is_image:co(t),is_code_interpreter:!1,is_knowledge_card:!1,is_navigational:!1,is_widget:!1,sitelinks:[],snippet:"",timestamp:"",meta_data:{},inline_entity_id:""},status:"UNKNOWN",citation:0})),IMe=A.memo(()=>l.jsx(Ln,{children:l.jsx("div",{className:"gap-xs grid auto-cols-fr auto-rows-fr grid-cols-2 sm:grid-cols-3 xl:grid-cols-4",children:Array.from({length:8}).map((e,t)=>l.jsx(jMe,{},t))})}));IMe.displayName="VideoModeLoader";const jMe=A.memo(()=>l.jsx("div",{className:B("bg-offset aspect-video w-full grow rounded-md")}));jMe.displayName="Item";const NLt=({root:e})=>{const t=f.useRef(null),[n,r]=f.useState(!1),[s,a]=f.useState(!1),o=f.useCallback(i=>{i?(t.current=i,r(!0)):(r(!1),t.current=null)},[]);return f.useEffect(()=>{if(!t.current||!n)return;const i=new IntersectionObserver(([c])=>{a(c.intersectionRatio<1)},{threshold:[1],root:e,rootMargin:"-1px 9999px 9999px 9999px"});return i.observe(t.current),()=>i.disconnect()},[e,n]),f.useMemo(()=>({ref:o,isSticky:s}),[s,o])};var ALt={};const PLt=ge(async()=>{const{ShoppingMode:e}=await oe(async()=>{const{ShoppingMode:t}=await import("./ShoppingMode-Dgv5vVPk.js");return{ShoppingMode:t}},__vite__mapDeps([167,1,2,3,168,169,126,148,5,4]));return{default:e}},{loading:()=>l.jsx(kMe,{})}),RLt=ge(async()=>{const{HotelsMode:e}=await oe(async()=>{const{HotelsMode:t}=await import("./HotelsMode-ChMJRJvN.js");return{HotelsMode:t}},__vite__mapDeps([170,1,2,171,4,5,44,3,45,172,144,74,145,169]));return{default:e}},{loading:()=>l.jsx(BU,{})}),ILt=ge(async()=>{const{JobsMode:e}=await oe(async()=>{const{JobsMode:t}=await import("./JobsMode-DeORj42g.js");return{JobsMode:t}},__vite__mapDeps([173,1,2,3,4,157,5]));return{default:e}},{loading:()=>l.jsx(CMe,{})}),jLt=ge(async()=>{const{VideosMode:e}=await oe(async()=>{const{VideosMode:t}=await import("./VideosMode-DwUN005D.js");return{VideosMode:t}},__vite__mapDeps([174,1,2,3,115,116,117,4,169,175,5]));return{default:e}},{loading:()=>l.jsx(IMe,{})}),OLt=ge(async()=>{const{ImagesMode:e}=await oe(async()=>{const{ImagesMode:t}=await import("./ImagesMode-aqn1aVaz.js");return{ImagesMode:t}},__vite__mapDeps([176,1,2,3,147,4,177,169,175,5]));return{default:e}},{loading:()=>l.jsx(wMe,{})}),LLt=ge(async()=>{const{MapsMode:e}=await oe(async()=>{const{MapsMode:t}=await import("./MapsMode-DyWj1C6l.js");return{MapsMode:t}},__vite__mapDeps([178,1,2,44,3,4,45,5,172,144,74,145,169]));return{default:e}},{loading:()=>l.jsx(BU,{})}),DLt=ge(async()=>{const{AssetsMode:e}=await oe(async()=>{const{AssetsMode:t}=await import("./AssetsMode-G7Vl3FKc.js");return{AssetsMode:t}},__vite__mapDeps([179,1,2,3,70,5,4,69,20,19,21,138]));return{default:e}},{loading:()=>l.jsx(rMe,{})}),FLt=ge(async()=>{const{AppsMode:e}=await oe(async()=>{const{AppsMode:t}=await import("./AppsMode-Rb0Nt3fE.js");return{AppsMode:t}},__vite__mapDeps([137,1,2,3,138,4,5]));return{default:e}},{loading:()=>l.jsx(rMe,{})}),ULt=ge(async()=>{const{TasksMode:e}=await oe(async()=>{const{TasksMode:t}=await import("./TasksMode-BTFFY99W.js");return{TasksMode:t}},__vite__mapDeps([180,1,2,140,3,133,4,5,134,80,77,70,20,135,141,19,21,22,137,138,181]));return{default:e}},{loading:()=>l.jsx(kOt,{})}),OMe=A.memo(({isLastResult:e,isFirstResult:t,sbsEntriesGroup:n,submitQuery:r,shouldShowProductFeedback:s,feedbackEntryUUID:a,shouldShowRecruitmentBanner:o,deleteLastResult:i,setQuote:c,scrollToListItem:u,lastResultBuffer:d,idx:m})=>{const{answerModeActionList:h,currentModeData:p,defaultModeOverride:g}=ax(),{isMobileStyle:y}=Ce(),{result:{backend_uuid:v,context_uuid:x,attachments:b,status:_,frontend_context_uuid:w,query_str:S,upsell_information:C,parent_info:{mode:E,url_slug:M}={}},isEntryInFlight:T,webResults:I}=wn(),j=Ec(),N=E&&M,[P,R]=f.useState(!1),{scrollContainerRef:k}=Sc(),O=f.useRef(new Set),{trackEvent:L}=Te();f.useEffect(()=>{if(!(v?.length===0||v===HL||x?.length===0))for(const se of h)O.current.has(se.mode)||(O.current.add(se.mode),L("answer mode tab viewed",{answerMode:se.mode,entryUUID:v,contextUUID:x}))},[h,L,v,x]);const{ref:F,isSticky:U}=NLt({root:k.current??void 0}),V=f.useMemo(()=>y&&!ALt.NEXT_PUBLIC_IS_SIDECAR_BUILD?!1:U,[y,U]),W=f.useCallback(()=>{u(m,{smooth:!0})},[u,m]);f.useEffect(()=>{typeof window>"u"||_!=="PENDING"||W()},[T,_,W]);const H=f.useMemo(()=>({backend_uuid:v,frontend_context_uuid:w,query_str:S}),[v,w,S]),G=f.useMemo(()=>{if(p.mode!=="default")return p.mode==="images"?j?void 0:l.jsx(FMe,{result:H,setIsGeneratingImage:R,isGeneratingImage:P}):p.mode==="assets"?l.jsx(DMe,{}):p.mode==="apps"?l.jsx(LMe,{}):null},[p.mode,j,H,P]),K=b&&b.length>0,[$,q]=f.useState(null);f.useEffect(()=>{const se=()=>{const re=document.querySelector(".sticky-tabs-ref");re&&q(re.clientHeight)};se(),window.addEventListener("scroll",se,{passive:!0});const Y=new ResizeObserver(se),Q=document.querySelector(".sticky-tabs-ref");return Q&&Y.observe(Q),()=>{window.removeEventListener("scroll",se);const re=document.querySelector(".sticky-tabs-ref");re&&Y.unobserve(re)}},[]);const Z=f.useMemo(()=>{if(e&&d)return{paddingBottom:`${d+(K?52:0)}px`}},[e,d,K]);return l.jsxs(z,{className:B({"pt-headerHeight md:pt-sm erp-sidecar:pt-0 erp-mobile-sidecar:pt-0":t&&!N,"erp-sidecar:min-h-[var(--sidecar-content-height)] min-h-[var(--page-content-height)] md:min-h-[var(--page-content-height-without-header)]":e}),style:Z,children:[l.jsx(bMe,{submitQuery:r}),l.jsx(yMe,{webResults:I,children:l.jsxs("div",{className:B("isolate mx-auto md:pt-6",{"px-md max-w-none":p.width==="full","max-w-threadWidth px-md md:px-lg":p.width==="wide","px-md":p.width==="default"}),children:[l.jsx("div",{className:"max-w-threadContentWidth relative isolate z-20 mx-auto",children:l.jsx("div",{className:V?"pointer-events-none opacity-0":void 0,children:l.jsx(IOt,{isFirstResult:t,submitQuery:r})})}),l.jsx(rc,{isSamsungBrowser:!0,children:l.jsx("div",{className:"max-w-threadContentWidth mt-md relative z-20 mx-auto",children:l.jsx(DM,{position:"top",idx:m,upsellInformation:C,backendUuid:v,isLastResult:e,inFlight:T})})}),l.jsx("div",{ref:F,className:B("bg-base -mx-md px-md sticky-tabs-ref erp-sidecar:sticky top-0 z-10 md:sticky"),style:{marginTop:`-${iMe}px`},children:l.jsx("div",{className:B("mx-auto",{"max-w-threadContentWidth":p.width==="default","max-w-none":p.width==="full","max-w-threadWidth":p.width==="wide"}),children:l.jsx(uMe,{modeList:h,defaultModeOverride:g,isSticky:V,inFlight:T,accessory:G})})}),l.jsx("div",{className:B("pb-md mx-auto pt-5 md:pb-12",{"max-w-threadWidth":p.width==="wide","max-w-none":p.width==="full","max-w-threadContentWidth":p.width==="default","border-subtlest border-b":!e}),children:l.jsxs(st,{initial:!1,children:[p.mode==="default"&&l.jsx(Za,{id:`default-mode-${w}`,children:l.jsx(vMe,{sbsEntriesGroup:n,submitQuery:r,shouldShowProductFeedback:s,feedbackEntryUUID:a,shouldShowRecruitmentBanner:o,deleteLastResult:i,setQuote:c,answerModesTabsBottom:$})}),p.mode==="shopping"&&l.jsx(Za,{id:`shopping-mode-${w}`,children:l.jsx(PLt,{})}),p.mode==="hotels"&&l.jsx(Za,{id:`hotels-mode-${w}`,children:l.jsx(RLt,{})}),p.mode==="places"&&l.jsx(Za,{id:`maps-mode-${w}`,children:l.jsx(LLt,{})}),p.mode==="jobs"&&l.jsx(Za,{id:`jobs-mode-${w}`,children:l.jsx(ILt,{})}),p.mode==="videos"&&l.jsx(Za,{id:`videos-mode-${w}`,children:l.jsx(jLt,{})}),p.mode==="images"&&l.jsx(Za,{id:`images-mode-${w}`,children:l.jsx(OLt,{isGeneratingImage:P})}),p.mode==="sources"&&l.jsx(Za,{id:`sources-mode-${w}`,children:l.jsx(RMe,{})}),p.mode==="assets"&&l.jsx(Za,{id:`assets-mode-${w}`,children:l.jsx(DLt,{})}),p.mode==="apps"&&l.jsx(Za,{id:`apps-mode-${w}`,children:l.jsx(FLt,{})}),p.mode==="tasks"&&l.jsx(Za,{id:`tasks-mode-${w}`,children:l.jsx(ULt,{})})]})})]})})]})});OMe.displayName="ThreadEntryInner";const LMe=A.memo(()=>{const e="apps-accessory",{$t:t}=X(),{openModal:n}=_t(),{assets:r}=ax(),{result:{backend_uuid:s}}=wn(),a=f.useMemo(()=>{for(let p=r.length-1;p>=0;p--){const g=r[p];if(g.asset_type===$s.APP)return g}},[r]);Sfe({assetType:$s.APP,entryUUID:s,answerMode:"apps",reason:"apps-accessory"});const{downloadAsset:o}=bLt({asset:a,reason:e,answerMode:"apps",entryUUID:s}),i=f.useCallback(()=>{let p,g;for(let y=r.length-1;y>=0;y--){if(r[y].asset_type!==$s.CODE_FILE)continue;const v=r[y];if(v.code_file?.name==="index.html"){p=v.uuid,g=v.backend_uuid;break}}n("searchStepsAssetsModal",{backendUUID:g||s,assetUUID:p,answerMode:"search"})},[r,s,n]),c=f.useCallback(()=>{o()},[o]),u=f.useCallback(()=>{const p=new URL(window.location.href);p.pathname=`/apps/${s}`,window.open(p.toString(),"_blank","noopener,noreferrer")},[s]),d=f.useMemo(()=>l.jsx(be,{icon:Ake,size:"xs",className:"duration-150"}),[]),m=f.useMemo(()=>l.jsx(be,{icon:V_,size:"xs",className:"duration-150"}),[]),h=f.useMemo(()=>l.jsx(be,{icon:gf,size:"xs",className:"duration-150"}),[]);return l.jsxs("div",{className:"ml-auto flex items-center gap-1.5",children:[l.jsx(Jm,{size:"tiny",pill:!0,leadingComponent:d,onClick:u,toolTip:t({defaultMessage:"View full screen",id:"nnujdEvOPI"})}),l.jsx(Jm,{size:"tiny",pill:!0,leadingComponent:m,onClick:i,toolTip:t({defaultMessage:"View source",id:"khjKGjoVqR"})}),l.jsx(Jm,{size:"tiny",pill:!0,leadingComponent:h,onClick:c,toolTip:t({defaultMessage:"Download",id:"5q3qC0sC3r"})})]})});LMe.displayName="AppsAccessory";const DMe=A.memo(()=>{const e="assets-accessory",{$t:t}=X(),{inFlight:n}=wn(),{exportAllAssets:r,isExporting:s}=xLt({reason:e}),a=f.useMemo(()=>l.jsx(be,{icon:Pke,size:"xs",className:"duration-150"}),[]),o=f.useCallback(()=>r(),[r]);return n?null:l.jsx(Jm,{text:t({defaultMessage:"Download all",id:"V1UrPNM96z"}),size:"tiny",leadingComponent:a,onClick:o,isLoading:s,disabled:s})});DMe.displayName="AssetsAccessory";const FMe=A.memo(({result:e,setIsGeneratingImage:t,isGeneratingImage:n})=>{const r="generate-image-accessory",{createLimit:s}=js({reason:r}),{onGenerateImageClick:a}=zEe({reason:r}),{$t:o}=X(),{isMobileStyle:i}=Ce(),c=f.useMemo(()=>({entryUUID:e.backend_uuid,entryTitle:e.query_str??"",frontendContextUUID:e.frontend_context_uuid??""}),[e.backend_uuid,e.frontend_context_uuid,e.query_str]),u=f.useCallback(({style:m,customInstructions:h,onFailure:p})=>a({entryUUID:e.backend_uuid,imageStyle:m,customInstructions:h,setIsLoadingGeneratedImage:t,onSuccessCallback:()=>t(!1),onFailureCallback:g=>p(g)}),[a,e.backend_uuid,t]),d=f.useCallback(({onClick:m,isRateLimitReached:h,isDisabled:p,buttonIcon:g,text:y})=>l.jsx(Jm,{text:y,size:"tiny",icon:g,onClick:m,disabled:p||h||n,extraCSS:"!py-md"}),[n]);return l.jsx(_e.div,{className:"py-sm pl-sm ml-auto",children:!i&&l.jsx(YEe,{entry:c,btnText:o(n?{defaultMessage:"Generating...",id:"A/lLjOnjl0"}:{defaultMessage:"Generate Image",id:"DjAvWI2RyU"}),userCreateLimit:s,isDisabled:!1,onGenerateClick:u,buttonComponent:d})})});FMe.displayName="GenerateImageAccessory";const UMe=f.memo(({idx:e,result:t,sbsEntriesGroup:n,isLastResult:r,isFirstResult:s,lastResultBuffer:a})=>{const{inFlight:o}=zt(),{scrollToListItem:i}=jM(),{submitQuery:c,shouldShowProductFeedback:u,feedbackEntryUUID:d,shouldShowRecruitmentBanner:m,deleteLastResult:h,setQuote:p}=Ta(),g=f.useCallback(async y=>{o||c(y)},[c,o]);return l.jsx(r2e,{idx:e,result:t,inFlight:o,isLastResult:r,isFirstResult:s,scrollToListItem:i,submitQuery:g,children:l.jsx(UEe,{scrollToListItem:i,children:l.jsx(qbe,{children:l.jsx(OMe,{isLastResult:r,isFirstResult:s,sbsEntriesGroup:n,shouldShowProductFeedback:u,feedbackEntryUUID:d??"",shouldShowRecruitmentBanner:m,deleteLastResult:h,setQuote:p,submitQuery:g,scrollToListItem:i,lastResultBuffer:a,idx:e})})})})});UMe.displayName="ThreadEntry";const BMe=A.memo(({children:e,forceVisible:t=!1,unmeasuredHeight:n,rootMargin:r,threshold:s,root:a,ref:o})=>{const[i,c]=f.useState(0),[u,d]=f.useState(t),[m,h]=f.useTransition(),p=f.useRef(null),g=f.useRef(null);f.useEffect(()=>{if(!p.current||!g.current||t)return;const v=new ResizeObserver(b=>{const _=b[0].contentRect.height;c(w=>_||w)}),x=new IntersectionObserver(b=>{b.forEach(_=>{h(()=>d(_.isIntersecting))})},{rootMargin:r,threshold:s,root:a});return v.observe(p.current),x.observe(g.current),()=>{v.disconnect(),x.disconnect()}},[t,n,r,s,a]);const y=f.useCallback(v=>{p.current=v,o instanceof Function?o(v):o&&(o.current=v)},[o]);return l.jsx("div",{style:t?void 0:{minHeight:`${i||n}px`},ref:g,children:l.jsx("div",{ref:y,children:t||u?e:null})})});BMe.displayName="LazyContainer";const BLt=()=>{const e=f.useRef(!1),{results:t,lastResult:n}=zt(),r=ms(),s=Je(),{openVisitorLoginUpsell:a}=$n({enabled:!s}),o=FC(n?.upsell_information);f.useEffect(()=>{e.current||r&&t.length>=1&&n&&n.upsell_information?.app_location===Vc.MODAL&&(o(),e.current=!0)},[r,s,a,t.length,n,o])},VLt=()=>{const e=Je(),{isMobileUserAgent:t}=Ce(),{firstResult:{author_username:n}={}}=zt(),{openInstallUpsell:r}=Ame(),{shareGateImpressions:s,actions:a}=hn(),o=f.useRef(!1),i=Ht(),c=i?.get("installGate"),u=i?.get("q");f.useEffect(()=>{o.current||e||t&&(!n&&!u||eh()||qj()||Kj()||c==="true"&&(s>=CO||(r({origin:Be.SHARED_THREAD_INSTALL_GATE,sheetModalVariant:"inset-centered-sheet"}),a.setShareGateImpressions(s+1),o.current=!0)))},[a,n,t,u,c,e,r,s])},$Lt=()=>{const{isMetaBrowser:e,isIOS:t,isAndroid:n}=Wt();return f.useCallback(()=>{if(!e||typeof window>"u")return;const s=window.location.href;let a;t?a=s.replace(/^https?:\/\//,"x-safari-https://"):n&&(a=`intent://${s.replace(/^https?:\/\//,"")}#Intent;scheme=https;package=com.android.chrome;end`),a&&bu(a,"Redirecting to native browser")},[e,t,n])},WLt=(e,t)=>e?"full-sheet-blurred":t==="delayed"?"bottom-sheet-gradient":"centered-sheet",HLt=()=>{const{$t:e}=X(),t=Je(),{isMobileUserAgent:n}=Ce(),{firstResult:{author_username:r}={}}=zt(),{openVisitorLoginUpsell:s}=$n({enabled:!0}),{shareGateImpressions:a,actions:o}=hn(),i=f.useRef(!1),c=Ht(),{scrollContainerRef:u}=Sc(),[d,m]=f.useState(!1),h=$Lt(),p=c?.get("visitorGate"),g=c?.get("q");f.useEffect(()=>{const y=u.current;if(y)return y.addEventListener("scroll",()=>{m(iI(y))}),()=>{y.removeEventListener("scroll",()=>{m(iI(y))})}},[u]),f.useEffect(()=>{i.current||t||!r&&!g||qj()||Kj()||a>=CO||p==="false"||p==="delayed"&&!d||!p&&!(!n&&!g)||(h(),s({origin:Be.SHARED_THREAD_LOGIN_GATE,description:"",title:e({defaultMessage:"Instant answers at your fingertips",id:"NFjQpck2Ql"}),sheetModalVariant:WLt(n,p),overrideMobileVariant:!0}),o.setShareGateImpressions(a+1),i.current=!0)},[n,t,s,e,a,o,d,p,c,r,h,g])};function zLt({entropyBrowser:e,isSidecar:t,scrollContainerRef:n}){const r=Pt(),s=f.useCallback(a=>{n.current&&n.current.scrollTo({top:n.current.scrollHeight,behavior:a})},[n]);f.useEffect(()=>{if(!(!e||!t))return e.subscribeQuickActionButtonFired(()=>{s("smooth")})},[e,t,s]),f.useEffect(()=>{t&&setTimeout(s,0,"instant")},[r,t,s])}var GLt={};const qLt=({reason:e})=>{const{DEFAULT_SOURCES:t}=GC({reason:e}),{setSources:n,setIsCopilot:r,gpt4Limit:s}=Sn(),a=ms(),{trackEvent:o}=Te(),{lossAversionStatus:i,setLossAversionStatus:c,unsetLossAversion:u}=Q9(),d=Je(),{results:m,lastResult:h,firstResult:{author_id:p,author_username:g,context_uuid:y,query_source:v,sources:{sources:x}={}}={}}=zt(),b=vo(),_=Ht(),w=f.useRef(!1),{pinnedEntryIdx:S,setViewTitle:C}=LM(),{formatMessage:E}=X(),{openVisitorLoginUpsell:M}=$n({enabled:!d}),{scrollContainerRef:T}=Sc(),I=hr();return HLt(),VLt(),BLt(),zLt({scrollContainerRef:T,isSidecar:!!GLt.NEXT_PUBLIC_IS_SIDECAR_BUILD,entropyBrowser:I}),f.useEffect(()=>{const j=an.isSourceListType(x)?x:[...t];n(j);const N=m.some(P=>an.isCopilotMode(P))&&!!s&&s>0;r(N)},[]),f.useEffect(()=>{if(!w.current&&a&&m.length>=1&&h&&an.isStatusCompleted(h)&&p&&g){const j=_?.get("utm_source")??void 0;o("thread viewed",{authorId:p,authorUsername:g,isThreadCreator:!!b,contextUUID:y,viewSource:j}),y&&zGe({contextUUID:y,reason:e}),v==="perplexity_tasks"&&o("task thread viewed",{contextUUID:y}),w.current=!0}},[o,a,p,g,y,h,m.length,_,b,d,M,E,e,v]),f.useEffect(()=>{i!=="cooldown"&&(!d&&!i&&b?c("allowed"):b||u())},[d,i,b,c,u]),f.useEffect(()=>{C(S===-1?null:GE(m[S]?.query_str)??"")},[S,C,m]),OC(()=>{i==="allowed"&&u()}),null},Nne=1e3,KLt=1,VMe=A.memo(e=>{const t="thread",{openToast:n}=On(),{results:r}=zt(),{setQuote:s}=Ta(),{scrollContainerRef:a}=Sc(),{refs:o}=jM(),i=Pt(),[c,u]=f.useState(!1),d=X();qLt({reason:t});const m=f.useMemo(()=>Fpe(r?.length?r:e.placeholderResults||[]),[r,e.placeholderResults]);f.useEffect(()=>{m.length===0&&ee.error("No thread results found")},[m.length]),f.useEffect(()=>{m.some(x=>x[0]?.has_expired_attachments)&&n(d.formatMessage({id:"zR3dvwKUWo",defaultMessage:"Some files have expired. Please reupload files to continue."}),"error",3)},[m,n,d]);const h=f.useMemo(()=>{if(typeof window>"u")return-1;const v=window.location.hash.slice(1);return v?Number.isNaN(Number(v))?m?.findIndex(x=>x[0]?.backend_uuid===v):Number(v):-1},[m]),p=f.useCallback((v,x)=>{x&&(o[v]={current:x})},[o]),g=f.useCallback((v,x)=>v<Math.floor(lP/2)||v>=x-Math.floor(lP/2)||!c&&v<=h,[h,c]);f.useEffect(()=>{if(~h){const v=setTimeout(()=>{u(!0)},1e4);return()=>{clearTimeout(v)}}},[h]),f.useEffect(()=>{const v=a.current;return v&&(v.scrollTop=0),()=>{u(!1)}},[i,a]),f.useEffect(()=>()=>{s(null)},[]);const y=f.useMemo(()=>m.map((v,x)=>{const b=v[0],_=x===0,w=x===m.length-1;return l.jsx(YLt,{result:b,resultsGroup:v.length>1?v:ce,isLastResult:w,isFirstResult:_,lastResultBuffer:w?e.lastResultBuffer:void 0,forceVisible:g(x,m.length),idx:x,scrollContainerRef:a,setRef:p},b.uuid||b.backend_uuid)}),[m,e.lastResultBuffer,g,a,p]);return l.jsx("div",{children:y})});VMe.displayName="Thread";const YLt=A.memo(({result:e,resultsGroup:t,isLastResult:n,isFirstResult:r,forceVisible:s,idx:a,scrollContainerRef:o,lastResultBuffer:i,setRef:c})=>{const u=e.attachments?.length>0,d=f.useMemo(()=>()=>l.jsx(UM,{className:B({"pb-threadInputHeightWithPadding":n&&!u,"pb-threadAttachmentsHeightWithPadding":n&&u})}),[u,n]),m=f.useCallback(h=>c(a,h),[a,c]);return l.jsx(Zs,{fallback:d,code:"SOMETHING_WENT_WRONG_ERROR",children:l.jsx(BMe,{forceVisible:s,unmeasuredHeight:Nne,rootMargin:`${Nne*KLt}px 0px`,threshold:0,root:o.current,ref:m,children:l.jsx(UMe,{idx:a,result:e,sbsEntriesGroup:t,isLastResult:n,isFirstResult:r,lastResultBuffer:i})})},e.uuid||e.backend_uuid)}),$Me=A.memo(()=>{const{$t:e}=X(),{firstResult:{parent_info:t}={}}=zt();if(!t?.mode||!t?.url_slug)return null;const n=t?.mode===Pm.ARTICLE?"page":"search",r=!!t?.preview_image_url;return l.jsx(at,{href:`/${n}/${t?.url_slug}`,children:l.jsxs(z,{variant:"background",bgHover:"offset",className:"p-md shadow-subtle mb-sm relative mx-auto mt-[calc(var(--header-height)+var(--size-md))] flex justify-between rounded-lg border pb-[12px]",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs(D,{color:"light",variant:"tiny",className:"mb-xs gap-x-xs flex items-center",children:[l.jsx(be,{icon:pS,size:"xs"}),l.jsx("div",{children:e({defaultMessage:"Follow up to",id:"D3eCB2NeGQ"})})]}),l.jsx(D,{variant:"baseSemi",color:"light",className:"line-clamp-1 break-all",children:t?.title})]}),r&&l.jsx("div",{className:"ml-md shrink-0",children:l.jsx(es,{src:t?.preview_image_url,alt:t?.title||"Preview",imageClassName:"h-16 w-16 rounded object-cover",rounded:"sm",fadeIn:!1})})]})})});$Me.displayName="ParentThreadLink";const B_=f.memo(({cardKey:e,icon:t,onToggle:n,isCollapsed:r,title:s,subtitle:a,children:o})=>{const[i,c]=f.useState(!1),u=f.useCallback(()=>{n(e)},[n,e]),d=f.useCallback(h=>{(h.key==="Enter"||h.key===" ")&&(h.preventDefault(),u())},[u]),m=f.useCallback(h=>{h.stopPropagation()},[]);return l.jsx(_c,{className:B({"overflow-hidden":i}),transition:{duration:.3,ease:Jn},onAnimationStart:()=>c(!0),onAnimationComplete:()=>c(!1),children:l.jsxs("div",{className:"bg-offset border-subtlest transform rounded-xl border transition-transform duration-200 focus-visible:ring-2",role:"button",tabIndex:0,onKeyDown:d,children:[l.jsxs("div",{className:B("p-md gap-md flex grow cursor-pointer flex-row",{"border-subtler border-b":!r(e)}),onClick:u,"data-testid":"automation-card-header",children:[l.jsx("div",{className:"text-quiet flex items-center justify-center",children:l.jsx("div",{className:"bg-offsetPlus flex size-8 items-center justify-center rounded-lg",children:l.jsx(be,{icon:t,size:"base"})})}),l.jsxs("div",{className:B("flex min-w-0 grow flex-col",r(e)?"justify-between":"flex justify-center"),children:[l.jsx(D,{variant:"tinyMono",color:"light",className:"uppercase",children:s}),r(e)&&l.jsx(D,{variant:"small",className:"truncate",style:{lineHeight:"14px"},children:a})]}),l.jsx(D,{color:"light",className:"flex items-center justify-center",children:l.jsx("div",{className:B("transition-transform duration-300 ease-in-out",r(e)?"rotate-0":"rotate-180"),children:l.jsx(be,{icon:Zr,size:"lg"})})})]}),!r(e)&&l.jsx(tl,{children:l.jsx("div",{className:"p-md cursor-default",onKeyDown:m,children:o})},"body")]})})});B_.displayName="AutomationCard";const QLt=({options:e,selectedValues:t,onSelectionChange:n,placeholder:r="Select options...",disabled:s=!1})=>{const a=X(),{isMobileStyle:o}=Ce(),[i,c]=f.useState(!1),u=f.useCallback(v=>{const b=t.includes(v)?t.filter(_=>_!==v):[...t,v];n(b)},[t,n]),d=f.useMemo(()=>e.map(v=>{const x=t.includes(v.value);return{type:"multiSelect",text:v.label,onClick:()=>{u(v.value)},selected:x,iconVariant:"check",disableActiveStyles:!0}}),[e,t,u]),m=f.useMemo(()=>{if(t.length===0)return r;const v=t.map(x=>e.find(b=>b.value===x)?.label).filter(Boolean);return new Intl.ListFormat(a.locale,{style:"long",type:"conjunction"}).format(v)},[t,e,r,a.locale]),h=f.useCallback(()=>c(!0),[]),p=f.useCallback(()=>c(!1),[]),g=f.useMemo(()=>({className:"w-[180px]"}),[]),y=f.useMemo(()=>({matchTargetWidth:!1,avoidPositionCollisions:!1}),[]);return l.jsx(en,{isOpen:i,onOpen:h,onClose:p,items:d,isMobileStyle:o,placement:"bottom-end",contentClassName:"w-full",boxProps:g,popoverProps:y,disabled:s,alwaysShowChildren:!0,children:l.jsx(ye,{text:m,extraCSS:B("pl-4 pr-4 w-full !h-10 border-0 !outline-none !justify-start font-normal"),textClassName:"text-left text-foreground text-sm font-normal truncate",fullWidth:!0,layout:"split",chevron:!0,chevronIcon:Zr,disabled:s})})},XLt=f.memo(({notificationSettings:e,onNotificationSettingsChange:t})=>{const{$t:n}=Qre(),{variation:r,loading:s}=rCe(!1),a=f.useMemo(()=>{const c=[];return r&&!s&&c.push({value:"in_app",label:n({defaultMessage:"In-app",id:"E7zWOQXV+k"})}),c.push({value:"email",label:n({defaultMessage:"Email",id:"sy+pv5U9ls"})},{value:"push",label:n({defaultMessage:"Mobile",id:"GWtmtuCmOx"})}),c},[n,r,s]),o=f.useMemo(()=>{const c=[];return r&&!s&&e.should_send_in_app&&c.push("in_app"),e.should_send_email&&c.push("email"),e.should_send_push&&c.push("push"),c},[e,r,s]),i=f.useCallback(c=>{t({should_send_email:c.includes("email"),should_send_push:c.includes("push"),should_send_in_app:c.includes("in_app")})},[t]);return l.jsxs("div",{className:"flex flex-col gap-4",children:[l.jsx(D,{variant:"tiny",color:"light",className:"select-none",children:l.jsx(he,{defaultMessage:"Platform",id:"Mmuj1Rb6ck"})}),l.jsx(QLt,{options:a,selectedValues:o,onSelectionChange:i,placeholder:n({defaultMessage:"Select platform",id:"Gl5w1+hLYC"})})]})}),WMe=f.memo(({trigger:e,query:t,onQueryChange:n})=>{const{$t:r}=X(),s=f.useCallback(c=>{n({...t,prompt:c})},[n,t]),a=f.useCallback(c=>{n({...t,searchModel:c})},[n,t]),o=f.useCallback(c=>{n({...t,sources:c})},[n,t]),i=f.useMemo(()=>{switch(e.type){case lt.SCHEDULED:case lt.SHORTCUT:return l.jsx(dU,{searchModel:t.searchModel,onSearchModelChange:a,sources:t.sources??cC(),onSourcesChange:o,variant:"offsetPlus"});case lt.PRICE_ALERT:return null;default:Qt(e)}},[a,o,t.searchModel,t.sources,e]);return l.jsxs("div",{className:"flex flex-col gap-4",children:[l.jsx(eU,{trigger:e,prompt:t.prompt,placeholder:r({defaultMessage:"Describe what you want to automate",id:"79ZUaZU8Ho"}),onPromptChange:s,variant:"offsetPlus"}),i]})});WMe.displayName="AutomationQueryConfiguration";const ZLt=async({query:e,locale:t,reason:n})=>{try{const{data:r,error:s}=await ne.GET("/rest/autosuggest/finance/tasks-autosuggest",n,{params:{query:{query:e}},headers:{"accept-language":t}});if(s)throw new Me("API_CLIENTS_ERROR",{message:"Failed to get finance tasks suggestions",cause:s});return"results"in r?r.results:[]}catch(r){return ee.error(r),[]}},HMe="[&_textarea]:placeholder:!text-quietest placeholder:!text-quietest hover:!border-subtler focus-within:!border-subtler !border !border-transparent",JLt=e=>/^(\d+(\.\d{0,2})?|\.\d{1,2})$/.test(e),e9t=e=>/^(\d+(\.\d{0,1})?|\.\d{0,1})$/.test(e),zMe=(e,t)=>{try{return new Intl.NumberFormat(t,{style:"currency",currency:e.toUpperCase(),currencyDisplay:"symbol"}).format(0).replace(/[0-9.,\s]/g,"").trim()||"$"}catch{return"$"}},t9t=({currentPrice:e,value:t,onChange:n,variant:r="default",currency:s="USD"})=>{const{isMobileUserAgent:a}=Ce(),{locale:o,$t:i}=X(),c=f.useMemo(()=>zMe(s,o),[s,o]),u=f.useMemo(()=>e?.toLocaleString(o,{style:"currency",currency:s.toUpperCase()}),[e,o,s]),d=f.useCallback(y=>{n(v=>{if(y===c)return y;const x=y.replace(c,"");return JLt(x)||y===""?c+x:v})},[n,c]),m=f.useCallback(()=>{t===""&&n(c)},[n,t,c]),h=f.useCallback(()=>{t===c&&n("")},[n,t,c]),p=(()=>{switch(r){case"default":return"bg-offset [&_textarea]:bg-offset";case"offsetPlus":return"bg-offsetPlus [&_textarea]:bg-offsetPlus";default:Qt(r)}})(),g=B(HMe,p);return l.jsxs("div",{className:"gap-sm flex flex-col items-start",children:[l.jsx(D,{variant:"smallBold",color:"light",children:u?i({id:"74LVOPcS2E",defaultMessage:"Target Price (currently {formattedPrice})"},{formattedPrice:u}):i({id:"xPMPP84OOV",defaultMessage:"Target Price"})}),l.jsx("div",{className:"gap-sm flex items-stretch",children:l.jsx(xo,{placeholder:c,className:B(g,"p-sm !rounded-md"),variant:"monospace",isMobileUserAgent:a,value:t,onChange:d,onFocus:m,onBlur:h,disable1pass:!0,colorVariant:r})})]})},n9t=({value:e,onChange:t,positiveSelected:n,onPositiveChange:r,negativeSelected:s,onNegativeChange:a,variant:o="default"})=>{const{isMobileUserAgent:i}=Ce(),{$t:c}=X(),u=f.useCallback(()=>{a(!s)},[s,a]),d=f.useCallback(()=>{r(!n)},[r,n]),m=f.useCallback(y=>{t(v=>e9t(y)||y===""?y:v)},[t]),h=f.useMemo(()=>({delayDuration:100}),[]),p=(()=>{switch(o){case"default":return"bg-offset [&_textarea]:bg-offset";case"offsetPlus":return"bg-offsetPlus [&_textarea]:bg-offsetPlus";default:Qt(o)}})(),g=B(HMe,p);return l.jsx("div",{className:"gap-md flex flex-col",children:l.jsxs("div",{className:"gap-sm flex flex-col items-start",children:[l.jsx(D,{variant:"smallBold",color:"light",children:c({id:"agMnIX4PMS",defaultMessage:"Movement Amount (%)"})}),l.jsxs("div",{className:"gap-md flex h-full items-center",children:[l.jsxs("div",{className:"gap-sm flex h-full items-center",children:[l.jsx(ye,{variant:s?"primaryGhost":"border",size:"small",onClick:u,pill:!0,icon:u8,toolTip:c({id:"M9L9vXrgoN",defaultMessage:"Negative Movement"}),tooltipProps:h}),l.jsx(ye,{variant:n?"primaryGhost":"border",size:"small",onClick:d,pill:!0,icon:mr,toolTip:c({id:"iFYP+IX00i",defaultMessage:"Positive Movement"}),tooltipProps:h})]}),l.jsx(xo,{placeholder:"0",className:B(g,"p-sm !rounded-md"),variant:"monospace",isMobileUserAgent:i,value:e,onChange:m,disable1pass:!0,colorVariant:o})]})]})})},GMe=A.memo(e=>{const{selectedSymbol:t,selectedOption:n,onSymbolChange:r,onOptionChange:s,showSymbolInput:a=!0,currentPrice:o,priceValue:i,onPriceValueChange:c,percentValue:u,onPercentValueChange:d,positiveSelected:m,onPositiveChange:h,negativeSelected:p,onNegativeChange:g,baseSymbol:y,externalInputValue:v,variant:x,colorVariant:b="default",currency:_}=e,w=()=>{switch(x){case"full":return{additionalInstructions:e.additionalInstructions,onAdditionalInstructionsChange:e.onAdditionalInstructionsChange,displayPriceInstructions:e.displayPriceInstructions,displayMovementInstructions:e.displayMovementInstructions};case"trigger":return{additionalInstructions:"",onAdditionalInstructionsChange:()=>{},displayPriceInstructions:void 0,displayMovementInstructions:void 0};default:return Qt(x)}},{additionalInstructions:S,onAdditionalInstructionsChange:C,displayPriceInstructions:E,displayMovementInstructions:M}=w(),{isMobileUserAgent:T}=Ce(),{$t:I,locale:j}=X(),[N,P]=f.useState(!1),[R,k]=f.useState(0),[O,L]=f.useState(""),[F,U]=f.useState([]),V=f.useRef(null),W=gt(),H=f.useRef(O);H.current=O,f.useEffect(()=>{L(v??"")},[v]),f.useEffect(()=>{if(_&&i){const de=zMe(_.toUpperCase(),j);if(/^\d+(\.\d+)?$/.test(i)){c(de+i);return}const Ae=i.replace(/[^0-9.]/g,"");i.replace(/[0-9.]/g,"").trim()!==de&&Ae&&c(de+Ae)}},[_,j,i,c]);const G=f.useMemo(()=>[{label:I({id:"xPMPP84OOV",defaultMessage:"Target Price"}),value:"price"},{label:I({id:"24152tl1L3",defaultMessage:"Movement Amount"}),value:"movement"}].map(ve=>({label:ve.label,value:ve.value,children:l.jsx("div",{className:"w-full flex-1",children:l.jsx(xF,{label:ve.label,isActiveOption:n===ve.value})})})),[n,I]),K=f.useCallback(async de=>{const Ae=(await W.fetchQuery({queryKey:["finance-tasks-autosuggest",de],queryFn:()=>ZLt({query:de,reason:"finance-add-alert"}),staleTime:0})).map(Se=>({query:Se.title??"",title:Se.title??"",image:Se.image??"",imageDark:Se.image_dark??"",description:Se.description??"",identifier:Se.title??""}));U(Ae)},[W]),$=ks(K,100,{leading:!0,trailing:!0}),q=f.useCallback(de=>{$(de)},[$]),Z=f.useCallback(()=>{P(!0),q(H.current)},[q]),se=f.useCallback(()=>{P(!1)},[]),Y=f.useCallback(de=>{const ve=de;L(ve),q(ve)},[q]),Q=f.useCallback(de=>{r(de.identifier??null),L(de.title??"")},[r,L]),re=f.useCallback(de=>{s(de)},[s]),te=f.useCallback(de=>{C?.(de)},[C]),le=B("h-10 rounded-md dark:border-0 dark:border-transparent dark:bg-offsetPlus p-4 dark:[&:focus]:ring-0",{"rounded-t-md rounded-b-none":N&&F.length>0}),ie=f.useMemo(()=>({image:de,imageDark:ve,alt:Ae})=>l.jsx(tme,{image:de,imageDark:ve,alt:Ae,watchlistType:"FINANCE",className:"bg-offset mr-sm !size-8 rounded",imageClassName:"inset-xs"}),[]),pe=({onClear:de})=>l.jsx(ke,{icon:Xt,size:"tiny",pill:!0,onClick:de}),me=f.useMemo(()=>({RightIconComponent:()=>null,LeftIconComponent:ie}),[ie]);return l.jsxs("div",{className:"gap-md flex flex-col",children:[a&&l.jsx("div",{children:l.jsx(Tp,{isOpen:N&&F.length>0,suggestedQueries:F,focusedIndex:R,setFocusedIndex:k,handlePasteQuery:Rn,handleSubmit:Q,value:O,components:me,dropdownClassName:"dark:border-none dark:ml-0 dark:mr-0 dark:w-full",dropdownType:"select",popoverClassName:"dark:!border-none",children:l.jsx(xo,{onFocus:Z,onBlur:se,className:le,pill:!1,ref:V,isMobileUserAgent:T,placeholder:"Find a stock, token, or fund...",value:O,onChange:Y,ClearIcon:pe,colorVariant:b})})}),l.jsx(D,{variant:"small",children:t??y?I({id:"Hy+cGS5mO4",defaultMessage:"Alert me and run a query when the price of {symbol} meets the following criteria:"},{symbol:l.jsx("span",{className:"font-medium",children:t??y})}):I({id:"8UOt+XLf0o",defaultMessage:"Alert me and run a query when the price meets the following criteria:"})}),l.jsx(_e.div,{layout:!0,layoutRoot:!0,children:l.jsx(vF,{layoutKey:"task",options:G,value:n,onValueChange:re,className:"inline-flex",variant:b})}),l.jsxs("div",{className:"gap-md flex flex-col",children:[n==="price"&&l.jsx(t9t,{currentPrice:o,value:i,onChange:c,variant:b,currency:_}),n==="movement"&&l.jsx(n9t,{value:u,onChange:d,positiveSelected:m,onPositiveChange:h,negativeSelected:p,onNegativeChange:g,variant:b})]}),x==="full"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"gap-sm flex w-full flex-col items-start",children:[l.jsx("div",{className:"gap-xs flex w-full items-center",children:l.jsx(D,{variant:"smallBold",color:"light",className:"flex shrink-0 items-center",children:I({id:"qax5d8pQCh",defaultMessage:"Default Query"})})}),l.jsx("div",{className:"w-full [&>*]:w-full",children:l.jsx(D,{variant:"small",color:"light",className:"pl-sm border-subtlest border-l-2",children:n==="price"?E:M})})]}),l.jsxs("div",{className:"gap-sm flex w-full flex-col items-start",children:[l.jsx("div",{className:"gap-xs flex w-full items-center",children:l.jsx(D,{variant:"smallBold",color:"light",className:"flex shrink-0 items-center",children:I({id:"QFuOkrgHHJ",defaultMessage:"Additional Instructions (optional)"})})}),l.jsx("div",{className:"w-full [&>*]:w-full",children:l.jsx(el,{value:S,onChange:te,isMobileUserAgent:T,isMobileStyle:!1,minRows:3,placeholder:I({id:"DtwY5RHKrT",defaultMessage:"Check news and social media sentiment to assess consensus or controversy"})})})]})]})]})});GMe.displayName="FinanceAlertForm";const qMe=f.memo(({trigger:e,onTriggerChange:t,isEditing:n})=>{const{formState:r,onSymbolChange:s,onOptionChange:a,onPriceValueChange:o,onPercentValueChange:i,onPositiveChange:c,onNegativeChange:u}=r5t({trigger:e,onTriggerChange:t}),{data:d}=ng({symbol:r.selectedSymbol});return l.jsx("div",{children:l.jsx(GMe,{variant:"trigger",externalInputValue:r.selectedSymbol??void 0,selectedSymbol:r.selectedSymbol,selectedOption:r.selectedOption,onSymbolChange:s,onOptionChange:a,showSymbolInput:!n,currentPrice:d?.price,priceValue:r.priceValue,onPriceValueChange:o,percentValue:r.percentValue,onPercentValueChange:i,positiveSelected:r.positiveSelected,onPositiveChange:c,negativeSelected:r.negativeSelected,onNegativeChange:u,colorVariant:"offsetPlus",currency:d?.currency??void 0})})});qMe.displayName="PriceAlertTriggerConfiguration";const KMe=f.memo(({expiryDate:e,onExpiryDateChange:t,schedule:n})=>{const r=f.useCallback(o=>{o.stopPropagation(),t(null)},[t]),s=f.useMemo(()=>l.jsx(ye,{type:"button",onClick:r,icon:Xt,size:"tiny",variant:"common"}),[r]),a=f.useMemo(()=>{if(e===null)return;const o=n?kL(n):void 0;return o?cs(o,1):void 0},[e,n]);return l.jsx(xSe,{value:e===null?void 0:e,onChange:t,buttonClassName:"w-full py-sm bg-offsetPlus",trailingIcon:s,fromDate:a})});KMe.displayName="AutomationExpiryDatePicker";const YMe=f.memo(({defaultExpiryDate:e,expiryDate:t,onExpiryDateChange:n,schedule:r})=>{const{$t:s}=X(),[a,o]=f.useState(!1),i=f.useCallback(()=>{o(u=>!u)},[]),c=f.useCallback(u=>{n?.(u)},[n]);return l.jsxs("div",{className:"gap-md flex flex-col",children:[l.jsx("div",{className:"-ml-sm",children:l.jsx(ke,{type:"button",onClick:i,text:s({defaultMessage:"Optional",id:"InWqysQtIQ"}),chevron:!0,chevronIcon:a?gS:Zr,size:"tiny"})}),a&&l.jsxs("div",{className:"gap-sm flex flex-col",children:[l.jsx(D,{variant:"tiny",color:"light",className:"select-none",children:l.jsx(he,{defaultMessage:"Expiration date",id:"CICBj0Td+l"})}),l.jsx(KMe,{expiryDate:t||e,onExpiryDateChange:c,schedule:r})]})]})});YMe.displayName="ExpiryDateSection";const Ane=f.memo(({trigger:e,onTriggerChange:t})=>{const n=f.useMemo(()=>e?.schedule??NL(),[e?.schedule]),r=f.useCallback(a=>{t({type:lt.SCHEDULED,...e,schedule:{...n,...a}})},[t,n,e]),s=f.useCallback(a=>{t({type:lt.SCHEDULED,schedule:n,expiryDate:a})},[t,n]);return l.jsxs(z,{className:"gap-md flex flex-col",children:[l.jsx(uU,{schedule:n,onScheduleChange:r,variant:"offsetPlus"}),l.jsx(YMe,{defaultExpiryDate:e?.defaultExpiryDate,expiryDate:e?.expiryDate,onExpiryDateChange:s,schedule:n})]})}),r9t=f.memo(({})=>l.jsx("div",{children:"Shortcut Trigger Configuration"})),QMe=f.memo(({trigger:e,onTriggerChange:t,isEditing:n})=>{if(!e)return l.jsx(Ane,{trigger:null,onTriggerChange:t});switch(e.type){case lt.SCHEDULED:return l.jsx(Ane,{trigger:e,onTriggerChange:t});case lt.PRICE_ALERT:return l.jsx(qMe,{trigger:e,onTriggerChange:t,isEditing:n});case lt.SHORTCUT:return l.jsx(r9t,{trigger:e,onTriggerChange:t});default:Qt(e)}});QMe.displayName="AutomationTriggerConfiguration";const s9t=(e,t)=>{const{value:n,loading:r}=Ut({flag:"tasks-notification-settings-enabled",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return f.useMemo(()=>({variation:n,loading:r}),[n,r])},XMe=f.memo(({configuration:e,onConfigurationChange:t,errorMessage:n,onError:r,initialActiveCardKey:s})=>{const{$t:a}=X(),o=!!e.id,[i,c]=f.useState(s||null),u=f.useCallback(w=>i!==w,[i]),d=f.useCallback(w=>{switch(e.trigger.type){case lt.SCHEDULED:case lt.SHORTCUT:c(S=>S===w?null:w);break;case lt.PRICE_ALERT:{if(!e.trigger.symbol){r?.(a({defaultMessage:"Select a stock, token, or fund first.",id:"yhCjhiQnsA"}));return}c(S=>S===w?null:w);break}default:Qt(e.trigger)}},[a,e.trigger,r]),m=f.useCallback(w=>{let S=e.query;switch(w.type){case lt.PRICE_ALERT:{S={...e.query,prompt:e.query.prompt};break}case lt.SCHEDULED:case lt.SHORTCUT:break;default:Qt(w)}const C={...e,trigger:w,query:S};r?.(null),t(C)},[e,t,r]),h=f.useCallback(w=>{const S={...e,query:w};t(S)},[e,t]),p=f.useCallback(w=>{const S={...e,notificationSettings:w};t(S)},[e,t]),g=o9t({config:e}),y=l9t({config:e}),v=c9t({config:e}),x=u9t({config:e}),{variation:b,loading:_}=s9t(!1);return l.jsxs("div",{className:"gap-md flex flex-col",children:[l.jsx(B_,{cardKey:"trigger",icon:lu,isCollapsed:u,onToggle:d,title:g,subtitle:y,children:l.jsx(QMe,{trigger:e.trigger,onTriggerChange:m,isEditing:o})}),l.jsx(B_,{cardKey:"action",icon:fo,isCollapsed:u,onToggle:d,title:a({defaultMessage:"Run a query",id:"ICdFJO2wBG"}),subtitle:v,children:l.jsx(WMe,{trigger:e.trigger,query:e.query,onQueryChange:h})}),!_&&b&&l.jsx(B_,{cardKey:"notification",icon:Tu,isCollapsed:u,onToggle:d,title:a({defaultMessage:"Get a notification",id:"dYl+bP4X+f"}),subtitle:x,children:l.jsx(XLt,{notificationSettings:e.notificationSettings??yp,onNotificationSettingsChange:p})}),n&&l.jsxs("div",{className:"gap-xs flex items-center",children:[l.jsx(yS,{size:12,className:"text-caution"}),l.jsx(D,{variant:"tinyRegular",color:"red",className:"mt-0.5",children:n})]})]})});XMe.displayName="AutomationConfiguration";function a9t({trigger:e,intl:t,currency:n="USD"}){const{$t:r}=t,{symbol:s}=e,a=r({defaultMessage:"None selected",id:"7MYtB45RD0"});if(!s||s.trim()==="")return a;switch(e.alertType){case _a.TARGET_PRICE:{const o=V2e(e.price,n,{roundToMajor:!0});return o?r({defaultMessage:"Hits {formattedPrice}",id:"h6Lb1j5n2i"},{formattedPrice:o}):a}case _a.MOVEMENT_AMOUNT:{const o=e.percentageDecimalLowerBound!==S0/100&&e.percentageDecimalLowerBound!==0,i=e.percentageDecimalUpperBound!==w0/100&&e.percentageDecimalUpperBound!==0,c=(Math.abs(e.percentageDecimalLowerBound)*100).toFixed(2),u=(e.percentageDecimalUpperBound*100).toFixed(2);return o&&i?r({defaultMessage:"Moves {lowerPercent}% below or {upperPercent}% above",id:"Pf0az3vLFP"},{lowerPercent:c,upperPercent:u}):i?r({defaultMessage:"Moves {upperPercent}% above",id:"bXoDTfvzQp"},{upperPercent:u}):o?r({defaultMessage:"Moves {lowerPercent}% below",id:"wVWQYyhNzY"},{lowerPercent:c}):a}default:Qt(e)}}function o9t({config:e}){const t=X();switch(e.trigger.type){case lt.SCHEDULED:return t.formatMessage({defaultMessage:"At a scheduled time",id:"iBeK54+l/K"});case lt.PRICE_ALERT:return i9t({trigger:e.trigger,intl:t});case lt.SHORTCUT:return t.formatMessage({defaultMessage:"When I ask the Comet assistant",id:"2g/ixIrnXk"});default:Qt(e.trigger)}}function i9t({trigger:e,intl:t}){const{symbol:n}=e;return!n||n.trim()===""?t.formatMessage({defaultMessage:"When price changes",id:"3+HsWpGCAe"}):t.formatMessage({defaultMessage:"When {symbol}'s price changes",id:"8bOZPQIqHh"},{symbol:n})}function l9t({config:e}){const t=X(),{data:n}=ng({symbol:e.trigger.type===lt.PRICE_ALERT?e.trigger.symbol:null,enabled:e.trigger.type===lt.PRICE_ALERT});return f.useMemo(()=>{switch(e.trigger.type){case lt.SCHEDULED:return ABe({schedule:e.trigger.schedule,expiryDate:e.trigger.expiryDate??e.trigger.defaultExpiryDate,intl:t});case lt.PRICE_ALERT:return a9t({trigger:e.trigger,intl:t,currency:n?.currency??void 0});case lt.SHORTCUT:return e.query.prompt;default:Qt(e.trigger)}},[e.trigger,e.query.prompt,t,n?.currency])}function c9t({config:e}){const{$t:t}=X();return f.useMemo(()=>{switch(e.trigger.type){case lt.PRICE_ALERT:{const n=Kwe({prompt:e.query.prompt,symbol:e.trigger.symbol});return!e.trigger.symbol||!n?t({defaultMessage:"None selected",id:"7MYtB45RD0"}):n}case lt.SCHEDULED:case lt.SHORTCUT:return e.query.prompt?e.query.prompt:t({defaultMessage:"Describe what you want to automate",id:"79ZUaZU8Ho"});default:Qt(e.trigger)}},[e.trigger,e.query.prompt,t])}function u9t({config:e}){const t=X();return f.useMemo(()=>{const n=[];return e.notificationSettings?.should_send_in_app&&n.push(t.formatMessage({defaultMessage:"In-app",id:"E7zWOQXV+k"})),e.notificationSettings?.should_send_email&&n.push(t.formatMessage({defaultMessage:"Email",id:"sy+pv5U9ls"})),e.notificationSettings?.should_send_push&&n.push(t.formatMessage({defaultMessage:"Push",id:"GN9UDBHUkA"})),n.length===0?t.formatMessage({defaultMessage:"None selected",id:"7MYtB45RD0"}):new Intl.ListFormat(t.locale,{style:"long",type:"conjunction"}).format(n)},[e.notificationSettings,t])}function d9t(e,t,n){return{prompt:t.prompt,model_preference:t.searchModel,sources:t.sources,schedule:Ry(e.schedule),task_name:"",expiry_date:Bce(e.expiryDate??e.defaultExpiryDate),notification_settings:n}}function f9t(e,t){return{prompt:t.prompt,model_preference:t.searchModel,sources:t.sources,task_name:e.shortcut,schedule:{rrule:"",start_at:"",tzid:""}}}function ZMe({trigger:e,query:t,quote:n}){const{symbol:r}=e,s=n?.name?` (${n.name})`:void 0;switch(e.alertType){case _a.TARGET_PRICE:{const a=n?.price||0,o=SM({symbol:r,quoteName:s}),i=Xee({prompt:t.prompt,baseInstructions:o}),c=e.price>a?"above":"below";return Zee({symbol:r,alertType:"price",priceValue:`$${e.price}`,priceThreshold:c,baseInstructions:o,additionalInstructions:i})}case _a.MOVEMENT_AMOUNT:{const a=CM({symbol:r,quoteName:s}),o=Xee({prompt:t.prompt,baseInstructions:a}),i=e.percentageDecimalUpperBound>0&&e.percentageDecimalUpperBound!==w0/100,c=e.percentageDecimalLowerBound<0&&e.percentageDecimalLowerBound!==S0/100;let u;return i?u=(e.percentageDecimalUpperBound*100).toFixed(2):c?u=(Math.abs(e.percentageDecimalLowerBound)*100).toFixed(2):u="0.00",Zee({symbol:r,alertType:"movement",percentValue:u,positiveSelected:i,negativeSelected:c,baseInstructions:a,additionalInstructions:o})}default:Qt(e)}}function m9t(e,t,n,r){return{prompt:t.prompt,model_preference:t.searchModel,sources:t.sources,status:n==="COMPLETED"?"PAUSED":n,schedule:Ry(e.schedule),expiry_date:Bce(e.expiryDate??e.defaultExpiryDate),clear_expiry:e.expiryDate===null?!0:void 0,notification_settings:r}}function h9t(e,t,n){return{prompt:t.prompt,model_preference:t.searchModel,sources:t.sources,status:n==="COMPLETED"?"PAUSED":n,task_name:e.shortcut}}function p9t({trigger:e,query:t,status:n,quote:r}){const s=ZMe({trigger:e,query:t,quote:r});return s?{task_name:s.task_name,prompt:s.prompt,event_subscription:s.event_subscription,model_preference:s.model_preference,status:n==="COMPLETED"?"PAUSED":n}:null}function g9t({onCreateSuccess:e,onCreateError:t,onUpdateSuccess:n,onUpdateError:r,onDeleteSuccess:s,onDeleteError:a}={}){const{$t:o}=X(),i=gt(),c=Mt({mutationFn:h=>Qlt({payload:h,reason:"finance-add-alert"}),onSuccess:()=>{i.invalidateQueries({queryKey:s_()}),e?.()},onError:h=>t?.(h)}),u=Mt({mutationFn:({taskId:h,payload:p})=>Xlt({taskId:h,payload:p,reason:"finance-edit-alert"}),onSuccess:()=>{i.invalidateQueries({queryKey:s_()}),n?.()},onError:h=>{if(h instanceof Error)switch(h.name){case"TimeoutError":r?.({detail:o({defaultMessage:"Network Timeout",id:"Z+mLGQc4GD"})});break;default:ee.error(`Unknown error occured: ${h.name}`),r?.({detail:o({defaultMessage:"Unknown error occurred",id:"y1q3uzCFY6"})})}else r?.(h)}}),d=Mt({mutationFn:h=>Xpe({taskId:h,reason:"finance-delete-alert"}),onSuccess:()=>{i.invalidateQueries({queryKey:s_()}),s?.()},onError:()=>a?.()}),m=c.isPending||u.isPending||d.isPending;return f.useMemo(()=>({createMutation:c,updateMutation:u,deleteMutation:d,isMutationLoading:m}),[c,u,d,m])}function y9t({initialConfiguration:e,isModalOpened:t,reason:n,source:r,onSuccess:s,onError:a}){const{$t:o}=X(),{hasActiveSubscription:i}=Nt(),[c,u]=f.useState(zce(e??AL(i))),d=(()=>{switch(c.trigger.type){case lt.PRICE_ALERT:return c.trigger.symbol;case lt.SCHEDULED:case lt.SHORTCUT:return null;default:Qt(c.trigger)}})(),{data:m,isLoading:h}=ng({symbol:d,enabled:!!d&&t}),p=wSe({reason:n,source:r,onSuccess:s,onError:a}),g=g9t({onCreateSuccess:()=>s("created"),onCreateError:C=>a(`Failed to create price alert - ${C.detail}`),onUpdateSuccess:()=>s("updated"),onUpdateError:C=>a(`Failed to update price alert - ${C.detail}`),onDeleteSuccess:()=>s("deleted"),onDeleteError:()=>a("Failed to delete price alert")}),y=h||p.isMutationLoading||g.isMutationLoading,v=f.useCallback(C=>{const E=C?{...c,...C}:c;if(E.id)switch(E.trigger.type){case lt.SCHEDULED:p.updateMutation.mutate({id:E.id,payload:m9t(E.trigger,E.query,E.status,E.notificationSettings)});break;case lt.PRICE_ALERT:{const M=p9t({trigger:E.trigger,query:E.query,status:E.status,quote:m});M?g.updateMutation.mutate({taskId:E.id,payload:M}):a(o({defaultMessage:"Failed to update price alert payload - Missing inputs",id:"293dgMfZdE"}));break}case lt.SHORTCUT:p.updateMutation.mutate({id:E.id,payload:h9t(E.trigger,E.query,E.status)});break;default:Qt(E.trigger)}else switch(E.trigger.type){case lt.SCHEDULED:p.createMutation.mutate(d9t(E.trigger,E.query,E.notificationSettings??yp));break;case lt.PRICE_ALERT:{const M=ZMe({trigger:E.trigger,query:E.query,quote:m});M?g.createMutation.mutate(M):a(o({defaultMessage:"Failed to create price alert payload - Missing inputs",id:"Fimh9vZMY/"}));break}case lt.SHORTCUT:p.createMutation.mutate(f9t(E.trigger,E.query));break;default:Qt(E.trigger)}},[c,p.updateMutation,p.createMutation,m,g.updateMutation,g.createMutation,a,o]),x=f.useCallback(()=>{v()},[v]),b=f.useCallback(C=>{if(!c.id)return;v({status:C?"ACTIVE":"PAUSED"})},[c.id,v]),_=f.useCallback(()=>{if(c.id)switch(c.trigger.type){case lt.SCHEDULED:p.deleteMutation.mutate(c.id);break;case lt.PRICE_ALERT:g.deleteMutation.mutate(c.id);break;case lt.SHORTCUT:p.deleteMutation.mutate(c.id);break;default:Qt(c.trigger)}},[c.id,c.trigger,g.deleteMutation,p.deleteMutation]),w=f.useMemo(()=>{if(y)return!0;switch(c.trigger.type){case lt.SCHEDULED:case lt.SHORTCUT:return!c.query.prompt;case lt.PRICE_ALERT:break;default:Qt(c.trigger)}return!1},[y,c.trigger,c.query.prompt]),S=c.status==="ACTIVE";return{currentConfiguration:c,setCurrentConfiguration:u,onClickSave:x,onClickToggle:b,onClickDelete:_,isEnabled:S,isLoading:y,isSaveDisabled:w}}const JMe=f.memo(({open:e,onClose:t,initialConfiguration:n,onSave:r,source:s,trackEvent:a,errorMessage:o,initialActiveCardKey:i})=>{const c=Qre(),{$t:u}=c,d="automation-modal",[m,h]=f.useState(!1),[p,g]=f.useState(null),y=f.useCallback(()=>{g(null),t()},[t]),v=f.useCallback(N=>{r?.(N),y(),h(N)},[r,y]),{currentConfiguration:x,setCurrentConfiguration:b,onClickSave:_,onClickDelete:w,isLoading:S,isSaveDisabled:C}=y9t({initialConfiguration:n,isModalOpened:e,reason:d,source:s,onSuccess:v,onError:g});f.useEffect(()=>{e&&(kj(s)?a?.("task modal opened",{source:s}):ite(s)?a?.("price alert modal opened",{source:s}):lte(s)&&a?.("shortcut modal opened",{source:s}))},[e,s,a]);const E=f.useMemo(()=>{const N=[];return x.id&&N.push({text:u({defaultMessage:"Delete",id:"K3r6DQW7h+"}),variant:"rejecter",onClick:w,disabled:S}),N.push({text:u({defaultMessage:"Cancel",id:"47FYwba+bI"}),variant:"common",onClick:y}),N.push({text:u({defaultMessage:"Save",id:"jvo0vs3nF0"}),variant:"primary",onClick:_,disabled:C}),N},[u,x.id,S,C,w,_,y]),M=f.useCallback(N=>{const P=N?"ACTIVE":"PAUSED",R=P==="PAUSED"?"paused":"resumed";switch(b({...x,status:P}),h(R),x.trigger.type){case lt.SCHEDULED:kj(s)&&_Se(R)&&a?.("task modal action",{source:s,action:R});break;case lt.PRICE_ALERT:ite(s)&&m6t(R)&&a?.("price alert modal action",{source:s,action:R});break;case lt.SHORTCUT:lte(s)&&p6t(R)&&a?.("shortcut modal action",{source:s,action:R});break;default:Qt(x.trigger)}},[x,b,s,a]),T=f.useMemo(()=>{if(!x.id)return null;const N=x.status!=="PAUSED";return l.jsx(Go,{active:N,text:N?"On":"Off",onChange:M,disabled:S,testId:"automation-status-switch"})},[x.id,x.status,M,S]),I=f.useCallback(N=>{const P=zce(N);b(P)},[b]),j=f.useCallback(()=>{h(!1)},[]);return f.useEffect(()=>{n&&I(n)},[n,I,s]),l.jsxs(l.Fragment,{children:[l.jsx(rn,{isOpen:e,onClose:y,title:VBe({intl:c,triggerType:x.trigger.type}),titleTextVariant:"base",footerContent:T,actionList:E,children:l.jsx(XMe,{configuration:x,onConfigurationChange:I,errorMessage:(o||p)??void 0,onError:g,initialActiveCardKey:i})}),l.jsx(_u,{message:m?$Be({intl:c,triggerType:x.trigger.type,actionPerformed:m}):"",variant:"success",isVisible:!!m,handleClose:j})]})}),v9t=Object.freeze(Object.defineProperty({__proto__:null,AutomationModal:JMe},Symbol.toStringTag,{value:"Module"})),$U=A.memo(({choices:e,...t})=>l.jsx(z,{className:"mt-sm divide-y rounded md:border",...t,children:e.map((n,r)=>n.subMenu?l.jsxs("div",{children:[f.createElement(vh,{type:"default",...n,rounded:!1,key:r}),n.active&&n.subMenu&&l.jsx(e3e,{choices:n.subMenu})]}):f.createElement(vh,{type:"default",...n,rounded:!1,key:r}))}));$U.displayName="RadioCard";const e3e=A.memo(({choices:e})=>l.jsx(z,{children:e.map((t,n)=>f.createElement(vh,{type:"radio",showIconLeft:!0,selected:t.active??!1,...t,rounded:!1,key:n}))}));e3e.displayName="RadioCardSubMenu";const t3e=A.memo(({onClose:e,isOpen:t,onDelete:n,...r})=>{const{$t:s}=X(),[a,o]=f.useState(!1),[i,c]=f.useState("all");f.useEffect(()=>{t||(o(!1),c("all"))},[t]);const u=f.useMemo(()=>[{text:s({defaultMessage:"All Threads",id:"2DJ/HRvVaR"}),label:s({defaultMessage:"All your threads will be deleted",id:"YDOzv2WOkx"}),active:i==="all",onClick:()=>{c("all")}},{text:s({defaultMessage:"Standalone Threads",id:"6HJEHjz/aG"}),label:s({defaultMessage:"Only your threads which are not part of a space will be deleted",id:"lFOvDZ2Tnp"}),active:i==="standalone",onClick:()=>{c("standalone")}}],[s,i]),d=f.useMemo(()=>[{text:"Cancel",onClick:e},{text:s(a?{defaultMessage:"Yes, Delete",id:"QEmYhzreEW"}:{defaultMessage:"Delete Threads",id:"+waPO7td+u"}),variant:"rejected",onClick:()=>{a?n(i):o(!0)}}],[s,i,a,e,n]);return l.jsx(rn,{...r,isOpen:t,onClose:e,title:s(a?i==="all"?{defaultMessage:"Delete all threads?",id:"Kju4ObJhbP"}:{defaultMessage:"Delete standalone threads?",id:"kiKGdmk4lu"}:{defaultMessage:"Delete Threads",id:"+waPO7td+u"}),actionList:d,children:l.jsx("div",{children:a?l.jsx("div",{children:l.jsx(D,{children:s(i==="all"?{defaultMessage:"All your threads will be deleted. This cannot be undone.",id:"U1IQ/Dlkge"}:{defaultMessage:"Your threads which are not part of a space will be deleted. This cannot be undone.",id:"Ko7lNjweFq"})})}):l.jsx($U,{className:"-mx-sm -my-sm border-none",choices:u})})})});t3e.displayName="DeleteThreadsModal";const n3e=A.memo(({children:e,fetchNextPage:t,hasNextPage:n,showLoadingState:r,itemsLength:s,loadingPlaceholder:a})=>{const o=f.useRef(t);o.current=t;const i=f.useRef(ks(()=>o.current(),300,{leading:!0,trailing:!1})),c=f.useRef(null);y9(c,i.current,{rootMargin:"50px",threshold:0});const u=a||(s===0?l.jsx(z,{className:"py-sm",children:l.jsx(Wi,{animateLines:!1,blockCount:12,divider:!0})}):l.jsx(z,{className:"py-md",children:l.jsx(Wi,{animateLines:!1,blockCount:1})}));return l.jsxs(l.Fragment,{children:[e,r&&u,s>0&&n&&l.jsx("div",{ref:c,className:"border border-transparent"})]})});n3e.displayName="LibraryItemList";const x9t=A.memo(({type:e,featuredImage:t,title:n,className:r,href:s})=>{if(!t||e!==ei.DISCOVER)return null;const a=l.jsx("div",{className:B("relative h-24 w-24 flex-none overflow-hidden rounded-md",r),children:t.includes("images.unsplash.com")?l.jsx("img",{src:t,alt:n,className:"size-full object-cover object-center"}):l.jsx("img",{src:t,alt:n,sizes:"33vw",className:"object-cover object-center"})});return s?l.jsx(at,{href:s,children:a}):a}),r3e=A.memo(({className:e})=>{const t=At(),n=f.useCallback(()=>{t.push("/account/tasks")},[t]),{variation:r,loading:s}=Mf(!1);return s?null:l.jsxs(D,{variant:"tiny",color:"super",className:B("gap-x-xs flex flex-row items-center hover:cursor-pointer",e),onClick:n,children:[l.jsx(be,{icon:lu,size:"xs",className:"-translate-y-px"}),r?l.jsx(he,{defaultMessage:"Automation",id:"Fn4YKyl4lm"}):l.jsx(he,{defaultMessage:"Task",id:"0wJ7N+noSq"})]})});r3e.displayName="TaskIndicator";const $j=A.memo(({icon:e,count:t,textVariant:n="tiny",textColor:r="light",className:s})=>l.jsxs("div",{className:"gap-x-xs flex items-center",children:[l.jsx(D,{variant:n,color:r,className:s,children:l.jsx(be,{icon:e,size:"sm"})}),l.jsx(D,{variant:n,color:r,className:s,children:MP(t)})]}),(e,t)=>e.count===t.count&&e.icon===t.icon&&e.className===t.className),b9t=A.memo(({threadAccess:e,socialInfo:t,textVariant:n,textColor:r,className:s})=>{if(!e||!t||KHe(e))return null;const a=t.view_count??0,o=t.fork_count??0;return l.jsxs(l.Fragment,{children:[a>0&&l.jsx($j,{icon:lre,count:a,textColor:r,textVariant:n,className:s}),o>0&&l.jsx($j,{icon:pS,count:o,textColor:r,textVariant:n,className:s})]})}),_9t=()=>{const{$t:e}=X();return f.useMemo(()=>({yearAgo:e({defaultMessage:"year ago",id:"FzcTXH29w0"}),yearsAgo:e({defaultMessage:"years ago",id:"zJmD8CS6cm"}),monthAgo:e({defaultMessage:"month ago",id:"bZWV9MmB/N"}),monthsAgo:e({defaultMessage:"months ago",id:"Lui0j+6Np9"}),dayAgo:e({defaultMessage:"day ago",id:"G4Y/+2FJhb"}),daysAgo:e({defaultMessage:"days ago",id:"vEpDmSBrwP"}),hourAgo:e({defaultMessage:"hour ago",id:"7v28g+bbYy"}),hoursAgo:e({defaultMessage:"hours ago",id:"2GaNTzDbM2"}),minutesAgo:e({defaultMessage:"minutes ago",id:"9aNLtXrhB8"}),minuteAgo:e({defaultMessage:"minute ago",id:"G8L9c8oAYi"}),justNow:e({defaultMessage:"Just now",id:"bxv59Vvssz"}),justNowShort:e({defaultMessage:"Now",id:"tgvES0v2HS"})}),[e])},w9t=ge(async()=>oe(()=>import("./TimeAgoTooltip-B7jjn7uc.js"),__vite__mapDeps([157,1,2,3,4,5]))),s3e=()=>{const{$t:e}=X(),{isEnterprise:t}=pn({reason:"temporary-thread-tooltip"});return e(t?{defaultMessage:"Temporary threads expire due to personal context access, navigational queries, data retention policies, or organizational requirements.",id:"BJL0VPkJd3"}:{defaultMessage:"Temporary threads expire due to personal context access, navigational queries, or data retention policies.",id:"mxG1FiTDFj"})},S9t=A.memo(({type:e,threadCount:t,threadAccess:n,lastUpdated:r,socialInfo:s,expiry:a,source:o,displayModel:i})=>{const c=_9t(),{locale:u,$t:d}=X(),m=n?QHe(n):null,h=X(),p=f.useMemo(()=>{if(!a)return null;const v=a.endsWith("Z")?a:`${a}Z`,x=new Date(v);return AC(h,x,{style:"short"},1e3*60*60*24)},[a,h]),g=f.useMemo(()=>{if(!a)return null;const v=a.endsWith("Z")?a:`${a}Z`;return new Date(v).toLocaleString(u,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})},[a,u]),y=s3e();return l.jsxs("div",{className:"gap-x-md flex items-center",children:[i?l.jsx(E9t,{displayModel:i}):null,p&&l.jsx(bn,{tooltipText:y,tooltipLayout:"right",asChild:!0,children:l.jsxs(D,{variant:"tiny",color:"light",className:"pr-sm pl-xs border-subtler flex cursor-default items-center gap-x-0.5 rounded-full border border-dashed py-0.5",children:[l.jsx(be,{icon:qre,size:"xs"}),d({defaultMessage:"Temporary Thread",id:"YuuBvz04y+"})]})}),p?l.jsx(bn,{tooltipText:g,tooltipLayout:"right",children:l.jsx(D,{variant:"tiny",color:"light",className:"cursor-default",children:d({defaultMessage:"Expires {expiry}",id:"KhQvNJGIsK"},{expiry:p})})}):r&&l.jsx(w9t,{timestamp:r,translations:c,locale:u}),o&&o==="perplexity_tasks"&&l.jsx(r3e,{}),l.jsx(b9t,{socialInfo:s,threadAccess:n}),!!t&&t>1&&l.jsx($j,{icon:c8,count:t}),e===ei.COLLECTION&&cde(n)&&l.jsxs(D,{className:"gap-x-xs ml-xs flex items-center",variant:"tiny",color:"light",testId:"thread-shared-indicator",children:[m&&l.jsx(be,{icon:m,size:"xs",className:"-mt-px"}),l.jsx("span",{children:d({defaultMessage:"Shared",id:"kWI6zXRaHY"})})]})]})}),C9t=["pplx_alpha","pplx_beta"],E9t=({displayModel:e})=>{const{$t:t}=X();if(!e||!C9t.includes(e))return null;const n=e==="pplx_alpha"?t({defaultMessage:"Research",id:"JEe7dVso7F"}):e==="pplx_beta"?t({defaultMessage:"Labs",id:"ylFNoY79wa"}):null,r=e==="pplx_alpha"?Jj:e==="pplx_beta"?lS:null;return l.jsxs(D,{variant:"tiny",color:"light",className:"pr-sm border-subtlest flex items-center gap-x-0.5 rounded-full border py-0.5 pl-1.5",children:[r&&l.jsx(be,{icon:r,size:"xs"}),n]})},a3e=({entryUUID:e,frontendContextUUID:t,existingCollection:n,existingFirstThreadQuery:r,filterOnSearchTerm:s,reason:a})=>{const{openModal:o}=_t(),{collections:i}=NM({autoFetch:!0,reason:a}),c=f.useCallback(async()=>{!e||!t||(i?.length?o("collectionSelectModal",{entryUUID:e,currentCollection:n??null,searchTerm:s?r??"":void 0,frontendContextUUID:t}):o("spaceCreateForThread",{frontendContextUUID:t,entryUUID:e}))},[i?.length,e,t,n,r,o,s]);return f.useMemo(()=>({openAddToCollectionModal:c}),[c])},M9t=({collectionUUID:e,reason:t})=>{const{collections:n}=NM({autoFetch:!0,reason:t});return!e||!n?null:n.find(s=>s.uuid===e)??null},o3e=A.memo(({children:e,className:t,as:n="div",active:r=!0,speed:s="normal",hoverOnly:a=!1,variant:o="default"})=>{const[i,c]=f.useState(!1),u=a?i:r;return A.createElement(n,{style:{animationDuration:s==="normal"?"1200ms":"1800ms"},className:B({shimmer:u&&o==="default","animate-gradient bg-clip-text text-transparent shimmer-super":u&&o==="super"},t),onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1)},e)});o3e.displayName="Shimmer";const T9t=f.memo(({title:e,preview:t,threadCount:n,lastUpdated:r,href:s="/",rwToken:a,socialInfo:o,showActionMenu:i=!0,authorImage:c,threadAccess:u,type:d,featuredImage:m,entryUUID:h,contextUUID:p,collection:g,expiry:y,onRemoveExpiration:v,source:x,isIncognitoThread:b,displayModel:_,isSelectable:w,isSelected:S,onSelect:C,isStreaming:E})=>{const M="thread-item",T=M9t({collectionUUID:g?.uuid,reason:M}),{deleteThread:I}=X1({reason:M}),{removeThreadFromCollection:j}=Sp({reason:M}),{trackEvent:N}=Te(),[P,R]=f.useState(!1),k=f.useCallback(async G=>{I({entryUUID:G,collectionSlug:T?.slug}),N("delete thread from history click",{entryUUID:G})},[T?.slug,I,N]),{openAddToCollectionModal:O}=a3e({entryUUID:h,existingCollection:T,reason:M,frontendContextUUID:p}),L=f.useCallback(G=>{G==="add"?N("click add thread to space",{contextUUID:p,isBookmark:!1}):N("click swap thread space",{contextUUID:p,isFromBookmark:!1,collectionUUID:T?.uuid||""}),O()},[T,p,N,O]),F=f.useCallback(()=>{N("click remove thread from space",{contextUUID:p,collectionUUID:T?.uuid||"",isBookmark:!1}),j({entryUUID:h,oldCollectionUUID:T?.uuid,frontendContextUUID:p,collectionSlug:T?.slug})},[T?.uuid,T?.slug,p,h,j,N]),U=f.useCallback(()=>L("add"),[L]),V=f.useCallback(()=>L("swap"),[L]),W=f.useCallback(()=>{R(!0),gC(h,()=>{v()})},[h,v]),H=f.useCallback(()=>C?.(!S),[S,C]);return l.jsxs(z,{className:"relative",children:[l.jsx(st,{initial:!1,children:w&&!E&&l.jsx(_e.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.1},className:"-translate-x-sm top-md mt-three absolute right-full",children:l.jsx(O9,{checked:S??!1,toggleChecked:H})})}),l.jsxs("div",{className:"gap-x-md py-md group relative flex items-center",children:[l.jsx(x9t,{featuredImage:m,type:d,title:e,href:s}),l.jsxs("div",{className:"gap-y-sm flex w-full grow flex-col",children:[l.jsxs(z,{className:"flex justify-between",children:[l.jsx(at,{href:s,className:"group block overflow-x-hidden",children:l.jsxs(z,{children:[l.jsxs(_e.div,{className:"gap-x-sm flex items-center",layout:!0,layoutRoot:!0,children:[(!!c||d===ei.COLLECTION)&&l.jsx(Cn,{size:"small",user:c??void 0}),l.jsx(D,{className:"gap-sm flex grow items-center",variant:"baseSemi",children:l.jsxs(dc,{children:[l.jsx(st,{initial:!1,children:E&&l.jsx(_e.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.1},className:"text-super",children:l.jsx(Ns,{size:14})},"spinner")}),l.jsx(_e.div,{layout:"position",transition:{duration:.15,ease:wu},"data-testid":`thread-title-${e}`,className:"md:group-hover:text-super line-clamp-1 w-full break-all",children:l.jsx(o3e,{speed:"slow",active:!!E,children:e})},e)]})})]}),l.jsx(D,{color:"light",className:"mt-two line-clamp-2 text-balance",variant:"small",children:t})]})}),l.jsx(z,{className:B("duration-150",{"opacity-0":w,"pointer-events-none group-hover:opacity-0":w}),children:l.jsx(BM,{show:i,currentSpace:T,showConvertThreadToArticle:!1,onDelete:k,onAddToSpace:U,onSwapSpace:V,onRemoveFromSpace:F,rwToken:a,contextUUID:p,threadAccess:u,collectionSlug:g?.slug,type:d,showSaveAsFileToSpace:!1,expiry:P?void 0:y,onRemoveExpiration:P?void 0:W,buttonSize:"tiny",threadId:h,isIncognitoThread:b})})]}),l.jsx("div",{className:i?"mt-xs":"mt-sm",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(S9t,{type:d,threadCount:n,threadAccess:u,lastUpdated:r,socialInfo:o??null,expiry:y,source:x,displayModel:_}),l.jsx("div",{className:"gap-x-xs flex items-center",children:g?.title&&d===ei.LIBRARY&&l.jsx(at,{href:`/spaces/${g?.slug}`,className:"block",children:l.jsx(z,{className:"px-xs rounded-full border",children:l.jsxs(D,{variant:"tiny",className:"gap-x-xs px-sm py-xs flex cursor-pointer select-none items-center transition duration-300 hover:opacity-70",testId:"thread-collection-pill",children:[l.jsx(Ru,{unified:g.emoji,size:"tiny"}),l.jsx("div",{className:"line-clamp-1",children:g.title})]})})})})]})})]})]})]})});var ei=(e=>(e.LIBRARY="library",e.COLLECTION="collection",e.DISCOVER="discover",e.SEARCH="search",e.INCOGNITO_SEARCH="incognitoSearch",e))(ei||{});const k9t="temporary-threads",Pne=e=>{qt(k9t,String(e),{expires:vr})};function N9t(e){let t;switch(e.mode){case"CONCISE":t="concise";break;case"COPILOT":t="copilot";break;case"ARTICLE":t="article";break}return{title:e.title??"",preview:"",threadCount:1,lastUpdated:e.lastUpdated??"",href:`/search/${e.slug}`,rwToken:e.rwToken??"",focus:e.focus,entryUUID:e.entryUUID??"",contextUUID:e.contextUUID??"",copilot:!1,socialInfo:e.socialInfo??null,collectionUUID:e.collectionInfo?.uuid??null,authorImage:null,featuredImage:null,thumbnailImage:null,threadAccess:null,collection:e.collectionInfo?{uuid:e.collectionInfo?.uuid??"",title:e.collectionInfo?.title??"",slug:e.collectionInfo?.slug??"",emoji:e.collectionInfo?.emoji??""}:void 0,mode:t,expiry:null,source:e.source??null,displayModel:e.displayModel,slug:e.slug??""}}const A9t=A.memo(({threads:e,fetchNextPage:t,hasNextPage:n=!1,showLoadingState:r=!1,showEmptyState:s=!1,type:a,showTemporaryThreads:o,setShowTemporaryThreads:i,searchTerm:c,invalidateThreadsQuery:u,ascending:d,setAscending:m,isFetchingNextPage:h,source:p,setSource:g,threadType:y,setThreadType:v,setDeleteModalOpen:x,deleteModalOpen:b,streamingThreads:_})=>{const{$t:w}=X(),S=f.useMemo(()=>(e??[]).map(nqe),[e]),C=Je(),[E,M]=f.useState(!1),[T,I]=f.useState([]),{isMobileStyle:j}=Ce(),N=f.useRef(c),{deleteAllThreads:P,deleteThreads:R}=X1({reason:"threads-list"}),[k,O]=f.useState(null),L=f.useCallback(Q=>{P(Q),x(!1)},[P,x]),F=f.useCallback(Q=>{I(re=>re.includes(Q)?re.filter(te=>te!==Q):[...re,Q])},[]),U=f.useCallback(()=>{M(!1),I([])},[]);f.useEffect(()=>{N.current!==c&&(U(),N.current=c)},[c,U]);const V=f.useMemo(()=>[{type:"default",text:w({defaultMessage:"Newest First",id:"dZYazP4QWO"}),onClick:()=>{m(!1),U()},show:!0,active:!d},{type:"default",text:w({defaultMessage:"Oldest First",id:"FqI37DU6LJ"}),onClick:()=>{m(!0),U()},show:!0,active:d}],[d,w,m,U]),W=f.useMemo(()=>[{type:"default",text:w({defaultMessage:"All",id:"zQvVDJ+j59"}),onClick:()=>{g("all"),U()},active:p==="all"},{type:"default",text:w({defaultMessage:"Comet",id:"9WmFFQw7ns"}),onClick:()=>{g("comet"),U()},active:p==="comet"}],[p,w,g,U]),H=f.useMemo(()=>[{type:"default",text:w({defaultMessage:"All",id:"zQvVDJ+j59"}),onClick:()=>{v("all"),U()},active:y==="all"},{type:"default",text:w({defaultMessage:"Research",id:"JEe7dVso7F"}),onClick:()=>{v("research"),U()},active:y==="research"},{type:"default",text:w({defaultMessage:"Labs",id:"ylFNoY79wa"}),onClick:()=>{v("labs"),U()},active:y==="labs"}],[y,w,v,U]),G=f.useMemo(()=>[{type:"default",text:w({defaultMessage:"Show",id:"K7AkdLoAj6"}),onClick:()=>{i(!0),Pne(!0),U()},active:o},{type:"default",text:w({defaultMessage:"Hide",id:"VA/Z1SW3vH"}),onClick:()=>{i(!1),Pne(!1),U()},active:!o}],[o,w,i,U]),K=tn(),$=f.useMemo(()=>l.jsx(c3e,{}),[]),q=f.useCallback(()=>x(!1),[x]),Z=f.useCallback(()=>{R({entryUUIDs:T,callback:U})},[R,T,U]),se=ea({reason:"threads-list"}),Y=f.useMemo(()=>p!=="all"||y!=="all",[p,y]);return l.jsxs(l.Fragment,{children:[l.jsxs(n3e,{fetchNextPage:t,hasNextPage:n,showLoadingState:h||r,itemsLength:S.length,loadingPlaceholder:$,children:[se&&l.jsx("div",{"data-color-scheme":"dark",children:l.jsxs(z,{className:"mt-md p-md gap-sm flex items-center justify-start rounded-md",variant:"offset",children:[l.jsx(Uu,{inverse:!0}),l.jsxs("div",{children:[l.jsx(D,{variant:"smallBold",color:"white",children:w({defaultMessage:"You are incognito",id:"pBm4msoyyh"})}),l.jsx(D,{variant:"small",color:"white",className:"text-pretty opacity-75",children:w({defaultMessage:"New Threads are anonymous, won't appear in your library, and expire after 24 hours.",id:"/FQ4Dx5TpY"})})]})]})}),l.jsx(z,{className:B("gap-sm pt-md flex items-center justify-between",{"bg-base pb-md -mb-md sticky top-0 z-10":!j}),variant:"background",children:l.jsxs(l3e,{children:[l.jsxs("div",{className:"gap-sm flex items-center",children:[!j&&l.jsxs(z,{className:"pr-sm relative flex-1 shrink-0",children:[l.jsx(i3e,{selectEnabled:E,resetSelect:U,setSelectEnabled:M}),l.jsx(z,{className:"absolute right-0 top-1/2 h-5 -translate-y-1/2 border-r"})]}),K&&l.jsx(en,{placement:"bottom-start",isMobileStyle:j,items:W,wrapperClassName:"inline-flex",onOpen:()=>O("source"),onClose:()=>O(null),isOpen:k==="source",children:l.jsx(Zc,{variant:p==="all"?"border":"primary",text:p==="all"?w({defaultMessage:"Source",id:"aH4De2Y20k"}):w({defaultMessage:"Source: {comet}",id:"pAvXy3TmGv"},{comet:"Comet"})})}),l.jsx(en,{placement:"bottom-start",isMobileStyle:j,items:H,wrapperClassName:"inline-flex",onOpen:()=>O("type"),onClose:()=>O(null),isOpen:k==="type",children:l.jsx(Zc,{variant:y==="all"?"border":"primary",text:w(y==="all"?{defaultMessage:"Type",id:"+U6ozcnv4r"}:y==="research"?{defaultMessage:"Type: Research",id:"NeGk8fwf1M"}:{defaultMessage:"Type: Labs",id:"yLIVi0dTj2"})})}),l.jsx(en,{placement:"bottom-start",isMobileStyle:j,items:G,wrapperClassName:"inline-flex",onOpen:()=>O("temporary"),onClose:()=>O(null),isOpen:k==="temporary",children:l.jsx(Zc,{variant:"border",text:w(o?{defaultMessage:"Temporary Threads: Show",id:"j0VHwshtHd"}:{defaultMessage:"Temporary Threads: Hide",id:"X8Kc6bnTnf"})})})]}),l.jsx("div",{className:B("gap-sm flex items-center",{}),children:l.jsx(en,{placement:K?"bottom-start":"bottom-end",isMobileStyle:j,wrapperClassName:"inline-flex",items:V,onOpen:()=>O("sort"),onClose:()=>O(null),isOpen:k==="sort",children:l.jsx(Zc,{text:w(d?{defaultMessage:"Sort: Oldest",id:"K8y5AUAIdW"}:{defaultMessage:"Sort: Newest",id:"ouRV0Q2JpB"})})})})]})}),s&&S.length===0?l.jsxs(z,{className:"mt-xl p-xl flex flex-col items-center justify-center rounded-md",children:[l.jsx(D,{variant:"baseSemi",children:Y||c?w({defaultMessage:"Nothing turned up",id:"Rn55YzpVb0"}):w({defaultMessage:"No {threads} yet",id:"5zP56HMUgk"},{threads:"Threads"})}),Y||c?l.jsx(D,{variant:"small",color:"light",children:w({defaultMessage:"Try different keywords, check for typos, or adjust your filters.",id:"3DJFcRxvex"})}):l.jsx(D,{variant:"small",color:"light",children:l.jsx(he,{defaultMessage:"Try creating a <link>new Thread</link>",id:"18hNnPSiwJ",values:{link:Q=>l.jsx(at,{className:"text-super",href:"/",children:Q})}})})]}):l.jsxs("div",{className:"relative",children:[l.jsxs(z,{className:"relative divide-y",children:[_.filter(Q=>!S.find(re=>re.slug===Q.slug)).filter(Q=>!S.find(re=>re.entryUUID===Q.id)).filter(Q=>Q.slug!==null).map(Q=>l.jsx(Wj,{thread:N9t(Q),invalidateThreadsQuery:u,selectEnabled:!1,selectedThreads:T,showActionMenu:!1,handleSelect:F,type:a,isStreaming:!0},Q.slug||Q.entryUUID)),S.map(Q=>l.jsx(Wj,{thread:Q,invalidateThreadsQuery:u,selectEnabled:E,selectedThreads:T,showActionMenu:a!=="discover"&&C,handleSelect:F,type:a},Q.slug))]}),r&&l.jsx("div",{className:"bg-base absolute inset-0 opacity-50"})]})]}),l.jsx(t3e,{isOpen:b,onClose:q,onDelete:L}),l.jsx(st,{initial:!1,children:E&&l.jsx(_e.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.2,bounce:.2,type:"spring"},className:"bottom-md fixed inset-x-0 flex items-center justify-center",children:l.jsxs(z,{variant:"raised",className:"p-sm pl-md shadow-subtle bottom-md flex w-[400px] items-center justify-between rounded-xl border",children:[l.jsx(D,{variant:"small",color:"light",children:w({defaultMessage:"{count, plural, =0 {No Threads} one {# Thread} other {# Threads}} Selected",id:"MqdlBPNiqL"},{count:T.length})}),l.jsx(ye,{text:w({defaultMessage:"Delete {count, plural, =0 {Threads} one {# Thread} other {# Threads}}",id:"nBPaP34ufb"},{count:T.length}),variant:"rejected",size:"small",disabled:T.length===0,onClick:Z})]})})})]})}),Wj=A.memo(({thread:e,invalidateThreadsQuery:t,selectEnabled:n,selectedThreads:r,handleSelect:s,type:a,showActionMenu:o,isStreaming:i})=>{const c=f.useCallback(u=>{s(e.entryUUID)},[s,e.entryUUID]);return l.jsx(T9t,{href:e.href,rwToken:e.rwToken,title:e.title,preview:e.preview??"",threadCount:e.threadCount,lastUpdated:e.lastUpdated,copilot:e.copilot,socialInfo:e.socialInfo,threadAccess:e.threadAccess??null,authorImage:e.authorImage,featuredImage:e.featuredImage??null,showActionMenu:o,type:a,entryUUID:e.entryUUID,contextUUID:e.contextUUID,collection:e.collection??null,expiry:e.expiry,onRemoveExpiration:t,source:e.source,isIncognitoThread:!1,displayModel:e.displayModel,isSelectable:n,isSelected:r.includes(e.entryUUID),onSelect:c,isStreaming:i},e.entryUUID)});Wj.displayName="ThreadItemWrapper";A9t.displayName="ThreadsList";const Zc=A.memo(({text:e,variant:t="border",onClick:n,chevron:r=!0,icon:s,disabled:a,className:o})=>{const{isMobileStyle:i}=Ce();return l.jsx(ye,{variant:t,size:i?"small":"tiny",text:e,chevron:r,onClick:n,icon:s,extraCSS:B(a?"opacity-50 pointer-events-none":"",o)})});Zc.displayName="FilterButton";const i3e=A.memo(({selectEnabled:e,resetSelect:t,setSelectEnabled:n})=>{const{$t:r}=X(),s=f.useCallback(()=>{n(!e),e&&t()},[e,t,n]);return l.jsxs("div",{className:"inline-grid w-max grid-cols-1 grid-rows-1",children:[l.jsx(Zc,{text:r(e?{defaultMessage:"Done",id:"JXdbo8Vnlw"}:{defaultMessage:"Select",id:"kQAf2d9u+x"}),onClick:s,chevron:!1,variant:e?"primary":"border",className:"col-start-1 row-start-1"}),l.jsx(Zc,{text:r({defaultMessage:"Select",id:"kQAf2d9u+x"}),className:"pointer-events-none col-start-1 row-start-1 opacity-0",chevron:!1}),l.jsx(Zc,{text:r({defaultMessage:"Done",id:"JXdbo8Vnlw"}),className:"pointer-events-none col-start-1 row-start-1 opacity-0",chevron:!1})]})});i3e.displayName="SelectButton";const l3e=A.memo(({children:e})=>{const{isMobileStyle:t}=Ce();return t?l.jsx("div",{className:"w-full",children:l.jsx("div",{className:"-mx-md",children:l.jsx(ec,{showScrollIndicator:!1,orientation:"horizontal",children:l.jsx("div",{className:"gap-sm px-md flex items-center",children:e})})})}):l.jsx(ec,{showScrollIndicator:!1,orientation:"horizontal",children:l.jsx("div",{className:"gap-sm flex w-full items-center justify-between",children:e})})});l3e.displayName="FiltersWrapper";const c3e=A.memo(()=>l.jsxs(z,{className:"gap-x-md py-md gap-sm group relative flex flex-col items-start",children:[l.jsxs("div",{className:"gap-two flex w-full flex-col",children:[l.jsxs("div",{className:"grid items-center",children:[l.jsx(D,{variant:"baseSemi",className:"col-start-1 row-start-1",children:""}),l.jsx(z,{variant:"offset",className:"col-start-1 row-start-1 h-4 w-[120px] rounded-full"})]}),l.jsxs("div",{className:"grid w-full items-center",children:[l.jsxs(D,{variant:"small",className:"col-start-1 row-start-1",children:["",l.jsx("br",{}),""]}),l.jsxs("div",{className:"col-start-1 row-start-1 flex w-full flex-col gap-2",children:[l.jsx(z,{variant:"offset",className:"h-2 w-2/3 rounded-full"}),l.jsx(z,{variant:"offset",className:"h-2 w-2/3 rounded-full"})]})]})]}),l.jsxs("div",{className:"grid items-center",children:[l.jsx(D,{variant:"tiny",className:"col-start-1 row-start-1",children:""}),l.jsx(z,{variant:"offset",className:"col-start-1 row-start-1 h-2 w-[80px] rounded-full"})]})]}));c3e.displayName="ThreadItemSkeleton";function P9t(e){return Nce(e)?e:fe.PRO}function R9t(e){const t=e?.filter(xp)??ce;return t.length>0?t:[ki.web]}function I9t(){if(typeof window>"u")throw new Error("useCreateTaskFromThread should only be used on the client");const[e,t]=f.useState(!1),[n,r]=f.useState(!1),{hasAccessToProFeatures:s}=Nt(),a=At(),{firstResult:o}=zt(),i=LHe(),c=o?.query_str||i.first_query,u=f.useMemo(()=>P9t(o?.display_model),[o?.display_model]),d=f.useMemo(()=>o?.sources?.sources?R9t(o.sources.sources):[ki.web],[o?.sources?.sources]),m=f.useMemo(()=>s&&!!c,[s,c]),h=f.useCallback(()=>{m&&t(!0)},[m]),p=f.useCallback(()=>{t(!1)},[]),g=f.useCallback(()=>{t(!1),r(!0)},[]),y=f.useCallback(()=>{r(!1),a.push("/account/tasks")},[a]),v=f.useCallback(()=>{r(!1)},[]),x=f.useMemo(()=>{if(!c)return;const b=new Date;return{title:"",prompt:c,schedule:{kind:"DAILY",hour:b.getHours(),minute:b.getMinutes(),day:b.getDate(),month:b.getMonth(),year:b.getFullYear(),dayOfWeek:b.getDay()},searchModel:u,sources:d}},[c,u,d]);return f.useMemo(()=>({canCreateTask:m,isTaskModalOpen:e,handleCreateTask:h,handleTaskModalClose:p,handleTaskModalSuccess:g,taskPrefillData:x,showConfirmationToast:n,handleConfirmationToastSettings:y,handleConfirmationToastDismiss:v}),[m,h,p,g,e,x,n,y,v])}const j9t=e=>{const{openToast:t}=On(),[n,r]=f.useState(!1),s=f.useCallback(async(a,o)=>{try{r(!0),t("Exporting thread...","refresh",10);const i=await o(),c=atob(i.file_content_64),u=new Array(c.length);for(let g=0;g<c.length;g++)u[g]=c.charCodeAt(g);const d=new Uint8Array(u),m=new Blob([d],{type:`application/${a}`}),h=window.URL.createObjectURL(m),p=document.createElement("a");p.href=h,p.download=i.filename,p.style.display="none",document.body.appendChild(p),p.click(),setTimeout(()=>{document.body.removeChild(p),window.URL.revokeObjectURL(h)},1e3),t("Export succeeded","success",3)}catch{t(e,"error")}finally{r(!1)}},[t,e]);return f.useMemo(()=>({handleExport:s,isExporting:n}),[s,n])},O9t=({reason:e})=>{const n=X().formatMessage({defaultMessage:"Failed to export answer",id:"UiPrX3hXY8"}),{handleExport:r,isExporting:s}=j9t(n),a=f.useCallback(async(o,i)=>{await r(i,()=>Aue({thread_uuid:o,format:i,reason:e}))},[r,e]);return f.useMemo(()=>({convertContent:a,isExporting:s}),[a,s])},u3e=A.memo(({message:e,isVisible:t=!1,timeout:n,onSettingsClick:r,onTimeout:s=Rn,icon:a,...o})=>{const[i,c]=f.useState(t),u=f.useRef(null),{$t:d}=X();f.useEffect(()=>{c(t)},[t]);const m=f.useCallback(()=>{u.current&&clearTimeout(u.current)},[]),h=f.useCallback(()=>{c(!1),s(),m()},[s,m]);return f.useEffect(()=>(t&&n&&(u.current=setTimeout(()=>{h()},n*1e3)),()=>{m()}),[i,n,t,s,h,m]),l.jsx(hp,{children:l.jsx(st,{children:i&&l.jsx(_e.div,{className:"right-toastHMargin top-toastVMargin fixed z-30 flex items-center justify-center",initial:{opacity:0,x:6},animate:{opacity:1,x:0},exit:{opacity:0,x:6},transition:ho,...o,children:l.jsxs(z,{variant:"raised",className:B("shadow-subtle gap-sm flex items-stretch rounded-xl border pl-[12px] dark:shadow-[0_4px_12px_rgba(0,0,0,0.5)]"),children:[a&&l.jsx("div",{className:"p-sm bg-offset dark:bg-offsetPlus my-[12px] flex aspect-square items-center justify-center rounded-md",children:l.jsx(be,{icon:a,className:"text-quiet",size:"md"})}),l.jsxs("div",{className:"flex flex-1 flex-row items-center justify-between",children:[l.jsx(D,{variant:"tiny",color:"default",className:"pl-sm max-w-[200px] shrink-0 pr-[12px]",children:e}),l.jsxs(z,{className:"flex h-full flex-col items-stretch justify-center border-l",children:[l.jsx(ke,{size:"tiny",variant:"noHover",text:d({defaultMessage:"Settings",id:"D3idYvSLF9"}),onClick:r,extraCSS:"!px-[12px] flex-1 hover:opacity-60",testId:"task-confirmation-settings-button"}),l.jsx(z,{className:"border-t"}),l.jsx(ke,{size:"tiny",variant:"noHover",text:d({defaultMessage:"Dismiss",id:"TDaF6JVgG6"}),onClick:h,extraCSS:"!px-[12px] flex-1 hover:opacity-60",testId:"task-confirmation-dismiss-button"})]})]})]})},"task-creation-toast")})})});u3e.displayName="TaskCreationConfirmationToast";const BM=A.memo(({show:e,isBookmarked:t,currentSpace:n,onDelete:r,onAddToSpace:s,onSwapSpace:a,onRemoveFromSpace:o,onConvertToArticle:i,onRename:c,threadAccess:u,contextUUID:d,rwToken:m,collectionSlug:h,type:p,isConverting:g,showConvertThreadToArticle:y,className:v,firstResultBackendUUID:x,showSaveAsFileToSpace:b=!0,onBookmark:_,showBookmarkButton:w=!1,title:S,expiry:C,onRemoveExpiration:E,onOpen:M,onClose:T,buttonSize:I="small",threadId:j,isIncognitoThread:N,isNativeMobileVariant:P=!1})=>{const R="thread-overflow-dropdown",k=X(),[O,L]=f.useState(!1),{trackEvent:F}=Te(),{isMobileStyle:U}=Ce(),V=k.formatMessage({defaultMessage:"Export as PDF",id:"syduyBQ0eU"}),W=k.formatMessage({defaultMessage:"Export as Markdown",id:"d3prfCUwCt"}),H=k.formatMessage({defaultMessage:"Export as DOCX",id:"yQ3Z7H5E8P"}),[G,K]=f.useState(!1),$=Ot(),{convertContent:q,isExporting:Z}=O9t({reason:R}),{fileRepoInfo:se}=Au({reason:R}),Y=se?.file_repository_type==="COLLECTION",Q=!!m,re=f.useMemo(()=>({pdf:"export thread PDF clicked",md:"export thread MD clicked",docx:"export thread DOCX clicked"}),[]),{collection:te}=xc({collectionSlug:h,reason:R}),{data:le}=e7({fileRepoInfo:se,fileName:j??"",reason:R}),{saveThreadToSpace:ie,removeThreadFromSpace:pe}=Ihe({fileRepoInfo:se,fileExists:le??!1,reason:R}),me=f.useCallback(async Vt=>{x&&(F(re[Vt],{}),await q(x,Vt))},[x,re,F,q]),de=w&&U&&!!_,ve=n===null&&(p===ei.LIBRARY||p===ei.SEARCH)&&!!s,Ae=n!==null&&Q&&!!a,Se=n!==null&&!!o,{isUserAtLeastWriter:De}=m9({reason:R}),{onShareThreadToSpace:Ne,onMakeThreadPrivate:Pe,isShareable:dt}=XL({threadAccess:u,contextUUID:d,rwToken:m,collectionSlug:h,reason:R}),et=Y&&De&&!dt&&!!Ne,Et=Y&&De&&dt&&!!Pe,ue=Q&&!!r,Ue=Y&&b&&!le&&!G&&!!te&&te?.user_permission>=2,Ct=Q&&!!E&&!!C&&!N,Ye=Y&&b&&(le||G),[mt,We]=f.useState(!1),{canCreateTask:Oe,isTaskModalOpen:Tt,handleCreateTask:$e,handleTaskModalClose:ct,handleTaskModalSuccess:yt,taskPrefillData:ht,showConfirmationToast:ut,handleConfirmationToastSettings:fn,handleConfirmationToastDismiss:wr}=I9t(),{variation:sn,loading:kt}=yU(!1),Kt=f.useMemo(()=>[{type:"default",icon:t?Kre:d8,text:t?k.formatMessage({defaultMessage:"Bookmarked",id:"k0fraU5NBY"}):k.formatMessage({defaultMessage:"Add Bookmark",id:"Y4GyA+IDCn"}),show:de,onClick:_},{type:"default",icon:mr,text:k.formatMessage({defaultMessage:"Add to Space",id:"nB+VQ2svMZ"}),show:ve,onClick:s,testId:"thread-add-to-space"},{type:"default",icon:Rke,text:k.formatMessage({defaultMessage:"Swap Space",id:"y3tRs6Jpig"}),show:Ae,onClick:a,testId:"thread-swap-space"},{type:"default",icon:Xt,text:k.formatMessage({defaultMessage:"Remove from Space",id:"2B71WoR6Sk"}),show:Se,onClick:o,testId:"thread-remove-from-space"},{type:"default",icon:ya,text:k.formatMessage({defaultMessage:"Share thread with Space",id:"kynn3b03Sq"}),show:et,onClick:Vt=>{Vt.preventDefault(),Ne()},testId:"thread-share-to-space"},{type:"default",icon:th,text:k.formatMessage({defaultMessage:"Make thread private",id:"AIUSJMqN6C"}),show:Et,onClick:Vt=>{Vt.preventDefault(),Pe()},testId:"thread-make-private"},{type:"default",icon:Ike,text:k.formatMessage({defaultMessage:"Convert to Page",id:"IcFSSFTdA7"}),show:y,onClick:i,testId:"thread-article-create",disabled:g},{type:"default",icon:Yre,text:k.formatMessage({defaultMessage:"Remove Expiration",id:"N4qHoBsI8d"}),show:Ct,onClick:E},{type:"default",icon:ya,text:k.formatMessage({defaultMessage:"Save as file to Space",id:"L8nSm8m8qs"}),show:Ue,onClick:()=>{!x||!j||(K(!0),F("save thread to space clicked",{}),ie(x,j))},testId:"thread-save-to-space"},{type:"default",icon:Ud,text:k.formatMessage({defaultMessage:"Remove file from Space",id:"TjcTDl4lU+"}),show:Ye,onClick:async()=>{await pe(j??""),K(!1)},testId:"remove-file-from-space"},{type:"default",icon:lu,text:k.formatMessage({defaultMessage:"Create task",id:"7X1tNR2pav"}),show:Oe,onClick:$e,testId:"thread-create-task"},{type:"separator",show:(et||Et||y)&&!!x},{type:"default",icon:Jne,text:V,show:!!x,onClick:()=>me("pdf"),disabled:Z,testId:"thread-export-pdf"},{type:"default",icon:jke,text:W,show:!!x,onClick:()=>me("md"),disabled:Z,testId:"thread-export-md"},{type:"default",icon:Oke,text:H,show:!!x,onClick:()=>me("docx"),disabled:Z,testId:"thread-export-docx"},{type:"separator",show:ue&&(ve||y)},{type:"default",icon:Ud,text:k.formatMessage({defaultMessage:"Delete",id:"K3r6DQW7h+"}),show:ue,onClick:()=>We(!0),testId:"thread-delete"}],[ve,Se,Ae,ue,g,Z,y,i,x,k,V,W,H,me,et,Ne,Et,Pe,ie,j,Ue,pe,Ye,F,de,_,t,s,o,a,Ct,E,Oe,$e]),xe=d&&m&&$,qe=f.useCallback(()=>{L(!0),M?.()},[M]),He=f.useCallback(()=>{L(!1),T?.()},[T]),ze=te?.user_permission&&_h(te.user_permission),ot=f.useMemo(()=>l.jsxs("div",{className:"flex min-h-10 flex-col justify-center",children:[l.jsxs("div",{className:"gap-x-sm group relative flex items-center justify-between py-0.5",children:[xe&&l.jsx(z,{className:"-inset-x-sm absolute -inset-y-0 rounded-lg opacity-0 transition-opacity duration-150 group-hover:opacity-100",variant:"offset"}),l.jsx(D,{variant:"small",className:"relative line-clamp-1",color:"light",children:S}),xe&&c&&l.jsx(ke,{size:"tiny",icon:i8,onClick:c,testId:"thread-rename",toolTip:k.formatMessage({defaultMessage:"Rename Thread",id:"4cT2c/aQya"}),extraCSS:"-mr-sm opacity-0 group-hover:opacity-100 transition-opacity duration-150"})]}),n&&!ze&&l.jsxs("div",{className:"gap-x-xs -mt-xs flex h-8 items-center",children:[l.jsx(Lke,{className:"text-quietest size-4 shrink-0 -translate-y-0.5"}),l.jsx("div",{className:"shrink-0 scale-90",children:n.emoji?l.jsx(Ru,{unified:n.emoji,size:"small"}):l.jsx(ya,{size:16,className:"text-quietest shrink-0 -translate-y-0.5"})}),l.jsx(D,{variant:"tinyRegular",color:"light",className:"line-clamp-1",children:n.title})]})]}),[xe,S,c,k,n,ze]),it=f.useMemo(()=>[{text:k.formatMessage({defaultMessage:"Nevermind",id:"64sfSNetr+"}),onClick:()=>We(!1),testId:"thread-delete-nevermind"},{text:k.formatMessage({defaultMessage:"Confirm",id:"N2IrpMDHDB"}),variant:"rejected",onClick:()=>{We(!1),r?.(j??"")},testId:"thread-delete-confirm"}],[k,r,j]),Gt=f.useCallback(()=>We(!1),[]);return!e||Kt?.every(Vt=>!Vt.show)?null:l.jsxs(l.Fragment,{children:[l.jsx("div",{className:v,children:l.jsx(en,{items:Kt,isMobileStyle:U,onOpen:qe,onClose:He,placement:"bottom-end",header:S?ot:void 0,children:P&&U?l.jsx(ye,{testId:"thread-dropdown-menu",size:I,icon:cu,variant:"common",pill:!0,extraCSS:B("",{"!text-foreground !bg-offsetPlus":O})}):l.jsx(ke,{testId:"thread-dropdown-menu",size:I,icon:cu,extraCSS:B("",{"!text-foreground !bg-offsetPlus":O})})})}),l.jsx(U9,{isOpen:mt,onClose:Gt,message:k.formatMessage({defaultMessage:"Delete thread",id:"2WxP2iMtPx"}),subtitle:k.formatMessage({defaultMessage:"Are you sure you want to delete this thread?",id:"9JVHvYsJ0s"}),actionList:it}),l.jsx(Jd,{children:!kt&&sn?l.jsx(JMe,{open:Tt,onClose:ct,onSave:yt,initialConfiguration:ht?Wce(ht):null,initialActiveCardKey:"trigger",source:"thread_dropdown",trackEvent:F}):l.jsx(fU,{open:Tt,onClose:ct,onSuccess:yt,prefill:ht,source:"thread_dropdown"})}),l.jsx(u3e,{message:k.formatMessage({defaultMessage:"Created task",id:"sYXsMoH4Bc"}),isVisible:ut,onSettingsClick:fn,onTimeout:wr,timeout:5,icon:lu})]})});BM.displayName="ThreadOverflowDropdown";const d3e=A.memo(({shareHref:e,shareSource:t,hasMounted:n,maybeContextUUID:r,onClick:s,...a})=>{const{$t:o}=X(),{trackEvent:i}=Ep(),{openToast:c}=On(),u=f.useCallback(()=>{s?.(),c(o({defaultMessage:"Link copied. Paste to share",id:"pFRfr79EJO"}),"success",3),navigator.clipboard.writeText(n?I2(decodeURIComponent(e)):""),i("click copy link button",{contextUUID:r,source:t||"copyLinkButton"})},[n,e,t,i,r,s,c,o]);return l.jsx(ye,{clickFeedback:!0,size:"small",onClick:u,toolTip:o({defaultMessage:"Copy link",id:"lbr3Lq2Lnm"}),tooltipLayout:"bottom",icon:N0,variant:"primary",testId:"copy-link-button",...a})});d3e.displayName="CopyLinkButton";const L9t=({onClick:e,size:t="small",isMobileStyle:n,isNativeMobileVariant:r,testId:s="share-button"})=>{const{$t:a}=X();return r?l.jsx(ye,{pill:!0,onClick:e,variant:"common",size:t,icon:by,extraCSS:"-mr-sm",testId:s}):n?l.jsx(ke,{onClick:e,icon:by,variant:"common",size:t,testId:s}):l.jsx(ye,{onClick:e,variant:"primary",size:t,text:a({defaultMessage:"Share",id:"OKhRC6eWRw"}),icon:by,testId:s})},f3e=A.memo(({hasMounted:e,shareHref:t,EditorDropDownContent:n,onClick:r,maybeContextUUID:s,size:a="small",showCopyLinkButton:o=!0,contentWidth:i,isOpen:c,onClose:u,isNativeMobileVariant:d=!1})=>{const{isMobileStyle:m}=Ce(),{isMacOS:h}=Wt(),g=Ht()?.get("open-share"),[y,v]=f.useState(!1),x=c!==void 0,b=x?c:y;f.useEffect(()=>{g&&(r?.(),v(!0),kp({}))},[g,r]);const _=f.useCallback(()=>{r?.(),x||v(C=>!C)},[r,x]),w=f.useCallback(()=>{u?.(),x||v(!1)},[x,u]),S=f.useCallback(C=>{(h?C.metaKey&&C.shiftKey&&C.key==="c":C.ctrlKey&&C.shiftKey&&C.key==="c")&&(C.preventDefault(),_())},[h,_]);return f.useEffect(()=>(document.addEventListener("keydown",S),()=>{document.removeEventListener("keydown",S)}),[S]),e?l.jsxs("div",{className:"gap-x-sm flex items-center",children:[!m&&o&&l.jsx(d3e,{shareHref:t,hasMounted:e,maybeContextUUID:s,onClick:r}),l.jsx(DF,{content:n,placement:"bottom-end",contentWidth:i,isMobileStyle:m,isOpen:b,onClose:w,children:l.jsx(L9t,{onClick:_,size:a,isMobileStyle:m,isNativeMobileVariant:d,testId:"share-button"})})]}):null});f3e.displayName="ShareDropdown";const m3e=A.memo(({descriptionText:e,shareHref:t,isShareable:n,onlyOrgSharable:r,onlySpaceSharable:s,maybeContextUUID:a,hasMounted:o,icon:i})=>{const{$t:c}=X(),u="hidden md:block",d="block md:hidden",{trackEvent:m}=Ep(),p=Ht()?.get("open-share"),g=f.useCallback(()=>{document.hasFocus&&(navigator.clipboard.writeText(o?I2(decodeURIComponent(t)):""),m("click copy link button",{contextUUID:a,source:"shareThread"}))},[o,t,m,a]),y=f.useCallback(()=>{navigator.share({text:`${e} ${o?I2(decodeURIComponent(t)):""}`,title:"Perplexity AI"}),m("click mobile native share button",{})},[t,e,o,m]);return f.useEffect(()=>{o&&n&&!p&&g()},[o,n,g,p]),!o||!n?null:l.jsxs("div",{children:[l.jsx("div",{className:"mt-sm",children:l.jsxs(D,{variant:"tiny",color:"super",className:"flex",children:[l.jsx(be,{icon:yre,className:"mr-xs",size:"xs"}),l.jsx("span",{children:c({defaultMessage:"Link copied. Paste to share",id:"pFRfr79EJO"})})]})}),l.jsxs("div",{className:u,children:[l.jsx(D,{variant:"baseSemi",className:"mb-sm mt-md",children:c(r?{defaultMessage:"Share this link within your Organization",id:"kjiOOzdX3d"}:s?{defaultMessage:"Share this link within your Space",id:"zAEbvlplsJ"}:{defaultMessage:"Share",id:"OKhRC6eWRw"})}),l.jsx(ye,{size:"small",fullWidth:!0,onClick:g,text:c({defaultMessage:"Copy Link",id:"u5aHb4gcxX"}),icon:N0,clickFeedback:!0,testId:"copy-link-button"})]}),l.jsx("div",{className:d,children:l.jsx("div",{className:"mt-md",children:l.jsx(ye,{variant:"primary",fullWidth:!0,text:c({defaultMessage:"Share",id:"OKhRC6eWRw"}),target:"_blank",icon:i,onClick:y})})})]})});m3e.displayName="SocialShareLinks";const D9t=({reason:e})=>{const{$t:t}=X(),n=Je(),{firstResult:{context_uuid:r,thread_access:s=rie,collection_info:{slug:a}={}}={}}=zt(),{isEnterprise:o}=pn({reason:e}),{openVisitorLoginUpsell:i}=$n({enabled:!n}),c=vo(),{handleAccessChange:u,isShareable:d}=XL({threadAccess:s,contextUUID:r,rwToken:c,collectionSlug:a,reason:e}),m=f.useCallback(y=>{y!==s&&(n?r&&c&&u(y):i({title:t({defaultMessage:"Sign in to save private {threads}",id:"Rf9T7Whe3t"},{threads:"Threads"}),origin:Be.SHARE_DROPDOWN,sheetModalVariant:"bottom-sheet-gradient"}))},[s,n,r,c,i,t,u]),h=f.useCallback(()=>{o||s===pt.PRIVATE_READ&&n&&m(pt.PUBLIC_READ)},[o,s,n,m]),{accessLevelMenuItems:p,selectedAccessMenuItem:g}=lde({currentAccessLevel:s,onClick:m,isCollection:!1,isPage:!1,reason:e});return f.useMemo(()=>({rwToken:c,thread_access:s,handleShareDropdownClick:h,accessLevelMenuItems:p,selectedAccessMenuItem:g,isThreadSharable:d,context_uuid:r}),[p,r,h,d,c,g,s])},F9t=A.memo(({descriptionText:e,sharableURL:t,isNativeMobileVariant:n=!1})=>{const r="share-thread-dropdown",{$t:s}=X(),a=ms(),{rwToken:o,thread_access:i,handleShareDropdownClick:c,accessLevelMenuItems:u,selectedAccessMenuItem:d,isThreadSharable:m,context_uuid:h}=D9t({reason:r}),p=l.jsxs("div",{className:"p-sm gap-sm flex flex-col",children:[o!=null&&l.jsxs("div",{children:[l.jsx(D,{variant:"baseSemi",children:s({defaultMessage:"Share this Thread",id:"WMdsw58EMp"})}),l.jsx($U,{choices:u})]}),l.jsx(m3e,{descriptionText:e,shareHref:t,isShareable:m,onlyOrgSharable:i===pt.ORG_READ,onlySpaceSharable:i===pt.COLLECTION_READ,maybeContextUUID:h,hasMounted:a,icon:d?.icon})]});return l.jsx(f3e,{hasMounted:a,shareHref:t,EditorDropDownContent:p,icon:d?.icon,onClick:c,maybeContextUUID:h,showCopyLinkButton:!1,isNativeMobileVariant:n})}),h3e=f.memo(({visible:e,tweetDescriptionText:t,threadSharedSlug:n,urlSearchParams:r,isNativeMobileVariant:s=!1})=>{const a=ms(),[o,i]=f.useState("");f.useEffect(()=>{if(typeof window>"u")return;const{protocol:m,host:h}=window.location,p=`${m}//${h}/search/${n}?${r?.toString()}`;i(p)},[n,r]);const c=f.useMemo(()=>encodeURIComponent(a?I2(decodeURIComponent(o)):""),[o,a]),u=f.useMemo(()=>t!=null?`Perplexity AI: ${t}`:"Perplexity AI",[t]),d=f.useMemo(()=>B("transition-all duration-300 opacity flex items-center gap-x-xs md:gap-x-0",{"opacity-0":!e,"opacity-100":e}),[e]);return l.jsx("div",{className:d,children:e&&l.jsx(F9t,{descriptionText:u,sharableURL:c,isNativeMobileVariant:s})})}),WU=A.memo(({isBookmarked:e,handleAddBookmark:t,handleRemoveBookmark:n,size:r="small",isNativeMobileVariant:s=!1})=>{const{$t:a}=X(),{isMobileStyle:o}=Ce(),i={icon:e?Kre:d8,size:r,testId:"article-bookmark-button",toolTip:a(e?{defaultMessage:"Bookmarked",id:"k0fraU5NBY"}:{defaultMessage:"Bookmark",id:"Rs4kCECwJ8"}),onClick:e?n:t};return s&&o?l.jsx(ye,{...i,variant:"common",pill:!0}):l.jsx(ke,{...i,pill:!0,variant:"common"})});WU.displayName="BookmarkButton";const p3e=A.memo(({currentTitle:e,isBookmarked:t,effectiveCollection:n,onDelete:r,onAddToSpace:s,onSwapSpace:a,onRemoveFromSpace:o,onConvertToArticle:i,onRename:c,isConverting:u,showConvertThreadToArticle:d,rwToken:m,onBookmark:h,onRemoveBookmark:p,showBookmarkButton:g,onRemoveExpiration:y,showExportButton:v})=>{const x=ms(),b=Je(),_=Ot(),w=Ht(),{firstResult:{backend_uuid:S,status:C,context_uuid:E,privacy_state:M,thread_access:T,thread_title:I,author_image:j,thread_url_slug:N,expiry_time:P,query_str:R}={},inFlight:k}=zt(),{isMax:O,isPro:L}=Nt(),F=C===dr.PENDING,U=M===mh.INCOGNITO;return l.jsxs("div",{className:"px-md py-sm flex h-full items-center justify-between",children:[l.jsx("div",{className:"pointer-events-auto flex min-w-0 flex-1 items-center",children:l.jsx(Cn,{user:j??(b&&k?_?.user?.image??void 0:void 0),showProBadge:L,showMaxBadge:O,size:"medium"})}),l.jsxs("div",{className:"gap-sm pointer-events-auto flex items-center",children:[g&&l.jsx(WU,{isBookmarked:t,handleAddBookmark:h,handleRemoveBookmark:p,isNativeMobileVariant:!0}),!U&&!F&&l.jsx(h3e,{visible:!!N,tweetDescriptionText:I||R,threadSharedSlug:N??void 0,urlSearchParams:w,isNativeMobileVariant:!0}),l.jsx(BM,{className:"ml-sm",isNativeMobileVariant:!0,title:e,show:x&&!F,isBookmarked:t,onDelete:r,onAddToSpace:s,onSwapSpace:a,onRemoveFromSpace:o,currentSpace:n,onConvertToArticle:i,onRename:c,isConverting:u,showConvertThreadToArticle:d,rwToken:m??void 0,contextUUID:E,threadAccess:T,collectionSlug:n?.slug,type:U?ei.INCOGNITO_SEARCH:ei.SEARCH,firstResultBackendUUID:v?S:void 0,onBookmark:t?p:h,showBookmarkButton:!1,onRemoveExpiration:y,expiry:P,threadId:N??"",isIncognitoThread:U})]})]})});p3e.displayName="CometMobileHeader";var P6={},Rne;function U9t(){return Rne||(Rne=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="code-fork",r=448,s=512,a=[],o="e13b",i="M80 112a32 32 0 1 0 0-64 32 32 0 1 0 0 64zm80-32c0 35.8-23.5 66.1-56 76.3l0 35.7c0 22.1 17.9 40 40 40l160 0c22.1 0 40-17.9 40-40l0-35.7c-32.5-10.2-56-40.5-56-76.3c0-44.2 35.8-80 80-80s80 35.8 80 80c0 35.8-23.5 66.1-56 76.3l0 35.7c0 48.6-39.4 88-88 88l-56 0 0 75.7c32.5 10.2 56 40.5 56 76.3c0 44.2-35.8 80-80 80s-80-35.8-80-80c0-35.8 23.5-66.1 56-76.3l0-75.7-56 0c-48.6 0-88-39.4-88-88l0-35.7C23.5 146.1 0 115.8 0 80C0 35.8 35.8 0 80 0s80 35.8 80 80zm208 32a32 32 0 1 0 0-64 32 32 0 1 0 0 64zM256 432a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faCodeFork=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(P6)),P6}var B9t=U9t(),R6={},Ine;function V9t(){return Ine||(Ine=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="far",n="eye",r=576,s=512,a=[128065],o="f06e",i="M288 80c-65.2 0-118.8 29.6-159.9 67.7C89.6 183.5 63 226 49.4 256c13.6 30 40.2 72.5 78.6 108.3C169.2 402.4 222.8 432 288 432s118.8-29.6 159.9-67.7C486.4 328.5 513 286 526.6 256c-13.6-30-40.2-72.5-78.6-108.3C406.8 109.6 353.2 80 288 80zM95.4 112.6C142.5 68.8 207.2 32 288 32s145.5 36.8 192.6 80.6c46.8 43.5 78.1 95.4 93 131.1c3.3 7.9 3.3 16.7 0 24.6c-14.9 35.7-46.2 87.7-93 131.1C433.5 443.2 368.8 480 288 480s-145.5-36.8-192.6-80.6C48.6 356 17.3 304 2.5 268.3c-3.3-7.9-3.3-16.7 0-24.6C17.3 208 48.6 156 95.4 112.6zM288 336c44.2 0 80-35.8 80-80s-35.8-80-80-80c-.7 0-1.3 0-2 0c1.3 5.1 2 10.5 2 16c0 35.3-28.7 64-64 64c-5.5 0-10.9-.7-16-2c0 .7 0 1.3 0 2c0 44.2 35.8 80 80 80zm0-208a128 128 0 1 1 0 256 128 128 0 1 1 0-256z";e.definition={prefix:t,iconName:n,icon:[r,s,a,o,i]},e.faEye=e.definition,e.prefix=t,e.iconName=n,e.width=r,e.height=s,e.ligatures=a,e.unicode=o,e.svgPathData=i,e.aliases=a}(R6)),R6}var $9t=V9t();const W9t=e=>e&&(e.viewCount>0||e.forkCount>0),g3e=A.memo(({textVariant:e="small"})=>{const{socialStats:t,firstResult:n}=zt(),{$t:r}=X(),s=t&&t.viewCount>0,a=t&&t.forkCount>0;return!n?.backend_uuid||!s&&!a?null:l.jsxs(z,{className:"gap-x-sm flex items-center",children:[s&&l.jsx(bn,{tooltipText:r({defaultMessage:"Views",id:"akF0LyBDxT"}),tooltipLayout:"bottom",asChild:!0,children:l.jsxs(D,{variant:e,color:"light",className:"gap-x-xs flex items-center",children:[l.jsx(xt,{className:"-translate-y-px",size:"sm",icon:$9t.faEye}),l.jsx("span",{children:MP(t.viewCount)})]})}),a&&l.jsx(bn,{tooltipText:r({defaultMessage:"Follow-ups Asked",id:"DDyRtVl03r"}),tooltipLayout:"bottom",asChild:!0,children:l.jsxs(D,{variant:e,color:"light",className:"gap-x-xs flex items-center",children:[l.jsx(xt,{className:"-translate-y-px",size:"sm",icon:B9t.faCodeFork}),l.jsx("span",{children:MP(t.forkCount)})]})})]})});g3e.displayName="ThreadSocialData";const H9t=()=>{const{$t:e}=X();return[{name:"google_drive",title:lh,avatarSrc:DS},{name:"onedrive",title:ch,avatarSrc:US},{name:"sharepoint",title:uh,avatarSrc:BS},{name:"web",title:"Web",icon:A0},{name:"scholar",title:e({defaultMessage:"Scholar",id:"vzzehe/j6l"}),icon:G_},{name:"social",title:e({defaultMessage:"Social",id:"qOLogguG/7"}),icon:kre},{name:"edgar",title:sie,icon:Tre},{name:"wiley",title:NO,avatarSrc:LS},{name:"crunchbase",title:kO,avatarSrc:TO},{name:"notion",title:hu,avatarSrc:wv},{name:"org",title:e({defaultMessage:"Org files",id:"iWDsD738/m"}),icon:Mre},{name:"box",title:$S,avatarSrc:VS},{name:"factset",title:MO,avatarSrc:EO},{name:"gcal",title:_v,avatarSrc:FS},{name:"my_files",title:e({defaultMessage:"My files",id:"bYbrKKlKgS"}),icon:Ere},{name:"dropbox",title:dh,avatarSrc:AO}]},y3e=A.memo(({sources:e})=>{const t=H9t(),n=3,r=e.slice(n).map(s=>t.find(o=>o.name===s)?.title).join(", ");return l.jsxs("div",{className:"flex items-center",children:[e.slice(0,n).map(s=>{const a=t.find(o=>o.name===s);return a?l.jsx(v3e,{imgSrc:a.avatarSrc,icon:a.icon,title:a.title},s):null}),e.length>n&&l.jsx(HU,{tooltipText:r,children:l.jsxs(D,{variant:"micro",color:"light",className:"flex size-4 cursor-default items-center justify-center",children:["+",e.length-n]})})]})});y3e.displayName="ThreadSourcesList";const HU=A.memo(({children:e,tooltipText:t})=>l.jsx(bn,{tooltipText:t,asChild:!0,tooltipLayout:"bottom",children:l.jsx(z,{variant:"offset",className:"-ml-xs !ring-inverse relative aspect-square shrink-0 rounded-full p-0.5 ring-[1.5px] first:ml-0",children:e})}));HU.displayName="SourceIconWrapper";const v3e=A.memo(({imgSrc:e,icon:t,title:n})=>l.jsx(HU,{tooltipText:n,children:t?l.jsx(be,{icon:t,className:"text-quiet size-4"}):l.jsx("img",{src:e,alt:n,className:"size-4 rounded-full object-cover"})}));v3e.displayName="SourceIcon";const x3e=A.memo(({authorUsername:e,threadAccess:t,authorImage:n,authorId:r,isIncognitoThread:s,collection:a})=>{const o=Je(),i=!e&&!o&&!s,[c,u]=f.useState(!1),d=ea({reason:"thread-context"}),[m,h]=f.useState(!1),{inFlight:p,firstResult:{expiry_time:g,updated_datetime:y}={}}=zt(),v=!i,x=a?.user_permission&&_h(a.user_permission),b=g&&h_(g)&&!s&&!a&&!m,{$t:_}=X(),w=d&&status===dr.PENDING?void 0:n,S=f.useCallback(()=>{u(!0)},[]),C=f.useMemo(()=>l.jsx(b3e,{authorUsername:e,authorId:r,updatedTimestamp:y??"",expiryTimestamp:g??"",threadAccess:t,isAnon:i,isIncognitoThread:s,isInFlight:p,setHasRemovedExpiration:h,hasRemovedExpiration:m}),[r,e,g,p,i,s,t,y,m]),E=f.useCallback(()=>{u(!1)},[]);return l.jsxs("div",{className:"gap-sm flex min-w-0 items-center",children:[v&&l.jsx(ci,{onOpen:S,onClose:E,content:C,placement:"bottom-start",childrenClassName:"inline-flex pb-xs -mb-xs",children:l.jsxs("div",{className:"group relative flex cursor-pointer items-center gap-0.5",children:[l.jsx(z,{variant:"transparent",className:B("group-hover:!bg-offsetPlus absolute -inset-[3px] rounded-full duration-150",{"!bg-offsetPlus":c})}),l.jsxs("div",{className:"relative isolate flex items-center gap-0",children:[l.jsx(Cn,{user:w??void 0,size:"small",className:"relative z-10 [&>*]:size-6"}),b&&l.jsx(z,{variant:c?"offsetPlus":"background",className:B("group-hover:bg-offsetPlus absolute bottom-1.5 right-0 z-20 flex shrink-0 translate-x-1/2 translate-y-1/2 items-center justify-center rounded-full p-[0.5px] duration-150"),children:l.jsx(qre,{size:16,className:"text-quiet relative"})})]}),!b&&l.jsx(Zr,{className:B("group-hover:text-quiet relative size-3 transition-all duration-150",{"text-quiet":c,"text-quietest":!c})})]})}),a&&!x&&l.jsx(bn,{tooltipText:_({defaultMessage:"Part of the {collectionTitle} Space",id:"eNL1YKIijb"},{collectionTitle:a.title}),asChild:!0,children:l.jsx(at,{href:`/spaces/${a.slug}`,className:"inline-flex",children:l.jsxs(z,{variant:"background",bgHover:"offset",className:B("pr-sm hover:ring-offset-offset ring-offset-inverse ring-offset gap-xs @[1100px]/main:max-w-[80px] @[1200px]/main:max-w-[160px] relative z-20 flex h-6 max-w-[80px] shrink-0 items-center justify-center rounded-full ring-[1px] ring-offset-1",{"pl-0.5":a.emoji,"pl-sm":!a.emoji}),children:[l.jsx(z,{className:"flex size-5 items-center justify-center rounded-full",variant:a.emoji?"transparent":"offset",children:a.emoji?l.jsx(Ru,{unified:a.emoji,size:"tiny"}):l.jsx(ya,{size:12,className:"text-quiet relative"})}),l.jsx(D,{variant:"tiny",color:"light",className:"min-w-0 flex-1 truncate",children:a.title})]})})})]})});x3e.displayName="ThreadAuthorInfo";const b3e=A.memo(({authorUsername:e,authorId:t,updatedTimestamp:n,expiryTimestamp:r,threadAccess:s,isAnon:a,isIncognitoThread:o,isInFlight:i,setHasRemovedExpiration:c,hasRemovedExpiration:u})=>{const{locale:d}=X(),m=Ot(),{socialStats:h,firstResult:{sources:p,backend_uuid:g}={sources:[],backend_uuid:""}}=zt(),y=Ec(),v=n.endsWith("Z")?n:`${n}Z`,x=r.endsWith("Z")?r:`${r}Z`,b=new Date(v),_=b.toLocaleDateString(d,{year:"numeric",month:"long",day:"numeric"}),w=b.toLocaleString(d,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),S=x?new Date(x).toLocaleString(d,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}):"",C=X(),E=new Date(x),M=AC(C,E,{style:"short",numeric:"auto"}),T=R9(b),I=t===m?.user?.id,{$t:j}=X(),N=p?.sources,P=N&&N.length>0&&!(N.length===1&&N[0]==="web"),R=f.useMemo(()=>l.jsx(bn,{tooltipText:S,tooltipLayout:"bottom",children:M}),[S,M]),k=f.useCallback(()=>{g&&(gC(g),c(!0))},[g,c]),O=f.useMemo(()=>({delayDuration:0,arrowClassName:" ",offset:4}),[]),L=s3e();return l.jsxs("div",{className:"flex flex-col divide-y",children:[o&&l.jsx(Uc,{children:l.jsxs(D,{variant:"tinyRegular",color:"light",className:"gap-xs flex items-center",children:[l.jsx("div",{className:"inline-flex opacity-70",children:l.jsx(Uu,{size:"tiny",inverse:!0})}),j({defaultMessage:"Incognito Thread",id:"0iMI59SVV3"})]})}),r&&h_(r)&&!u&&!o&&l.jsxs(Uc,{children:[l.jsxs(D,{variant:"tiny",className:"flex items-center gap-0.5",children:[j({defaultMessage:"Temporary Thread",id:"YuuBvz04y+"}),l.jsx(bn,{tooltipText:L,tooltipLayout:"right",asChild:!0,delayDuration:0,children:l.jsx("span",{children:l.jsx(be,{icon:Dke,size:"2xs",className:"text-quiet opacity-60 duration-150 hover:opacity-100"})})})]}),!y&&l.jsx(ke,{size:"tiny",onClick:k,icon:Yre,pill:!0,extraCSS:"-mr-xs",toolTip:j({defaultMessage:"Remove Expiration",id:"N4qHoBsI8d"}),tooltipLayout:"right",tooltipProps:O})]}),!o&&e&&l.jsx(Uc,{leading:j({defaultMessage:"Created by",id:"p4mBmLaKhc"}),trailing:I?j({defaultMessage:"{author} (You)",id:"QbgjmmII2s"},{author:e}):e}),r&&h_(r)?l.jsx(Uc,{leading:j({defaultMessage:"Expires",id:"xhQMeQjkbK"}),trailing:R}):l.jsx(Uc,{leading:j({defaultMessage:"Last Updated",id:"EeRwjEG9ge"}),trailing:h_(n)?l.jsx(bn,{tooltipText:w,tooltipLayout:"bottom",children:T?j({defaultMessage:"Today",id:"zWgbGgjUUg"}):_}):i?j({defaultMessage:"Just now",id:"bxv59Vvssz"}):"-"}),P&&l.jsx(Uc,{leading:j({defaultMessage:"{n, plural, one {Source} other {Sources}}",id:"Qe5RCQLzVg"},{n:N.length}),children:l.jsx(D,{variant:"tinyRegular",children:l.jsx(y3e,{sources:N})})}),!a&&YHe(s??0)&&!o&&W9t(h)&&l.jsx(Uc,{children:l.jsx(g3e,{textVariant:"tiny"})})]})});b3e.displayName="InfoMenu";const Uc=A.memo(({leading:e,trailing:t,children:n})=>l.jsxs(z,{className:"mx-sm group/row flex h-8 items-center justify-between gap-[12px]",children:[e&&l.jsx(D,{variant:"tinyRegular",color:"light",children:e}),n,t&&l.jsx(D,{variant:"tiny",className:"text-right",children:t})]}));Uc.displayName="InfoMenuRow";const _3e=A.memo(({isOpen:e,onClose:t,onSave:n,defaultTitle:r})=>{const{$t:s}=X(),[a,o]=f.useState(r??""),i=f.useCallback(()=>{n(a),t()},[a,t,n]),c=f.useRef(null),u=g=>{o(g)},d=g=>{g.key==="Enter"&&i()},m=f.useMemo(()=>[{text:s({defaultMessage:"Save",id:"jvo0vs3nF0"}),variant:"primary",onClick:i,testId:"thread-rename-save"}],[s,i]),{isMobileUserAgent:h,isMobileStyle:p}=Ce();return l.jsx(rn,{isOpen:e,title:s({defaultMessage:"Edit Thread Title",id:"lv9nkrxVPt"}),onClose:t,actionList:m,children:l.jsx(fF,{size:"large",inputRef:c,children:l.jsx(mF,{isMobileUserAgent:h,isMobileStyle:p,placeholder:s({defaultMessage:"What's your Thread about?",id:"bq3jzjDvHH"}),value:a,onChange:u,autoFocus:!0,onKeyDown:d,ref:c,testId:"thread-rename-input"})})})});_3e.displayName="ThreadTitleEditModal";async function z9t({contextUUID:e,title:t,rwToken:n,callback:r,reason:s}){try{const a=await ne.POST("/rest/thread/set_thread_title",s,{body:{context_uuid:e,title:t,read_write_token:n},headers:{"Content-Type":"application/json"}});r?.(a)}catch(a){r?.(a)}}const w3e=A.memo(()=>{const e="thread-header-v2",{$t:t}=X(),[n,r]=f.useState(!1),s=f.useRef(void 0),a=At(),o=ms(),i=Je(),{firstResult:{backend_uuid:c,status:u,frontend_context_uuid:d,collection_info:m,query_str:h,context_uuid:p,privacy_state:g,bookmark_state:y,thread_access:v,thread_title:x,author_username:b,author_image:_,author_id:w,thread_url_slug:S,expiry_time:C}={},inFlight:E}=zt(),M=u===dr.PENDING,T=Ot(),{collections:I}=NM({autoFetch:!M,reason:e}),j=vo(),{deleteThread:N}=X1({reason:e}),{openModal:P,closeModal:R}=_t(),{openVisitorLoginUpsell:k}=$n({enabled:!i}),{removeThreadFromCollection:O,swapThreadCollection:L,firstTimeBookmark:F}=Sp({reason:e}),U=W6t(),{openAddToCollectionModal:V}=a3e({entryUUID:c,frontendContextUUID:d,existingCollection:m,existingFirstThreadQuery:h,filterOnSearchTerm:!0,reason:e}),W=$9(),{handleCreateNewSpaceForThread:H}=V9(),{trackEvent:G}=Te(),{allowArticleCreation:K}=js({reason:e}),{isMobileStyle:$}=Ce(),q=g===mh.INCOGNITO,Z=y==="BOOKMARKED",{handleAppDownloadClicked:se}=J0("mobile-header"),{mwebUpsellWhatsApp:Y,loadingMwebUpsellWhatsApp:Q}=t1(),re=e1({origin:"mobile-header"}),te=Ht(),[le,ie]=f.useState(x??h??""),pe=!M&&!q&&c!=null;lde({currentAccessLevel:v??rie,onClick:Rn,isCollection:!1,isPage:!1,reason:e}),!M&&m!==void 0&&(s.current=m);const me=M?s.current:m;f.useEffect(()=>{le===""&&ie(x??h??"")},[x,h,le]);const de=f.useCallback(()=>{c&&(G("delete thread from search result page click",{entryUUID:c}),N({entryUUID:c,callback:()=>a.push("/",void 0,"Delete thread")}))},[N,c,a,G]),ve=f.useCallback(()=>{if(!i){k({title:t({defaultMessage:"Sign in to bookmark your answers for later",id:"17vuOGPSKO"}),origin:Be.THREAD_BOOKMARK_BUTTON,sheetModalVariant:"bottom-sheet-gradient"});return}if(Z||!c)return;p&&G("click add thread to space",{contextUUID:p,isBookmark:!0});const kt=I.find(Kt=>_h(Kt.user_permission));kt===void 0?F({entryUUID:c,frontendContextUUID:d}):L({entryUUID:c,newCollectionTitle:kt.title,newCollectionUUID:kt.uuid,newCollectionSlug:kt.slug,newCollectionAccess:kt.access,frontendContextUUID:d,newCollectionEmoji:kt.emoji??null,currentCollectionUUID:null,existingCollectionSlug:null,closeModal:Rn,callback:()=>{U()},newCollectionUserPermission:kt.user_permission})},[i,Z,c,G,p,I,k,t,F,d,L,U]),Ae=f.useCallback(kt=>{if(kt==="add"&&p)G("click add thread to space",{contextUUID:p,isBookmark:!1});else{if(!d){ee.error("[ThreadHeader] frontendContextUUID is undefined");return}if(!c){ee.warn("[ThreadHeader] backend_uuid is undefined");return}W?H(c,d):P("collectionSelectModal",{entryUUID:c,currentCollection:me??null,searchTerm:h,frontendContextUUID:d})}p&&G("click swap thread space",{contextUUID:p,isFromBookmark:me?_h(me.user_permission):!1,collectionUUID:me?.uuid}),i?V():k({title:t({defaultMessage:"Sign in to bookmark your answers for later",id:"17vuOGPSKO"}),origin:Be.COLLECTIONS,sheetModalVariant:"bottom-sheet-gradient"})},[G,c,me,i,P,t,V,k,p,h,d,W,H]),Se=f.useCallback(()=>{if(!i)P("loginModal",{pitchMessage:{title:t({defaultMessage:"Sign in to create a {page}",id:"MsQ6yWbdOY"},{page:"Page"})},origin:Be.THREAD_TO_ARTICLE});else{r(!0);const kt=Sa();p&&G("click convert thread to page",{oldContextUUID:p,newFrontendContextUUID:kt});const Kt=new URLSearchParams({newFrontendContextUUID:kt,existingResultsCacheUUID:d??"",existingContextBackendUUID:p??"",existingBackendUUID:c??"",...me&&{collectionSlug:me.slug}}),xe=new URL(window.location.href);xe.pathname="page/new",xe.search=Kt.toString();const qe=xe.toString();a.push(qe)}},[i,P,t,p,d,c,me,a,G]),[De,Ne]=f.useState(!1),Pe=f.useCallback(kt=>{const Kt=me?.uuid;if(!p||!c){ee.error("[ThreadHeader] missing frontendContextUUID or entryUUID");return}if(!Kt){ee.warn("[ThreadHeader] oldCollectionUUID is undefined");return}if(!m?.uuid){ee.warn("[ThreadHeader] collectionUUID is undefined");return}G("click remove thread from space",{contextUUID:p,collectionUUID:Kt,isBookmark:kt==="remove bookmark"}),O({entryUUID:c,oldCollectionUUID:Kt,callback:()=>{R(),U()},frontendContextUUID:d})},[c,R,m?.uuid,p,me?.uuid,d,U,O,G]),dt=z9t,et=f.useCallback((kt,Kt)=>{if(!kt||kt===Pue){ee.warn("Empty title callback.");return}if(!p){ee.warn("No thread UUID found.");return}if(!j){ee.warn("No write token found.");return}dt({contextUUID:p,title:kt,rwToken:j,callback:Kt,reason:e})},[p,j,dt]),Et=K&&!$&&!M&&!q,ue=!M&&!q&&o,Ue=$&&!M,Ct=f.useCallback(kt=>{et(kt,()=>{Ne(!1),ie(kt)})},[et]),Ye=f.useCallback(()=>{window.document.body.click(),Ne(!0)},[]),mt=f.useCallback(()=>{a.push("/",void 0,"New thread button")},[a]),We=f.useCallback(()=>Ae("add"),[Ae]),Oe=f.useCallback(()=>Ae("swap"),[Ae]),Tt=f.useCallback(()=>Pe("remove"),[Pe]),$e=f.useCallback(()=>Pe("remove bookmark"),[Pe]),{viewTitle:ct}=LM(),{isSidebarPinned:yt}=hn(),ht=11,ut=f.useCallback(()=>{if(Y){re();return}G("clicked open in app button in mweb thread header",{}),se()},[se,re,Y,G]),fn=f.useCallback(()=>{c&&gC(c)},[c]),wr=f.useCallback(()=>Ne(!1),[]),sn=fle();return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:B("h-headerHeight bg-base pointer-events-none absolute left-0 top-0 z-10 duration-150 md:mb-0 md:rounded-t-xl md:bg-transparent",{"max-[1224px]:md:bg-base":yt,"max-[970px]:md:bg-base":!yt}),style:{right:$?0:ht},children:sn?l.jsx(p3e,{currentTitle:le,isBookmarked:Z,effectiveCollection:me??null,onDelete:de,onAddToSpace:We,onSwapSpace:Oe,onRemoveFromSpace:Tt,onConvertToArticle:Se,onRename:Ye,isConverting:n,showConvertThreadToArticle:Et,rwToken:j??null,onBookmark:ve,onRemoveBookmark:$e,showBookmarkButton:ue,onRemoveExpiration:fn,showExportButton:pe}):l.jsxs("div",{className:"gap-x-md px-md py-sm flex h-full items-center justify-between",children:[l.jsxs("div",{className:"pointer-events-auto relative flex items-center",children:[l.jsx("div",{className:"-inset-xs absolute hidden rounded-lg backdrop-blur-sm md:block",children:l.jsx(z,{className:"rounded-inherit absolute inset-0 opacity-85",variant:"background"})}),$?l.jsxs("div",{className:"gap-x-sm flex items-center",children:[l.jsx(q9,{className:"-ml-sm"}),l.jsx(ye,{variant:"common",size:"small",icon:mr,text:t({defaultMessage:"New",id:"bW7B87wFFp"}),onClick:mt})]}):l.jsx(x3e,{authorUsername:b??null,threadAccess:v??0,authorImage:_??(i&&E?T?.user?.image??null:null),authorId:w??"",isIncognitoThread:q,collection:me??null,privacyState:g})]}),ct&&l.jsx("div",{className:B("fade-in animate-in hidden min-w-0 flex-1 duration-150 md:block",{"@[900px]/main:md:hidden":!me,"@[1056px]/main:md:hidden":!!me}),children:l.jsx(D,{className:"truncate whitespace-nowrap",variant:"baseSemi",children:ct})}),l.jsxs("div",{className:"gap-x-sm pointer-events-auto relative flex items-center",style:{marginRight:$?0:-11},children:[l.jsx("div",{className:"-inset-xs absolute hidden rounded-lg backdrop-blur-sm md:block",children:l.jsx(z,{className:"rounded-inherit absolute inset-0 opacity-85",variant:"background"})}),l.jsxs("div",{className:"relative flex items-center",onClick:kt=>kt.stopPropagation(),children:[l.jsx(BM,{title:le,show:o&&!M,isBookmarked:Z,onDelete:de,onAddToSpace:We,onSwapSpace:Oe,onRemoveFromSpace:Tt,currentSpace:me??null,onConvertToArticle:Se,onRename:Ye,isConverting:n,showConvertThreadToArticle:Et,rwToken:j,contextUUID:p,threadAccess:v,collectionSlug:me?.slug,type:q?ei.INCOGNITO_SEARCH:ei.SEARCH,firstResultBackendUUID:pe?c:void 0,onBookmark:Z?$e:ve,showBookmarkButton:ue,onRemoveExpiration:fn,expiry:C,threadId:S??"",isIncognitoThread:q}),ue&&!$&&l.jsx(WU,{isBookmarked:Z,handleAddBookmark:ve,handleRemoveBookmark:$e})]}),!q&&!M&&l.jsx(h3e,{visible:!!S,tweetDescriptionText:x||h,threadSharedSlug:S??void 0,urlSearchParams:te}),Ue&&!Q&&l.jsx(rc,{isSamsungBrowser:!0,isComet:!0,isFirefoxDefaultSearch:!0,children:l.jsx("div",{className:"animate-in fade-in duration-300",children:l.jsx(ye,{size:"small",variant:"primary",text:t(Y?{defaultMessage:"Ask in WhatsApp",id:"8QxwIbOYLa"}:{defaultMessage:"Open in App",id:"fo3x6hDxdZ"}),onClick:ut})})})]})]})}),De&&l.jsx(_3e,{isOpen:De,onClose:wr,onSave:Ct,defaultTitle:le})]})});w3e.displayName="ThreadHeaderV2";const S3e=A.memo(({children:e,className:t,innerClassName:n})=>l.jsx("div",{className:B("px-md md:px-lg",t),children:l.jsx("div",{className:B("max-w-threadContentWidth mx-auto",n),children:e})}));S3e.displayName="ThreadSectionWrapper";var jne={};const G9t=ge(async()=>{const{SearchLoadingComponent:e}=await oe(async()=>{const{SearchLoadingComponent:t}=await import("./search-loading-component-Hn_dhMZO.js");return{SearchLoadingComponent:t}},__vite__mapDeps([182,1,2,5,4,3]));return{default:e}}),q9t=A.memo(()=>l.jsx(UM,{})),Hj=A.memo(e=>{const t=Pt(),[n,{height:r}]=tc();return l.jsx(Zs,{fallback:q9t,code:"SOMETHING_WENT_WRONG_ERROR",children:l.jsx(IEe,{children:l.jsx(OEe,{children:l.jsxs(U8t,{children:[l.jsxs(REe,{children:[l.jsx(w3e,{}),l.jsx("div",{className:"erp-sidecar:h-fit erp-sidecar:pb-0 mx-auto h-full",children:l.jsxs(z,{variant:"background",className:"relative",children:[l.jsx(S3e,{children:l.jsx($Me,{})}),l.jsx(VMe,{...e,lastResultBuffer:r})]})})]}),l.jsx(DEe,{ref:n},t)]})})})})});Hj.displayName="SearchContent";function K9t(e){const t=MHe(),{actions:{setCurrentThreadId:n}}=zt(),r=SHe(),s=EHe(),{data:a}=Ke({queryKey:["storedResults"],queryFn:()=>HC(),refetchOnMount:!0});f.useEffect(()=>{if(e.entries){e.entries.forEach(c=>{c.reconnectable&&!s(c.backend_uuid)&&r(c.backend_uuid)});const i=e.entries[0]?.context_uuid??ar();n(i),t(e.entries)}},[r,e.entries,t,n,s]);const o=f.useMemo(()=>{if(e.entries?.length)return e.entries;if(e.placeholderResults?.length)return e.placeholderResults;if(e.slugOrUUID){const i=a?.find(WC(e.slugOrUUID));if(i)return[i]}return ce},[e.placeholderResults,e.slugOrUUID,e.entries,a]);return f.useMemo(()=>({placeholderResults:o}),[o])}const C3e=A.memo(e=>{const{placeholderResults:t}=K9t(e);return MEe({confirmationRedirectsToHomepage:!1}),!t?.length&&e.skipLoadingUI!==!0?jne.NEXT_PUBLIC_IS_SIDECAR_BUILD?null:l.jsx(G9t,{slugOrUUID:e.slugOrUUID}):jne.NEXT_PUBLIC_IS_SIDECAR_BUILD?l.jsx(Hj,{...e,placeholderResults:t}):l.jsxs(l.Fragment,{children:[l.jsx(n1,{childrenWidth:"none",children:l.jsx(Hj,{...e,placeholderResults:t})}),l.jsx(PU,{})]})});C3e.displayName="SearchPage";const Y9t="streamId",Q9t=ge(async()=>{const{SearchLoadingComponent:e}=await oe(async()=>{const{SearchLoadingComponent:t}=await import("./search-loading-component-Hn_dhMZO.js");return{SearchLoadingComponent:t}},__vite__mapDeps([182,1,2,5,4,3]));return{default:e}});function X9t({active:e,query:t,copilot:n,source:r,streamId:s}){const a=f.useMemo(()=>t&&e?[BWe({query_str:t,frontend_uuid:s,query_source:r??"default_search",mode:n==="true"?"COPILOT":"CONCISE"})]:ce,[t,e,s,r,n]);return f.useMemo(()=>e?{hasFrontendUUID:!!s,placeholderResults:a}:void 0,[e,a,s])}function Z9t({active:e,frontendUUID:t}){const r=Ma().getState().streams,a=(e?r[t]:void 0)?.placeholderChunk,o=f.useMemo(()=>a?[a]:void 0,[a]);return f.useMemo(()=>e?{skipLoadingUI:!0,placeholderResults:o}:void 0,[e,o])}function J9t({active:e,slugOrUUID:t}){const n="search-components",r=At(),s=f.useMemo(()=>WC(t),[t]),o=Ma().getState().entries,i=e?Object.values(o).find(m=>m?.thread_url_slug===t||m?.backend_uuid===t):void 0,{data:c,error:u}=Zrt({slugOrUUID:t,enabled:!i&&e,reason:n});f.useEffect(()=>{c?.[0]&&Ohe(c[0])},[c]);const d=f.useMemo(()=>c?.length?c:i?[i]:ce,[c,i]);return f.useEffect(()=>{if(u){const m=HC();if(m.find(s)){const p=m.filter(g=>!s(g));Uv(p)}let h=null;u?.cause&&typeof u?.cause=="object"&&"error_code"in u.cause&&(u.cause.error_code===FG?(h=Pd.ThreadAccessNotAllowed,ee.error(FG,{error:u,slugOrUUID:t})):u.cause.error_code===wqe?(h=Pd.ThreadExpired,ee.error(u?.message,{error:u,slugOrUUID:t})):(h=Pd.InvalidThread,ee.error(u?.message,{error:u,slugOrUUID:t})),r.replace(`/?error=${h}&id=${t}`,"Search error"))}},[u,t,s,r]),f.useMemo(()=>e?{entries:d,slugOrUUID:t,hasError:!!u}:void 0,[e,d,u,t])}function e7t(){const{actions:{clearCurrentStreamId:e,clearCurrentThreadId:t}}=zt(),n=typeof window<"u",r=ul(),s=!!(r?.new&&r?.uuid&&n),a=!!(r?.new&&!r?.uuid&&n),o=!!(!r?.new&&r?.uuid&&n),i=n?new URLSearchParams(window.location.search):null,c=i?.get("q")??void 0,u=i?.get("copilot")??void 0,d=i?.get("source")??void 0,m=i?.get(Y9t),h=f.useMemo(()=>m??ar(),[m]),p=Z9t({active:s,frontendUUID:r?.uuid??""}),g=X9t({active:a,query:c,copilot:u,streamId:h,source:d}),y=J9t({active:o,slugOrUUID:r?.uuid??""});return f.useEffect(()=>()=>{e(),t()},[e,t]),f.useLayoutEffect(()=>{g?.hasFrontendUUID&&(e(),t())},[e,t,g?.hasFrontendUUID]),L8t(a,h,"new-query-search-components"),f.useMemo(()=>{if(s){const v=r?.uuid;if(!v||!Zre(v))return{component:l.jsx(jl,{to:"/"})}}else if(a){if(!c||c==="pending")return{component:l.jsx(jl,{to:"/"})}}else if(o){const v=r?.uuid;if(!v||v==="undefined")return{component:l.jsx(jl,{to:"/"})};if(y?.hasError)return null}else return n?{component:l.jsx(jl,{to:c?`/search/new${window.location.search}`:"/"})}:{component:l.jsx(Q9t,{})};return{props:{...p,...g,...y}}},[n,y,o,g,a,p,s,r?.uuid,c])}const E3e=A.memo(()=>{const e=e7t();return e?"component"in e?e.component:l.jsx(C3e,{...e.props}):null});E3e.displayName="SearchComponents";const t7t=["header","ask-input","mini-graphs","watchlist","market-summary","financial-profile"],Czt=["ask-input","mini-graphs","watchlist","financial-profile"],n7t=["header","schedule","standings"],r7t=["header","bracket"],One=["ask-input"],s7t=["thread-title"],a7t=["ask-input","article-list"],Lne=["topic-list"];function o7t(){return tn()?l.jsx(n1,{childrenWidth:"none",mobileHeader:!1,children:l.jsx(abe,{})}):l.jsx(jl,{to:"/"})}const i7t=ge(async()=>{const{CometZenMode:e}=await oe(async()=>{const{CometZenMode:t}=await import("./CometZenMode-Dcb53Qc3.js");return{CometZenMode:t}},__vite__mapDeps([183,1,2,66,184,4,5,3]));return{default:e,critical:!0}},{loading:()=>l.jsx("div",{className:"flex size-full items-center justify-center opacity-10",children:l.jsx(Ns,{})})}),l7t=ge(async()=>{const{TryAssistantPage:e}=await oe(async()=>{const{TryAssistantPage:t}=await import("./TryAssistantPage-BOFiNmgZ.js");return{TryAssistantPage:t}},__vite__mapDeps([185,1,2,3,4,5]));return{default:e,critical:!0}},{loading:()=>l.jsx("div",{className:"flex size-full items-center justify-center opacity-10",children:l.jsx(Ns,{})})}),c7t=ge(async()=>{const{VoiceToVoiceModal:e}=await oe(async()=>{const{VoiceToVoiceModal:t}=await import("./VoiceToVoiceModal-q9H0eJTi.js");return{VoiceToVoiceModal:t}},__vite__mapDeps([65,1,2,66,3,5,4]));return{default:e,critical:!0}},{loading:()=>l.jsx(T9,{})}),u7t=ge(async()=>{const{default:e}=await oe(async()=>{const{default:t}=await import("./library-PmS87Aw5.js");return{default:t}},__vite__mapDeps([186,1,2,3,4,5,187]));return{default:e,critical:!0}}),d7t=ge(async()=>{const{default:e}=await oe(async()=>{const{default:t}=await import("./index-DdGHYOFU.js");return{default:t}},__vite__mapDeps([188,1,2,3,189,5,14,4]));return{default:e,critical:!0}}),f7t=ge(async()=>{const{default:e}=await oe(async()=>{const{default:t}=await import("./templates-CWllxLbS.js");return{default:t}},__vite__mapDeps([190,1,2,3,4,5]));return{default:e,critical:!0}}),m7t=ge(async()=>{const{default:e}=await oe(async()=>{const{default:t}=await import("./slug-D2xAVHFR.js");return{default:t}},__vite__mapDeps([191,1,2,3,16,189,5,192,4,193,77,9,10,11]));return{default:e,critical:!0}}),Dne=ge(async()=>{const{ArticlePageLayout:e}=await oe(async()=>{const{ArticlePageLayout:t}=await import("./slug-CHUvmdw2.js").then(n=>n.s);return{ArticlePageLayout:t}},__vite__mapDeps([194,1,2,3,5,4,158,195,117,118,157,14,196,119,120,197,184,193,177,159,141,19,20,21,22,187,161,116,181]));return{default:e,critical:!0}}),h7t=ge(async()=>{const{AcademicLandingPage:e}=await oe(async()=>{const{AcademicLandingPage:t}=await import("./academic-Cm2FPWXE.js");return{AcademicLandingPage:t}},__vite__mapDeps([198,1,2,3,199,155,118,4,5,200,150,146,151,34]));return{default:e,critical:!0}}),p7t=ge(async()=>{const{ShoppingLandingPage:e}=await oe(async()=>{const{ShoppingLandingPage:t}=await import("./shopping-D94vBpHL.js");return{ShoppingLandingPage:t}},__vite__mapDeps([201,1,2,3,150,5,4,151,34,200,146,168,199,155,118,148]));return{default:e,critical:!0}}),g7t=ge(async()=>{const{HotelsSlugPage:e}=await oe(async()=>{const{HotelsSlugPage:t}=await import("./hotels-DFLPYIs_.js").then(n=>n.h);return{HotelsSlugPage:t}},__vite__mapDeps([202,2,1,3,150,5,4,203,197,171,73,145,45,23,156]));return{default:e,critical:!0}}),y7t=ge(async()=>{const{PerplexifyMeLandingPage:e}=await oe(async()=>{const{PerplexifyMeLandingPage:t}=await import("./perplexify_me-C3OmFCUK.js");return{PerplexifyMeLandingPage:t}},__vite__mapDeps([204,1,2,3,150,5,4]));return{default:e,critical:!0}}),v7t=ge(async()=>{const{TravelIndexPage:e}=await oe(async()=>{const{TravelIndexPage:t}=await import("./travel-BbtGx4rU.js");return{TravelIndexPage:t}},__vite__mapDeps([205,1,2,3,150,5,4,151,34,203,197,199,155,118,200,146]));return{default:e,critical:!0}}),Fne=ge(async()=>{const{DiscoverPage:e}=await oe(async()=>{const{DiscoverPage:t}=await import("./discover-DIya1y7X.js");return{DiscoverPage:t}},__vite__mapDeps([206,1,2,3,150,5,4,151,34,152,118,158,195,117,157,207]));return{default:e,critical:!0}}),x7t=ge(async()=>{const{F1MainPage:e}=await oe(async()=>{const{F1MainPage:t}=await import("./index-lgDZJvvb.js");return{F1MainPage:t}},__vite__mapDeps([208,1,2,3,150,5,4,203,197,209,210,211,212,213,214,215,216,200,118]));return{default:e,critical:!0}}),b7t=ge(async()=>{const{F1EventMainPage:e}=await oe(async()=>{const{F1EventMainPage:t}=await import("./events-BU9oJF1-.js");return{F1EventMainPage:t}},__vite__mapDeps([217,1,2,3,150,5,4,203,197,118,211,210,218,215,216,200,156]));return{default:e,critical:!0}}),_7t=ge(async()=>{const{NBAMainPage:e}=await oe(async()=>{const{NBAMainPage:t}=await import("./index-DohuUQve.js");return{NBAMainPage:t}},__vite__mapDeps([219,1,2,3,150,5,4,203,197,209,220,221,222,223,224,225,226,227,228,229,213,214,230]));return{default:e,critical:!0}}),w7t=ge(async()=>{const{NBAEventMainPage:e}=await oe(async()=>{const{NBAEventMainPage:t}=await import("./events-q6ZUl9Vp.js");return{NBAEventMainPage:t}},__vite__mapDeps([231,1,2,3,150,5,4,203,197,232,233,234,235,236,237,218,37,153,222,154,238,239,240,241,242,243,230,244,245,246,247,214,248,215,216,200,118,156]));return{default:e,critical:!0}}),S7t=ge(async()=>{const{NBATeamMainPage:e}=await oe(async()=>{const{NBATeamMainPage:t}=await import("./teams-xCSNWXxe.js");return{NBATeamMainPage:t}},__vite__mapDeps([249,1,2,3,150,5,4,203,197,230,250,235,236,237,239,242,243,234,233,218,37,153,222,154,245,246,247,214,224,225,220,156]));return{default:e,critical:!0}}),C7t=ge(async()=>{const{NBAPlayerMainPage:e}=await oe(async()=>{const{NBAPlayerMainPage:t}=await import("./players-dm0Fgebp.js");return{NBAPlayerMainPage:t}},__vite__mapDeps([251,1,2,3,150,5,4,203,197,252,222,243,200,156]));return{default:e,critical:!0}}),E7t=ge(async()=>{const{NFLMainPage:e}=await oe(async()=>{const{NFLMainPage:t}=await import("./index-a1zqcRd5.js");return{NFLMainPage:t}},__vite__mapDeps([253,1,2,3,150,5,4,203,197,236,239,228,223,229]));return{default:e,critical:!0}}),M7t=ge(async()=>{const{NFLEventMainPage:e}=await oe(async()=>{const{NFLEventMainPage:t}=await import("./events-D_2IQdvB.js");return{NFLEventMainPage:t}},__vite__mapDeps([254,1,2,3,150,5,4,203,197,234,233,235,236,237,218,37,153,222,154,238,239,241,242,243,230,244,246,247,214,248,215,216,200,118,156]));return{default:e,critical:!0}}),T7t=ge(async()=>{const{NFLTeamMainPage:e}=await oe(async()=>{const{NFLTeamMainPage:t}=await import("./teams-__eerHdb.js");return{NFLTeamMainPage:t}},__vite__mapDeps([255,1,2,3,150,5,4,203,197,236,239,233,153,156]));return{default:e,critical:!0}}),k7t=ge(async()=>{const{NFLPlayerMainPage:e}=await oe(async()=>{const{NFLPlayerMainPage:t}=await import("./players-BjbpMUSo.js");return{NFLPlayerMainPage:t}},__vite__mapDeps([256,1,2,3,150,5,4,203,197,250,235,236,237,239,252,222,243,200,156]));return{default:e,critical:!0}}),N7t=ge(async()=>{const{ChampionsLeagueMainPage:e}=await oe(async()=>{const{ChampionsLeagueMainPage:t}=await import("./index-CYohnnOU.js");return{ChampionsLeagueMainPage:t}},__vite__mapDeps([257,1,2,3,150,5,4,203,197,209,258,227,228,213,214,215,216,200,118,212,222]));return{default:e,critical:!0}}),A7t=ge(async()=>{const{ChampionsLeagueEventMainPage:e}=await oe(async()=>{const{ChampionsLeagueEventMainPage:t}=await import("./events-BMQB3I_s.js");return{ChampionsLeagueEventMainPage:t}},__vite__mapDeps([259,1,2,3,150,5,4,203,197,260,218,248,247,222,214,215,216,200,118,156]));return{default:e,critical:!0}}),P7t=ge(async()=>{const{MLBMainPage:e}=await oe(async()=>{const{MLBMainPage:t}=await import("./index-B9c2ltyV.js");return{MLBMainPage:t}},__vite__mapDeps([261,2,1,3,150,5,4,203,197,209,262,220,221,222,223,263,225,226,229,213,214,215,216,200,118,230]));return{default:e,critical:!0}}),R7t=ge(async()=>{const{MLBEventMainPage:e}=await oe(async()=>{const{MLBEventMainPage:t}=await import("./events-Bmr4WTTl.js");return{MLBEventMainPage:t}},__vite__mapDeps([264,1,2,3,150,5,4,203,197,260,265,262,220,221,222,223,263,225,226,238,234,233,235,236,237,218,37,153,154,215,216,200,118,156]));return{default:e,critical:!0}}),I6=ge(async()=>{const{CricketEventMainPage:e}=await oe(async()=>{const{CricketEventMainPage:t}=await import("./events-Dq1FjCGT.js");return{CricketEventMainPage:t}},__vite__mapDeps([266,1,2,3,150,5,4,203,197,265,218,215,216,200,118,267,156]));return{default:e,critical:!0}}),I7t=ge(async()=>{const{ICCMainPage:e}=await oe(async()=>{const{ICCMainPage:t}=await import("./index-Cd4akEh6.js");return{ICCMainPage:t}},__vite__mapDeps([268,1,2,3,150,5,4,203,197,209,220,222,226,215,216,200,118,267,156]));return{default:e,critical:!0}}),j7t=ge(async()=>{const{IPLMainPage:e}=await oe(async()=>{const{IPLMainPage:t}=await import("./index-DZ-p3f5N.js");return{IPLMainPage:t}},__vite__mapDeps([269,1,2,3,150,5,4,203,197,209,220,222,226,227,228,229,213,214,215,216,200,118,230]));return{default:e,critical:!0}}),O7t=ge(async()=>{const{PGAMainPage:e}=await oe(async()=>{const{PGAMainPage:t}=await import("./index-DWM9K0s8.js");return{PGAMainPage:t}},__vite__mapDeps([270,1,2,3,150,5,4,203,197,209,271,211,212,272,215,216,200,118,156]));return{default:e,critical:!0}}),L7t=ge(async()=>{const{PGAEventMainPage:e}=await oe(async()=>{const{PGAEventMainPage:t}=await import("./events-Bf1TW9Kc.js");return{PGAEventMainPage:t}},__vite__mapDeps([273,1,2,3,150,5,4,203,197,271,209,215,216,200,118,156]));return{default:e,critical:!0}}),D7t=ge(async()=>{const{EuropeanTourMainPage:e}=await oe(async()=>{const{EuropeanTourMainPage:t}=await import("./index-DWM9K0s8.js");return{EuropeanTourMainPage:t}},__vite__mapDeps([270,1,2,3,150,5,4,203,197,209,271,211,212,272,215,216,200,118,156]));return{default:e,critical:!0}}),F7t=ge(async()=>{const{EuropeanTourEventMainPage:e}=await oe(async()=>{const{EuropeanTourEventMainPage:t}=await import("./events-Bf1TW9Kc.js");return{EuropeanTourEventMainPage:t}},__vite__mapDeps([273,1,2,3,150,5,4,203,197,271,209,215,216,200,118,156]));return{default:e,critical:!0}}),U7t=ge(async()=>{const{WNBAMainPage:e}=await oe(async()=>{const{WNBAMainPage:t}=await import("./index-7nh7bYBY.js");return{WNBAMainPage:t}},__vite__mapDeps([274,1,2,3,150,5,4,203,197,209,229,213,214,215,216,200,118,230,220,221,222,223,263,225,226]));return{default:e,critical:!0}}),B7t=ge(async()=>{const{WNBAEventMainPage:e}=await oe(async()=>{const{WNBAEventMainPage:t}=await import("./events-wMxTn-Yh.js");return{WNBAEventMainPage:t}},__vite__mapDeps([275,1,2,3,150,5,4,203,197,232,234,233,235,236,237,218,37,153,222,154,238,239,241,242,243,230,215,216,200,118,247,214,156]));return{default:e,critical:!0}}),V7t=ge(async()=>{const{NCAAMEventMainPage:e}=await oe(async()=>{const{NCAAMEventMainPage:t}=await import("./events-CZmolcbx.js");return{NCAAMEventMainPage:t}},__vite__mapDeps([276,1,2,3,150,5,4,203,197,232,234,233,235,236,237,218,37,153,222,154,238,239,240,241,242,243,230,244,245,246,247,214,248,215,216,200,118,156]));return{default:e,critical:!0}}),$7t=ge(async()=>{const{NCAAWEventMainPage:e}=await oe(async()=>{const{NCAAWEventMainPage:t}=await import("./events-CZmolcbx.js");return{NCAAWEventMainPage:t}},__vite__mapDeps([276,1,2,3,150,5,4,203,197,232,234,233,235,236,237,218,37,153,222,154,238,239,240,241,242,243,230,244,245,246,247,214,248,215,216,200,118,156]));return{default:e,critical:!0}}),W7t=ge(async()=>{const{NCAAMMainPage:e}=await oe(async()=>{const{NCAAMMainPage:t}=await import("./index-i4fAJoYU.js");return{NCAAMMainPage:t}},__vite__mapDeps([277,1,2,3,150,5,4,203,197,209,258,227,228,213,214,215,216,200,118,156]));return{default:e,critical:!0}}),H7t=ge(async()=>{const{NCAAWMainPage:e}=await oe(async()=>{const{NCAAWMainPage:t}=await import("./index-i4fAJoYU.js");return{NCAAWMainPage:t}},__vite__mapDeps([277,1,2,3,150,5,4,203,197,209,258,227,228,213,214,215,216,200,118,156]));return{default:e,critical:!0}}),z7t=ge(async()=>{const{WTAMainPage:e}=await oe(async()=>{const{WTAMainPage:t}=await import("./index-DVIacTb4.js");return{WTAMainPage:t}},__vite__mapDeps([278,1,2,3,150,5,4,203,197,209,215,216,200,118,279,272,211,212,280,156]));return{default:e}}),G7t=ge(async()=>{const{ATPMainPage:e}=await oe(async()=>{const{ATPMainPage:t}=await import("./index-DVIacTb4.js");return{ATPMainPage:t}},__vite__mapDeps([278,1,2,3,150,5,4,203,197,209,215,216,200,118,279,272,211,212,280,156]));return{default:e}}),q7t=ge(async()=>{const{WTAEventMainPage:e}=await oe(async()=>{const{WTAEventMainPage:t}=await import("./events-CRP0quba.js");return{WTAEventMainPage:t}},__vite__mapDeps([281,1,2,3,150,5,4,203,197,260,215,216,200,118,282,227,228,238,234,233,235,236,237,218,37,153,222,154,247,214,280,156]));return{default:e,critical:!0}}),K7t=ge(async()=>{const{ATPEventMainPage:e}=await oe(async()=>{const{ATPEventMainPage:t}=await import("./events-CRP0quba.js");return{ATPEventMainPage:t}},__vite__mapDeps([281,1,2,3,150,5,4,203,197,260,215,216,200,118,282,227,228,238,234,233,235,236,237,218,37,153,222,154,247,214,280,156]));return{default:e,critical:!0}}),Y7t=ge(async()=>{const{ATPTournamentMainPage:e}=await oe(async()=>{const{ATPTournamentMainPage:t}=await import("./tournaments-skSI9_DP.js");return{ATPTournamentMainPage:t}},__vite__mapDeps([283,1,2,3,150,5,4,203,197,209,213,214,215,216,200,118,279,282,227,228,238,234,233,235,236,237,218,37,153,222,154,280,156]));return{default:e,critical:!0}}),Q7t=ge(async()=>{const{WTATournamentMainPage:e}=await oe(async()=>{const{WTATournamentMainPage:t}=await import("./tournaments-skSI9_DP.js");return{WTATournamentMainPage:t}},__vite__mapDeps([283,1,2,3,150,5,4,203,197,209,213,214,215,216,200,118,279,282,227,228,238,234,233,235,236,237,218,37,153,222,154,280,156]));return{default:e,critical:!0}}),X7t=ge(async()=>{const{FinanceRouter:e}=await oe(async()=>{const{FinanceRouter:t}=await import("./sub-router-DzcNugtq.js");return{FinanceRouter:t}},__vite__mapDeps([284,1,2,3,118,4,149,150,5,151,34,152,94,153,154,155,156,285,200,286,19,20,21,141,22]));return{default:e}}),Z7t=ge(async()=>{const{AccountPage:e}=await oe(async()=>{const{AccountPage:t}=await import("./index-Cbzd8BPB.js");return{AccountPage:t}},__vite__mapDeps([287,1,2,5,4,3]));return{default:e,critical:!0}}),J7t=ge(async()=>{const{AccountDetailsPage:e}=await oe(async()=>{const{AccountDetailsPage:t}=await import("./details-DMOvLw3x.js");return{AccountDetailsPage:t}},__vite__mapDeps([288,1,2,3,5,21,4]));return{default:e,critical:!0}}),eDt=ge(async()=>{const{AccountApiGroupPage:e}=await oe(async()=>{const{AccountApiGroupPage:t}=await import("./group-Bl763rX5.js");return{AccountApiGroupPage:t}},__vite__mapDeps([289,1,2,290,196,5,3,291,292,47,80,293,4,294,295]));return{default:e,critical:!0}}),tDt=ge(async()=>{const{AccountApiMembersPage:e}=await oe(async()=>{const{AccountApiMembersPage:t}=await import("./members-3BLaGjqY.js");return{AccountApiMembersPage:t}},__vite__mapDeps([296,1,2,290,196,5,3,291,297,4,294,293,295]));return{default:e,critical:!0}}),nDt=ge(async()=>{const{AccountApiBillingPage:e}=await oe(async()=>{const{AccountApiBillingPage:t}=await import("./billing-CgkpqSLT.js");return{AccountApiBillingPage:t}},__vite__mapDeps([298,1,2,290,196,5,3,286,291,4,292,47,80,293,295]));return{default:e,critical:!0}}),rDt=ge(async()=>{const{AccountApiKeysPage:e}=await oe(async()=>{const{AccountApiKeysPage:t}=await import("./keys-B7J02twp.js");return{AccountApiKeysPage:t}},__vite__mapDeps([299,1,2,290,196,5,3,291,294,293,4,295]));return{default:e,critical:!0}}),sDt=ge(async()=>{const{AccountApiLimitsPage:e}=await oe(async()=>{const{AccountApiLimitsPage:t}=await import("./limits-BjvawNr7.js");return{AccountApiLimitsPage:t}},__vite__mapDeps([300,1,2,290,196,5,3,295,4]));return{default:e,critical:!0}}),aDt=ge(async()=>{const{AccountApiFilesPage:e}=await oe(async()=>{const{AccountApiFilesPage:t}=await import("./files-sb7a_yan.js");return{AccountApiFilesPage:t}},__vite__mapDeps([301,1,2,290,196,5,3,294,293,4,295]));return{default:e,critical:!0}}),oDt=ge(async()=>{const{AccountApiFilesRepoPage:e}=await oe(async()=>{const{AccountApiFilesRepoPage:t}=await import("./files-repo-BZwcQyyF.js");return{AccountApiFilesRepoPage:t}},__vite__mapDeps([302,1,2,290,196,5,3,12,4,11,293,295]));return{default:e,critical:!0}}),iDt=ge(async()=>{const{ApiIndexPage:e}=await oe(async()=>{const{ApiIndexPage:t}=await import("./index-D9_Utnqp.js");return{ApiIndexPage:t}},__vite__mapDeps([303,1,2,290,196,5,295,4,3]));return{default:e,critical:!0}}),lDt=ge(async()=>{const{AccountProPerksPage:e}=await oe(async()=>{const{AccountProPerksPage:t}=await import("./pro-perks-gEhnTNSC.js");return{AccountProPerksPage:t}},__vite__mapDeps([304,1,2,290,196,5,3,305,4]));return{default:e,critical:!0}}),cDt=ge(async()=>{const{AccountProPerksDetailPage:e}=await oe(async()=>{const{AccountProPerksDetailPage:t}=await import("./pro-perks-detail-B0JFVFP9.js");return{AccountProPerksDetailPage:t}},__vite__mapDeps([306,1,2,290,196,5,3,19,20,4,21,305]));return{default:e,critical:!0}}),uDt=ge(async()=>{const{OrgIndexPage:e}=await oe(async()=>{const{OrgIndexPage:t}=await import("./index-f4uUNA_l.js");return{OrgIndexPage:t}},__vite__mapDeps([307,1,2,290,196,5,308,4,3]));return{default:e,critical:!0}}),dDt=ge(async()=>{const{OrgDetailsPage:e}=await oe(async()=>{const{OrgDetailsPage:t}=await import("./index-Czef56VG.js");return{OrgDetailsPage:t}},__vite__mapDeps([309,1,2,3,192,5,4,21,310,311,80,92,312,290,196,308]));return{default:e,critical:!0}}),fDt=ge(async()=>{const{OrgMembersPage:e}=await oe(()=>import("./members-BNfG6irp.js"),__vite__mapDeps([313,1,2,3,5,4,297,80,192,290,196,308]));return{default:e,critical:!0}}),mDt=ge(async()=>{const{OrgInsightsPage:e}=await oe(()=>import("./insights-7e2s34YY.js"),__vite__mapDeps([314,1,2,3,4,92,5,290,196,308]));return{default:e,critical:!0}}),hDt=ge(async()=>{const{OrgUserAccessPage:e}=await oe(()=>import("./user-access-D88OzYea.js"),__vite__mapDeps([315,1,2,3,5,4,92,311,290,196,308]));return{default:e,critical:!0}}),pDt=ge(async()=>{const{OrgPermissionsPage:e}=await oe(()=>import("./permissions-CgZmAQex.js"),__vite__mapDeps([316,1,2,3,310,5,312,290,196,308,4]));return{default:e,critical:!0}}),gDt=ge(async()=>{const{OrgFilesPage:e}=await oe(()=>import("./files-LrfzHJCf.js"),__vite__mapDeps([317,1,2,3,9,4,5,10,11,290,196,318,8,12,308]));return{default:e,critical:!0}}),yDt=ge(async()=>{const{OrgConnectorsPage:e}=await oe(()=>import("./connectors-CNed0Q11.js"),__vite__mapDeps([319,1,2,290,196,5,3,4,308]));return{default:e,critical:!0}}),vDt=ge(async()=>{const{AccountPurchasesPage:e}=await oe(async()=>{const{AccountPurchasesPage:t}=await import("./purchases-D9FFmZ3o.js");return{AccountPurchasesPage:t}},__vite__mapDeps([320,1,2,3,321,58,4,5]));return{default:e,critical:!0}}),xDt=ge(async()=>{const{AccountReservationsPage:e}=await oe(async()=>{const{AccountReservationsPage:t}=await import("./reservations-DOGGpJ1e.js");return{AccountReservationsPage:t}},__vite__mapDeps([322,1,2,3,321,60,5,4]));return{default:e,critical:!0}}),bDt=ge(async()=>{const{AccountTasksPage:e}=await oe(async()=>{const{AccountTasksPage:t}=await import("./index-DCTjGZsn.js");return{AccountTasksPage:t}},__vite__mapDeps([323,1,2,3,94,5,4,324,207]));return{default:e,critical:!0}}),_Dt=ge(async()=>{const{AccountTaskDetailsPage:e}=await oe(async()=>{const{AccountTaskDetailsPage:t}=await import("./task-BzCXC8sw.js");return{AccountTaskDetailsPage:t}},__vite__mapDeps([325,1,2,3,5,4]));return{default:e,critical:!0}}),wDt=ge(async()=>{const{AccountShortcutsPage:e}=await oe(async()=>{const{AccountShortcutsPage:t}=await import("./shortcuts-B0FJw54t.js");return{AccountShortcutsPage:t}},__vite__mapDeps([326,1,2,3,324,4,5]));return{default:e,critical:!0}}),SDt=ge(async()=>{const{AccountSiteInstructionsPage:e}=await oe(async()=>{const{AccountSiteInstructionsPage:t}=await import("./site-instructions-BBwmd8bl.js");return{AccountSiteInstructionsPage:t}},__vite__mapDeps([327,1,2,3,328,4,5]));return{default:e,critical:!0}}),CDt=ge(async()=>{const{AccountPreferencesPage:e}=await oe(async()=>{const{AccountPreferencesPage:t}=await import("./preferences-F4MqdxkW.js");return{AccountPreferencesPage:t}},__vite__mapDeps([329,1,2,3,4,5]));return{default:e,critical:!0}}),EDt=ge(async()=>{const{AccountPersonalizePage:e}=await oe(async()=>{const{AccountPersonalizePage:t}=await import("./personalize-DDumMHRF.js");return{AccountPersonalizePage:t}},__vite__mapDeps([330,1,2,3,5,4,121]));return{default:e,critical:!0}}),MDt=ge(async()=>{const{AccountNotificationsPage:e}=await oe(async()=>{const{AccountNotificationsPage:t}=await import("./notifications-6ZmFcs5e.js");return{AccountNotificationsPage:t}},__vite__mapDeps([331,1,2,3,28,5,4]));return{default:e,critical:!0}}),TDt=ge(async()=>{const{AccountFilesPage:e}=await oe(async()=>{const{AccountFilesPage:t}=await import("./files-CVJAm_Bm.js");return{AccountFilesPage:t}},__vite__mapDeps([332,1,2,3,318,8,9,4,5,10,11,12]));return{default:e,critical:!0}}),kDt=ge(async()=>{const{AccountConnectorsPage:e}=await oe(async()=>{const{AccountConnectorsPage:t}=await import("./connectors-CY5KecAo.js");return{AccountConnectorsPage:t}},__vite__mapDeps([333,2,1,5,4,3]));return{default:e,critical:!0}}),NDt=ge(async()=>{const{SportsLandingPage:e}=await oe(async()=>{const{SportsLandingPage:t}=await import("./index-BUzp9tgD.js");return{SportsLandingPage:t}},__vite__mapDeps([334,1,2,3,150,5,4,151,34,216,200,118,285,199,155,209,156]));return{default:e,critical:!0}});function ADt(){const e=At(),t=f.useCallback(()=>{e.push("/b/home",void 0,"voice to ntp")},[e]);return tn()?l.jsx(n1,{childrenWidth:"none",mobileHeader:!1,children:l.jsx(c7t,{isOpen:!0,onClose:t})}):l.jsx(jl,{to:"/"})}function PDt(){return tn()?l.jsx(i7t,{}):l.jsx(jl,{to:"/"})}function RDt(){const e=h8();return!tn()||!e?l.jsx(jl,{to:"/"}):l.jsx(AEe,{})}function IDt(){return tn()?l.jsx(l7t,{}):l.jsx(jl,{to:"/"})}const j6={"/library":{Component:u7t,modules:ce},"^\\/search(?:\\/(?<new>new))?(?:\\/(?<uuid>.+))?$":{Component:E3e,modules:s7t},"/b/home":{Component:o7t,modules:One},"/b/speak":{Component:ADt,modules:ce},"/b/zen":{Component:PDt,modules:ce},"/b/mission-control":{Component:RDt,modules:ce},"/b/try-assistant":{Component:IDt,modules:ce},"/spaces/templates":{Component:f7t,modules:ce},"/spaces/:slug":{Component:m7t,modules:a7t},"/spaces":{Component:d7t,modules:ce},"/page/:slug":{Component:Dne,modules:ce},"/discover/:topic/:slug":{Component:Dne,modules:ce},"/discover/:topic":{Component:Fne,modules:Lne},"/discover":{Component:Fne,modules:Lne},"/academic":{Component:h7t,modules:ce},"/shopping":{Component:p7t,modules:ce},"/hotels/:slug":{Component:g7t,modules:ce},"/perplexify_me":{Component:y7t,modules:ce},"/sports":{Component:NDt,modules:ce},"/sports/f1/events/:eventId":{Component:b7t,modules:ce},"/sports/f1":{Component:x7t,modules:n7t},"/sports/nba/events/:eventId":{Component:w7t,modules:ce},"/sports/nba/teams/:teamId":{Component:S7t,modules:ce},"/sports/nba/players/:playerId":{Component:C7t,modules:ce},"/sports/nba":{Component:_7t,modules:r7t},"/sports/nfl/events/:eventId":{Component:M7t,modules:ce},"/sports/nfl/teams/:teamId":{Component:T7t,modules:ce},"/sports/nfl/players/:playerId":{Component:k7t,modules:ce},"/sports/nfl":{Component:E7t,modules:ce},"/sports/championsleague/events/:eventId":{Component:A7t,modules:ce},"/sports/championsleague":{Component:N7t,modules:ce},"/sports/mlb/events/:eventId":{Component:R7t,modules:ce},"/sports/mlb":{Component:P7t,modules:ce},"/sports/cricket/events/:eventId":{Component:I6,modules:ce},"/sports/ipl/events/:eventId":{Component:I6,modules:ce},"/sports/icc/events/:eventId":{Component:I6,modules:ce},"/sports/ipl":{Component:j7t,modules:ce},"/sports/icc":{Component:I7t,modules:ce},"/sports/pga/events/:eventId":{Component:L7t,modules:ce},"/sports/pga":{Component:O7t,modules:ce},"/sports/dpworldtour/events/:eventId":{Component:F7t,modules:ce},"/sports/dpworldtour":{Component:D7t,modules:ce},"/sports/wnba/events/:eventId":{Component:B7t,modules:ce},"/sports/wnba":{Component:U7t,modules:ce},"/sports/wta":{Component:z7t,modules:ce},"/sports/atp":{Component:G7t,modules:ce},"/sports/wta/events/:eventId":{Component:q7t,modules:ce},"/sports/atp/events/:eventId":{Component:K7t,modules:ce},"/sports/atp/tournaments/:seasonId":{Component:Y7t,modules:ce},"/sports/wta/tournaments/:seasonId":{Component:Q7t,modules:ce},"/sports/ncaam/events/:eventId":{Component:V7t,modules:ce},"/sports/ncaam":{Component:W7t,modules:ce},"/sports/ncaaw/events/:eventId":{Component:$7t,modules:ce},"/sports/ncaaw":{Component:H7t,modules:ce},"/travel":{Component:v7t,modules:ce},[VC]:{Component:X7t,modules:t7t},"/account/details":{Component:J7t,modules:ce},"/account/org/details":{Component:dDt,modules:ce},"/account/org/members":{Component:fDt,modules:ce},"/account/org/insights":{Component:mDt,modules:ce},"/account/org/user-access":{Component:hDt,modules:ce},"/account/org/permissions":{Component:pDt,modules:ce},"/account/org/files":{Component:gDt,modules:ce},"/account/org/connectors":{Component:yDt,modules:ce},"/account/api/group":{Component:eDt,modules:ce},"/account/api/members":{Component:tDt,modules:ce},"/account/api/billing":{Component:nDt,modules:ce},"/account/api/keys":{Component:rDt,modules:ce},"/account/api/limits":{Component:sDt,modules:ce},"/account/api/files":{Component:aDt,modules:ce},"/account/api/files/:repositoryUuid":{Component:oDt,modules:ce},"/account/api":{Component:iDt,modules:ce},"/account/pro-perks":{Component:lDt,modules:ce},"/account/pro-perks/:name":{Component:cDt,modules:ce},"/account/org":{Component:uDt,modules:ce},"/account/purchases":{Component:vDt,modules:ce},"/account/reservations":{Component:xDt,modules:ce},"/account/tasks/:taskId":{Component:_Dt,modules:ce},"/account/tasks":{Component:bDt,modules:ce},"/account/shortcuts":{Component:wDt,modules:ce},"/account/site-instructions":{Component:SDt,modules:ce},"/account/preferences":{Component:CDt,modules:ce},"/account/personalize":{Component:EDt,modules:ce},"/account/notifications":{Component:MDt,modules:ce},"/account/files":{Component:TDt,modules:ce},"/account/connectors":{Component:kDt,modules:ce},"/account":{Component:Z7t,modules:ce},"/":{Component:kEe,modules:One}},jDt=/^\/account/,M3e=A.memo(function(){const t=f.useMemo(()=>Object.keys(j6),[]),n=BIt(t),r=f.useMemo(()=>Object.entries(j6).filter(([a])=>a.startsWith("/account")),[]),s=f.useMemo(()=>Object.entries(j6).filter(([a])=>!a.startsWith("/account")),[]);return l.jsxs(ape,{children:[l.jsx(xU,{}),l.jsxs(WM,{children:[l.jsx(fx,{path:jDt,children:l.jsx(zCe,{children:l.jsx(WM,{children:r.map(([a,{Component:o,modules:i}])=>l.jsx(fx,{path:a,children:l.jsx(Yq,{modules:i,children:l.jsx(o,{})})},a))})})}),l.jsx(fx,{children:l.jsx(GAt,{children:l.jsx(WM,{children:s.map(([a,{Component:o,modules:i}])=>l.jsx(fx,{path:a.startsWith("^")?new RegExp(a):a,children:l.jsx(Yq,{modules:i,children:l.jsx(o,{})})},a))})})})]}),l.jsx(yCe,{metadata:n})]})});M3e.displayName="SpaEntryPoint";const ODt=document.getElementById("root"),LDt=d4e.createRoot(ODt),DDt=navigator.userAgent;function Une(e,t){xhe(e,t?.user),LDt.render(l.jsx(A.StrictMode,{children:l.jsx(Zs,{fallback:Zhe,children:l.jsx(spe,{host:window.location.hostname,userAgent:DDt,session:t??void 0,children:l.jsxs(Hst,{isMobileUserAgent:UDt,hostname:BDt??"",version:e.version,minVersion:e.minVersion??0,spaRoutes:brt,strictSpa:!0,idleRefresh:!1,minVersionRefresh:!0,children:[l.jsx(M3e,{}),l.jsx(grt,{})]})})})}))}const{config:zj,cachedSession:Bne,sessionFetchPromise:FDt}=sat();window.__PPL_CONFIG__=zj;const UDt=Mhe(navigator.userAgent),BDt=window.location.host;Bne?Une(zj,Bne):FDt.then(e=>{Une(zj,e)});export{Hi as $,st as A,ye as B,ar as C,b7 as D,XWt as E,QWt as F,B2t as G,_O as H,xo as I,tn as J,N9e as K,ce as L,Be as M,On as N,OC as O,we as P,hp as Q,V2t as R,K4 as S,D as T,Ln as U,Ft as V,Am as W,Xd as X,S9 as Y,rn as Z,bP as _,Vlt as a,tg as a$,tc as a0,Je as a1,js as a2,q9 as a3,KEe as a4,nn as a5,F6t as a6,Sn as a7,fe as a8,AC as a9,a2 as aA,IUt as aB,hUt as aC,$9 as aD,V9 as aE,NM as aF,y9 as aG,cVt as aH,Wi as aI,$n as aJ,bu as aK,je as aL,uBt as aM,W9 as aN,pn as aO,Dv as aP,Uqe as aQ,Mt as aR,Jt as aS,ny as aT,nm as aU,pUt as aV,fUt as aW,xc as aX,o2t as aY,_u as aZ,Tp as a_,en as aa,GUt as ab,n3e as ac,g9 as ad,kue as ae,es as af,Cfe as ag,k9t as ah,AHt as ai,Twt as aj,A9t as ak,ei as al,Sc as am,Zp as an,hVt as ao,n1 as ap,jqe as aq,tBt as ar,_h as as,Ru as at,Cn as au,_9t as av,pt as aw,Es as ax,Sp as ay,gt as az,z as b,bUt as b$,ms as b0,I2 as b1,iUt as b2,lde as b3,$U as b4,m3e as b5,YHe as b6,f3e as b7,m9 as b8,xt as b9,i8t as bA,S9t as bB,nqe as bC,T9t as bD,DC as bE,GC as bF,Xde as bG,ea as bH,gqe as bI,Au as bJ,FUt as bK,vUt as bL,N2 as bM,Jre as bN,Uu as bO,O$ as bP,el as bQ,L$ as bR,ajt as bS,Jd as bT,$c as bU,oBt as bV,iBt as bW,sBt as bX,aBt as bY,h9 as bZ,xUt as b_,Lm as ba,mUt as bb,Ol as bc,cBt as bd,XHe as be,vqe as bf,My as bg,Go as bh,d3e as bi,OUt as bj,LUt as bk,lBt as bl,cde as bm,yqe as bn,bqe as bo,U9 as bp,woe as bq,hn as br,Pn as bs,JC as bt,MF as bu,qo as bv,Ka as bw,JE as bx,ci as by,Sa as bz,bn as c,YEe as c$,j_ as c0,pzt as c1,yOt as c2,RGe as c3,_Ut as c4,wUt as c5,OBt as c6,LBt as c7,SUt as c8,CUt as c9,kUt as cA,f_ as cB,zt as cC,pLt as cD,UUt as cE,MP as cF,wIe as cG,w$ as cH,qDt as cI,gIe as cJ,vIe as cK,yIe as cL,bIe as cM,_Ie as cN,Yae as cO,oo as cP,RQ as cQ,fF as cR,mF as cS,O9 as cT,hU as cU,Ep as cV,gze as cW,cxe as cX,uxe as cY,_Ot as cZ,qEe as c_,MUt as ca,EUt as cb,TUt as cc,gzt as cd,JBt as ce,NUt as cf,IGe as cg,AUt as ch,a3e as ci,KFt as cj,QGe as ck,Wa as cl,WU as cm,Ns as cn,Kse as co,VUt as cp,IBt as cq,$Ut as cr,an as cs,vFt as ct,xFt as cu,yBt as cv,yf as cw,Jc as cx,G8e as cy,Z$ as cz,_t as d,rBt as d$,FF as d0,bc as d1,fr as d2,wBt as d3,d_e as d4,zSt as d5,lYe as d6,dc as d7,Dm as d8,wh as d9,kF as dA,tqe as dB,PBt as dC,RBt as dD,Uwt as dE,_St as dF,wSt as dG,zUt as dH,CC as dI,jC as dJ,_yt as dK,wyt as dL,nC as dM,B8t as dN,lRe as dO,HUt as dP,Nbe as dQ,UF as dR,QFt as dS,Pd as dT,Is as dU,OO as dV,BUt as dW,Eqe as dX,W0 as dY,Sqe as dZ,TFt as d_,Lkt as da,Z0 as db,jBt as dc,_c as dd,tl as de,PMe as df,eg as dg,p0 as dh,L1 as di,L9 as dj,Ibe as dk,cCt as dl,Ta as dm,qbe as dn,OSe as dp,iCt as dq,hMe as dr,xzt as ds,WUt as dt,ufe as du,ABt as dv,yMe as dw,jpe as dx,Q8t as dy,J8t as dz,_7 as e,ep as e$,wFt as e0,iVt as e1,s1 as e2,nEe as e3,tr as e4,oVt as e5,M5e as e6,XBt as e7,fc as e8,ZBt as e9,GVt as eA,qVt as eB,kl as eC,Rc as eD,Bn as eE,obe as eF,Blt as eG,ywt as eH,Ryt as eI,Tve as eJ,Nt as eK,Mf as eL,fU as eM,Pp as eN,F9 as eO,uZe as eP,pa as eQ,pEe as eR,QCe as eS,cWt as eT,JO as eU,ibe as eV,jlt as eW,gwt as eX,pwt as eY,vwt as eZ,ZO as e_,Loe as ea,fp as eb,ezt as ec,nzt as ed,DF as ee,XSt as ef,ZHt as eg,JHt as eh,MSt as ei,Jn as ej,EBt as ek,qRt as el,za as em,f9 as en,M9 as eo,TP as ep,UU as eq,ho as er,Q2t as es,_Ye as et,BKe as eu,Yr as ev,zKe as ew,IFt as ex,HVt as ey,zVt as ez,Ut as f,bh as f$,Rye as f0,ukt as f1,vCe as f2,j4t as f3,YF as f4,vM as f5,$a as f6,k2e as f7,bHt as f8,sM as f9,_Ht as fA,il as fB,oPt as fC,JAt as fD,LHt as fE,DHt as fF,lHt as fG,czt as fH,NSe as fI,Njt as fJ,pC as fK,$Tt as fL,NTt as fM,EHt as fN,OHt as fO,cne as fP,iwe as fQ,lne as fR,mPt as fS,dTt as fT,gUt as fU,yUt as fV,fBt as fW,mBt as fX,hBt as fY,pBt as fZ,dUt as f_,XF as fa,M4t as fb,H2e as fc,ec as fd,uJe as fe,uPt as ff,CHt as fg,IHt as fh,jHt as fi,SHt as fj,Me as fk,dPt as fl,aM as fm,HHt as fn,tx as fo,uzt as fp,qh as fq,oHt as fr,uHt as fs,Mjt as ft,FHt as fu,UHt as fv,zHt as fw,BHt as fx,sPt as fy,pTt as fz,Ot as g,Iwe as g$,CGe as g0,R_t as g1,$C as g2,J9 as g3,Rhe as g4,wst as g5,zhe as g6,w2t as g7,j2t as g8,jme as g9,Qf as gA,Qkt as gB,Ykt as gC,Cp as gD,Wde as gE,JGe as gF,Wwe as gG,Xkt as gH,Yee as gI,THt as gJ,Zs as gK,_p as gL,Ec as gM,mD as gN,EF as gO,Vde as gP,SLt as gQ,Ert as gR,co as gS,E9 as gT,P9 as gU,qKe as gV,TBt as gW,U9e as gX,TC as gY,fLt as gZ,Zfe as g_,$x as ga,A2 as gb,Uxe as gc,Dxe as gd,Qt as ge,ro as gf,CFt as gg,lp as gh,EFt as gi,JFt as gj,RUt as gk,b2t as gl,$S as gm,M_t as gn,E2t as go,Op as gp,dh as gq,vh as gr,P6e as gs,U8 as gt,p8 as gu,vBt as gv,iI as gw,WKe as gx,pkt as gy,Qee as gz,hr as h,AM as h$,I9 as h0,jfe as h1,Ife as h2,dLt as h3,KRt as h4,Hd as h5,ZHe as h6,wn as h7,stt as h8,Xs as h9,Abe as hA,x0 as hB,tde as hC,Ga as hD,on as hE,lSe as hF,Hte as hG,Qh as hH,kp as hI,jWt as hJ,IWt as hK,RWt as hL,oge as hM,byt as hN,gNe as hO,$kt as hP,qfe as hQ,JF as hR,LSt as hS,J0 as hT,Rg as hU,yE as hV,yHt as hW,YHt as hX,vHt as hY,hHt as hZ,qHt as h_,jr as ha,qxe as hb,Bxe as hc,z2t as hd,bd as he,f2t as hf,x2t as hg,h2t as hh,p2t as hi,D2t as hj,tbe as hk,Lxe as hl,sbe as hm,dxe as hn,OF as ho,V2e as hp,dw as hq,tme as hr,P_e as hs,nCt as ht,rCt as hu,Fs as hv,i_e as hw,C_e as hx,M_e as hy,NF as hz,Ke as i,Ete as i$,GHt as i0,KHt as i1,gHt as i2,pHt as i3,fHt as i4,wMt as i5,mHt as i6,dHt as i7,nu as i8,vMt as i9,yNe as iA,Ise as iB,Ui as iC,uv as iD,mAe as iE,gr as iF,qse as iG,y6e as iH,yAe as iI,pAe as iJ,dAe as iK,hPe as iL,vae as iM,Y_ as iN,rme as iO,tXe as iP,nXe as iQ,Lv as iR,hPt as iS,fwe as iT,NBt as iU,QHt as iV,cPt as iW,kte as iX,Nte as iY,FTt as iZ,gTt as i_,iEe as ia,iPt as ib,R9 as ic,f4t as id,VHt as ie,$Ht as ig,WHt as ih,iHt as ii,Ca as ij,jgt as ik,C_ as il,Omt as im,Va as io,wHt as ip,fse as iq,cHt as ir,pse as is,P5e as it,Vse as iu,sr as iv,x8 as iw,Cs as ix,vNe as iy,iNe as iz,Te as j,D$t as j$,Y7 as j0,r4t as j1,dE as j2,Mu as j3,n4t as j4,R$t as j5,DYe as j6,YP as j7,jwe as j8,I$t as j9,wWt as jA,SWt as jB,S4t as jC,PWt as jD,MWt as jE,EWt as jF,kWt as jG,NWt as jH,CWt as jI,bm as jJ,aI as jK,TWt as jL,cyt as jM,gve as jN,FWt as jO,rS as jP,DWt as jQ,Spt as jR,Oye as jS,P$t as jT,A$t as jU,yde as jV,K6t as jW,H$t as jX,W$t as jY,j$t as jZ,O$t as j_,eWt as ja,J$t as jb,nTt as jc,$2e as jd,myt as je,pyt as jf,y1 as jg,G7 as jh,uyt as ji,Ll as jj,Ah as jk,Cf as jl,mWt as jm,xWt as jn,gWt as jo,pWt as jp,yWt as jq,B1 as jr,_ve as js,vWt as jt,F3t as ju,bWt as jv,_Wt as jw,hWt as jx,bve as jy,AWt as jz,Ce as k,p$t as k$,L$t as k0,U$t as k1,F$t as k2,y$t as k3,T$t as k4,N$t as k5,k$t as k6,_$t as k7,E_ as k8,v$t as k9,wve as kA,hhe as kB,X$t as kC,Z$t as kD,tWt as kE,Jxe as kF,dWt as kG,uWt as kH,$Nt as kI,z$t as kJ,OWt as kK,Yq as kL,Czt as kM,Iyt as kN,yU as kO,pAt as kP,JMe as kQ,zBe as kR,h$t as kS,bhe as kT,S$t as kU,w$t as kV,V$t as kW,B$t as kX,C$t as kY,E$t as kZ,g$t as k_,M$t as ka,$$t as kb,j9t as kc,FSe as kd,x$t as ke,b$t as kf,hje as kg,ypt as kh,X7 as ki,sWt as kj,rWt as kk,_pt as kl,vE as km,oI as kn,f$t as ko,oWt as kp,aWt as kq,lWt as kr,iWt as ks,Ept as kt,Cpt as ku,K$t as kv,Y$t as kw,nWt as kx,m$t as ky,Q$t as kz,s2t as l,yVt as l$,G$t as l0,xZe as l1,q$t as l2,Mpt as l3,fWt as l4,oZe as l5,pp as l6,fXe as l7,mXe as l8,hXe as l9,Iie as lA,UVt as lB,DUt as lC,ZN as lD,Xnt as lE,Znt as lF,Qnt as lG,mhe as lH,nBt as lI,YUt as lJ,Y6t as lK,Dtt as lL,Pu as lM,she as lN,Ltt as lO,MEe as lP,dde as lQ,prt as lR,UCe as lS,nS as lT,GIt as lU,mVt as lV,FCe as lW,qIt as lX,AU as lY,nLe as lZ,gtt as l_,jP as la,h8 as lb,ae as lc,Pi as ld,tvt as le,rTt as lf,xHt as lg,Sve as lh,Cve as li,Eve as lj,Mve as lk,rwe as ll,d4t as lm,g9t as ln,Jkt as lo,zMe as lp,Zee as lq,GMe as lr,kHt as ls,w0 as lt,S0 as lu,ESe as lv,XVt as lw,HCe as lx,EC as ly,YFt as lz,_e as m,LS as m$,pVt as m0,vVt as m1,Np as m2,JL as m3,wVt as m4,hc as m5,Hw as m6,Hs as m7,fM as m8,z7 as m9,YZe as mA,D2 as mB,ZFt as mC,ZDt as mD,Uo as mE,aUt as mF,sUt as mG,oUt as mH,Nme as mI,zHe as mJ,HHe as mK,eUt as mL,PHt as mM,MFt as mN,tUt as mO,nUt as mP,rUt as mQ,ide as mR,uVt as mS,v9 as mT,_Bt as mU,eFt as mV,bBt as mW,sie as mX,NO as mY,kO as mZ,mFt as m_,K7 as ma,H1 as mb,xht as mc,W1 as md,W2e as me,sLe as mf,VO as mg,Utt as mh,Ftt as mi,aLe as mj,oLe as mk,sjt as ml,iLe as mm,QUt as mn,XUt as mo,oa as mp,KIt as mq,pqe as mr,dBt as ms,u8e as mt,rYe as mu,$Ot as mv,En as mw,PFt as mx,AFt as my,Sst as mz,cwt as n,jFt as n$,TO as n0,HS as n1,PUt as n2,_Je as n3,FYe as n4,E_e as n5,$Bt as n6,SFt as n7,Rbe as n8,FSt as n9,y9t as nA,XMe as nB,$Be as nC,eE as nD,FO as nE,gPt as nF,Qpe as nG,JUt as nH,_Ft as nI,eBt as nJ,ZUt as nK,ude as nL,Lpe as nM,tFt as nN,kA as nO,KUt as nP,oqe as nQ,PXe as nR,Y9e as nS,nrt as nT,Hjt as nU,Fy as nV,RM as nW,JDt as nX,XDt as nY,BSe as nZ,RHt as n_,Rkt as na,Coe as nb,Rr as nc,qte as nd,azt as ne,NFt as nf,kSt as ng,ZIt as nh,v2 as ni,PBe as nj,jBe as nk,lt as nl,bF as nm,ki as nn,Hxe as no,O1 as np,VBe as nq,s_ as nr,YVt as ns,QVt as nt,KOe as nu,i6t as nv,IBe as nw,Wce as nx,Hce as ny,AL as nz,ke as o,rFt as o$,kwt as o0,pje as o1,VBt as o2,Mrt as o3,u2t as o4,gme as o5,frt as o6,N6e as o7,Qse as o8,oAe as o9,bst as oA,GHe as oB,DM as oC,jue as oD,BBt as oE,mfe as oF,yzt as oG,ZKe as oH,gBt as oI,yp as oJ,zce as oK,NL as oL,zFt as oM,xSe as oN,BEe as oO,$s as oP,yO as oQ,HC as oR,WC as oS,w3e as oT,S3e as oU,$Me as oV,fMe as oW,uFt as oX,cFt as oY,Eme as oZ,j$ as o_,rRe as oa,WAe as ob,vAe as oc,FS as od,Nat as oe,TOt as of,wu as og,Mv as oh,dr as oi,fCt as oj,r2e as ok,UEe as ol,zGe as om,fzt as on,SHe as oo,x7e as op,MHe as oq,Br as or,vzt as os,sMe as ot,DFt as ou,ffe as ov,iu as ow,xu as ox,PO as oy,wv as oz,KWt as p,QBt as p$,nFt as p0,FJe as p1,zet as p2,eVt as p3,sVt as p4,Het as p5,mc as p6,EJe as p7,ZCe as p8,lVt as p9,oJe as pA,Bie as pB,T8t as pC,dzt as pD,D9 as pE,FBt as pF,DAt as pG,vf as pH,_9 as pI,Ai as pJ,HSt as pK,xBt as pL,__e as pM,GKe as pN,vo as pO,tLe as pP,tC as pQ,_Vt as pR,YBt as pS,$3 as pT,_Ze as pU,e_e as pV,qUt as pW,Yi as pX,WBt as pY,zBt as pZ,HBt as p_,nVt as pa,sFt as pb,gFt as pc,aFt as pd,oFt as pe,rVt as pf,NVt as pg,PVt as ph,RVt as pi,EVt as pj,jVt as pk,TVt as pl,IVt as pm,MVt as pn,AVt as po,CVt as pp,kVt as pq,SVt as pr,mLe as ps,UJe as pt,xF as pu,vF as pv,V2 as pw,AJe as px,PJe as py,OVt as pz,ZWt as q,e$t as q$,KBt as q0,sCt as q1,QSt as q2,Pbe as q3,Lr as q4,qBt as q5,rLe as q6,L_ as q7,GBt as q8,XHt as q9,xVt as qA,Uie as qB,bFt as qC,sK as qD,aVt as qE,TJe as qF,kJe as qG,aJe as qH,B9 as qI,LVt as qJ,pLe as qK,LFt as qL,gLe as qM,hLe as qN,nt as qO,VDe as qP,Hn as qQ,cs as qR,gc as qS,sFe as qT,g6t as qU,KVt as qV,JVt as qW,wa as qX,gOe as qY,ZVt as qZ,Yt as q_,ozt as qa,kme as qb,Nst as qc,VP as qd,Dn as qe,Fde as qf,os as qg,uUt as qh,yGe as qi,NG as qj,jM as qk,dCt as ql,Sfe as qm,bLt as qn,wzt as qo,Szt as qp,_zt as qq,bzt as qr,_Lt as qs,ax as qt,DVt as qu,PP as qv,UBt as qw,Ty as qx,_tt as qy,gVt as qz,YWt as r,t1t as r$,Xpe as r0,t$t as r1,OFt as r2,C0 as r3,o6t as r4,bSe as r5,vy as r6,n$t as r7,Fxe as r8,bit as r9,E1t as rA,w0e as rB,WWt as rC,A_ as rD,Qe as rE,Ms as rF,eF as rG,HWt as rH,Sb as rI,n1e as rJ,Du as rK,Si as rL,sZ as rM,rr as rN,au as rO,Od as rP,Ee as rQ,Qp as rR,IE as rS,jw as rT,zWt as rU,G0e as rV,Ps as rW,Gr as rX,X0e as rY,oc as rZ,Qa as r_,zat as ra,Hat as rb,h7 as rc,Hot as rd,Wv as re,BVt as rf,mit as rg,$Vt as rh,VVt as ri,WVt as rj,bpe as rk,f7 as rl,lOt as rm,mzt as rn,ic as ro,UWt as rp,Kn as rq,Ze as rr,br as rs,Re as rt,Ur as ru,Hh as rv,VWt as rw,$Wt as rx,BWt as ry,S0e as rz,ne as s,Eyt as s$,JD as s0,GWt as s1,Y1e as s2,wAt as s3,aHt as s4,nHt as s5,Mfe as s6,CZe as s7,Yu as s8,i2 as s9,kFt as sA,hzt as sB,nc as sC,FVt as sD,kOt as sE,Ekt as sF,Whe as sG,Gme as sH,HFt as sI,nMe as sJ,$we as sK,di as sL,lXe as sM,Bqe as sN,WFt as sO,xLt as sP,MC as sQ,Wxe as sR,Vr as sS,$Ft as sT,jUt as sU,wfe as sV,SL as sW,SBt as sX,MBt as sY,CBt as sZ,Cyt as s_,Jbe as sa,eHt as sb,rHt as sc,sHt as sd,tHt as se,USt as sf,Fwt as sg,FFt as sh,T_e as si,GOt as sj,Zt as sk,UOt as sl,kMe as sm,R_e as sn,Oc as so,tzt as sp,b_e as sq,KSt as sr,AOt as ss,MMe as st,EMe as su,HRt as sv,rzt as sw,ni as sx,kBt as sy,u_e as sz,pUe as t,w2e as t0,rM as t1,Dme as t2,X1 as t3,jSe as t4,UFt as t5,VFt as t6,zde as t7,e7 as t8,BFt as t9,dVt as tA,tVt as tB,QL as tC,Kq as tD,xJe as tE,_Oe as tF,_de as tG,ghe as tH,oMe as tI,s2e as ta,XFt as tb,TLt as tc,yFt as td,lFt as te,iFt as tf,pFt as tg,hFt as th,izt as ti,lzt as tj,RFt as tk,IS as tl,zRt as tm,bVt as tn,WRt as to,szt as tp,Sv as tq,hu as tr,fh as ts,MO as tt,fVt as tu,det as tv,dFt as tw,fFt as tx,bJe as ty,yJe as tz,fs as u,Wt as v,pc as w,JWt as x,Joe as y,_o as z};
//# sourceMappingURL=index-vTGDRJdn.js.map
